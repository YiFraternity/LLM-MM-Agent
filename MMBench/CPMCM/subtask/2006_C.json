{
  "tasks": [],
  "problem_str": "问题背景：\n油田采油用的油井都是先用钻机钻几千米深的孔后，再利用固井机向四周的孔壁喷射水泥砂浆得到水泥井管后形成的。固井机上用来控制砂浆流量的阀是影响水泥井管质量的关键部件，但也会因磨损而损坏。目前我国还不能生产完整的阀体，固井机仍依赖进口。由于损坏的内筒已经被磨损得面目全非，根本无法测绘出原来的形状，因此维修时只能根据工作原理并结合阀的结构进行设计。\n\n问题要求：\n根据仪表刻度可知控制流量的阀是一个线性阀，即阀体的旋转角度与砂浆流量成正比。在设计分析中假设砂浆的压力恒定，进而流量与“过流面积“（严格定义见下文）成正比，因此阀体的旋转角度应该与“过流面积“成正比。一般来讲，控制流量的阀体为两个同心圆柱筒（两筒直径大致相等）。外筒固定，它的侧面上有一个孔，形状为两个直径不等（相差至少3、4倍以上）的圆柱体的交线（见示意图，孔的形状可能由于输出水泥砂浆的管道是圆柱形的和磨损方面的考虑而取上述形状）。内筒和外筒轴向之间没有相对运动，内筒可以自由转动。内筒的侧面上也有一个孔，它原来的形状未知（维修的任务就是设计内筒孔的形状），砂浆可以从两个孔的相交部分即“过流面积”流过。显然“过流面积”不能超过外筒孔的面积。现在数控机床比较普及，只要知道曲线的形状就可以在维修所需要的内筒上加工出合适的孔。当然从实际加工角度考虑，内筒孔的形状也不宜太复杂。\n\n可以把两个圆柱筒展开成平面，即为两个长方形，筒的转动转化为两个长方形的平动来思考，此时可将外筒孔近似看作圆孔。\n\n讨论在上述阀体结构下，在“过流面积”从为零直到外筒孔面积的范围（简称“最大范围”）内，能否通过选择内筒孔形状实现“过流面积”与内筒旋转角度成严格的线性关系。如果不能，请设计内筒孔的形状，在“最大范围”内，使“过流面积”与内筒旋转角近似成线性关系，同时在“最大范围”内，实际情况与严格线性关系的误差在某种意义下最小。\n\n实际上，固井机向孔壁喷射水泥砂浆时经常采用的“过流面积”是在一个稍小的范围内，被称为主要工作区，它是 “最大范围”中的一段。因此，在维修固井机内筒时，比较令人满意的内筒孔形状应该使主要工作区中所对应的旋转角度的线性区间尽量长（至少达“最大范围”区间长度的75%以上），而且主要工作区的最大“过流面积”尽量大（至少要达到外筒孔面积的85%以上），并且使“过流面积”和内筒的旋转角度之间的“线性关系”尽量地好。请按此要求设计内筒孔的形状。如果固井机的外筒孔也发生了程度较轻的磨损，怎么办？\nAddendum: \n示意图",
  "problem": {
    "background": "油田采油用的油井都是先用钻机钻几千米深的孔后，再利用固井机向四周的孔壁喷射水泥砂浆得到水泥井管后形成的。固井机上用来控制砂浆流量的阀是影响水泥井管质量的关键部件，但也会因磨损而损坏。目前我国还不能生产完整的阀体，固井机仍依赖进口。由于损坏的内筒已经被磨损得面目全非，根本无法测绘出原来的形状，因此维修时只能根据工作原理并结合阀的结构进行设计。",
    "problem_requirement": "根据仪表刻度可知控制流量的阀是一个线性阀，即阀体的旋转角度与砂浆流量成正比。在设计分析中假设砂浆的压力恒定，进而流量与“过流面积“（严格定义见下文）成正比，因此阀体的旋转角度应该与“过流面积“成正比。一般来讲，控制流量的阀体为两个同心圆柱筒（两筒直径大致相等）。外筒固定，它的侧面上有一个孔，形状为两个直径不等（相差至少3、4倍以上）的圆柱体的交线（见示意图，孔的形状可能由于输出水泥砂浆的管道是圆柱形的和磨损方面的考虑而取上述形状）。内筒和外筒轴向之间没有相对运动，内筒可以自由转动。内筒的侧面上也有一个孔，它原来的形状未知（维修的任务就是设计内筒孔的形状），砂浆可以从两个孔的相交部分即“过流面积”流过。显然“过流面积”不能超过外筒孔的面积。现在数控机床比较普及，只要知道曲线的形状就可以在维修所需要的内筒上加工出合适的孔。当然从实际加工角度考虑，内筒孔的形状也不宜太复杂。\n\n可以把两个圆柱筒展开成平面，即为两个长方形，筒的转动转化为两个长方形的平动来思考，此时可将外筒孔近似看作圆孔。\n\n讨论在上述阀体结构下，在“过流面积”从为零直到外筒孔面积的范围（简称“最大范围”）内，能否通过选择内筒孔形状实现“过流面积”与内筒旋转角度成严格的线性关系。如果不能，请设计内筒孔的形状，在“最大范围”内，使“过流面积”与内筒旋转角近似成线性关系，同时在“最大范围”内，实际情况与严格线性关系的误差在某种意义下最小。\n\n实际上，固井机向孔壁喷射水泥砂浆时经常采用的“过流面积”是在一个稍小的范围内，被称为主要工作区，它是 “最大范围”中的一段。因此，在维修固井机内筒时，比较令人满意的内筒孔形状应该使主要工作区中所对应的旋转角度的线性区间尽量长（至少达“最大范围”区间长度的75%以上），而且主要工作区的最大“过流面积”尽量大（至少要达到外筒孔面积的85%以上），并且使“过流面积”和内筒的旋转角度之间的“线性关系”尽量地好。请按此要求设计内筒孔的形状。如果固井机的外筒孔也发生了程度较轻的磨损，怎么办？",
    "dataset_path": [],
    "dataset_description": {},
    "variable_description": [],
    "addendum": "示意图",
    "data_summary": "",
    "data_description": {},
    "problem_str": "问题背景：\n油田采油用的油井都是先用钻机钻几千米深的孔后，再利用固井机向四周的孔壁喷射水泥砂浆得到水泥井管后形成的。固井机上用来控制砂浆流量的阀是影响水泥井管质量的关键部件，但也会因磨损而损坏。目前我国还不能生产完整的阀体，固井机仍依赖进口。由于损坏的内筒已经被磨损得面目全非，根本无法测绘出原来的形状，因此维修时只能根据工作原理并结合阀的结构进行设计。\n\n问题要求：\n根据仪表刻度可知控制流量的阀是一个线性阀，即阀体的旋转角度与砂浆流量成正比。在设计分析中假设砂浆的压力恒定，进而流量与“过流面积“（严格定义见下文）成正比，因此阀体的旋转角度应该与“过流面积“成正比。一般来讲，控制流量的阀体为两个同心圆柱筒（两筒直径大致相等）。外筒固定，它的侧面上有一个孔，形状为两个直径不等（相差至少3、4倍以上）的圆柱体的交线（见示意图，孔的形状可能由于输出水泥砂浆的管道是圆柱形的和磨损方面的考虑而取上述形状）。内筒和外筒轴向之间没有相对运动，内筒可以自由转动。内筒的侧面上也有一个孔，它原来的形状未知（维修的任务就是设计内筒孔的形状），砂浆可以从两个孔的相交部分即“过流面积”流过。显然“过流面积”不能超过外筒孔的面积。现在数控机床比较普及，只要知道曲线的形状就可以在维修所需要的内筒上加工出合适的孔。当然从实际加工角度考虑，内筒孔的形状也不宜太复杂。\n\n可以把两个圆柱筒展开成平面，即为两个长方形，筒的转动转化为两个长方形的平动来思考，此时可将外筒孔近似看作圆孔。\n\n讨论在上述阀体结构下，在“过流面积”从为零直到外筒孔面积的范围（简称“最大范围”）内，能否通过选择内筒孔形状实现“过流面积”与内筒旋转角度成严格的线性关系。如果不能，请设计内筒孔的形状，在“最大范围”内，使“过流面积”与内筒旋转角近似成线性关系，同时在“最大范围”内，实际情况与严格线性关系的误差在某种意义下最小。\n\n实际上，固井机向孔壁喷射水泥砂浆时经常采用的“过流面积”是在一个稍小的范围内，被称为主要工作区，它是 “最大范围”中的一段。因此，在维修固井机内筒时，比较令人满意的内筒孔形状应该使主要工作区中所对应的旋转角度的线性区间尽量长（至少达“最大范围”区间长度的75%以上），而且主要工作区的最大“过流面积”尽量大（至少要达到外筒孔面积的85%以上），并且使“过流面积”和内筒的旋转角度之间的“线性关系”尽量地好。请按此要求设计内筒孔的形状。如果固井机的外筒孔也发生了程度较轻的磨损，怎么办？\nAddendum: \n示意图"
  },
  "problem_background": "油田采油用的油井都是先用钻机钻几千米深的孔后，再利用固井机向四周的孔壁喷射水泥砂浆得到水泥井管后形成的。固井机上用来控制砂浆流量的阀是影响水泥井管质量的关键部件，但也会因磨损而损坏。目前我国还不能生产完整的阀体，固井机仍依赖进口。由于损坏的内筒已经被磨损得面目全非，根本无法测绘出原来的形状，因此维修时只能根据工作原理并结合阀的结构进行设计。",
  "problem_requirement": "根据仪表刻度可知控制流量的阀是一个线性阀，即阀体的旋转角度与砂浆流量成正比。在设计分析中假设砂浆的压力恒定，进而流量与“过流面积“（严格定义见下文）成正比，因此阀体的旋转角度应该与“过流面积“成正比。一般来讲，控制流量的阀体为两个同心圆柱筒（两筒直径大致相等）。外筒固定，它的侧面上有一个孔，形状为两个直径不等（相差至少3、4倍以上）的圆柱体的交线（见示意图，孔的形状可能由于输出水泥砂浆的管道是圆柱形的和磨损方面的考虑而取上述形状）。内筒和外筒轴向之间没有相对运动，内筒可以自由转动。内筒的侧面上也有一个孔，它原来的形状未知（维修的任务就是设计内筒孔的形状），砂浆可以从两个孔的相交部分即“过流面积”流过。显然“过流面积”不能超过外筒孔的面积。现在数控机床比较普及，只要知道曲线的形状就可以在维修所需要的内筒上加工出合适的孔。当然从实际加工角度考虑，内筒孔的形状也不宜太复杂。\n\n可以把两个圆柱筒展开成平面，即为两个长方形，筒的转动转化为两个长方形的平动来思考，此时可将外筒孔近似看作圆孔。\n\n讨论在上述阀体结构下，在“过流面积”从为零直到外筒孔面积的范围（简称“最大范围”）内，能否通过选择内筒孔形状实现“过流面积”与内筒旋转角度成严格的线性关系。如果不能，请设计内筒孔的形状，在“最大范围”内，使“过流面积”与内筒旋转角近似成线性关系，同时在“最大范围”内，实际情况与严格线性关系的误差在某种意义下最小。\n\n实际上，固井机向孔壁喷射水泥砂浆时经常采用的“过流面积”是在一个稍小的范围内，被称为主要工作区，它是 “最大范围”中的一段。因此，在维修固井机内筒时，比较令人满意的内筒孔形状应该使主要工作区中所对应的旋转角度的线性区间尽量长（至少达“最大范围”区间长度的75%以上），而且主要工作区的最大“过流面积”尽量大（至少要达到外筒孔面积的85%以上），并且使“过流面积”和内筒的旋转角度之间的“线性关系”尽量地好。请按此要求设计内筒孔的形状。如果固井机的外筒孔也发生了程度较轻的磨损，怎么办？",
  "problem_analysis": "这是一个典型的工程逆问题与形状优化问题，表面上看是“找到一个内筒孔的形状，使得随着内筒转动（在展开坐标上作平移）通过两个孔的相交面积（过流面积）关于转角（或对应的平移量）呈线性关系”，但从建模方法、可行性判定、误差准则、制造约束以及长期鲁棒性等方面都涉及较多隐含假设与复杂性，因而需要从宏观到细节逐步分解并批判性地审视。首先从宏观背景出发：模型的目标既有工程目标（维修后的阀在其主要工作区内能保持近似线性的流量控制、并在可加工的形状与制造公差下实现）也有数学目标（在给定的几何约束和物理假设下，构造或优化一个二维形状，使其与固定孔的滑动重叠面积关于平移量尽可能贴近线性函数，并在用户指定的“主要工作区”内满足长度和覆盖率的要求）。这一双重目标决定了解题思路既要走几何分析和可行性证明的路径，也要走数值优化与工程可加工性折衷的路径；同时还要把“主要工作区”与“最大范围”的工程要求嵌入到目标函数和约束里（例如将主要工作区长度作为一项优先目标、将最大覆盖面积比例作为约束等）。\n\n问题描述中存在若干显性与隐性假设：显性假设包括砂浆压力恒定、流量与过流面积成正比（即忽略粘性、入口/出口损失和三维流动效应）、外筒孔可近似为一个平面圆孔（这是把筒面展开为平面并简化外孔形状的关键近似）、内外筒轴线同心且轴向无相对运动（只允许相对转动/平移）。隐性假设包括：孔轴向方向的长度可视为有限但足以忽略端效应；砂浆不会在孔口处强烈沉积或堵塞；制造能够实现的最小几何特征尺寸与理论设计相容；圆孔与内孔边界的锐角或尖端不会导致局部应力集中或磨损加速。这些假设决定了模型的适用范围：在高粘度或非常非稳态流动、长期磨损显著或制造误差大时，模型预测的线性关系可能会偏离实际；因此在解释与应用结果时必须结合实验核验与在线标定。\n\n从几何与数学关系层面来分析，展开平面后的问题可表述为：给定一个固定域D（近似为半径R的圆盘，代表外筒孔在展开面上的投影）和一个可平移的域B（代表内筒孔的形状），定义随平移量s的重叠面积A(s)=measure(D ∩ (B + s e_x)). 旋转角θ与平移量成正比（s = R θ），因此要求A(s)关于s成线性函数。把指示函数写成卷积形式：A(s) = ∫ I_D(x) I_B(x - s) dx = (I_D * I_{-B})(s)。这为分析可行性提供了有力工具：希望卷积结果等于线性函数在某区间上。严格地讲，全区间（从完全闭合到完全打开，即A从0到area(D)的“最大范围”）实现严格线性，在一般情形下是不可能的或极不现实的，理由在于几何边界与指示函数的性质决定了卷积的平滑性与边界行为，而线性函数在傅里叶域具有1/ω^2的特性，难以由两个有限支集的0/1指示函数的卷积精确重建，同时还要满足端点（A=0和A=area(D)）处的几何一致性。更直观地说，随着平移，交界处进入和退出圆盘时，贡献的“切片长度”通常是圆弧的长度（关于横坐标的函数为2 sqrt(R^2 - x^2)），这类函数以非线性的方式变化；要把它变成线性的需要把B的形状精巧地设计成对这些变化进行抵消，这在全区间内通常不可能用单一简单形状完成。\n\n尽管完全严格的线性在“最大范围”上通常不可行，但在工程上完全可以取得非常好的近似：关键观察与构造性结果是这样的——如果把内筒孔在轴向方向的长度视为一个函数h(u)（u为沿周向的坐标，h为对应的“在该周向位置上的轴向开口高度”），且在某一连续的平移区间内，重叠面积可写成滑动窗口对h的积分（即当h(u)始终小于圆盘在对应横坐标处的弦长时，重叠面积等于在一个固定长度区间上对h的积分），那么选择h为一次多项式（线性函数）可以使得在这一平移区间内A(s)严格随s线性变化。推导上：若在区间内A(s)=∫_{u=-s-R}^{-s+R} h(u) du，并令h(u)=a u + b，则对s求导得A'(s)=-2 a R（常数），从而A随s呈线性。因此存在可以实现严格线性的情形，但其前提是：对于该平移区间内的所有u，h(u)≤2 sqrt(R^2-(u+s)^2)，也就是内孔在该区间处的轴向高度必须小于相应的圆弦高度（否则min操作导致以圆弦为限制，破坏线性）。这就揭示了一个重要的权衡：要获得线性映射，可以把内孔做成“高度随周向线性变化”的“梯形/斜面”或近似线性轮廓，但同时这会限制能达到的最大过流面积（因为内孔高度被限制在小于圆弦高度的范围内）。因此严格线性可以在任意给定长度的平移区间内实现，只要在该区间内能满足“内孔高度受限”的条件；但要把线性延伸到整个“最大范围”（直到A达到圆盘面积），则这个条件通常会在某处失效，从而引入非线性。\n\n基于上述结构性的结论，可以提出工程上切实可行的设计方案与优化思路。具体到用户提出的工程要求（主要工作区长度尽可能长，至少占最大范围的75%；主要工作区的最大过流面积尽量大，至少达到外筒孔面积的85%；在该主要区内关系尽量线性），建议的基本设计策略是：首先把主要工作区选定为一个连续的平移区间长度S_work对应的旋转角区间；然后在这一区间上强制保证内孔的轴向高度h(u)满足h(u) ≤ 最小圆弦长度（在该区间内各位移对应的圆弦长度的下界），以确保重叠面积等于对h的滑动积分并由此有可能通过选择h为线性函数得到严格线性；接着通过求解线性方程构造h(u)=a u + b，使得A在这个区间的起止点的值满足边界条件（例如起点为0，终点接近或等于所需的最大过流面积阈值），并在制造可行性上对h做裁剪（保证h≥0并且高度不超过加工极限）。如果采用这样的线性h，主工作区内可获得严格线性（在数学上证明成立），并且通过适当放大a、b的参数可以使主工作区对应的过流面积达到所需的85%以上；若要进一步增加主工作区占比（接近最大范围的75%或以上），需要把选择的主区对应的平移长度与圆盘覆盖长度相匹配，可能需要在内孔上采用分段线性（piecewise-linear）或平滑的近似（例如一段线性段辅以圆弧过渡）来兼顾线性度与最大覆盖。制造角度上，分段线性（或单段线性）轮廓易于数控加工（直线刀路或简单铣削路径），也便于检验和修复；必要时可用小段平滑圆弧来消除尖角以降低局部磨损。\n\n若严格要求在“最大范围”即从完全闭合到完全打开时都保持线性，而又要覆盖外筒孔的全部面积，这在实用几何下几乎不可实现；一个可行的折衷是把“最大范围”定义为工程上的完整可用区间（例如90%或95%的覆盖），并把最后的非线性尾段视为极限开度下的细调区。此时优化目标应当是多目标：在主工作区内最小化线性误差（可以采用L∞或者加权L2准则；L∞控制最大偏差更符合工程容差），同时约束主工作区长度与最大覆盖比。数值实现上，这可以转化为带约束的有限维参数优化问题：用参数化曲线（例如少量线段或低阶多项式、样条）表示h(u)，然后用离散化卷积或解析表达式计算A(s)在多点的值，构建目标函数并用非线性规划求解；为保证平滑与可制造性，可在目标中加入二阶导数能量或限制连续性/斜率上限作为正则项。\n\n关于外筒孔发生轻微磨损的情况，模型与设计应考虑鲁棒性与可调性。小范围的磨损等价于外盘半径R的有效变化或外孔边界的细微不规则，这会改变圆弦长度函数，从而影响线性关系的保持。对策包括：首先在设计时通过对R在一个估计区间内变化做灵敏度分析（Monte Carlo或线性化灵敏度）来保证设计在一定磨损幅度内仍满足主要要求（鲁棒优化）；其次在维修时采用在线标定：在装机后用实际流量或过流面积测量装置（或通过流量-转角标定）识别A(θ)的真实曲线，然后按识别结果微调内孔形状（例如在车削时留有可切削余量），或采用可更换的内衬/插片来实现低成本更换；第三可设计内孔边缘带有可微调的机械偏置（如小螺旋槽、限位片等），使得在短期磨损发生后可通过调整安装角或偏置实现再校正。\n\n必须严肃对待的模型局限与不确定性包括：把流量与过流面积严格线性化的假设忽略了非恒压、非牛顿（砂浆通常为剪切稀化或其它复杂流变性质）、入口收缩效应、边界层与局部涡流以及孔口三维形状对流动阻力的影响；展开平面近似忽视了圆柱展开过程中的几何扭曲与周向应力分布；制造公差、边缘倒角和表面粗糙度会对实际流动有显著影响。此外，长期使用中材料磨损、沉积物累积和温度/压力波动都会使得线性映射逐渐退化。因此实际工程应用应把几何设计、数值优化与实验验证（台架试验）紧密结合，并且把在岗测量、在线标定与定期维护作为流程的一部分。对于不确定性处理，推荐在设计阶段采用鲁棒/随机优化并对目标函数进行灵敏度分析；在结果解读阶段应给出误差带（例如主工作区内的最大偏差和RMS误差）而不是单一曲线。\n\n关于可替代的建模视角：一是将问题看作典型的逆卷积问题，通过在频域（傅里叶变换）上寻找满足A_desired(s)的最优B的指示函数近似（并加上0-1约束的松弛与正则化），这种方法便于从全局视角理解解的频谱性质，但需要后处理把松弛解映射回可加工的几何形状；二是把问题变为控制论角度，允许在内筒上安装可动的节流件实现电子控制或机械调节，从而把“形状设计”问题转化为“控制策略”问题；三是直接用三维流体数值模拟（CFD）与形状敏感度分析联合优化，尽管计算量大但能更真实地反映粘性与三维效应；四是采用基于样条或低阶多项式的多目标参数化，并把制造成本与可加工性作为一项显式约束，从而得到工程可行的折衷解。\n\n最后，需要强调建模与设计过程的迭代性：初步几何设计（例如采用线性高度h(u)的方案）可在数值模型中快速验证其主工作区内的线性度与覆盖率，接着在试验台上测量真实的A(θ)并用识别结果修正参数与形状，必要时引入更复杂的段状或平滑过渡段来改善边缘效果。随着装置长期运行，应建立监测与再加工流程，以应对磨损与沉积导致的性能漂移。总之，数学分析告诉我们：在合适的局部区间内，通过把内孔轴向高度参数化为周向的线性函数，可以严格实现过流面积关于转角的线性；在全区间实现完全严格线性通常不可行，但通过参数化设计、数值优化与鲁棒性分析可以在工程要求下实现高质量的近似，并在制造与后期维护上采取相应策略以保证长期可用性与可校准性。",
  "modeling_solution": "下面给出一个综合性、可实施的数学模型与求解框架，目标是设计内筒孔的周向轴向轮廓，使得在工程要求的“主要工作区”内，过流面积A关于内筒旋转角θ（或等价的平移量s=R·θ）近似线性，且满足制造可行性与对外筒轻微磨损的鲁棒性要求。首先列出模型的基本假设、变量与几何表达式，然后给出A(s)的精确几何表达式、可导致严格线性的充要条件、用于工程设计的参数化族（单段线性与分段线性）、带约束的优化问题表述与数值求解策略、对磨损的鲁棒化处理以及验证与后续改进方案。\n\n模型假设与变量定义。 假设1：砂浆静压近似恒定且流量Q与过流面积A成正比（Q = k·A），忽略粘性修正与三维流动损失（这些可通过试验或CFD获得修正因子并后置校正）。 假设2：将两个同心圆柱筒在周向展开为长方平面（周向坐标x与轴向坐标z），并近似认为外筒孔在展开平面上为半径R的圆心在x=0,z=0的圆盘D = {(x,z): x^2 + z^2 ≤ R^2}（这是问题给定的近似）。 假设3：内筒孔在展开面上可由一个非负的轴向高度函数 h(x) 描述，即在周向位置x内孔开放的轴向高度为h(x)（h为周期2πR的函数，但只在一个周期内定义即可）。 内筒绕轴旋转角θ对应于h被沿x方向平移s = R·θ（向正方向为正）。 再设外孔的同一周向位置处圆盘的可用轴向长度（圆弦长度）为 c(x) = 2 sqrt(R^2 - x^2) 对于 x ∈ [-R, R]（超出区间的c定义为0）。\n\n过流面积的几何表达式。 在内筒平移s时的过流面积为两孔的重叠面积，可写为\nA(s) = ∫_{x=-R}^{R} min{ c(x), h(x - s) } dx.\n（对x的积分区域取外孔的投影[-R,R]，内孔在该处的开口为h(x-s)，取两者的重叠轴向长度的最小值后积分得到总面积。）等价改写（变量替换u = x - s）为\nA(s) = ∫_{u=-R - s}^{R - s} min{ c(u + s), h(u) } du.\n\n严格线性条件的理论结果（关键结论）。 若存在一个连续区间 S_work（工作区，s ∈ [s1, s2]）使得對於該区间内的所有 s 和 u 在积分区间[−R−s, R−s] 中恒有 h(u) ≤ c(u + s)，則 min{c(...),h(...)} = h(u) 恒成立，进而\nA(s) = ∫_{u=-R - s}^{R - s} h(u) du.\n若进一步可保证对 s ∈ [s1, s2] 积分区间的长度为常数（即上下限随 s 平移但长度恒定；在这里上下限长度为 2R，这是恒定的），则按莱布尼茨公式对s求导得到\nA'(s) = -h(R - s) + h(-R - s).\n因此，当 h(u) 取一次函数 h(u) = a u + b（在其支撑区内定义）时，上式化简得 A'(s) = -2 a R（常数），于是 A(s) 关于 s 在该区间上严格线性，斜率 = -2 a R。 该结论表明：在满足内孔高度始终被外孔弦长限制（即 h ≤ c 在所有对应点）的前提下，选择线性高度轮廓可以在任意给定长度的连续s区间内实现严格线性映射。相应地，若要求A(s)随θ线性，则只需控制 h 为线性并满足对所有工作区位移的几何不等式约束。该条件的代价是 h(u) 通常被约束为不超过c(u + s)的最小包络，这限制了能达到的最大过流面积。\n\n工程化参数化与设计问题表述。 以实际维修可加工性为导向，建议将h(u)在一个周期内参数化为一种低维族：单段线性 h(u) = a u + b（在支撑区[u0, u0 + L_h]上非负，外部为0），或分段线性/样条（例如两到三段线性色段，端点用小半径圆弧过渡）。 设计变量是段数、每段的线性系数与段界、以及整体相对于外孔的相位（安装初始角）。 约束包括：非负性 h(u) ≥ 0，制造斜率约束 |dh/du| ≤ S_max（由加工刀具与结构强度限制）；可加工最小特征宽度 w_min（防止出现太短的高频细节）；以及最关键的几何限制：对于所有 s ∈ S_work 及 u ∈ [−R−s, R−s] ∩ supp(h)，须满足 h(u) ≤ c(u + s)（以保证min项等于h，从而获得严格线性）。 设计目标为多目标：最大化主要工作区长度 L_work（建议至少占“最大范围”2R的75%），同时使在该工作区内的最大过流面积 A_max_work ≥ α · area(D)（α 常取0.85），并最小化线性拟合误差（推荐使用L∞范数以控制最大偏差，或加权L2范数以兼顾全局拟合）。 若严格满足h ≤ c在整个S_work不可行，则将目标改为最小化线性拟合误差，同时保证约束的近似满足与制造可行性。\n\n具体优化模型（一个可实际求解的数学编程表述）。 离散化s与u：在s轴的候选工作区上取Ns个采样点 s_i，在u轴上对h采取Nu个节点（等距或自适应），把h表示为分段线性插值由节点高度 h_j 表示。 目标函数可设为最小化最大线性误差： minimize t subject to |A(s_i) - (m·s_i + q)| ≤ t for all i, 以及 A(s_i) 通过数值积分 A(s_i) = Σ_j min{ c(u_j + s_i), h_j } Δu。 这里 m,q 为拟合的线性参数（可同时优化），t 为最大偏差变量。 约束包括 h_j ≥ 0，|h_{j+1} - h_j|/Δu ≤ S_max，h_j ≤ m_j where m_j = min_{s_i in S_work} c(u_j + s_i) 若要求严格线性，则强制 h_j ≤ m_j。 对于非凸的 min 与乘积项，可以用线性化技巧（引入额外变量与线性不等式）或直接采用混合整数/连续非线性优化器；更实用的是将 min{c, h} 通过已知c和h的离散值直接求值（这是逐点常数），从而目标与约束变为线性/凸函数的组合，可用线性规划或二次规划求解，或若引入非线性拟合参数则用SQP或IPOPT等非线性优化器。\n\n制造与平滑约束、可加工化。 为减少尖角与应力集中，应在分段线性段交界处采用小半径圆弧过渡，或对h作二阶光滑正则（在目标中加入 λ ∫ (h''(u))^2 du 的项）以控制曲率并便于数控加工。 同时加入最小宽度 w_min、最大斜率 S_max（刀具半径与加工能力）等简单线性约束，保证优化结果易加工。 对单段线性解，可直接用数控将轴向高度按线性轮廓车削；对分段线性或样条则用多段刀路。\n\n鲁棒性与外筒磨损处理。 外筒孔的轻微磨损等效于圆盘半径R或边界函数c(x)发生小扰动。 在设计时可采用鲁棒优化：把R视为不确定参数 R ∈ [R0 - ΔR, R0 + ΔR]（或允许 c 被加上小的随机场扰动），将原优化改写为 min-max 问题，最小化在最坏情况下的最大线性误差或确保在所有R取值下 A_max_work ≥ α area(D;R)。 实际可用方法是对R取若干样本值并在优化时把这些样本对应的约束一并纳入（采样鲁棒优化）。 施工上建议在加工时保留少量余量以便现场调整：先加工略小于优化曲线的形状，装机后通过台架或原位标定测量 A(θ) 曲线，若不满足线性度则再车削或装入薄膜/衬片修正。\n\n数值求解策略与计算资源估计。 采用离散化后的线性/二次/非线性编程求解。 对于仅含分段线性h与线性化目标的情形，问题可构造成线性规划或二次规划，可用CPLEX/Gurobi/OSQP快速求解，Ns和Nu取数百即可（精细分辨率大约1°到0.1°角度对应Ns≈360~3600），计算在中等台式机上即时得到。 若采用非线性光滑正则或鲁棒采样（多R样本），可用IPOPT或SNOPT求解，计算时间按变量数和采样数从几秒到几小时不等。 对于更精确的流动修正（CFD耦合），需大规模并行计算资源；但一般先用几何模型完成初步设计，再用少量CFD样本做效果修正与经验校正。\n\n敏感性分析与模型校验。 对关键参数（R、S_max、w_min、外孔偏心、砂浆流变学参数）做局部灵敏度分析：计算设计变量（a,b或节点高度）对目标函数的偏导或用有限差分法评估对A(s)最大偏差的影响；通过蒙特卡洛模拟评估在制造公差与磨损扰动下设计性能的统计分布。 验证流程建议先在台架上用标准流体（可用与砂浆流变近似的非牛顿流体或用水+粘度添加剂）测量 Q(θ) 或等效 A(θ)，并与模型预测比对；用回归得到实际的Q-A非线性因子并嵌入最终校正系数k，必要时微调内筒。\n\n进一步拓展与长期维护建议。 随着新数据的获得，可将模型从几何-积分模型扩展为带有流变学修正项的经验模型：Q = k·A^β，β由台架数据估计（通常β≈1但可能有偏离）；或把CFD得到的阻力曲线映射为A的有效修正函数。 若需要更长的线性区间但单一静态形状难以满足，可考虑分段可更换衬片或可调节叶片以实现现场精调。 对长期磨损采用在线监测（流量传感器+角位置传感器）实现运行时自校正映射，或在设计时引入容易更换的内衬材料与便捷的再次加工余量。\n\n结论性建议。 在数学上，完全在“最大范围”内实现严格线性通常不可行，但在任意指定的连续工作区内，通过把内孔轴向高度参数化为线性函数且满足 h(u) ≤ min_{s∈S_work} c(u + s) 的约束，可以严格实现线性映射。 工程上推荐首先确定所需主要工作区S_work（长度至少为最大范围的75%），然后用上述分段线性参数化并以“最小化最大线性误差+制造约束+覆盖率约束”的方式做鲁棒优化；若外筒已有轻微磨损，则在优化中并入R的扰动样本或保留加工余量以便现场微调。 最后强调必须结合台架试验或少量CFD样本对模型进行校准，以确保砂浆的非理想流动与制造偏差不会使线性控制失效。",
  "task_descriptions": [
    "子任务一（物理与几何建模及严格线性条件的理论分析）旨在以严格、可复制的数学形式把工程问题从物理假设到几何表述完全明确化，并推导出“过流面积”关于内筒转角（等价平移量）的解析表达式与实现严格线性的充要条件；具体地，本子任务的范围包括：明确并写出所有必要的物理与几何假设（例如砂浆静压近似恒定、流量与局部轴向过流面积线性相关、两同心圆柱在周向展开为平面、外筒孔在展开平面上以半径 R 的圆盘表示、内筒孔由周期为 2πR 的非负轴向高度函数 h(x) 描述、内筒绕轴转角 θ 对应平移 s = R·θ），精确定义坐标与变量（周向坐标 x 或 u、轴向坐标 z、圆弦高度 c(x)=2√(R^2−x^2) 在 |x|≤R 处为外孔在该周向可用的轴向长度），并以这些符号导出过流面积的基本积分表达式 A(s)=∫_{x=−R}^{R} min{ c(x), h(x−s) } dx（等价地 A(s)=∫_{u=−R−s}^{R−s} min{ c(u+s), h(u) } du）以及在二维指示函数/卷积视角下的等价形式 A(s)=∬ I_D(x,z) I_B(x−s,z) dx dz；在此表达式基础上，本子任务要求用严格的分析工具（包括但不限于换元与积分判断、Leibniz 在参数下对积分求导的条件、最小函数的可交换性论证、傅里叶变换/卷积理论以分析频谱可重构性，以及必要时的测度论/分布意义下的讨论）推导并表述实现 A(s) 在指定区间上严格线性的充分与必要条件：说明在何种几何约束（例如存在一个工作区 S_work 使得对所有 s∈S_work 与相应 u，恒有 h(u)≤c(u+s)）下 min 项退化为单一函数并从而可用 h 的解析形式（例如一次函数）通过对 s 求导得到常数导数；同时以同一数学框架说明为什么在没有此类约束或在全量程（从 A=0 到 A=area(D)）下实现严格线性通常不可行（通过边界条件、光滑性及指示函数卷积的频谱特性给出定性和可证的理由），并精确陈述对 h 的正则性和支撑限制（例如要求 h 为连续或分段 C1，非负且有界、支持长度有限）以保证上述推导的合法性。为便于后续数值验证，该子任务还应明确需要的输入数据和函数类：外孔半径 R 及其 c(x) 函数、待检验的 s 区间 S_work、内孔候选函数空间（如一次函数、分段线性或指定正则性类）、以及欲证明或检验的边界值（例如期望 A 在端点的值）；并指明可用的数学/计算工具以完成分析与严谨验证（手工解析推导结合符号计算与数值验证工具如 Mathematica 或 MATLAB，用于验证导数计算、卷积性质和傅里叶域论证）。本子任务的可交付物应为：一份包含清晰符号约定的数学模型说明、A(s)的推导过程与证明步骤、关于实现严格线性的精确充要条件及其可验证判据、以及在所给函数类下的若干必要正则性假设和用于数值检验的最小输入清单；该子任务不涉及形状优化实现或制造约束的工程折衷，仅提供可直接用于后续优化与数值求解的严谨理论基础与判别准则。",
    "子任务2（参数化、制造约束与工程设计目标制定）的目标是在明确外孔半径R和所需主要工作区长度/位置的前提下，把内筒孔的周向轴向轮廓 h(u)（u 为展开周向坐标，周期 2πR）构造成低维、可加工且可优化的参数族，并将工程性能指标与制造/装配约束用数学表达式固定下来以便后续数值求解与数控加工；为此本子任务应完成如下具体工作：一是确定必须的输入数据和工艺参数（外孔半径 R 与圆弦函数 c(x)=2√(R^2−x^2)，目标主要工作区 S_work 的角/平移范围或其相对长度比例，目标覆盖率 α（例如0.85）对应的最小最大过流面积 A_max_work，制造约束参数包括最大允许坡度 S_max（单位高度/单位周向长度）、最小特征宽度 w_min、最小过渡圆角半径 r_min、加工公差 δ_dim、允许残余加工量 margin_for_adjust），并记录目标加工设备能力（刀具半径、最大进给速度、CNC 分辨率）；二是选定并精确定义参数化族的数学形式并给出变量说明：优先推荐分段线性（piecewise-linear）与带圆角过渡的样条（C1 或 C2 B-spline）两类，分别用节点矢量 {u_j} 与节点高度向量 {h_j} 或用基函数系数 {a_k} 表示，变量还应包括孔的支撑区间 [u0, u0+L_h]（或等价的支撑长度 L_h）、安装相位 φ（相对于外孔的初始角度偏移），以及当允许时的分段数和每段的线性系数；三是把工程目标转化为可操作的约束和目标函数条目：以设计约束形式强制 h(u)≥0、|Δh/Δu|≤S_max、相邻节点间距离≥w_min、在节点处用圆弧半径≥r_min 平滑连接，且保证支撑长度 L_h 与 S_work 一致（即 L_h 要覆盖 S_work 在平移坐标上的要求）；对覆盖率用约束或罚函数表述：max_s∈S_work ∫ min{c(u+s),h(u)} du ≥ α·area(D)（离散化后替代为采样点不等式）；当要求严格线性时，明确并实现逐节点上界 m_j = min_{s∈S_work} c(u_j + s) 并施加 h_j ≤ m_j，否则将该不等式作为软约束并通过加权罚项控制违反程度；四是给出离散化与数值表示细节以便直接实现：建议在 u 与 s 方向分别选取 Nu 与 Ns 样点（典型 Nu, Ns=200~2000，依据所需精度与加工分辨率），用分段线性插值表达 h(u) 并把积分 A(s) 近似为 Σ_j min{c(u_j+s), h_j}·Δu，在参数化阶段把可加工性约束（最大斜率、最小宽度、圆角半径、加工公差）直接以线性或二次不等式写入优化模型或作为后处理判别准则；五是规定输出与交付物：参数化结果应输出（1）最终参数向量（节点位置与高度或样条系数，支撑区与相位），（2）离散 h(u) 表格供数控插补使用，(3) CAD 曲线与带圆角的2D剖面文件（DXF/STEP），以及（4）建议的 NC/刀路策略说明（刀具半径、进给与多段粗/精加工顺序）和加工余量建议，以便加工和现场微调；六是给出可用的软件工具与实现建议：用 MATLAB/Python（NumPy）或 Julia 完成离散化与约束生成、用线性/二次规划或连续非线性优化器（CPLEX/Gurobi/OSQP/OSQP 或 IPOPT）求解参数化问题，最终在 CAD/CAM（SolidWorks/Autodesk Fusion 360/CAMotics）中导出 NC 代码并在数控机床上验证刀路可加工性；七是明确评审与验收标准：参数化解必须同时满足所有硬性制造约束、覆盖率下界和相位/支撑长度要求，生成的曲线经离散数值积分后在 S_work 的采样点上与目标线性拟合误差（可选 L∞ 或加权 L2）低于预定阈值，且 CAD 曲线满足圆角与最小特征宽度约束，以上条件作为本子任务完成的判据。",
    "子任务 3 的目标是把第 2 子任务给出的内孔参数化形式和工程约束，翻译成一个可求解的、数值化的优化问题并给出稳定高效的求解流程与实现细节；具体范围包括：输入（外孔半径 R 与弦长函数 c(x)=2√(R^2−x^2)、选定的主要工作区 S_work、离散化精度 Ns（θ/ s 方向采样数）与 Nu（周向 u 方向节点数）、制造参数 S_max、w_min、r_min、加工公差与目标覆盖率 α）、变量定义（以分段线性表示的节点高度向量 h_j, j=1..Nu，可选的相位/支撑长度作为外循环变量或并入非线性变量）和目标/约束的精确数学表达；数值化步骤为：在 S_work 上取等距或自适应 Ns 个采样 s_i，在周向区间取 Nu 个节点 u_j 并令 Δu 为节点间距，预先计算常数矩阵 c_{ij}=c(u_j + s_i)；为精确表示局部“过流轴向长度” t_{ij}=min(c_{ij}, h_j)，引入辅助变量 d_{ij}≥0 与线性约束 d_{ij} ≥ h_j − c_{ij} 和 d_{ij} ≥ c_{ij} − h_j，定义 t_{ij} = 0.5*(h_j + c_{ij} − d_{ij})，从而用完全线性的等式/不等式精确表示 min 运算；每一采样点的过流面积近似为 A_i = Σ_j t_{ij} Δu（权重可按非均匀网格调整）；优化目标建议以“最小化最大线性拟合误差”为主（minimize t_max，s.t. |A_i − (m·s_i + q)| ≤ t_max ∀ i，其中 m,q 为拟合线性参数并一并作为优化变量），并同时加入覆盖率约束（引入 A_max ≥ A_i ∀ i，且 A_max ≥ α·area(D)）、制造硬约束（h_j ≥ 0，|h_{j+1} − h_j| ≤ S_max·Δu，邻节点间距 ≥ w_min，端点圆角通过后处理或通过二次平滑正则项约束）以及若需严格线性时的上界约束 h_j ≤ m_j（其中 m_j = min_{s_i∈S_work} c_{ij}，可预先计算）；为控制曲率与便于加工，可在目标中加二次正则项 λ·Σ_j (h_{j+1} − 2h_j + h_{j−1})^2（将问题转为凸二次规划）；数值求解策略：若目标与约束均为线性或二次（含二次正则），构造成稀疏 LP/QP 并优先使用 Gurobi/CPLEX/OSQP（或开源的 ECOS/OSQP）以利用稀疏性与并行；若引入相位、支撑长度或其他拓扑整数选择，可对这些离散变量做外层网格/枚举或使用混合整数求解器（Gurobi/CPLEX MIP），但要注意规模增长；若选择直接平滑化 min 并用连续非线性目标，可用 IPOPT/SNOPT 等 NLP 求解器并利用稀疏雅可比/Hessian；推荐先以 LP/QP 格式求解以得到可靠初值，必要时用 NLP 精细化；规模与资源建议：Nu, Ns 在数百至数千范围通常足够（例如 Nu=400~1200, Ns=360~3600），在普通工作站上 LP/QP 求解时间可从秒级到数十分钟，MIP 或大规模 NLP 可能需更长；后处理步骤包括对 h_j 做小半径圆角平滑、用细网格重采样并验证 A(s) 的连续曲线拟合误差（在更密采样上计算 L∞ 与 RMS）、生成 CAD/NC 曲线（DXF/STEP）并导出刀路（考虑刀具半径与进给），最后进行逐点台架模拟或高分辨率数值积分验证；实现工具栈建议为 Python/NumPy 用于离散化与约束矩阵生成，CVX/OSQP 或 Gurobi/CPLEX 求解器用于 LP/QP，IPOPT 用于连续非线性精化，MATLAB 可用于快速原型与可视化，CAM 软件用于刀路验证。",
    "子任务4（鲁棒性验证、敏感性分析、实验校准与长期维护策略）应作为一个独立、可执行的工程与统计流程：目标是量化并降低由外筒轻微磨损、制造公差、砂浆非理想流变以及长期磨损/沉积造成的性能退化风险，并把验证、在线监测与再优化形成闭环。具体步骤与方法如下：首先以显式的不确定集或概率分布定义输入不确定性（必要输入：外孔名义半径 R0 与允许磨损区间 ΔR 或外孔边界扰动模型 c(x) 的统计特性、制造公差与表面粗糙度规格、刀具/加工偏差、砂浆的典型流变参数集（例如黏度随剪切率变化曲线或幂律参数）、运行工况范围（工作压力、温度、循环次数）以及可测量的基线台架数据）；其次构建数值评估流程：采用场景/样本化鲁棒优化或最坏情况（min–max）检验——对 R、表面粗糙度、偏心度等在预定样本集合上并行计算过流面积-转角映射并评估性能指标（例如主工作区内最大绝对偏差L∞、RMS误差与线性度指标R^2、主区覆盖率与最大过流面积占比）；采用局部灵敏度（有限差分或解析/伴随法）和全局灵敏度（Sobol/方差分解或蒙特卡洛）识别对性能影响最大的不确定源；当高成本模型（CFD）被需要时，用有限数量的高保真CFD样本构建代理模型（高斯过程或多项式混沌）以便在大规模样本上快速评估并用于鲁棒性分析。第三步制定与实施实验校准程序：在台架上用代表性非牛顿介质或经标定的替代流体进行角度扫描试验，测量角位置（高分辨编码器）、流量（质量流量计或容积流量计）、工作压力与温度，并用CMM/轮廓仪量测加工实际轮廓与外孔形貌；从实验数据拟合必要的修正模型（例如乘性系数、幂律校正或基于A的阻力修正函数），并估计不确定性分布以更新数值模型；第四步在设计与加工策略中内嵌可调整余量与可替换部件：基于灵敏度结果规定加工余量、保留可切削余量范围、并提出可替换内衬/衬片或可调安装相位的机械解决方案，以便在现场按测量结果微调；第五步建立在线监测与维护策略：部署必要传感器（角位置编码器、在线流量计、压力传感器、温度传感器），定义实时数据记录频率、基线与报警阈值（例如当主区最大偏差或线性度指标越过容限时触发维护），并给出判定规则（例如若L∞偏差＞指定%或R^2＜指定阈值则现场修整或更换内衬）；第六步把数据同化与再优化作为闭环：定期（或在报警后）用最新运行/试验数据更新不确定性模型与代理模型，必要时重新运行鲁棒优化以得到修正设计或加工指令；最后明确验收与性能准则（在给定不确定集下，主工作区内最大绝对偏差≤指定阈值或RMS≤指定值、覆盖率与最大过流面积满足最低比例），并给出所需工具与软件清单（测量：高精度流量计、角编码器、压力/温度传感器、CMM/轮廓仪；数值：Python/MATLAB、统计包/蒙特卡洛工具、全局灵敏度工具箱、CFD 软件如 OpenFOAM 或 ANSYS Fluent、高斯过程/代理建模库；优化/鲁棒工具如 IPOPT/Gurobi/CPLEX 与场景化鲁棒化脚本），以及推荐的交付物（不确定性规格文档、灵敏度报告、台架校准数据与拟合校正模型、在线监测与报警阈值表、维护与再优化操作手册）。整个子任务应输出量化的鲁棒性评估结论、可执行的校准与维护程序、以及在给定不确定性范围内的验收准则和再优化触发策略。"
  ]
}