{
  "tasks": [],
  "problem_str": "问题背景：\n随着无线通信网络和移动互联网的蓬勃发展，提供基于地理位置信息的服务（Location Based Service，简称LBS）已经成为最具市场前景和发展潜力的业务之一。从传统的GPS导航，到大众点评、微信等基于地理位置的消费信息服务和社交软件，实现其功能的基础就是要通过手机、导航仪等终端设备收发信号，来获得距离、角度等测量信息，并利用定位算法将这些测量信息转换成坐标信息。\n\n基于无线移动通信网络的定位是以获取用户手持终端（包括手机或者平板等设备）的位置为目标。而达成这一目标的手段是通过测量无线电信号的强度、传播时间、到达角等物理指标，并将其转化成终端与基站之间的距离、角度等信息，最终利用定位算法将距离、角度等信息转化成终端的坐标信息。\n\n虽然商用GPS已经随着智能手机的发展而得到了广泛的应用，但是，在诸如室内、地下、高楼林立的市区等诸多场景中，GPS定位性能较差。由于在覆盖广度和深度上，基于无线网络基站的定位系统相比GPS存在优势，因此，越来越得到运营商和新兴创业公司的重视。\n\n此外，对于大数据感兴趣的IT公司，通过统计大规模匿名用户的连续地理位置信息，可以获得用户的移动轨迹，以及在相应轨迹上的APP流量使用情况，甚至在特殊位置搜索和关注的关键词等信息。因此，诸如Google、百度等搜索引擎公司也开始提供室内定位和室内地图导航的服务。这类服务，一方面可以弥补传统的GPS在室内定位性能较差，且不能分辨用户所在楼层等问题，另一方面，也为商场、博物馆等应用场景提供了为用户提供基于室内实时地理位置信息服务的可能。\n\n目前从事室内定位和导航服务的方法，大多基于室内密集分布的WiFi设备与手机之间的通信方式。这类方法存在两个明显的劣势：首先，从技术上，WiFi设备的覆盖范围有限，并且WiFi设备收发信号所在的频段容易受到干扰；其次，从业务模型上看，用户对于接入陌生WiFi设备的戒备心理，以及WiFi设备的投资如何回收等，都存在较大的商业模式上的不确定性。\n\n与之相对的，使用基于运营商无线通信基站的方式对手机进行定位，则可以规避上述问题。商用基站的覆盖范围、信号质量均优于WiFi，而且，用户也期望自己的手持终端能够随时保持对基站设备的接入。同时，运营商推进定位服务的盈利模式清晰，在基础的数据服务之外，还可以通过为用户提供增值服务而促进运营商的业务发展。总之，基于无线通信基站的定位技术有着广阔的应用前景和巨大的商业价值。\n\n手持终端设备如何基于基站的测量信息，计算或确定终端在三维空间中的位置坐标，也就是三维定位问题，被认为是现代商用通信网络中对于定位系统真正具有技术难度的挑战。而高精度三维定位也预期能为客户提供更大的价值，在智能仓储、智能工厂、固定资产追踪等对于三维坐标信息敏感的垂直行业，以及传统运营商感兴趣的商场、办公楼中基于位置信息的室内导航、人群流量分析，以及基于精确三维地理位置信息的业务推送等服务提供基础性技术。\n\n从技术角度来看，现代商用通信网络对于三维定位的需求，是使用尽可能少的基站完成对终端设备的定位、算法收敛速度快、对于干扰和噪声具有鲁棒性等优点。\n\n相比于GPS等商用卫星定位系统，基于通信基站的定位问题，具有如下特殊性：\n\n首先，通信基站的目标区域是GPS等卫星定位系统无法实现定位的场景。在高楼林立的城区，建筑物内部、地下停车场等区域，GPS等系统是无法满足定位需求的。而这些应用场景基站、终端密集，是基站定位可以实现突破的地方。\n\n其次，通信基站所处的电磁信号环境较之GPS等系统更加复杂。以室内环境为例，无线电信号的传播过程中会经过墙面的多次反射、室内物体的折射和吸收等。这些物理因素会导致通信基站测量得到的诸如距离、角度等信息存在噪声。如何基于这些有噪声的测量，得到对于位置信息的准确估计，也是通信基站实现对终端定位需要解决的问题。\n\n基于通信基站的定位问题研究，在科研和工业界都吸引了极高的关注。一方面，定位问题与统计信号处理、最优估计理论、优化算法等诸多领域都有密切的联系，诸如数据拟合、最小二乘估计、半正定规划、流形学习等诸多数学工具都能够被用于求解上述问题。另一方面，工业界对于如何高精度地在现有通信设备上完成上述功能也表现出了浓厚的兴趣，我国除了业已广泛部署商用的北斗导航系统之外，也在积极推进基于室内室外融合定位的羲和导航系统。我们相信，基于通信基站的定位系统，将会成为羲和导航系统有力的技术手段。\n\n求解分析基站定位相关问题的有创新性和可实现性强的算法，都将有可能被快速部署到现代商业通信网络中，带来巨大的社会和经济效益。\\section*{2 基础知识}\n\n\\subsection{2.1 无线电信号的视距（LOS）与非视距（NLOS）传播}\n\n无线电信号在大气中从 A 点向 B 点传播时，如果传播过程中存在一个没有遮挡的直达路径，那么，这种传播环境被称为视距传播环境（Line Of Sight propagation，简称 LOS）。这种传播环境如图 1 中的左图所示。如果在传播过程中，由于建筑物或树木的遮挡、反射、折射等物理现象，使得从 A 点到 B 点之间存在多条无线电信号的传播路径，这种环境被称为非视距传播环境（Non-Line Of Sight，简称 NLOS）。需要注意的是，在 NLOS 传播环境中，仍然可能存在着无线电波的直达路径，只不过相比于 LOS 传播环境，在 NLOS 环境下因为遮挡、反射和吸收等损耗，信号强度会在传播过程中变得较弱。\n\n\\begin{figure}[h]\n    \\centering\n    \\includegraphics[width=\\textwidth]{image.png}\n    \\caption{LOS 径与非 LOS 径示意图}\n    \\label{fig:los_nlos}\n\\end{figure}\n\n图片来源 \\url{https://sites.google.com/site/sanaeeg473/wimax-architecture}\\section*{2.2 无线电信号的到达时间（TOA）测量}\n\n当无线电信号在基站与用户手持终端之间互相传播时，就可以计算基站与手持终端之间的距离。一种常用的测量方式是记录无线电信号从手持终端发出，直到基站接收到信号为止的无线电信号传播时间，将时间乘以无线电信号的传播速度，即得到基站与终端之间沿某条路径的距离。其中，信号在基站与终端之间的传播时间，被称为无线电信号的到达时间（Time Of Arrival，简称 TOA）。\n\n\\begin{figure}[h]\n\\centering\n\\begin{tikzpicture}[node distance=3cm, auto]\n    \\node (terminal) [circle, draw] {终端};\n    \\node (base) [rectangle, draw, right of=terminal] {基站};\n    \\draw[->] (terminal) -- node [above] {发送时刻 $t_0$} (base);\n    \\draw[->] (base) -- node [below] {接收时刻 $t_1$} (terminal);\n    \\node [below of=base, node distance=1.5cm] {TOA = $t_1 - t_0$};\n\\end{tikzpicture}\n\\caption{TOA 示意图}\n\\end{figure}\n\n准确测量 TOA 所需的前提条件是基站计时与终端计时所使用的时钟是同步的。以图 2 为例，当基站与终端在同一个“时间坐标系”里，真实 TOA 等于接收时刻 $t_1$ 减去发送时刻 $t_0$。由于电子器件的工艺原因，基站与终端的时钟可能是不同步的。可以将终端与基站想象成分别使用北京时间和伦敦时间，那么 TOA 就会在信号真实传播时间上叠加了时区之差。\n\n\\section*{2.3 影响测量精度的可能因素}\n\n基站测量得到的时间或者距离信息往往存在误差，在建模的过程中，工业上一般会着重考虑如下两个因素的影响：\n\n\\begin{itemize}\n    \\item 使用基站测量的终端信号时，需要考虑的一个很重要因素就是基站侧接收到的信号干扰比值（SINR），定义为：\n    \\[\n    \\text{SINR} = \\frac{\\text{有用信号强度}}{\\text{干扰信号强度} + \\text{噪声信号强度}}\n    \\]\n    \\item 室内环境下，由于反射频繁发生，会形成无线电波的多径传播（multi-path propagation），从而导致虽然距离很近接收到的信号强度却波动剧烈。\n\\end{itemize}\n\n\n\n问题要求：\n在本题中，需要解决如下四个方面的问题：\n\n1. 给定 10 组 LOS 或 NLOS 传播环境下从手持终端到基站的 TOA 测量数据和所有基站的三维坐标（对应附录中编号为 case 001\\_input.txt 到 case 010\\_input.txt 的文件），请根据这些测量数据计算出终端的三维坐标。（请给出详细的建模分析，建模过程中建议考虑测量模型、误差分析等内容。）\n\n2. 给定10组TOA测量数据和所有基站的三维坐标（对应附录中编号为case 011_input.txt到case 020_input.txt的文件），请设计算法，使用尽可能少的基站数目，实现近似最优的三维定位精度。\n\n3. 给定5组对处于移动过程中的终端采集到的TOA数据（对应附录中编号为case 021_input.txt到case 025_input.txt的文件），请设计算法计算出终端的运动轨迹。（此时，编号为case 021_input.txt到case 025_input.txt的文件中，只记录一个终端的TOA数据，并且是这一个终端在运动轨迹中多个位置上的TOA数据。）\n\n4. 在前述3问中，都是假设给定区域内终端到每一个基站的距离都是可知的，但事实上，基站的通信半径是有限的，因此，只有在基站通信半径覆盖范围内的终端才有可能测到自身到基站的距离。而一个终端只有获得它与足够数目的基站之间的距离测量值，才能完成定位。假设每个基站的通信半径为200米（超过范围虽然有测量数据，但无效）。请根据给定的5组测量信息数据集（对应附录中编号为case 026_input.txt到case 030_input.txt的文件），设计算法寻找出可以被基站定位的所有终端。进一步，回答如下问题：每一个场景中（对应着case 026_input.txt到case 030_input.txt五个文件中的一个），定义终端的平均“连接度数”$\\lambda$为\n\\[\n\\lambda = \\frac{\\text{所有可以被定位终端到基站之间的连接数}}{\\text{终端数}}\n\\]\n请建立模型分析连接度数$\\lambda$与定位精度之间的关系。\n\n\\section{数据集描述}\n\n\\subsection{基本数据}\n\n输入：\n\n\\begin{itemize}\n    \\item 每一个基站的三维（某些场景下会退化为二维，在文件中通过标识位给出）坐标，其中，第$j$个基站$A_j$的三维坐标标记为$(x_j, y_j, z_j)$。\n    \\item 矩阵$\\Phi = \\begin{bmatrix} \\cdots \\text{TOA}(u_i, A_j) \\cdots \\end{bmatrix}_{M \\times N}$。矩阵$\\Phi$中$i$行$j$列元素表示标号为$i$的终端（记为$u_i$）到标号为$j$的基站（记为$A_j$）之间的TOA测量值，记为$\\text{TOA}(u_i, A_j)$。假设网络中有$M$个终端，$N$个基站，则矩阵$\\Phi$的维度为$M \\times N$。\n\\end{itemize}\\begin{itemize}\n    \\item 输入文件的格式为 txt。\n    \\item 请特别注意输入文件的具体物理意义：第 1 行为基站个数 $N$，第 2 行为终端个数 $M$，第 3 行为标识位，（2 表示二维场景，3 表示三维场景），第 4 到第 $(N+3)$ 行为基站坐标，第 $(N+4)$ 行到第 $(N+M+3)$ 行为 TOA 矩阵 $\\Phi$。\n\\end{itemize}\n\n\\textbf{输出：}\n\n$M \\times 3$ 维矩阵，第 $i$ 行表示第 $i$ 个终端的三维坐标（部分场景下是 $M \\times 2$ 维矩阵），存放在 txt 文件中。\nAddendum: \n\\subsection{补充说明}\n\n\\subsubsection{关于 TOA 数据的说明}\n\n在实际场景中，受带宽、信噪比、时钟同步以及 NLOS 传播环境的影响，TOA 测量会产生不同的误差。给定的 TOA 数据也不例外。\n\n由于时钟不同步问题引起的误差在 $200 \\mathrm{~ns}$ 以内，由于 NLOS 导致的时延最高可能超过 $400 \\mathrm{~ns}$。\n\n\\subsubsection{关于无线电信号测量的说明}\n\n当无线电波沿直线传播时，估计无线电波从发送点到接收点之间真实传播时间，从数学形式上，即如下等式中对于 $x$ 的估计问题：\n\n\\begin{equation}\n\\hat{x} = x + \\omega \\tag{*}\n\\end{equation}\n\n(*) 式中，$x$ 表示真实的传播时间，$\\omega$ 表示测量噪声，$\\hat{x}$ 表示对于传播时间的观测。这时，测距问题就等价于根据观测值 $\\hat{x}$ 来获取（在某一个指标意义下）尽可能准确的 $x$。而如果无线电波传播环境比较复杂时，观测值可以表示为\n\n\\begin{equation}\n\\hat{x} = f(x, \\omega) \\tag{**}\n\\end{equation}\n\n此时的观测量 $\\hat{x}$ 中包含一些依赖于 $x$ 以及函数 $f$ 的因素。这时需要解决的仍然是如何依据观测值 $\\hat{x}$ 在某个恰当的指标意义下估计 $x$ 的问题。一般而言，场景不同，函数 $f$ 不同，算法思想可以相同也可以有所不同，我们的目标就是要能够在任意的场景下，自适应地选择与场景匹配的模型预算法，并且根据测量数据迅速对终端进行准确定位。\n\n从物理意义上说，根据式 (**) 中描述的情况，对于 $x$ 的估计相对式 (*) 来说会变得困难，但是数值解通常是容易得到的。\\subsection*{4.2.3 关于物理常数的说明}\n无线电信号的传播速度统一取 \\(3 \\times 10^8 \\, \\text{m/s}\\)。\n\n\\subsection*{4.2.4 关于输出格式的说明}\n1. 赛题最终输出文件格式应命名为 `output_case_xyz.txt`。其中 `xyz` 与赛题给定的 `input case` 编号一致，比如 `input case 1` 的输出文件格式应为 `output_case_001.txt`。\n2. 输出文件中的第 \\(i\\) 行对应着标号为 \\(i\\) 的终端的 2 维或者 3 维坐标。\n\n\\subsection*{4.2.5 关于数据读取方式的说明}\n选手可以自行选择软件对 `txt` 文件进行读取。需要注意的是在 Windows 下使用记事本打开 `txt` 文件无法体现数据格式，建议使用 Notepad++ 等文本编辑器打开。\n\n\\section*{5 测试用例}\n针对赛题第 3 部分要求的第 1 和 2 两个子问题，提供了 5 组测试数据，供选手验证算法性能。测试数据的输入信息文件命名为 `sample_case_001_input.txt` 等，对应的正确的终端位置信息文件命名为 `sample_case_001_ans.txt`。\n\n为了与实际应用场景相吻合，测试数据是在 LOS 或者 NLOS 环境下测量得到，未予说明。\nDataset Path:\n['sample_case001_ans.txt', 'sample_case001_input.txt', 'sample_case002_ans.txt', 'sample_case002_input.txt', 'sample_case003_ans.txt', 'sample_case003_input.txt', 'sample_case004_ans.txt', 'sample_case004_input.txt', 'sample_case005_ans.txt', 'sample_case005_input.txt', 'case001_input.txt', 'case002_input.txt', 'case003_input.txt', 'case004_input.txt', 'case005_input.txt', 'case006_input.txt', 'case007_input.txt', 'case008_input.txt', 'case009_input.txt', 'case010_input.txt', 'case011_input.txt', 'case012_input.txt', 'case013_input.txt', 'case014_input.txt', 'case015_input.txt', 'case016_input.txt', 'case017_input.txt', 'case018_input.txt', 'case019_input.txt', 'case020_input.txt', 'case021_input.txt', 'case022_input.txt', 'case023_input.txt', 'case024_input.txt', 'case025_input.txt', 'case026_input.txt', 'case027_input.txt', 'case028_input.txt', 'case029_input.txt', 'case030_input.txt']\n\nData Description:\n该数据集由多份以文本文件形式提供的观测记录组成（例如 sample_case001_input/ans、sample_case002_input、case002_input、case004_input 等），每个文件通常包含10组独立的测量数据组，每组由手持终端到若干基站的到达时间（TOA）测量值及所有参与基站的三维坐标（x, y, z，单位为米）构成，TOA 值以秒为单位并可能包含测量噪声。数据集中基站数量可变，最多可包含10个基站；每组数据中还常带有组索引、测量次数或时间戳等元信息；部分“ans”文件或标注项还给出根据测量计算得到的终端三维坐标作为参考真值。数据记录覆盖不同传播条件（包括 LOS 与 NLOS 场景），并在若干文件中明确包含噪声或传播环境的说明，用于仿真与算法验证。总体上，数据格式为每组一条或多条记录，记录字段重复出现（基站坐标、对应的 TOA 测量序列），旨在为三维定位算法提供输入（TOA + 基站坐标）与评估参考（部分文件提供终端位置或答案）。",
  "problem": {
    "background": "随着无线通信网络和移动互联网的蓬勃发展，提供基于地理位置信息的服务（Location Based Service，简称LBS）已经成为最具市场前景和发展潜力的业务之一。从传统的GPS导航，到大众点评、微信等基于地理位置的消费信息服务和社交软件，实现其功能的基础就是要通过手机、导航仪等终端设备收发信号，来获得距离、角度等测量信息，并利用定位算法将这些测量信息转换成坐标信息。\n\n基于无线移动通信网络的定位是以获取用户手持终端（包括手机或者平板等设备）的位置为目标。而达成这一目标的手段是通过测量无线电信号的强度、传播时间、到达角等物理指标，并将其转化成终端与基站之间的距离、角度等信息，最终利用定位算法将距离、角度等信息转化成终端的坐标信息。\n\n虽然商用GPS已经随着智能手机的发展而得到了广泛的应用，但是，在诸如室内、地下、高楼林立的市区等诸多场景中，GPS定位性能较差。由于在覆盖广度和深度上，基于无线网络基站的定位系统相比GPS存在优势，因此，越来越得到运营商和新兴创业公司的重视。\n\n此外，对于大数据感兴趣的IT公司，通过统计大规模匿名用户的连续地理位置信息，可以获得用户的移动轨迹，以及在相应轨迹上的APP流量使用情况，甚至在特殊位置搜索和关注的关键词等信息。因此，诸如Google、百度等搜索引擎公司也开始提供室内定位和室内地图导航的服务。这类服务，一方面可以弥补传统的GPS在室内定位性能较差，且不能分辨用户所在楼层等问题，另一方面，也为商场、博物馆等应用场景提供了为用户提供基于室内实时地理位置信息服务的可能。\n\n目前从事室内定位和导航服务的方法，大多基于室内密集分布的WiFi设备与手机之间的通信方式。这类方法存在两个明显的劣势：首先，从技术上，WiFi设备的覆盖范围有限，并且WiFi设备收发信号所在的频段容易受到干扰；其次，从业务模型上看，用户对于接入陌生WiFi设备的戒备心理，以及WiFi设备的投资如何回收等，都存在较大的商业模式上的不确定性。\n\n与之相对的，使用基于运营商无线通信基站的方式对手机进行定位，则可以规避上述问题。商用基站的覆盖范围、信号质量均优于WiFi，而且，用户也期望自己的手持终端能够随时保持对基站设备的接入。同时，运营商推进定位服务的盈利模式清晰，在基础的数据服务之外，还可以通过为用户提供增值服务而促进运营商的业务发展。总之，基于无线通信基站的定位技术有着广阔的应用前景和巨大的商业价值。\n\n手持终端设备如何基于基站的测量信息，计算或确定终端在三维空间中的位置坐标，也就是三维定位问题，被认为是现代商用通信网络中对于定位系统真正具有技术难度的挑战。而高精度三维定位也预期能为客户提供更大的价值，在智能仓储、智能工厂、固定资产追踪等对于三维坐标信息敏感的垂直行业，以及传统运营商感兴趣的商场、办公楼中基于位置信息的室内导航、人群流量分析，以及基于精确三维地理位置信息的业务推送等服务提供基础性技术。\n\n从技术角度来看，现代商用通信网络对于三维定位的需求，是使用尽可能少的基站完成对终端设备的定位、算法收敛速度快、对于干扰和噪声具有鲁棒性等优点。\n\n相比于GPS等商用卫星定位系统，基于通信基站的定位问题，具有如下特殊性：\n\n首先，通信基站的目标区域是GPS等卫星定位系统无法实现定位的场景。在高楼林立的城区，建筑物内部、地下停车场等区域，GPS等系统是无法满足定位需求的。而这些应用场景基站、终端密集，是基站定位可以实现突破的地方。\n\n其次，通信基站所处的电磁信号环境较之GPS等系统更加复杂。以室内环境为例，无线电信号的传播过程中会经过墙面的多次反射、室内物体的折射和吸收等。这些物理因素会导致通信基站测量得到的诸如距离、角度等信息存在噪声。如何基于这些有噪声的测量，得到对于位置信息的准确估计，也是通信基站实现对终端定位需要解决的问题。\n\n基于通信基站的定位问题研究，在科研和工业界都吸引了极高的关注。一方面，定位问题与统计信号处理、最优估计理论、优化算法等诸多领域都有密切的联系，诸如数据拟合、最小二乘估计、半正定规划、流形学习等诸多数学工具都能够被用于求解上述问题。另一方面，工业界对于如何高精度地在现有通信设备上完成上述功能也表现出了浓厚的兴趣，我国除了业已广泛部署商用的北斗导航系统之外，也在积极推进基于室内室外融合定位的羲和导航系统。我们相信，基于通信基站的定位系统，将会成为羲和导航系统有力的技术手段。\n\n求解分析基站定位相关问题的有创新性和可实现性强的算法，都将有可能被快速部署到现代商业通信网络中，带来巨大的社会和经济效益。\\section*{2 基础知识}\n\n\\subsection{2.1 无线电信号的视距（LOS）与非视距（NLOS）传播}\n\n无线电信号在大气中从 A 点向 B 点传播时，如果传播过程中存在一个没有遮挡的直达路径，那么，这种传播环境被称为视距传播环境（Line Of Sight propagation，简称 LOS）。这种传播环境如图 1 中的左图所示。如果在传播过程中，由于建筑物或树木的遮挡、反射、折射等物理现象，使得从 A 点到 B 点之间存在多条无线电信号的传播路径，这种环境被称为非视距传播环境（Non-Line Of Sight，简称 NLOS）。需要注意的是，在 NLOS 传播环境中，仍然可能存在着无线电波的直达路径，只不过相比于 LOS 传播环境，在 NLOS 环境下因为遮挡、反射和吸收等损耗，信号强度会在传播过程中变得较弱。\n\n\\begin{figure}[h]\n    \\centering\n    \\includegraphics[width=\\textwidth]{image.png}\n    \\caption{LOS 径与非 LOS 径示意图}\n    \\label{fig:los_nlos}\n\\end{figure}\n\n图片来源 \\url{https://sites.google.com/site/sanaeeg473/wimax-architecture}\\section*{2.2 无线电信号的到达时间（TOA）测量}\n\n当无线电信号在基站与用户手持终端之间互相传播时，就可以计算基站与手持终端之间的距离。一种常用的测量方式是记录无线电信号从手持终端发出，直到基站接收到信号为止的无线电信号传播时间，将时间乘以无线电信号的传播速度，即得到基站与终端之间沿某条路径的距离。其中，信号在基站与终端之间的传播时间，被称为无线电信号的到达时间（Time Of Arrival，简称 TOA）。\n\n\\begin{figure}[h]\n\\centering\n\\begin{tikzpicture}[node distance=3cm, auto]\n    \\node (terminal) [circle, draw] {终端};\n    \\node (base) [rectangle, draw, right of=terminal] {基站};\n    \\draw[->] (terminal) -- node [above] {发送时刻 $t_0$} (base);\n    \\draw[->] (base) -- node [below] {接收时刻 $t_1$} (terminal);\n    \\node [below of=base, node distance=1.5cm] {TOA = $t_1 - t_0$};\n\\end{tikzpicture}\n\\caption{TOA 示意图}\n\\end{figure}\n\n准确测量 TOA 所需的前提条件是基站计时与终端计时所使用的时钟是同步的。以图 2 为例，当基站与终端在同一个“时间坐标系”里，真实 TOA 等于接收时刻 $t_1$ 减去发送时刻 $t_0$。由于电子器件的工艺原因，基站与终端的时钟可能是不同步的。可以将终端与基站想象成分别使用北京时间和伦敦时间，那么 TOA 就会在信号真实传播时间上叠加了时区之差。\n\n\\section*{2.3 影响测量精度的可能因素}\n\n基站测量得到的时间或者距离信息往往存在误差，在建模的过程中，工业上一般会着重考虑如下两个因素的影响：\n\n\\begin{itemize}\n    \\item 使用基站测量的终端信号时，需要考虑的一个很重要因素就是基站侧接收到的信号干扰比值（SINR），定义为：\n    \\[\n    \\text{SINR} = \\frac{\\text{有用信号强度}}{\\text{干扰信号强度} + \\text{噪声信号强度}}\n    \\]\n    \\item 室内环境下，由于反射频繁发生，会形成无线电波的多径传播（multi-path propagation），从而导致虽然距离很近接收到的信号强度却波动剧烈。\n\\end{itemize}\n\n",
    "problem_requirement": "在本题中，需要解决如下四个方面的问题：\n\n1. 给定 10 组 LOS 或 NLOS 传播环境下从手持终端到基站的 TOA 测量数据和所有基站的三维坐标（对应附录中编号为 case 001\\_input.txt 到 case 010\\_input.txt 的文件），请根据这些测量数据计算出终端的三维坐标。（请给出详细的建模分析，建模过程中建议考虑测量模型、误差分析等内容。）\n\n2. 给定10组TOA测量数据和所有基站的三维坐标（对应附录中编号为case 011_input.txt到case 020_input.txt的文件），请设计算法，使用尽可能少的基站数目，实现近似最优的三维定位精度。\n\n3. 给定5组对处于移动过程中的终端采集到的TOA数据（对应附录中编号为case 021_input.txt到case 025_input.txt的文件），请设计算法计算出终端的运动轨迹。（此时，编号为case 021_input.txt到case 025_input.txt的文件中，只记录一个终端的TOA数据，并且是这一个终端在运动轨迹中多个位置上的TOA数据。）\n\n4. 在前述3问中，都是假设给定区域内终端到每一个基站的距离都是可知的，但事实上，基站的通信半径是有限的，因此，只有在基站通信半径覆盖范围内的终端才有可能测到自身到基站的距离。而一个终端只有获得它与足够数目的基站之间的距离测量值，才能完成定位。假设每个基站的通信半径为200米（超过范围虽然有测量数据，但无效）。请根据给定的5组测量信息数据集（对应附录中编号为case 026_input.txt到case 030_input.txt的文件），设计算法寻找出可以被基站定位的所有终端。进一步，回答如下问题：每一个场景中（对应着case 026_input.txt到case 030_input.txt五个文件中的一个），定义终端的平均“连接度数”$\\lambda$为\n\\[\n\\lambda = \\frac{\\text{所有可以被定位终端到基站之间的连接数}}{\\text{终端数}}\n\\]\n请建立模型分析连接度数$\\lambda$与定位精度之间的关系。\n\n\\section{数据集描述}\n\n\\subsection{基本数据}\n\n输入：\n\n\\begin{itemize}\n    \\item 每一个基站的三维（某些场景下会退化为二维，在文件中通过标识位给出）坐标，其中，第$j$个基站$A_j$的三维坐标标记为$(x_j, y_j, z_j)$。\n    \\item 矩阵$\\Phi = \\begin{bmatrix} \\cdots \\text{TOA}(u_i, A_j) \\cdots \\end{bmatrix}_{M \\times N}$。矩阵$\\Phi$中$i$行$j$列元素表示标号为$i$的终端（记为$u_i$）到标号为$j$的基站（记为$A_j$）之间的TOA测量值，记为$\\text{TOA}(u_i, A_j)$。假设网络中有$M$个终端，$N$个基站，则矩阵$\\Phi$的维度为$M \\times N$。\n\\end{itemize}\\begin{itemize}\n    \\item 输入文件的格式为 txt。\n    \\item 请特别注意输入文件的具体物理意义：第 1 行为基站个数 $N$，第 2 行为终端个数 $M$，第 3 行为标识位，（2 表示二维场景，3 表示三维场景），第 4 到第 $(N+3)$ 行为基站坐标，第 $(N+4)$ 行到第 $(N+M+3)$ 行为 TOA 矩阵 $\\Phi$。\n\\end{itemize}\n\n\\textbf{输出：}\n\n$M \\times 3$ 维矩阵，第 $i$ 行表示第 $i$ 个终端的三维坐标（部分场景下是 $M \\times 2$ 维矩阵），存放在 txt 文件中。",
    "dataset_path": [
      "sample_case001_ans.txt",
      "sample_case001_input.txt",
      "sample_case002_ans.txt",
      "sample_case002_input.txt",
      "sample_case003_ans.txt",
      "sample_case003_input.txt",
      "sample_case004_ans.txt",
      "sample_case004_input.txt",
      "sample_case005_ans.txt",
      "sample_case005_input.txt",
      "case001_input.txt",
      "case002_input.txt",
      "case003_input.txt",
      "case004_input.txt",
      "case005_input.txt",
      "case006_input.txt",
      "case007_input.txt",
      "case008_input.txt",
      "case009_input.txt",
      "case010_input.txt",
      "case011_input.txt",
      "case012_input.txt",
      "case013_input.txt",
      "case014_input.txt",
      "case015_input.txt",
      "case016_input.txt",
      "case017_input.txt",
      "case018_input.txt",
      "case019_input.txt",
      "case020_input.txt",
      "case021_input.txt",
      "case022_input.txt",
      "case023_input.txt",
      "case024_input.txt",
      "case025_input.txt",
      "case026_input.txt",
      "case027_input.txt",
      "case028_input.txt",
      "case029_input.txt",
      "case030_input.txt"
    ],
    "dataset_description": {
      "sample_case001_ans": "sample_case001_ans.txt包含了从手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "sample_case001_input": "sample_case001_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "sample_case002_input": "sample_case002_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。每组数据包括测量数据和基站坐标，用于计算终端的三维坐标。",
      "sample_case003_ans": "sample_case003_ans.txt包含了从手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "sample_case005_ans": "sample_case005_ans.txt包含了手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "case002_input": "case002_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case004_input": "case004_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case006_input": "case006_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case007_input": "case007_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件用于计算终端的三维坐标。",
      "case008_input": "case008_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case009_input": "case009_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件用于计算终端的三维坐标。",
      "case011_input": "case011_input.txt包含了10组TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "case013_input": "case013_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，基站的三维坐标用于后续的三维定位计算。",
      "case015_input": "case015_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，基站的三维坐标用于后续的三维定位计算。",
      "case019_input": "case019_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括一个终端到基站的TOA测量值以及基站的三维坐标。",
      "case020_input": "case020_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个终端到基站的测量距离，基站的三维坐标用于后续的定位计算。",
      "case022_input": "case022_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个终端到基站的测量距离，基站的三维坐标用于后续的定位计算。",
      "case023_input": "case023_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括测量值和基站坐标，用于计算终端的三维坐标。",
      "case027_input": "case027_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括测量数据和基站坐标信息，用于计算终端的三维坐标。",
      "case028_input": "case028_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括一个终端到多个基站的TOA测量值以及基站的三维坐标。",
      "case029_input": "case029_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，用于计算终端的三维坐标。",
      "case030_input": "case030_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。"
    },
    "variable_description": [
      {},
      {},
      {},
      {
        "测量数据": "TOA测量值，单位为秒",
        "基站1_x": "基站1的x坐标，单位为米",
        "基站1_y": "基站1的y坐标，单位为米",
        "基站1_z": "基站1的z坐标，单位为米",
        "基站2_x": "基站2的x坐标，单位为米",
        "基站2_y": "基站2的y坐标，单位为米",
        "基站2_z": "基站2的z坐标，单位为米",
        "基站3_x": "基站3的x坐标，单位为米",
        "基站3_y": "基站3的y坐标，单位为米",
        "基站3_z": "基站3的z坐标，单位为米",
        "基站4_x": "基站4的x坐标，单位为米",
        "基站4_y": "基站4的y坐标，单位为米",
        "基站4_z": "基站4的z坐标，单位为米",
        "基站5_x": "基站5的x坐标，单位为米",
        "基站5_y": "基站5的y坐标，单位为米",
        "基站5_z": "基站5的z坐标，单位为米",
        "基站6_x": "基站6的x坐标，单位为米",
        "基站6_y": "基站6的y坐标，单位为米",
        "基站6_z": "基站6的z坐标，单位为米",
        "基站7_x": "基站7的x坐标，单位为米",
        "基站7_y": "基站7的y坐标，单位为米",
        "基站7_z": "基站7的z坐标，单位为米",
        "基站8_x": "基站8的x坐标，单位为米",
        "基站8_y": "基站8的y坐标，单位为米",
        "基站8_z": "基站8的z坐标，单位为米",
        "基站9_x": "基站9的x坐标，单位为米",
        "基站9_y": "基站9的y坐标，单位为米",
        "基站9_z": "基站9的z坐标，单位为米",
        "基站10_x": "基站10的x坐标，单位为米",
        "基站10_y": "基站10的y坐标，单位为米",
        "基站10_z": "基站10的z坐标，单位为米"
      },
      {
        "字段1": "手持终端到基站的TOA测量值（单位：秒）",
        "字段2": "基站1的三维坐标X轴值（单位：米）",
        "字段3": "基站1的三维坐标Y轴值（单位：米）",
        "字段4": "基站1的三维坐标Z轴值（单位：米）",
        "字段5": "基站2的三维坐标X轴值（单位：米）",
        "字段6": "基站2的三维坐标Y轴值（单位：米）",
        "字段7": "基站2的三维坐标Z轴值（单位：米）",
        "字段8": "基站3的三维坐标X轴值（单位：米）",
        "字段9": "基站3的三维坐标Y轴值（单位：米）",
        "字段10": "基站3的三维坐标Z轴值（单位：米）",
        "字段11": "基站4的三维坐标X轴值（单位：米）",
        "字段12": "基站4的三维坐标Y轴值（单位：米）",
        "字段13": "基站4的三维坐标Z轴值（单位：米）",
        "字段14": "基站5的三维坐标X轴值（单位：米）",
        "字段15": "基站5的三维坐标Y轴值（单位：米）",
        "字段16": "基站5的三维坐标Z轴值（单位：米）",
        "字段17": "基站6的三维坐标X轴值（单位：米）",
        "字段18": "基站6的三维坐标Y轴值（单位：米）",
        "字段19": "基站6的三维坐标Z轴值（单位：米）",
        "字段20": "基站7的三维坐标X轴值（单位：米）",
        "字段21": "基站7的三维坐标Y轴值（单位：米）",
        "字段22": "基站7的三维坐标Z轴值（单位：米）",
        "字段23": "基站8的三维坐标X轴值（单位：米）",
        "字段24": "基站8的三维坐标Y轴值（单位：米）",
        "字段25": "基站8的三维坐标Z轴值（单位：米）",
        "字段26": "基站9的三维坐标X轴值（单位：米）",
        "字段27": "基站9的三维坐标Y轴值（单位：米）",
        "字段28": "基站9的三维坐标Z轴值（单位：米）",
        "字段29": "基站10的三维坐标X轴值（单位：米）",
        "字段30": "基站10的三维坐标Y轴值（单位：米）",
        "字段31": "基站10的三维坐标Z轴值（单位：米）"
      },
      {},
      {},
      {},
      {
        "字段1": "基站1的x坐标",
        "字段2": "基站1的y坐标",
        "字段3": "基站1的z坐标",
        "字段4": "基站2的x坐标",
        "字段5": "基站2的y坐标",
        "字段6": "基站2的z坐标",
        "字段7": "基站3的x坐标",
        "字段8": "基站3的y坐标",
        "字段9": "基站3的z坐标",
        "字段10": "基站4的x坐标",
        "字段11": "基站4的y坐标",
        "字段12": "基站4的z坐标",
        "字段13": "基站5的x坐标",
        "字段14": "基站5的y坐标",
        "字段15": "基站5的z坐标",
        "字段16": "基站6的x坐标",
        "字段17": "基站6的y坐标",
        "字段18": "基站6的z坐标",
        "字段19": "基站7的x坐标",
        "字段20": "基站7的y坐标",
        "字段21": "基站7的z坐标",
        "字段22": "基站8的x坐标",
        "字段23": "基站8的y坐标",
        "字段24": "基站8的z坐标",
        "字段25": "基站9的x坐标",
        "字段26": "基站9的y坐标",
        "字段27": "基站9的z坐标",
        "字段28": "基站10的x坐标",
        "字段29": "基站10的y坐标",
        "字段30": "基站10的z坐标",
        "字段31": "测量数据1的TOA值",
        "字段32": "测量数据2的TOA值",
        "字段33": "测量数据3的TOA值",
        "字段34": "测量数据4的TOA值",
        "字段35": "测量数据5的TOA值",
        "字段36": "测量数据6的TOA值",
        "字段37": "测量数据7的TOA值",
        "字段38": "测量数据8的TOA值",
        "字段39": "测量数据9的TOA值",
        "字段40": "测量数据10的TOA值",
        "字段41": "终端的x坐标",
        "字段42": "终端的y坐标",
        "字段43": "终端的z坐标"
      },
      {},
      {},
      {
        "TOA测量数据": "手持终端到基站的TOA测量值，单位为秒",
        "基站三维坐标": "所有基站的三维坐标，单位为米"
      },
      {},
      {
        "测量次数": "TOA测量数据的次数",
        "基站数量": "参与测量的基站数量",
        "基站坐标_x": "基站的x坐标",
        "基站坐标_y": "基站的y坐标",
        "基站坐标_z": "基站的z坐标",
        "TOA测量值": "从手持终端到对应基站的TOA测量值"
      },
      {},
      {
        "0": "测量数据的数量",
        "1": "测量数据的总数",
        "2": "基站的数量",
        "3": "基站的三维坐标（x, y, z）"
      },
      {
        "测量数据": "手持终端到基站的TOA测量值，单位为秒",
        "基站坐标": "所有基站的三维坐标，单位为米"
      },
      {
        "num_groups": "数据组的数量，本文件为10组。",
        "num_measurements_per_group": "每组数据中的测量数据数量。",
        "base_station_coordinates": "基站的三维坐标。",
        "toa_measurements": "从手持终端到基站的TOA测量数据，单位为秒。",
        "noise": "测量数据中的噪声，单位为秒。"
      },
      {
        "TOA测量数据": "手持终端到基站的TOA测量值，单位为秒",
        "基站三维坐标": "所有基站的三维坐标，单位为米"
      },
      {},
      {
        "num_groups": "数据组的数量，这里是10组。",
        "group_index": "数据组的索引号，从1到10。",
        "num_beacons": "每个数据组中基站的数量。",
        "beacon_coordinates": "基站的三维坐标，格式为x y z。",
        "toa_measurements": "从手持终端到每个基站的TOA测量值，格式为一组TOA值，对应一个基站。"
      },
      {},
      {
        "num_groups": "测量数据组数，本文件为10组",
        "group_id": "测量数据组的编号，从1到10",
        "num_basestations": "基站数量，本文件中基站数量固定",
        "basestation_coordinates": "基站的三维坐标，格式为x y z",
        "toa_measurements": "从手持终端到每个基站的TOA测量值，单位为秒"
      },
      {},
      {
        "num_groups": "测量数据组数，本文件为10组",
        "num_basestations": "基站数量",
        "base_station_coordinates": "基站的三维坐标，格式为x y z",
        "toa_measurements": "从手持终端到每个基站的TOA测量值，格式为基站1 TOA 基站2 TOA ... 基站N TOA"
      },
      {},
      {},
      {},
      {
        "num_groups": "数据组的数量，本文件为10组。",
        "group_index": "数据组的索引，从0到9。",
        "toa_measurements": "终端到基站的TOA测量值，单位为秒。",
        "base_station_coordinates": "基站的三维坐标，单位为米，格式为[x, y, z]。",
        "noise": "测量数据中的噪声值，单位为秒。"
      },
      {
        "num_groups": "测量数据组数，本文件为10组",
        "num_basestations": "基站数量",
        "num_measurements_per_group": "每组测量数据的数量",
        "base_station_coordinates": "基站的三维坐标，格式为[x, y, z]",
        "toa_measurements": "从终端到每个基站的TOA测量值，格式为[基站1测量值, 基站2测量值, ..., 基站n测量值]"
      },
      {},
      {
        "num_groups": "数据组的数量，本文件为10组。",
        "group_id": "数据组的编号，从1到10。",
        "num_basestations": "基站的数量，本文件中基站数量固定。",
        "basestation_coordinates": "基站的三维坐标，格式为x y z。",
        "toa_measurements": "从终端到每个基站的TOA测量值，单位为秒。",
        "noise": "测量噪声，表示测量值的不确定性，单位为秒。"
      },
      {
        "测量值": "TOA测量数据，表示从手持终端到基站的测量时间，单位为秒。",
        "基站坐标_x": "基站的x坐标，单位为米。",
        "基站坐标_y": "基站的y坐标，单位为米。",
        "基站坐标_z": "基站的z坐标，单位为米。"
      },
      {},
      {
        "line_number": "行号",
        "timestamp": "时间戳，单位为秒",
        "num_basestations": "基站数量",
        "basestation_coordinates": "基站的三维坐标，格式为x y z",
        "toa_measurements": "从终端到各基站的TOA测量值，格式为基站1 TOA 基站2 TOA ... 基站n TOA"
      },
      {},
      {
        "测量数据": "TOA测量数据，表示从手持终端到基站的测量距离，单位为米。",
        "基站坐标": "所有基站的三维坐标，单位为米。",
        "终端坐标": "根据测量数据和基站坐标计算出的终端的三维坐标，单位为米。"
      },
      {
        "num_groups": "数据组的数量，本文件为10组。",
        "group_index": "数据组的索引，从0到9。",
        "base_station_coordinates": "基站的三维坐标，格式为[x, y, z]。",
        "toa_measurements": "终端到每个基站的TOA测量值，单位为秒。",
        "terminal_coordinates": "终端的三维坐标，格式为[x, y, z]。"
      },
      {
        "测量数据": "手持终端到基站的TOA测量值，单位为秒",
        "基站坐标": "所有基站的三维坐标，单位为米"
      },
      {
        "测量数据": "手持终端到基站的TOA测量值，单位为秒",
        "基站坐标_x": "基站的x坐标，单位为米",
        "基站坐标_y": "基站的y坐标，单位为米",
        "基站坐标_z": "基站的z坐标，单位为米"
      }
    ],
    "addendum": "\\subsection{补充说明}\n\n\\subsubsection{关于 TOA 数据的说明}\n\n在实际场景中，受带宽、信噪比、时钟同步以及 NLOS 传播环境的影响，TOA 测量会产生不同的误差。给定的 TOA 数据也不例外。\n\n由于时钟不同步问题引起的误差在 $200 \\mathrm{~ns}$ 以内，由于 NLOS 导致的时延最高可能超过 $400 \\mathrm{~ns}$。\n\n\\subsubsection{关于无线电信号测量的说明}\n\n当无线电波沿直线传播时，估计无线电波从发送点到接收点之间真实传播时间，从数学形式上，即如下等式中对于 $x$ 的估计问题：\n\n\\begin{equation}\n\\hat{x} = x + \\omega \\tag{*}\n\\end{equation}\n\n(*) 式中，$x$ 表示真实的传播时间，$\\omega$ 表示测量噪声，$\\hat{x}$ 表示对于传播时间的观测。这时，测距问题就等价于根据观测值 $\\hat{x}$ 来获取（在某一个指标意义下）尽可能准确的 $x$。而如果无线电波传播环境比较复杂时，观测值可以表示为\n\n\\begin{equation}\n\\hat{x} = f(x, \\omega) \\tag{**}\n\\end{equation}\n\n此时的观测量 $\\hat{x}$ 中包含一些依赖于 $x$ 以及函数 $f$ 的因素。这时需要解决的仍然是如何依据观测值 $\\hat{x}$ 在某个恰当的指标意义下估计 $x$ 的问题。一般而言，场景不同，函数 $f$ 不同，算法思想可以相同也可以有所不同，我们的目标就是要能够在任意的场景下，自适应地选择与场景匹配的模型预算法，并且根据测量数据迅速对终端进行准确定位。\n\n从物理意义上说，根据式 (**) 中描述的情况，对于 $x$ 的估计相对式 (*) 来说会变得困难，但是数值解通常是容易得到的。\\subsection*{4.2.3 关于物理常数的说明}\n无线电信号的传播速度统一取 \\(3 \\times 10^8 \\, \\text{m/s}\\)。\n\n\\subsection*{4.2.4 关于输出格式的说明}\n1. 赛题最终输出文件格式应命名为 `output_case_xyz.txt`。其中 `xyz` 与赛题给定的 `input case` 编号一致，比如 `input case 1` 的输出文件格式应为 `output_case_001.txt`。\n2. 输出文件中的第 \\(i\\) 行对应着标号为 \\(i\\) 的终端的 2 维或者 3 维坐标。\n\n\\subsection*{4.2.5 关于数据读取方式的说明}\n选手可以自行选择软件对 `txt` 文件进行读取。需要注意的是在 Windows 下使用记事本打开 `txt` 文件无法体现数据格式，建议使用 Notepad++ 等文本编辑器打开。\n\n\\section*{5 测试用例}\n针对赛题第 3 部分要求的第 1 和 2 两个子问题，提供了 5 组测试数据，供选手验证算法性能。测试数据的输入信息文件命名为 `sample_case_001_input.txt` 等，对应的正确的终端位置信息文件命名为 `sample_case_001_ans.txt`。\n\n为了与实际应用场景相吻合，测试数据是在 LOS 或者 NLOS 环境下测量得到，未予说明。",
    "data_summary": "Dataset Path:\n['sample_case001_ans.txt', 'sample_case001_input.txt', 'sample_case002_ans.txt', 'sample_case002_input.txt', 'sample_case003_ans.txt', 'sample_case003_input.txt', 'sample_case004_ans.txt', 'sample_case004_input.txt', 'sample_case005_ans.txt', 'sample_case005_input.txt', 'case001_input.txt', 'case002_input.txt', 'case003_input.txt', 'case004_input.txt', 'case005_input.txt', 'case006_input.txt', 'case007_input.txt', 'case008_input.txt', 'case009_input.txt', 'case010_input.txt', 'case011_input.txt', 'case012_input.txt', 'case013_input.txt', 'case014_input.txt', 'case015_input.txt', 'case016_input.txt', 'case017_input.txt', 'case018_input.txt', 'case019_input.txt', 'case020_input.txt', 'case021_input.txt', 'case022_input.txt', 'case023_input.txt', 'case024_input.txt', 'case025_input.txt', 'case026_input.txt', 'case027_input.txt', 'case028_input.txt', 'case029_input.txt', 'case030_input.txt']\n\nData Description:\n该数据集由多份以文本文件形式提供的观测记录组成（例如 sample_case001_input/ans、sample_case002_input、case002_input、case004_input 等），每个文件通常包含10组独立的测量数据组，每组由手持终端到若干基站的到达时间（TOA）测量值及所有参与基站的三维坐标（x, y, z，单位为米）构成，TOA 值以秒为单位并可能包含测量噪声。数据集中基站数量可变，最多可包含10个基站；每组数据中还常带有组索引、测量次数或时间戳等元信息；部分“ans”文件或标注项还给出根据测量计算得到的终端三维坐标作为参考真值。数据记录覆盖不同传播条件（包括 LOS 与 NLOS 场景），并在若干文件中明确包含噪声或传播环境的说明，用于仿真与算法验证。总体上，数据格式为每组一条或多条记录，记录字段重复出现（基站坐标、对应的 TOA 测量序列），旨在为三维定位算法提供输入（TOA + 基站坐标）与评估参考（部分文件提供终端位置或答案）。",
    "data_description": {
      "sample_case001_ans": "sample_case001_ans.txt包含了从手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "sample_case001_input": "sample_case001_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "sample_case002_input": "sample_case002_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。每组数据包括测量数据和基站坐标，用于计算终端的三维坐标。",
      "sample_case003_ans": "sample_case003_ans.txt包含了从手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "sample_case005_ans": "sample_case005_ans.txt包含了手持终端到基站的TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "case002_input": "case002_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case004_input": "case004_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case006_input": "case006_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case007_input": "case007_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件用于计算终端的三维坐标。",
      "case008_input": "case008_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。",
      "case009_input": "case009_input.txt包含了10组LOS或NLOS传播环境下从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件用于计算终端的三维坐标。",
      "case011_input": "case011_input.txt包含了10组TOA测量数据和所有基站的三维坐标。这些数据用于计算终端的三维坐标。",
      "case013_input": "case013_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，基站的三维坐标用于后续的三维定位计算。",
      "case015_input": "case015_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，基站的三维坐标用于后续的三维定位计算。",
      "case019_input": "case019_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括一个终端到基站的TOA测量值以及基站的三维坐标。",
      "case020_input": "case020_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个终端到基站的测量距离，基站的三维坐标用于后续的定位计算。",
      "case022_input": "case022_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个终端到基站的测量距离，基站的三维坐标用于后续的定位计算。",
      "case023_input": "case023_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括测量值和基站坐标，用于计算终端的三维坐标。",
      "case027_input": "case027_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括测量数据和基站坐标信息，用于计算终端的三维坐标。",
      "case028_input": "case028_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组数据包括一个终端到多个基站的TOA测量值以及基站的三维坐标。",
      "case029_input": "case029_input.txt包含了10组TOA测量数据和所有基站的三维坐标。每组TOA测量数据对应一个从手持终端到基站的测量值，用于计算终端的三维坐标。",
      "case030_input": "case030_input.txt包含了10组从手持终端到基站的TOA测量数据和所有基站的三维坐标。文件中的数据用于计算终端的三维坐标。"
    },
    "problem_str": "问题背景：\n随着无线通信网络和移动互联网的蓬勃发展，提供基于地理位置信息的服务（Location Based Service，简称LBS）已经成为最具市场前景和发展潜力的业务之一。从传统的GPS导航，到大众点评、微信等基于地理位置的消费信息服务和社交软件，实现其功能的基础就是要通过手机、导航仪等终端设备收发信号，来获得距离、角度等测量信息，并利用定位算法将这些测量信息转换成坐标信息。\n\n基于无线移动通信网络的定位是以获取用户手持终端（包括手机或者平板等设备）的位置为目标。而达成这一目标的手段是通过测量无线电信号的强度、传播时间、到达角等物理指标，并将其转化成终端与基站之间的距离、角度等信息，最终利用定位算法将距离、角度等信息转化成终端的坐标信息。\n\n虽然商用GPS已经随着智能手机的发展而得到了广泛的应用，但是，在诸如室内、地下、高楼林立的市区等诸多场景中，GPS定位性能较差。由于在覆盖广度和深度上，基于无线网络基站的定位系统相比GPS存在优势，因此，越来越得到运营商和新兴创业公司的重视。\n\n此外，对于大数据感兴趣的IT公司，通过统计大规模匿名用户的连续地理位置信息，可以获得用户的移动轨迹，以及在相应轨迹上的APP流量使用情况，甚至在特殊位置搜索和关注的关键词等信息。因此，诸如Google、百度等搜索引擎公司也开始提供室内定位和室内地图导航的服务。这类服务，一方面可以弥补传统的GPS在室内定位性能较差，且不能分辨用户所在楼层等问题，另一方面，也为商场、博物馆等应用场景提供了为用户提供基于室内实时地理位置信息服务的可能。\n\n目前从事室内定位和导航服务的方法，大多基于室内密集分布的WiFi设备与手机之间的通信方式。这类方法存在两个明显的劣势：首先，从技术上，WiFi设备的覆盖范围有限，并且WiFi设备收发信号所在的频段容易受到干扰；其次，从业务模型上看，用户对于接入陌生WiFi设备的戒备心理，以及WiFi设备的投资如何回收等，都存在较大的商业模式上的不确定性。\n\n与之相对的，使用基于运营商无线通信基站的方式对手机进行定位，则可以规避上述问题。商用基站的覆盖范围、信号质量均优于WiFi，而且，用户也期望自己的手持终端能够随时保持对基站设备的接入。同时，运营商推进定位服务的盈利模式清晰，在基础的数据服务之外，还可以通过为用户提供增值服务而促进运营商的业务发展。总之，基于无线通信基站的定位技术有着广阔的应用前景和巨大的商业价值。\n\n手持终端设备如何基于基站的测量信息，计算或确定终端在三维空间中的位置坐标，也就是三维定位问题，被认为是现代商用通信网络中对于定位系统真正具有技术难度的挑战。而高精度三维定位也预期能为客户提供更大的价值，在智能仓储、智能工厂、固定资产追踪等对于三维坐标信息敏感的垂直行业，以及传统运营商感兴趣的商场、办公楼中基于位置信息的室内导航、人群流量分析，以及基于精确三维地理位置信息的业务推送等服务提供基础性技术。\n\n从技术角度来看，现代商用通信网络对于三维定位的需求，是使用尽可能少的基站完成对终端设备的定位、算法收敛速度快、对于干扰和噪声具有鲁棒性等优点。\n\n相比于GPS等商用卫星定位系统，基于通信基站的定位问题，具有如下特殊性：\n\n首先，通信基站的目标区域是GPS等卫星定位系统无法实现定位的场景。在高楼林立的城区，建筑物内部、地下停车场等区域，GPS等系统是无法满足定位需求的。而这些应用场景基站、终端密集，是基站定位可以实现突破的地方。\n\n其次，通信基站所处的电磁信号环境较之GPS等系统更加复杂。以室内环境为例，无线电信号的传播过程中会经过墙面的多次反射、室内物体的折射和吸收等。这些物理因素会导致通信基站测量得到的诸如距离、角度等信息存在噪声。如何基于这些有噪声的测量，得到对于位置信息的准确估计，也是通信基站实现对终端定位需要解决的问题。\n\n基于通信基站的定位问题研究，在科研和工业界都吸引了极高的关注。一方面，定位问题与统计信号处理、最优估计理论、优化算法等诸多领域都有密切的联系，诸如数据拟合、最小二乘估计、半正定规划、流形学习等诸多数学工具都能够被用于求解上述问题。另一方面，工业界对于如何高精度地在现有通信设备上完成上述功能也表现出了浓厚的兴趣，我国除了业已广泛部署商用的北斗导航系统之外，也在积极推进基于室内室外融合定位的羲和导航系统。我们相信，基于通信基站的定位系统，将会成为羲和导航系统有力的技术手段。\n\n求解分析基站定位相关问题的有创新性和可实现性强的算法，都将有可能被快速部署到现代商业通信网络中，带来巨大的社会和经济效益。\\section*{2 基础知识}\n\n\\subsection{2.1 无线电信号的视距（LOS）与非视距（NLOS）传播}\n\n无线电信号在大气中从 A 点向 B 点传播时，如果传播过程中存在一个没有遮挡的直达路径，那么，这种传播环境被称为视距传播环境（Line Of Sight propagation，简称 LOS）。这种传播环境如图 1 中的左图所示。如果在传播过程中，由于建筑物或树木的遮挡、反射、折射等物理现象，使得从 A 点到 B 点之间存在多条无线电信号的传播路径，这种环境被称为非视距传播环境（Non-Line Of Sight，简称 NLOS）。需要注意的是，在 NLOS 传播环境中，仍然可能存在着无线电波的直达路径，只不过相比于 LOS 传播环境，在 NLOS 环境下因为遮挡、反射和吸收等损耗，信号强度会在传播过程中变得较弱。\n\n\\begin{figure}[h]\n    \\centering\n    \\includegraphics[width=\\textwidth]{image.png}\n    \\caption{LOS 径与非 LOS 径示意图}\n    \\label{fig:los_nlos}\n\\end{figure}\n\n图片来源 \\url{https://sites.google.com/site/sanaeeg473/wimax-architecture}\\section*{2.2 无线电信号的到达时间（TOA）测量}\n\n当无线电信号在基站与用户手持终端之间互相传播时，就可以计算基站与手持终端之间的距离。一种常用的测量方式是记录无线电信号从手持终端发出，直到基站接收到信号为止的无线电信号传播时间，将时间乘以无线电信号的传播速度，即得到基站与终端之间沿某条路径的距离。其中，信号在基站与终端之间的传播时间，被称为无线电信号的到达时间（Time Of Arrival，简称 TOA）。\n\n\\begin{figure}[h]\n\\centering\n\\begin{tikzpicture}[node distance=3cm, auto]\n    \\node (terminal) [circle, draw] {终端};\n    \\node (base) [rectangle, draw, right of=terminal] {基站};\n    \\draw[->] (terminal) -- node [above] {发送时刻 $t_0$} (base);\n    \\draw[->] (base) -- node [below] {接收时刻 $t_1$} (terminal);\n    \\node [below of=base, node distance=1.5cm] {TOA = $t_1 - t_0$};\n\\end{tikzpicture}\n\\caption{TOA 示意图}\n\\end{figure}\n\n准确测量 TOA 所需的前提条件是基站计时与终端计时所使用的时钟是同步的。以图 2 为例，当基站与终端在同一个“时间坐标系”里，真实 TOA 等于接收时刻 $t_1$ 减去发送时刻 $t_0$。由于电子器件的工艺原因，基站与终端的时钟可能是不同步的。可以将终端与基站想象成分别使用北京时间和伦敦时间，那么 TOA 就会在信号真实传播时间上叠加了时区之差。\n\n\\section*{2.3 影响测量精度的可能因素}\n\n基站测量得到的时间或者距离信息往往存在误差，在建模的过程中，工业上一般会着重考虑如下两个因素的影响：\n\n\\begin{itemize}\n    \\item 使用基站测量的终端信号时，需要考虑的一个很重要因素就是基站侧接收到的信号干扰比值（SINR），定义为：\n    \\[\n    \\text{SINR} = \\frac{\\text{有用信号强度}}{\\text{干扰信号强度} + \\text{噪声信号强度}}\n    \\]\n    \\item 室内环境下，由于反射频繁发生，会形成无线电波的多径传播（multi-path propagation），从而导致虽然距离很近接收到的信号强度却波动剧烈。\n\\end{itemize}\n\n\n\n问题要求：\n在本题中，需要解决如下四个方面的问题：\n\n1. 给定 10 组 LOS 或 NLOS 传播环境下从手持终端到基站的 TOA 测量数据和所有基站的三维坐标（对应附录中编号为 case 001\\_input.txt 到 case 010\\_input.txt 的文件），请根据这些测量数据计算出终端的三维坐标。（请给出详细的建模分析，建模过程中建议考虑测量模型、误差分析等内容。）\n\n2. 给定10组TOA测量数据和所有基站的三维坐标（对应附录中编号为case 011_input.txt到case 020_input.txt的文件），请设计算法，使用尽可能少的基站数目，实现近似最优的三维定位精度。\n\n3. 给定5组对处于移动过程中的终端采集到的TOA数据（对应附录中编号为case 021_input.txt到case 025_input.txt的文件），请设计算法计算出终端的运动轨迹。（此时，编号为case 021_input.txt到case 025_input.txt的文件中，只记录一个终端的TOA数据，并且是这一个终端在运动轨迹中多个位置上的TOA数据。）\n\n4. 在前述3问中，都是假设给定区域内终端到每一个基站的距离都是可知的，但事实上，基站的通信半径是有限的，因此，只有在基站通信半径覆盖范围内的终端才有可能测到自身到基站的距离。而一个终端只有获得它与足够数目的基站之间的距离测量值，才能完成定位。假设每个基站的通信半径为200米（超过范围虽然有测量数据，但无效）。请根据给定的5组测量信息数据集（对应附录中编号为case 026_input.txt到case 030_input.txt的文件），设计算法寻找出可以被基站定位的所有终端。进一步，回答如下问题：每一个场景中（对应着case 026_input.txt到case 030_input.txt五个文件中的一个），定义终端的平均“连接度数”$\\lambda$为\n\\[\n\\lambda = \\frac{\\text{所有可以被定位终端到基站之间的连接数}}{\\text{终端数}}\n\\]\n请建立模型分析连接度数$\\lambda$与定位精度之间的关系。\n\n\\section{数据集描述}\n\n\\subsection{基本数据}\n\n输入：\n\n\\begin{itemize}\n    \\item 每一个基站的三维（某些场景下会退化为二维，在文件中通过标识位给出）坐标，其中，第$j$个基站$A_j$的三维坐标标记为$(x_j, y_j, z_j)$。\n    \\item 矩阵$\\Phi = \\begin{bmatrix} \\cdots \\text{TOA}(u_i, A_j) \\cdots \\end{bmatrix}_{M \\times N}$。矩阵$\\Phi$中$i$行$j$列元素表示标号为$i$的终端（记为$u_i$）到标号为$j$的基站（记为$A_j$）之间的TOA测量值，记为$\\text{TOA}(u_i, A_j)$。假设网络中有$M$个终端，$N$个基站，则矩阵$\\Phi$的维度为$M \\times N$。\n\\end{itemize}\\begin{itemize}\n    \\item 输入文件的格式为 txt。\n    \\item 请特别注意输入文件的具体物理意义：第 1 行为基站个数 $N$，第 2 行为终端个数 $M$，第 3 行为标识位，（2 表示二维场景，3 表示三维场景），第 4 到第 $(N+3)$ 行为基站坐标，第 $(N+4)$ 行到第 $(N+M+3)$ 行为 TOA 矩阵 $\\Phi$。\n\\end{itemize}\n\n\\textbf{输出：}\n\n$M \\times 3$ 维矩阵，第 $i$ 行表示第 $i$ 个终端的三维坐标（部分场景下是 $M \\times 2$ 维矩阵），存放在 txt 文件中。\nAddendum: \n\\subsection{补充说明}\n\n\\subsubsection{关于 TOA 数据的说明}\n\n在实际场景中，受带宽、信噪比、时钟同步以及 NLOS 传播环境的影响，TOA 测量会产生不同的误差。给定的 TOA 数据也不例外。\n\n由于时钟不同步问题引起的误差在 $200 \\mathrm{~ns}$ 以内，由于 NLOS 导致的时延最高可能超过 $400 \\mathrm{~ns}$。\n\n\\subsubsection{关于无线电信号测量的说明}\n\n当无线电波沿直线传播时，估计无线电波从发送点到接收点之间真实传播时间，从数学形式上，即如下等式中对于 $x$ 的估计问题：\n\n\\begin{equation}\n\\hat{x} = x + \\omega \\tag{*}\n\\end{equation}\n\n(*) 式中，$x$ 表示真实的传播时间，$\\omega$ 表示测量噪声，$\\hat{x}$ 表示对于传播时间的观测。这时，测距问题就等价于根据观测值 $\\hat{x}$ 来获取（在某一个指标意义下）尽可能准确的 $x$。而如果无线电波传播环境比较复杂时，观测值可以表示为\n\n\\begin{equation}\n\\hat{x} = f(x, \\omega) \\tag{**}\n\\end{equation}\n\n此时的观测量 $\\hat{x}$ 中包含一些依赖于 $x$ 以及函数 $f$ 的因素。这时需要解决的仍然是如何依据观测值 $\\hat{x}$ 在某个恰当的指标意义下估计 $x$ 的问题。一般而言，场景不同，函数 $f$ 不同，算法思想可以相同也可以有所不同，我们的目标就是要能够在任意的场景下，自适应地选择与场景匹配的模型预算法，并且根据测量数据迅速对终端进行准确定位。\n\n从物理意义上说，根据式 (**) 中描述的情况，对于 $x$ 的估计相对式 (*) 来说会变得困难，但是数值解通常是容易得到的。\\subsection*{4.2.3 关于物理常数的说明}\n无线电信号的传播速度统一取 \\(3 \\times 10^8 \\, \\text{m/s}\\)。\n\n\\subsection*{4.2.4 关于输出格式的说明}\n1. 赛题最终输出文件格式应命名为 `output_case_xyz.txt`。其中 `xyz` 与赛题给定的 `input case` 编号一致，比如 `input case 1` 的输出文件格式应为 `output_case_001.txt`。\n2. 输出文件中的第 \\(i\\) 行对应着标号为 \\(i\\) 的终端的 2 维或者 3 维坐标。\n\n\\subsection*{4.2.5 关于数据读取方式的说明}\n选手可以自行选择软件对 `txt` 文件进行读取。需要注意的是在 Windows 下使用记事本打开 `txt` 文件无法体现数据格式，建议使用 Notepad++ 等文本编辑器打开。\n\n\\section*{5 测试用例}\n针对赛题第 3 部分要求的第 1 和 2 两个子问题，提供了 5 组测试数据，供选手验证算法性能。测试数据的输入信息文件命名为 `sample_case_001_input.txt` 等，对应的正确的终端位置信息文件命名为 `sample_case_001_ans.txt`。\n\n为了与实际应用场景相吻合，测试数据是在 LOS 或者 NLOS 环境下测量得到，未予说明。\nDataset Path:\n['sample_case001_ans.txt', 'sample_case001_input.txt', 'sample_case002_ans.txt', 'sample_case002_input.txt', 'sample_case003_ans.txt', 'sample_case003_input.txt', 'sample_case004_ans.txt', 'sample_case004_input.txt', 'sample_case005_ans.txt', 'sample_case005_input.txt', 'case001_input.txt', 'case002_input.txt', 'case003_input.txt', 'case004_input.txt', 'case005_input.txt', 'case006_input.txt', 'case007_input.txt', 'case008_input.txt', 'case009_input.txt', 'case010_input.txt', 'case011_input.txt', 'case012_input.txt', 'case013_input.txt', 'case014_input.txt', 'case015_input.txt', 'case016_input.txt', 'case017_input.txt', 'case018_input.txt', 'case019_input.txt', 'case020_input.txt', 'case021_input.txt', 'case022_input.txt', 'case023_input.txt', 'case024_input.txt', 'case025_input.txt', 'case026_input.txt', 'case027_input.txt', 'case028_input.txt', 'case029_input.txt', 'case030_input.txt']\n\nData Description:\n该数据集由多份以文本文件形式提供的观测记录组成（例如 sample_case001_input/ans、sample_case002_input、case002_input、case004_input 等），每个文件通常包含10组独立的测量数据组，每组由手持终端到若干基站的到达时间（TOA）测量值及所有参与基站的三维坐标（x, y, z，单位为米）构成，TOA 值以秒为单位并可能包含测量噪声。数据集中基站数量可变，最多可包含10个基站；每组数据中还常带有组索引、测量次数或时间戳等元信息；部分“ans”文件或标注项还给出根据测量计算得到的终端三维坐标作为参考真值。数据记录覆盖不同传播条件（包括 LOS 与 NLOS 场景），并在若干文件中明确包含噪声或传播环境的说明，用于仿真与算法验证。总体上，数据格式为每组一条或多条记录，记录字段重复出现（基站坐标、对应的 TOA 测量序列），旨在为三维定位算法提供输入（TOA + 基站坐标）与评估参考（部分文件提供终端位置或答案）。"
  },
  "problem_background": "随着无线通信网络和移动互联网的蓬勃发展，提供基于地理位置信息的服务（Location Based Service，简称LBS）已经成为最具市场前景和发展潜力的业务之一。从传统的GPS导航，到大众点评、微信等基于地理位置的消费信息服务和社交软件，实现其功能的基础就是要通过手机、导航仪等终端设备收发信号，来获得距离、角度等测量信息，并利用定位算法将这些测量信息转换成坐标信息。\n\n基于无线移动通信网络的定位是以获取用户手持终端（包括手机或者平板等设备）的位置为目标。而达成这一目标的手段是通过测量无线电信号的强度、传播时间、到达角等物理指标，并将其转化成终端与基站之间的距离、角度等信息，最终利用定位算法将距离、角度等信息转化成终端的坐标信息。\n\n虽然商用GPS已经随着智能手机的发展而得到了广泛的应用，但是，在诸如室内、地下、高楼林立的市区等诸多场景中，GPS定位性能较差。由于在覆盖广度和深度上，基于无线网络基站的定位系统相比GPS存在优势，因此，越来越得到运营商和新兴创业公司的重视。\n\n此外，对于大数据感兴趣的IT公司，通过统计大规模匿名用户的连续地理位置信息，可以获得用户的移动轨迹，以及在相应轨迹上的APP流量使用情况，甚至在特殊位置搜索和关注的关键词等信息。因此，诸如Google、百度等搜索引擎公司也开始提供室内定位和室内地图导航的服务。这类服务，一方面可以弥补传统的GPS在室内定位性能较差，且不能分辨用户所在楼层等问题，另一方面，也为商场、博物馆等应用场景提供了为用户提供基于室内实时地理位置信息服务的可能。\n\n目前从事室内定位和导航服务的方法，大多基于室内密集分布的WiFi设备与手机之间的通信方式。这类方法存在两个明显的劣势：首先，从技术上，WiFi设备的覆盖范围有限，并且WiFi设备收发信号所在的频段容易受到干扰；其次，从业务模型上看，用户对于接入陌生WiFi设备的戒备心理，以及WiFi设备的投资如何回收等，都存在较大的商业模式上的不确定性。\n\n与之相对的，使用基于运营商无线通信基站的方式对手机进行定位，则可以规避上述问题。商用基站的覆盖范围、信号质量均优于WiFi，而且，用户也期望自己的手持终端能够随时保持对基站设备的接入。同时，运营商推进定位服务的盈利模式清晰，在基础的数据服务之外，还可以通过为用户提供增值服务而促进运营商的业务发展。总之，基于无线通信基站的定位技术有着广阔的应用前景和巨大的商业价值。\n\n手持终端设备如何基于基站的测量信息，计算或确定终端在三维空间中的位置坐标，也就是三维定位问题，被认为是现代商用通信网络中对于定位系统真正具有技术难度的挑战。而高精度三维定位也预期能为客户提供更大的价值，在智能仓储、智能工厂、固定资产追踪等对于三维坐标信息敏感的垂直行业，以及传统运营商感兴趣的商场、办公楼中基于位置信息的室内导航、人群流量分析，以及基于精确三维地理位置信息的业务推送等服务提供基础性技术。\n\n从技术角度来看，现代商用通信网络对于三维定位的需求，是使用尽可能少的基站完成对终端设备的定位、算法收敛速度快、对于干扰和噪声具有鲁棒性等优点。\n\n相比于GPS等商用卫星定位系统，基于通信基站的定位问题，具有如下特殊性：\n\n首先，通信基站的目标区域是GPS等卫星定位系统无法实现定位的场景。在高楼林立的城区，建筑物内部、地下停车场等区域，GPS等系统是无法满足定位需求的。而这些应用场景基站、终端密集，是基站定位可以实现突破的地方。\n\n其次，通信基站所处的电磁信号环境较之GPS等系统更加复杂。以室内环境为例，无线电信号的传播过程中会经过墙面的多次反射、室内物体的折射和吸收等。这些物理因素会导致通信基站测量得到的诸如距离、角度等信息存在噪声。如何基于这些有噪声的测量，得到对于位置信息的准确估计，也是通信基站实现对终端定位需要解决的问题。\n\n基于通信基站的定位问题研究，在科研和工业界都吸引了极高的关注。一方面，定位问题与统计信号处理、最优估计理论、优化算法等诸多领域都有密切的联系，诸如数据拟合、最小二乘估计、半正定规划、流形学习等诸多数学工具都能够被用于求解上述问题。另一方面，工业界对于如何高精度地在现有通信设备上完成上述功能也表现出了浓厚的兴趣，我国除了业已广泛部署商用的北斗导航系统之外，也在积极推进基于室内室外融合定位的羲和导航系统。我们相信，基于通信基站的定位系统，将会成为羲和导航系统有力的技术手段。\n\n求解分析基站定位相关问题的有创新性和可实现性强的算法，都将有可能被快速部署到现代商业通信网络中，带来巨大的社会和经济效益。\\section*{2 基础知识}\n\n\\subsection{2.1 无线电信号的视距（LOS）与非视距（NLOS）传播}\n\n无线电信号在大气中从 A 点向 B 点传播时，如果传播过程中存在一个没有遮挡的直达路径，那么，这种传播环境被称为视距传播环境（Line Of Sight propagation，简称 LOS）。这种传播环境如图 1 中的左图所示。如果在传播过程中，由于建筑物或树木的遮挡、反射、折射等物理现象，使得从 A 点到 B 点之间存在多条无线电信号的传播路径，这种环境被称为非视距传播环境（Non-Line Of Sight，简称 NLOS）。需要注意的是，在 NLOS 传播环境中，仍然可能存在着无线电波的直达路径，只不过相比于 LOS 传播环境，在 NLOS 环境下因为遮挡、反射和吸收等损耗，信号强度会在传播过程中变得较弱。\n\n\\begin{figure}[h]\n    \\centering\n    \\includegraphics[width=\\textwidth]{image.png}\n    \\caption{LOS 径与非 LOS 径示意图}\n    \\label{fig:los_nlos}\n\\end{figure}\n\n图片来源 \\url{https://sites.google.com/site/sanaeeg473/wimax-architecture}\\section*{2.2 无线电信号的到达时间（TOA）测量}\n\n当无线电信号在基站与用户手持终端之间互相传播时，就可以计算基站与手持终端之间的距离。一种常用的测量方式是记录无线电信号从手持终端发出，直到基站接收到信号为止的无线电信号传播时间，将时间乘以无线电信号的传播速度，即得到基站与终端之间沿某条路径的距离。其中，信号在基站与终端之间的传播时间，被称为无线电信号的到达时间（Time Of Arrival，简称 TOA）。\n\n\\begin{figure}[h]\n\\centering\n\\begin{tikzpicture}[node distance=3cm, auto]\n    \\node (terminal) [circle, draw] {终端};\n    \\node (base) [rectangle, draw, right of=terminal] {基站};\n    \\draw[->] (terminal) -- node [above] {发送时刻 $t_0$} (base);\n    \\draw[->] (base) -- node [below] {接收时刻 $t_1$} (terminal);\n    \\node [below of=base, node distance=1.5cm] {TOA = $t_1 - t_0$};\n\\end{tikzpicture}\n\\caption{TOA 示意图}\n\\end{figure}\n\n准确测量 TOA 所需的前提条件是基站计时与终端计时所使用的时钟是同步的。以图 2 为例，当基站与终端在同一个“时间坐标系”里，真实 TOA 等于接收时刻 $t_1$ 减去发送时刻 $t_0$。由于电子器件的工艺原因，基站与终端的时钟可能是不同步的。可以将终端与基站想象成分别使用北京时间和伦敦时间，那么 TOA 就会在信号真实传播时间上叠加了时区之差。\n\n\\section*{2.3 影响测量精度的可能因素}\n\n基站测量得到的时间或者距离信息往往存在误差，在建模的过程中，工业上一般会着重考虑如下两个因素的影响：\n\n\\begin{itemize}\n    \\item 使用基站测量的终端信号时，需要考虑的一个很重要因素就是基站侧接收到的信号干扰比值（SINR），定义为：\n    \\[\n    \\text{SINR} = \\frac{\\text{有用信号强度}}{\\text{干扰信号强度} + \\text{噪声信号强度}}\n    \\]\n    \\item 室内环境下，由于反射频繁发生，会形成无线电波的多径传播（multi-path propagation），从而导致虽然距离很近接收到的信号强度却波动剧烈。\n\\end{itemize}\n\n",
  "problem_requirement": "在本题中，需要解决如下四个方面的问题：\n\n1. 给定 10 组 LOS 或 NLOS 传播环境下从手持终端到基站的 TOA 测量数据和所有基站的三维坐标（对应附录中编号为 case 001\\_input.txt 到 case 010\\_input.txt 的文件），请根据这些测量数据计算出终端的三维坐标。（请给出详细的建模分析，建模过程中建议考虑测量模型、误差分析等内容。）\n\n2. 给定10组TOA测量数据和所有基站的三维坐标（对应附录中编号为case 011_input.txt到case 020_input.txt的文件），请设计算法，使用尽可能少的基站数目，实现近似最优的三维定位精度。\n\n3. 给定5组对处于移动过程中的终端采集到的TOA数据（对应附录中编号为case 021_input.txt到case 025_input.txt的文件），请设计算法计算出终端的运动轨迹。（此时，编号为case 021_input.txt到case 025_input.txt的文件中，只记录一个终端的TOA数据，并且是这一个终端在运动轨迹中多个位置上的TOA数据。）\n\n4. 在前述3问中，都是假设给定区域内终端到每一个基站的距离都是可知的，但事实上，基站的通信半径是有限的，因此，只有在基站通信半径覆盖范围内的终端才有可能测到自身到基站的距离。而一个终端只有获得它与足够数目的基站之间的距离测量值，才能完成定位。假设每个基站的通信半径为200米（超过范围虽然有测量数据，但无效）。请根据给定的5组测量信息数据集（对应附录中编号为case 026_input.txt到case 030_input.txt的文件），设计算法寻找出可以被基站定位的所有终端。进一步，回答如下问题：每一个场景中（对应着case 026_input.txt到case 030_input.txt五个文件中的一个），定义终端的平均“连接度数”$\\lambda$为\n\\[\n\\lambda = \\frac{\\text{所有可以被定位终端到基站之间的连接数}}{\\text{终端数}}\n\\]\n请建立模型分析连接度数$\\lambda$与定位精度之间的关系。\n\n\\section{数据集描述}\n\n\\subsection{基本数据}\n\n输入：\n\n\\begin{itemize}\n    \\item 每一个基站的三维（某些场景下会退化为二维，在文件中通过标识位给出）坐标，其中，第$j$个基站$A_j$的三维坐标标记为$(x_j, y_j, z_j)$。\n    \\item 矩阵$\\Phi = \\begin{bmatrix} \\cdots \\text{TOA}(u_i, A_j) \\cdots \\end{bmatrix}_{M \\times N}$。矩阵$\\Phi$中$i$行$j$列元素表示标号为$i$的终端（记为$u_i$）到标号为$j$的基站（记为$A_j$）之间的TOA测量值，记为$\\text{TOA}(u_i, A_j)$。假设网络中有$M$个终端，$N$个基站，则矩阵$\\Phi$的维度为$M \\times N$。\n\\end{itemize}\\begin{itemize}\n    \\item 输入文件的格式为 txt。\n    \\item 请特别注意输入文件的具体物理意义：第 1 行为基站个数 $N$，第 2 行为终端个数 $M$，第 3 行为标识位，（2 表示二维场景，3 表示三维场景），第 4 到第 $(N+3)$ 行为基站坐标，第 $(N+4)$ 行到第 $(N+M+3)$ 行为 TOA 矩阵 $\\Phi$。\n\\end{itemize}\n\n\\textbf{输出：}\n\n$M \\times 3$ 维矩阵，第 $i$ 行表示第 $i$ 个终端的三维坐标（部分场景下是 $M \\times 2$ 维矩阵），存放在 txt 文件中。",
  "problem_analysis": "本问题从工程与理论两方面交织地提出：以基站测得的到达时间（TOA）为观测，通过物理与统计建模将时间测量转化为三维空间位置估计，并在存在噪声、基站时钟不同步、NLOS（非视距）偏置、有限覆盖与移动性等现实复杂性下设计稳健、快速且可实施的算法。宏观目标是以尽可能少的基站、用自适应且计算代价可接受的方法，在多种传播场景（LOS/NLOS、静止/运动）下给出准确的三维定位或轨迹估计，并评估覆盖度与定位精度之间的关系。这个目标直接塑造了解题思路：首先要明确物理测量向几何/统计量的映射（TOA → 距离），其次要建立误差模型（含随机噪声与系统偏置），再依据估计理论与优化方法选择合适的求解器，并在实际约束下（同步性、实时性、覆盖半径、可用基站数）加入鲁棒/自适应机制去处理NLOS和异常观测。由此可以看到问题横跨信号传播物理、统计推断与数值优化三大模块，每一模块的选择都会影响最终结果的解释与应用价值。\n\n在物理和测量层面的核心假设与其影响必须被清晰表达并批判性审视。TOA测量转换为距离的基本关系通过光速（c = 3×10^8 m/s）线性映射，但这种映射隐含同步性假设：若基站与终端完全时钟同步，TOA差直接给出真实传播时间；否则存在未知的时钟偏差（时钟偏置或偏移），必须作为额外参数联合估计。实践中题目提示时钟误差一般在200 ns内且NLOS可能引入最高400 ns的额外延迟。将这些延迟换算为空间量级后得到重要结论：200 ns 对应约60 m 的距离误差，400 ns 对应约120 m 的正偏差，因此NLOS可以完全改变量级，这意味着任何定位算法若不显式检测并纠正NLOS偏置，误差可能极大并失去实际价值。测量噪声的统计特性通常在LOS下可近似建模为零均值的高斯噪声，而在NLOS下噪声往往表现为正向偏置、可能呈重尾或混合分布；此外，SINR、测量带宽和多径特性决定噪声方差与分布形态，这些依赖关系不是固定的，需通过先验或在线估计以获得更合适的权重/模型。\n\n基于上述测量模型，定位问题可被看作参数估计问题：已知若干基站坐标 Aj = (xj,yj,zj) 和对应TOA观测 t̂i,j，目标是估计终端位置信息 pi = (x,y,z)（以及必要时的时钟偏置 b）。数学上可写为 t̂j = (‖p − Aj‖ / c) + b + εj 在同步未知偏置场景，这构成一个非线性的参数估计问题。解决方案族包括直接非线性最小二乘（NLS）或极大似然估计（MLE），其代价函数为残差平方和或加权残差和；当噪声为高斯时MLE等价NLS且具有良好性质。数值实现上常用牛顿/高斯-牛顿、Levenberg-Marquardt等迭代方法，需要良好初值，否则易陷入局部极小或发散。可获得闭式或半闭式初值方法（例如基于线性化的Taylor展开、差分TOA消去偏置得到差分方程，或Bancroft解法在某些结构下）用于提供初始估计，再用非线性优化细化。\n\n但NLOS与异常观测带来的偏置破坏了高斯假设与平方和准则的有效性，因此须设计鲁棒估计策略。常见做法包括采用M估计（如Huber损失）、迭代重加权最小二乘（IRLS）、基于残差分布的阈值剔除或RANSAC风格的随机采样一致性方法以剔除NLOS观测，或显式引入NLOS偏置参数并进行稀疏化估计（例如对每条链路设定正偏置变量并用L1正则化促使大多数偏置为零）。同时可以结合物理或侧信息（SINR、接收信号强度RSS、到达角DOA特征、多径延迟谱）进行NLOS判别与加权，或训练机器学习分类器区分LOS/NLOS，从而在估计时动态调整权重或剔除样本。理论上，利用Fisher信息矩阵可以获得Cramér–Rao下界（CRB），从而评估在给定基站几何与噪声方差下的最小可达方差，CRB亦用于设计基站选取策略或衡量GDOP（几何精度衰减）的好坏。\n\n关于如何用尽可能少的基站实现近似最优定位，问题等价于在可用基站集合中做子集选择以最大化信息量或最小化位姿估计误差。这是组合优化问题，可以用信息理论或实验设计标准（如D-准则，最大化FIM行列式；A-准则，最小化估计协方差的迹；或最小化GDOP）作为子集质量度量。若基站数量较小，穷举可行但不可扩展；常用启发式包括贪心递增（每步选择带来最大信息增益的基站），该类策略对许多信息增益函数在子模性条件下有近似最优保证；也可用整数线性/非线性规划或半正定松弛（SDR）求近似解。需要注意几何角度：分布在空间四面体良好张开的少数基站常比紧密聚集的多数基站带来更好精度，因此“少而精”的选取往往比“多而糟”更优。实践中还要考虑实时性：子集选择应能快速完成以适用于资源受限的运行环境。\n\n对于运动终端的轨迹估计，问题转为时序数据融合与动力学建模。将离散时间索引下的位置与时钟偏置作为状态向量，建立状态转移方程（匀速或带加速度的线性模型，或基于已知轨迹样式的更复杂模型），观测方程由时间戳对应的TOA非线性映射给出。当噪声近似高斯且非线性不强时可用扩展卡尔曼滤波（EKF）；对更强非线性或非高斯噪声（尤其大量NLOS）可用无迹卡尔曼滤波（UKF）或粒子滤波（PF）。滤波器可以并行估计位置与时钟漂移，必要时采用平滑器（如Rauch–Tung–Striebel）对整段轨迹做后验优化获得更精确结果。移动场景的附加复杂性包括观测可用性随时间变化（基站连接性切换）、NLOS片段化出现与消失、以及速度/加速度限制可作为先验约束以提升可辨认性与抑制瞬时异常。\n\n通信半径限制与连接度λ的引入将定位问题与网络拓扑和随机几何联系起来：当基站覆盖半径为200 m，终端仅能与半径内基站建立有效测量，定位可行性与精度依赖于每终端邻近基站数、这些基站的空间布局与测量质量。首先需筛选出“可被定位”的终端，基本可行性条件是观测数至少满足自由参数数：若时钟偏置未知，三维定位需要至少4个非共面的基站；若已同步或能通过差分消去偏置，则至少3个基站足矣（二维场景类似）。平均连接度λ 定义为所有可定位终端与其可见基站连接数之和除以终端数，λ 越大通常意味着更高的观测冗余与更低的估计方差，但这种关系并非线性：几何布局与观测质量（SINR、LOS/NLOS比例）决定了信息增益的边际效应，存在饱和效应（超过某一冗余后精度提升有限）和阈值效应（在某一临界 λ 以下定位不可行或不可靠）。在概率建模层面，可利用随机几何（例如基站与终端按泊松点过程分布）结合CRB公式推导期望FIM，从而得到λ 与平均CRB（或RMSE）之间的定量映射；在实际工程中更可借助大规模蒙特卡洛仿真估计这一关系，并分析不同NLOS比例、基站几何、噪声方差下λ 对精度的影响。\n\n整个建模与算法设计过程中存在多重不确定性与权衡：精细统计模型（区分LOS/NLOS、使用复杂多径模型）能提升估计精度但需要更多数据和计算；鲁棒方法能减轻NLOS影响但在LOS主导时可能略微降低效率；实时性需求限制了可用的全局优化与蒙特卡洛方法；对基站时钟误差的处理决定了对基站同步性的依赖与部署成本。风险在于盲目采用理想化噪声模型（例如全局高斯）导致在真实NLOS占优场景下严重低估误差；同时过度复杂的模型可能在数据不足时过拟合并降低泛化能力。为此，推荐采用迭代式建模流程：先用简单、鲁棒的估计得到粗糙位置并检测NLOS/异常，再依据观测统计自适应选择细化模型（例如切换到带偏置项的MLE或分模型估计），期间用CRB/蒙特卡洛评估算法性能并调整权重与先验。对基站选择、子集优化与轨迹估计应在理论指导（FIM、DOP）与实际仿真验证间循环推进，以保证方案既有理论保证又能适应现实复杂性。\n\n最后，模型应被视为开放的、可演化的工程构件。随着对信号统计、更详尽的多径特性、基站时钟行为与环境信息（建筑物地图、INS数据等）的更深入理解，可以逐步引入更精确的先验与多源数据融合（如融合RSS、DOA、地图约束），从而提高鲁棒性与精度。与此同时，所有方法都应保留模块化结构以便替换噪声模型、切换估计器或引入学习驱动的NLOS检测模块，保证在新数据或新需求出现时可快速迭代与校正。",
  "modeling_solution": "总体思路与基本假设：为解决基于基站 TOA 测量的三维定位与轨迹估计问题，本文提出一个分层、模块化且兼顾物理先验与鲁棒统计的模型框架。基本物理假设为：无线电信号在直射路径上传播的速度为常数 c = 3×10^8 m/s；每条 TOA 测量受到两类主要误差：小幅度近似零均值的随机噪声（来自带宽和热噪声，LOS 条件下可近似为高斯）与可能存在的正向偏置（来自 NLOS 延迟、多径首到延迟被遮挡导致正偏），以及基站/终端时钟偏置导致的全局或局部偏移。为便于处理，统一将 TOA（秒）换算成等效“测距”量 r̂ = c · TOA_obs（米），则每条观测可建模为 r̂j = ||p − a_j|| + b + v_j + s_j，其中 p 为终端三维位置向量，a_j 为第 j 基站坐标，b 为以米为单位的等效时钟偏置（若基站与终端不同步则为未知，全网同步时 b=0），v_j 为近似零均值随机噪声（LOS 下可视为正态分布 N(0, σ_j^2)），s_j ≥ 0 表示 NLOS 正偏置（多数链路 s_j = 0），且 s 的分布通常呈稀疏、非负和重尾特性。为加强可实施性，做出下列约定：若题目明确基站同步情况则可省略 b；测量范围受通信半径 R（若给定题设 R=200 m）限制，超过 R 的观测被标记为无效；若数据中提供 SINR、RSS 或 CIR 等侧信息，可用以辅助判别 LOS/NLOS、给出测量权重或先验。\n\n变量与符号规定：p ∈ R^3 为待估终端位置；a_j ∈ R^3 为第 j 基站坐标；TOA_obs_j 为观测到达时间（秒）；r̂_j = c · TOA_obs_j 为等效测距观测（米）；b 为时钟偏置对应的等效距离偏移（米）；v_j 为随机噪声，E[v_j] ≈ 0，Var[v_j] = σ_j^2（可与 SINR、带宽关联）；s_j ≥ 0 为 NLOS 偏置（多数为0）；M、N 分别为终端数与基站数。引入观测矩阵 Φ 按题目给定格式读取，先过滤掉半径外无效观测。\n\n测量模型与核心方程：基本非线性观测方程写为 r̂_j = h_j(p, b) + η_j = ||p − a_j|| + b + η_j，其中 η_j = v_j + s_j。若消除时钟偏置 b（采用差分或已同步），差分 TOA（TDOA）观测可写为 d_{j1} = r̂_j − r̂_1 = ||p − a_j|| − ||p − a_1|| + η_j − η_1。将所有观测写成向量形式后，最常见的估计量为非线性最小二乘（NLS）或加权最小二乘（WLS）： minimize_{p,b} ∑_j w_j [ r̂_j − (||p − a_j|| + b) ]^2，其中 w_j = 1/σ_j^2（若 σ_j 未知可用均一权或基于 SINR 的经验权重）。当噪声以高斯近似为界时 NLS 即为最大似然估计（MLE）。为求解上述非凸问题，常采用两阶段策略：第一阶段用闭式或半闭式解（如基于 TDOA 的线性化或扩展 Bancroft 方法）给出初值 p0；第二阶段用 Levenberg–Marquardt（LM）、Gauss–Newton 或信赖域法对 NLS 细化至收敛。差分线性化的常见推导：在 p0 处 Taylor 展开 ||p − a_j|| ≈ ||p0 − a_j|| + u_j^T (p − p0)，其中 u_j = (p0 − a_j)/||p0 − a_j||，从而形成线性系统 A Δp + b 1 ≈ r̂ − r(p0) 可通过正规方程求解 Δp。\n\nNLOS 与鲁棒化策略：由于 NLOS 导致的正偏置 s_j 严重破坏最小二乘的有效性，本文提出联合稀疏偏置建模与迭代优化的方案：将 s ∈ R^N 引入观测方程 r̂ = g(p,b) + s + v，要求 s_j ≥ 0 且稀疏。构造正则化目标 minimize_{p,b,s≥0} ∑_j w_j [ r̂_j − ||p − a_j|| − b − s_j ]^2 + λ ||s||_1，其中 L1 正则鼓励仅少数链路具有正偏置（即识别 NLOS 链路）。该目标对 s 为凸（二次损失 + L1），对 p 为非凸，但可通过交替最小化求解：固定 p,b，s 子问题为带非负约束的 Lasso（可用 ADMM 或快速坐标下降求解）；固定 s，p,b 子问题为带常数偏置修正的 NLS，可用 LM 求解；交替迭代直至收敛。另外可在该交替方案中对残差使用 M-估计（例如 Huber loss）替代平方损失以进一步增强鲁棒性。若侧信息（SINR、RSS、CIR）可用于先验概率设定，可在 L1 正则前加权或用 EM 混合模型（LOS/NLOS 两分模型）估计每条链路属于 NLOS 的概率并做加权最小化。\n\nNLOS 检测与 RANSAC：作为更保守的办法，可通过随机采样一致性（RANSAC）在基站子集上执行 LS 定位并挑选使得残差低于阈值的一致子集作为 LOS 集，阈值可基于预估 σ 或经验设定。RANSAC 的优点在于对较高比例异常（NLOS）具有较强的断裂鲁棒性，但在基站数少或噪声方差大时需谨慎。\n\n关于最少基站选取以近似最优定位的策略：三维定位且包含未知偏置 b 时理论上需要至少 4 个非共面的观测；若使用 TDOA 去除全局偏置，最低需求为 3（但需非退化几何）。但“最少基站”同时要满足“接近最优”的需求，需引入信息量指标：基于估计理论，参数协方差下界由 Fisher 信息矩阵（FIM）给出，FIM 对 p（和 b）可写为 I(p) = ∑_j (1/σ_j^2) g_j g_j^T，其中 g_j = ∂||p − a_j||/∂p = (p − a_j)/||p − a_j||。若包含 b，其 FIM 增加一行列对应 b 的导数为 1。信息度量可采用 D-准则（最大化 det(FIM)）或 A-准则（最小化 trace(FIM^{-1}，即平均方差）），也可直接使用 GDOP（几何精度衰减因子）作为近似指标。因此基站子集选择可形式化为组合优化：选择 k 个基站以最大化 det(I_sub(p0))（p0 为初值或先验位置），该问题通常为 NP-hard。对于实际可行的近似解，采用贪心递增选择（每步加入能最大化信息增益的基站）在许多信息增益函数下近似最优（若增益函数呈子模性）。具体实现上，先用全量观测估计 p0，再按贪心策略选基站：每一步计算候选基站加入后 FIM 的行列式（或 trace 的减少），选择最优者，直到达到所需基站数量或信息阈值。若 N 很小可直接穷举；若需更严格保证可用整数规划或半正定松弛（SDR）方法近似求解。实践经验指出，分布成“良好张开的四面体”结构的 4 个基站往往优于数量更多但几何退化的基站集合，因此在子集选择时应优先考虑几何散布度。\n\n轨迹估计（移动场景）的模型与算法：对运动终端，引入状态向量 x_k = [p_k; v_k; b_k; ḃ_k]（位置、速度、时钟偏置和偏置速率可选），用离散时间线性动力学模型 x_{k+1} = F x_k + q_k（q_k 为过程噪声），观测模型在时刻 k 对第 j 基站为 r̂_{k,j} = ||p_k − a_j|| + b_k + η_{k,j}。该类非线性状态空间问题可用扩展卡尔曼滤波（EKF）或无迹卡尔曼滤波（UKF）进行实时递推估计，若噪声和非线性较强或 NLOS 比例高，则采用粒子滤波（PF）或联合平滑（批量非线性最小二乘，类似 BA / 后端的 factor-graph 优化）以获得更优精度。轨迹的批量方法（滑动窗口 LM / 非线性最小二乘）将历史多时刻观测联合优化，从而对噪声有更好抑制与轨迹平滑能力；若有惯性测量单元（IMU）数据，可与 TOA 观测做紧耦合融合，显著提高短时精度并帮助区分 NLOS 突变。滤波器初始化可用静止时刻或首帧的多基站定位结果；为处理基站可用性随时间切换，滤波器应对不同时间步的观测集合动态适应，且可在观测被剔除时调整观测方差或采取重采样策略（PF）。\n\n覆盖半径与“可被定位”判断以及连接度 λ 的建模：在半径 R 限制下，每终端 i 仅能与集合 S_i = { j : ||p_i − a_j|| ≤ R } 建立测量。一个终端可被定位的简单可行性条件为 |S_i| ≥ m，其中 m = 4 当时钟未知且三维定位时，m = 3 若时钟同步或已消除偏置为常见门槛。更严格地，除了数量门槛外，还需几何非退化（基站不共面且信息矩阵满秩）。定义题目中的连接度数 λ = (总可定位终端到基站的连接数) / (终端数)。为分析 λ 与定位精度间关系，建议两条并行途径：理论近似与蒙特卡洛仿真。理论近似可从 CRB 出发：在高斯噪声近似下，位置估计协方差约为 I(p)^{-1}，其尺度受 ∑_j (1/σ_j^2) g_j g_j^T 的秩与特征值支配。当基站数在几何上随机分布且所有 σ_j 相近，可以证明平均 Fisher 信息与连接数成正比，从而粗略推导平均协方差（或 RMSE）与 λ 成反比。更精确地，若基站坐标按均匀分布在半径内，期望 FIM 的主特征值与 λ 的关系可用随机几何工具定量化，得到 E[trace(Cov)] ≈ K / λ（K 取决于几何与噪声方差），但这仅为近似且在 λ 很小或 NLOS 比例高时失效。实际工程中建议用大规模蒙特卡洛仿真（在给定场景下对基站分布、NLOS 比例、σ 分布进行采样）绘制 RMSE 与 λ 的曲线，并通过拟合得到经验拟合公式（通常为幂律：RMSE ≈ α λ^{-β} + γ，其中 β≈0.5~1，γ 表示几何退化与 NLOS 带来的误差下界）。重要的定性结论是存在阈值效应：当 λ 低于某一临界值（使得多数终端接入基站数低于 m 或 FIM 条件数过差）时定位多数失败；当 λ 适中时，少量基站已能实现可接受精度；超出一定冗余后精度提升呈递减回报。基于此，可将 λ 用作部署规划或增发基站的决策参数。\n\n求解策略与实现细节：对静态定位问题，首选流程为：数据预处理（读取文件、转换 r̂、剔除超出半径观测、标记丢失值）；初值计算（若 b 未知，则采用 TDOA 差分法或构造线性方程求 p0；若 b 已知或同步，采用三边定位闭式估计）；鲁棒主优化（交替求解 L1 稀疏偏置模型或基于 Huber 的 IRLS），并在收敛后输出 p。对于“尽可能少基站的最优子集”问题，先用全量观测求 p0，再按 D-或A-准则用贪心子集选择获得 k 个基站，最后在选定子集上做 NLS/Robust 优化以获得最终位置。对于移动轨迹问题，采用滑动窗口批量 LM 或 EKF/UKF 联合估计位置、速度与时钟偏置；若 NLOS 占比较高则结合 L1 稀疏偏置在每个窗口内联合估计。关于求解器，LM 对中等规模（少量基站与短时窗口）问题足够；若需要高置信度对抗非凸性，可以用多起点随机重启。L1 子问题可用 ADMM、坐标下降或基于 proximal 操作的迭代法高效解决；RANSAC 可在异常比例较大时作为前置清洗步骤。\n\n数值复杂度与并行化：单个终端的 NLS/LM 迭代复杂度基本为 O(N·d^2)（d 为参数维度，三维 d≈3或4），交替法在每次迭代中还需解 L1 问题，复杂度与基站数成线性或带对数因子。全网并行性强：不同终端之间估计可独立并行，适合在多核/分布式环境或 GPU 上批量并行化。轨迹滤波的复杂度随窗口长度与粒子数增加（PF 复杂度高）。MAP 或批量优化中可利用稀疏结构（雅可比/海森矩阵）加速因子图求解。\n\n模型验证、敏感性与参数选取：建议用蒙特卡洛模拟和题目提供的样例数据验证算法。敏感性分析关注参数 λ（连接度）、NLOS 比例、噪声方差 σ 和 L1 正则 λ_reg。经验推荐：Huber 阈值在 1.3~1.5σ 之间；L1 正则强度可通过交叉验证或贝叶斯信息准则自动选取；RANSAC 阈值基于预估 σ。检验指标包括 RMSE、平均残差、可定位终端比例与 FIM 条件数。若可获取历史数据，可用 EM 混合模型估计每条链路属于 LOS 的概率并将该概率用于权重调整，从而自动适配 NLOS 所占比例变化。\n\n如何在题目给定的数据上具体操作（工程化步骤）：读取输入 txt（第1行为 N，第2行为 M，第3行为维度标识，第4..N+3 行为基站坐标，第 N+4..N+M+3 行为 TOA 矩阵），对每个终端 i 将 TOA 列向量转换为 r̂；如题 4 中给定 R=200 m，先剔除 ||a_j − p_guess|| > 200 的观测（若 p_guess 不可用则用 TOA 转换近似或先不剔除，在后续判决阶段将基于 r̂_j > R 或 r̂_j 大幅偏差来剔除）；若终端可见基站数小于阈值直接标记为“不可定位”。对剩余终端按上述 NLS/robust/L1 方案估计 p，输出格式按照题目要求写入 output_case_xyz.txt，每行为终端的坐标。\n\n拓展与改进路径：当更多侧信息可用（RSS、SINR、到达角 DOA、CIR）时可将多源信息纳入联合估计：例如将 DOA 约束加入为角度观测项，或将 CIR 的首到功率与偏置进行统计映射以帮助 NLOS 判别。也可使用机器学习方法训练 LOS/NLOS 分类器，用 CIR/RSS/多径特征作为输入，判别后将被判为 NLOS 的链路设为高 s_j 或直接剔除。为进一步提升全球最优性，可将非线性最小二乘问题用半正定松弛（SDP）方法构造凸近似解，再用该解做多起点初始化。长期可扩展方向包括联合基站自定位（当基站坐标有误差时联合校准）、时变通道动态建模（把多径与环境变化建入过程噪声）以及使用贝叶斯非参数方法对 NLOS 偏置分布进行自适应学习。\n\n结论性说明：所提出的模型综合了物理测距方程、时钟偏置处理、NLOS 稀疏偏置建模与鲁棒估计、基站子集信息论选择、动态滤波/平滑轨迹估计以及覆盖半径导致的可定位性分析。该框架兼顾可实现性和创新性：L1 稀疏偏置联合估计在实践中既能识别并补偿少数严重 NLOS 链路，又能保持 LOS 链路的高效利用；基于 FIM 的贪心子集选择提供了一种在基站资源受限时的合理、近似最优策略；轨迹问题通过状态空间与滤波/平滑器联合处理可以稳健对抗临时观测缺失与时钟漂移。实践中应通过蒙特卡洛实验校准超参数、验证 λ 与精度关系并据此制定基站部署或接入策略，从而在真实无线环境中取得稳定且高效的三维定位与轨迹估计效果。",
  "task_descriptions": [
    "子任务 1（数据准备与测量模型建立）要求对给定的输入文件做结构化读取、物理单位转换、有效性筛选、异常标记与基础统计量估计，并输出供后续定位算法直接使用的标准化数据结构与先验参数：具体步骤为——先按题目格式严格解析文本文件（第1行为基站数 N，第2行为终端数 M，第3行为维度标识 d=2或3，第4..N+3行为基站坐标 a_j=(x_j,y_j,z_j)，第 N+4..N+M+3 行为 TOA 矩阵 Φ 的每一行对应一个终端到 N 个基站的 TOA 观测），将 TOA（秒）按常数 c = 3×10^8 m/s 转换为等效测距 r̂_{i,j} = c·TOA_{i,j}（米），并以矩阵 R̂（M×N）存储；对读入的数据执行物理有效性检查（TOA 非负且数值有穷、基站坐标与维度一致），将缺失或不合法项在 R̂ 中置为 NaN 并生成二值可观测掩码矩阵 Mask_{i,j}。如题设给定通信半径 R（例如 200 m），按几何或等效测距滤除超出覆盖的观测：若 r̂_{i,j} > R 则将 Mask_{i,j}=0（或明确标注为“覆盖外”），并记录每个终端的可见基站数 n_i = Σ_j Mask_{i,j}；对 n_i 低于事先定义的可定位阈值（如含未知时钟需至少4个非共面基站，若时钟可消除则至少3个）立即在元数据中标记该终端“暂不可定位”。在预处理阶段同时计算用于后续估计的统计量：对每条链路或每个终端-链路集合基于可用观测（同一链路跨多个记录或同一时刻下不同链路的残差）估计经验噪声方差 σ_{j}^2 或 σ_{i}^2（若无侧信息则先采用全局同方差假设），并用稳健统计量（例如中位数绝对偏差 MAD）检测与标记明显离群观测（例如超出中位数 ± k·MAD，建议 k=3~5）；对观测偏置范围提供物理尺度先验：时钟不同步引入的偏差≤200 ns（≈60 m），NLOS 可能引入额外正偏≤400 ns（≈120 m），这些值应被记录为上限用于后续模型约束。为便于下游算法初始化，生成若干可选的粗略初值与数据结构：若假定基站与终端时钟同步，则可直接用加权线性最小二乘（三边定位线性化）在每个终端的可见基站上计算初步位置 p0_i；若时钟偏置未知则构造差分 TOA（TDOA）消去偏置后通过线性化方程解出 p0_i 的候选解；所有初值计算均应返回失败标志（例如当观测数或几何退化导致病态矩阵时）而非错误结果。为便于算法实现与并行处理，应把输出以结构化格式保存：标准化测距矩阵 R̂（含 NaN）、掩码 Mask、每个观测的原始 TOA、链路噪声估计 σ、离群标记矩阵、每终端的可见基站索引列表、每终端的初始位置候选 p0_i（或空值）以及元数据（基站坐标、维度标识、使用的物理常数 c、通信半径 R 及偏差上限）。推荐使用可处理数值与科学计算的工具（例如 Python + numpy/scipy/pandas）进行实现，以便批量读取、数值稳定地计算方差与 MAD、以及将预处理结果序列化为下游可直接读取的文件（例如 npz、csv 或标准 txt），但不在本子任务中执行后续的非线性优化或轨迹滤波。",
    "子任务 2（静态定位的初值与非线性最小化、含鲁棒化与 NLOS 补偿）的目标是：对每个终端，基于预处理得到的等效测距矩阵 r̂（含 NaN 表示缺失/不可观测）、可视基站掩码 Mask、以及每条链路的噪声方差估计 σ_j（或全局 σ），产生稳健且数值可靠的三维位置估计 p（并在必要时同时估计时钟偏置 b），同时识别并弱化 NLOS 链路的正偏置影响，并输出估计不确定性与异常链路标记。该子任务的输入为单终端的观测向量 r̂_j（仅对 Mask_j=1 的基站）、对应基站坐标 a_j、初步噪声方差 σ_j 和可选的侧信息（如 SINR/RSS）；输出为终端位置 p̂（3维或2维）、可选偏置 b̂、每条链路残差、NLOS 判别结果（布尔或偏置 s_j）及位置协方差近似。实现步骤与方法如下：1) 初值计算：若时钟偏置未知，先构造差分 TOA（TDOA）线性方程或使用在观测子集上线性化的最小二乘（在 p0 处对 ||p−a_j|| 做一阶泰勒展开）或半闭式方法（类 Bancroft）得到收敛良好的初值 p0 和 b0；若有足够几何信息亦可用几何中心/三边定位得到 p0；当可视基站数低于最小阈值（例如含偏置时 <4，已同步时 <3）应直接返回“不可定位”。 2) 权重与损失选择：构造加权非线性最小二乘目标 L(p,b)=Σ_j w_j ρ( r̂_j − (||p−a_j|| + b) )，其中权重 w_j=1/σ_j^2（或基于 SINR 的经验权），ρ(·) 为损失函数（默认平方损失，鲁棒时用 Huber 或 Tukey）。 3) 非线性求解：以 p0,b0 为初始点，用 Levenberg–Marquardt（或 trust-region，scipy.optimize.least_squares 中的 lm/trf）求解加权最小二乘（或用 IRLS 实现 M 估计），并设置收敛判据为参数变化或目标变化低于阈值、最大迭代数或雅可比条件数恶化的保护。 4) NLOS 鲁棒化：提供三种互补策略供选择或组合——(A) 交替稀疏偏置建模：引入非负偏置向量 s≥0，最小化 Σ_j w_j [ r̂_j − ||p−a_j|| − b − s_j ]^2 + λ_reg ||s||_1，通过交替最小化求解（固定 p,b 求 s 为带非负约束的 Lasso，可用坐标下降或 ADMM；固定 s 用 LM 求 p,b），λ_reg 可用交叉验证或基于预估 NLOS 比例自适应选择；(B) M 估计/IRLS：用 Huber 损失或 Tukey 函数替代平方损失并通过 IRLS 更新权重以下调异常残差影响；(C) RANSAC 前处理：在随机基站子集上反复拟合并选取最大内点集做最终 LM，以应对高比例异常。可将 A 与 B 结合（先用 A 识别偏置，再用 B 精炼）。5) 约束与数值细节：对 s_j 强制非负并在求解中加上上界（例如对应最大物理延迟 120 m），对 b 可选择固定为零（若已同步）或自由估计；参数归一化（位置坐标中心化、尺度化）和向量化实现以改善数值稳定性；对病态雅可比采用正则化（加小量到对角线）避免数值发散；使用多起点随机重启或网格搜索以降低局部极小风险。6) 后验评估：用最终雅可比计算 Fisher 信息近似得到参数协方差估计（J^T W J）^{-1} 或用数值扰动估计不确定度，计算残差统计并依据阈值标记仍然异常的链路；若偏置 s_j 显著 (>阈值) 则标记为 NLOS。7) 输出与并行化：为每终端返回 p̂,b̂、残差向量、ŝ、NLOS 标记、协方差矩阵和诊断信息（迭代次数、收敛状态）；算法应对每终端独立并行执行以扩展到大规模数据。推荐实现工具包括 Python 的 numpy/scipy（least_squares）、用于 L1 的 sklearn/coordinate descent 或自实现 ADMM、以及用于并行的 multiprocessing 或并行框架；默认超参数建议：Huber 阈值 ≈1.3–1.5·σ，λ_reg 初值按预估 NLOS 比例设为 (σ·√(2 log N)) 的标度并用小范围调优。该子任务仅关注静态单位置定位的算法实现与数值鲁棒性，不要求处理时序轨迹或半径覆盖可达性判定等其它功能。",
    "子任务 3（基站子集选择：以尽可能少的基站实现近似最优定位）要求在给定场景下针对每个待定位点或一个先验位置区域，设计并实现一个独立的、可复现的子集选择模块，其输入为：全部候选基站坐标 {a_j}_{j=1..N}、对应观测噪声方差或权重 {σ_j^2}（或等权重）、以及一个用于评估信息量的目标位置 p0（可以为先验位置、粗定位结果或一组代表性位置）；模块输出为一个尽可能小的基站索引子集 S，使得在 S 上进行定位可达到用户给定的精度要求或在给定基站数下达到近似最优精度，并同时返回所选子集的质量度量（如预期协方差近似 Cov ≈ I_S(p0)^{-1}、GDOP、det(FIM)或trace(Cov)）。具体任务边界与步骤如下：1) 目标与约束定义——明确要最小化的量（基站数 |S|）与要满足的定位性能阈值 τ（例如 trace(Cov) ≤ τ 或 GDOP ≤ τ），或反向设定固定的最大基站数 k 并以某准则（D-准则：最大化 det(I_S)，或 A-准则：最小化 trace(I_S^{-1})）为目标寻找最优子集；若定位同时含需估计的时钟偏置，则在 FIM 中包含偏置维度并据此验 rank 条件。2) 信息度量构造——对任意候选基站 j 在位置 p0 处计算方向向量 g_j = (p0 − a_j)/||p0 − a_j||（或其在二维/三维相应形式），构建 Fisher 信息增量矩阵 I_j = (1/σ_j^2) g_j g_j^T（若含偏置 b，则对应附加行列），并以 I_S = Σ_{j∈S} I_j 为子集信息矩阵；用 I_S 的行列式、条件数、迹或其逆矩阵的迹作为子集质量度量。3) 算法设计与实现策略——由于子集选择为组合性 NP-hard 问题，提供两类实用算法：精确（小规模 N）与近似（中大规模 N）。当 N≤可穷举阈值（例如 10–12）时可穷举所有子集并直接选最优；否则采用贪心递增（每步在尚未选入的基站中选择使目标增益最大者，直至达到精度阈值或到达预定基站数），贪心在许多信息增益指标下近似良好且高效；作为更精细的替代，可将问题表述为混合整数非线性/凸优化（例如最大化 logdet(I(x)) s.t. Σ x_j ≤ k, x_j ∈ {0,1}）并使用整数规划或半正定松弛（SDR）与随机化重构获得近似解（可用 cvxpy + MIP/SDP 求解器实现）。4) 数值细节与稳健性——为避免病态矩阵，计算 I_S 时对角加小常数正则项 εI；在评估 candidate 增益时可用矩阵行列式的增量公式或基于秩-1 更新加速运算；若存在已识别为高概率 NLOS 的基站或权重信息（低 SINR），应在权重中反映以降低其被选中的可能性；对于不确定或多点先验 p0，可对若干 p0 候选执行子集选择并取并集或交集策略以获得稳健子集。5) 输出与复杂度说明——模块应返回：所选基站索引列表 S、预期信息矩阵 I_S、协方差近似 Cov ≈ I_S^{-1}、质量度量值（det, trace, GDOP）、所需基站数与算法类型（贪心/穷举/SDR），并报告运行时间复杂度（贪心约 O(k·N·d^3) 主要由矩阵更新支配，穷举按子集数增长，SDR/整数规划视求解器而定）。6) 实现工具建议——数值线性代数与矩阵操作用 numpy/scipy，非线性/凸/整数求解可用 cvxpy（配合 MOSEK/Gurobi/CBC 等求解器），并用并行化（多线程或向量化）加速对多个 p0 或多个候选位置的并行评估。该子任务的完成要求代码能够在给定 p0 和噪声模型下自动返回满足精度目标的最小或近似最小基站集合，并提供可解释的数值质量报告供下游定位步骤使用。",
    "子任务 4 的目标是针对运动中的终端，基于随时间采集的 TOA 观测数据和已知基站坐标（并在存在有限覆盖半径 R 的情况下），实现（A）动态位置与时钟状态的估计与平滑（轨迹重建），（B）在每个场景/时间点判定哪些终端“可被定位”，并据此计算并报告该场景的连接度 λ，及（C）建立并验证连接度 λ 与定位精度之间的定量关系。输入为按时间顺序的 TOA 测距观测矩阵（缺失值表示该基站在该时刻不可见或观测无效）、基站三维坐标、物理常数 c 以及通信半径 R（若适用）；输出为每个终端在每个时间点的估计状态序列（位置、可选速度）、对应的不确定度（协方差或置信区间）、被判定为“可定位”的终端集合、场景级连接度 λ 值以及 λ 与定位误差关系的数值化描述与拟合模型。方法上，先对观测做预处理（TOA→等效距离、按 R 掩码移除超出覆盖的观测、缺失值处理），然后采用基于状态空间的时序估计：建立离散时间非线性状态方程 x_{k+1}=F x_k+q_k（状态可包含位置 p_k、速度 v_k、时钟偏置 b_k 及其漂移 ḃ_k），测量方程为 r̂_{k,j}=||p_k−a_j||+b_k+η_{k,j}（可扩展加入每链路的非负 NLOS 偏置 s_{k,j}），并根据噪声/非线性特性选择滤波器——在近高斯噪声与中等非线性下使用扩展卡尔曼滤波（EKF）或无迹卡尔曼滤波（UKF）以实现实时递推，在强非高斯或高 NLOS 比例时采用粒子滤波（PF）或滑动窗口的批量非线性最小二乘（LM）/因子图优化并配合后端 Rauch–Tung–Striebel 平滑以提高全轨迹精度。为处理 NLOS 与异常观测，算法应支持：残差驱动的在线异常检测与自适应观测加权（Huber/IRLS）、基于稀疏正则化的偏置估计（在每个时刻或滑窗内交替估计非负偏置 s 并用 L1 促稀疏）以及必要时的 RANSAC 式内点识别；缺失观测与基站可见性随时间变化由滤波器动态接纳/忽略观测项，观测协方差应随 SINR/RSS 等侧信息自适应调整（若无侧信息则用经验或预估 σ）。关于“可被定位”的判定规则，明确采用两层标准：数量门槛（例如三维未知时钟需至少 4 个非共面可见基站，否则判为不可定位）和几何/信息充分性判定（在当前观测集合下计算 Fisher 信息矩阵 I_S，并检验其秩/条件数与预定阈值以确保可逆与数值稳定），仅对满足两者的终端计入“可定位”集合；连接度 λ 按题目定义计算为（所有可定位终端到基站间的连接数）/（终端总数），连接数统计使用掩码后的可见基站计数。为了把 λ 与定位精度联系起来，提出两步法：理论近似通过在估计点处构造 FIM 并用 CRB（Cov≈I^{-1}）导出在相同噪声水准下，平均协方差随观测数量与几何分布变化的定性关系；工程实证通过大规模蒙特卡洛仿真或对给定场景的多次随机化实验，在不同 λ 下计算均方根误差（RMSE）并拟合经验模型（例如幂律或加偏置模型 RMSE≈α λ^{-β}+γ），同时识别 λ 的临界值（低于该值大多数终端不可定位或误差急剧上升）和冗余饱和点（λ 增加带来边际收益显著下降）。实现细节与参数建议包括：状态/观测方程的雅可比矩阵用于 EKF，滑动窗口长度与粒子数应在精度与计算量之间权衡（例如窗口长度数十个时刻、PF 粒子数视复杂度从数百到数千），Huber 阈值与 L1 正则强度可通过交叉验证或初步仿真设定，数值求解可使用 Python + numpy/scipy、filterpy/pykalman（滤波）、pyro/pyro4 或自写 PF、scipy.optimize.least_squares（批量优化）、cvxpy/OSQP（带正则的凸子问题）；输出应包含时间序列估计、每时刻的协方差、“可定位”布尔标志、场景 λ 值及 RMSE-vs-λ 的曲线和拟合参数，以便对部署决策和实时定位可用性作出量化评估。"
  ]
}