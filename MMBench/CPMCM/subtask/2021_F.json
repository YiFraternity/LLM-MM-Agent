{
  "tasks": [],
  "problem_str": "问题背景：\n众所周知，一趟民航航班必须在满足特定的条件下才能起飞，这些条件包括国家法律法规，国际公约，政府的行政条例，和公司自身的政策利益，一些国家的工会组织还会对机组人员的福利偏好有规章约束。所有这些条件都是对保证飞航安全和旅客服务质量最重要的因素之一。\n\n广义的机组人员包括飞行员（Pilot，或Flight Deck），乘务员（Cabin Crew）和空警（Air Marshal）。所谓机组排班问题，就是构造特定时间段的机组日程安排，包括每个机组人员在何时何地及哪个航班执行何种任务。一家100架飞机的航空公司，机组人员可以达到5000-7000之多。一个高质量的机组航班任务计划，不仅能给航空公司的运营节约成本，还能合理地考虑劳逸平衡（Work-life Balance），机组偏好（Crew Preference），组员同行（Teaming），培训（Training），时近性（Recency）和休假（Vacation Leave）等等。因为这三类机组人员不能互相通用，所以机组排班问题一般都是对他们分别求解。另外，不同机型之间的飞行员一般也不能通用，所以飞行员排班问题通常也是对不同机型分别求解。\n\n图1. 机组排班问题示意图：飞行员甲和飞行员乙有各自的飞行路径，他们在执行航班BBB->CCC任务时相遇\n\n机组排班问题是运筹学应用的最早典范之一，经过过去~60年的发展，虽然在计算速度和应用复杂度方面还不尽满意，但已经形成了比较成熟甚至通用的解决方案，该解决方案把机组排班问题分解成两个子问题求解：以满足规范和节约成本为主要目的任务环生成，和以满足公平合理为主要目的任务环分配，它们相对应的优化问题叫Pairing Optimization (PO) 和 Roster Optimization (RO)。该两问题的解决，都是通过建立网络流模型（Network Flow）然后列生成法（Column Generation）求解。列生成法易于处理各种复杂的约束条件，优化模型比较简单，在计算性能上有很大的优势，对解决分配问题非常有效，虽然算法效果的好坏也取决于子问题及算法部件的局部处理方法。\n\n但另一方面，两阶段子问题求解法也有其明显的缺陷。比如实际排班过程中需要具备人工预排班功能，一个机组人员可能会乘坐指定航班到某地但回程却由系统安排。两阶段解法不能很好地处理这样的不完整任务环问题。而且理论上，两阶段解法缩小了优化空间，所谓的最优解其实是次优解。同时，对列生成法而言，各种规章约束参数主要是在列生成过程中考虑，优化模型本身缺乏这些约束参数的显性表达，通常的参数敏感性分析手段不能采用，因而难以对业务规则的制订起到指导作用。\n\n本题的宗旨是建立线性优化模型，明确表达飞行时间、执勤时间、休息时间等约束，把航班直接分配给机组人员。\n\n需要指出的是，实际应用的机组排班问题考虑因素非常繁杂。本题通过抽象合并，剔除非核心的琐碎概念和约束，但保留问题的核心复杂度。同时，学术界关于机组排班问题的各种文献只能作为对业界背景知识的了解。如果参赛者坚持参照文献中的模型及算法，敬请详列步骤。\n\n注：Sabre 公司是全球第一次采用计算机算法求解大型机组排班问题并在 American Airline 得以使用，也是全球第一家在任务环求解方案中对远程航段（Long Haul）引入机组增强（Augmentation）和降阶（Down Ranking）功能，并在 Singapore Airline 得到有效使用。中国国际航空公司（Air China）至今也一直在使用着 Sabre 的机组排班和管理系统 Aircrews。\n\n问题要求：\n航空公司的运营管理非常复杂，很多过程需要经过长期-中期-短期等多层次的往复循环。机组排班问题假设航班规划阶段已经完成，机型分配已经结束，对机组人员数量及资格的需求已经明确，而且可用机组人员也已经确定。机组优化排班问题的描述通过以下概念的介绍展开。\n\n时间：航空公司的运营是跨时空的。本题时间的表达由年月日时分组成，秒以下的精度不计。所有时间均按单一指定时区定义（比如北京时区），相邻两天的时间分割点是给定时区的半夜零点。\n\n机场：航班的起飞和到达，及机组人员的出发和到达，都是以机场为节点。机场的标识一般按照国际民航组织 IATA 标准。比如北京首都机场 PEK，上海浦东国际机场 PVG。\n\n机组人员（Crew）：本题的描述只针对飞行员，但对乘务员和乘警完全适用。现代民航飞机的驾驶通常需要两种资格的飞行员：正机长（也叫机长或正驾驶，Captain）和副机长（也叫副驾驶，First Officer）。\n\n1. 每个机组人员都有一个固定的基地，用所在地机场表达。\n2. 每个机组人员都具有一个且仅有一个主要资格，但也可以具备其它的替补资格。机组排班优先安排主要资格，但当主要资格不足时，可以安排替补资格。本题假定具备正机长资格的飞行员其主要资格是正机长，否则其主要资格是副机长。部分正机长可以替补副机长执行飞行任务。机组人员按主要资格或替补资格执行的任务都叫飞行任务。 \n3. 机组人员除了执行飞行任务外，还可以执行乘机（Deadhead）任务。乘机任务是指机组人员乘坐正常航班从一机场摆渡到另一机场去执行飞行任务。注：乘机人数一般会有限制。\n\n航班（Flight）：指飞机的一次起飞和降落。本题假定每个航班都是唯一的，虽然实际情况下的航班号可能按天或星期重复。注：当航班应用于机组人员排班时也叫航段（英文Leg或Sector）。\n1. 每个航班都有给定的起飞日期、时间，和到达日期、时间。\n2. 每个航班都有给定的起飞和到达机场。\n3. 每个航班都有给定的最低机组资格配置（Composition），用格式C<数> F<数> 描述，其中C<数>为正机长数，F<数>为副机长数。一个航班只有满足了最低机组资格配置才能起飞。注：本题假定只有一种机型一种配置，实际情况可以有所不同。\n图2. 航段及机组分配流动示例图\n比如，航班FA121机组配置C1F2，到达机场BBB后，其中C1F1转服务FA231，剩余C0F1转服务FA232。航班FA122机组配置C1F1，另有C1F2乘机去机场BBB。\n\n\n执勤（Duty）：一次执勤由一连串航段（飞行或乘机）和间隔连接时间组成，相当于一次上班。同一次执勤的航段之间满足如下关系：\n1. 上一趟航段的到达和下一趟航段的出发机场一致。\n2. 上一趟航段的到达和下一趟航段的出发之间的间隔时间必须满足最短连接时间约束。\n3. 同一次执勤里的每个航段必须在同一天起飞，但到达时间不受此限制。按起飞时间，我们说这次执勤属于那一天。\n航段之间的连接时间计入执勤时间，但不计入飞行时间。执勤起始时间从当天所执行的第一趟航班的起飞时间算起，结束时间按最后一趟航班的到达时间计算。因此，执勤结束时间可以不和该执勤开始时间在同一天。\n\n任务环（Pairing）：任务环由一连串的执勤和休息时间组成，从自己的基地出发并最终回到自己的基地，相当于一次出差。属于同一任务环的执勤之间满足如下关系：\n1. 上一次执勤的结束机场必须和下一次执勤的起始机场相一致； \n2. 两个相邻执勤之间的休息时间必须满足最少休息时间限制，但没有上限；\n3. 每个任务环里的第一次执勤必须从基地出发，最后一次执勤必须回到基地。\n\n\n排班计划（Roster）及排班周期：每个机组人员在每个排班周期都有一个排班计划，这个计划由一系列的任务环和休假组成，任务环之间满足一定的休假天数。一个排班周期通常是两个星期（双周计划）或者一个月（月计划）。机组人员的排班计划按排班周期编排，每个周期开始前几天完成编排并向机组人员发布。\n\n排班周期之间有严格的时间分割，机组人员在给定排班周期内的最后一个任务环可能跨越这个时间分割点而进入下一个排班周期。为减少模型复杂度，本赛题假定所有机组人员的初始位置和排班周期结束时的终了位置都是在其基地，并把排班周期进行了适当的延展。\n\n\n三、赛题\n本赛题由三个子问题组成，每个子问题都基于前一个子问题并与之相容。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。凡是本赛题没有提及，均不在考虑之列。本题假定：\n1. 机组人员之间可以任意组合；\n2. 允许存在因为无法满足最低机组资格配置而不能起飞的航班；\n3. 不满足最低机组资格配置的航班不能配置任何机组人员；\n4. 机组人员可以乘机摆渡，即实际机组配置可以超过最低配置要求，乘机机组人员的航段时间计入执勤时间，但不计入飞行时间。\n\n子问题1：基本题。要求建立线性规划模型给航班分配机组人员（或者说给机组人员分配航班），依编号次序满足目标\n①.  尽可能多的航班满足机组配置;\n④.  尽可能少的总体乘机次数；\n⑦.  尽可能少使用替补资格。\n约束：\n1. 每个机组人员初始从基地出发并最终回到基地；\n2. 每个机组人员的下一航段的起飞机场必须和上一航段的到达机场一致；\n3. 每个机组人员相邻两个航段之间的连接时间不小于 MinCT分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题2：引进执勤概念。假定每个机组人员 的每单位小时执勤成本给定（可以设想为小时工资）。本子问题除了需要满足子问题1的所有目标外，还需满足如下目标（依编号次序）\n②.  机组人员的总体执勤成本最低；\n⑤.  机组人员之间的执勤时长尽可能平衡。\n同时在满足子问题1约束的基础上进一步要求：\n1. 每个机组人员每天至多只能执行一个执勤；\n2. 每次执勤的飞行时间最多不超过MaxBlk分钟；\n3. 每次执勤的时长最多不超过 MaxDP分钟； \n4. 每个机组人员下一执勤的起始机场必须和上一执勤的结束机场一致；\n5. 每个机组人员的相邻两个执勤之间的休息时间不小于 MinRest分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题3：编制排班计划。假定每个机组人员 的每单位小时任务环成本给定（注：不包括执勤成本，可以设想为出差补贴）。本子问题除了需要满足子问题1和2的所有目标外，还需满足如下目标（依编号次序）\n③.  机组人员的总体任务环成本最低；\n⑥.  机组人员之间的任务环时长尽可能平衡。\n同时在满足子问题1和2的约束的基础上进一步要求：\n1. 每个机组人员每个排班周期的任务环总时长不超过 MaxTAFB 分钟；\n2. 每个机组人员相邻两个任务环之间至少有MinVacDay天休息。\n3. 每个机组人员连续执勤天数不超过MaxSuccOn天\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n四、输入数据说明\n本题有两套检测数据，要求参赛者先优先运行 A 套数据，然后再 B 套数据。如下表所示：\n\n数据表：\n| 数据 | 基地数 | 计划周期开始 | 计划周期结束 | 航班数 | 机组人数 | 机场数 |\n|------|--------|--------------|--------------|--------|----------|--------|\n| A 套 | 1 | 2021-08-11 | 2021-08-25 | 206 | 21 | 7 |\n| B 套 | 2 | 2021-08-01 | 2021-08-31 | 13954 | 465 | 39 |\n\n注：部分航班到达时间可能会在计划周期结束后的第一天。\n\n每套输入数据由三部分组成，除输入参数在这里给出外，航班计划和机组人员数据需要另外下载，这里仅给出格式描述。\n1. 输入参数：\n航段之间最小连接时间 MinCT = 40分钟\n一次执勤飞行时长最多不超过 MaxBlk = 600分钟\n执勤时长最多不超过 MaxDP = 720分钟\n相邻执勤之间的休息时间不少于 MinRest = 660分钟\n每趟航班最多乘机人数 MaxDH = 5\n排班周期单个机组人员任务环总时长不超过 MaxTAFB = 14400分钟\n连续执勤天数不超过MaxSuccOn = 4天\n相邻两个任务环之间至少有MinVacDay =2天休息\n\n2. 航班计划数据格式\n| 航班号 | 出发日期 | 出发时间 | 出发机场 | 到达日期 | 到达时间 | 到达机场 | 最低资格配置 |\n|--------|----------|----------|----------|----------|----------|----------|--------------|\n| FA865  | 8/14/2021 | 20:00 | PXB | 8/14/2021 | 21:45 | NKX | C1F1 |\n| FB1100 | 8/18/2019 | 23:10 | TUK | 8/19/2019 | 1:00 | TGD | C1F1 |\n\n3. 机组人员信息数据格式：\n| 员工号 | 正机长 | 副机长 | 允许乘机 | 基地 | 每单位小时执勤成本 | 每单位小时任务环成本 |\n|--------|--------|--------|----------|------|------------------|------------------|\n| A00052 | Y | N | Y | NKX | 640 | 20 |\n| B02002 | N | Y | N | TGD | 680 | 20 |\n| B00500 | N | Y | N | HOM | 600 | 20 |\n\n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\na. 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（’），上横（$\\bar$ ）等辅助记号；\nb. 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\na. 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\nb. 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\nc. 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行实验\na. 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\nb. 程序必须模块化，结构要面向目标，注释清晰；\nc. 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据，同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n| 结果指标 | 子问题1 | 子问题2 | 子问题3 |\n|----------|---------|---------|---------|\n| 不满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 机组人员总体乘机次数 | 要求 | 要求 | 要求 |\n| 替补资格使用次数 | 要求 | 要求 | 要求 |\n| 机组总体利用率 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤飞行时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤执勤时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大机组人员执勤天数 | 要求 | 要求 | 要求 |\n| 一/二/三/四天任务环数量分布 | 要求 | 要求 | 要求 |\n| 总体执勤成本（万元） | 要求 | 要求 | 要求 |\n| 总体任务环成本（万元） | 要求 | 要求 | 要求 |\n| 程序运行分钟数 | 要求 | 要求 | 要求 |\n【注1】：除“不满足机组配置航班数”外，其它所有结果统计指标都是针对满足了机组配置的航班。\n【注2】：除“程序运行分钟数”外，其它所有时长单位都是小时，比如4.25.\n【注3】：机组总体利用率 = 最低配置总体飞行时长 / 总体执勤时长，其中，\n最低配置总体飞行时长 = 总体执勤时长 - 总体连接时长 - 总体乘机时长\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\na. 按拟起飞日期和时间，出发和到达机场的次序，罗列没有机组配置的航班号和其最低配置需求。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “UncoveredFlights.csv” 提交。\nb. 按机组人员，按日期，按航段次序，罗列该机组人员的航班分配，需注明航班号，起飞日期时间/机场和到达日期时间/机场，任务性质（机长，副机长，替补，乘机）等。如休假日也需注明。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “CrewRosters.csv” 提交。\nAddendum: \n参考文献\nXiaodong Luo, Yogesh Dashora, Tina Shaw (2015) Airline Crew Augmentation: Decades of Improvements from Sabre. Interfaces 45(5): 409-424.\nSaeed Saemi, Alireza Rashidi Komijan, Reza Tavakkoli-Moghaddam and Mohammad Fallah, A new mathematical model to cover crew pairing and rostering problems simultaneously, Journal of Engg. Research Vol. 9 No. (2) June 2021 pp. 218-233\nMohamed Haouari, Farah Zeghal Mansour, Hanif D. Sherali (2019) A New Compact Frmulation Fr the Daily Crew Pairing Problem. Transportation Science 53(3): 811-828\nDataset Path:\n['机组排班Data_A-Crew.csv', '机组排班Data_A-Flight.csv', '机组排班Data_B-Crew.csv', '机组排班Data_B-Flight.csv']\n\nData Description:\n该数据集由四个 CSV 文件组成，分为 A 组和 B 组，每组包含机组人员基本信息表和航班飞行记录表，用于机组排班与成本分析。机组信息表以员工编号（EmpNo）为唯一标识，记录机长/副驾驶资格标识（以“Y”或空值表示）、是否可执行空勤/Deadhead 任务、所属基地机场（以 IATA 代码表示）以及每小时的执勤/配对成本（以人民币元为单位），A 组与 B 组字段命名上有细微差别但含义一致。航班表记录具体航班的起降信息（航班号、起飞/到达日期与时间、起飞机场与到达机场）以及机组配置说明（Comp，示例格式如 C1F1 表示 1 名机长和 1 名副驾驶），A 组航班覆盖 2021-08-11 至 2021-08-25 的飞行数据，B 组为 2019 年 8 月的航班数据。整体数据便于基于基地位置、人员资质与能否执行 Deadhead 的约束进行排班建模，并可用每小时成本字段进行成本估算与配对优化分析，时间字段用于计算航班时间窗与转场/休息要求。数据字段以标识性与数值成本为主，适合用于排班规则校验、可行性检查和优化模型的输入。",
  "problem": {
    "background": "众所周知，一趟民航航班必须在满足特定的条件下才能起飞，这些条件包括国家法律法规，国际公约，政府的行政条例，和公司自身的政策利益，一些国家的工会组织还会对机组人员的福利偏好有规章约束。所有这些条件都是对保证飞航安全和旅客服务质量最重要的因素之一。\n\n广义的机组人员包括飞行员（Pilot，或Flight Deck），乘务员（Cabin Crew）和空警（Air Marshal）。所谓机组排班问题，就是构造特定时间段的机组日程安排，包括每个机组人员在何时何地及哪个航班执行何种任务。一家100架飞机的航空公司，机组人员可以达到5000-7000之多。一个高质量的机组航班任务计划，不仅能给航空公司的运营节约成本，还能合理地考虑劳逸平衡（Work-life Balance），机组偏好（Crew Preference），组员同行（Teaming），培训（Training），时近性（Recency）和休假（Vacation Leave）等等。因为这三类机组人员不能互相通用，所以机组排班问题一般都是对他们分别求解。另外，不同机型之间的飞行员一般也不能通用，所以飞行员排班问题通常也是对不同机型分别求解。\n\n图1. 机组排班问题示意图：飞行员甲和飞行员乙有各自的飞行路径，他们在执行航班BBB->CCC任务时相遇\n\n机组排班问题是运筹学应用的最早典范之一，经过过去~60年的发展，虽然在计算速度和应用复杂度方面还不尽满意，但已经形成了比较成熟甚至通用的解决方案，该解决方案把机组排班问题分解成两个子问题求解：以满足规范和节约成本为主要目的任务环生成，和以满足公平合理为主要目的任务环分配，它们相对应的优化问题叫Pairing Optimization (PO) 和 Roster Optimization (RO)。该两问题的解决，都是通过建立网络流模型（Network Flow）然后列生成法（Column Generation）求解。列生成法易于处理各种复杂的约束条件，优化模型比较简单，在计算性能上有很大的优势，对解决分配问题非常有效，虽然算法效果的好坏也取决于子问题及算法部件的局部处理方法。\n\n但另一方面，两阶段子问题求解法也有其明显的缺陷。比如实际排班过程中需要具备人工预排班功能，一个机组人员可能会乘坐指定航班到某地但回程却由系统安排。两阶段解法不能很好地处理这样的不完整任务环问题。而且理论上，两阶段解法缩小了优化空间，所谓的最优解其实是次优解。同时，对列生成法而言，各种规章约束参数主要是在列生成过程中考虑，优化模型本身缺乏这些约束参数的显性表达，通常的参数敏感性分析手段不能采用，因而难以对业务规则的制订起到指导作用。\n\n本题的宗旨是建立线性优化模型，明确表达飞行时间、执勤时间、休息时间等约束，把航班直接分配给机组人员。\n\n需要指出的是，实际应用的机组排班问题考虑因素非常繁杂。本题通过抽象合并，剔除非核心的琐碎概念和约束，但保留问题的核心复杂度。同时，学术界关于机组排班问题的各种文献只能作为对业界背景知识的了解。如果参赛者坚持参照文献中的模型及算法，敬请详列步骤。\n\n注：Sabre 公司是全球第一次采用计算机算法求解大型机组排班问题并在 American Airline 得以使用，也是全球第一家在任务环求解方案中对远程航段（Long Haul）引入机组增强（Augmentation）和降阶（Down Ranking）功能，并在 Singapore Airline 得到有效使用。中国国际航空公司（Air China）至今也一直在使用着 Sabre 的机组排班和管理系统 Aircrews。",
    "problem_requirement": "航空公司的运营管理非常复杂，很多过程需要经过长期-中期-短期等多层次的往复循环。机组排班问题假设航班规划阶段已经完成，机型分配已经结束，对机组人员数量及资格的需求已经明确，而且可用机组人员也已经确定。机组优化排班问题的描述通过以下概念的介绍展开。\n\n时间：航空公司的运营是跨时空的。本题时间的表达由年月日时分组成，秒以下的精度不计。所有时间均按单一指定时区定义（比如北京时区），相邻两天的时间分割点是给定时区的半夜零点。\n\n机场：航班的起飞和到达，及机组人员的出发和到达，都是以机场为节点。机场的标识一般按照国际民航组织 IATA 标准。比如北京首都机场 PEK，上海浦东国际机场 PVG。\n\n机组人员（Crew）：本题的描述只针对飞行员，但对乘务员和乘警完全适用。现代民航飞机的驾驶通常需要两种资格的飞行员：正机长（也叫机长或正驾驶，Captain）和副机长（也叫副驾驶，First Officer）。\n\n1. 每个机组人员都有一个固定的基地，用所在地机场表达。\n2. 每个机组人员都具有一个且仅有一个主要资格，但也可以具备其它的替补资格。机组排班优先安排主要资格，但当主要资格不足时，可以安排替补资格。本题假定具备正机长资格的飞行员其主要资格是正机长，否则其主要资格是副机长。部分正机长可以替补副机长执行飞行任务。机组人员按主要资格或替补资格执行的任务都叫飞行任务。 \n3. 机组人员除了执行飞行任务外，还可以执行乘机（Deadhead）任务。乘机任务是指机组人员乘坐正常航班从一机场摆渡到另一机场去执行飞行任务。注：乘机人数一般会有限制。\n\n航班（Flight）：指飞机的一次起飞和降落。本题假定每个航班都是唯一的，虽然实际情况下的航班号可能按天或星期重复。注：当航班应用于机组人员排班时也叫航段（英文Leg或Sector）。\n1. 每个航班都有给定的起飞日期、时间，和到达日期、时间。\n2. 每个航班都有给定的起飞和到达机场。\n3. 每个航班都有给定的最低机组资格配置（Composition），用格式C<数> F<数> 描述，其中C<数>为正机长数，F<数>为副机长数。一个航班只有满足了最低机组资格配置才能起飞。注：本题假定只有一种机型一种配置，实际情况可以有所不同。\n图2. 航段及机组分配流动示例图\n比如，航班FA121机组配置C1F2，到达机场BBB后，其中C1F1转服务FA231，剩余C0F1转服务FA232。航班FA122机组配置C1F1，另有C1F2乘机去机场BBB。\n\n\n执勤（Duty）：一次执勤由一连串航段（飞行或乘机）和间隔连接时间组成，相当于一次上班。同一次执勤的航段之间满足如下关系：\n1. 上一趟航段的到达和下一趟航段的出发机场一致。\n2. 上一趟航段的到达和下一趟航段的出发之间的间隔时间必须满足最短连接时间约束。\n3. 同一次执勤里的每个航段必须在同一天起飞，但到达时间不受此限制。按起飞时间，我们说这次执勤属于那一天。\n航段之间的连接时间计入执勤时间，但不计入飞行时间。执勤起始时间从当天所执行的第一趟航班的起飞时间算起，结束时间按最后一趟航班的到达时间计算。因此，执勤结束时间可以不和该执勤开始时间在同一天。\n\n任务环（Pairing）：任务环由一连串的执勤和休息时间组成，从自己的基地出发并最终回到自己的基地，相当于一次出差。属于同一任务环的执勤之间满足如下关系：\n1. 上一次执勤的结束机场必须和下一次执勤的起始机场相一致； \n2. 两个相邻执勤之间的休息时间必须满足最少休息时间限制，但没有上限；\n3. 每个任务环里的第一次执勤必须从基地出发，最后一次执勤必须回到基地。\n\n\n排班计划（Roster）及排班周期：每个机组人员在每个排班周期都有一个排班计划，这个计划由一系列的任务环和休假组成，任务环之间满足一定的休假天数。一个排班周期通常是两个星期（双周计划）或者一个月（月计划）。机组人员的排班计划按排班周期编排，每个周期开始前几天完成编排并向机组人员发布。\n\n排班周期之间有严格的时间分割，机组人员在给定排班周期内的最后一个任务环可能跨越这个时间分割点而进入下一个排班周期。为减少模型复杂度，本赛题假定所有机组人员的初始位置和排班周期结束时的终了位置都是在其基地，并把排班周期进行了适当的延展。\n\n\n三、赛题\n本赛题由三个子问题组成，每个子问题都基于前一个子问题并与之相容。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。凡是本赛题没有提及，均不在考虑之列。本题假定：\n1. 机组人员之间可以任意组合；\n2. 允许存在因为无法满足最低机组资格配置而不能起飞的航班；\n3. 不满足最低机组资格配置的航班不能配置任何机组人员；\n4. 机组人员可以乘机摆渡，即实际机组配置可以超过最低配置要求，乘机机组人员的航段时间计入执勤时间，但不计入飞行时间。\n\n子问题1：基本题。要求建立线性规划模型给航班分配机组人员（或者说给机组人员分配航班），依编号次序满足目标\n①.  尽可能多的航班满足机组配置;\n④.  尽可能少的总体乘机次数；\n⑦.  尽可能少使用替补资格。\n约束：\n1. 每个机组人员初始从基地出发并最终回到基地；\n2. 每个机组人员的下一航段的起飞机场必须和上一航段的到达机场一致；\n3. 每个机组人员相邻两个航段之间的连接时间不小于 MinCT分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题2：引进执勤概念。假定每个机组人员 的每单位小时执勤成本给定（可以设想为小时工资）。本子问题除了需要满足子问题1的所有目标外，还需满足如下目标（依编号次序）\n②.  机组人员的总体执勤成本最低；\n⑤.  机组人员之间的执勤时长尽可能平衡。\n同时在满足子问题1约束的基础上进一步要求：\n1. 每个机组人员每天至多只能执行一个执勤；\n2. 每次执勤的飞行时间最多不超过MaxBlk分钟；\n3. 每次执勤的时长最多不超过 MaxDP分钟； \n4. 每个机组人员下一执勤的起始机场必须和上一执勤的结束机场一致；\n5. 每个机组人员的相邻两个执勤之间的休息时间不小于 MinRest分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题3：编制排班计划。假定每个机组人员 的每单位小时任务环成本给定（注：不包括执勤成本，可以设想为出差补贴）。本子问题除了需要满足子问题1和2的所有目标外，还需满足如下目标（依编号次序）\n③.  机组人员的总体任务环成本最低；\n⑥.  机组人员之间的任务环时长尽可能平衡。\n同时在满足子问题1和2的约束的基础上进一步要求：\n1. 每个机组人员每个排班周期的任务环总时长不超过 MaxTAFB 分钟；\n2. 每个机组人员相邻两个任务环之间至少有MinVacDay天休息。\n3. 每个机组人员连续执勤天数不超过MaxSuccOn天\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n四、输入数据说明\n本题有两套检测数据，要求参赛者先优先运行 A 套数据，然后再 B 套数据。如下表所示：\n\n数据表：\n| 数据 | 基地数 | 计划周期开始 | 计划周期结束 | 航班数 | 机组人数 | 机场数 |\n|------|--------|--------------|--------------|--------|----------|--------|\n| A 套 | 1 | 2021-08-11 | 2021-08-25 | 206 | 21 | 7 |\n| B 套 | 2 | 2021-08-01 | 2021-08-31 | 13954 | 465 | 39 |\n\n注：部分航班到达时间可能会在计划周期结束后的第一天。\n\n每套输入数据由三部分组成，除输入参数在这里给出外，航班计划和机组人员数据需要另外下载，这里仅给出格式描述。\n1. 输入参数：\n航段之间最小连接时间 MinCT = 40分钟\n一次执勤飞行时长最多不超过 MaxBlk = 600分钟\n执勤时长最多不超过 MaxDP = 720分钟\n相邻执勤之间的休息时间不少于 MinRest = 660分钟\n每趟航班最多乘机人数 MaxDH = 5\n排班周期单个机组人员任务环总时长不超过 MaxTAFB = 14400分钟\n连续执勤天数不超过MaxSuccOn = 4天\n相邻两个任务环之间至少有MinVacDay =2天休息\n\n2. 航班计划数据格式\n| 航班号 | 出发日期 | 出发时间 | 出发机场 | 到达日期 | 到达时间 | 到达机场 | 最低资格配置 |\n|--------|----------|----------|----------|----------|----------|----------|--------------|\n| FA865  | 8/14/2021 | 20:00 | PXB | 8/14/2021 | 21:45 | NKX | C1F1 |\n| FB1100 | 8/18/2019 | 23:10 | TUK | 8/19/2019 | 1:00 | TGD | C1F1 |\n\n3. 机组人员信息数据格式：\n| 员工号 | 正机长 | 副机长 | 允许乘机 | 基地 | 每单位小时执勤成本 | 每单位小时任务环成本 |\n|--------|--------|--------|----------|------|------------------|------------------|\n| A00052 | Y | N | Y | NKX | 640 | 20 |\n| B02002 | N | Y | N | TGD | 680 | 20 |\n| B00500 | N | Y | N | HOM | 600 | 20 |\n\n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\na. 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（’），上横（$\\bar$ ）等辅助记号；\nb. 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\na. 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\nb. 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\nc. 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行实验\na. 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\nb. 程序必须模块化，结构要面向目标，注释清晰；\nc. 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据，同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n| 结果指标 | 子问题1 | 子问题2 | 子问题3 |\n|----------|---------|---------|---------|\n| 不满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 机组人员总体乘机次数 | 要求 | 要求 | 要求 |\n| 替补资格使用次数 | 要求 | 要求 | 要求 |\n| 机组总体利用率 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤飞行时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤执勤时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大机组人员执勤天数 | 要求 | 要求 | 要求 |\n| 一/二/三/四天任务环数量分布 | 要求 | 要求 | 要求 |\n| 总体执勤成本（万元） | 要求 | 要求 | 要求 |\n| 总体任务环成本（万元） | 要求 | 要求 | 要求 |\n| 程序运行分钟数 | 要求 | 要求 | 要求 |\n【注1】：除“不满足机组配置航班数”外，其它所有结果统计指标都是针对满足了机组配置的航班。\n【注2】：除“程序运行分钟数”外，其它所有时长单位都是小时，比如4.25.\n【注3】：机组总体利用率 = 最低配置总体飞行时长 / 总体执勤时长，其中，\n最低配置总体飞行时长 = 总体执勤时长 - 总体连接时长 - 总体乘机时长\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\na. 按拟起飞日期和时间，出发和到达机场的次序，罗列没有机组配置的航班号和其最低配置需求。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “UncoveredFlights.csv” 提交。\nb. 按机组人员，按日期，按航段次序，罗列该机组人员的航班分配，需注明航班号，起飞日期时间/机场和到达日期时间/机场，任务性质（机长，副机长，替补，乘机）等。如休假日也需注明。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “CrewRosters.csv” 提交。",
    "dataset_path": [
      "机组排班Data_A-Crew.csv",
      "机组排班Data_A-Flight.csv",
      "机组排班Data_B-Crew.csv",
      "机组排班Data_B-Flight.csv"
    ],
    "dataset_description": {
      "机组排班Data_A-Crew": "机组排班Data_A-Crew.csv包含机组人员的基本信息，包括员工编号、是否为机长、是否为副驾驶、是否可执行Deadhead任务、基地机场、每小时职务成本和每小时配对成本。",
      "机组排班Data_A-Flight": "机组排班Data_A-Flight.csv包含2021年8月11日至8月25日的航班飞行数据，包括航班编号、起飞日期、起飞时间、起飞机场、到达日期、到达时间、到达机场以及机组人员配置。",
      "机组排班Data_B-Crew": "机组排班Data_B-Crew.csv包含机组人员的基本信息，包括员工编号、是否具备机长资格、是否具备副机长资格、是否可以执行空勤任务、基地机场、每小时的执勤成本和配对成本。",
      "机组排班Data_B-Flight": "机组排班Data_B-Flight.csv包含2019年8月的航班飞行数据，记录了航班编号、起飞日期、起飞时间、起飞机场、到达日期、到达时间、到达机场以及机组人员配置。"
    },
    "variable_description": [
      {
        "EmpNo": "机组人员的唯一标识符，员工编号",
        "Captain": "是否为机长，Y表示是，空表示否",
        "FirstOfficer": "是否为副驾驶，Y表示是，空表示否",
        "Deadhead": "是否可执行Deadhead任务，Y表示是，空表示否",
        "Base": "机组人员的基地机场，使用IATA代码表示",
        "DutyCostPerHour": "每小时职务成本，单位为元",
        "ParingCostPerHour": "每小时配对成本，单位为元"
      },
      {
        "FltNum": "航班编号",
        "DptrDate": "起飞日期",
        "DptrTime": "起飞时间",
        "DptrStn": "起飞机场",
        "ArrvDate": "到达日期",
        "ArrvTime": "到达时间",
        "ArrvStn": "到达机场",
        "Comp": "机组人员配置，例如C1F1表示1名机长和1名副驾驶"
      },
      {
        "EmpNo": "员工编号，唯一标识每个机组人员",
        "Captain": "是否具备机长资格，Y表示具备，空表示不具备",
        "FirstOfficer": "是否具备副机长资格，Y表示具备，空表示不具备",
        "Deadhead": "是否可以执行空勤任务，Y表示可以，空表示不可以",
        "Base": "基地机场，使用IATA代码表示",
        "DutyCostPerHr": "每小时的执勤成本，单位为元",
        "ParingCostPerHr": "每小时的配对成本，单位为元"
      },
      {
        "FltNum": "航班编号",
        "DptrDate": "起飞日期",
        "DptrTime": "起飞时间",
        "DptrStn": "起飞机场",
        "ArrvDate": "到达日期",
        "ArrvTime": "到达时间",
        "ArrvStn": "到达机场",
        "Comp": "机组人员配置，例如C1F1表示1名机长和1名副驾驶"
      }
    ],
    "addendum": "参考文献\nXiaodong Luo, Yogesh Dashora, Tina Shaw (2015) Airline Crew Augmentation: Decades of Improvements from Sabre. Interfaces 45(5): 409-424.\nSaeed Saemi, Alireza Rashidi Komijan, Reza Tavakkoli-Moghaddam and Mohammad Fallah, A new mathematical model to cover crew pairing and rostering problems simultaneously, Journal of Engg. Research Vol. 9 No. (2) June 2021 pp. 218-233\nMohamed Haouari, Farah Zeghal Mansour, Hanif D. Sherali (2019) A New Compact Frmulation Fr the Daily Crew Pairing Problem. Transportation Science 53(3): 811-828",
    "data_summary": "Dataset Path:\n['机组排班Data_A-Crew.csv', '机组排班Data_A-Flight.csv', '机组排班Data_B-Crew.csv', '机组排班Data_B-Flight.csv']\n\nData Description:\n该数据集由四个 CSV 文件组成，分为 A 组和 B 组，每组包含机组人员基本信息表和航班飞行记录表，用于机组排班与成本分析。机组信息表以员工编号（EmpNo）为唯一标识，记录机长/副驾驶资格标识（以“Y”或空值表示）、是否可执行空勤/Deadhead 任务、所属基地机场（以 IATA 代码表示）以及每小时的执勤/配对成本（以人民币元为单位），A 组与 B 组字段命名上有细微差别但含义一致。航班表记录具体航班的起降信息（航班号、起飞/到达日期与时间、起飞机场与到达机场）以及机组配置说明（Comp，示例格式如 C1F1 表示 1 名机长和 1 名副驾驶），A 组航班覆盖 2021-08-11 至 2021-08-25 的飞行数据，B 组为 2019 年 8 月的航班数据。整体数据便于基于基地位置、人员资质与能否执行 Deadhead 的约束进行排班建模，并可用每小时成本字段进行成本估算与配对优化分析，时间字段用于计算航班时间窗与转场/休息要求。数据字段以标识性与数值成本为主，适合用于排班规则校验、可行性检查和优化模型的输入。",
    "data_description": {
      "机组排班Data_A-Crew": "机组排班Data_A-Crew.csv包含机组人员的基本信息，包括员工编号、是否为机长、是否为副驾驶、是否可执行Deadhead任务、基地机场、每小时职务成本和每小时配对成本。",
      "机组排班Data_A-Flight": "机组排班Data_A-Flight.csv包含2021年8月11日至8月25日的航班飞行数据，包括航班编号、起飞日期、起飞时间、起飞机场、到达日期、到达时间、到达机场以及机组人员配置。",
      "机组排班Data_B-Crew": "机组排班Data_B-Crew.csv包含机组人员的基本信息，包括员工编号、是否具备机长资格、是否具备副机长资格、是否可以执行空勤任务、基地机场、每小时的执勤成本和配对成本。",
      "机组排班Data_B-Flight": "机组排班Data_B-Flight.csv包含2019年8月的航班飞行数据，记录了航班编号、起飞日期、起飞时间、起飞机场、到达日期、到达时间、到达机场以及机组人员配置。"
    },
    "problem_str": "问题背景：\n众所周知，一趟民航航班必须在满足特定的条件下才能起飞，这些条件包括国家法律法规，国际公约，政府的行政条例，和公司自身的政策利益，一些国家的工会组织还会对机组人员的福利偏好有规章约束。所有这些条件都是对保证飞航安全和旅客服务质量最重要的因素之一。\n\n广义的机组人员包括飞行员（Pilot，或Flight Deck），乘务员（Cabin Crew）和空警（Air Marshal）。所谓机组排班问题，就是构造特定时间段的机组日程安排，包括每个机组人员在何时何地及哪个航班执行何种任务。一家100架飞机的航空公司，机组人员可以达到5000-7000之多。一个高质量的机组航班任务计划，不仅能给航空公司的运营节约成本，还能合理地考虑劳逸平衡（Work-life Balance），机组偏好（Crew Preference），组员同行（Teaming），培训（Training），时近性（Recency）和休假（Vacation Leave）等等。因为这三类机组人员不能互相通用，所以机组排班问题一般都是对他们分别求解。另外，不同机型之间的飞行员一般也不能通用，所以飞行员排班问题通常也是对不同机型分别求解。\n\n图1. 机组排班问题示意图：飞行员甲和飞行员乙有各自的飞行路径，他们在执行航班BBB->CCC任务时相遇\n\n机组排班问题是运筹学应用的最早典范之一，经过过去~60年的发展，虽然在计算速度和应用复杂度方面还不尽满意，但已经形成了比较成熟甚至通用的解决方案，该解决方案把机组排班问题分解成两个子问题求解：以满足规范和节约成本为主要目的任务环生成，和以满足公平合理为主要目的任务环分配，它们相对应的优化问题叫Pairing Optimization (PO) 和 Roster Optimization (RO)。该两问题的解决，都是通过建立网络流模型（Network Flow）然后列生成法（Column Generation）求解。列生成法易于处理各种复杂的约束条件，优化模型比较简单，在计算性能上有很大的优势，对解决分配问题非常有效，虽然算法效果的好坏也取决于子问题及算法部件的局部处理方法。\n\n但另一方面，两阶段子问题求解法也有其明显的缺陷。比如实际排班过程中需要具备人工预排班功能，一个机组人员可能会乘坐指定航班到某地但回程却由系统安排。两阶段解法不能很好地处理这样的不完整任务环问题。而且理论上，两阶段解法缩小了优化空间，所谓的最优解其实是次优解。同时，对列生成法而言，各种规章约束参数主要是在列生成过程中考虑，优化模型本身缺乏这些约束参数的显性表达，通常的参数敏感性分析手段不能采用，因而难以对业务规则的制订起到指导作用。\n\n本题的宗旨是建立线性优化模型，明确表达飞行时间、执勤时间、休息时间等约束，把航班直接分配给机组人员。\n\n需要指出的是，实际应用的机组排班问题考虑因素非常繁杂。本题通过抽象合并，剔除非核心的琐碎概念和约束，但保留问题的核心复杂度。同时，学术界关于机组排班问题的各种文献只能作为对业界背景知识的了解。如果参赛者坚持参照文献中的模型及算法，敬请详列步骤。\n\n注：Sabre 公司是全球第一次采用计算机算法求解大型机组排班问题并在 American Airline 得以使用，也是全球第一家在任务环求解方案中对远程航段（Long Haul）引入机组增强（Augmentation）和降阶（Down Ranking）功能，并在 Singapore Airline 得到有效使用。中国国际航空公司（Air China）至今也一直在使用着 Sabre 的机组排班和管理系统 Aircrews。\n\n问题要求：\n航空公司的运营管理非常复杂，很多过程需要经过长期-中期-短期等多层次的往复循环。机组排班问题假设航班规划阶段已经完成，机型分配已经结束，对机组人员数量及资格的需求已经明确，而且可用机组人员也已经确定。机组优化排班问题的描述通过以下概念的介绍展开。\n\n时间：航空公司的运营是跨时空的。本题时间的表达由年月日时分组成，秒以下的精度不计。所有时间均按单一指定时区定义（比如北京时区），相邻两天的时间分割点是给定时区的半夜零点。\n\n机场：航班的起飞和到达，及机组人员的出发和到达，都是以机场为节点。机场的标识一般按照国际民航组织 IATA 标准。比如北京首都机场 PEK，上海浦东国际机场 PVG。\n\n机组人员（Crew）：本题的描述只针对飞行员，但对乘务员和乘警完全适用。现代民航飞机的驾驶通常需要两种资格的飞行员：正机长（也叫机长或正驾驶，Captain）和副机长（也叫副驾驶，First Officer）。\n\n1. 每个机组人员都有一个固定的基地，用所在地机场表达。\n2. 每个机组人员都具有一个且仅有一个主要资格，但也可以具备其它的替补资格。机组排班优先安排主要资格，但当主要资格不足时，可以安排替补资格。本题假定具备正机长资格的飞行员其主要资格是正机长，否则其主要资格是副机长。部分正机长可以替补副机长执行飞行任务。机组人员按主要资格或替补资格执行的任务都叫飞行任务。 \n3. 机组人员除了执行飞行任务外，还可以执行乘机（Deadhead）任务。乘机任务是指机组人员乘坐正常航班从一机场摆渡到另一机场去执行飞行任务。注：乘机人数一般会有限制。\n\n航班（Flight）：指飞机的一次起飞和降落。本题假定每个航班都是唯一的，虽然实际情况下的航班号可能按天或星期重复。注：当航班应用于机组人员排班时也叫航段（英文Leg或Sector）。\n1. 每个航班都有给定的起飞日期、时间，和到达日期、时间。\n2. 每个航班都有给定的起飞和到达机场。\n3. 每个航班都有给定的最低机组资格配置（Composition），用格式C<数> F<数> 描述，其中C<数>为正机长数，F<数>为副机长数。一个航班只有满足了最低机组资格配置才能起飞。注：本题假定只有一种机型一种配置，实际情况可以有所不同。\n图2. 航段及机组分配流动示例图\n比如，航班FA121机组配置C1F2，到达机场BBB后，其中C1F1转服务FA231，剩余C0F1转服务FA232。航班FA122机组配置C1F1，另有C1F2乘机去机场BBB。\n\n\n执勤（Duty）：一次执勤由一连串航段（飞行或乘机）和间隔连接时间组成，相当于一次上班。同一次执勤的航段之间满足如下关系：\n1. 上一趟航段的到达和下一趟航段的出发机场一致。\n2. 上一趟航段的到达和下一趟航段的出发之间的间隔时间必须满足最短连接时间约束。\n3. 同一次执勤里的每个航段必须在同一天起飞，但到达时间不受此限制。按起飞时间，我们说这次执勤属于那一天。\n航段之间的连接时间计入执勤时间，但不计入飞行时间。执勤起始时间从当天所执行的第一趟航班的起飞时间算起，结束时间按最后一趟航班的到达时间计算。因此，执勤结束时间可以不和该执勤开始时间在同一天。\n\n任务环（Pairing）：任务环由一连串的执勤和休息时间组成，从自己的基地出发并最终回到自己的基地，相当于一次出差。属于同一任务环的执勤之间满足如下关系：\n1. 上一次执勤的结束机场必须和下一次执勤的起始机场相一致； \n2. 两个相邻执勤之间的休息时间必须满足最少休息时间限制，但没有上限；\n3. 每个任务环里的第一次执勤必须从基地出发，最后一次执勤必须回到基地。\n\n\n排班计划（Roster）及排班周期：每个机组人员在每个排班周期都有一个排班计划，这个计划由一系列的任务环和休假组成，任务环之间满足一定的休假天数。一个排班周期通常是两个星期（双周计划）或者一个月（月计划）。机组人员的排班计划按排班周期编排，每个周期开始前几天完成编排并向机组人员发布。\n\n排班周期之间有严格的时间分割，机组人员在给定排班周期内的最后一个任务环可能跨越这个时间分割点而进入下一个排班周期。为减少模型复杂度，本赛题假定所有机组人员的初始位置和排班周期结束时的终了位置都是在其基地，并把排班周期进行了适当的延展。\n\n\n三、赛题\n本赛题由三个子问题组成，每个子问题都基于前一个子问题并与之相容。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。凡是本赛题没有提及，均不在考虑之列。本题假定：\n1. 机组人员之间可以任意组合；\n2. 允许存在因为无法满足最低机组资格配置而不能起飞的航班；\n3. 不满足最低机组资格配置的航班不能配置任何机组人员；\n4. 机组人员可以乘机摆渡，即实际机组配置可以超过最低配置要求，乘机机组人员的航段时间计入执勤时间，但不计入飞行时间。\n\n子问题1：基本题。要求建立线性规划模型给航班分配机组人员（或者说给机组人员分配航班），依编号次序满足目标\n①.  尽可能多的航班满足机组配置;\n④.  尽可能少的总体乘机次数；\n⑦.  尽可能少使用替补资格。\n约束：\n1. 每个机组人员初始从基地出发并最终回到基地；\n2. 每个机组人员的下一航段的起飞机场必须和上一航段的到达机场一致；\n3. 每个机组人员相邻两个航段之间的连接时间不小于 MinCT分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题2：引进执勤概念。假定每个机组人员 的每单位小时执勤成本给定（可以设想为小时工资）。本子问题除了需要满足子问题1的所有目标外，还需满足如下目标（依编号次序）\n②.  机组人员的总体执勤成本最低；\n⑤.  机组人员之间的执勤时长尽可能平衡。\n同时在满足子问题1约束的基础上进一步要求：\n1. 每个机组人员每天至多只能执行一个执勤；\n2. 每次执勤的飞行时间最多不超过MaxBlk分钟；\n3. 每次执勤的时长最多不超过 MaxDP分钟； \n4. 每个机组人员下一执勤的起始机场必须和上一执勤的结束机场一致；\n5. 每个机组人员的相邻两个执勤之间的休息时间不小于 MinRest分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题3：编制排班计划。假定每个机组人员 的每单位小时任务环成本给定（注：不包括执勤成本，可以设想为出差补贴）。本子问题除了需要满足子问题1和2的所有目标外，还需满足如下目标（依编号次序）\n③.  机组人员的总体任务环成本最低；\n⑥.  机组人员之间的任务环时长尽可能平衡。\n同时在满足子问题1和2的约束的基础上进一步要求：\n1. 每个机组人员每个排班周期的任务环总时长不超过 MaxTAFB 分钟；\n2. 每个机组人员相邻两个任务环之间至少有MinVacDay天休息。\n3. 每个机组人员连续执勤天数不超过MaxSuccOn天\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n四、输入数据说明\n本题有两套检测数据，要求参赛者先优先运行 A 套数据，然后再 B 套数据。如下表所示：\n\n数据表：\n| 数据 | 基地数 | 计划周期开始 | 计划周期结束 | 航班数 | 机组人数 | 机场数 |\n|------|--------|--------------|--------------|--------|----------|--------|\n| A 套 | 1 | 2021-08-11 | 2021-08-25 | 206 | 21 | 7 |\n| B 套 | 2 | 2021-08-01 | 2021-08-31 | 13954 | 465 | 39 |\n\n注：部分航班到达时间可能会在计划周期结束后的第一天。\n\n每套输入数据由三部分组成，除输入参数在这里给出外，航班计划和机组人员数据需要另外下载，这里仅给出格式描述。\n1. 输入参数：\n航段之间最小连接时间 MinCT = 40分钟\n一次执勤飞行时长最多不超过 MaxBlk = 600分钟\n执勤时长最多不超过 MaxDP = 720分钟\n相邻执勤之间的休息时间不少于 MinRest = 660分钟\n每趟航班最多乘机人数 MaxDH = 5\n排班周期单个机组人员任务环总时长不超过 MaxTAFB = 14400分钟\n连续执勤天数不超过MaxSuccOn = 4天\n相邻两个任务环之间至少有MinVacDay =2天休息\n\n2. 航班计划数据格式\n| 航班号 | 出发日期 | 出发时间 | 出发机场 | 到达日期 | 到达时间 | 到达机场 | 最低资格配置 |\n|--------|----------|----------|----------|----------|----------|----------|--------------|\n| FA865  | 8/14/2021 | 20:00 | PXB | 8/14/2021 | 21:45 | NKX | C1F1 |\n| FB1100 | 8/18/2019 | 23:10 | TUK | 8/19/2019 | 1:00 | TGD | C1F1 |\n\n3. 机组人员信息数据格式：\n| 员工号 | 正机长 | 副机长 | 允许乘机 | 基地 | 每单位小时执勤成本 | 每单位小时任务环成本 |\n|--------|--------|--------|----------|------|------------------|------------------|\n| A00052 | Y | N | Y | NKX | 640 | 20 |\n| B02002 | N | Y | N | TGD | 680 | 20 |\n| B00500 | N | Y | N | HOM | 600 | 20 |\n\n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\na. 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（’），上横（$\\bar$ ）等辅助记号；\nb. 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\na. 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\nb. 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\nc. 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行实验\na. 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\nb. 程序必须模块化，结构要面向目标，注释清晰；\nc. 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据，同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n| 结果指标 | 子问题1 | 子问题2 | 子问题3 |\n|----------|---------|---------|---------|\n| 不满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 机组人员总体乘机次数 | 要求 | 要求 | 要求 |\n| 替补资格使用次数 | 要求 | 要求 | 要求 |\n| 机组总体利用率 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤飞行时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤执勤时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大机组人员执勤天数 | 要求 | 要求 | 要求 |\n| 一/二/三/四天任务环数量分布 | 要求 | 要求 | 要求 |\n| 总体执勤成本（万元） | 要求 | 要求 | 要求 |\n| 总体任务环成本（万元） | 要求 | 要求 | 要求 |\n| 程序运行分钟数 | 要求 | 要求 | 要求 |\n【注1】：除“不满足机组配置航班数”外，其它所有结果统计指标都是针对满足了机组配置的航班。\n【注2】：除“程序运行分钟数”外，其它所有时长单位都是小时，比如4.25.\n【注3】：机组总体利用率 = 最低配置总体飞行时长 / 总体执勤时长，其中，\n最低配置总体飞行时长 = 总体执勤时长 - 总体连接时长 - 总体乘机时长\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\na. 按拟起飞日期和时间，出发和到达机场的次序，罗列没有机组配置的航班号和其最低配置需求。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “UncoveredFlights.csv” 提交。\nb. 按机组人员，按日期，按航段次序，罗列该机组人员的航班分配，需注明航班号，起飞日期时间/机场和到达日期时间/机场，任务性质（机长，副机长，替补，乘机）等。如休假日也需注明。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “CrewRosters.csv” 提交。\nAddendum: \n参考文献\nXiaodong Luo, Yogesh Dashora, Tina Shaw (2015) Airline Crew Augmentation: Decades of Improvements from Sabre. Interfaces 45(5): 409-424.\nSaeed Saemi, Alireza Rashidi Komijan, Reza Tavakkoli-Moghaddam and Mohammad Fallah, A new mathematical model to cover crew pairing and rostering problems simultaneously, Journal of Engg. Research Vol. 9 No. (2) June 2021 pp. 218-233\nMohamed Haouari, Farah Zeghal Mansour, Hanif D. Sherali (2019) A New Compact Frmulation Fr the Daily Crew Pairing Problem. Transportation Science 53(3): 811-828\nDataset Path:\n['机组排班Data_A-Crew.csv', '机组排班Data_A-Flight.csv', '机组排班Data_B-Crew.csv', '机组排班Data_B-Flight.csv']\n\nData Description:\n该数据集由四个 CSV 文件组成，分为 A 组和 B 组，每组包含机组人员基本信息表和航班飞行记录表，用于机组排班与成本分析。机组信息表以员工编号（EmpNo）为唯一标识，记录机长/副驾驶资格标识（以“Y”或空值表示）、是否可执行空勤/Deadhead 任务、所属基地机场（以 IATA 代码表示）以及每小时的执勤/配对成本（以人民币元为单位），A 组与 B 组字段命名上有细微差别但含义一致。航班表记录具体航班的起降信息（航班号、起飞/到达日期与时间、起飞机场与到达机场）以及机组配置说明（Comp，示例格式如 C1F1 表示 1 名机长和 1 名副驾驶），A 组航班覆盖 2021-08-11 至 2021-08-25 的飞行数据，B 组为 2019 年 8 月的航班数据。整体数据便于基于基地位置、人员资质与能否执行 Deadhead 的约束进行排班建模，并可用每小时成本字段进行成本估算与配对优化分析，时间字段用于计算航班时间窗与转场/休息要求。数据字段以标识性与数值成本为主，适合用于排班规则校验、可行性检查和优化模型的输入。"
  },
  "problem_background": "众所周知，一趟民航航班必须在满足特定的条件下才能起飞，这些条件包括国家法律法规，国际公约，政府的行政条例，和公司自身的政策利益，一些国家的工会组织还会对机组人员的福利偏好有规章约束。所有这些条件都是对保证飞航安全和旅客服务质量最重要的因素之一。\n\n广义的机组人员包括飞行员（Pilot，或Flight Deck），乘务员（Cabin Crew）和空警（Air Marshal）。所谓机组排班问题，就是构造特定时间段的机组日程安排，包括每个机组人员在何时何地及哪个航班执行何种任务。一家100架飞机的航空公司，机组人员可以达到5000-7000之多。一个高质量的机组航班任务计划，不仅能给航空公司的运营节约成本，还能合理地考虑劳逸平衡（Work-life Balance），机组偏好（Crew Preference），组员同行（Teaming），培训（Training），时近性（Recency）和休假（Vacation Leave）等等。因为这三类机组人员不能互相通用，所以机组排班问题一般都是对他们分别求解。另外，不同机型之间的飞行员一般也不能通用，所以飞行员排班问题通常也是对不同机型分别求解。\n\n图1. 机组排班问题示意图：飞行员甲和飞行员乙有各自的飞行路径，他们在执行航班BBB->CCC任务时相遇\n\n机组排班问题是运筹学应用的最早典范之一，经过过去~60年的发展，虽然在计算速度和应用复杂度方面还不尽满意，但已经形成了比较成熟甚至通用的解决方案，该解决方案把机组排班问题分解成两个子问题求解：以满足规范和节约成本为主要目的任务环生成，和以满足公平合理为主要目的任务环分配，它们相对应的优化问题叫Pairing Optimization (PO) 和 Roster Optimization (RO)。该两问题的解决，都是通过建立网络流模型（Network Flow）然后列生成法（Column Generation）求解。列生成法易于处理各种复杂的约束条件，优化模型比较简单，在计算性能上有很大的优势，对解决分配问题非常有效，虽然算法效果的好坏也取决于子问题及算法部件的局部处理方法。\n\n但另一方面，两阶段子问题求解法也有其明显的缺陷。比如实际排班过程中需要具备人工预排班功能，一个机组人员可能会乘坐指定航班到某地但回程却由系统安排。两阶段解法不能很好地处理这样的不完整任务环问题。而且理论上，两阶段解法缩小了优化空间，所谓的最优解其实是次优解。同时，对列生成法而言，各种规章约束参数主要是在列生成过程中考虑，优化模型本身缺乏这些约束参数的显性表达，通常的参数敏感性分析手段不能采用，因而难以对业务规则的制订起到指导作用。\n\n本题的宗旨是建立线性优化模型，明确表达飞行时间、执勤时间、休息时间等约束，把航班直接分配给机组人员。\n\n需要指出的是，实际应用的机组排班问题考虑因素非常繁杂。本题通过抽象合并，剔除非核心的琐碎概念和约束，但保留问题的核心复杂度。同时，学术界关于机组排班问题的各种文献只能作为对业界背景知识的了解。如果参赛者坚持参照文献中的模型及算法，敬请详列步骤。\n\n注：Sabre 公司是全球第一次采用计算机算法求解大型机组排班问题并在 American Airline 得以使用，也是全球第一家在任务环求解方案中对远程航段（Long Haul）引入机组增强（Augmentation）和降阶（Down Ranking）功能，并在 Singapore Airline 得到有效使用。中国国际航空公司（Air China）至今也一直在使用着 Sabre 的机组排班和管理系统 Aircrews。",
  "problem_requirement": "航空公司的运营管理非常复杂，很多过程需要经过长期-中期-短期等多层次的往复循环。机组排班问题假设航班规划阶段已经完成，机型分配已经结束，对机组人员数量及资格的需求已经明确，而且可用机组人员也已经确定。机组优化排班问题的描述通过以下概念的介绍展开。\n\n时间：航空公司的运营是跨时空的。本题时间的表达由年月日时分组成，秒以下的精度不计。所有时间均按单一指定时区定义（比如北京时区），相邻两天的时间分割点是给定时区的半夜零点。\n\n机场：航班的起飞和到达，及机组人员的出发和到达，都是以机场为节点。机场的标识一般按照国际民航组织 IATA 标准。比如北京首都机场 PEK，上海浦东国际机场 PVG。\n\n机组人员（Crew）：本题的描述只针对飞行员，但对乘务员和乘警完全适用。现代民航飞机的驾驶通常需要两种资格的飞行员：正机长（也叫机长或正驾驶，Captain）和副机长（也叫副驾驶，First Officer）。\n\n1. 每个机组人员都有一个固定的基地，用所在地机场表达。\n2. 每个机组人员都具有一个且仅有一个主要资格，但也可以具备其它的替补资格。机组排班优先安排主要资格，但当主要资格不足时，可以安排替补资格。本题假定具备正机长资格的飞行员其主要资格是正机长，否则其主要资格是副机长。部分正机长可以替补副机长执行飞行任务。机组人员按主要资格或替补资格执行的任务都叫飞行任务。 \n3. 机组人员除了执行飞行任务外，还可以执行乘机（Deadhead）任务。乘机任务是指机组人员乘坐正常航班从一机场摆渡到另一机场去执行飞行任务。注：乘机人数一般会有限制。\n\n航班（Flight）：指飞机的一次起飞和降落。本题假定每个航班都是唯一的，虽然实际情况下的航班号可能按天或星期重复。注：当航班应用于机组人员排班时也叫航段（英文Leg或Sector）。\n1. 每个航班都有给定的起飞日期、时间，和到达日期、时间。\n2. 每个航班都有给定的起飞和到达机场。\n3. 每个航班都有给定的最低机组资格配置（Composition），用格式C<数> F<数> 描述，其中C<数>为正机长数，F<数>为副机长数。一个航班只有满足了最低机组资格配置才能起飞。注：本题假定只有一种机型一种配置，实际情况可以有所不同。\n图2. 航段及机组分配流动示例图\n比如，航班FA121机组配置C1F2，到达机场BBB后，其中C1F1转服务FA231，剩余C0F1转服务FA232。航班FA122机组配置C1F1，另有C1F2乘机去机场BBB。\n\n\n执勤（Duty）：一次执勤由一连串航段（飞行或乘机）和间隔连接时间组成，相当于一次上班。同一次执勤的航段之间满足如下关系：\n1. 上一趟航段的到达和下一趟航段的出发机场一致。\n2. 上一趟航段的到达和下一趟航段的出发之间的间隔时间必须满足最短连接时间约束。\n3. 同一次执勤里的每个航段必须在同一天起飞，但到达时间不受此限制。按起飞时间，我们说这次执勤属于那一天。\n航段之间的连接时间计入执勤时间，但不计入飞行时间。执勤起始时间从当天所执行的第一趟航班的起飞时间算起，结束时间按最后一趟航班的到达时间计算。因此，执勤结束时间可以不和该执勤开始时间在同一天。\n\n任务环（Pairing）：任务环由一连串的执勤和休息时间组成，从自己的基地出发并最终回到自己的基地，相当于一次出差。属于同一任务环的执勤之间满足如下关系：\n1. 上一次执勤的结束机场必须和下一次执勤的起始机场相一致； \n2. 两个相邻执勤之间的休息时间必须满足最少休息时间限制，但没有上限；\n3. 每个任务环里的第一次执勤必须从基地出发，最后一次执勤必须回到基地。\n\n\n排班计划（Roster）及排班周期：每个机组人员在每个排班周期都有一个排班计划，这个计划由一系列的任务环和休假组成，任务环之间满足一定的休假天数。一个排班周期通常是两个星期（双周计划）或者一个月（月计划）。机组人员的排班计划按排班周期编排，每个周期开始前几天完成编排并向机组人员发布。\n\n排班周期之间有严格的时间分割，机组人员在给定排班周期内的最后一个任务环可能跨越这个时间分割点而进入下一个排班周期。为减少模型复杂度，本赛题假定所有机组人员的初始位置和排班周期结束时的终了位置都是在其基地，并把排班周期进行了适当的延展。\n\n\n三、赛题\n本赛题由三个子问题组成，每个子问题都基于前一个子问题并与之相容。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。凡是本赛题没有提及，均不在考虑之列。本题假定：\n1. 机组人员之间可以任意组合；\n2. 允许存在因为无法满足最低机组资格配置而不能起飞的航班；\n3. 不满足最低机组资格配置的航班不能配置任何机组人员；\n4. 机组人员可以乘机摆渡，即实际机组配置可以超过最低配置要求，乘机机组人员的航段时间计入执勤时间，但不计入飞行时间。\n\n子问题1：基本题。要求建立线性规划模型给航班分配机组人员（或者说给机组人员分配航班），依编号次序满足目标\n①.  尽可能多的航班满足机组配置;\n④.  尽可能少的总体乘机次数；\n⑦.  尽可能少使用替补资格。\n约束：\n1. 每个机组人员初始从基地出发并最终回到基地；\n2. 每个机组人员的下一航段的起飞机场必须和上一航段的到达机场一致；\n3. 每个机组人员相邻两个航段之间的连接时间不小于 MinCT分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题2：引进执勤概念。假定每个机组人员 的每单位小时执勤成本给定（可以设想为小时工资）。本子问题除了需要满足子问题1的所有目标外，还需满足如下目标（依编号次序）\n②.  机组人员的总体执勤成本最低；\n⑤.  机组人员之间的执勤时长尽可能平衡。\n同时在满足子问题1约束的基础上进一步要求：\n1. 每个机组人员每天至多只能执行一个执勤；\n2. 每次执勤的飞行时间最多不超过MaxBlk分钟；\n3. 每次执勤的时长最多不超过 MaxDP分钟； \n4. 每个机组人员下一执勤的起始机场必须和上一执勤的结束机场一致；\n5. 每个机组人员的相邻两个执勤之间的休息时间不小于 MinRest分钟。\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n子问题3：编制排班计划。假定每个机组人员 的每单位小时任务环成本给定（注：不包括执勤成本，可以设想为出差补贴）。本子问题除了需要满足子问题1和2的所有目标外，还需满足如下目标（依编号次序）\n③.  机组人员的总体任务环成本最低；\n⑥.  机组人员之间的任务环时长尽可能平衡。\n同时在满足子问题1和2的约束的基础上进一步要求：\n1. 每个机组人员每个排班周期的任务环总时长不超过 MaxTAFB 分钟；\n2. 每个机组人员相邻两个任务环之间至少有MinVacDay天休息。\n3. 每个机组人员连续执勤天数不超过MaxSuccOn天\n本子题要求编程，并按所给数据运行，输出结果要求见第五部分。\n\n四、输入数据说明\n本题有两套检测数据，要求参赛者先优先运行 A 套数据，然后再 B 套数据。如下表所示：\n\n数据表：\n| 数据 | 基地数 | 计划周期开始 | 计划周期结束 | 航班数 | 机组人数 | 机场数 |\n|------|--------|--------------|--------------|--------|----------|--------|\n| A 套 | 1 | 2021-08-11 | 2021-08-25 | 206 | 21 | 7 |\n| B 套 | 2 | 2021-08-01 | 2021-08-31 | 13954 | 465 | 39 |\n\n注：部分航班到达时间可能会在计划周期结束后的第一天。\n\n每套输入数据由三部分组成，除输入参数在这里给出外，航班计划和机组人员数据需要另外下载，这里仅给出格式描述。\n1. 输入参数：\n航段之间最小连接时间 MinCT = 40分钟\n一次执勤飞行时长最多不超过 MaxBlk = 600分钟\n执勤时长最多不超过 MaxDP = 720分钟\n相邻执勤之间的休息时间不少于 MinRest = 660分钟\n每趟航班最多乘机人数 MaxDH = 5\n排班周期单个机组人员任务环总时长不超过 MaxTAFB = 14400分钟\n连续执勤天数不超过MaxSuccOn = 4天\n相邻两个任务环之间至少有MinVacDay =2天休息\n\n2. 航班计划数据格式\n| 航班号 | 出发日期 | 出发时间 | 出发机场 | 到达日期 | 到达时间 | 到达机场 | 最低资格配置 |\n|--------|----------|----------|----------|----------|----------|----------|--------------|\n| FA865  | 8/14/2021 | 20:00 | PXB | 8/14/2021 | 21:45 | NKX | C1F1 |\n| FB1100 | 8/18/2019 | 23:10 | TUK | 8/19/2019 | 1:00 | TGD | C1F1 |\n\n3. 机组人员信息数据格式：\n| 员工号 | 正机长 | 副机长 | 允许乘机 | 基地 | 每单位小时执勤成本 | 每单位小时任务环成本 |\n|--------|--------|--------|----------|------|------------------|------------------|\n| A00052 | Y | N | Y | NKX | 640 | 20 |\n| B02002 | N | Y | N | TGD | 680 | 20 |\n| B00500 | N | Y | N | HOM | 600 | 20 |\n\n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\na. 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（’），上横（$\\bar$ ）等辅助记号；\nb. 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\na. 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\nb. 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\nc. 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行实验\na. 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\nb. 程序必须模块化，结构要面向目标，注释清晰；\nc. 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据，同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n| 结果指标 | 子问题1 | 子问题2 | 子问题3 |\n|----------|---------|---------|---------|\n| 不满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 满足机组配置航班数 | 要求 | 要求 | 要求 |\n| 机组人员总体乘机次数 | 要求 | 要求 | 要求 |\n| 替补资格使用次数 | 要求 | 要求 | 要求 |\n| 机组总体利用率 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤飞行时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大一次执勤执勤时长 | 要求 | 要求 | 要求 |\n| 最小/平均/最大机组人员执勤天数 | 要求 | 要求 | 要求 |\n| 一/二/三/四天任务环数量分布 | 要求 | 要求 | 要求 |\n| 总体执勤成本（万元） | 要求 | 要求 | 要求 |\n| 总体任务环成本（万元） | 要求 | 要求 | 要求 |\n| 程序运行分钟数 | 要求 | 要求 | 要求 |\n【注1】：除“不满足机组配置航班数”外，其它所有结果统计指标都是针对满足了机组配置的航班。\n【注2】：除“程序运行分钟数”外，其它所有时长单位都是小时，比如4.25.\n【注3】：机组总体利用率 = 最低配置总体飞行时长 / 总体执勤时长，其中，\n最低配置总体飞行时长 = 总体执勤时长 - 总体连接时长 - 总体乘机时长\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\na. 按拟起飞日期和时间，出发和到达机场的次序，罗列没有机组配置的航班号和其最低配置需求。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “UncoveredFlights.csv” 提交。\nb. 按机组人员，按日期，按航段次序，罗列该机组人员的航班分配，需注明航班号，起飞日期时间/机场和到达日期时间/机场，任务性质（机长，副机长，替补，乘机）等。如休假日也需注明。此结果需从Excel 表格按CSV 格式导出，数据项名称简单易懂，用文件名 “CrewRosters.csv” 提交。",
  "problem_analysis": "这个机组排班问题从宏观上属于典型的资源分配与时空调度问题，具有强烈的组合优化与多目标特性。其根本目标可以分为两类互补但常常冲突的任务：一是运营指标上的可行性与效率——尽可能多的航班得到满足、尽量降低总体执勤与任务环成本并减少乘机与替补使用；二是组织层面的公平性与可持续性——保持机组工作量与任务环时长的平衡、满足连续执勤与休息等法定或公司规则以保证长期可用性。正是这两类目标共同塑造了模型设计与求解路径：必须既表达“全局可行性”（航班被覆盖、各航段的资格和最小配置满足、时空连贯性与最短连接时间等硬约束），又表达“运营代价与公平性的度量”（执勤小时成本、任务环成本、乘机次数、替补使用次数以及不同维度的分配平衡）。目标的层次性（问题文本给出的编号优先级）直接决定了解法应采用的序贯或分层优化策略，例如先最大化覆盖（硬性优先），再在覆盖最优的解集中最小化成本与平衡指标；也可以用权重差异极大的单目标化处理，但这样会掩盖原始优先级的法律/运营意义，因此在实际建模时常采用分阶段优化或 lexicographic 最优化以忠实反映经营偏好。\n\n问题描述中有大量显性的约束（基地起止、航段连接、最短连接时间、每天至多一个执勤、执勤飞行时长与执勤时长上限、相邻执勤最小休息、乘机人数上限、任务环最大时长与最小假期天数、连续执勤天数上限等），这些约束共同决定了可行解空间的形状，通常使问题成为高度约束的整数规划问题；隐含或被简化的假设也同样重要：单一时区假设避免了时差复杂性、单一机型或单一配置假定简化了资格与机型兼容问题、把乘务员与空警省略将问题聚焦于驾驶员，使得模型可以以“职位”（机长/副驾驶）与可替补资格为主要二元性来刻画人员资格，但这也放弃了现实中诸多影响排班的复杂交互（比如多机型交叉资格、培训/检查日、班内非飞行任务、临时请假与替代机制以及航班延误/取消的随机性）。此外，文本允许航班被“未覆盖”，这在数学上降低了可行性风险（避免必须找到不可行的完全覆盖解），但在商业上意味着需要对“未覆盖航班”的处罚或后果进行外部处理；同样，允许替补资格使用与乘机摆渡引入了额外自由度，但若过度依赖则会牺牲成本或影响乘客/机组体验。总之，显性和隐性假设均影响模型的解释性与适用性：在严格合规或面对随机扰动的现实环境中，忽略这些因素会降低模型的稳健性与可实施性。\n\n组成要素之间存在复杂的相互依赖与潜在张力。航班集合与机组池通过资格匹配和时空可达性耦合：某一航段能否被某人承担不仅取决于其资格标签，还取决于该机组此前、随后安排的连接性与休息限制，因此单次分配决策具有连锁效应——为覆盖一个航班而安排的执勤可能导致随后几日的可用性下降或触发休假/连续执勤限制。乘机（Deadhead）既是连接工具、又是成本项；限制乘机次数会提高未覆盖航班数或增加替补使用；最短连接时间与最大执勤时长的并存可能导致个别航段几乎无法在同一日内被同一人串接，进而增加配对复杂度。再者，资格的主/替补规则引发权限性张力：优先用主资格可保障岗位稳定性，但在主资格匮乏时启用替补会改善覆盖率却可能增加不平衡与成本；平衡性目标（最小化各人执勤小时差异或任务环时长差异）往往与总成本或覆盖最大化相冲突。法律/公司规则（如最小休息、最长连续执勤日）与商业目标（覆盖与成本）之间的张力要求在模型中明确权重或以约束形式强制实现，这又影响可行性与成本结构。\n\n模型尺度与时间尺度的动态性也不可忽视。短期（单周期）安排关注航班覆盖、当期成本与公平性；中长期则涉及累计飞行时数、训练合规、疲劳管理、资格维护与人员流动等问题，这些会反过来限制短期可行解的合理性。若将问题视为静态并一次性求解，模型可能产生“短视”排班——短期成本低但长期风险高（例如累积超额执勤导致合规风险或长期不公平造成士气/离职）。现实中的扰动（航班延误、临时缺员、天气等）会使确定性解迅速过时，因此建议在应用中采用滚动重优化或鲁棒/随机扩展：在规划层面保留冗余（例如设置储备机组或允许少量未覆盖但可通过临时措施弥补），或者在模型中引入情景分支与期望代价评估，以提高方案面对扰动时的稳定性与可恢复性。\n\n关于数学表述与求解路径的选择，问题陈述既希望“明确表达飞行时间、执勤时间、休息时间等约束，把航班直接分配给机组人员”，又保留了传统上将问题分解成Pairing与Roster两个阶段的灵活性。这带来两种典型建模范式的对立：一是“直接赋值”整数线性模型（为每个机组-航段组合建立二进制变量并加入顺序连贯约束），这种模型对规则的显性表达最好、便于敏感性分析与规则制定的解释，但变量与约束数量随机组人数与航班量呈指数增长，尤其对 B 组（近万航班、几百机组）将导致难以直接求解的巨大 MIP；二是“列生成/列举任务环（pairings）+集分配”范式（典型的集分配/集覆盖模型），通过先生成可行的任务环或配对，再通过主问题选取组合覆盖航班，适合规模化求解与灵活嵌入复杂法规，但生成子问题（pricing problem）往往是带资源约束的最短路/路径枚举问题，需要动态规划或回溯剪枝且可能要进入分支定价（branch-and-price）以保证整数最优。对于本赛题文本给出的分阶段目标与现实规模，实用策略常常是混合式：对规模较小的数据（A 套）可直接用精确 MIP，验证模型与指标；对大规模（B 套）采用分解（生成可行执勤或任务环集合、用启发法或限制深度生成代表性列），并辅以大规模整数求解器或二次启发式方法（局部搜索、遗传、LNS、贪婪修复、固定并优化等）。另外，依据优先级顺序采用序贯优化（先最大覆盖，再在覆盖最优的解空间中最小化乘机与替补、再优化成本和平衡性）比简单的加权目标更能体现业务需求，但代价是需要多次求解。\n\n不确定性与风险管理方面应有清晰思路。真实系统中的随机事件（延误、临时病假、航班取消）会侵蚀静态最优解的可行性；因此模型设计阶段需要考虑冗余与弹性：例如引入“储备”机组与替补预算、对关键约束施加松弛成本（如允许以高惩罚值短缺覆盖某些航班以模拟应急租用或外包），或采用两阶段随机规划来预先安排备用方案。鲁棒优化（对关键参数如飞行时、连接时间做不确定区间化）可提升计划在最坏情况下的可靠性。运营实施上建议采用滚动时域（rolling horizon）结合实时数据重算，以保证计划的可执行性与适应性。\n\n模型选择还需兼顾可解释性与可实施性。直接分配的线性/整数模型优势在于规则一目了然，便于政策制定者通过灵敏度分析调整规则（例如改变 MinCT、MinRest 或 MaxBlk 后即时看到对覆盖与成本的影响）；而列生成与分解模型在可扩展性和求解速度上更具优势，但其列生成过程与子问题的启发式处理可能削弱最终方案的透明性——这对需要向工会或监管机构解释安排依据时会构成问题。因此，建模时应兼顾接口设计：保留足够的会话用于将复杂约束映射回直观的时间线（例如最终 CSV 结果需要按员工作业日程导出），并在报告中以可读的指标（覆盖率、乘机次数、替补使用次数、平均/方差等）呈现分配特征以便审核。\n\n在多方案与替代性表述方面，问题可从多维角度重构以导出不同求解策略。若运营首要目标是覆盖率，则可把问题建成以覆盖为硬约束、以成本与公平为次优目标的模型；若成本控制与公平并重，则可把覆盖最低阈值设为约束后最小化成本与方差；若面向鲁棒性，可把不确定性纳入目标（例如最小化预期未覆盖或最大化在一组扰动情形下的最差覆盖）。此外，平衡性目标可以用多种数学表达：最小方差、最小最大差（min-max）、或采用顺序最小化（先控制最大值再最小化平均值），不同选择将导出不同的操作性策略并影响可行性边界。对替补资格使用的控制既可以作为代价项也可以作为可行性约束（例如设置替补最多次数），这两种方式在权衡自由度与规则合规性上各有利弊。\n\n综上，本题的建模与求解应以问题的层次优先级作为设计主线，采用透明且可解释的数学变量与参数定义以便对法规与运营规则进行敏感性分析；在求解策略上，优先在小规模数据上采用精确模型进行验证与诊断，在大规模情形下采用列生成、分解与启发式混合策略以保证可计算性并保留解释性接口；在实现上须留出对不确定事件的冗余或后备策略，并采用滚动重优化以维持方案的实际可执行性。建模过程应保持迭代与反思：初期用简单模型确认问题结构与关键约束，随后逐步引入更多现实约束或随机性并检验方案对关键参数的敏感性，以确保最终模型既具学术严谨性，又具工程可实施性与运营可解释性。",
  "modeling_solution": "总体方案概述与建模思路说明：为忠实反映赛题给定的业务优先级与约束，同时兼顾可计算性与可扩展性，我提出一个层次化、可分解的整数线性规划（ILP）框架，辅以列生成/分支定价与启发式大规模局部搜索（Large Neighborhood Search, LNS）作为求解引擎。在建模上保留“直接分配航段给机组人员”的显式变量以便解释与输出，但在大规模实例上采用“生成可行任务环（pairing）/执勤列并在主问题中选择”的分解以实现规模化求解。模型以逐层的序贯（lexicographic）优化来严格满足题目列出的目标优先级：首先最大化被覆盖航班数，其次在覆盖最大前提下最小化总体执勤成本与任务环成本并在此基础上最小化乘机次数与替补使用并衡平个人负荷。\n\n基本符号与集合、参数定义：设 F 为航班（航段）集合，索引用 f,g；每个航班 f 有起飞时间 dep_f、到达时间 arr_f、起飞机场 o_f、到达机场 d_f、起飞日期 day_f（以排班周期内日计）、以及最低人员构成要求 Comp_f = (Creq_f, Freq_f)（Creq_f 为机长数量、Freq_f 为副驾驶数量）。设 C 为机组人员集合，索引用 c。每位机组 c 具有基地 base_c、主资格 roleMain_c ∈ {Cpt, FO}、可否乘机 canDH_c ∈ {0,1}、每小时执勤成本 wDuty_c（元/小时）、每小时任务环成本 wPair_c（元/小时）。常数参数包括 MinCT, MaxBlk, MaxDP, MinRest, MaxDH, MaxTAFB, MaxSuccOn, MinVacDay（均已在题目中给出）。为计算时长引入函数 FlightTime(f) = arr_f - dep_f（分钟）， ConnectionTime(f,g) = dep_g - arr_f（分钟，可能跨日但按时区计算）。\n\n决策变量（核心变量组并其语义）：为表达“直接分配”与可解释输出，引入二元变量 y_{c,f}^{op,r} ∈ {0,1} 表示机组 c 在航班 f 执行实际飞行任务且担任角色 r ∈ {Cpt, FO, Backup}。变量 dh_{c,f} ∈ {0,1} 表示机组 c 作为乘客（Deadhead）乘坐航班 f。为刻画序列和同一执勤内航段的衔接，引入连边变量 s_{c,f,g} ∈ {0,1} 表示机组 c 在同一次执勤中执行航段 f 后立即执行航段 g（即两段在同一天起飞且 o_g = d_f 且 ConnectionTime(f,g) ≥ MinCT）。为标识一次执勤的起止以及任务环（pairing）之间的休息，引入 b_{c,f}^{start} ∈ {0,1} 表示航段 f 是机组 c 在某个执勤的第一段（按起飞日），同理 e_{c,f}^{end} ∈ {0,1} 表示航段 f 是某个执勤的最后一段。为实现任务环层面的约束/成本引入 p_{c,k} ∈ {0,1} 表示为机组 c 选择第 k 个任务环（pairing）；这里k为潜在/生成出的任务环索引（列生成中动态生成）。在直接分配完整 ILP 实现中，p 变量可以用以把同一人在周期中串连的若干执勤区分为同一任务环（以基地为始终点、并满足休息约束）。此外引入辅助连续变量 DutyTime_{c,u} 表示机组 c 的第 u 次执勤时长（分钟）， FlightOnDutyTime_{c,u} 表示其中的飞行（block）时间， PairTime_{c,k} 表示任务环 k 的总时长，用以计算任务环成本与 MaxTAFB 约束。为衡平性目标引入可线性化的“偏差”变量 devDuty_c ≥ 0 表示机组 c 的总执勤时长与平均执勤时长之间的绝对偏差（用于最小化方差替代）。\n\n基本约束（以确保业务可行性）：对每一航班 f 其被分配为“实际驾驶”的机长数量应满足（对全部机组求和） Σ_{c} y_{c,f}^{op,Cpt} ≥ Creq_f * z_f，类似地 Σ_{c} y_{c,f}^{op,FO} ≥ Freq_f * z_f，其中 z_f ∈ {0,1} 为航班 f 被覆盖的指示变量。题目允许航班不被覆盖，因此 z_f 可取 0或1。若航班不满足最低资格则不允许任何人分配： Σ_{c} (y_{c,f}^{op,Cpt} + y_{c,f}^{op,FO} + y_{c,f}^{op,Backup}) ≤ M * z_f，其中 M 是大常数或直接仅允许上述角色在 z_f=1 时存在。替补资格限制通过 y_{c,f}^{op,Backup} 与角色资格参数 qual_{c,r} 控制： y_{c,f}^{op,Cpt} ≤ qual_{c,Cpt}（qual 为1当c具备该资格，否则0）；同时允许主资格优先分配通过目标惩罚替补使用的成本项或通过硬限制限制替补最大次数。乘机变量 dh_{c,f} 仅在 canDH_c =1 时允许，并且对每个航班 f 有 Σ_{c} dh_{c,f} ≤ MaxDH。\n\n流与时间连贯性约束将确保每位机组的日内序列合理。对每位机组 c 和每个航班 f：如果 c 执行 f（无论是操纵还是乘机），则在其个人时间线中 f 必有一个前继（除非 f 是其在某次执勤/任务环的第一段）和后继（除非是最后一段）。这可用经典的网络流守恒表达： 对任意 c, 对任意 f， let In_{c,f} = Σ_{g} s_{c,g,f} + b_{c,f}^{start} * indicator( f 是首段 )； Out_{c,f} = Σ_{g} s_{c,f,g} + e_{c,f}^{end} * indicator( f 是末段 )。并要求 In_{c,f} = y_{c,f}^{op,*} + dh_{c,f} = Out_{c,f}（合并驾驶与乘机为被动节点的入口/出口次序保持平衡）；此外 s_{c,f,g} 可被允许只有当 o_g = d_f 且 ConnectionTime(f,g) ≥ MinCT 且 day_g = day_f（同一天起飞规则）且同一人对两个航段都被分配（y 或 dh 为1）时才可为1。上述可用线性化的可行性掩码（参数 feasConn_{f,g}=1 时允许连接）表述为 s_{c,f,g} ≤ feasConn_{f,g}，并 s_{c,f,g} ≤ y_{c,f}^{assigned}， s_{c,f,g} ≤ y_{c,g}^{assigned}。\n\n执勤时间与任务环时间限制以分钟计入：若一名机组在同一次执勤内串联航段集合 S, 则该执勤时长 DutyTime = arr_{last(S)} - dep_{first(S)}（含连接时间），飞行时长 FlightOnDutyTime = Σ_{f∈S} FlightTime(f)。约束要求 FlightOnDutyTime ≤ MaxBlk 和 DutyTime ≤ MaxDP。在线性化层面，DutyTime_{c,u} 与具体选中的航段通过 big-M 线性化或在列生成的pairing生成阶段直接保证。任务环（pairing）定义为若干次执勤之间以休息相连，并且任务环起点与终点均为基地。在直接 ILP 版本中，通过约束每次任务环第一段的出发地为基地并最后一段的到达地为基地来确保。相邻两次执勤的休息时间 Rest = dep_{next_first} - arr_{prev_last} 必须 ≥ MinRest，连续执勤天数计数通过对连续天数的二进制辅助变量实现，限制 ≤ MaxSuccOn。任务环总时长 PairTime_{c,k} = Σ DutyTime_{c,u} + Σ RestTime_between_duties（休息时间计入任务环时长的定义按题目需要，可根据题目注释设定任务环时长包括休息或不包括休息；此处按照通常定义任务环时长包括全部跨程时间，包括休息）并要求 PairTime_{c,k} ≤ MaxTAFB。如采用列生成，生成的列（pairings）本身即满足这些资源约束，因此主问题仅需选择列。\n\n目标函数与多目标处理（按题目优先级的实现细节）：题目给定多级目标顺序：① 尽可能多航班被满足（maximize Σ_f z_f）；② 在满足①的前提下机组总体执勤成本最低（min Σ_c wDuty_c * (总执勤小时数 of c)）；③ 在满足①/②的前提下任务环成本最低（min Σ_c wPair_c * (总任务环小时数 of c)）；④ 尽可能少的总体乘机次数（min Σ_{c,f} dh_{c,f}）；⑤ 在满足①的前提下机组间执勤时长尽可能平衡；⑥ 在满足①/②/③的前提下任务环时长尽可能平衡；⑦ 尽可能少使用替补资格（min Σ y_{c,f}^{op,Backup}）。为精确实现序贯优先级，推荐采用严格的分步求解：第一步求解 ILP1：最大化 Σ_f z_f，得到最优值 Z*。第二步将航班覆盖作为固定或作为约束（Σ_f z_f = Z*），并求解 ILP2：在此约束下最小化总体执勤成本。第三步固定前两步的目标值并求解 ILP3 最小化总体任务环成本，随后在这些固定值下依次最小化乘机次数与替补使用，并用线性化变量 devDuty_c, devPair_c 来衡平负载（例如最小化 Σ devDuty_c 或最小化最大偏差变量 M_dev subject to Σ devDuty_c constraints），或采用 min-max（线性化）来最小化最大个人执勤小时。 在实际实现中，为避免大量整数二次优化带来的时间开销，可采用带大权重的单一目标函数： minimize W1*(Z* - Σ_f z_f) + W2*Σ_c wDuty_c * DutyHours_c + W3*Σ_c wPair_c * PairHours_c + W4*Σ dh + W5*Σ y^{Backup} + W6*Σ devDuty_c where W1 ≫ W2 ≫ W3 ... 取 W1 极大（如 10^8）保证优先级关系。但更推荐序贯（lexicographic）求解以绝对保持业务优先级顺序和结果解释力。\n\n列生成/分解求解策略（大规模实例关键）：对 B 套（数千航班数百机组）推荐主从分解。主问题为整数集分配（对于每个机组 c 选择若干 pairings p ∈ P_c，二元变量 p_{c,p}=1 表示选择该列），主问题约束：每航班 f 的机长覆盖级别 Σ_{c, p} a_{c,p,f}^{Cpt} * p_{c,p} ≥ Creq_f, 类似地对FO； a_{c,p,f}^{r} 为列 p 中机组 c 在航班 f 以角色 r 出现的次数（0或1）。每列/pairing 自带成本 = costDuty + costPair + penaltyDH* (#deadheads) + penaltyBackup*(#backupUses)，其中 costDuty = Σ DutyTime_in_pair * wDuty_c， costPair = PairTime * wPair_c。列的可行性由资源约束（MaxBlk, MaxDP, MinRest, MinCT, MaxSuccOn, MaxTAFB）保证。pricing 子问题对于每个机组 c 是一个受资源约束的最短路径/最小成本路径问题，目标是在飞行时间-连接-休息资源负荷下寻找对主问题有负 reduced cost 的列。此 pricing 问题可用标签定价法（label-setting DP）解决，状态包括当前时间、累积 duty time、累积 flight time、累积 pair time、连续执勤天数、是否已回到基地等元素；支配规则用于剪枝。若 pricing 无负成本列则可在主问题上做整数分支（branch-and-price）。为提高可行列的覆盖性和加速收敛，采用启发式列生成先产生大量近优列（贪婪按最早起飞/基地优先生成、随机化深度优先生成等），再用精确 pricing 在分支节点中继续生成。\n\n直接 ILP 的可行性与具体线性化建议（适用于 A 套或小实例）：当航班与机组规模可处理时（例如 A 套 206 航班、21 机组），可以直接构造上述 y, dh, s, b, e 等变量并加入所有约束，求解器（Gurobi/CPLEX）可直接获得整数解。为避免大量 big-M 制约的数值问题，尽量用二元衔接掩码参数（feasConn_{f,g}, sameDay_{f,g}）来禁止不可能的 s 变量并在定义 DutyTime 与 FlightOnDutyTime 时采用累计方式：将每个执勤标识 u 映射为“以航班 f 为该执勤的第一段”时计算 DutyTime = arr_{last} - dep_f，并用大 M 将非启动航段的 DutyTime 置为0。连续执勤天数与休假日间隔 MinVacDay 的约束在周期层面通过对天索引的布尔变量和线性约束实现（例如连续天计数可用计数与窗口滑动方法线性化）。\n\n平衡性与公平性线性化：衡平性目标既可用方差/二范数表达（非线性），也可用线性化的绝对偏差形式实现。令 AvgDuty = (Σ_c DutyHours_c) / |C|， 引入 devDuty_c ≥ DutyHours_c - AvgDuty, devDuty_c ≥ AvgDuty - DutyHours_c，然后最小化 Σ devDuty_c 或最小化最坏偏差 max_c devDuty_c（用变量 Mdev 并约束 devDuty_c ≤ Mdev）以实现 Pareto 公平。任务环时长平衡同理。\n\n乘机与替补建模细节：乘机 dh_{c,f} 将计入执勤时长（按题意）但不计入飞行时长，这在目标函数的执勤成本计入时应做差别。每航班对乘机人数有上限 Σ_c dh_{c,f} ≤ MaxDH。替补使用 y^{Backup} 在构造资格掩码时仅允许具备替补能力的机组在某些角色上出现（例如部分 Cpt 能替 FO），并对使用替补加额外惩罚成本或在目标层级中后置最小化。\n\n输出映射与报告所需统计量：一旦求解出 p 或 y/dh 的选择，通过遍历每位机组的航段序列并以 b,e 变量分割出执勤，汇总得到每位机组的执勤列表与任务环列表，从而生成题目要求的两个 CSV 文件。未被覆盖航班集合为 {f | z_f = 0} 导出 “UncoveredFlights.csv”。按照员工号、日期、航段次序列出该成员每天/每次执勤的航班与角色（Cpt/FO/Backup/DH）并标注休假日生成 “CrewRosters.csv”。同时可计算并汇报题目要求的统计量：未覆盖航班数、覆盖航班数、总体乘机次数 Σ dh、替补次数 Σ y^{Backup}、总体利用率 = 最低配置总体飞行时长 / 总体执勤时长（其中最低配置总体飞行时长 = Σ覆盖航班 FlightTime(f) * Σroles required? 注意题目给出计算式需按定义减去连接时长与乘机时长）、一次执勤飞行时长与执勤时长的 min/avg/max、机组执勤天数 min/avg/max、任务环天数分布（1/2/3/4天），总体执勤成本（元→万元），总体任务环成本等，并输出程序运行时间（分钟）。\n\n求解算法实现细节与工程化建议：建议用 Python（或C++）作为主控，调用 Gurobi/CPLEX 作为整数/线性规划求解器。实现列生成时，用主问题 ILP 在整数化之前先做线性松弛（master LP），再以 reduced costs 调用 pricing 子问题（对每位机组独立并可并行化）。pricing 用标签设定（label-setting）动态规划实现，状态包括当前航段索引、累积 flight time、累积 duty time、累积 pair time、当前连续执勤天数与是否已返回基地等，并用强支配准则（time、resources 向量）剪枝。对 B 套并行化 pricing（按机组或按基地分配任务）并把启发式生成（greedy pairing, randomized DFS）与 exact pricing 混合以快速获得可行列；在 branch-and-price 中对主问题分支策略建议对某个关键航班的角色覆盖变量进行分支（常用于 set partitioning 的分支方式），并在分支节点继续进行 pricing。若 branch-and-price 难以在合理时间内收敛，则采用启发式整数组合：先用 LP 解产生列并取整得到可行解，然后用 LNS 局部改进：随机选若干员工作为破坏集、重新生成好的列/可行序列并局部重优化主问题子集。\n\n计算资源与规模估计：对于 A 套（206 航班、21 机组）直接构建完整 ILP 并用商用求解器可在数十秒至数分钟内获得最优或近最优解；对于 B 套（13954 航班、465 机组）需要列生成 + branch-and-price 与并行计算，估计单节点（16-32 核 CPU、128GB 内存）上若实现高效标签DP并用启发式列生成，前期得到可行近优解（覆盖率高、成本较低）可能需要数小时到十几小时；要获取严格证明最优解可能需要更大计算资源或更多时间。现实竞赛提交可把运行时间作为输出量度并截断求解在某一时限下输出当前最优或最小可行值。\n\n不确定性、稳健化与动态调整：为提高方案对延误/临时缺员的鲁棒性，建议在模型中引入“冗余预算”或允许少量高惩罚的“应急覆盖”决策：在主问题中允许以高成本将某航班标记为紧急覆盖（例如租用外部机组或临时加班），或强制为若干关键航班保留备份机组/储备crew。另一路径是采用滚动时域（rolling horizon）：每隔若干天重新求解并在实施中用实时数据更新输入，从而将静态问题转为序列化动态决策问题。若要量化随机性影响，可以做情景化模拟或两阶段随机规划：第一阶段在规划期内确定排班，第二阶段在多场景（延误、取消、请假）下计算期望惩罚或恢复成本，并将期望值纳入目标或约束。\n\n敏感性分析与验证：对 MinCT, MinRest, MaxBlk, MaxDP 等关键参数做一系列敏感性试验，观测覆盖率、乘机次数、替补使用与成本的变化，绘制响应曲线以指导规则制定。验证模型与求解器输出可通过若干手段：用人工抽样检查若干机组的时间线是否合法（时间重叠、机场衔接、休息满足）；对生成的任务环与执勤做疲劳/合规性复核；对历史真实排班结果做比较（若历史数据可得），比较覆盖率、平均每人飞行小时等指标的差异。并对输出 CSV 做一致性检查（每位机组在周期开始与结束回到基地、每个被覆盖航班的角色数满足要求、乘机人数上限满足等）。\n\n进一步拓展与改进方向：为提高模型的现实贴合与长期可持续性，可在后续迭代中纳入机组偏好约束（基于历史数据学习偏好并用软约束），培训与资质维护日程（需保证训练/考核日程），多机型、多配置及机型切换限制（在列生成时增加机型状态），以及经济激励结构（调节 wDuty_c 与 wPair_c 来反映加班/差旅补贴）。从算法角度，可引入机器学习为 pricing 提供优良启发式（用历史最常用列训练复制器），或用强化学习学习高效的列生成/修复策略。对不确定性可以做鲁棒优化（对关键参数做不确定集并求解最坏情形下最优保障）或两阶段随机规划（直接把场景期望纳入目标）。在操作实施层面，采用滚动优化与实时调度系统将显著提高实际可执行性：在航班发生延误/取消时，实时触发局部重优化（优先级局部）以最小化扰动成本。\n\n结语（实施要点）：本模型在表达力上既保留了“直接航段分配给机组”以便生成题目要求的 CSV 报表与对规则进行灵敏度分析，又通过列生成将规模问题分解为可处理的子问题，实现工业级求解策略。对 A 套建议直接 ILP 精确求解以得到基准解；对 B 套建议列生成+branch-and-price 与启发式局部改进的混合策略并行化实现以获得高质量可行解。序贯（lexicographic）优化严格保证题目优先级。后续可通过引入不确定性建模、偏好与培训维度、以及机器学习增强的pricing启发式，进一步提升模型在现实复杂运营环境中的适应性与稳健性。",
  "task_descriptions": [
    "子任务1（基本题）要求以“航段直接分配给机组人员”的形式建立并求解一个精确的二元整数线性规划模型，其范围仅包括：用给定航班表和机组表在单一时区内判定哪些航班被覆盖并把每个被覆盖航班分配到具体机组成员上（分配时标注角色为机长/副驾驶/替补或乘机Deadhead），同时严格满足基地始末约束、时间-地点连贯性和最短连接时间等硬约束，并在这些约束下按优先级实现（1）尽可能多地覆盖航班、（4）在覆盖最优前提下尽可能减少总体乘机次数、（7）在前述目标下尽可能少使用替补资格。为此应按以下步骤精确实施： (1) 输入与预处理：读取指定的航班CSV（航班号、起降日期时间、起降机场、最低配置Comp如C1F1）与机组CSV（员工号、主资格标识、是否允许乘机、基地机场、每小时成本可留存但本子题无需用于目标），将时间统一为自定义纪元的分钟计数以便计算航段时长与连接时差，预计算并以布尔掩码 feasConn_{f,g}=1 标记所有满足 o_g = d_f、起飞同日（按起飞时间所属日）且 dep_g - arr_f ≥ MinCT 的可连接对以尽量削减连边变量； (2) 决策变量与域：为每位机组 c 与航班 f 定义二元变量 z_f∈{0,1}（航班f被覆盖指示）， y_{c,f}^{role}∈{0,1}（c在f上以 role∈{Cpt,FO,Backup} 执行飞行任务）， dh_{c,f}∈{0,1}（c作为乘客在f上乘机），以及连接变量 s_{c,f,g}∈{0,1}（c在同一次执勤中在f之后立即执行g；仅在feasConn_{f,g}=1且day_g=day_f时允许）；所有变量通过预计算掩码和资格参数 qual_{c,role} 约束其可行性以避免大M滥用； (3) 可行性约束：对每航班 f 以被覆盖指示z_f耦合分配变量并保证最低配置： Σ_c y_{c,f}^{Cpt} ≥ Creq_f * z_f， Σ_c y_{c,f}^{FO} ≥ Freq_f * z_f；若 z_f=0 则强制 Σ_c (y_{c,f}^{*}+dh_{c,f}) = 0；乘机人数上限约束 Σ_c dh_{c,f} ≤ MaxDH；资格掩码约束 y_{c,f}^{role} ≤ qual_{c,role}；机场/时间连贯性与先后关系用流守恒形式强制：对任一c与任一f，若 c 被分配到 f（作为飞行或乘机）则在其个人时间线中 f 必有入口与出口（入口等于 Σ_g s_{c,g,f} + b_{c,f}^{start}，出口等于 Σ_g s_{c,f,g} + e_{c,f}^{end}，并要求入口＝出口＝ assigned_{c,f}），并用 s_{c,f,g} ≤ yAssigned_{c,f}, s_{c,f,g} ≤ yAssigned_{c,g} 和 s_{c,f,g} ≤ feasConn_{f,g} 保证只有合法连接被激活；禁止时间重叠：对任一c且任意互相时间重叠的航班对(f,g)强制 yAssigned_{c,f}+yAssigned_{c,g} ≤ 1；基地始末约束通过对每个c确保其在整个排班周期的第一次出发航班出发地为 base_c 且最后一次到达航班到达地为 base_c（可用对从基地出发次数与返回次数相等的流量约束或对所有非基地始发/终到的连通性变量加以限制）； (4) 目标处理：按题目优先级采用严格的序贯（lexicographic）优化：第一步求解 MIP maximize Σ_f z_f 得到最大覆盖数 Z*；第二步在 Σ_f z_f = Z* 约束下求解 minimize Σ_{c,f} dh_{c,f}（或同时最小化乘机与替补可通过进一步分阶段固定前两阶段最优并继续优化 minimize Σ y^{Backup}），或者为了减少求解次数可用单一目标将覆盖缺口用极大权重惩罚并在其后按较小权重合并最小化总体乘机与替补使用； (5) 数值与实现建议：为规模可控的A套（约206航班、21机组）直接构建上述MIP并用商用求解器（Gurobi、CPLEX）或开源CBC求解器求解，充分利用预计算的feasConn掩码、禁止不可能变量与时间重叠约束以显著减少变量数与约束数； (6) 后处理与输出：从解中导出未覆盖航班列表并按起飞时间顺序输出为 UncoveredFlights.csv（包含航班号及其最低配置），以及按员工号和日期按航段次序输出 CrewRosters.csv（列明每段的起飞/到达时间与机场及任务性质：Cpt/FO/Backup/DH/休假），并汇总报告覆盖数、总体乘机次数、替补使用次数及用于验证的可行性检查（每被覆盖航班满足配置、每位机组首末回到基地、所有连接满足 MinCT、乘机人数上限满足）。",
    "子任务2（执勤层面建模与求解）目标是基于给定航班与机组数据，在分钟级时间刻度上把航段直接分配给具体机组成员并把同一天按机场和最短连接时间串联的航段划分为“执勤”（Duty），在严格满足基地始末、机场/时间连贯性、最短连接时间 MinCT、每航班乘机人数上限 MaxDH、航段互不重叠等硬约束的基础上实现两级优先目标：首先尽可能多地覆盖航班（覆盖指标必须作为首要目标），在覆盖最优前提下其次使总体执勤成本最小化（每位机组每小时执勤成本已给定），并在此基础上推动机组间执勤时长的平衡（以线性化的绝对偏差或最小化最大偏差实现）；此外本任务需显式引入并强制下列执勤层约束：每位机组每天至多一个执勤、每次执勤的累计飞行时间（Block）不超过 MaxBlk、每次执勤的时长（从该日第一趟起飞至最后一趟到达）不超过 MaxDP、相邻两次执勤之间的休息时间至少为 MinRest、连续执勤天数不超过 MaxSuccOn。为可操作地实现上述目标与约束，建议按以下步骤实施：输入与预处理——读取航班表（航班号、起飞/到达时间与机场、最低配置 C/F）与机组表（员工号、主/替补资格、是否允许乘机、基地、每小时执勤成本），统一时间为自选纪元的分钟数并按起飞日划分“同日”关系；预计算并存储布尔可行连接矩阵 feasConn[f,g]（o_g = d_f、day_g = day_f 且 dep_g - arr_f ≥ MinCT）和航班时间长度 FlightTime[f]、对任意机组的重叠航段对以禁止同人同时被分配。决策变量与线性化手段——采用二元分配变量 y_{c,f,role} 表示机组 c 在航班 f 以角色 role∈{Cpt,FO,Backup} 执行飞行（或不分角色时统一 y_{c,f}），二元变量 dh_{c,f} 表示 c 乘机于 f，二元变量 s_{c,f,g} 表示 c 在同一次执勤中从 f 直接连接到 g（仅在 feasConn[f,g]=1 时允许），并用 b_{c,f}^{start}, e_{c,f}^{end} 标识某航段是否为该次执勤的首段或末段，从而用流守恒约束在每个被分配航段上保证入口=出口=assigned_{c,f}（assigned_{c,f}=Σroles y_{c,f,role}+dh_{c,f}）；通过这些变量线性化并计算每次执勤的飞行时间 FlightOnDuty_{c,u} = Σ_{f∈duty_u} FlightTime[f] 与执勤时长 DutyTime_{c,u} = arr_{last(f)} - dep_{first(f)}（用大M与 start/end 标识或在小规模下直接枚举首段以避免大量 big-M），并为每位机组对每天只允许一个 start 变量为1（从而保证每天至多一执勤）。约束集——（1）覆盖与最低配置：对每航班 f 引入被覆盖指示 z_f，并强制 Σ_c y_{c,f,Cpt} ≥ Creq_f * z_f 与 Σ_c y_{c,f,FO} ≥ Freq_f * z_f，同时若 z_f = 0 则强制所有 y_{c,f,*}=dh_{c,f}=0；（2）资格与乘机限制：y_{c,f,role} ≤ qual_{c,role}，Σ_c dh_{c,f} ≤ MaxDH；（3）时间连贯性与连接：s_{c,f,g} ≤ feasConn[f,g] 且 s_{c,f,g} ≤ assigned_{c,f}, s_{c,f,g} ≤ assigned_{c,g}，并用流守恒在每 c 的时间序列上保持一致；（4）资源上限：对每个执勤 DutyOnes 强制 FlightOnDuty ≤ MaxBlk 与 DutyTime ≤ MaxDP；（5）休息与连续天：对同一 c 的相邻两次执勤用 dep_next_first - arr_prev_last ≥ MinRest，定义并约束滑动窗口或累加计数变量以保证连续执勤天数 ≤ MaxSuccOn。目标函数与求解策略——因题目为优先级多目标问题，推荐采用严格序贯（lexicographic）求解：第一步仅最大化 Σ_f z_f 得到覆盖上界 Z*；第二步在约束 Σ_f z_f = Z* 下最小化总体执勤成本 Σ_c wDuty_c * (Σ_u DutyTime_{c,u}/60)（小时计价），若需要在最小成本解集中进一步改善均衡可在第三步固定前两步目标值并最小化 Σ_c devDuty_c（devDuty_c ≥ DutyHours_c - AvgDuty 与 devDuty_c ≥ AvgDuty - DutyHours_c 线性化），也可最小化最大偏差变量 Mdev（devDuty_c ≤ Mdev）；为求解器实施可采用直接整数线性规划（适用于中小规模问题）并尽量通过预计算掩码减少 s 变量数量、用每天首段枚举避免过多大M，或在较大规模时将“执勤”作为列生成单元并在主问题中计入执勤成本（若延伸为列生成则需实现 pricing），但本任务在方法上仅要求直接 MIP 实现要点。实现细节与输出—实现时建议使用 Python + Gurobi/CPLEX：构建模型、设置序贯求解器调用与时间限；求解后把每位机组按日期和 s 变量串联的顺序重构出每天的执勤序列，计算并导出所需文件（按要求生成每位机组的日执勤明细 CSV 和未覆盖航班 CSV），并统计并报告覆盖数、总体执勤成本、最小/平均/最大一次执勤飞行时长与执勤时长、各机组执勤小时的最小/平均/最大及平衡性度量、总体乘机次数与替补使用次数、机组总体利用率和求解运行时间；同时在实现中必须包含可行性检查（覆盖航班的配置满足性、所有连接满足 MinCT、每日最多一执勤、休息与连续天约束满足、乘机人数上限满足、所有机组周期首末位置为基地等）。",
    "子任务3的目标是以“任务环（pairing）为决策单元”在排班周期层面构造并选择每位机组的若干可行任务环，从而在严格满足所有作业可行性与法规性约束的前提下（每个任务环须从成员基地出发并回到基地、每个任务环总时长不超过 MaxTAFB、任务环内每次执勤已满足最小连接时间 MinCT、每次执勤的飞行与执勤时长分别不超 MaxBlk 与 MaxDP、任务环内部连续执勤日数不超过 MaxSuccOn），并且在同一成员被选择的任意两项任务环之间至少间隔 MinVacDay 天（通过对候选任务环按日期建立互斥约束或在列生成时只产生互不冲突的列来实现），使得在保持航班覆盖与日常执勤约束（由输入的航班与机组资格数据、基地信息及常数参数定义）得到满足的前提下：首先最小化全公司总任务环成本（每位机组按其每小时任务环成本 wPair 计入对应任务环持续小时数的加权和），然后在该最小成本值不被打破的前提下最小化机组间任务环时长不平衡（用线性化的绝对偏差或最小化最大偏差变量实现）；为此采用面向列生成的集分配主问题与为每位机组分别求解的资源约束定价子问题的混合算法：主问题以二元变量 x_{c,p} 表示为机组 c 选择候选任务环 p（每列 p 明确列出其包含的航段集合、起止时间、任务环时长、构成的执勤段、乘机与替补次数等属性），主问题约束保证每个需覆盖的航班在机长/副驾驶角色上被足够列覆盖并对同一机组所选列之间的 MinVacDay 互斥进行线性约束；定价子问题对单个机组以标签设定的有资源最短路/最小化约化成本路径算法产生可行任务环列，状态需跟踪当前时间/地点、累计飞行时间、累计执勤时间、累计任务环时长、连续执勤天数以及所覆盖航班集合，使用强支配规则剪枝并并行化不同机组的定价计算；算法流程为：用启发式或贪婪规则生成初始列集以构造可行 master LP，迭代通过读取主问题对航班覆盖约束和互斥约束的对偶价强化定价，向主问题加入负约化成本的列直至无可改进列，然后在 master 上转为整数规划求解（采用 branch-and-price 若需严格性，或在时间受限时采用启发式整形与 LNS 局部改进获得高质量可行整数解）；实现细节包括：对候选任务环在生成时即满足 MaxTAFB/MaxBlk/MaxDP/MaxSuccOn 等资源约束以简化主问题约束、在列属性中预计算并保存任务环成本 = Σ(执勤小时·wDuty_c)+（任务环小时·wPair_c）+乘机/替补惩罚项以便于 reduced cost 计算、对违反 MinVacDay 的列对添加互斥约束或用时间索引化选择变量限制同一机组相邻周期选列，另在序贯优化中先固定航班覆盖与（如有）更高层次的执勤成本最优值再对任务环成本与平衡性做次级优化以严格实现优先级；推荐工具与实现环境为 Python 控制流、Gurobi/CPLEX 求解 master LP/IP、并行化的 C/Python 实现的标签DP 用于定价、以及启发式列产生器与 LNS 作为时限内的补偿手段，输入数据为航班表（航段起/到时间和机场、最低资格配置）、机组表（基地、主/替补资格、可否乘机、每小时执勤/任务环成本）及参数常数（MinCT, MaxBlk, MaxDP, MinRest, MaxDH, MaxTAFB, MaxSuccOn, MinVacDay）；最终输出为被选任务环的二元选择 x_{c,p}，可直接展开为每位机组的排班周期表并用于计算总体任务环成本与不平衡指标。",
    "子任务4（工程实现、输出生成、统计测量、鲁棒性与敏感性分析与部署）应作为一个独立的软件工程与运维工作包，其目标是把已设计的数学模型和求解算法转化为可重复、可验证、可部署的程序，自动生成题目要求的两份 CSV 输出并提供完整的统计报表、验证检查、容错回退与参数灵敏度试验能力；为此要求按模块化、可配置、可并行的架构实现以下步骤与功能：输入与配置——从给定数据文件（例如“机组排班Data_A-Crew.csv/机组排班Data_A-Flight.csv”或 B 组对应文件）用可配置的 parser（支持 CSV 编码、日期时间格式）读取并将时间统一为分钟纪元，所有运行参数（最小连接时间、最大执勤时长、乘机上限、求解器时限、随机种子、并行线程数等）由单一配置文件或命令行参数指定；预处理模块——计算并缓存航班之间的可连接掩码、航班时长、按日索引、资格掩码和基础一致性检查（无效时间、机场代码一致性）以尽量减少在求解阶段的在线计算；模型与求解接口——提供统一的模型构建器接口（支持将数学模型转换为 Gurobi/CPLEX 可解的 LP/MIP 或作为列生成主问题/子问题的接口），包括序贯（lexicographic）求解控制器用于按优先级分阶段求解、允许设置时间上限和求解器参数、支持 warm-start、解的检查点保存与中断恢复；并行与可扩展计算——对计算密集步骤（如定价子问题、启发式列生成或多参数并行灵敏度试验）采用多进程/多线程并行化，并支持在单机多核或集群（通过任务调度脚本）上运行；启发与回退机制——实现若干启发式方法（贪心构造、局部搜索/LNS、随机修复）作为时间受限或大规模实例的回退策略，保证在求解器超时时能输出当前最佳可行解；输出生成与统计——把最终排班展开为两份标准 CSV：UncoveredFlights.csv（按起飞时间排序列出未被覆盖的航班号与最低配置）和 CrewRosters.csv（按员工、按日期、按航段序列列出每段起飞/到达时间与机场及任务性质或休假），同时自动计算并导出题目要求的统计量（覆盖/未覆盖航班数、总体乘机次数、替补次数、利用率、各类时长的最小/平均/最大、执勤天数分布、任务环天数分布、总体执勤成本与任务环成本及程序运行分钟数）；验证与一致性检查——在输出前执行完整的约束校验脚本（对所有被覆盖航班验证资格与人数满足、每位机组每天不重叠航班、机场与时间的连贯性、乘机人数上限、基地始末返回、最短连接与休息间隔、连续执勤日数与任务环总时长上限等不违反），把检查结果和潜在违规记录为日志与报告；鲁棒性与滚动重优化支持——实现解的周期性检查点与增量重优化接口以支持滚动时域调度（在收到延误或请假等实时事件时可基于现有解进行局部重优化），并提供高惩罚“应急覆盖”变量或启发式补救流程以保证在不可行情形下依然输出可执行方案；敏感性分析工具——自动化参数扫描模块，可对关键参数（如最小连接、最小休息、最大执勤时长等）做批量求解并收集覆盖率、成本、乘机/替补次数等响应曲线，结果以机器可读的表格保存并支持绘图导出以便决策分析；可重复性、日志与测试——所有运行均记录完整日志（时间戳、solver 状态、迭代与列生成统计、内存与 CPU 使用），支持固定随机种子以复现启发式结果，并提供单元测试与集成测试套件对数据读写、掩码生成、约束检查与输出格式进行验证；部署与交付——提供 Docker 容器镜像与示例运行脚本（包含参数模板与资源建议），并附带运行说明与性能预估（推荐的并行度与内存需求），最终交付物应包括可执行程序、配置样例、完整日志、两份 CSV 输出、统计报告与校验报告，且在发生求解超时或错误时自动保存当前最优可行解和诊断信息以便后续审计与再优化。"
  ]
}