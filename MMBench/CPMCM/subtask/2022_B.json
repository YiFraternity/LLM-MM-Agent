{
  "tasks": [],
  "problem_str": "问题背景：\n智能制造被“中国制造2025”列为主攻方向, 而个性化定制、更短的产品及系统生命周期、互联互通的服务模式等成为目前企业在智能制造转型中的主要竞争点。以离散行业中的产品为例，如电子器件、汽车、航空航天零部件等，这些产品均是依赖于机械设计、可分散加工、可灵活组装且同类产品款式极多。对于此类产品，客户可能提出的产品需求难以穷举、订单规模难以预测且产品质量要求极高。此时“个性化定制”的服务需求则要求企业具有高效快速的需求分析及产品设计能力、具有柔性且精益的生产流程、具有完整且精细的全流程生产管控能力。\n\n方形件产品（也称板式类产品）是以板材为主要原片、通过平面加工后的几种板式配件装配而形成的一类产品。常见方形件产品制造企业，如3C(计算、通讯、消费电子)、板式家具、玻璃、钣金件等行业，多采用“多品种小批量”的个性化定制生产，由于企业订单数量庞大，生产组织通常采用“订单组批+批量生产+订单分拣”的模式，通过使用订单组批来实现批量切割，提高原材料的利用率，加工完成后再按不同客户订单进行分拣。\n\n上述个性化定制生产模式中的订单组批与排样优化至关重要，订单组批是将不同订单组成若干批次,实现订单的批量化生产。在对小批量、多品种、大规模的订单进行组批生产时，如果组批批次太小，材料利用率低，生产效率低；如果组批批次太大，材料利用率会提高，但订单交货期得不到保证，订单分拣难度提高，生产效率降低，缓冲区容量不足而造成堵塞等，需要解决个性化与生产高效性之间的矛盾。\n\n排样优化本质上一个下料问题（也称切割填充问题），优化的目的是合理规划方形件在板材上的布局，以减少下料过程中存在板材浪费，简化切割过程。此问题是一种计算复杂度很高的组合优化问题，也是运筹学中的一个重要分支。下料作为众多制造企业生产链中产品及零部件生产的第一道工序，消耗的材料和资源不容小视，如何提高材料利用率，降低原材料消耗，是企业减少资源和能源浪费，承担环境责任所要解决的关键问题。\n\n二、问题描述\n订单组批问题:在考虑订单交货期、设备产能负荷、仓储容量、材料利用率、生产效率、生产工艺约束等因素下,对生产订单进行组批优化。使具有相同材质、交货期相近、工艺相似的订单安排在同一个生产批次, 通过订单组批优化来保证交货期, 提高原材料的利用率，提高设备生产效率等。为便于统一处理数据和体现问题本质，本次赛题所有订单的交货期均相同，不做区分。批次的定义为完成若干订单全部任务且不含任何不完整订单任务的订单集合。\n下料优化问题（也称排样优化问题）:根据同一生产批次内方形件的尺寸与数量,选择原片的规格和数量,进行下料排样优化,最大化板材原片利用率。依据切割工序的工艺要求,排样方案必须满足“一刀切”（也称齐头切，Guillotine cut)约束(任何一次直线切割都要保证板材可分离，换言之，每次直线切割使得板材分成两块)。下料优化问题属于具有“一刀切”约束的板型材方形件排样优化问题。\n考虑切割工艺的方式不同，分齐头切（guillotine cut）和非齐头切（如图1），齐头切又可以细分精确方式和非精确方式（涉及到切割的阶段数，如图2）.图2中的三阶段排样方式主要有三种不同的类型：三阶段非精确(3NE)排样方式、三阶段匀质排样方式(3E)、三阶段同质排样方式(3H)。其中 3E 和 3H 排样方式可在三个阶段内切割出准确尺寸的方形件，因此都属于精确排样方式。3NE 排样方式中，部分方形件还需要额外的第四阶段切割才能得到满足规格尺寸要求。\n\n(a)齐头切（guillotine cutting （b）非齐头切（non-guillotine cutting）\n图1 切割示意：(a)齐头切（guillotine cutting）和（b）非齐头切（non-guillotine cutting）\n\n图2 三阶段排样方式\n由于涉及到阶段数不同，不同文献对于切割每个阶段的称呼不一样，为了便于理解和统一表述形式，采用英文的方式形容关键阶段模块的描述，具体可参见图3（实际切割过程中，第一刀可能垂直于长边，也可能垂直于短边，图3以垂直于其中一条边为例）。\n\n图3 不同切割阶段的形式定义\n因为常见的阶段最多为3-4个，因此以3阶段的切割方式为例（如图3），第1阶段的横向切割生成模块称之为stripe（条带），如Stripe1和Strip2；第2阶段纵向切割生成模块称之为stack（栈），如Strip1继续被切割分成Stack1、Stack2和Stack3；第三阶段横向切割生成模块称之为item（产品项），如Stack1继续被切割分成Item1、Item2和Item3。\n\n问题要求：\n本赛题由两个子问题组成，第二个子问题的约束都基于第一个子问题并与之相容，但两个子问题所提供的数据不相关。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。本题假定：\n\n1. 只考虑齐头切的切割方式（直线切割、切割方向垂直于板材一条边，并保证每次直线切割板材可分离成两块）；\n2. 切割阶段数不超过3，同一个阶段切割方向相同；\n3. 排样方式为精确排样；\n4. 假定板材原片仅有一种规格且数量充足；\n5. 排样方案不用考虑锯缝宽度（即切割的缝隙宽度）影响。\n\\textbf{子问题1：}排样优化问题。要求建立混合整数规划模型，在满足生产订单需求和相关约束条件下，尽可能减少板材用量。\n约束：\n1. 在相同栈（stack）里的产品项（item）的宽度（或长度）应该相同；\n2. 最终切割生成的产品项是完整的，非拼接而成。\n本子问题要求编程，以数据集A为输入，输出结果要求见第五部分。\n\\textbf{子问题2：}订单组批问题。要求建立混合整数规划模型，对数据集B中全部的订单进行组批，然后对每个批次进行独立排样，在满足订单需求和相关约束条件下，使得板材原片的用量尽可能少。\n在满足子问题1约束的基础上进一步要求：\n1. 每份订单当且仅当出现在一个批次中；\n2. 每个批次中的相同材质的产品项（item）才能使用同一块板材原片进行排样；\n3. 为保证加工环节快速流转，每个批次产品项（item）总数不能超过限定值；\n4. 因工厂产能限制，每个批次产品项（item）的面积总和不能超过限定值；\n本子题要求编程，以数据集B为输入，输出结果要求见第五部分。\n四、输入数据说明\n每套输入数据由两部分组成，一部分是输入参数（参见后文），另一部分是产品项（item）数据（需要另外下载），这里仅给出格式描述。\n1. 输入参数：\n1). 单个批次产品项（item）总数上限 max_item_num = 1000\n2). 单个批次产品项（item）的面积总和上限max_item_area = 250（m2）\n3). 原片长度plate_length = 2440（mm）\n4). 原片宽度plate_width = 1220 (mm)\n\n2. 产品项数据格式\n\\begin{table}\n\\begin{tabular}{|c|c|c|c|c|}\n\\hline\n序号 & 材质 item_material & 数量 & 长度(mm) & 宽度(mm) \\\\\nitem_id & & item_num & item_length & item_width \\\\\n\\hline\n0 & JL-18-E0 & 1 & 553 & 60 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n3. 数据集：\n1). 数据集A；\n2). 数据集B。\n\n\nAddendum: \n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\n   1) 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（'），上横（-）等辅助记号；\n   2) 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\n   1) 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\n   2) 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\n   3) 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行求解\n   1) 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\n   2) 程序必须模块化，结构要面向目标，注释清晰；\n   3) 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据以及排样方案效果图（如果两个排样方案相同，只需增加一个数量说明即可），同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|}\n\\hline\n结果指标【注】 & 子问题1 & 子问题2 \\\\\n\\hline\n板材利用率 & 要求 & 要求 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n【注】：板材利用率 = 产品项面积之和 / 使用原片面积之和\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\n   1) 排版方案：以原片左底点位坐标原点，以坐标系形式描述产品项的位置分布，还原排版方案，用文件名“cut_program.csv”提交，输出结果数据格式如下：\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|c|c|c|}\n\\hline\n原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n2). 组批方案：输出组批结果（包含每个批次的排版方案），在产品项数据的基础上增加一列批次号属性，用文件名“sum_order.csv”提交，输出结果数据格式如下：\n\nbegin{tabular}{|c|c|c|c|c|c|c|c|}\n\\hline\n批次序号 & 原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n0 & 5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\n参考文献\nSilva  E,  Alvelos  F,  Valério  de  Carvalho  J  M.  An  integer  programming  model  for two-and three-stage two-dimensional cutting stock problems [J]. European Journal of Operational Research, 2010, 205(3): 699-708.\nCui Y D, Huang B X. Reducing the number of cuts in generating three-staged cutting patterns [J]. European Journal of Operational Research, 2012, 218: 358-365.\nPuchinger J, Raidl G R. Models and algorithms for three-stage two-dimensional bin packing [J]. European Journal of Operational Research, 2007, 183(3): 1304-1327.\nDataset Path:\n['dataA1.csv', 'dataA2.csv', 'dataA3.csv', 'dataA4.csv', 'dataA5.csv', 'dataB1.csv', 'dataB2.csv', 'dataB3.csv', 'dataB4.csv', 'dataB5.csv']\n\nData Description:\n该数据集由十个CSV文件组成（dataA1–dataA5 与 dataB1–dataB5），均为用于板材排样/切割优化（混合整数规划建模、减少板材用量、以及用于子问题2的订单组批与排样优化）的产品项记录；每条记录描述一个产品项的标识、材料（或材料代码）、数量、长度和宽度（均以毫米为单位）、以及所属订单标识，部分文件在字段说明中明确了单位或指出本数据集中某些文件的 item_num 恒为1。总体上，A 系列文件为通用排样优化输入样本，B 系列文件为子问题2专用的订单级样本集合，所有文件可用于按材料/订单分组、扩展按数量展开明细、统计尺寸分布并作为混合整数规划或启发式排样算法的输入或验证集。在使用前建议对数据进行一致性检查与预处理（字段类型和单位校验、缺失值与重复项处理、必要时按 item_num 展开条目、按材料和订单汇总需求、并推断或匹配可用板材规格），以便用于建立目标为最小化板材用量、计算废料率、评估不同分组或排样策略效果的数值实验和模型求解。",
  "problem": {
    "background": "智能制造被“中国制造2025”列为主攻方向, 而个性化定制、更短的产品及系统生命周期、互联互通的服务模式等成为目前企业在智能制造转型中的主要竞争点。以离散行业中的产品为例，如电子器件、汽车、航空航天零部件等，这些产品均是依赖于机械设计、可分散加工、可灵活组装且同类产品款式极多。对于此类产品，客户可能提出的产品需求难以穷举、订单规模难以预测且产品质量要求极高。此时“个性化定制”的服务需求则要求企业具有高效快速的需求分析及产品设计能力、具有柔性且精益的生产流程、具有完整且精细的全流程生产管控能力。\n\n方形件产品（也称板式类产品）是以板材为主要原片、通过平面加工后的几种板式配件装配而形成的一类产品。常见方形件产品制造企业，如3C(计算、通讯、消费电子)、板式家具、玻璃、钣金件等行业，多采用“多品种小批量”的个性化定制生产，由于企业订单数量庞大，生产组织通常采用“订单组批+批量生产+订单分拣”的模式，通过使用订单组批来实现批量切割，提高原材料的利用率，加工完成后再按不同客户订单进行分拣。\n\n上述个性化定制生产模式中的订单组批与排样优化至关重要，订单组批是将不同订单组成若干批次,实现订单的批量化生产。在对小批量、多品种、大规模的订单进行组批生产时，如果组批批次太小，材料利用率低，生产效率低；如果组批批次太大，材料利用率会提高，但订单交货期得不到保证，订单分拣难度提高，生产效率降低，缓冲区容量不足而造成堵塞等，需要解决个性化与生产高效性之间的矛盾。\n\n排样优化本质上一个下料问题（也称切割填充问题），优化的目的是合理规划方形件在板材上的布局，以减少下料过程中存在板材浪费，简化切割过程。此问题是一种计算复杂度很高的组合优化问题，也是运筹学中的一个重要分支。下料作为众多制造企业生产链中产品及零部件生产的第一道工序，消耗的材料和资源不容小视，如何提高材料利用率，降低原材料消耗，是企业减少资源和能源浪费，承担环境责任所要解决的关键问题。\n\n二、问题描述\n订单组批问题:在考虑订单交货期、设备产能负荷、仓储容量、材料利用率、生产效率、生产工艺约束等因素下,对生产订单进行组批优化。使具有相同材质、交货期相近、工艺相似的订单安排在同一个生产批次, 通过订单组批优化来保证交货期, 提高原材料的利用率，提高设备生产效率等。为便于统一处理数据和体现问题本质，本次赛题所有订单的交货期均相同，不做区分。批次的定义为完成若干订单全部任务且不含任何不完整订单任务的订单集合。\n下料优化问题（也称排样优化问题）:根据同一生产批次内方形件的尺寸与数量,选择原片的规格和数量,进行下料排样优化,最大化板材原片利用率。依据切割工序的工艺要求,排样方案必须满足“一刀切”（也称齐头切，Guillotine cut)约束(任何一次直线切割都要保证板材可分离，换言之，每次直线切割使得板材分成两块)。下料优化问题属于具有“一刀切”约束的板型材方形件排样优化问题。\n考虑切割工艺的方式不同，分齐头切（guillotine cut）和非齐头切（如图1），齐头切又可以细分精确方式和非精确方式（涉及到切割的阶段数，如图2）.图2中的三阶段排样方式主要有三种不同的类型：三阶段非精确(3NE)排样方式、三阶段匀质排样方式(3E)、三阶段同质排样方式(3H)。其中 3E 和 3H 排样方式可在三个阶段内切割出准确尺寸的方形件，因此都属于精确排样方式。3NE 排样方式中，部分方形件还需要额外的第四阶段切割才能得到满足规格尺寸要求。\n\n(a)齐头切（guillotine cutting （b）非齐头切（non-guillotine cutting）\n图1 切割示意：(a)齐头切（guillotine cutting）和（b）非齐头切（non-guillotine cutting）\n\n图2 三阶段排样方式\n由于涉及到阶段数不同，不同文献对于切割每个阶段的称呼不一样，为了便于理解和统一表述形式，采用英文的方式形容关键阶段模块的描述，具体可参见图3（实际切割过程中，第一刀可能垂直于长边，也可能垂直于短边，图3以垂直于其中一条边为例）。\n\n图3 不同切割阶段的形式定义\n因为常见的阶段最多为3-4个，因此以3阶段的切割方式为例（如图3），第1阶段的横向切割生成模块称之为stripe（条带），如Stripe1和Strip2；第2阶段纵向切割生成模块称之为stack（栈），如Strip1继续被切割分成Stack1、Stack2和Stack3；第三阶段横向切割生成模块称之为item（产品项），如Stack1继续被切割分成Item1、Item2和Item3。",
    "problem_requirement": "本赛题由两个子问题组成，第二个子问题的约束都基于第一个子问题并与之相容，但两个子问题所提供的数据不相关。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。本题假定：\n\n1. 只考虑齐头切的切割方式（直线切割、切割方向垂直于板材一条边，并保证每次直线切割板材可分离成两块）；\n2. 切割阶段数不超过3，同一个阶段切割方向相同；\n3. 排样方式为精确排样；\n4. 假定板材原片仅有一种规格且数量充足；\n5. 排样方案不用考虑锯缝宽度（即切割的缝隙宽度）影响。\n\\textbf{子问题1：}排样优化问题。要求建立混合整数规划模型，在满足生产订单需求和相关约束条件下，尽可能减少板材用量。\n约束：\n1. 在相同栈（stack）里的产品项（item）的宽度（或长度）应该相同；\n2. 最终切割生成的产品项是完整的，非拼接而成。\n本子问题要求编程，以数据集A为输入，输出结果要求见第五部分。\n\\textbf{子问题2：}订单组批问题。要求建立混合整数规划模型，对数据集B中全部的订单进行组批，然后对每个批次进行独立排样，在满足订单需求和相关约束条件下，使得板材原片的用量尽可能少。\n在满足子问题1约束的基础上进一步要求：\n1. 每份订单当且仅当出现在一个批次中；\n2. 每个批次中的相同材质的产品项（item）才能使用同一块板材原片进行排样；\n3. 为保证加工环节快速流转，每个批次产品项（item）总数不能超过限定值；\n4. 因工厂产能限制，每个批次产品项（item）的面积总和不能超过限定值；\n本子题要求编程，以数据集B为输入，输出结果要求见第五部分。\n四、输入数据说明\n每套输入数据由两部分组成，一部分是输入参数（参见后文），另一部分是产品项（item）数据（需要另外下载），这里仅给出格式描述。\n1. 输入参数：\n1). 单个批次产品项（item）总数上限 max_item_num = 1000\n2). 单个批次产品项（item）的面积总和上限max_item_area = 250（m2）\n3). 原片长度plate_length = 2440（mm）\n4). 原片宽度plate_width = 1220 (mm)\n\n2. 产品项数据格式\n\\begin{table}\n\\begin{tabular}{|c|c|c|c|c|}\n\\hline\n序号 & 材质 item_material & 数量 & 长度(mm) & 宽度(mm) \\\\\nitem_id & & item_num & item_length & item_width \\\\\n\\hline\n0 & JL-18-E0 & 1 & 553 & 60 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n3. 数据集：\n1). 数据集A；\n2). 数据集B。\n\n",
    "dataset_path": [
      "dataA1.csv",
      "dataA2.csv",
      "dataA3.csv",
      "dataA4.csv",
      "dataA5.csv",
      "dataB1.csv",
      "dataB2.csv",
      "dataB3.csv",
      "dataB4.csv",
      "dataB5.csv"
    ],
    "dataset_description": {
      "dataA1": "dataA1.csv包含用于排样优化问题的数据，包括每个产品项的材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataA2": "dataA2.csv包含用于排样优化问题的数据，记录了每个产品项的材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以优化板材的使用量。",
      "dataA3": "dataA3.csv包含用于排样优化问题的数据，记录了每个产品项的详细信息，包括材料类型、数量、长度、宽度和所属订单。",
      "dataA4": "dataA4.csv包含用于排样优化问题的数据，包括每个产品项的ID、材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataA5": "dataA5.csv包含用于排样优化问题的数据，包括产品项的ID、材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataB1": "dataB1.csv包含数据集B中所有订单的产品项信息，用于子问题2的订单组批和排样优化。每个记录代表一个产品项，包括产品项的材料、数量、长度、宽度和所属订单。",
      "dataB2": "dataB2.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB3": "dataB3.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB4": "dataB4.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB5": "dataB5.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。"
    },
    "variable_description": [
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料类型",
        "item_num": "每个产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料类型",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料类型",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单标识符"
      },
      {
        "item_id": "产品项的唯一标识符，单位：无",
        "item_material": "产品项的材料类型，单位：无",
        "item_num": "产品项的数量，单位：个",
        "item_length": "产品项的长度，单位：毫米",
        "item_width": "产品项的宽度，单位：毫米",
        "item_order": "产品项所属的订单，单位：无"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料代码",
        "item_num": "产品项的数量（本数据集中每个产品项的数量均为1）",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料类型",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料类型",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      },
      {
        "item_id": "产品项的唯一标识符",
        "item_material": "产品项的材料代码",
        "item_num": "产品项的数量",
        "item_length": "产品项的长度（单位：毫米）",
        "item_width": "产品项的宽度（单位：毫米）",
        "item_order": "产品项所属的订单编号"
      }
    ],
    "addendum": "五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\n   1) 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（'），上横（-）等辅助记号；\n   2) 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\n   1) 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\n   2) 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\n   3) 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行求解\n   1) 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\n   2) 程序必须模块化，结构要面向目标，注释清晰；\n   3) 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据以及排样方案效果图（如果两个排样方案相同，只需增加一个数量说明即可），同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|}\n\\hline\n结果指标【注】 & 子问题1 & 子问题2 \\\\\n\\hline\n板材利用率 & 要求 & 要求 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n【注】：板材利用率 = 产品项面积之和 / 使用原片面积之和\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\n   1) 排版方案：以原片左底点位坐标原点，以坐标系形式描述产品项的位置分布，还原排版方案，用文件名“cut_program.csv”提交，输出结果数据格式如下：\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|c|c|c|}\n\\hline\n原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n2). 组批方案：输出组批结果（包含每个批次的排版方案），在产品项数据的基础上增加一列批次号属性，用文件名“sum_order.csv”提交，输出结果数据格式如下：\n\nbegin{tabular}{|c|c|c|c|c|c|c|c|}\n\\hline\n批次序号 & 原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n0 & 5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\n参考文献\nSilva  E,  Alvelos  F,  Valério  de  Carvalho  J  M.  An  integer  programming  model  for two-and three-stage two-dimensional cutting stock problems [J]. European Journal of Operational Research, 2010, 205(3): 699-708.\nCui Y D, Huang B X. Reducing the number of cuts in generating three-staged cutting patterns [J]. European Journal of Operational Research, 2012, 218: 358-365.\nPuchinger J, Raidl G R. Models and algorithms for three-stage two-dimensional bin packing [J]. European Journal of Operational Research, 2007, 183(3): 1304-1327.",
    "data_summary": "Dataset Path:\n['dataA1.csv', 'dataA2.csv', 'dataA3.csv', 'dataA4.csv', 'dataA5.csv', 'dataB1.csv', 'dataB2.csv', 'dataB3.csv', 'dataB4.csv', 'dataB5.csv']\n\nData Description:\n该数据集由十个CSV文件组成（dataA1–dataA5 与 dataB1–dataB5），均为用于板材排样/切割优化（混合整数规划建模、减少板材用量、以及用于子问题2的订单组批与排样优化）的产品项记录；每条记录描述一个产品项的标识、材料（或材料代码）、数量、长度和宽度（均以毫米为单位）、以及所属订单标识，部分文件在字段说明中明确了单位或指出本数据集中某些文件的 item_num 恒为1。总体上，A 系列文件为通用排样优化输入样本，B 系列文件为子问题2专用的订单级样本集合，所有文件可用于按材料/订单分组、扩展按数量展开明细、统计尺寸分布并作为混合整数规划或启发式排样算法的输入或验证集。在使用前建议对数据进行一致性检查与预处理（字段类型和单位校验、缺失值与重复项处理、必要时按 item_num 展开条目、按材料和订单汇总需求、并推断或匹配可用板材规格），以便用于建立目标为最小化板材用量、计算废料率、评估不同分组或排样策略效果的数值实验和模型求解。",
    "data_description": {
      "dataA1": "dataA1.csv包含用于排样优化问题的数据，包括每个产品项的材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataA2": "dataA2.csv包含用于排样优化问题的数据，记录了每个产品项的材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以优化板材的使用量。",
      "dataA3": "dataA3.csv包含用于排样优化问题的数据，记录了每个产品项的详细信息，包括材料类型、数量、长度、宽度和所属订单。",
      "dataA4": "dataA4.csv包含用于排样优化问题的数据，包括每个产品项的ID、材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataA5": "dataA5.csv包含用于排样优化问题的数据，包括产品项的ID、材料、数量、长度、宽度和所属订单。数据用于建立混合整数规划模型，以减少板材用量。",
      "dataB1": "dataB1.csv包含数据集B中所有订单的产品项信息，用于子问题2的订单组批和排样优化。每个记录代表一个产品项，包括产品项的材料、数量、长度、宽度和所属订单。",
      "dataB2": "dataB2.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB3": "dataB3.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB4": "dataB4.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。",
      "dataB5": "dataB5.csv包含数据集B中的订单信息，用于子问题2的订单组批和排样优化。每个条目代表一个产品项，包括产品项的ID、材料、数量、长度、宽度和所属订单。"
    },
    "problem_str": "问题背景：\n智能制造被“中国制造2025”列为主攻方向, 而个性化定制、更短的产品及系统生命周期、互联互通的服务模式等成为目前企业在智能制造转型中的主要竞争点。以离散行业中的产品为例，如电子器件、汽车、航空航天零部件等，这些产品均是依赖于机械设计、可分散加工、可灵活组装且同类产品款式极多。对于此类产品，客户可能提出的产品需求难以穷举、订单规模难以预测且产品质量要求极高。此时“个性化定制”的服务需求则要求企业具有高效快速的需求分析及产品设计能力、具有柔性且精益的生产流程、具有完整且精细的全流程生产管控能力。\n\n方形件产品（也称板式类产品）是以板材为主要原片、通过平面加工后的几种板式配件装配而形成的一类产品。常见方形件产品制造企业，如3C(计算、通讯、消费电子)、板式家具、玻璃、钣金件等行业，多采用“多品种小批量”的个性化定制生产，由于企业订单数量庞大，生产组织通常采用“订单组批+批量生产+订单分拣”的模式，通过使用订单组批来实现批量切割，提高原材料的利用率，加工完成后再按不同客户订单进行分拣。\n\n上述个性化定制生产模式中的订单组批与排样优化至关重要，订单组批是将不同订单组成若干批次,实现订单的批量化生产。在对小批量、多品种、大规模的订单进行组批生产时，如果组批批次太小，材料利用率低，生产效率低；如果组批批次太大，材料利用率会提高，但订单交货期得不到保证，订单分拣难度提高，生产效率降低，缓冲区容量不足而造成堵塞等，需要解决个性化与生产高效性之间的矛盾。\n\n排样优化本质上一个下料问题（也称切割填充问题），优化的目的是合理规划方形件在板材上的布局，以减少下料过程中存在板材浪费，简化切割过程。此问题是一种计算复杂度很高的组合优化问题，也是运筹学中的一个重要分支。下料作为众多制造企业生产链中产品及零部件生产的第一道工序，消耗的材料和资源不容小视，如何提高材料利用率，降低原材料消耗，是企业减少资源和能源浪费，承担环境责任所要解决的关键问题。\n\n二、问题描述\n订单组批问题:在考虑订单交货期、设备产能负荷、仓储容量、材料利用率、生产效率、生产工艺约束等因素下,对生产订单进行组批优化。使具有相同材质、交货期相近、工艺相似的订单安排在同一个生产批次, 通过订单组批优化来保证交货期, 提高原材料的利用率，提高设备生产效率等。为便于统一处理数据和体现问题本质，本次赛题所有订单的交货期均相同，不做区分。批次的定义为完成若干订单全部任务且不含任何不完整订单任务的订单集合。\n下料优化问题（也称排样优化问题）:根据同一生产批次内方形件的尺寸与数量,选择原片的规格和数量,进行下料排样优化,最大化板材原片利用率。依据切割工序的工艺要求,排样方案必须满足“一刀切”（也称齐头切，Guillotine cut)约束(任何一次直线切割都要保证板材可分离，换言之，每次直线切割使得板材分成两块)。下料优化问题属于具有“一刀切”约束的板型材方形件排样优化问题。\n考虑切割工艺的方式不同，分齐头切（guillotine cut）和非齐头切（如图1），齐头切又可以细分精确方式和非精确方式（涉及到切割的阶段数，如图2）.图2中的三阶段排样方式主要有三种不同的类型：三阶段非精确(3NE)排样方式、三阶段匀质排样方式(3E)、三阶段同质排样方式(3H)。其中 3E 和 3H 排样方式可在三个阶段内切割出准确尺寸的方形件，因此都属于精确排样方式。3NE 排样方式中，部分方形件还需要额外的第四阶段切割才能得到满足规格尺寸要求。\n\n(a)齐头切（guillotine cutting （b）非齐头切（non-guillotine cutting）\n图1 切割示意：(a)齐头切（guillotine cutting）和（b）非齐头切（non-guillotine cutting）\n\n图2 三阶段排样方式\n由于涉及到阶段数不同，不同文献对于切割每个阶段的称呼不一样，为了便于理解和统一表述形式，采用英文的方式形容关键阶段模块的描述，具体可参见图3（实际切割过程中，第一刀可能垂直于长边，也可能垂直于短边，图3以垂直于其中一条边为例）。\n\n图3 不同切割阶段的形式定义\n因为常见的阶段最多为3-4个，因此以3阶段的切割方式为例（如图3），第1阶段的横向切割生成模块称之为stripe（条带），如Stripe1和Strip2；第2阶段纵向切割生成模块称之为stack（栈），如Strip1继续被切割分成Stack1、Stack2和Stack3；第三阶段横向切割生成模块称之为item（产品项），如Stack1继续被切割分成Item1、Item2和Item3。\n\n问题要求：\n本赛题由两个子问题组成，第二个子问题的约束都基于第一个子问题并与之相容，但两个子问题所提供的数据不相关。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。本题假定：\n\n1. 只考虑齐头切的切割方式（直线切割、切割方向垂直于板材一条边，并保证每次直线切割板材可分离成两块）；\n2. 切割阶段数不超过3，同一个阶段切割方向相同；\n3. 排样方式为精确排样；\n4. 假定板材原片仅有一种规格且数量充足；\n5. 排样方案不用考虑锯缝宽度（即切割的缝隙宽度）影响。\n\\textbf{子问题1：}排样优化问题。要求建立混合整数规划模型，在满足生产订单需求和相关约束条件下，尽可能减少板材用量。\n约束：\n1. 在相同栈（stack）里的产品项（item）的宽度（或长度）应该相同；\n2. 最终切割生成的产品项是完整的，非拼接而成。\n本子问题要求编程，以数据集A为输入，输出结果要求见第五部分。\n\\textbf{子问题2：}订单组批问题。要求建立混合整数规划模型，对数据集B中全部的订单进行组批，然后对每个批次进行独立排样，在满足订单需求和相关约束条件下，使得板材原片的用量尽可能少。\n在满足子问题1约束的基础上进一步要求：\n1. 每份订单当且仅当出现在一个批次中；\n2. 每个批次中的相同材质的产品项（item）才能使用同一块板材原片进行排样；\n3. 为保证加工环节快速流转，每个批次产品项（item）总数不能超过限定值；\n4. 因工厂产能限制，每个批次产品项（item）的面积总和不能超过限定值；\n本子题要求编程，以数据集B为输入，输出结果要求见第五部分。\n四、输入数据说明\n每套输入数据由两部分组成，一部分是输入参数（参见后文），另一部分是产品项（item）数据（需要另外下载），这里仅给出格式描述。\n1. 输入参数：\n1). 单个批次产品项（item）总数上限 max_item_num = 1000\n2). 单个批次产品项（item）的面积总和上限max_item_area = 250（m2）\n3). 原片长度plate_length = 2440（mm）\n4). 原片宽度plate_width = 1220 (mm)\n\n2. 产品项数据格式\n\\begin{table}\n\\begin{tabular}{|c|c|c|c|c|}\n\\hline\n序号 & 材质 item_material & 数量 & 长度(mm) & 宽度(mm) \\\\\nitem_id & & item_num & item_length & item_width \\\\\n\\hline\n0 & JL-18-E0 & 1 & 553 & 60 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n3. 数据集：\n1). 数据集A；\n2). 数据集B。\n\n\nAddendum: \n五、提交结果要求\n参赛选手必须按比赛规则提交规定格式的论文报告。此外，本赛题还有如下要求：\n\n1. 建立完整的数学模型\n   1) 模型所用变量和参数都需要解释清楚。变量一般用单个小写英文字母表示；参数可以是希腊字母，也可以是第一个字母大写的英文字符串，但需要尽可能简洁；下标尽可能只用单个小写的英文字母表示。为简洁易读易懂起见，变量可以有上撇（'），上横（-）等辅助记号；\n   2) 所有变量、参数和记号都必须通篇前后一致。\n\n2. 根据模型设计求解算法\n   1) 模型和算法是两个独立的概念。提交的论文必须对数学模型的特点进行分析，包括模型的规模和结构，求解的难易，等等；\n   2) 算法必须针对数学模型的特点设计。论文需要解释算法的合理性，包括算法实现的难易，复杂度估计和运行时间分析。如果采用实用性算法，必须解释算法的思路；\n   3) 模型算法描述必须逻辑严谨，条理清晰，同时简单易懂。\n\n3. 编写程序算法，并使用给定数据进行求解\n   1) 程序编写可以按自己的专长选用高级语言或脚本语言，或多种方法的组合，求解器可以是商用、开源、自主开发，由参赛者根据自己的情况选择。\n   2) 程序必须模块化，结构要面向目标，注释清晰；\n   3) 参赛选手需要在报告附录中介绍程序和数据结构。\n\n4. 论文报告必须明确包括如下数据以及排样方案效果图（如果两个排样方案相同，只需增加一个数量说明即可），同时欢迎作者采用其它图表形式对实验结果进行描述，但要求设计简单易懂，线条清晰，色彩分明，重点突出，标注恰到好处。\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|}\n\\hline\n结果指标【注】 & 子问题1 & 子问题2 \\\\\n\\hline\n板材利用率 & 要求 & 要求 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n【注】：板材利用率 = 产品项面积之和 / 使用原片面积之和\n\n5. 本赛题还需提交程序实现的计算结果，及如下两个文本文件：\n   1) 排版方案：以原片左底点位坐标原点，以坐标系形式描述产品项的位置分布，还原排版方案，用文件名“cut_program.csv”提交，输出结果数据格式如下：\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|c|c|c|c|}\n\\hline\n原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n2). 组批方案：输出组批结果（包含每个批次的排版方案），在产品项数据的基础上增加一列批次号属性，用文件名“sum_order.csv”提交，输出结果数据格式如下：\n\nbegin{tabular}{|c|c|c|c|c|c|c|c|}\n\\hline\n批次序号 & 原片材质 & 原片序号 & 产品id & 产品x坐标 & 产品y坐标 & 产品x方向长度 & 产品y方向长度 \\\\\n\\hline\n0 & 5-0218S & 0 & 3 & 0 & 0 & 646.5 & 148 \\\\\n\\hline\n\\end{tabular}\n\n参考文献\nSilva  E,  Alvelos  F,  Valério  de  Carvalho  J  M.  An  integer  programming  model  for two-and three-stage two-dimensional cutting stock problems [J]. European Journal of Operational Research, 2010, 205(3): 699-708.\nCui Y D, Huang B X. Reducing the number of cuts in generating three-staged cutting patterns [J]. European Journal of Operational Research, 2012, 218: 358-365.\nPuchinger J, Raidl G R. Models and algorithms for three-stage two-dimensional bin packing [J]. European Journal of Operational Research, 2007, 183(3): 1304-1327.\nDataset Path:\n['dataA1.csv', 'dataA2.csv', 'dataA3.csv', 'dataA4.csv', 'dataA5.csv', 'dataB1.csv', 'dataB2.csv', 'dataB3.csv', 'dataB4.csv', 'dataB5.csv']\n\nData Description:\n该数据集由十个CSV文件组成（dataA1–dataA5 与 dataB1–dataB5），均为用于板材排样/切割优化（混合整数规划建模、减少板材用量、以及用于子问题2的订单组批与排样优化）的产品项记录；每条记录描述一个产品项的标识、材料（或材料代码）、数量、长度和宽度（均以毫米为单位）、以及所属订单标识，部分文件在字段说明中明确了单位或指出本数据集中某些文件的 item_num 恒为1。总体上，A 系列文件为通用排样优化输入样本，B 系列文件为子问题2专用的订单级样本集合，所有文件可用于按材料/订单分组、扩展按数量展开明细、统计尺寸分布并作为混合整数规划或启发式排样算法的输入或验证集。在使用前建议对数据进行一致性检查与预处理（字段类型和单位校验、缺失值与重复项处理、必要时按 item_num 展开条目、按材料和订单汇总需求、并推断或匹配可用板材规格），以便用于建立目标为最小化板材用量、计算废料率、评估不同分组或排样策略效果的数值实验和模型求解。"
  },
  "problem_background": "智能制造被“中国制造2025”列为主攻方向, 而个性化定制、更短的产品及系统生命周期、互联互通的服务模式等成为目前企业在智能制造转型中的主要竞争点。以离散行业中的产品为例，如电子器件、汽车、航空航天零部件等，这些产品均是依赖于机械设计、可分散加工、可灵活组装且同类产品款式极多。对于此类产品，客户可能提出的产品需求难以穷举、订单规模难以预测且产品质量要求极高。此时“个性化定制”的服务需求则要求企业具有高效快速的需求分析及产品设计能力、具有柔性且精益的生产流程、具有完整且精细的全流程生产管控能力。\n\n方形件产品（也称板式类产品）是以板材为主要原片、通过平面加工后的几种板式配件装配而形成的一类产品。常见方形件产品制造企业，如3C(计算、通讯、消费电子)、板式家具、玻璃、钣金件等行业，多采用“多品种小批量”的个性化定制生产，由于企业订单数量庞大，生产组织通常采用“订单组批+批量生产+订单分拣”的模式，通过使用订单组批来实现批量切割，提高原材料的利用率，加工完成后再按不同客户订单进行分拣。\n\n上述个性化定制生产模式中的订单组批与排样优化至关重要，订单组批是将不同订单组成若干批次,实现订单的批量化生产。在对小批量、多品种、大规模的订单进行组批生产时，如果组批批次太小，材料利用率低，生产效率低；如果组批批次太大，材料利用率会提高，但订单交货期得不到保证，订单分拣难度提高，生产效率降低，缓冲区容量不足而造成堵塞等，需要解决个性化与生产高效性之间的矛盾。\n\n排样优化本质上一个下料问题（也称切割填充问题），优化的目的是合理规划方形件在板材上的布局，以减少下料过程中存在板材浪费，简化切割过程。此问题是一种计算复杂度很高的组合优化问题，也是运筹学中的一个重要分支。下料作为众多制造企业生产链中产品及零部件生产的第一道工序，消耗的材料和资源不容小视，如何提高材料利用率，降低原材料消耗，是企业减少资源和能源浪费，承担环境责任所要解决的关键问题。\n\n二、问题描述\n订单组批问题:在考虑订单交货期、设备产能负荷、仓储容量、材料利用率、生产效率、生产工艺约束等因素下,对生产订单进行组批优化。使具有相同材质、交货期相近、工艺相似的订单安排在同一个生产批次, 通过订单组批优化来保证交货期, 提高原材料的利用率，提高设备生产效率等。为便于统一处理数据和体现问题本质，本次赛题所有订单的交货期均相同，不做区分。批次的定义为完成若干订单全部任务且不含任何不完整订单任务的订单集合。\n下料优化问题（也称排样优化问题）:根据同一生产批次内方形件的尺寸与数量,选择原片的规格和数量,进行下料排样优化,最大化板材原片利用率。依据切割工序的工艺要求,排样方案必须满足“一刀切”（也称齐头切，Guillotine cut)约束(任何一次直线切割都要保证板材可分离，换言之，每次直线切割使得板材分成两块)。下料优化问题属于具有“一刀切”约束的板型材方形件排样优化问题。\n考虑切割工艺的方式不同，分齐头切（guillotine cut）和非齐头切（如图1），齐头切又可以细分精确方式和非精确方式（涉及到切割的阶段数，如图2）.图2中的三阶段排样方式主要有三种不同的类型：三阶段非精确(3NE)排样方式、三阶段匀质排样方式(3E)、三阶段同质排样方式(3H)。其中 3E 和 3H 排样方式可在三个阶段内切割出准确尺寸的方形件，因此都属于精确排样方式。3NE 排样方式中，部分方形件还需要额外的第四阶段切割才能得到满足规格尺寸要求。\n\n(a)齐头切（guillotine cutting （b）非齐头切（non-guillotine cutting）\n图1 切割示意：(a)齐头切（guillotine cutting）和（b）非齐头切（non-guillotine cutting）\n\n图2 三阶段排样方式\n由于涉及到阶段数不同，不同文献对于切割每个阶段的称呼不一样，为了便于理解和统一表述形式，采用英文的方式形容关键阶段模块的描述，具体可参见图3（实际切割过程中，第一刀可能垂直于长边，也可能垂直于短边，图3以垂直于其中一条边为例）。\n\n图3 不同切割阶段的形式定义\n因为常见的阶段最多为3-4个，因此以3阶段的切割方式为例（如图3），第1阶段的横向切割生成模块称之为stripe（条带），如Stripe1和Strip2；第2阶段纵向切割生成模块称之为stack（栈），如Strip1继续被切割分成Stack1、Stack2和Stack3；第三阶段横向切割生成模块称之为item（产品项），如Stack1继续被切割分成Item1、Item2和Item3。",
  "problem_requirement": "本赛题由两个子问题组成，第二个子问题的约束都基于第一个子问题并与之相容，但两个子问题所提供的数据不相关。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。本题假定：\n\n1. 只考虑齐头切的切割方式（直线切割、切割方向垂直于板材一条边，并保证每次直线切割板材可分离成两块）；\n2. 切割阶段数不超过3，同一个阶段切割方向相同；\n3. 排样方式为精确排样；\n4. 假定板材原片仅有一种规格且数量充足；\n5. 排样方案不用考虑锯缝宽度（即切割的缝隙宽度）影响。\n\\textbf{子问题1：}排样优化问题。要求建立混合整数规划模型，在满足生产订单需求和相关约束条件下，尽可能减少板材用量。\n约束：\n1. 在相同栈（stack）里的产品项（item）的宽度（或长度）应该相同；\n2. 最终切割生成的产品项是完整的，非拼接而成。\n本子问题要求编程，以数据集A为输入，输出结果要求见第五部分。\n\\textbf{子问题2：}订单组批问题。要求建立混合整数规划模型，对数据集B中全部的订单进行组批，然后对每个批次进行独立排样，在满足订单需求和相关约束条件下，使得板材原片的用量尽可能少。\n在满足子问题1约束的基础上进一步要求：\n1. 每份订单当且仅当出现在一个批次中；\n2. 每个批次中的相同材质的产品项（item）才能使用同一块板材原片进行排样；\n3. 为保证加工环节快速流转，每个批次产品项（item）总数不能超过限定值；\n4. 因工厂产能限制，每个批次产品项（item）的面积总和不能超过限定值；\n本子题要求编程，以数据集B为输入，输出结果要求见第五部分。\n四、输入数据说明\n每套输入数据由两部分组成，一部分是输入参数（参见后文），另一部分是产品项（item）数据（需要另外下载），这里仅给出格式描述。\n1. 输入参数：\n1). 单个批次产品项（item）总数上限 max_item_num = 1000\n2). 单个批次产品项（item）的面积总和上限max_item_area = 250（m2）\n3). 原片长度plate_length = 2440（mm）\n4). 原片宽度plate_width = 1220 (mm)\n\n2. 产品项数据格式\n\\begin{table}\n\\begin{tabular}{|c|c|c|c|c|}\n\\hline\n序号 & 材质 item_material & 数量 & 长度(mm) & 宽度(mm) \\\\\nitem_id & & item_num & item_length & item_width \\\\\n\\hline\n0 & JL-18-E0 & 1 & 553 & 60 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n3. 数据集：\n1). 数据集A；\n2). 数据集B。\n\n",
  "problem_analysis": "这个数学建模问题处在智能制造与离散式板材加工的交叉处，从宏观上看它既是一个组合优化问题，也是制造资源配置与服务响应能力之间的折中设计问题。模型的主要目标可以概括为在保证交期、工艺可行性与生产效率的前提下，最大化板材利用率并通过合理的订单组批与排样来提升整体产能利用与流水线流转效率。这个目标同时包含了资源最优化（最少使用原片）、生产组织效率（合理的批次规模与分拣负荷）、以及工艺可制造性（齐头切、阶段限制和精确排样）三类相互影响的子目标，因此在建模与求解时应以多目标或带权合成目标为起点，但题目在子问题1与子问题2中把最小化原片使用量作为核心单目标，这一简化有助于数理表述与可解性，但也会影响结果在实际生产中的适用性——因为在真实车间，交货弹性、分拣成本、在制品缓冲、设备切换与人工负荷等因素都会对批次决策产生重要影响。\n\n题目中有若干显性假设与隐含约束，它们决定了模型的边界与分析深度。显性的约束包括只允许齐头切、切割阶段不超过三阶段且同一阶段切割方向一致、精确排样、单一规格且数量充足的原片、忽略锯缝宽度。这些假设一方面使问题更具理论分析价值并与文献中三阶段切割问题相容，另一方面也降低了模型的现实复杂性：忽略锯缝和单一原片规格会低估废料、忽视工艺细节（如锯缝与板材方向性）可能导致排样方案在实际生产中不可行或需调整。隐含假设还包括允许产品项旋转与否（数据中未明确），允许同一物料的不同订单在同一批次混合处理（子问题2有额外约束），以及在子问题1中所有订单交货期相同从而不考虑时序和延迟成本。这些假设提高了模型求解的可行性，但也可能弱化了对交付时效性、订单优先级与生产节拍的刻画。\n\n在要素之间的相互关系方面，订单组批与排样是强耦合的两层决策：批次的划分直接影响每一批次内待切割产品的构成，而这些构成又决定该批次需要的原片数量与排样效率。更细致地说，同一批次中产品数、面积合计与尺寸分布会影响能否形成高利用率的三阶段齐头切模式，约束“同一栈内的产品宽度应相同”进一步增加了模型的离散性——这意味着在设计stripe->stack->item分割树形结构时，必须把同宽度（或同长度）的一组产品放在同一栈，使得可行的分割模式数量被限制并导致解空间呈高度非凸与组合爆炸的特性。这种耦合带来两类张力：在批次规模上，较大的批次可能因尺寸多样性而难以形成高效的齐头切排样，导致需要更多原片或复杂分割；而太小的批次则牺牲了规模经济导致材料利用率下降、切割与分拣成本提高。另一个张力来自组批目标与交付或缓冲约束的平衡——题目已将交期同一化，实际上加入不同交期、机器能力波动或缓冲限制后，这种平衡将更为复杂。\n\n问题的时间尺度与动态性也是重要考量。题目采取静态一次性批划与排样的视角，但在实际生产中订单是动态到达的，废料可再利用或保留到后续批次会改变长期资源消耗和总体效率，因此一个静态最优解可能在滚动时域或长期视角下并非最优。面对动态到货、需求波动、设备故障或原片供给限制，模型应当扩展到滚动时域、采用鲁棒或随机规划框架，或者使用再优化与动态调度策略以保证结果在扰动下的稳定性。例如可以在短期（单批次）使用精确MIP求解排样，而在中长期通过启发式或基于样本的策略调整组批决策，从而在保持高材料利用率的同时降低对未来不确定性的敏感性。\n\n从建模方法学的视角，本问题属于NP-困难范畴：二维切割与装箱问题、三阶段guillotine约束以及离散订单分配均是组合爆炸的。直接把两个子问题整合成一个大规模MIP会出现变量与约束数目剧增、对称性严重与求解难度极高的现实问题。因此合理的建模策略是分解与层次化。可以采用列生成/切割平面生成的方式将排样转化为模式生成问题：先通过DP或启发式生成可行的三阶段guillotine模式（每个模式对应若干item的布局和所用原片），然后把每个模式当作一列，在一个集成的集分配模型（集合覆盖/分区模型）中选择模式以覆盖所有需求最小化原片总数。对订单组批问题，可以采用二阶段策略：先基于材质、尺寸相似度和容量约束进行初始聚类（聚类算法或启发式的装箱策略），然后在每个批次中独立求解排样，通过局部搜索或元启发式（如邻域交换、Lagrangian松弛）在批次间调整订单以提升总体利用率。若资源允许，可采用交替优化：在分配步骤使用排样产生的模式成本作为子问题的成本估计，然后重新分配订单直至收敛。算法选择上，精确求解可用于规模较小的A类实例或单一批次的排样验证；面对B类包含订单分配的更大问题，应采用混合策略：贪心起始解、局部搜索改进、针对guillotine的专用启发式（分层strip-based、递归分割策略）以及必要时的整合MIP用于局部证明最优性或求取下界。\n\n关于不确定性与风险，需要识别建模与数据层面的脆弱点：数据可能含有数目为1的item项需展开；板材实际可用规格可能不止一种；工艺细节（锯缝、热变形、板材方向性和缺陷区）被忽略会导致方案在车间不可实施；订单交期在实际中不一致将改变组批权衡。此外模型选择（精确MIP vs 启发式）带来的风险是可解释性与最优性证明的缺失。为此建议在研究中同时计算松弛下界（如一维下料下界、面积下界）和启发式上界，并做敏感性分析（例如改变最大批次面积、允许原片多规格、加入切缝宽度、允许部分非齐头切）以评估方案鲁棒性。\n\n从替代性表述来看，本问题可以被重新框定为多目标优化（同时最小化原片数、交货延迟风险与分拣成本）、或作为层级决策问题（上层决定批次划分以平衡若干业务指标，下层针对单批次求排样），亦可采用随机/鲁棒优化框架来处理需求与产能不确定性。不同的表述会引导出不同的求解方法：多目标可用Pareto前沿与加权和法，层级决策可用Benders分解或交替优化，鲁棒/随机方法则需要样本平均或场景分解，从而增加计算负担但提高现实适用性。\n\n最后，建模过程应保持迭代性与开放性。初始模型可以先围绕题目核心目标（最小原片使用量）建立清晰的MIP或模式生成框架并配合启发式求近似可行解，随后通过数值实验与真实车间数据验证模型假设（比如旋转允许性、板材方向约束、锯缝影响），并将这些验证结果反馈入模型改进。模型改进可按优先级分步展开：首先加入最重要的制造约束（如方向性或最小切割段），其次扩展到多规格原片与动态订单，最终考虑多目标权衡与实时再优化机制。通过这种迭代式、以数据为支撑并兼顾理论与算法可实现性的研究路径，能够在保持数学严谨性的同时逐步提高模型在实际智能制造场景中的解释力与可操作性。",
  "modeling_solution": "总述与建模思路概览：为兼顾数学严谨性与工程可操作性，提出一个两层层次化混合整数规划（MIP + 列生成/柱生成）与实用启发式相结合的框架。上层为“组批与模式选择”（batching + set-partitioning/covering）问题，下层为“每块原片的三阶段齐头切排样模式生成”问题。下层问题按照题目要求限定为最多三阶段、齐头切且精确排样；模式以“一个原片上可生成的若干item清单及其容量向量”定义。上层在可用模式集合上做覆盖分配与批次分配（子问题1为单批次下的覆盖，子问题2为多批次下的覆盖与订单分配），目标均为最小化所用原片数（即模式选取数）。该分解把高维几何约束封装到下层的模式生成子问题中（模式生成为一个组合型子问题，可用动态规划/整数规划或专用启发式求解），上层则成为一个较小规模的组合分配问题，便于用MIP或元启发式求解（例如分支定价 branch-and-price 或贪心+局部搜索）。\n\n一、基本假设（明确、可复现）\n1）平面坐标系：原片长方向为X，长度PL = plate_length（mm），宽方向为Y，宽度 PW = plate_width（mm）。每件产品项i有固定方向的尺寸 (l_i, w_i)（可在模型中允许旋转选项，但需在数据预处理时明确是否允许旋转；下文给出可选的旋转变量以保持灵活性）。\n2）切割为精确的齐头切，最多三阶段。采用常见的“三阶段分层”理解：第一阶段将整片按Y方向分割为若干条带（stripe）；每个stripe再按X方向分割为若干stack；每个stack按Y方向分割为item。由此可得到约束：同一stack中的item在其短边方向（等同于stripe高度）上尺寸一致（即题目要求“在相同stack里的产品项的宽度（或长度）应相同”）。为模型化简洁，将stripe高度限定为来自产品项集中的一组离散高度值（即stripe高度必须等于某一类item的宽度或其整数倍组合），这一假设与工业上“按板件高度分层”的实际切割策略一致，并能减小模式空间。\n3）忽略锯缝宽度，原片规格单一且数量充足，且所有产品尺寸为整数毫米。\n4）子问题1中仅需对单一输入文件进行最优或近优求解；子问题2中每个订单属于且仅属于一个批次（整数划分），且每一批次独立进行排样（即每批次内生成的模式不能跨批次复用）。\n5）若数据里 item_num>1，使用前进行明细展开或在模型中考虑整数需求量参数 d_i。\n\n二、符号与变量说明（尽量精简并与传统文献一致）\n参数：\nPL, PW：原片长与宽（mm）。\nI：产品项索引集合（在展开数量后每一条为一待切矩形，或者按类型聚合）。\nd_i：产品i的需求数量（若已展开则多为1）。\nl_i, w_i：产品i在X、Y方向上的尺寸（mm）。\nO：订单集合（仅子问题2使用），订单o包含若干产品项。\nM：材料（材质）类别集合（子问题2中不同材质不能混排）。\nmax_item_num, max_item_area：每个批次item数与面积上限（题目给出）。\nA_plate = PL * PW：单片原片面积。\n\n下层（模式）相关符号：\nP：模式集合（列生成过程中动态产生）。模式p对应一种在一片原片上实现的排样方案（需满足三阶段齐头切规则），其信息包括：对于每种产品i，q_{p,i} 为模式p最多可以放置的该产品数量；此外模式p包含所属材质类型 mat(p)（仅含单一材质），以及模式所用面积总和 area_p = sum_i q_{p,i} * l_i * w_i（<=A_plate）。\n上层决策变量（主问题）：\ny_p ∈ Z_{\\ge 0}：选择模式p的份数（整数），每个y_p代表使用一张原片并按模式p排样；若允许同一模式被多次使用，则为整数变量；若限制每个模式只可选一次可用 y_p ∈ {0,1}（但一般应为整数）。\nz_{i,p} ∈ Z_{\\ge 0}：模式p提供给产品i的数量（可由模式属性 q_{p,i} 决定，若模式固定则为常数，主问题只需约束覆盖）。\n对于子问题2有关组批的额外变量：\nb_{o,b} ∈ {0,1}：订单o被分配到批次b（b 索引从0..B-1，B可由上界估计如|O|）。\nx_{p,b} ∈ Z_{\\ge 0}：在批次b中使用的模式p的张数（模式p对应的材质必须等于批次所对应材质），模式p仅适用于其材质类别。\n\n三、主问题（上层MIP）数学公式（基于模式集合P）\n子问题1（单批次/单材质时的标准覆盖模型）\n目标：最小化所用原片数\nminimize sum_{p∈P} y_p\n覆盖约束：对每个产品i，保证总供给 >= 需求\nfor all i ∈ I: sum_{p∈P} q_{p,i} * y_p ≥ d_i\n变量域：\ny_p ∈ Z_{\\ge 0}\n\n注：若把每个模式视为只能用一次（每张原片独一无二），则 y_p ∈ {0,1}，q_{p,i}为是否放置特定item（1或0），但工业上允许重复使用相同方案，故一般取整数。\n\n子问题2（组批 + 每批独立排样）\n目标：最小化所有批次使用的原片总数\nminimize sum_{b} sum_{p∈P_{mat(b)}} x_{p,b}\n约束1（每订单仅出现在一个批次）：对每个订单 o，\nsum_{b} b_{o,b} = 1\n约束2（批次内产项数和面积上限）：对于每批次 b，\nsum_{o} b_{o,b} * num_items(o) ≤ max_item_num\nsum_{o} b_{o,b} * area_of_order(o) ≤ max_item_area\n约束3（批次内材料同质分配）：若b含多种材质的订单，则必须分开排样（题目要求“每个批次中的相同材质的产品项才能使用同一块板材进行排样”），这里可以采取策略：对每批次和每种材质m分别建立一组模式 P_{b,m}，并约束排样仅从对应材质模式集选择；\n约束4（需求覆盖，按批次和模式）：对每种产品i属于订单o assigned to b（即b_{o,b}=1），要求\nsum_{p∈P_{mat(i)}} q_{p,i} * x_{p,b} ≥ sum_{o: i∈order(o)} b_{o,b} * d_{i,o}\n变量域：\nb_{o,b} ∈ {0,1}, x_{p,b} ∈ Z_{\\ge 0}\n\n这种建模使得每个批次独立构成若干“按材质”的覆盖子问题，整个模型是一个带有分配二元变量的分块覆盖问题。该模型可用branch-and-price（对x_{p,b}使用列生成）或启发式分解法求解。\n\n四、下层模式生成子问题（p的生成）——精细化与解决方法\n模式p需要满足三阶段齐头切与“同一stack内item短边一致”的结构性约束。直接列举所有p不可行；因此采用列生成（branch-and-price）的经典设计：主问题以模式为列，给定对偶价（从松弛求解得到），生成子问题为“在一张原片上找到一个能将对偶收益最大化且对面积与几何约束可行的模式”。子问题本质上是一个带有guillotine约束的二维组合优化（枚举最优切割树），可用下列方法求解或近似产生新列：\n\n1）精确生成（小规模或关键列场景）：把模式生成转化为一个有界的整数规划：选择stripe高度配置 H = {h_1,...,h_s}（每个h_k来自可能的 item w 值），使得 sum_k h_k ≤ PW，且对每个stripe k，在该stripe内对每个可能的stack类型（指定 stack 中 item 的短边等于h_k）做1D装箱沿PL方向（将若干item按长度l_i堆积），每个stack的容量为floor(PL / l_i_type)或更细细化为线性分割。该内层可用动态规划或多维有限背包求解，从而得到一个具体q_{p,i}向量。精确子问题可用分支界定，但计算成本高。\n\n2）启发式生成（推荐用于规模较大实例）：采用分层启发式（strip-first heuristic）：先按item宽度w_i对需求降序分组；对每一宽度族（对应可能的stripe高度），使用一维装箱（First Fit Decreasing, Best Fit）将其按长度l_i装入若干stacks，每个stack允许放入的长度总和 ≤ PL；得到若干stacks后，将若干stacks以stripe高度叠加直到stripe高度达到PW或不再能放置；如果出现空隙，可尝试把宽度相同但长度不同的item混合安排或采用“stripe拆分”策略。此启发式可快速生成大量可行模式，质量优于简单矩形打包的启发式，并能满足三阶段guillotine结构。\n\n3）子问题对偶检验：给定对偶价 π_i（主问题松弛双变量），子问题目标为最大化 sum_i π_i * q_{p,i} - 1（1为使用一片原片的成本），若最大值>0则产生进入主问题的新列。对于启发式生成可近似求解该收益并选取收益高的模式加入主问题。\n\n五、算法实现框架（可并行化与分层）\n步骤A（数据预处理）：检查并展开d_i，合并尺寸相同且材质相同的item为类型以减少维度；若允许旋转，则将每种item视为两种（旋转或不旋转），并把旋转变量 r_i 限制在每种item只能取一方向（在主问题中通过q_{p,i}体现，或在模式生成中处理）。\n步骤B（初始化模式池）：对每种材质，使用启发式strip-first为整个需求生成若干初始模式（保证覆盖所有item至少一次）；计算初始上界 U0 = sum_p y_p from greedy.\n步骤C（列生成主循环）：以主问题的LP松弛求解得到对偶价 π，针对每一材质分别求解子问题（列生成）以产生收益>0的模式；把新模式加入主问题，重复直到无正收益列。此时解为LP下界；若要求整数解，可执行分支定价（branch-and-price）；若时间受限，则对IP（整数化）用启发式如掩码分配或对LP解进行后续整数化（求解MIP with current columns）。\n步骤D（子问题2特有）：组批分配b_{o,b}与每批模式选择交替优化。先用启发式将订单按材质/尺寸相似度/面积打箱生成初始批次（例如基于聚类或First Fit按面积与item数上限），然后对每个批次调用子问题1的列生成来最小化每批所需原片数，得到整体上界。接着采用局部搜索（订单互换、订单移动、批次合并/拆分）评估是否能降低总片数，局部搜索中每次批次调整触发对应批次的排样重新优化（快速启发式或局部列生成）。这里推荐用模拟退火或禁忌搜索来跳出局部最优。为加速，可对b_{o,b}做连续松弛得到对偶信息，再用启发式回收为整数解。\n\n六、实际算法复杂度与工程实现建议\n列生成主循环每次需要求解LP（变量数量等于当前模式数，约束数为产品种类数），以及若干子问题（每种材质单独）。LP求解可用商用解算器（CPLEX/Gurobi）或开源（CBC/GLPK）实现。子问题若用启发式，其复杂度为O(n log n)左右（主要为排序与一维装箱），可扩展到数千条目。分支定价在难实例中成本高，实际工程中建议在时间受限情况下采用“启发式列生成 + 局部搜索”策略，得到优质近似解。并行化容易实现：每种材质或每个批次的模式生成可以并行，并行程度受CPU核心数限制。为保证结果质量，需同时计算松弛下界（例如面积下界 LB_area = ceil(sum_i d_i * l_i * w_i / A_plate)）与一维长度/宽度下界（按每种宽度类别的最少片数），用于评估启发式解距离最优的差距。\n\n七、模型的若干数学细节展示（关键方程汇总）\n（1）主问题（子问题1）：\nminimize sum_{p∈P} y_p\nsubject to for all i∈I: sum_{p∈P} q_{p,i} * y_p ≥ d_i\ny_p ∈ Z_{\\ge 0}\n（2）主问题（子问题2）：假定分批索引 b\nminimize sum_{b} sum_{p∈P} x_{p,b}\nsubject to for all o∈O: sum_{b} b_{o,b} = 1\nfor all b: sum_{o} b_{o,b} * num_items(o) ≤ max_item_num\nfor all b: sum_{o} b_{o,b} * area_of_order(o) ≤ max_item_area\nfor all i: sum_{b} sum_{p∈P_{mat(i)}} q_{p,i} * x_{p,b} ≥ d_i\nb_{o,b} ∈ {0,1}, x_{p,b} ∈ Z_{\\ge 0}\n（3）子问题（模式生成的对偶目标，给定对偶价 π_i）：\nmax_{feasible pattern p} (sum_{i} π_i * q_{p,i} - 1)\n若最大值>0则生成模式p进入主问题。\n\n八、数值求解策略与工程实现细节\n1）实现语言建议：Python + Gurobi/CPLEX API 或者 C++ + Gurobi。列生成框架可用Python封装（pulp/pyomo作LP接口）并把子问题的启发式用Cython或纯Python实现以便快速迭代；若算例较大，关键子模块（装箱DP）用C++实现并通过接口调用。\n2）启发式模式生成细节：对每个材质，按常见宽度值分组，按宽度族对需求按长度降序排序，然后用First-Fit-Decreasing（FFD）将长度放入capacity=PL的一维箱（每个箱即“stack”）。每个stack对应一个长度序列且高度等于该宽度。把若干stack按高度堆叠（stripe个数为 floor(PW / width)），剩余空间尝试用次小宽度的stack填补（尝试不同组合以提升利用率）。每种组合生成一个模式p并计算收益。\n\n3）组批启发式（子问题2）：初始批次按材质分层，材质内再按面积或item数 First Fit 打箱；对每个批次执行下层模式生成求最少片数；对结果采用局部搜索（尝试移动单个订单到另一个批次检查收益变化、交换两个订单、合并相近小批次）并在每次操作后仅对受影响的批次重新求解排样（避免全局重算以提速）。\n\n4）并行与缓存：将已经生成的有效模式缓存并供其它批次/实例复用；模式生成可基于对偶价并行化；LP求解可利用多线程执行，若使用商业求解器可显著加速分支定价阶段。\n\n九、下界与方案评估\n建议同时计算多种下界用于评估启发式上界的质量：总面积下界 LB_area；按每种宽度的下界 LB_width = sum_{w in widths} ceil(sum_{i with width w} d_i * l_i * w / A_plate)（粗略）；此外可用一维PL长度向下界（对每一宽度族，至少需要 ceil(sum lengths / PL) 个stacks，然后根据stripe高度限制得到下界）。以这些下界衡量原片数比率并报告板材利用率 = used_item_area / (sum_p x_{p} * A_plate)。\n\n十、鲁棒性、敏感性与扩展\n1）对不确定性：当订单动态到达或需求不确定时，采用滚动时域优化：在短时窗内求解上述问题并保留部分原片空白或模式供未来使用（保留策略），并以样本平均或鲁棒约束对未来场景进行优化（比如把多场景需求约束并加入惩罚项）。\n2）加入更多现实约束：锯缝宽度可在模式生成时作为额外的占用长度/高度增量；板材方向性（单方向纹理）可通过限制旋转变量或在模式生成中禁用某些旋转来实现；若存在多个原片规格，模式生成子问题要在不同PL,PW下并行生成并在主问题中比较成本。\n3）长期可持续性：鼓励将残料（边角料）作为资源在后续批次再利用，可把残料建模为库存项并在跨批次模式生成时允许使用，从而提升整体长期利用率。该扩展可转化为一个多期库存-裁剪问题，适用动态规划或滚动优化。\n4）可量化敏感性分析：对关键参数（max_item_area、max_item_num、允许旋转与否、锯缝宽）做单因素或多因素敏感性分析，记录原片数、利用率与计算时间的变化；对启发式算法的关键阈值（如排序策略）做稳健性测试。\n\n十一、验证、输出与可视化\n程序输出满足题目规定的两个CSV文件：cut_program.csv（列出每张原片上每个产品id的(x,y)左下角坐标与方向尺寸；这需要在下层模式生成中保留每个模式的具体几何布局以便实例化y_p次数时复制坐标并为每个复制的原片赋编号），sum_order.csv（在原有产品项数据基础上增加批次号生成）。为验证模型正确性，程序应计算并输出：总原片数、总产品面积、利用率、每批次的原片分配概貌、LP下界与启发式上界、各类下界与差距。可视化方面建议绘制每张原片的二维布局图（不同item用不同颜色与标签），并对比初始启发式与最终优化方案。\n\n十二、潜在改进方向与研究价值\n本框架把几何复杂性放在可控的模式生成子问题中，从理论上可通过更强的子问题求解器（如针对guillotine的精确DP或列举所有可行切割树的算法）逐渐提高全局解的质量，或通过branch-and-price获得证实最优解。未来扩展可以包括：把组批与排样做更紧耦合的联合优化（例如在列生成时引入批次选择成本或对订单的分配变量到列中进行内嵌），引入多级库存和残料再利用建模，引入机器能力与切割序列（制造节拍）约束形成带时间窗口的调度问题，以及将机器学习用于加速模式生成（例如训练一个学习器预测“高收益”模式结构，从而快速生成候选模式）。此外，面向工业部署时建议将此优化模块封装为可迭代运行的服务，结合MES/WMS系统实现实时再优化与结果可视化。\n\n结语：本模型在理论上有严谨的列生成主从结构、在工程上提供可实现的启发式备选路径，既能保证在小规模/关键子问题上获得较强最优性证据，也为大规模工业实例提供实用的近优解与可解释的排样方案。实施时可通过并行化、缓存与局部搜索策略在限定时间内获取高质量解决方案，且模型易于扩展以包含更多实际生产约束与不确定性处理。",
  "task_descriptions": [
    "子任务1（数据预处理、基本假设与符号化建模准备）应当独立完成并输出一套用于后续建模的、结构化且经校验的输入数据与符号说明：具体工作步骤为——（1）数据读取与校验：用可复现脚本（建议 Python + pandas/numpy）读取给定 CSV 文件，逐字段校验数据类型、单位（确认长度/宽度单位为 mm）、缺失值与重复行；对 item_num>1 的记录根据需要提供两种可选处理：按需展开为多条单位条目（每条 d_i=1）或保留为一条并设 d_i=item_num，同时记录两种模式的文件；检查并剔除或标记异常值（负值、零值、尺寸任一维度大于原片 PL/PW 的项应报错或作特殊处理）；（2）明确并记录工程假设：强制设定齐头切（guillotine）、最多三阶段切割、精确排样、单一原片规格 PL=2440 mm、PW=1220 mm、忽略锯缝宽度，以及一个可配置的旋转许可标志 rotate_allowed（布尔）；同时约定坐标系：原片左下角为原点，X 轴沿板长 PL 方向，Y 轴沿板宽 PW 方向；（3）标准化与索引化：为每个产品项生成唯一索引 i，产生标准化字段集 {item_id, mat(i)（材质）, ord(i)（所属订单，可为空）, d_i, l_i, w_i, area_i = l_i*w_i, rotate_allowed}，并按材质将项分组；如允许旋转，则在预处理阶段记录两种方向的尺寸候选并标注为同一项的两个方向选项；（4）聚合与降维选项：提供按（材质、长、宽）三元组聚合统计以减少模型变量维度（记录每类的总需求量），同时保留逐单位明细文件以便几何排样使用；（5）几何有效性与离散化准备：计算并输出所有项是否满足 l_i ≤ PL 且 w_i ≤ PW（或在旋转下满足），并生成唯一的宽度集合 W 和长度集合 L（用于后续 stripe/stack 离散化），同时生成按宽度/长度的出现频次分布表；（6）下界与基准量计算：计算总体参数 PL,PW,A_plate=PL*PW、总产品面积 S = Σ_i d_i*area_i、面积下界 LB_area = ceil(S/A_plate) 以及按宽度/长度的粗下界（例如按每一宽度 w 计算所需 stripe 数的下界），并将这些下界写入元数据以供结果评估；（7）输出格式与元数据：生成并保存三份标准化输出文件——（A）详尽条目文件（逐单位或聚合，含索引、材质、订单、d_i、l_i、w_i、area、旋转选项），（B）分材质汇总表（每材质的尺寸类别、总件数与总面积、W/L 列表），（C）元数据 JSON（含 PL,PW,A_plate、max_item_num、max_item_area、rotate_allowed、下界值、字段说明与符号表）；同时给出符号化说明文档，明确定义将用于建模的集合与参数符号（例如 PL,PW,A_plate；集合 I（产品项）、O（订单）、M（材质）；参数 d_i,l_i,w_i,mat(i),ord(i); 以及模型中将使用的布尔/选项参数如 rotate_allowed），以便后续把数据直接映射到 MIP 或列生成算法的变量与约束中；整个子任务必须生成可重复运行的代码、清晰的日志（记录所有校验/异常处理决策）以及用于人工核验的统计摘要表与可选的二维尺寸分布可视化图，以保证数据质量和符号一致性，供后续建模模块直接调用。",
    "子任务2（上层混合整数规划建模与求解）的目标是：以已有的“排样模式”集合P（每一模式p为单张原片上、且只含单一材质mat(p)的可行三阶段齐头切排样方案，已包含对每种产品i的放置容量q_{p,i}、模式占用面积area_p及具体几何布局信息）为输入，构造并求解一个整数规划模型，按批次（batch）把数据集B中的全部订单O分配到若干批次b，并在每个批次内按材质选择并使用若干模式，使得满足所有订单的产品项需求且总用原片数最小；为便于实现，模型须明确使用的输入项为：产品/项集合I（或按订单细化的项集合，含每项的材质mat(i)、所属订单ord(i)、需求量d_{i}、尺寸与面积）、订单集合O（每个订单o提供其包含项集合、订单总项数num_items(o)与总面积area_of_order(o)）、模式集合P（含q_{p,i}、area_p、mat(p)及每模式的坐标布局）、以及参数PL,PW、max_item_num、max_item_area和批次数上界B_max（可设为|O|或ceil(total_area/max_item_area)）；决策变量包括：二元变量 b_{o,b}（若订单o被指派到批次b则为1，且每个订单恰好被分配到一个批次： sum_b b_{o,b} = 1），非负整数变量 x_{p,b}（在批次b中使用模式p的张数，且仅允许当mat(p)等于相应项材质时被用于覆盖该材质的需求），模型目标为最小化总原片数 min ∑_{b} ∑_{p∈P} x_{p,b}；约束集合应至少包含：1) 订单分配约束 sum_b b_{o,b} = 1 ∀o∈O；2) 每批次容量约束 sum_{o} b_{o,b} * num_items(o) ≤ max_item_num 和 sum_{o} b_{o,b} * area_of_order(o) ≤ max_item_area ∀b，保证批次内项数与面积上限；3) 覆盖约束（按批次与材质划分）——对每种产品i及每个批次b，确保该批次中来自对应材质的模式提供的数量覆盖属于该批次的该产品需求： ∑_{p∈P_{mat(i)}} q_{p,i} * x_{p,b} ≥ ∑_{o: i∈order(o)} b_{o,b} * d_{i,o}；4) 模式-材质一致性隐含在P的定义中（即不允许用不同材质的模式覆盖i），以及非负/整型域约束 x_{p,b} ∈ Z_{\\ge0}, b_{o,b} ∈ {0,1}；另外应加入批次可行性修正项（例如禁止无订单却使用模式的浪费变量，或对空批次的剔除约束）以约束解结构。为便于计算与工程实现，模型说明应明确：批次数索引范围b∈{1..B_max}；当模式集合P规模过大时，主问题以列（模式）为列生成的主问题形式求解，其LP松弛可作为下界，整数化可通过直接求解MIP（若P可枚举时）或采用分支定价/启发式整数化（若P以动态生成方式提供）完成；求解工具建议使用商用MIP求解器（如 Gurobi 或 CPLEX）或开源替代，并应输出决策映射：每个被选模式的复制次数x_{p,b}用于实例化具体原片编号并结合模式内的坐标布局生成 cut_program.csv（列出每张原片上每个产品id的 x,y 坐标与方向尺寸），同时把每条产品项记录附加其批次号 b_{o,b} 生成 sum_order.csv。该子任务须明确变量与约束的数学表达、批次数上界设定逻辑、输入P的格式要求（包含q_{p,i}与布局），并说明若干必要实施细节：如何将按批次的覆盖约束与订单分配变量耦合以保证“每份订单当且仅当出现在一个批次中”的严格性、如何通过材质分组限制模式的可用性、以及如何在算例规模增大时采用列生成或启发式对主问题进行可扩展求解。",
    "子任务3 的目标是作为“列生成/模式生成”子模块，独立产生满足三阶段精确齐头切并符合同一 stack 内短边一致约束的可行排样模式集 P，每个模式 p 输出其材质 mat(p)、在该原片上对每种产品 i 的放置数量 q_{p,i}、模式占用面积 area_p、以及完整的几何布局信息（按 stripe→stack→item 层次给出每个 item 的左下角坐标和方向尺寸）以供主问题调用；其输入为：板材规格 PL、PW、允许旋转标志、产品明细（每条记录含 item_id、材质、长 l_i、宽 w_i、需求上限 d_i）以及可选的对偶价向量 π_i（用于列生成的收益评估）；其输出格式为结构化模式记录（包含 stripe/stack 划分和每件的坐标）和若干质量指标（净收益 = Σ_i π_i q_{p,i} − 1、利用率等）。实现范围与步骤包括：1) 预处理——从输入产生离散候选宽度集合 W 和长度集合 L（同时把旋转后的尺寸作为候选），并为每种材质单独处理；2) 精确生成方法（可选，用于小规模或需要高质量列时）——把模式生成子问题形式化为一个整数优化或动态规划问题：决策变量包括为每种候选 stack 类型（定义为某一固定短边高度 h∈W 且沿 PL 方向装入若干件的组合）选择的数量，以及对这些 stack 的组合成 stripe（使得 Σ stripe 高度 ≤ PW）；约束包括每个 stack 内沿 PL 的长度总和 ≤ PL、每个 item 的总放置量 ≤ d_i（或不超过需求上限）、stripe 和 stack 的数量限制以保证最多三阶段切割结构，并以最大化净收益（或在无 π 时最大化放置总面积/利用率）为目标，用商用 MIP（Gurobi/CPLEX）或自定义 DP/分支界定求解并回溯生成具体几何布局；3) 启发式生成方法（推荐用于大规模实例）——采用 strip-first 策略：按候选短边高度分组，对每一高度族用一维装箱启发式（FFD、Best-Fit 或一维背包 DP）沿 PL 方向生成若干 stack（每个 stack 为一个长度序列），然后用贪心或多起始顺序将 stack 按高度堆叠生成若干 stripe 组合形成完整模式；在此过程中实现多种变体以扩大候选模式池（例如不同排序规则、允许把小宽度 stack 填入剩余高度、尝试局部交换/合并/拆分 stacks，或把低频 item 作为 filler），并为每个候选模式计算净收益并仅保留收益高或利用率高的几列；4) 约束处理与可行性验证——所有生成的模式必须通过几何可行性检查（每个 stack 中沿 PL 的项按顺序不重叠且总长 ≤ PL，stripe 高度和堆叠使总高度 ≤ PW），并且模式结构应显式记录以保证能被按三阶段 guillotine 切割序列复现；5) 算法工程细节——支持并行生成（按材质或按候选宽度并行），对已生成模式做缓存与去重，允许在列生成循环中基于当前对偶价向量优先寻求高收益模式（返回多列以提高收敛速度），并提供终止准则（无正净收益、达到最大迭代次数或时间限）；6) 性能提升与可靠性措施——对启发式 stack 生成可用一维 DP 作为子例程以改进单个 stack 的装填率，对关键小实例用精确子方法验证并用于调参，生成的每个模式必须输出完整布局以便主问题直接实例化并写入 cut_program.csv。工具与实现建议：原型可用 Python（pandas, numpy）实现启发式与管控流程，关键密集计算模块（如一维 DP、stack 枚举、几何校验）可用 C/C++ 或 Cython 加速；精确子问题调用 Gurobi/CPLEX 求解器；并提供单元测试例程验证 guillotine 可切割性与布局坐标正确性。",
    "子任务4承担将列生成/模式生成与主问题求解、整数化与后处理串联成一个工程化求解器的职责，其范围包括：从规范化输入（板材规格、max_item_num、max_item_area、按材质/订单/产品项的明细CSV）接收数据，初始化启发式候选模式池，为每个材质和每个初始批次构造可行起始解，随后在一个可控的列生成主循环中交替求解主问题的LP松弛并并行为每个材质或受影响批次运行模式生成子例程以发现正收益新列，直至达到终止准则（例如无正减少成本列、达到时间上限或迭代次数上限）；在LP收敛后对当前列池执行整数化（直接求解MIP或采用启发式整数化），并对得到的整数解通过局部搜索算子（单订单移动、订单交换、合并/拆分批次）进行交替改进——每次局部变动仅对受影响的批次重新调用模式生成与排样求解以减少重复计算；实现细节要求明确并行策略（按材质/批次并行生成模式、并行求解独立子问题）、缓存机制（模式去重与复用、对偶价值变更阈值触发重新生成）、加速手段（用C/C++或Cython实现一维DP与几何校验、使用Gurobi/CPLEX的warm start和多线程功能、对频繁子例程进行向量化）、以及内存与日志管理（记录每次列生成、LP/MIP解、局部搜索改动与收益）。工程接口须定义清晰的输入/输出规范：输入为标准化产品与订单明细、板材参数与算法配置文件（时间限、并发度、启发式参数）；输出为要求格式的 cut_program.csv（每张原片的编号、材质、每个item的左下角坐标与方向尺寸）与 sum_order.csv（每条产品记录附加批次号），并同时导出诊断报告（总原片数、利用率、LP下界、各批次原片分配、每次迭代改进曲线、运行时间分布）。验证与容错机制必须包括几何可行性检查（无重叠、位于版材范围内、stripe/stack/item层次与三阶段guillotine可切割性）、约束满足性检验（每订单恰归属一个批次、批次内项数与面积上限）、以及单元测试套件（模式复现、坐标一致性、CSV读写），并提供可视化模块输出每张原片的二维布局图用于人工核验。终止准则应可配置（时间、迭代、收益阈值），性能统计应记录并返回以便后续敏感性分析，系统应支持参数化扩展接口（例如启用锯缝宽度、多规格原片或残料跨批次再利用）但这些扩展通过明确的输入参数开关控制，不会改变核心求解流程。"
  ]
}