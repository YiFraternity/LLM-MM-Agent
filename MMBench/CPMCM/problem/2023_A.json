{
  "background": "无线局域网（WLAN, wireless local area network）也即Wi-Fi广泛使用，提供低成本、高吞吐和便利的无线通信服务。基本服务集（BSS, basic service set）是WLAN的基本组成部分。处于某一特定覆盖区域内的站点（STA, station）与一个专职管理BSS的无线接入点（AP, access point）组成一个BSS，称STA关联到AP。常见的AP有无线路由器、WiFi热点等，手机、笔记本、物联设备等是STA。AP给STA发送数据叫作下行方向，反之是上行方向，本文将AP和STA统称为节点，每个节点的发送和接收不能同时发生。各节点共享信道，通过载波侦听多址接入/退避（CSMA/CA, carrier sense multi-access and collision avoidance）的机制避免冲突，称为分布式协调功能（DCF, distributed coordination function）。",
  "problem_requirement": "1.1 分布式信道接入和二进制指数退避\nDCF机制提供了一种分布式、基于竞争的信道接入功能。可将每个节点接入信道进行数据传输的过程分为3个阶段，信道可用评估（CCA，clear channel assessment）、随机回退、数据传输。\n（1）CCA：当一个节点打算发送时，首先进行一个固定时长的载波侦听，这个固定时长被称为DCF帧间距（DIFS，DCF inter-frame space），43μs。如果DIFS时段内接收到的信号能量强度（RSSI，received signal strength indication）低于CCA门限（-82dBm），判断信道为空闲，否则，判断信道为繁忙。\n（2）随机回退：信道空闲时，可能有多个节点准备好了数据，为避免碰撞，节点从[0, CW-1]的均匀分布选取一个随机数作为回退数，等待该回退数个时隙长度slotTime（9μs），随机回退时段时长为回退数乘以slotTime。CW被称为竞争窗口（contention window）。如果信道在随机回退时段保持空闲，则节点开始一次数据传输。在随机回退时段节点持续监听信道，如果期间信道变繁忙，则节点将回退暂停，直到信道在一个DIFS时长重新变为空闲，再继续前面没有回退完的时间。\n（3）数据传输：回退到0的节点发送一个数据帧，接收节点成功接收到数据之后等待短帧帧间距（SIFS, Short inter-frame space）16μs后，回复ACK确认帧（32μs）。如果发送节点收到ACK，则数据发送成功。如果发送数据帧没有被接收节点成功接收，或者ACK发送失败，或者ACK没有被发送节点收到，则数据传输失败，发送节点需要在等待超时后重传数据。等待超时时间ACKTimeout为65μs。\n随机回退采用二进制指数退避算法确定回退时间。CW的初始值为CWmin，每次数据传输失败后重传数据帧时，CW翻倍。如果CW达到了CWmax，则保持此值，直到被重置为止。每次数据传输成功时CW重置，开始下一个数据帧的回退。若传输连续失败，重传次数达到r后，数据帧被丢弃，CW重置传输下一个数据帧。可见，重传r次时，无论成功还是失败，CW都会重置。\n1.2 基于Markov chain的DCF机制建模和系统性能分析\n对于单BSS，N个STA给AP发送上行数据，Bianchi（1998）最早基于Markov chain建模。Bianchi模型假设理想信道，不因信道质量差而丢包。当2个及以上节点同时回退到0发送数据时，由于碰撞而丢包。那么信道可能处于三种状态：空闲、成功传输、碰撞，如图1.2所示。将每个状态看作一个虚拟时隙，那么信道在三种虚拟时隙中转化。将退避器所处的阶数和随机回退数用二维Markov chain表示，推导节点在每个虚拟时隙的发送概率τ和发生碰撞的条件概率p，从而评估BSS的吞吐[1]。\n2． WLAN组网中的多BSS建模问题\n节点发送数据后，电磁波信号在自由空间中传播，随着距离的增加，能量衰减越严重。周围节点收到该信号后，根据RSSI是否高于CCA门限，判断信道为忙或闲。一个节点发出信号的RSSI高于CCA门限的区域叫作通信区域，位于该通信区域内的节点与该发送节点互听。随着设备数量、应用类型、网络流量的飞速增长，AP部署日趋高密，如企业办公、工厂、教育场景。如图2.2（a）所示，将信道号为36、44、52、60、149、157的六个信道分配给区域内12个BSS，由于可用信道数有限，不同的BSS复用同一个信道。同频AP（使用相同信道号的AP）之间通信区域存在重叠时，存在相互干扰问题，叫作同频干扰。同频干扰是WLAN组网最显著的干扰问题，本题不考虑异频干扰的情况。家庭或宿舍等单BSS场景中，STA距离AP较近，RSSI较强，互听，假设理想信道，不会因信道质量差而丢包，只有在2个及以上STA同时发送数据时导致碰撞而丢包。而在教学区等场景，同频多BSS场景的情况更复杂。\n问题1:\n假设AP发送包的载荷长度为1500Bytes（1Bytes = 8bits），PHY头时长为13.6μs，MAC头为30Bytes，MAC头和有效载荷采用物理层速率455.8Mbps发送。AP之间的RSSI为-70dBm。大部分时候只有一个AP能够接入信道，数据传输一定成功。当两个AP同时回退到0而同时发送数据时，存在同频干扰。假设并发时的SIR较低，导致两个AP的数据传输都失败。请对该2 BSS系统进行建模，用数值分析方法求解，评估系统的吞吐。（参数参考附录4，可编写仿真器验证模型精确度）\n问题2\n假设两个AP采用物理层速率275.3Mbps发送数据，并发时两个终端接收到数据的SIR较高，两个AP的数据传输都能成功。其他条件同问题1。请对该2 BSS系统进行建模，用数值分析方法求解，评估系统的吞吐。（参数参考附录4，可编写仿真器验证模型精确度）\n2.2 两BSS不互听\n在AP密集部署时，同频AP之间的距离远，AP间RSSI低于CCA门限，不互听。AP认为信道空闲，因此总是在退避和发送数据。这是Wi-Fi里常见的隐藏节点问题，详见附录。可以预见的是，有很大概率出现二者同时或先后开始发送数据的情况。接收机解调信号时，PHY头的前面部分码元用于Wi-Fi信号识别、频率纠错、定时等功能，叫作前导（Preamble）。如图2.3所示，当信号包先到时，接收机先解信号包的Preamble并锁定，干扰包被视为干扰，信号包是否接收成功由SIR决定；当干扰包先到时，接收机先锁定到干扰包的Preamble，错过信号包的Preamble，导致信号包无法解调。小信号屏蔽算法能有效解决这个问题，因为信号包RSSI一般大于邻小区的干扰包，接收机在信号包到达时转为锁定RSSI更大的信号包，此时信号包能否接收成功同样也由SIR决定。由此可以得知，在SIR比较小的情况下，如果信号包和干扰包在时间上有如图2.3的交叠时，一定会导致本次传输的失败。\n问题3\n假设AP间RSSI为-90dBm，AP发送包的载荷长度为1500Bytes，PHY头时长为13.6μs，MAC头为30Bytes，MAC头和载荷采用物理层速率455.8Mbps发送。Bianchi模型假设理想信道，实际上，无线传输环境是复杂多变的，当有遮挡物或者人走动时，无线信道都可能会快速发生比较大的变化。实测发现，当仅有一个AP发送数据时，即便不存在邻BSS干扰，也会有10%以内不同程度的丢包。假设因信道质量导致的丢包率。当两个AP发包在时间上有交叠时，假设SIR比较小，会导致两个AP的发包均失败。请对该2 BSS系统进行建模，尽量用数值分析方法求解，评估系统的吞吐。（参数参考附录4和6，可编写仿真器验证模型精确度）\n2.3 三BSS\n问题4\n考虑3BSS场景，如图2.2（c）所示，其中AP1与AP2之间，AP2与AP3之间RSSI均为-70dBm，AP1与AP3之间RSSI为-96dBm。该场景中，AP1与AP3不互听，AP2与两者都互听，可以预见的是，AP2的发送机会被AP1和AP3挤占。AP1与AP3由于不互听可能同时或先后发送数据。假设三个AP发送包的载荷长度为1500Bytes，PHY头时长为13.6μs，MAC头为30Bytes，MAC头和载荷采用物理层速率455.8Mbps发送。假设AP1和AP3发包时间交叠时，SIR较大，两者发送均成功。请对该3BSS系统进行建模，尽量用数值分析方法求解，评估系统的吞吐。（参数参考附录4和6，可编写仿真器验证模型精确度）",
  "dataset_path": [],
  "dataset_description": {},
  "variable_description": [],
  "addendum": "缩略语\n附录\n随机回退\n随机回退采用二进制指数退避算法确定回退时间。CW的初始值为CWmin，每次数据传输失败后进行重传时，CW翻倍。如果CW达到了CWmax，则保持此值，直到被重置为止。每次数据传输成功时CW重置，开始下一个数据帧的回退。若传输连续失败，重传次数达到r后，数据帧被丢弃，CW重置传输下一个数据帧。可见，重传r次时，无论成功还是失败，CW都会重置。\n图3.1以三个节点为例说明。图中CW表示当前阶竞争窗口大小，BO表示随机回退过程时退避计数器从[0, CW-1]随机选取的初始值。三个节点的CWmin分别是8、16、32。开始时，Station c在发送数据，信道繁忙，数据发送完成后，退避计数器重置。Station a、b和c持续侦听信道DIFS时长，信道被检测为空闲，三者分别开始随机回退，都处于第0阶，竞争窗为[0, CWmin - 1]。Station a从[0,7]选择了一个随机数7，需要回退7个slotTime；Station b则从[0, 15]选择了随机数12回退；Station c从[0,31]选择了随机数16回退；显然，Station a最先回退到0，抢占到信道，开始一次数据发送，此时，Station b和c在其回退过程中由于侦听到信道繁忙，随机回退暂停。当Station a发送成功后，其竞争窗口重置，信道持续DIFS时长空闲后，Station a重新从[0,7]选择随机数5回退，Station b和c接着暂停前的回退数继续回退。本次Station a和b同时回退到0，同时发送数据，由于冲突导致发送失败，接收节点将不会回复ACK，Station a和b在等待ACKTimeout后判断数据发送失败，进行重传，将竞争窗翻倍，再次侦听信道DIFS时长判断信道空闲后，Station a从[0,15]选择随机数11回退，Station b则从[0,31]选择随机数9回退。需要注意的是，图3.1中的一次传输（Tx，transmission）包含了发送一个数据包和接收一个ACK，一次collision包含了发送一个数据包和等待ACKTimeout时长。帧序列如图3.2所示，一个数据帧包括PHY头、MAC头和有效载荷payload。\n2 Bianchi模型\n令b(t)和s(t)代表t时刻一个节点退避随机过程的退避计数和退避阶数，这里的t是一个离散的虚拟时隙的开始时刻。用i表示一个数据的发送次数，也叫作阶数，r为最大重传次数，m是最大退避阶数，则CW可用下式表示：\n                            （3）\n二维{b(t), s(t)}随机过程可以用二维Markov chain表示，如图3.3所示。 代表二维Markov chain的稳态解，i∈[0, m], k∈[0, Wi-1]。\n该Markov chain的任意状态之间可达，是不可约的。任意状态到另一状态的步长不存在周期。从任何状态出发，都能到达另一状态，具有常返性。因此该二进制退避过程的非周期不可约Markov chain具有稳态解，且所有稳态的概率之和为1。\n令表示Markov chain的稳态解，从图3.3中可以看出，对于一次发送失败的情况，状态到状态的步长包括，，，…………，共Wi种，求和可得，\n = * ( p * 1/Wi + p * 1/Wi * 1 + … + p * 1/Wi * 1 Wi -1) = p * ，即，\n                        (5)\n同理，对于任一状态，若0 < i < r，则是从一次发送失败的状态，通过竞争窗口加倍之后转移过来的。若i = 0，则是从任一阶发送成功，或达到重传次数限制后转移过来的。因此有，\n                                    (6)\n将式（5）代入式（6），可得，\n                                 (7)\n根据Markov chain的性质，所有稳态的概率之和为1，因此有，\n                     (8)\n根据式（3）和（8），可以求得：\n        (9)\n节点随机回退到0时发送数据，因此节点在一个时隙发送数据帧的概率为\n                                       (10)\n传输数据发生冲突时，至少有另外一个节点也传输数据，共有N个节点，因此条件碰撞概率p可表示为\n                                        (11)\n    式（10）和（11）是关于p和τ的二元非线性方程，联立可求解。\n3 隐藏节点问题\n隐藏节点是指在目的接收节点的通信区域内，而在其他发送节点的通信区域外的节点，这样由于和其他的发送节点互相听不到，会导致意外的同时传输而冲突的情况。如图3.4（a）所示，单BSS场景中，STA1和STA2分别能够与AP互听，而STA1和STA2相距较远。STA1给AP发送上行数据时，随着距离的增加，信号衰减严重，STA2接收到该信号的RSSI低于信道监听CCA门限，STA2不在STA 1的通信范围内，STA2将无法感知到对方在给AP发送数据，判断信道为闲，因此，二者可能会同时或相继给AP发送数据，在接收节点AP处，来自STA1和STA2的电磁波信号混叠，AP无法正确解码，导致数据发送失败。隐藏节点问题是由CSMA/CA机制所引起的。图3.4（b）是两BSS场景，同理，由于AP1和AP2相距较远，分别不在对方的通信区域，因此可能会同时或相继给各自关联的STA发送数据。与单BSS不同的是，接收节点有两个，接收成功与否，与SIR有关。因为，当信号包先到时，接收机锁定Preamble，干扰包被视为干扰，SIR高则接收成功，否则失败；当干扰包先到时，接收机先锁定干扰包的Preamble，导致错过信号包的Preamble，则一定接收失败。\n4 通用参数列表\n5 发包时长计算公式\n6 问题3和4参数\n    改变竞争窗口和最大重传次数\n参考文献\n[1] Bianchi Giuseppe. IEEE 802.11-Saturation Throughput Analysis [J]. IEEE Communications Letters, 1998, 2(12):318-320.\n[2] P. Chatzimisios, V. Vitsas and A. C. Boucouvalas, \"Throughput and delay analysis of IEEE 802.11 protocol,\" Proceedings 3rd IEEE International Workshop on System-on-Chip for Real-Time Applications, 2002, pp. 168-174, doi: 10.1109/IWNA.2002.1241355.\n[3] Hung, Fu-Yi, and Ivan Marsic. \"Performance analysis of the IEEE 802.11 DCF in the presence of the hidden stations.\" Computer Networks 54.15 (2010): 2674-2687.\n[4] D. R. Chen and Y. J. Zhang, \"Is Dynamic Backoff Effective for Multi-Rate WLANs?\" in IEEE Communications Letters, vol. 11, no. 8, pp. 647-649, August 2007"
}