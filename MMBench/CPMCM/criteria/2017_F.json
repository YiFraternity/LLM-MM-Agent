{
  "task_id": "2017_F",
  "problem": "请完成以下几项任务：\n\n发展城市地下物流网络的两个直接目标：一是缓解交通拥堵直至交通畅通，至少基本畅通；二是降低物流成本。\n\n1. **地下物流节点选择**：根据你们的观点和该区域的实际情况建立该区域节点选择模型，确定该区域地下物流网络节点群。\n\n计算结果需要但不限于提交：一、二级节点数及位置、各节点的服务范围（经该节点出、入地面货物的起或讫点形成区域）、各节点实际货运量、各一级节点的转运率。\n\n- **（1）交通拥堵指数取值范围为 0 至 10，每 2 个数为一等级，分别对应“0-2 畅通”、“2-4 基本畅通”、“4-6 轻度拥堵”、“6-8 中度拥堵”、“8-10 严重拥堵”五个级别，数值越高，表明交通拥堵状况越严重。由于该地区非人口高度密集区，可以近似认为区域交通拥堵指数与 OD 数据反映出来的区域总货运量（进、出之和）成正比，考虑到比例关系给出的指数最高值可以大于 10。（为简化计算，拥堵指数计算仅根据货运量）。**\n\n- **（2）一级节点的转运率（\\(\\varphi\\)）：从物流园区经由最近的一级节点转运至其他所有一级节点的货物量占该物流园区总出货量的百分比，称为该一级节点的转运率。由于需要更换运输车辆，在满足运输要求前提下，转运率低可减少工作量。**\n\n- **（3）考虑到部分区域货运量与面积之比过小，若节点覆盖了某区域中心点即可视为对该区域进行了覆盖。**\n\n- **（4）所有节点的服务半径在 3 公里范围内自由选择，节点间距离不受限制。**\n\n- **（5）货物从二级节点至地面后采用人力或小型车辆在节点服务区域内进行运输，可认为不影响交通。**\n\n- **（6）进出 4 个物流园区的货物尽最大可能放入地下运输，区域内部的货物根据拥堵情况自行考虑。**\n\n2. **地下通道网络设计**：请你们在地下物流网络节点群的基础上选择合适的地下路线以建立该区域的“地下物流系统”网络。在转运率变化不大的情况下，若考虑优化网络，可适当调整一、二级节点位置。除园区至一级节点的地下通道外其他地下通道均采用5吨的地下运输车辆。\n\n计算结果需要但不限于提交：网络构成（节点及通道位置）；各节点实际货运量；各级通道的位置和实际流量。\n\n- 地下节点及通道内的货物每天要清仓。\n- 每两个相邻节点间地下物流通道双向尺寸一致，以单向流量较大的为设计原则。\n- 要求总成本最小。每天的总成本由货物的运输成本和地下物流隧道与节点的折旧构成。\n\n假设每吨货每公里的平均运输成本始终相等，约为1元/吨·公里（已计入车辆和设备折旧），与所经过的隧道尺寸无关。\n\n地下物流隧道与节点的建设成本为：双向四轨（双洞）（10吨）造价5亿元/公里，双向双轨（双洞）（10吨）造价4亿元/公里，双向四轨（双洞）（5吨）造价3.5亿元/公里，双向双轨（双洞）（5吨）造价3亿元/公里，一级、二级节点的建设成本分别为1.5亿元/个、1亿元/个；通道与节点的设计年限100年，年综合折旧率均为1\\%。\n\n- 不考虑物流园区的建设及园区内的地下节点建设，但从园区出发的通道长度需要计入总成本。\n\n3. 网络改进：以上是分步设计网络，并未从全局出发，根据你们对运行情况的仿真，上面得到的网络有无修改的必要？能否通过增加、减少节点的个数，调整节点的位置或级别，增加、减少、改变路径的方法缩短货物运输总里程（同时节省运输时间），降低运输成本。\n\n进一步从增强 ULS 的抗风险能力（如某通道中断，某方向货运量激增）考虑，需要对第二问的 ULS 作怎样的改动？\n\n4. 建设时序与动态优化：“地下物流系统”造价高，风险大，改建困难，所以应做好顶层设计，如果希望考虑满足该市近30年内的交通需求（可以认为需求量每年呈5\\%增长）并根据建设进度分八年完成“地下物流网络系统”的建设（每年可建设道路长度大致相等），请给出该市“地下物流系统”网络各线路的建设时序及演进过程，与你在第三题中设置的网络有什么差别？并比较优劣。\n\n- 图5为地下物流整体网络可能的演进示意。\n- 随着需求量逐年增长，你在第三题中设计的网络是否仍然可行？何时班次和每班车的车厢节数达到满载，如何进行扩容处理？例如：建设期考虑增加线网容量、增设节点等。",
  "subtask": {
    "1": {
      "subtask": "子任务一的目标是为后续节点选址与网络优化提供完整、经校验且可直接输入优化模型的基础数据集与参数表，并明确用于把“地面货运量-拥堵指数-系统替代量”之间建立定量映射的假设与标量公式；其输出应包括：区域集合R（每一区域编号、名称、中心点经纬度或平面坐标、面积）、经清洗的OD矩阵D_rs（单位：吨/天，含数据来源与采集日期）、四个物流园区P的标识与日出入货总量、候选节点集（一级、二级候选位置默认为各区域中心点或工程许可的备选坐标）、节点与节点/区域间的欧氏与道路距离矩阵（dist_ij，以公里为单位，说明测距方法并同时提供GIS线路长度和近似欧氏长度以备选用）、可建弧集合A（节点对列表并标注是否存在地质/管线冲突或不可建限制）、每弧预估工程长度dist_a与可行性标志；车辆与运行参数表（车节数可选4–8、每节车厢载重5/10吨、列车运行速度13.5 m/s、加减速1 m/s^2、转弯半径70–80 m、每节点最小发车间隔12分钟、日运营时长18小时、单向日最大发班N_train_day_dir=90等）；通道与节点工程造价与折旧参数（双向四轨/双向双轨、5/10吨对应造价5.0e8/4.0e8/3.5e8/3.0e8元/公里；一级节点1.5e8元/个、二级节点1.0e8元/个；年综合折旧率1%，并换算为日折旧率δd=0.01/365）；运营费用参数（运输变动成本c_truck=1元/吨·公里，已含车辆折旧）及其它常数（节点服务半径上限r_serv_max=3 km，覆盖规则：若节点服务半径覆盖区域中心点则该区域视为被覆盖）；数据处理和校验步骤应包括：统一单位与时间尺度、剔除或标注异常OD值与缺失值并说明插补方法、按区域面积与货运密度计算基本统计量、生成并验证距离矩阵（优先采用GIS道路距离，若不可得则用投影平面欧氏近似并记录误差界限）；拥堵映射的建立步骤需明确：采用线性映射CI = gamma * G_ground + CI_nonfreight，其中G_ground为未被地下替代的地面货运总量（吨/天）；说明gamma与CI_nonfreight的估计方法（优先用历史路网实测拥堵指数与同期地面货运量做回归校准，若历史数据缺失则提供合理区间并定义情景值），并据此计算为达到“基本畅通”CI≤4所需地下替代量S_needed = max(0, (G_total - (4 - CI_nonfreight)/gamma))；同时提供节点与弧的理论日能力计算公式（单班运量Q_a = c_a * vcap_t，弧单向日容量Cap_a_dir = tracks_per_dir_t * N_train_day_dir * Q_a，弧日合计容量Cap_a = 2 * Cap_a_dir），以及用于后续约束的衍生参数表（每类通道与编组下的Q_a、Cap_a_dir、单位折旧日成本等）。明确所需外部数据源与工具：GIS数据（道路网络、地形、地下管线权属）、历史交通拥堵与货运统计（用于gamma校准）、区域中心坐标与行政边界；建议使用的软件和库包括QGIS/ArcGIS进行空间处理、Python（pandas、numpy、geopandas、shapely、networkx）或R进行数据清洗与矩阵构建，并以CSV/GeoJSON和Excel格式输出标准化数据表；最终交付物应为一套可机读的数据文件（R、D_rs、dist矩阵、候选节点列表、A弧清单、参数表）与一页“参数与假设说明书”（包括所有公式、单位、估计方法、不确定性区间及校准方法），以便后续模型直接调用且能追溯每一项数值来源与处理方法。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并校验一套可直接用于后续网络优化的基础数据与参数表，并拟合/设定地面货运量-拥堵指数-地下替代量的线性映射公式以评估所需替代量",
          "expected_output": "机读数据文件与参数报表：R 区域表、经清洗 OD 矩阵 D_rs、物流园区 P 及日出入量、候选节点清单、dist_ij 欧氏/道路距离矩阵、可建弧集合 A 与 dist_a 及可行性标志、车辆与运行参数表、造价与折旧参数、运营成本参数、派生容量参数表、参数与假设说明书（含公式与校准方法）",
          "key_inputs_constraints": "输入：区域集合R（编号/名称/中心坐标/面积）、原始OD数据（吨/天，来源与日期）、4个物流园区P及日出入量、道路与GIS数据、地下管线/地质限制、车辆运行参数、造价与折旧。约束：单位统一（距离km、时间天、成本元）、服务半径≤3km、N_train_day_dir=90、速度13.5 m/s、加减速1 m/s^2、转弯半径70–80 m、年折旧率1%并换算日δd=0.01/365、运输成本1元/吨·公里。前置：数据清洗与缺失/异常标注与插补；距离测算需同时提供GIS道路距离与欧氏近似及误差界限。",
          "modeling_type": "评价+拟合+仿真",
          "role_in_pipeline": "作为后续节点选址与网络优化前的数据准备与参数定标环节；前序依赖原始GIS/OD/造价与运行参数数据采集与清洗；后序任务为节点选择优化、通道布局与容量约束求解、网络改进与演进仿真。",
          "assumptions": "若缺历史拥堵-货运量数据，则以情景设定gamma与CI_nonfreight区间并记录；若道路距离不可得则采用投影平面欧氏距离并给出误差上界；候选节点默认各区域中心点与工程许可备选坐标。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确“地面货运量-拥堵指数-地下替代量”线性映射拟合/设定任务",
              "description": "是否将CI = gamma * G_ground + CI_nonfreight作为核心关系并识别其用于评估S_needed与后续优化约束的作用",
              "score": 35,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：给出公式与变量含义及用途；中分：提到CI与G_ground相关但未落到公式；低分：未识别该映射或混淆对象"
            },
            {
              "sub_criteria": "识别基础数据集需求与可机读输出要求",
              "description": "是否完整覆盖R、D_rs、P、候选节点、dist矩阵、A弧清单、参数表与说明书的可机读交付",
              "score": 35,
              "evaluation_focus": "范围覆盖",
              "scoring_hint": "高分：逐项列出并与后续模型接口对应；中分：缺少1–2项；低分：只笼统描述数据准备"
            },
            {
              "sub_criteria": "约束与单位统一需求识别",
              "description": "是否明确单位/时间尺度统一（km/天/元）、服务半径≤3km、N_train_day_dir=90等硬约束",
              "score": 30,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：枚举关键约束及其影响；中分：提到单位统一但缺关键数值；低分：无单位与约束意识"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "精确复述输出形态（CSV/GeoJSON/参数说明书）",
              "description": "是否将输出格式与文件清单清晰转述，含dist欧氏/道路两版与A可行性标志",
              "score": 30,
              "evaluation_focus": "需求转译",
              "scoring_hint": "高分：说明字段与格式；中分：仅列类型不含格式；低分：未复述或模糊"
            },
            {
              "sub_criteria": "映射目标与S_needed计算复述",
              "description": "准确阐述CI阈值4对应“基本畅通”并给出S_needed = max(0,(G_total-(4-CI_nonfreight)/gamma))",
              "score": 40,
              "evaluation_focus": "数理复述",
              "scoring_hint": "高分：给出完整公式与阈值含义；中分：给出思路无公式或错误阈值；低分：未提S_needed"
            },
            {
              "sub_criteria": "能力与派生参数复述",
              "description": "是否复述Q_a、Cap_a_dir、Cap_a与N_train_day_dir、tracks_per_dir_t、载重的关系",
              "score": 30,
              "evaluation_focus": "公式复述",
              "scoring_hint": "高分：三式齐全并变量清晰；中分：缺少其一；低分：无容量公式"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "gamma与CI_nonfreight校准/情景设定假设",
              "description": "给出回归校准优先策略与无历史数据时的合理区间/情景值，并记录不确定性",
              "score": 35,
              "evaluation_focus": "参数设定",
              "scoring_hint": "高分：描述数据源、回归方法或情景范围；中分：给出区间无来源；低分：固定数值且无依据"
            },
            {
              "sub_criteria": "距离测算与误差界限假设",
              "description": "说明GIS道路距离优先，缺失时用欧氏近似并给出误差上界或比例系数",
              "score": 25,
              "evaluation_focus": "测度假设",
              "scoring_hint": "高分：量化误差阈或校正系数；中分：仅口头说明替代；低分：未区分两者"
            },
            {
              "sub_criteria": "覆盖规则与候选节点设定",
              "description": "采用服务半径≤3km且覆盖区域中心点即视为覆盖，候选节点默认区域中心点/许可坐标",
              "score": 20,
              "evaluation_focus": "规则设定",
              "scoring_hint": "高分：清楚列明并用于后续数据生成；中分：提到半径未说明中心点判定；低分：无覆盖规则"
            },
            {
              "sub_criteria": "容量与运营参数固定值假设",
              "description": "明确N_train_day_dir=90、速度13.5m/s、加减速1m/s^2、编组4–8节与5/10吨车厢取值策略",
              "score": 20,
              "evaluation_focus": "运营假设",
              "scoring_hint": "高分：说明默认值与情景切换；中分：罗列值无使用说明；低分：遗漏关键参数"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "数据结构化与矩阵构建",
              "description": "构建R、D_rs、dist_ij（欧氏/道路）、A弧、参数表的数据模式与字段字典",
              "score": 30,
              "evaluation_focus": "数据建模",
              "scoring_hint": "高分：字段/单位/主键关系完整；中分：部分字段缺单位；低分：无清晰结构"
            },
            {
              "sub_criteria": "拥堵映射与S_needed公式化",
              "description": "形式化CI映射与S_needed推导并定义变量来源与更新频率",
              "score": 30,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：可直接计算且可替换情景；中分：仅给口述关系；低分：无可计算表达"
            },
            {
              "sub_criteria": "容量与折旧参数派生",
              "description": "给出Q_a、Cap_a_dir、Cap_a与日折旧δd、单位折旧日成本的计算与表格化",
              "score": 25,
              "evaluation_focus": "派生参数",
              "scoring_hint": "高分：形成按通道类别与编组的参数表；中分：仅公式无结果表；低分：遗漏折旧或容量"
            },
            {
              "sub_criteria": "可行性标志与约束编码",
              "description": "在A中编码地质/管线冲突与不可建限制，服务半径≤3km约束生成覆盖矩阵",
              "score": 15,
              "evaluation_focus": "约束编码",
              "scoring_hint": "高分：二元标志与原因字段；中分：仅可行/不可行；低分：未编码"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数据清洗与插补流程求解化",
              "description": "实施异常检测、缺失标注与插补方法（如比例缩放/时序均值），并输出标记列",
              "score": 40,
              "evaluation_focus": "数据处理",
              "scoring_hint": "高分：给规则与阈值并复现性强；中分：描述方法无参数；低分：未处理缺失/异常"
            },
            {
              "sub_criteria": "距离矩阵与误差验证",
              "description": "生成GIS道路距离与欧氏近似并量化两者差异（如MAPE或比例界限）",
              "score": 30,
              "evaluation_focus": "验证计算",
              "scoring_hint": "高分：提供误差指标与阈；中分：简单对比样例；低分：无验证"
            },
            {
              "sub_criteria": "S_needed与容量可行性快速评估",
              "description": "基于当前参数计算S_needed并对典型通道计算Cap_a校验可行性",
              "score": 30,
              "evaluation_focus": "可行性检验",
              "scoring_hint": "高分：数值示例与是否满足CI≤4判断；中分：仅口述结论；低分：未计算"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据管道与可复现脚本（pandas/geopandas/QGIS）",
              "description": "提供从原始到标准化CSV/GeoJSON的可运行脚本与依赖说明",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：一键运行、固定随机种子；中分：零散脚本；低分：无代码或不可运行"
            },
            {
              "sub_criteria": "校验与单元测试",
              "description": "为关键函数（距离计算、插补、容量计算）提供测试与边界用例",
              "score": 25,
              "evaluation_focus": "测试覆盖",
              "scoring_hint": "高分：自动化测试含断言；中分：手工校验说明；低分：无测试"
            },
            {
              "sub_criteria": "参数与情景配置化",
              "description": "gamma、CI_nonfreight、N_train_day_dir等通过配置文件/命令行切换情景",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：支持多情景批处理；中分：代码内硬编码但注释清晰；低分：难以修改"
            },
            {
              "sub_criteria": "输出一致性与schema校验",
              "description": "对R、D_rs、A、dist、参数表进行schema验证（字段/类型/单位）",
              "score": 20,
              "evaluation_focus": "数据质量",
              "scoring_hint": "高分：自动校验报告；中分：人工检查清单；低分：无校验"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "拥堵映射敏感性分析（gamma/CI_nonfreight）",
              "description": "讨论不同gamma与CI_nonfreight情景对S_needed的影响并给出数值区间",
              "score": 35,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：≥3情景与图表/表格；中分：定性讨论；低分：未分析"
            },
            {
              "sub_criteria": "距离近似误差影响评估",
              "description": "评估用欧氏替代道路距离对运输成本与选址的偏差影响",
              "score": 25,
              "evaluation_focus": "误差传播",
              "scoring_hint": "高分：给出偏差百分比或上界；中分：定性说明；低分：忽略影响"
            },
            {
              "sub_criteria": "容量与班次约束一致性核对",
              "description": "检查Cap_a、Q_a是否与N_train_day_dir、编组与载重设定一致，并确认无自相矛盾",
              "score": 20,
              "evaluation_focus": "一致性检查",
              "scoring_hint": "高分：列公式与样例核算；中分：口头声明；低分：出现矛盾数值"
            },
            {
              "sub_criteria": "交付物完整性与可追溯性说明",
              "description": "参数与假设说明书中列明来源、日期、单位、处理与版本号，能追溯每项数值",
              "score": 20,
              "evaluation_focus": "文档质量",
              "scoring_hint": "高分：完整溯源与版本控制；中分：部分溯源；低分：缺乏来源记录"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务 2（节点选址与覆盖模型）旨在基于已清洗的区域网格、OD 货运量、区域中心坐标与工程可行性约束，确定仙林地区一级和二级地下物流节点的最优集合、每个节点的服务半径与区域覆盖分配，并给出每个节点的日处理能力估算和覆盖内实际需承载的货运量以供后续网络设计使用；其范围包括（1）输入准备：读取区域集合 R（编号、中心坐标、面积）、OD 矩阵 D_rs（吨/天）、四个物流园区 P 标识、候选节点集合（初始候选位置至少包含各区域中心，可扩展为区域内备选点或规则网格）、区域间与候选点间的距离矩阵（优先使用 GIS 道路距离，缺失时用投影平面欧氏距离并记录误差），以及工程可建性掩码（地质或地下管线限制）；（2）模型目标：在给定节点建设成本预算或在无预算时以最小化节点建设总成本与覆盖外地面货运未被替代所造成的惩罚之加权和为目标，或在给定最小替代货量要求下最小化建设成本；（3）决策变量与能力计算：二元变量 y_i^1,y_j^2 指示是否在候选点建立一级/二级节点；连续变量 r_i ∈ [0,3]（公里）为该节点服务半径，且约束为若 y_i^k=0 则 r_i=0；分配变量 x_{r,i}^k ∈ {0,1} 表示区域 r 是否由节点 i（级别 k）服务，约束 x_{r,i}^k ≤ y_i^k 且距(r,i) ≤ r_i，区域被覆盖的判定规则为“覆盖该区域中心点即视为覆盖”；节点日处理能力 NodeCap_i 依据车辆和运营参数计算：单班列车运量 Q = c_i * vcap_k（节数 c_i ∈ {4,…,8} 可为设计变量或离散选项；vcap_k =10 吨(一级)或5 吨(二级)），每日单向最大发班 N_train_day_dir=90（每 12 分钟一班、日运营 18 小时），以及节点并发出入线（平台/轨道数，亦可设为离散选项 p_i），得节点理论日处理能力 NodeCap_i = p_i * N_train_day_dir * Q；该能力可作为上界约束以保证节点不被超配；（4）约束要素：每一区域的出入货运量要么分配给某一服务节点（被视为由地下节点处理），要么留在地面；优先约束将园区 P 的出货尽可能分配至某一级节点（可设为硬约束或高权重惩罚项）；一级节点仅允许10吨编组并可作为跨区域主节点，二级节点主要承担末端配送；节点数或总建设成本可加以上限约束以反映财政预算；（5）目标函数与求解方法：把节点建设固定成本（一级1.5亿元/个，二级1.0亿元/个）与对未覆盖货量的拥堵惩罚（基于预先给定的替代量需求或拥堵映射系数 gamma）按权重合并为 MILP 目标，或者在预算约束下最大化被地下替代的货量；模型形式为混合整数线性规划（MILP），当候选点较多或需要连续位置调整时可先用加权覆盖或 p-median 启发式得到候选集合，再用 MILP 精化，或采用 Benders 分解将整数节点决策与连续分配子问题分离求解；（6）数据与工具：建议用 QGIS/ArcGIS 或 geopandas/shapely 计算距离与空间掩码，使用 Python（pandas、numpy、gurobi 或 cplex 接口）或 AMPL/ GAMS 对 MILP 建模并用商用或开源求解器（Gurobi/CPLEX/CBC）求解，必要时用启发式（遗传算法、模拟退火）做规模化搜索；（7）输出成果：一级/二级节点清单与坐标、每节点服务半径 r_i、每节点覆盖的区域列表、每节点估算的理论日处理能力 NodeCap_i（按所选节数与平台数给出分档）、每节点被分配的日实际货运量（吨/天）与未覆盖的地面货量清单、以及节点建设成本小计与覆盖率/替代率指标；（8）可行性与校验：对候选解进行工程可建性筛查（剔除地质/管线冲突点）、敏感性检测（节数、平台数、服务半径上限变化对覆盖率与节点数量的影响）并输出若干替代方案以供决策层在预算、风险与覆盖率之间选择。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化确定仙林地区一级/二级地下物流节点选址与覆盖分配，最小化建设成本与未替代地面货运惩罚的加权和（或在替代量目标下最小化成本），并估算各节点日处理能力。",
          "expected_output": "最优解与报表：一级/二级节点清单与坐标、服务半径r_i、区域覆盖列表与x_{r,i}^k、各节点NodeCap_i与实际分配货量（吨/天）、未覆盖地面货量、建设成本小计与覆盖率/替代率；附代码与MILP模型文件、参数表与图表（覆盖示意）。",
          "key_inputs_constraints": "输入：区域集合R（编号、中心坐标、面积）、OD矩阵D_rs（吨/天）、物流园区P标识、候选节点集合（含各区域中心）、距离矩阵dist(区域-候选/候选-候选，GIS优先）、工程可建性掩码；约束：r_i∈[0,3]且y_i^k=0→r_i=0；x_{r,i}^k≤y_i^k且dist(r,i)≤r_i；园区P优先分配至一级节点；一级节点10吨、二级5吨；预算或替代量阈值；NodeCap_i≥分配量；N_train_day_dir=90、c_i∈{4..8}、vcap_k∈{10,5}；服务覆盖判定以区域中心点。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为数据清洗与参数标定后的选址-覆盖优化环节，直接输出供后续地下通道网络设计与流量分配使用；前序依赖子任务一的数据集与拥堵映射参数gamma，后序依赖本任务的节点集合、半径与分配用于网络拓扑与容量设计。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "优化目标与权衡（建设成本+未替代惩罚/替代量约束）",
              "description": "明确本子任务的优化目标为最小化节点建设总成本与未替代地面货运惩罚的加权和，或在给定最小替代量下最小化成本，并与拥堵映射gamma保持一致。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：两种目标形式均阐明且说明惩罚权重来源与与gamma关联；中分：只阐述一种目标且未解释权重；低分：目标表述成覆盖最大化而未关联成本或惩罚。"
            },
            {
              "sub_criteria": "决策对象识别（y_i^k, r_i, x_{r,i}^k, c_i, p_i）",
              "description": "完整列出并解释一级/二级选址变量y_i^k、服务半径r_i、区域分配变量x_{r,i}^k及列车编组c_i、平台数p_i是否为决策或参数。",
              "score": 25,
              "evaluation_focus": "问题抽象",
              "scoring_hint": "高分：全部变量定义清晰并指明离散/连续；中分：缺少c_i或p_i；低分：仅有y_i未含r_i或x_{r,i}^k。"
            },
            {
              "sub_criteria": "关键输入与约束范围（R, D_rs, P, dist, 可建性掩码, r_i≤3km）",
              "description": "识别必要输入与约束，特别是服务半径上限3km、园区硬/软约束、NodeCap与N_train_day_dir=90。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：逐项列出并与数据来源对应；中分：遗漏可建性掩码或园区优先；低分：未体现3km或容量上限。"
            },
            {
              "sub_criteria": "输出对后续网络设计的作用",
              "description": "指出输出需支撑通道设计与容量校核，包括节点坐标、覆盖列表、NodeCap_i与实际分配量。",
              "score": 20,
              "evaluation_focus": "流程定位",
              "scoring_hint": "高分：明确列出四项并说明如何被后续调用；中分：只提到节点坐标；低分：未说明与后续联系。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将OD D_rs转化为区域需服务量定义",
              "description": "正确复述如何从OD矩阵计算各区域日出入货量并作为覆盖/分配的需求基数。",
              "score": 30,
              "evaluation_focus": "问题澄清",
              "scoring_hint": "高分：给出出、入或总量使用口径；中分：只用总量未说明方向处理；低分：未说明OD如何映射到需求。"
            },
            {
              "sub_criteria": "服务半径与覆盖判定（中心点覆盖规则）",
              "description": "准确复述覆盖判定为“若r_i覆盖区域中心点则视为覆盖”，并指出dist度量口径（GIS优先）。",
              "score": 25,
              "evaluation_focus": "规则理解",
              "scoring_hint": "高分：提及GIS道路距离优先与欧氏替代；中分：只说半径≤3km；低分：误将多边形完全覆盖作为条件。"
            },
            {
              "sub_criteria": "园区P分配为硬约束或大惩罚软约束",
              "description": "清晰表述园区出货尽可能分配到一级节点并说明采用的约束方式。",
              "score": 25,
              "evaluation_focus": "需求优先级",
              "scoring_hint": "高分：明确二选一并量化惩罚；中分：仅口头优先；低分：未区分园区与普通区域。"
            },
            {
              "sub_criteria": "容量与列车参数在NodeCap_i的复述",
              "description": "复述NodeCap_i = p_i * N_train_day_dir * (c_i * vcap_k) 且k=一级10吨/二级5吨。",
              "score": 20,
              "evaluation_focus": "公式复述",
              "scoring_hint": "高分：完整含p_i、c_i、N=90；中分：缺p_i或N；低分：未提供或错误单位。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "距离与误差假设（GIS优先、欧氏替代与误差界）",
              "description": "说明当GIS距离缺失时使用投影平面欧氏距离，并记录误差界或校正系数。",
              "score": 30,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：给出误差上限或系数范围；中分：仅说明用欧氏；低分：未说明替代策略。"
            },
            {
              "sub_criteria": "未替代惩罚与gamma情景值",
              "description": "给出惩罚权重与gamma来源（回归或情景）并与CI≤4目标一致性说明。",
              "score": 25,
              "evaluation_focus": "参数设定",
              "scoring_hint": "高分：区分基准/乐观/保守gamma；中分：单一固定值；低分：未定义或与目标不一致。"
            },
            {
              "sub_criteria": "能力计算与运营假设（c_i,p_i取值、N=90、r_i上限）",
              "description": "阐明c_i∈{4..8}、p_i取值范围、N_train_day_dir=90、r_i≤3km固定不变的运营假设。",
              "score": 25,
              "evaluation_focus": "运营假设",
              "scoring_hint": "高分：列出所有取值范围；中分：缺少其一；低分：与题设冲突。"
            },
            {
              "sub_criteria": "园区硬性优先或软约束惩罚量级",
              "description": "若软约束，给出惩罚的大致量级相对建设成本的比例以确保模型可行且不失真。",
              "score": 20,
              "evaluation_focus": "建模合理性",
              "scoring_hint": "高分：说明量纲一致性与比例；中分：给出数但无依据；低分：不设或过小/过大致退化。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "MILP变量与域（y_i^k, r_i, x_{r,i}^k, c_i, p_i）",
              "description": "精确定义二元/整数/连续变量及域：y∈{0,1}、x∈{0,1}、r∈[0,3]、c_i∈{4..8}、p_i∈Z+。",
              "score": 25,
              "evaluation_focus": "形式化定义",
              "scoring_hint": "高分：所有变量含级别索引k；中分：遗漏c_i或p_i域；低分：变量未区分类型。"
            },
            {
              "sub_criteria": "覆盖与分配约束（x≤y, dist≤r, 唯一或可拆分分配）",
              "description": "建立x_{r,i}^k≤y_i^k、dist(r,i)≤r_i与每区域分配规则（唯一指派或允许分摊）的线性约束。",
              "score": 25,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：明确唯一指派Σ_i,k x_{r,i}^k≤1或=1∕含未覆盖变量；中分：缺其一；低分：逻辑不闭合。"
            },
            {
              "sub_criteria": "容量约束（NodeCap_i与分配量匹配）",
              "description": "用NodeCap_i限制Σ_r demand_r * x_{r,i}^k ≤ NodeCap_i，并区分一级10吨/二级5吨对Q的影响。",
              "score": 25,
              "evaluation_focus": "容量建模",
              "scoring_hint": "高分：含出入方向或总量口径说明；中分：未区分级别容量；低分：无容量约束。"
            },
            {
              "sub_criteria": "目标函数线性化与权重",
              "description": "线性目标：建设固定成本（1.5e8/1.0e8）+ 未覆盖量*惩罚权重，或替代量≥阈值下的成本最小化。",
              "score": 25,
              "evaluation_focus": "目标建模",
              "scoring_hint": "高分：量纲一致并含未覆盖显式变量；中分：口头表述；低分：非线性或遗漏关键项。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器选择与规模控制（Gurobi/CPLEX/CBC）",
              "description": "选择合适MILP求解器并说明候选点裁剪或启发式（加权覆盖、p-median预选）以控制规模。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出预选策略与时间/最优性折衷；中分：仅指名求解器；低分：无求解策略。"
            },
            {
              "sub_criteria": "Benders或分解方法说明（可选）",
              "description": "说明将整数选址与连续分配分解（如Benders）以提升可解性或给出停止准则。",
              "score": 25,
              "evaluation_focus": "数值策略",
              "scoring_hint": "高分：描述主从问题与割；中分：泛述分解；低分：无。"
            },
            {
              "sub_criteria": "可行性与收敛验证（MIPGap/时间限）",
              "description": "设置MIPGap、时间上限并报告最优性证据与可行性检查（r_i=0⇔y=0等）。",
              "score": 25,
              "evaluation_focus": "求解质量",
              "scoring_hint": "高分：阐明Gap阈值与检查清单；中分：仅给时间限；低分：未验证。"
            },
            {
              "sub_criteria": "敏感性分析（权重、r_serv_max、c_i/p_i）",
              "description": "对惩罚权重、服务半径上限、编组与平台数进行敏感性试验并比较覆盖与成本变化。",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：至少两项参数扫描并量化差异；中分：单项；低分：无分析。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据读取与校验（R, D_rs, dist, 掩码）",
              "description": "用pandas/geopandas等正确加载并校验关键输入，含单位与缺失处理，记录GIS/欧氏来源标记。",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：含一致性检查与报告；中分：能读入但校验不足；低分：硬编码或读入错误。"
            },
            {
              "sub_criteria": "MILP建模代码（变量、约束、目标）",
              "description": "用Gurobi/CPLEX/CBC接口正确定义y_i^k, r_i, x_{r,i}^k等及全部约束与线性目标。",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：模型尺寸与日志可复现；中分：缺少部分约束；低分：不可运行或与描述不符。"
            },
            {
              "sub_criteria": "NodeCap_i计算与参数化（c_i, p_i, N=90, vcap_k）",
              "description": "以函数/表驱动方式计算NodeCap_i并支持情景切换与单位检查。",
              "score": 20,
              "evaluation_focus": "实现正确性",
              "scoring_hint": "高分：测试覆盖不同c_i/p_i；中分：写死常量；低分：计算错误。"
            },
            {
              "sub_criteria": "结果导出与可视化（覆盖清单、GeoJSON/CSV）",
              "description": "输出机读文件（节点清单、x_{r,i}^k、r_i、能力与分配量、未覆盖量），并生成覆盖示意图。",
              "score": 15,
              "evaluation_focus": "可复用性",
              "scoring_hint": "高分：结构化导出且图示清晰；中分：仅CSV无图；低分：无导出或字段缺失。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "覆盖率/替代率与未覆盖量报告",
              "description": "量化被地下替代的货量、覆盖率与未覆盖清单，并与目标对齐（如达到CI≤4所需替代量）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出数值与是否达标结论；中分：只报覆盖率；低分：缺乏量化。"
            },
            {
              "sub_criteria": "节点负载与NodeCap_i对比（满载/超载检查）",
              "description": "逐节点比较分配量与NodeCap_i，标注满载或超载风险并提出调整建议。",
              "score": 25,
              "evaluation_focus": "容量校核",
              "scoring_hint": "高分：列表化并指出瓶颈；中分：总体描述；低分：未检查。"
            },
            {
              "sub_criteria": "园区P分配达成度与惩罚触发情况",
              "description": "评估园区货量分配到一级节点的比例与是否触发软惩罚，解释原因与改进方向。",
              "score": 20,
              "evaluation_focus": "约束符合性",
              "scoring_hint": "高分：给出比例与惩罚值；中分：定性说明；低分：未提及。"
            },
            {
              "sub_criteria": "敏感性与方案对比（预算/权重/半径调整）",
              "description": "对关键参数变动的解结构变化进行对比（节点数、成本、覆盖率），提供2–3个可选方案。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：表格化或图示两种以上方案；中分：单方案对比；低分：无对比。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（通道网络设计与流分配最优化）应作为一个自包含的优化与验证工程：输入数据包括已确定的节点集合（每个节点的坐标、级别、每日处理能力上限）、需地下输送的OD货物流量矩阵（吨/天）、候选弧集合（节点对、可行性掩码、工程距离km）、四种可选通道类型及其单位造价（双向四轨/双向双轨、5吨/10吨）与对应的轨道并发系数、车辆参数（每节载重5/10吨、可选编组节数4–8、单向日最大发班90班、日运营18小时）、单位运输变动成本（1元/吨·公里）与年折旧率（1%）、以及工程可建性与升级选项（如双轨→四轨、5吨→10吨、并行隧道）；目标是以每日总成本最小化为主（TransportCost = ∑吨-公里×1元 + DailyDepreciation = 0.01/365×(隧道与节点建设成本)），同时满足所有操作与可靠性约束。数学模型为混合整数线性规划：二元变量 z_{a,t} 指示弧 a 是否以类型 t 建设，连续流量变量 f_{rs,p} 或 f_{rs,a} 表示每对OD经各路径或弧的货量，及派生的弧日流量 u_a；目标函数最小化运输成本与折旧之和，约束包括（1）流守恒：每一对OD的地下承载量在源点产生、目的节点消纳且经过中间节点满足守恒；（2）弧容量约束：∑_{rs} f_{rs,a} ≤ Cap_a(z_{a,t})，其中 Cap_a 由所选通道类型、轨数、编组节数与日最大发班数计算（Q = 节数×每节载重；单向日容量 = 轨道并发数×90×Q）；（3）节点处理能力约束：节点进出合计不超过其平台/处理上限；（4）弧选型互斥：同一弧仅能选择一个通道类型；（5）日清仓与可行性掩码约束；（6）工程/预算或每期建设长度约束（如分期情形）。为增强抗风险性，模型应可选地嵌入鲁棒性/场景约束：对一组故障场景（单弧失效、节点失效或某方向突增流量）进行两阶段随机规划或在主问题中加入备用容量约束（例如关键节点对需存在两条不共享弧的替代路径或在任一单弧失效时仍能承担至少α%的基线流量），或引入CVaR/最坏情形成本作为目标项以降低极端风险。求解方法建议先用精确MILP（Gurobi/CPLEX，或Pyomo/AMPL建模）求解中等规模问题；对规模大或需多场景鲁棒性时采用Benders分解（整数的弧建造放主问题、连续流放子问题）、或元启发式（遗传算法/模拟退火）在节点—弧离散空间搜索近优解并用LP子问题精化流分配。建模后应进行两类验证：一是基于解的离散事件仿真（SimPy或自建排队/列车调度模拟）验证班次、装卸与换乘延时对实际日吞吐的影响并检验“每12分钟一班”假设；二是基于场景重算评估在故障或需求突增下的路由替代能力与成本上升。最终交付物包括：最优/候选网络拓扑（弧与类型）、每弧与每节点的日实际流量与利用率、成本构成明细（运输成本、每日折旧）、关键瓶颈与建议的升级或并行通道位置、若干故障场景下的应急重路由及其成本增幅、以及用于后续动态扩容的触发阈值（例如弧或节点长期利用率超过70%–80%时的扩容建议）；整个过程要求以可复现的数据文件和模型代码交付（建议使用Python+Pyomo/Gurobi或AMPL/CPLEX，并保存所有输入表、距离矩阵与求解参数）。",
      "criteria": {
        "task_understanding": {
          "core_goal": "以混合整数线性规划优化地下物流通道网络选型与流分配，最小化每日运输成本与折旧成本并满足容量与可靠性约束",
          "expected_output": "最优弧选型与网络拓扑（z_{a,t}）、OD 在弧上的日流量分配（f_{rs,a} 或路径流 f_{rs,p}）、各弧与节点利用率与瓶颈报告、成本分解（吨公里运输成本与0.01/365折旧）、鲁棒性/故障场景重路由结果、可复现代码与机读数据文件",
          "key_inputs_constraints": "输入：已确定节点集合（坐标、级别、NodeCap上限）、需地下输送OD矩阵（吨/天）、候选弧集合A（工程可建性掩码、距离km）、通道类型与单位造价（双向四轨/双向双轨、5吨/10吨）、车辆与运行参数（每节5/10吨、编组4–8、单向日最大发班90、运营18小时）、运输变动成本1元/吨·公里、年折旧率1%、升级选项与预算/长度约束。约束：流守恒、弧容量Cap_a(z_{a,t})、节点处理能力、弧选型互斥、日清仓、可建性掩码、（可选）鲁棒场景α%保障与分期建设长度约束。",
          "modeling_type": "优化+仿真+评价",
          "role_in_pipeline": "作为网络设计核心优化环节：前序依赖子任务1的数据集与参数表、子任务2的节点选址与能力上限；后序输出供建设时序与动态扩容策略（子任务4）与仿真验证使用",
          "assumptions": "若缺少路径级数据则采用弧流模型f_{rs,a}并以最短工程距离近似运输距离；节点平台并发数已体现在NodeCap；弧容量按单向计算后乘2得总容量；鲁棒性采用单弧失效保障α=70%为基准情景"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "成本最小化目标（运输成本+0.01/365折旧）识别",
              "description": "是否明确每日总成本=∑(吨公里×1元)+日折旧（0.01/365×建设成本），并为优化目标唯一化描述",
              "score": 30,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：清晰写出目标函数并区分运输与折旧项；中分：提到两项但无公式或单位混淆；低分：遗漏其一或目标含糊"
            },
            {
              "sub_criteria": "关键约束识别（流守恒/容量/可建性/互斥）",
              "description": "是否完整枚举并文字化流守恒、弧容量、节点能力、弧选型互斥、可建性掩码与日清仓",
              "score": 30,
              "evaluation_focus": "约束覆盖",
              "scoring_hint": "高分：6类约束齐全且边界清晰；中分：缺1–2类或边界不清；低分：仅提到流守恒或容量"
            },
            {
              "sub_criteria": "鲁棒性/场景约束定位",
              "description": "是否识别单弧失效/需求突增并提出α%保障或场景集方式",
              "score": 20,
              "evaluation_focus": "风险意识",
              "scoring_hint": "高分：给出α值或CVaR思路；中分：只口头提备份路径；低分：完全忽略"
            },
            {
              "sub_criteria": "输入依赖与边界条件（NodeCap、N_train_day_dir=90）",
              "description": "是否点明NodeCap、编组4–8节、单向90班、5/10吨差异及候选弧距离为必要输入",
              "score": 20,
              "evaluation_focus": "输入完备",
              "scoring_hint": "高分：逐项列出并与容量计算关联；中分：列出但未与计算挂钩；低分：缺失关键参数"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "MILP决策变量复述（z_{a,t}, f_{rs,a}/f_{rs,p}）",
              "description": "是否明确二元弧选型与连续弧/路径流变量的角色与域",
              "score": 35,
              "evaluation_focus": "形式化表达",
              "scoring_hint": "高分：变量定义含取值域与含义；中分：缺取值域或混用路径/弧流；低分：变量不清"
            },
            {
              "sub_criteria": "容量公式复述（Q、Cap_a）",
              "description": "是否正确给出Q=节数×每节载重，Cap_a_dir=轨道并发×90×Q，Cap_a=2×Cap_a_dir",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：三式齐全且单位正确；中分：少一式或单位不一致；低分：给不出可用公式"
            },
            {
              "sub_criteria": "成本项与单位统一",
              "description": "是否复述吨·公里计价与日折旧率δd=0.01/365，工程距离与运输距离的一致性处理",
              "score": 30,
              "evaluation_focus": "单位与尺度",
              "scoring_hint": "高分：写出δd并说明距离来源；中分：只提到折旧或运输其一；低分：单位混乱"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "距离近似与测距方法假设",
              "description": "说明采用GIS线路长度，缺失时用欧氏距离并给出误差界或敏感性检验",
              "score": 30,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：给出误差阈值/敏感性方案；中分：只说明替代但无量化；低分：未说明"
            },
            {
              "sub_criteria": "鲁棒性参数与场景设定（α、失效集）",
              "description": "给出单弧失效、节点失效或需求突增的情景定义与保障比例α",
              "score": 30,
              "evaluation_focus": "风险建模",
              "scoring_hint": "高分：明确α与场景枚举；中分：有场景无量化；低分：无"
            },
            {
              "sub_criteria": "能力与运营假设（N_train_day_dir=90、编组4–8）",
              "description": "阐明编组选择范围、平台并发如何并入NodeCap，日清仓假设",
              "score": 20,
              "evaluation_focus": "运营建模",
              "scoring_hint": "高分：把并发融合入Cap或NodeCap；中分：只列参数；低分：遗漏关键运营限制"
            },
            {
              "sub_criteria": "升级选项与互斥/可并行假设",
              "description": "说明双轨→四轨、5吨→10吨升级是否允许并行隧道与互斥关系",
              "score": 20,
              "evaluation_focus": "设计可行性",
              "scoring_hint": "高分：清晰列互斥与并行规则；中分：泛述可升级；低分：未提"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "目标函数形式化（∑吨公里+δd×Capex）",
              "description": "给出可求解的线性目标，明确各项如何从z_{a,t}与f_{rs,a}计算",
              "score": 30,
              "evaluation_focus": "数学表达",
              "scoring_hint": "高分：公式可直接编码；中分：口述为主；低分：不完整或非线性未线性化"
            },
            {
              "sub_criteria": "容量与节点约束线性化",
              "description": "正确写出∑_{rs} f_{rs,a} ≤ Cap_a(z)与节点进出≤NodeCap，并处理类型选择的Big-M/凸组合",
              "score": 25,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：给出互斥/凸包构造；中分：仅口述；低分：遗漏或错误"
            },
            {
              "sub_criteria": "流守恒与可建性掩码约束",
              "description": "节点流量平衡式与对不可建弧强制z_{a,t}=0",
              "score": 20,
              "evaluation_focus": "可行域定义",
              "scoring_hint": "高分：源/汇平衡清楚；中分：方向性含糊；低分：未区分源汇"
            },
            {
              "sub_criteria": "鲁棒/备用容量建模",
              "description": "两路径不共享或场景优化（α覆盖、CVaR）以线性或可求解形式加入",
              "score": 25,
              "evaluation_focus": "鲁棒建模",
              "scoring_hint": "高分：提供可实现的线性表述或分解框架；中分：概念化描述；低分：缺失"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与分解（Gurobi/CPLEX，Benders）",
              "description": "选择合适MILP求解器并给出Benders或列代策略应对大规模与场景集",
              "score": 35,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：主/子问题切分清晰；中分：仅选工具无策略；低分：不当选择"
            },
            {
              "sub_criteria": "参数调优与停止准则",
              "description": "设置MIPGap、时间上限、启发式初解（最短路网络）与温启动",
              "score": 25,
              "evaluation_focus": "数值性能",
              "scoring_hint": "高分：具体数值如Gap≤1%/时限；中分：笼统描述；低分：无设置"
            },
            {
              "sub_criteria": "分期/预算约束处理",
              "description": "在模型中编码年度长度或投资上限并滚动求解",
              "score": 20,
              "evaluation_focus": "约束实现",
              "scoring_hint": "高分：明确年度包络约束；中分：仅口述；低分：忽略"
            },
            {
              "sub_criteria": "可行性恢复与不可行诊断",
              "description": "提供松弛变量/惩罚或冲突集分析策略",
              "score": 20,
              "evaluation_focus": "稳健求解",
              "scoring_hint": "高分：具体松弛项与权重；中分：提到松弛；低分：无策略"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据接口与机读文件（OD、A、参数表）",
              "description": "以CSV/GeoJSON读取节点、弧、OD、通道类型和成本参数，进行单位与校验",
              "score": 25,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：含schema与校验日志；中分：能读但缺校验；低分：硬编码数据"
            },
            {
              "sub_criteria": "MILP建模代码（Pyomo/AMPL/Gurobi接口）",
              "description": "完整实现z_{a,t}、f_{rs,a}、目标与约束，支持切换路径流/弧流",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：模块化与单元测试；中分：可跑但耦合高；低分：缺约束或报错"
            },
            {
              "sub_criteria": "容量计算与类型互斥编码",
              "description": "正确计算Q、Cap_a并用互斥或凸组合实现弧选型",
              "score": 20,
              "evaluation_focus": "正确性",
              "scoring_hint": "高分：通过小样例比对手算；中分：实现但未验证；低分：容量错"
            },
            {
              "sub_criteria": "鲁棒场景与后处理报表",
              "description": "实现场景集或α保障，输出利用率、成本分解、瓶颈排名与故障重路由",
              "score": 20,
              "evaluation_focus": "功能完整",
              "scoring_hint": "高分：自动生成多场景报表；中分：部分输出；低分：无"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "成本分解与单位一致性检查",
              "description": "报告运输成本与日折旧占比，核对吨公里与δd单位一致",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出占比与敏感性；中分：仅总数；低分：单位混淆"
            },
            {
              "sub_criteria": "容量利用率与瓶颈定位",
              "description": "输出弧/节点利用率、识别>80%长期饱和并提出升级（四轨/10吨/并行）",
              "score": 30,
              "evaluation_focus": "诊断与建议",
              "scoring_hint": "高分：定量阈值与具体升级位置；中分：泛泛建议；低分：未定位瓶颈"
            },
            {
              "sub_criteria": "鲁棒性/故障场景重算",
              "description": "展示单弧失效或需求+X%下的可行性与成本增幅，并说明α覆盖是否满足",
              "score": 25,
              "evaluation_focus": "风险评估",
              "scoring_hint": "高分：提供数值增幅和可行性判定；中分：定性描述；低分：缺场景分析"
            },
            {
              "sub_criteria": "敏感性分析（编组4–8、类型选择）",
              "description": "评估编组节数、轨道并发、通道类型对总成本与Cap的影响",
              "score": 20,
              "evaluation_focus": "敏感性",
              "scoring_hint": "高分：至少两参数联动对比；中分：单参数；低分：无分析"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（动态分期建设、扩容策略与时序优化）要求在给定初始网络、基期OD及参数的前提下，构建一个可操作的、多期（30年）规划与决策流程，按题目设定将总建设量在八年内分期完成（每年可建设隧道长度初始目标为 L_total/8），并对随年均5%增长的需求进行年度预测、能力评估与分期扩容决策；具体工作包括：一是明确输入数据与工程约束——基期OD矩阵与其年度增长率(5%)、初始已建与候选线路与节点集合、各弧工程长度与可建性掩码、通道类型与升级选项（双轨→四轨、5吨→10吨、并行备用洞）、列车编组节数上限（4–8节）、每日班次与运营小时上限、单向日最大发班数等技术参数，以及单位造价、年度折旧/折现率与年度可用建设长度/预算；二是建立多期决策模型与实现方法——采用多期混合整数线性规划（MILP）或滚动时域优化（rolling horizon）作为主框架，决策变量包括各期是否建设/升级某弧或节点、每期线路长度分配与流量分配，目标函数可选最小化累计贴现总成本（建设投资+运营运输成本+拥堵罚金）或在满足拥堵目标（如CI≤4）下最小化贴现成本；模型须包含年度建设速率约束（每年新增隧道长度≤L_year）、容量约束（弧/节点日容量随轨数与列车编组变化）、服务约束（园区优先接入）、以及连续滚动的可实施性约束（已建项目在后期保持）。三是定义明确的触发规则与扩容优先级——在每一年度基于预测负荷计算弧/节点利用率并设阈值（建议70%–80%），当利用率超阈或年需求/设计容量比 ≥1时触发下期扩容动作（按优先级序列：增加列车编组节数→在既有洞升级吨位或轨数→在重要走廊增加并行洞或新路径→新增/提升节点），并规定当班次日极限达到仍超负荷时的紧急应对（临时增加地面短驳、延长运营小时或临时租赁运力）；四是评估与验证机制——在每个决策期后用离散事件仿真（SimPy或自建列车调度仿真）与/或交通微观仿真（SUMO/MATSim）校验调度可行性、装卸瓶颈与对地面拥堵的替代效果，并据实测数据更新模型参数；五是不确定性与敏感性分析——对需求增长率、造价、施工速度与拥堵映射系数做情景/蒙特卡洛分析，评估不同分期方案在NPV、拥堵缓解速度和抗风险性上的稳健性；六是输出与决策产品——逐年建设时序表（每年拟建线路与长度、节点建设/升级清单）、每年末网络拓扑与容量图、关键弧/节点的利用率与触发扩容的具体条件、累计与年度贴现成本估算、以及在若干故障/高需求情景下的应急扩容与替代路线建议；七是实施建议与工具链——建议以Pyomo/AMPL+Gurobi或CPLEX实现多期MILP、用GIS (QGIS) 处理空间与距离数据、用SimPy或专用调度模拟器验证运营约束，并规定每年实施后进行数据回收与重新优化（滚动规划），确保分期建设在经济最优、满足拥堵目标并具备明确触发规则与可操作的扩容路径。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在30年滚动时域内预测需求并最小化累计贴现总成本，通过多期MILP/滚动优化决策分期建设与扩容地下通道与节点，确保每年建设长度约束与拥堵目标（CI≤4）可行。",
          "expected_output": "逐年建设时序表（8期）、年度网络拓扑与容量图、弧/节点利用率与触发扩容记录、累计与年度贴现成本报表、若干情景（故障/高需求）下的可行方案与成本增幅、优化模型与代码、输入输出CSV/GeoJSON与一页参数与假设说明书。",
          "key_inputs_constraints": "基期OD矩阵D_rs与年增长率5%；初始网络与候选弧集合A（工程长度、可建性掩码）；通道类型与升级选项（双轨→四轨、5吨→10吨、并行洞）；列车编组4–8节、单向日最大发班90、日运营18小时；单位造价与年折旧率1%/贴现率；年度建设长度上限L_total/8与预算；园区P优先接入；容量与服务半径等技术约束；已建设施不可逆撤销的连续性约束。",
          "modeling_type": "预测+优化+仿真+评价",
          "role_in_pipeline": "作为全局动态规划与实施阶段：前序依赖子任务1的数据集与参数、子任务2节点选址结果、子任务3初始网络与容量；后序输出用于运营仿真验证与下一年度滚动重优化及抗风险评估。",
          "assumptions": "若缺历史贴现率与预算，默认贴现率=折旧率=1%/年用于示例；年度建设上限以长度约束为主；拥堵罚金通过CI映射与未替代地面货量线性计入目标。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "多期规划与滚动时域优化识别",
              "description": "是否明确30年多期、8年分期建设约束（每年≤L_total/8）与滚动时域优化的必要性及与一次性静态最优的区别。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰阐述多期决策与状态延续；中分：提及多期但未体现年度约束；低分：将问题当作单期静态优化。"
            },
            {
              "sub_criteria": "拥堵目标（CI≤4）与成本权衡识别",
              "description": "是否将CI≤4或拥堵罚金纳入目标或约束，并与贴现总成本最小化形成权衡。",
              "score": 30,
              "evaluation_focus": "目标定义",
              "scoring_hint": "高分：给出CI映射与罚金或硬约束；中分：仅口头提及CI；低分：忽略拥堵目标。"
            },
            {
              "sub_criteria": "扩容触发阈值与优先级识别",
              "description": "是否识别并采用70%–80%利用率阈值，按“编组→升级轨数/吨位→并行洞→新增节点”的优先顺序触发扩容。",
              "score": 35,
              "evaluation_focus": "运营策略",
              "scoring_hint": "高分：量化阈值与序列；中分：有阈值无序列或相反；低分：无触发机制。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "需求预测（5%年增长）与年度能力评估复述",
              "description": "是否准确表述基期OD按5%复利增长并逐年计算弧/节点容量与利用率。",
              "score": 30,
              "evaluation_focus": "需求理解",
              "scoring_hint": "高分：提供年度G_t=G_0·1.05^t并用于能力比；中分：线性近似；低分：无预测。"
            },
            {
              "sub_criteria": "年度建设速率与不可逆约束复述",
              "description": "是否复述每年新增长度≤L_year与“已建保持”连续性约束，禁止撤销已建。",
              "score": 30,
              "evaluation_focus": "约束复述",
              "scoring_hint": "高分：写出累积长度与二元累积逻辑；中分：仅提年度限额；低分：忽略连续性。"
            },
            {
              "sub_criteria": "园区优先接入与服务约束复述",
              "description": "是否说明园区P必须或高权重优先接入、地面替代最小化的服务策略。",
              "score": 40,
              "evaluation_focus": "业务规则",
              "scoring_hint": "高分：将园区接入建成期限定或高惩罚；中分：仅描述优先；低分：未提园区。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "贴现与折旧假设（累计贴现总成本）",
              "description": "明确贴现率/折旧率设定与日/年换算（δd=0.01/365），并说明对建设与运营成本的贴现处理。",
              "score": 30,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：给出现值公式与参数来源；中分：给出比率无换算；低分：未贴现。"
            },
            {
              "sub_criteria": "拥堵映射与罚金场景设定",
              "description": "CI = gamma*G_ground + CI_nonfreight的采用与gamma、CI_nonfreight的情景/区间假设，并定义罚金或硬约束。",
              "score": 35,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：多情景/区间并敏感性；中分：单值假设；低分：未定义。"
            },
            {
              "sub_criteria": "扩容触发与紧急应对假设",
              "description": "量化利用率阈值、编组上限4–8、班次上限90班/日/向、超限时临时措施（延长运营/地面短驳）。",
              "score": 35,
              "evaluation_focus": "运营假设",
              "scoring_hint": "高分：逐级触发与上限清晰；中分：仅阈值或措施之一；低分：无触发或与参数冲突。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "多期MILP/滚动优化的变量与约束",
              "description": "定义期别建造/升级二元z_{a,t,τ}、节点y_{i,τ}、编组c_{τ}、流量f_{rs,a,τ}，含年度长度≤L_year、容量、流守恒与不可逆性。",
              "score": 35,
              "evaluation_focus": "模型化",
              "scoring_hint": "高分：变量与关键约束完备；中分：缺少1–2个核心约束；低分：仅口述无形式化。"
            },
            {
              "sub_criteria": "目标函数（贴现投资+运输+拥堵罚金）",
              "description": "构造贴现累计成本目标，含建设折旧/现值、吨公里运输、拥堵罚金或CI硬约束的替代形式。",
              "score": 30,
              "evaluation_focus": "目标设计",
              "scoring_hint": "高分：明确贴现系数与三类成本；中分：缺一类成本或未贴现；低分：仅单一成本。"
            },
            {
              "sub_criteria": "扩容与升级选项编码",
              "description": "正确建模双轨→四轨、5吨→10吨、并行洞与编组提升的层级与互斥关系，含容量函数Cap_a(τ)。",
              "score": 35,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：互斥+单调升级约束齐全；中分：允许越级或容量未更新；低分：未体现升级。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解策略与可扩展性（Gurobi/CPLEX, Benders）",
              "description": "说明使用商用MILP求解器与大规模时的Benders分解或滚动时域分解策略。",
              "score": 35,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出主/子问题划分与停止准则；中分：仅列出求解器；低分：无求解计划。"
            },
            {
              "sub_criteria": "滚动重优化与状态承继",
              "description": "年度实施后锁定已建决策，更新需求与参数再优化，确保可实施性约束一致。",
              "score": 35,
              "evaluation_focus": "实现路径",
              "scoring_hint": "高分：明确锁变量与数据回收；中分：提滚动未述承继；低分：无滚动机制。"
            },
            {
              "sub_criteria": "鲁棒/情景求解与备用容量",
              "description": "设置单弧失效/需求突增场景，加入备用容量或可靠性约束（如α%基线在失效下可行）。",
              "score": 30,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：α与场景清晰并求解；中分：仅描述场景；低分：忽略不确定性。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据管道与版本化输入（CSV/GeoJSON）",
              "description": "用pandas/geopandas加载R、D_rs、A、参数表，校验单位与时间尺度并持久化版本号。",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：含模式校验与单元测试；中分：能读写无校验；低分：手工硬编码数据。"
            },
            {
              "sub_criteria": "Pyomo/AMPL建模与参数化期别循环",
              "description": "代码参数化期τ循环、变量与约束生成、贴现系数计算、求解器配置与日志。",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：可复现实验与配置；中分：可跑但硬编码；低分：伪代码或不可运行。"
            },
            {
              "sub_criteria": "仿真验证（SimPy/SUMO）与利用率计算",
              "description": "输出年度排班、装卸延时仿真以验证单向90班/日与编组限制，并回写利用率与触发记录。",
              "score": 35,
              "evaluation_focus": "集成验证",
              "scoring_hint": "高分：联通优化-仿真闭环；中分：仅静态校核；低分：无验证。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "建设时序与容量图展示",
              "description": "逐年线路与长度、节点建设/升级清单，配合容量与利用率热力图或表格。",
              "score": 35,
              "evaluation_focus": "可视化",
              "scoring_hint": "高分：图表一致且可追溯；中分：仅表格；低分：描述性文字无量化。"
            },
            {
              "sub_criteria": "贴现成本与拥堵改善评估",
              "description": "报告累计/年度贴现成本、运输成本占比、CI变化轨迹及达到CI≤4的年份。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：分解成本与里程碑；中分：汇总数无分解；低分：无成本或无CI评估。"
            },
            {
              "sub_criteria": "敏感性与情景对比（增长率/造价/施工速度/gamma）",
              "description": "量化不同情景下NPV、拥堵缓解速度、抗风险性的变化与策略稳定性。",
              "score": 30,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：≥3个情景且量化对比；中分：1–2个定性；低分：无敏感性。"
            }
          ]
        }
      }
    }
  }
}