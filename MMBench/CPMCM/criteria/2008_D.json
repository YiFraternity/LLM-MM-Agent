{
  "task_id": "2008_D",
  "problem": "问题描述\n\n大型商场只要营业新风机组就不停地向商场提供新风以改善商场内的空气质量，当然夏季在提供新风的同时也将商场外部的热量带进商场中。除了新风带入的热量外，商场中的冷负荷还包括通过建筑物围护结构传入的热量，顾客散发的热量，商场内照明、水泵等电气设备产生的热量等。其中通过建筑物围护结构和新风传入的热量与商场内外的温差有关，可通过附式1进行估算，也可以将其视作一系列对应不同外部温度的常量。因此商场的温度的变化取决于以下几个因素。：\n\nA）商场中的人流；B）商场外的环境温度；C）新风带来的热量； D）商场建筑围护结构的保温性能和商场外表面的面积；E）商场的灯光、水泵等电气设备产生的热量；F）中央空调的制冷量。在上述因素中，影响商场温度最主要因素是外部的环境和内部热源，比如要求将商场的温度控制在26度，中央空调输出的冷量首先是抵消中央空调开机前商场中已经积累的热量（ $Q_0$ ）。然后再输出的冷量要抵消通过建筑围护结构和新风输入的热量（ $Q_t$ ）商场人流(Qm)以及照明等电气设备散失的热量( $Q_e$ )。当外部环境温度变化时 $Q_t$ 可以认为是与之相对应的一系列常数，即当环境温度确定后，其值也就确定了。 $Q_e$ 也可近似看作常量，所以以冷量为控制对象时，冷量变化的控制，主要与商场的人流量有关。\n\n按照设计要求，中央空调设备既可以通过调节冷冻水的流量保证冷冻水的供回水温差维持在5度，即7-12度，如果达不到这个设计要求，温差小于5度，带走相同的热量需要更多的水，加大流量就会造成浪费。一般要求冷却水的供回水温差也是5度，即32-37度，如果达不到这个设计要求，温差小于5度，同样会产生能量浪费。（注：刚开机时温差大于5度是正常的，在工作一段时间后才能达到设计条件）。因此当室外温度较低，冷却水的回水温度低于32度时，就可以适当减少冷却水的流量，使冷却泵的功耗降低。因中央空调系统传递的热量是冷冻水系统从建筑物中带来的，冷却水系统散失到空气中的热量是冷冻水系统传递过来的热量再加上制冷机自身消耗的能量而产生的热量，这些热量都是通过水来传递的，而水量和温差的变化就反应了能耗的变化，因此消耗最少的能量将建筑物内的热量散失到空气中是最为节能的运行方式。\n\n注：若采用控制冷却水和冷冻水的流量方式时，流量不能无限减少，为保证系统安全，每台制冷机冷却水、冷冻水的水泵最低的允许流量可按照设计流量的75%计算。\n\n后面的数据是一个大型商场中央空调系统的实际运行数据，和类似商场所在城市的南京市2006年相同时间白天每小时的外界温度数据，由于不是商场周围的测量值，商场外温度可能比这批数据高出两度左右。该中央空调共有3台功率相等的制冷机、冷冻水和冷却水水泵各3台，每台制冷机功率约为每台水泵功率的3倍，商场水泵运转时按设计流量运行，即流量不变化。由于是历史数据，现在有些数据无法补充完整，但研究生可以再借鉴其他数据，考虑以下问题：\n\n1、夏季在商店中顾客设计冷负荷约为30w。请同学们根据数据推导出（A）和（E）的冷负荷。其中最简单做法是假设全天12小时人流量基本保持不变（工作日与节假日可以不同）。条件（E）的冷负荷在一年四季基本保持不变。6、7、8月份商场外部温度可假设为35度，人流量在节假日为平时的1.5-2倍。\n\n2、根据附式1，可以计算出从外部辐射进商场的冷负荷，请同学们推导出以比较短的时段内进出商场的人流量、外部环境温度为变量的商场冷负荷的函数表达式，并讨论冷负荷的误差范围。\n\n请研究生自行对外界温度和人流量进行假设。比如7、8月份商场外部温度可假设为35度，人流量在节假日为平时的1.5-2倍，根据题目给出的数据进行验证。\n\n3、根据推导出的冷负荷表达式，请根据实际情况建立保持夏季商场内部温度稳定的数学模型，达到既使商场内温度尽可能稳定在设计值又尽可能节能的要求。\n\n在中央空调中，可以控制的独立对象除冷却水和冷冻水的流量外，每台制冷机可以关闭。请同学们提出自己的控制策略，并给出和题目给出情况对比所产生的节能效果（风机耗能与空调无关）。\n\n4、假设没有任何能量浪费（制冷机的效率为100%），在夏季达到设定温度（26度）所需要的冷量为合理基准冷负荷。请同学们根据数据分析夏季合理基准冷负荷，基准冷负荷的时间可以是天、周或月，时间越短越好。再请同学们考虑，如果将商场温度提高1度，其合理基准冷负荷将会减少多少？\n\n注：商场的面积为5.6万平方米。共6层，地下1层，地上5层，层高4.5米，建筑成长方体。",
  "subtask": {
    "1": {
      "subtask": "子任务1（物理灰盒建模与冷负荷拆分）的目标是构建一个参数化、可识别的物理灰盒模型，用以将商场总冷负荷在时间尺度上分解为：开机前积累的贮热项 Q0(t)、通过围护结构传入的导热负荷 Qt(t)、因新风带入的负荷 Qv(t)、人员显热 Qm(t) 和照明/设备显热 Qe(t)，并用可测量的输入量与有限参数精确描述这些项及其对室内温度动态的影响，从而为后续辨识与控制提供统一且可复现的模型接口。具体范围与输出：给出（1）代数拆分关系 Q_total(t)=Q0(t)+Qt(t)+Qv(t)+Qm(t)+Qe(t) 与各项的物理表达式；（2）建筑动力学一阶等温（lumped capacitance）动力学方程 C_bldg·dT_in/dt = −Q_ac_eff(t−τ)/η_dist + Qt(t)+Qv(t)+Qm(t)+Qe(t)（其中τ为输送/响应时滞、η_dist为传输效率）；（3）围护结构导热公式 Qt(t)=k_roof·F_roof·(T_e(t)−T_in(t))+k_wall·F_wall·(T_e(t)−T_in(t))（或简化为 K_tot·(T_e−T_in)），并指出建议取值 k_roof=1.2、k_wall=0.6；（4）新风近似 Qv(t)=β·Qt(t)（β建议取0.8）；（5）人员热 Qm(t)=q_p·N(t)（q_p建议取30 W/人，N(t)为时变人数或按工作日/节假日比例估计）；（6）末端/水系统热交换表达 Q_ac_eff(t)=m_fw(t)·c_p·ΔT_fw(t)（并明确设计供回差 ΔT_design≈5°C 作为标称约束及每泵最小允许流量为设计流量的75%作为硬约束）；以及（7）时间分辨率建议（5–15分钟步长）和典型滞后尺度（τ≈20–30分钟）。为实现该模型，明确列出所需数据输入：时间序列的室内温度 T_in(t)、室外温度 T_e(t)、冷冻/冷却水供回温度与流量、机组/泵开停状态、机组与泵电功率、历史或估计的客流 N(t)、照明/设备电负荷或估算值、以及建筑几何（总建筑面积、层数、层高、外墙与屋顶面积计算所需的长宽或体块假设）；并要求在建模前进行数据预处理（时间对齐、缺失插补、异常检测与剔除、外温偏差校正与必要的平滑）。参数识别方法与步骤应包括：用最小二乘/递归最小二乘或扩展卡尔曼滤波对静态参数（K_tot、β、Qe 基线）与动态参数（C_bldg、τ、系统增益）进行辨识，优先在观测到明确阶跃或接近开/关机事件的片段上执行到达-响应识别以估计时间常数与时滞，并用并联验证段检验模型预测误差；当实时人数计数不可得时，规定以工作日/节假日比率（节假日1.5–2倍）作为 N(t) 的初始方案并注明需通过回归对 Qm 与 Qe 进行校准。交付物应为：参数化模型文件（含方程、参数初值与单位）、清洗后的输入数据时间序列样本、参数估计方法说明与结果（含不确定度或置信区间）、以及模型接口定义（输入、可观测量与输出项：各负荷分量的时序估计、预测的室内温度曲线及模型残差），同时明确模型假设（单舱等温、忽略潜热与分区温差、采用线性传热近似）与适用边界条件（时间尺度、最低泵流量限制），以便独立实现、校准与后续验证。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并辨识可参数化的物理灰盒模型，拟合商场总冷负荷并将其分解为 Q0、Qt、Qv、Qm、Qe 以提供可复现的模型接口和参数估计",
          "expected_output": "参数化模型文件（方程与参数初值、单位）、清洗后时间序列样本、各负荷分量时序 Q0(t),Qt(t),Qv(t),Qm(t),Qe(t)、C_bldg、τ、K_tot、β 等参数估计与置信区间、模型预测的 T_in(t) 与残差、接口说明文档",
          "key_inputs_constraints": "必需输入：1) 室内温度序列 T_in(t)（5–15 min 分辨率）；2) 室外温度 T_e(t)；3) 冷冻/冷却水供回温度与流量 m_fw(t),ΔT_fw(t)；4) 机组/泵开停状态与电功率；5) 客流 N(t) 或工作日/节假日估计；关键约束：设计供回差 ΔT_design≈5°C、每泵最小允许流量=设计流量的75%、滞后 τ≈20–30min；若数据缺失需说明插补策略。",
          "modeling_type": "拟合+仿真",
          "role_in_pipeline": "作为模型构建与特征化模块，位于数据清洗之后、控制策略设计与节能评价之前；直接依赖：前序的数据预处理/时间对齐；后序依赖：参数辨识结果用于控制优化、能耗仿真与节能对比。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并列出需分解的负荷项 Q0,Qt,Qv,Qm,Qe",
              "description": "检验是否完整列出 Q0、Qt、Qv、Qm、Qe 并说明各项物理含义与时变性（如 Q0 为开机前贮热项、Qm 与 N(t) 相关）",
              "score": 30,
              "evaluation_focus": "问题分解",
              "scoring_hint": "高分：完整列出5项并给出时间尺度与观测可得性；中分：缺1项或未说明时变性；低分：少于3项或未解释物理含义。"
            },
            {
              "sub_criteria": "识别关键物理约束 ΔT_design 与泵最小流量75%",
              "description": "判断报告是否识别并引用 ΔT_design≈5°C 与每泵最小允许流量75% 的硬约束及其对 Q_ac_eff 的影响",
              "score": 25,
              "evaluation_focus": "约束分析",
              "scoring_hint": "高分：明示两项约束并说明对流量/能耗的影响；中分：只提及 ΔT_design 或 75% 中一项；低分：未提及任何设计约束。"
            },
            {
              "sub_criteria": "识别数据需求与时间分辨率（5–15min）及滞后 τ≈20–30min",
              "description": "检查是否识别所需时间序列（T_in,T_e,流量等）、建议分辨率与典型滞后尺度 τ",
              "score": 25,
              "evaluation_focus": "数据需求",
              "scoring_hint": "高分：列出所有数据项并说明分辨率与 τ；中分：数据项齐但未给出分辨率或 τ；低分：数据项不全或无时间尺度说明。"
            },
            {
              "sub_criteria": "识别建模与辨识难点（观测缺失、潜热忽略等）",
              "description": "需指出建模盲区如潜热忽略、分区温差、人数观测不可得以及由此产生的不确定性",
              "score": 20,
              "evaluation_focus": "风险识别",
              "scoring_hint": "高分：列出 ≥3 个风险并提出缓解策略；中分：列出1–2 个风险；低分：未识别或回避关键风险。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述代数拆分 Q_total=Q0+Qt+Qv+Qm+Qe",
              "description": "是否准确写出代数拆分关系并说明每项的测量/估计方式",
              "score": 35,
              "evaluation_focus": "模型表述",
              "scoring_hint": "高分：精确给出公式并说明数据来源；中分：公式正确但未说明测量途径；低分：公式缺项或错误。"
            },
            {
              "sub_criteria": "复述动力学方程 C_bldg·dT_in/dt = −Q_ac_eff(t−τ)/η_dist + Qt+Qv+Qm+Qe 并标明 τ、η_dist",
              "description": "评估是否写出一阶等温动力学方程并解释滞后 τ 与传输效率 η_dist 的物理意义",
              "score": 35,
              "evaluation_focus": "动力学理解",
              "scoring_hint": "高分：公式完整且注明 τ≈20–30min 与 η_dist 含义；中分：公式写出但未解释参数；低分：动力学方程缺失或错误。"
            },
            {
              "sub_criteria": "复述末端换热表达 Q_ac_eff=m_fw·c_p·ΔT_fw 与 ΔT_design 约束",
              "description": "检验是否明示 Q_ac_eff 与冷冻/冷却水的 m·c·ΔT 关系并引用 ΔT_design≈5°C 和泵流量下限",
              "score": 30,
              "evaluation_focus": "换热表述",
              "scoring_hint": "高分：表达式正确并写出 ΔT_design 与 75% 流量约束；中分：表达式正确但未提约束；低分：表达式错误或遗漏。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "单舱等温与线性传热假设（忽略潜热）",
              "description": "评估是否明确假设单舱等温、忽略潜热与分区温差并讨论这些假设的适用性与限制",
              "score": 30,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：明确陈述并分析误差来源；中分：陈述但未讨论限制；低分：未声明或与模型冲突。"
            },
            {
              "sub_criteria": "给出先验参数取值 k_roof=1.2,k_wall=0.6,β=0.8,q_p=30W",
              "description": "检查是否采纳并说明建议先验值及单位来源与合理区间",
              "score": 25,
              "evaluation_focus": "先验设置",
              "scoring_hint": "高分：列出所有建议值并说明来源或置信区间；中分：列出值但无说明；低分：未给先验或数值冲突。"
            },
            {
              "sub_criteria": "时间分辨率与滞后假设（5–15min, τ≈20–30min）",
              "description": "评估是否为建模指定时间步长并论证 τ 选择与辨识策略（如阶跃响应片段）",
              "score": 25,
              "evaluation_focus": "时间尺度",
              "scoring_hint": "高分：给定分辨率并基于物理/数据论证 τ；中分：给出分辨率或 τ 任一；低分：无时间尺度说明。"
            },
            {
              "sub_criteria": "边界条件与泵流量下限的硬性约束说明",
              "description": "是否明确最低泵流量 75% 的硬约束及其在辨识/仿真中的强制实现方式",
              "score": 20,
              "evaluation_focus": "边界条件",
              "scoring_hint": "高分：明确写出并在模型中作为约束；中分：提及但未严格实现；低分：忽略或矛盾。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "实现代数拆分并给出每项物理表达（含 Qt=K_tot·(T_e−T_in)）",
              "description": "检查是否在模型中实现 Qt 的分项或简化为 K_tot·(T_e−T_in) 并给出单位与参数含义",
              "score": 30,
              "evaluation_focus": "表达式实现",
              "scoring_hint": "高分：Qt 公式正确且给出 K_tot 或分项 k_roof,k_wall；中分：使用简化形式但未标注单位；低分：公式错误或未实现。"
            },
            {
              "sub_criteria": "实现 Qv=β·Qt 与 Qm=q_p·N(t) 等关系并说明 β、q_p 取值",
              "description": "验证模型中是否采用 Qv=β·Qt、Qm=q_p·N(t) 并给出 β、q_p 的初值与可调性",
              "score": 20,
              "evaluation_focus": "参数化",
              "scoring_hint": "高分：实现且能调整 β,q_p 并说明来源；中分：实现但固定且无说明；低分：未实现或不一致。"
            },
            {
              "sub_criteria": "实现一阶等温动力学 C_bldg·dT/dt 表达并包含滞后 τ 与 η_dist",
              "description": "模型应实现动态方程并在数值积分/仿真时考虑 τ 的延迟效应与 η_dist 损耗",
              "score": 25,
              "evaluation_focus": "动力学实现",
              "scoring_hint": "高分：动态方程数值稳定实现且延迟处理合理；中分：方程实现但延迟处理粗糙；低分：无动态项或实现错误。"
            },
            {
              "sub_criteria": "模型接口与输出定义（单位、时序、残差）",
              "description": "要求给出模型输入/输出接口，输出包含分解后的五项负荷时序、预测 T_in 与残差",
              "score": 25,
              "evaluation_focus": "交付物规范",
              "scoring_hint": "高分：接口清晰并含样本数据格式；中分：接口描述但不完整；低分：无接口说明或不可复现。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "采用最小二乘/递归最小二乘或扩展卡尔曼滤波进行参数辨识",
              "description": "评估是否提出具体辨识方法（LS/RLS/EKF）并说明为何适合估计 K_tot、β、Qe 等静态参数",
              "score": 30,
              "evaluation_focus": "辨识方法",
              "scoring_hint": "高分：方法与目标参数匹配且给出实现细节；中分：方法合理但缺实现细节；低分：方法缺乏或不适配。"
            },
            {
              "sub_criteria": "利用开/关阶跃片段辨识时间常数与时滞 τ",
              "description": "是否在观测到明确阶跃（开/关机）数据片段上执行到达-响应识别以估计 τ 与 C_bldg",
              "score": 25,
              "evaluation_focus": "时滞辨识",
              "scoring_hint": "高分：展示阶跃片段与拟合结果并给出 τ；中分：提及但无展示；低分：忽略阶跃识别。"
            },
            {
              "sub_criteria": "不确定度估计与并联验证段检验模型预测误差",
              "description": "是否提供参数置信区间、不确定度评估并用独立验证段计算预测误差（如 RMSE/MAE）",
              "score": 30,
              "evaluation_focus": "验证与不确定度",
              "scoring_hint": "高分：给出置信区间与验证段 RMSE/MAE；中分：仅给验证误差；低分：无验证或无误差指标。"
            },
            {
              "sub_criteria": "在人数不可得时用工作日/节假日比例初始 N(t) 并回归校准 Qm,Qe",
              "description": "评估是否采用节假日系数（1.5–2×）作为 N(t) 初始方案并通过回归校准人员与设备热负荷",
              "score": 15,
              "evaluation_focus": "实用性处理",
              "scoring_hint": "高分：实现初始估计并有回归校准结果；中分：采用估计但无校准；低分：未处理人数不可得情形。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据预处理实现（时间对齐、缺失插补、异常检测、外温校正）",
              "description": "代码是否包含并示例化数据清洗步骤，能复现时间对齐与插补策略并记录变更",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：提供可运行脚本与示例输出；中分：提供脚本但需手动调整；低分：无或不可运行。"
            },
            {
              "sub_criteria": "模型求解代码（辨识/仿真）正确且数值稳定",
              "description": "检查辨识与仿真代码的可运行性、边界条件处理（如泵 75%）与数值稳定性",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：代码可运行并通过示例验证；中分：运行需修正小错误；低分：脚本错误或不可复现结果。"
            },
            {
              "sub_criteria": "模块化接口与输出格式化（模型文件、日志、图表）",
              "description": "要求代码能导出参数化模型文件、时序输出、残差与图表，并有版本/日志记录",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：模块化且有接口文档与示例文件；中分：部分模块化；低分：一体化脚本无接口说明。"
            },
            {
              "sub_criteria": "可复现性与文档（运行说明、依赖、参数初值）",
              "description": "是否提供 README、依赖清单与参数初值以使第三方能复现实验结果",
              "score": 15,
              "evaluation_focus": "文档化",
              "scoring_hint": "高分：完整文档与示例命令；中分：文档不全；低分：无文档。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "分解结果的能量守恒与可视化（Q_total vs sum(Qi)）",
              "description": "检验输出中是否对比 Q_total 与 Q0+Qt+Qv+Qm+Qe 的时间序列并计算误差与能量差",
              "score": 30,
              "evaluation_focus": "能量平衡",
              "scoring_hint": "高分：展示差异图并误差统计（均值、标准差、最大偏差）；中分：仅列示图或仅统计；低分：未验证能量守恒。"
            },
            {
              "sub_criteria": "参数估计合理性与置信区间（K_tot,β,C_bldg,τ）",
              "description": "评估估计参数是否在合理范围并给出置信区间或不确定度指标",
              "score": 25,
              "evaluation_focus": "参数评价",
              "scoring_hint": "高分：参数有置信区间且落在物理合理区间；中分：参数合理但无置信区间；低分：参数不合理或未报告。"
            },
            {
              "sub_criteria": "残差分析与预测性能（RMSE/MAE, 分段验证）",
              "description": "是否提供残差时间序列、频谱或自相关检查，并报告验证段的 RMSE/MAE 等指标",
              "score": 25,
              "evaluation_focus": "预测检验",
              "scoring_hint": "高分：给出 RMSE/MAE 并有残差诊断；中分：提供误差指标但无诊断；低分：无误差报告。"
            },
            {
              "sub_criteria": "敏感性与适用边界讨论（时间尺度、假设影响）",
              "description": "对关键假设（单舱、β 取值、ΔT_design、泵下限）进行敏感性分析并说明适用边界",
              "score": 20,
              "evaluation_focus": "不确定性分析",
              "scoring_hint": "高分：包含定量敏感性结果与改进路径；中分：定性讨论；低分：忽略敏感性分析。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（能效模型、机组与水系统约束建模及控制问题表述）的目标是将空调设备與水系统的能耗特性、工程约束和可控量精确形式化为一个可求解的预测优化问题，以生成在给定预测窗内最优的机组开关、泵/并联泵流量或转速、以及目标冷冻水/冷却水供回温差（ΔT）设置；该子任务的范围包括：1) 建立电能目标函数的数学表达式，至少包含制冷机电耗（用制冷量除以 COP，再加上固定或负荷相关辅助功率）与泵电耗（按流量的三次方关系或泵曲线）；2) 用工程约束明确定义可控变量与边界，包括每台制冷机的最大/最小冷量与部分负荷率 PLR∈[PLR_min,1]、机组二元开停变量與最小连续运行/停机时长、每台泵或并联泵的最小允许流量（≥设计流量的75%）、总冷冻/冷却水流量与各泵并联组合的映射关系、供回温差ΔT的安全范围与设计目标（标称5°C）、系统水力耦合约束（流量与ΔT共同决定输送冷量 Q_ac = m·c_p·ΔT 的离散化形式）、以及冷却塔/冷凝温度对 COP 的影响的表达式或表格查找约束；3) 提出 COP 的可行建模与近似策略（优先级：厂商查表或实验曲线、分段线性/多项式拟合、若需在线速度则用低阶凸近似或事先训练的回归模型/神经网络并在优化中用分段线性外推与可行性修复）；4) 将连续与离散变量整合为混合整数优化问题（标准形式可写为在预测窗 H 和时间步长 Δt 上最小化 Σ_t [Σ_i Q_i(t)/COP_i(·) + Σ_j P_pump_j(m_j(t))] + w_temp·Σ_t (T_in(t)−T_set)^2 + w_switch·Σ switch_penalties，受限于动力学/能量平衡的离散化方程、流量-ΔT-Q 映射、机组与泵的工艺约束與最小切换时长）；5) 指定数值求解策略以适应工程实时性要求：若计算资源充足，提出用混合整数二次/非线性规划求解器（如 Gurobi/CPLEX 对 MIQP/MILP，或 BARON/SCIP/Bonmin/KNITRO 对 MINLP）直接求解；若要求实时性或模型非线性强，推荐两层分解——上层每 15–60 分钟求解离散的机组调度 MILP（将 COP 与泵曲线线性化或用查表近似），下层每 5–15 分钟求解连续的流量与ΔT 优化（QP/NLP）并对上层结果做可行性修正；说明整数松弛与启发式回收（阈值舍入、邻域搜索、启发式热启动）作为提高时限内解可行性的方法；6) 指定对非线性项的处理：泵三次方关系可以在连续子问题中精确保留或通过分段线性近似转为 MILP，COP 与冷凝温度耦合可用分段线性或凸上界近似并在必要时用查表插值保证物理可行；7) 包含不确定性处理选项的规范：若需鲁棒或概率保证，提出情景法（多情景 MPC）、鲁棒优化或 chance-constraints，并给出情景数量与求解复杂度之间的折衷建议；8) 明确所需输入数据清单以构成该子任务的数学模型与求解器接口：预测窗内的建筑冷负荷或其预测值（含人员/照明/围护热分量）、外界与冷却水进出温度预测、当前与历史的冷冻/冷却水流量与供回温度、泵与机组额定参数（设计流量、额定功率、最小允许流量、最小运行时间）、制冷机 COP 曲线或查表数据、泵曲线或参数以及采样时间与计算时限；9) 最终输出格式与运行接口要求：在每个控制周期以明确的控制命令输出机组开停序列、每台泵的设定流量/转速或并联泵组合、目标 ΔT 与期望部分负荷率，并返回可执行性标志、预计耗电量与约束边界余量以供上层监管或故障回滚；以及10) 提供实现细则与工程提示：建议初始采用较保守的权重与较长预测窗以保证舒适性和设备安全，采用 warm-start、分层求解与模型简化以满足实时性，并记录求解器状态与次优解以便在线容错。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在给定预测窗 H 和步长 Δt 上构建并求解预测优化模型，优化机组开停、泵流量/并联组合与供回温差 ΔT 的设置以最小化总电能（制冷机电耗基于 Q/COP + 辅助功耗 与泵功耗 ≈ 流量^3），并输出可执行控制序列与可行性标志",
          "expected_output": "最优/次优控制序列（每步机组二元开停、每台泵或并联泵设定流量/转速、目标ΔT）、预测窗内预估耗电量时间序列、可行性标志与约束余量、模型与求解器配置文件、求解日志与实现代码",
          "key_inputs_constraints": "1) 预测窗内的建筑冷负荷时序分解（Q_total(t)或其分项Qt,Qv,Qm,Qe）、2) 各台制冷机 COP 曲线/查表或分段拟合、3) 每台泵设计流量、额定功率与泵曲线（泵功耗≈k·m^3 或三次方拟合）、4) 每台制冷机最小/最大冷量与最小连续运行/停机时长、5) 每泵最小允许流量≥设计流量的75%（硬约束）、6) 时间步长 Δt 与预测窗 H 及计算时限",
          "modeling_type": "预测+优化（混合整数最优控制 / MPC 风格）",
          "role_in_pipeline": "作为控制器决策层：依赖子任务1的冷负荷分解与子任务3的灰盒动力学/可预测性参数（即需要负荷预测与动力学模型），并为下游在线执行/PLC 下发最优机组、泵与ΔT命令；在流程上处于‘预测负荷 -> 预测优化调度 -> 下发执行/仿真验证’之间",
          "assumptions": "假设可获得短期负荷预测 Q(t)（或按分项合成）、可用或可拟合的 COP 与泵曲线、机组与泵的最小运行时间/流量数据，以及允许将复杂非线性项用分段线性或外推查表近似以便优化求解"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别电能目标（制冷机能耗 Q/COP + 辅助）",
              "description": "能否明确将目标函数写为制冷机电耗（Σ_i Q_i/COP_i(·)+ 辅助功耗）与泵功耗之和，并指出需要最小化的时域累积耗电量（预测窗 H）",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：目标函数明确给出 Σ_t Σ_i Q_i(t)/COP_i(·)+Σ泵P_pump(m) 并标注单位与权重；中分：目标表达式不全或缺少辅助功耗/泵项；低分：未区分制冷机能耗与泵能耗或无时域累积目标"
            },
            {
              "sub_criteria": "识别可控变量与混合整型结构（机组开停、泵流量、ΔT）",
              "description": "是否明确列出决策变量：每台机组二元开停与 PLR、每台/每组泵的连续流量或速比、以及目标 ΔT，并指出它们的边界与耦合关系",
              "score": 25,
              "evaluation_focus": "数学抽象",
              "scoring_hint": "高分：逐项列出机组二元变量、PLR区间、泵流量连续变量与ΔT范围并写出耦合约束；中分：列出变量但未写清耦合或边界；低分：遗漏关键决策变量如ΔT或泵最小流量75%"
            },
            {
              "sub_criteria": "识别工程约束（最小流量75%、最小开停时长、流量-ΔT-Q 映射）",
              "description": "是否识别并写明工程约束：每泵最小允许流量≥设计流量的75%、机组最小连续运行/停机时长、以及 Q_ac = m·c_p·ΔT 的物理耦合",
              "score": 25,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：逐条列出并以数学式表达最小流量75%、最小开停时长与 Q=m c ΔT；中分：列出但未数学化；低分：约束缺失或与题目要求冲突"
            },
            {
              "sub_criteria": "识别不确定性与处理需求（外温/客流/预测窗 H）",
              "description": "是否识别预测窗 H、Δt 的选择对可行性与实时性的影响，并指出需对外温/客流预测误差进行情景或鲁棒处理",
              "score": 25,
              "evaluation_focus": "系统识别",
              "scoring_hint": "高分：给出 H、Δt 建议并建议情景法/鲁棒约束；中分：识别不确定性但未提出处理方法；低分：未提及预测窗或不确定性"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将问题复述为混合整数优化（写明 MIQP/MINLP/MILP 形式）",
              "description": "是否把目标与约束整理为标准混合整数优化问题（在每个 t∈{0..H} 最小化 Σ），并说明若非线性则为 MINLP 或需分段线性化为 MILP/MIQP",
              "score": 40,
              "evaluation_focus": "形式化能力",
              "scoring_hint": "高分：给出精确的数学形式（变量、目标、约束）并注明是 MINLP 或可近似为 MILP/MIQP；中分：给出文字化复述但缺少数学式；低分：复述模糊且未指明混合整数性质"
            },
            {
              "sub_criteria": "明确离散/连续时间离散化（预测窗 H 与时间步长 Δt）",
              "description": "是否明确写出时间离散化规则（H、Δt）、评价周期（如15–60 min）并说明与实时计算时限的关系",
              "score": 30,
              "evaluation_focus": "时序建模",
              "scoring_hint": "高分：明确给出 H 与 Δt 并说明选取理由（计算负载、控制频率）；中分：给出 H 或 Δt 但无理由；低分：未指定或选择不合理"
            },
            {
              "sub_criteria": "表述流量-ΔT-Q 与 COP 耦合关系（含泵三次方关系）",
              "description": "是否明确写出 Q_ac = m·c_p·ΔT、泵功耗近似为 k·m^3 或三次方拟合、以及 COP 对冷凝/冷却水温度的依赖（表/分段拟合）",
              "score": 30,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：数学化给出 Q=m c ΔT、泵三次方关系与 COP 表/分段函数；中分：描述存在耦合但未给出公式；低分：忽略这些关键物理关系"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于 COP 与泵曲线的建模假设（查表/分段/回归）",
              "description": "是否明确假设 COP 可由厂商查表或分段线性/多项式拟合近似，并说明在优化中采用哪种可行化策略",
              "score": 30,
              "evaluation_focus": "近似方法",
              "scoring_hint": "高分：列出查表/分段/回归三种方案并说明在实时求解中的首选与回退策略；中分：只提出一种方案无替代；低分：无 COP 建模假设"
            },
            {
              "sub_criteria": "关于最小泵流量75%与机组最小 PLR 的硬约束假设",
              "description": "是否将每台泵最小允许流量设为设计流量的75%并把它作为硬约束，同时说明机组 PLR_min 与最小连续运行/停机时间",
              "score": 25,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：硬约束数学化并在可行性检测中使用；中分：提到75%但未数学化或未用于可行性检查；低分：忽略或误用该约束"
            },
            {
              "sub_criteria": "关于系统水力耦合与冷却塔/冷凝温度处理的假设",
              "description": "是否声明冷却塔/冷凝温度作为外生预测或用查表耦合 COP，并说明何时忽略水力复杂性或采用近似",
              "score": 25,
              "evaluation_focus": "边界条件",
              "scoring_hint": "高分：明确冷凝温度处理策略（表/预测/外生）并论证合理性；中分：提出处理但无论证；低分：未提及冷凝温度或水力耦合"
            },
            {
              "sub_criteria": "关于实时性与求解精度的折衷假设",
              "description": "是否假设可用两层分解（上层 MILP 下层 NLP）或限制最小求解时间与允许最优性差距（gap）",
              "score": 20,
              "evaluation_focus": "工程折衷",
              "scoring_hint": "高分：给出明确时限与允许 gap（如 ≤1%/≤5%）并指定两层分解策略；中分：提到分解但无数值容限；低分：无实时性/次优解折衷"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "目标函数数学化（含制冷机 Q/COP 与泵功耗）",
              "description": "是否将目标函数按时间累计写出：Σ_t[Σ_i Q_i(t)/COP_i(·)+Σ_j P_pump_j(m_j(t))]+可能的温度惩罚项，并给出各项单位与标度",
              "score": 30,
              "evaluation_focus": "方程推导",
              "scoring_hint": "高分：完整数学式并标注单位、时间步、及温度惩罚权重；中分：目标项齐全但无单位或惩罚项遗漏；低分：目标不完整或表达模糊"
            },
            {
              "sub_criteria": "约束集合构建（最小流量75%、Q=m c ΔT、最小开停时长、ΔT范围）",
              "description": "是否用代数式明确写出所有工程约束的离散化形式并考虑并联泵组合映射关系",
              "score": 30,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：每条工程约束都有数学表达并考虑并联映射；中分：关键约束有但并联映射或离散化欠缺；低分：关键约束缺失或表达错误"
            },
            {
              "sub_criteria": "COP 与泵非线性近似（分段线性/凸近似/查表）",
              "description": "是否构造可在优化中使用的 COP 与泵功率近似（分段线性或凸上界），并说明分段数与插值方法",
              "score": 20,
              "evaluation_focus": "数值化",
              "scoring_hint": "高分：给出分段方案并讨论误差与求解影响；中分：提出近似但无分段细节；低分：不处理非线性或仅口头说明"
            },
            {
              "sub_criteria": "混合整数整合与可行性修复策略（启发式/松弛）",
              "description": "是否说明如何把连续与离散变量整合为 MIQP/MINLP，并给出整数松弛、阈值舍入或邻域回收等可行性修复方法",
              "score": 20,
              "evaluation_focus": "优化实用性",
              "scoring_hint": "高分：明确松弛与回收算法并给出流程；中分：提出方法但无细节或回退策略；低分：未考虑整合或可行性修复"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与算法选择（Gurobi/CPLEX/Bonmin/分层解法）",
              "description": "是否根据问题形式推荐具体求解器（MILP/MIQP 用 Gurobi/CPLEX，MINLP 用 Bonmin/KNITRO），并给出选择理由与计算预算",
              "score": 30,
              "evaluation_focus": "算法匹配",
              "scoring_hint": "高分：推荐合适求解器并给出时间/硬件预算；中分：给出候选求解器但无理由或预算；低分：无明确求解器建议"
            },
            {
              "sub_criteria": "分层求解/实时性策略（上层离散下层连续）",
              "description": "是否提出两层分解（上层 15–60min 求机组开停 MILP，下层 5–15min 求连续流量ΔT QP/NLP）并说明 warm-start 与启发式回收",
              "score": 25,
              "evaluation_focus": "实时部署",
              "scoring_hint": "高分：明确分层频率与 warm-start 流程并给出求解时间示例；中分：提出分层但无频率或回退细节；低分：仅提分层概念"
            },
            {
              "sub_criteria": "非线性项数值处理（泵三次方、COP 插值、分段线性化）",
              "description": "是否在求解阶段给出泵三次方与 COP 非线性处理方案（保留于下层 NLP 或在上层分段线性化），并说明误差与可行性修复",
              "score": 25,
              "evaluation_focus": "数值技巧",
              "scoring_hint": "高分：给出具体分段数、插值方法并讨论误差上界；中分：提出处理方法但无误差评估；低分：未处理或处理不切实际"
            },
            {
              "sub_criteria": "不确定性处理方案（情景法/鲁棒/Chance constraints）",
              "description": "是否提供情景法或鲁棒优化选项，给出情景数量与复杂度折衷建议，并说明实时可行的近似策略",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：给出情景法实现细节与场景数建议并估算计算开销；中分：提出选项但无场景数或折衷；低分：无不确定性处理"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "输出接口与指令格式（机组开停、泵流量、ΔT、可行性标志）",
              "description": "是否在代码层面定义清晰的控制输出格式（每步机组二元序列、每泵设定流量/并联组合、目标ΔT、可执行性/约束余量字段）",
              "score": 30,
              "evaluation_focus": "工程交付",
              "scoring_hint": "高分：给出 JSON/CSV 接口示例与数据字典；中分：描述输出内容但无格式示例；低分：未定义或不完整"
            },
            {
              "sub_criteria": "求解器调用与数值稳定性（warm-start、容错回滚）",
              "description": "是否实现 warm-start、整数松弛回收、求解超时处理与回滚到最近可行解等工程容错措施",
              "score": 25,
              "evaluation_focus": "鲁棒实现",
              "scoring_hint": "高分：代码实现 warm-start 与回滚并记录求解状态；中分：提到措施但未实现或未测试；低分：无容错策略"
            },
            {
              "sub_criteria": "运行时性能与实时性验证（给出平均/最大求解时长）",
              "description": "是否在代码中测量并报告求解时间统计（平均/95分位/最大）以验证满足控制周期 Δt 的实时性要求",
              "score": 25,
              "evaluation_focus": "性能测试",
              "scoring_hint": "高分：提供实测时间并证明在 Δt 内可运行（或提供降阶策略）；中分：仅估算时间无实测；低分：无时间评估"
            },
            {
              "sub_criteria": "测试用例与日志（历史回放、次优解记录）",
              "description": "是否包含历史回放脚本、基准案例与求解日志（含次优解与 gap）以便复现与故障排查",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：包含回放脚本与日志标准并能复现关键结果；中分：有回放但日志不足；低分：无测试用例或日志"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "与基线比较的能耗节能量化（kWh 与 %）",
              "description": "是否将优化结果与题目给定或历史基线比较，量化节能（绝对 kWh、相对百分比）并给出时间窗内累积值",
              "score": 30,
              "evaluation_focus": "量化分析",
              "scoring_hint": "高分：给出 kWh 与 % 改善并给出置信区间或多天平均；中分：给出相对百分比但无置信区间；低分：仅口头断言节能无量化"
            },
            {
              "sub_criteria": "可行性与约束边界分析（最小流量75%与机组最小运行冲突）",
              "description": "是否检验优化解在工程约束下的可行性，报告何时触及最小流量75%、PLR_min 或最小运行时长并分析影响",
              "score": 20,
              "evaluation_focus": "工程验证",
              "scoring_hint": "高分：报告触及约束次数/时段并分析原因；中分：指出触及但无频次统计；低分：未检验可行性或忽略触及情况"
            },
            {
              "sub_criteria": "敏感性分析（ΔT 设定、提高温度1°C 对基准负荷影响）",
              "description": "是否对关键参数（目标ΔT、室内设定温度提高1°C 等）做灵敏度分析并量化对日/周基准冷负荷与耗电的影响",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：包含ΔT变化与 +1°C 情景下的 kWh/负荷变化并绘图或表格；中分：只做单点对比无时序；低分：无敏感性分析"
            },
            {
              "sub_criteria": "不确定性/情景测试结果与稳健性结论",
              "description": "是否对外温±2°C、节假日客流1.5–2倍等情景运行优化并报告解的稳健性与最坏情形耗电增量",
              "score": 25,
              "evaluation_focus": "鲁棒评估",
              "scoring_hint": "高分：提供多情景结果、场景数与最坏情形分析；中分：做了少量情景测试但结论浅显；低分：未进行情景或鲁棒性测试"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3的目标是用历史运行数据建立并验证可用于在线控制的、参数化的建筑—空调灰盒动力学模型并实现在线自适应辨识；为此需按统一流程完成（1）数据预处理：将所有时序数据（室内温度T_in、室外温度T_e、冷冻/冷却水供回温度与流量、机组与泵开停状态、机组与泵功率、可得的客流计数或代理如门禁/销售/人流估计、照明/设备功率或估算值、建筑几何参数等）按建议时间步长（建议5–15分钟）对齐、进行单位校验与量纲统一、插补缺失值（基于时序插值或卡尔曼平滑）、剔除或修正异常值（基于物理阈值与统计异常检测，如箱型/基于中位数的方法），并做必要的低通滤波以降低传感噪声；（2）结构化模型选择：在预设的单舱等温灰盒框架下选定可识别参数与模型形式——如一阶RC（C_bldg、K_tot）或带时延的一阶线性状态空间模型、及用代数式表示的人员热Q_m、设备热Q_e、新风系数β与围护传热Q_t，并准备可替代的数据驱动子模型（ARX/ARMAX或子空间模型）以拟合难以物理刻画的扰动项；（3）参数辨识方法：采用分阶段辨识策略——先在数据中识别能提供良好激励的片段（例如空调关机段或流量恒定段）用最小二乘/非线性最小二乘（Levenberg–Marquardt）或最大似然估计估计静态参数（K_tot、β、Q_e基线）；再用递归最小二乘（RLS）或扩展卡尔曼滤波（EKF/UKF）辨识动态参数（C_bldg、系统增益与时滞τ），若系统非线性显著可用灰箱辨识工具箱（MATLAB System Identification）或子空间辨识方法；在参数估计中应同时估计扰动项（未观测的负荷变化）作为偏置或状态变量以便后续在线补偿；（4）实验设计与可辨识性检验：若历史数据激励不足，应规划短时阶跃试验或设定小幅施控扰动以激励系统，使用灵敏度分析与参数协方差/条件数检验判定参数可辨识性并对相关性高的参数引入正则化或固定化处理；（5）模型验证与不确定度量化：用留出法或时间序列交叉验证在独立验证集上评估预测性能（指标包括RMSE、MAE、NRMSE、R^2、残差自相关与Ljung–Box检验），并用引导法/蒙特卡洛抽样对参数置信区间与预测区间进行估计，必要时对外温与客流用情景（例如外温±2°C、节假日客流1.5–2倍）进行稳健性检验；（6）仿真平台与基准重放：构建可复现的仿真回放环境（MATLAB/Simulink或Python与pandas、numpy、scipy、statsmodels）以按历史输入重演模型并计算预测误差、估计的各冷负荷分量及未测扰动轨迹，为后续控制器设计提供验证基准；（7）在线自适应策略与触发规则：定义在线参数更新策略（例如基于滑动窗口的递归辨识或卡尔曼滤波器，每15–60分钟或在检测到模型残差持续超阈值时触发再识别）、稳健性规则（当参数更新超出物理合理区间或残差自相关性上升时回滚至上一次可靠参数并报警），并输出用于控制器的接口数据（经校准的参数、模型预测与不确定度估计、扰动估计、预测的短期负荷序列）；（8）交付物：一套经清洗的时序数据样本、已辨识模型（方程与参数估计值及置信区间）、验证报告（含误差指标、残差诊断、可辨识性分析与稳健性测试）、在线更新算法与触发准则说明以及用于仿真的脚本/模型文件，使得该模型可独立用于控制策略仿真和后续在线部署。",
      "criteria": {
        "task_understanding": {
          "core_goal": "利用历史运行数据拟合并验证可在线控制的建筑—空调灰盒动力学模型，并实现在线自适应辨识与更新以预测室内温度与各冷负荷分量。",
          "expected_output": "清洗后的5–15分钟对齐数据集；参数化模型文件（方程、C_bldg、K_tot、β、Q_e基线、系统增益、τ及置信区间）；在线递归辨识/卡尔曼滤波代码；仿真回放脚本与误差指标报表（RMSE/MAE/NRMSE/R^2、Ljung–Box）；稳健性情景测试（外温±2°C、客流1.5–2倍）结果；在线更新触发与回滚规则说明；接口输出各负荷分量与短期预测序列。",
          "key_inputs_constraints": "必需输入：T_in(t)、T_e(t)、冷冻/冷却水供回温与流量、机组/泵开停与功率、客流N(t)或代理、照明/设备功率或估算、建筑几何（面积、围护面积估计）；约束：时间步长5–15分钟统一、ΔT_design≈5°C与泵最小流量≥0.75×设计、τ≈20–30分钟初值、单位与量纲统一、异常剔除与外温偏差校正；前置：时间对齐、插补、低通滤波与物理阈值检查。",
          "modeling_type": "拟合+预测+仿真+评价",
          "role_in_pipeline": "作为基于子任务1灰盒结构后的模型落地与在线化环节，依赖前序的数据清洗与物理结构设定，输出用于后续控制策略与节能评估的可在线更新模型与接口；前序：物理灰盒建模与冷负荷拆分；后序：控制器设计与节能对比仿真。",
          "assumptions": "无原始数据样例时，允许以代理客流（节假日为工作日1.5–2倍）与外温偏差+2°C校正作为初始；采用单舱等温、忽略潜热与分区差；扰动项以加性偏置状态建模。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确‘拟合并验证灰盒动力学模型’与‘在线自适应辨识’的双目标",
              "description": "是否同时识别离线参数拟合+验证与在线递归更新（RLS/EKF/UKF）两阶段目标，并指出用于‘预测’室内温度与负荷分量的用途。",
              "score": 35,
              "evaluation_focus": "问题界定/目标分解",
              "scoring_hint": "高分：清晰分离离线验证与在线更新并说明各自产出；中分：提到在线或离线其一但未区分流程；低分：未识别在线自适应或仅泛谈建模。"
            },
            {
              "sub_criteria": "识别关键输入与约束（5–15分钟步长、ΔT_design≈5°C、流量≥75%）",
              "description": "是否点明时间分辨率、设计供回差与泵最低流量等硬约束对数据与模型的影响。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：同时列出步长、ΔT、流量下限并说明违反的处理；中分：提到其一两项；低分：未提关键工程约束。"
            },
            {
              "sub_criteria": "定位模型输出与接口（各冷负荷分量与短期预测序列）",
              "description": "是否明确模型需输出Q_t、Q_v、Q_m、Q_e、扰动估计与T_in预测供控制器使用。",
              "score": 20,
              "evaluation_focus": "输出定义",
              "scoring_hint": "高分：罗列各分量与预测、不确定度；中分：仅给T_in预测；低分：输出含糊或缺失。"
            },
            {
              "sub_criteria": "识别验证指标与诊断（RMSE/MAE/NRMSE/R^2、Ljung–Box）",
              "description": "是否指定用于评价与残差诊断的具体统计检验与指标。",
              "score": 20,
              "evaluation_focus": "评价标准",
              "scoring_hint": "高分：至少3个指标+残差检验；中分：仅RMSE/MAE；低分：无量化指标。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述单舱等温灰盒与时滞τ≈20–30分钟",
              "description": "是否准确复述一阶RC/状态空间结构及典型时滞设定与作用。",
              "score": 30,
              "evaluation_focus": "模型表述",
              "scoring_hint": "高分：给出C_bldg、K_tot、τ在方程位置；中分：提到一阶但无方程位置信息；低分：模型类型不清或错误。"
            },
            {
              "sub_criteria": "复述数据预处理流程（对齐、插补、异常、低通）",
              "description": "是否逐项说明时间对齐、单位统一、插补方式、异常剔除与平滑目的。",
              "score": 30,
              "evaluation_focus": "流程复盘",
              "scoring_hint": "高分：列出方法如卡尔曼平滑/箱型法；中分：泛述清洗；低分：未提预处理。"
            },
            {
              "sub_criteria": "复述参数分层辨识（静态K_tot/β/Q_e与动态C_bldg/τ）",
              "description": "是否说明先静态参数（最小二乘）后动态参数（RLS/EKF）策略。",
              "score": 25,
              "evaluation_focus": "方法复述",
              "scoring_hint": "高分：清楚区分并举激励片段示例；中分：只列方法不分层；低分：方法与参数错配。"
            },
            {
              "sub_criteria": "复述验证与稳健性（外温±2°C、客流1.5–2倍）",
              "description": "是否包含情景稳健性检验设定及期望输出。",
              "score": 15,
              "evaluation_focus": "稳健性理解",
              "scoring_hint": "高分：两种情景皆覆盖；中分：仅其一；低分：无情景分析。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "单舱等温与线性传热近似的合理性与边界",
              "description": "是否阐明忽略潜热、分区差与线性K_tot适用范围（5–15分钟尺度）。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：说明何时失效及对策；中分：仅列假设；低分：无或不当假设。"
            },
            {
              "sub_criteria": "客流N(t)代理与Q_m=q_p·N(t)设定",
              "description": "是否说明无计数时用工作日/节假日1.5–2倍比例并可回归校准q_p与Q_e。",
              "score": 25,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：含校准与不确定度；中分：仅给比例；低分：未处理缺失客流。"
            },
            {
              "sub_criteria": "外温偏差校正（+2°C）与传感噪声假设",
              "description": "是否提出外温修正与低通/卡尔曼滤波抑噪的前提与方法。",
              "score": 20,
              "evaluation_focus": "数据处理假设",
              "scoring_hint": "高分：给出滤波参数范围或原则；中分：泛述滤波；低分：无说明。"
            },
            {
              "sub_criteria": "执行约束（ΔT_design≈5°C、流量≥75%）建模处理",
              "description": "是否将硬约束并入仿真/识别（如权重/截断/约束优化）。",
              "score": 25,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：明确约束实现方式；中分：只口头说明；低分：忽视约束。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "状态空间/一阶RC方程与时滞实现",
              "description": "是否给出C_bldg·dT_in/dt=−Q_ac_eff(t−τ)/η_dist+Q_t+Q_v+Q_m+Q_e离散化形式与τ实现（例如Pade或队列缓冲）。",
              "score": 30,
              "evaluation_focus": "数理推导/离散化",
              "scoring_hint": "高分：提供稳定离散化与滞后实现细节；中分：仅连续式；低分：公式缺失或不一致。"
            },
            {
              "sub_criteria": "负荷组件化：Q_t=K_tot(T_e−T_in), Q_v=β·Q_t, Q_m, Q_e",
              "description": "是否模块化构建各项并定义单位、接口与可替代子模型（ARX扰动）。",
              "score": 25,
              "evaluation_focus": "结构设计",
              "scoring_hint": "高分：清晰接口+单位一致；中分：模块不全；低分：混淆或遗漏。"
            },
            {
              "sub_criteria": "执行侧输入Q_ac_eff=m_fw·c_p·ΔT_fw与约束嵌入",
              "description": "是否正确从流量与供回差计算冷量并体现ΔT与流量下限约束。",
              "score": 20,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：边界检查与异常处理；中分：仅公式；低分：与物理不符。"
            },
            {
              "sub_criteria": "扰动项建模与可辨识性考虑",
              "description": "是否加入加性偏置/随机游走扰动状态，并讨论参数相关性与正则化/固定化。",
              "score": 25,
              "evaluation_focus": "系统辨识性",
              "scoring_hint": "高分：含灵敏度或协方差分析；中分：仅提扰动；低分：忽略扰动。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "静态参数估计（OLS/NLLS/ML）与激励片段选择",
              "description": "是否基于关机/恒流量片段估计K_tot、β、Q_e并报告收敛与置信区间。",
              "score": 30,
              "evaluation_focus": "估计策略",
              "scoring_hint": "高分：片段筛选+区间；中分：仅估计值；低分：未利用激励或无置信度。"
            },
            {
              "sub_criteria": "动态参数与状态在线辨识（RLS/EKF/UKF）",
              "description": "是否实现递归更新C_bldg/系统增益/τ或等效，并调参Q/R、遗忘因子λ。",
              "score": 30,
              "evaluation_focus": "在线算法",
              "scoring_hint": "高分：给出λ或Q/R设置依据；中分：实现无调参说明；低分：无在线更新。"
            },
            {
              "sub_criteria": "可辨识性与正则化/参数固定化",
              "description": "是否使用条件数/协方差评估相关性并对弱辨识参数正则或固定。",
              "score": 20,
              "evaluation_focus": "数值稳定性",
              "scoring_hint": "高分：量化指标与处理；中分：口头说明；低分：未检验。"
            },
            {
              "sub_criteria": "验证与不确定度量化（交叉验证、引导法/MC）",
              "description": "是否计算RMSE/MAE/NRMSE/R^2、Ljung–Box，并给参数/预测区间。",
              "score": 20,
              "evaluation_focus": "统计评价",
              "scoring_hint": "高分：完整指标+区间；中分：部分指标；低分：无验证或不合规。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据预处理管道（对齐、单位、插补、异常、低通）可复现实现",
              "description": "是否以Python/MATLAB脚本模块化实现并支持配置步长5–15分钟。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：函数化+单元测试或示例；中分：脚本但耦合；低分：无或不可复现。"
            },
            {
              "sub_criteria": "灰盒仿真回放与接口（输入→负荷分量→T_in预测）",
              "description": "是否提供仿真API与批量回放、导出各Q_*与残差序列。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：清晰接口与文档；中分：可运行但零散；低分：缺少关键输出。"
            },
            {
              "sub_criteria": "在线自适应辨识循环与触发/回滚规则",
              "description": "是否实现残差超阈值触发、参数物理边界检查与回滚策略。",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：含阈值与边界配置；中分：有更新无保护；低分：无触发或回滚。"
            },
            {
              "sub_criteria": "验证与报告生成（指标表、图表、情景测试）",
              "description": "是否自动输出RMSE/MAE等报表与外温±2°C、客流倍增情景图。",
              "score": 20,
              "evaluation_focus": "可视化/自动化",
              "scoring_hint": "高分：一键生成；中分：手工流程；低分：无报告。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "预测性能量化与基线比较",
              "description": "是否报告验证集RMSE/MAE/NRMSE/R^2并与简单基线（持久性/均值）对比。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：显著优于基线且解释原因；中分：略优或无基线；低分：未量化或劣于基线。"
            },
            {
              "sub_criteria": "残差诊断与Ljung–Box自相关检验",
              "description": "是否展示残差自相关、偏差与模型失配讨论与改进方向。",
              "score": 25,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：通过检验或解释偏差；中分：仅图无检验；低分：无残差分析。"
            },
            {
              "sub_criteria": "参数物理可解释性（C_bldg、K_tot、β、Q_e）",
              "description": "是否评估参数量级与物理边界，并讨论不确定度与敏感性。",
              "score": 25,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：参数落入合理范围并给区间；中分：仅数值；低分：不合理无解释。"
            },
            {
              "sub_criteria": "稳健性情景与在线更新收益",
              "description": "是否展示外温±2°C、客流1.5–2倍下性能变化与在线更新带来的误差下降。",
              "score": 20,
              "evaluation_focus": "稳健性/对比",
              "scoring_hint": "高分：量化误差变化与触发次数；中分：定性描述；低分：无情景或无对比。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务 4（稳健性、敏感性与工程实施约束、风险与经济分析）的目标是对中央空调节能控制方案在参数不确定性、外部扰动与工程约束下的性能与安全性进行系统化量化与工程化处置，并输出可执行的风险缓释措施与经济决策依据；为实现该目标，具体工作应包括：一是明确模型与控制中所有不确定源及其取值范围（例如围护传热系数k、建筑热容C、新风系数β、COP随冷却水温度与部分负荷的响应曲线、泵最小流量75%约束、客流与外温预测误差、电价波动与机组启停成本），并构建这些不确定量的概率分布或离散情景（基于历史数据拟合或专家评估）；二是开展敏感性分析，包括局部灵敏度（对关键参数的偏导数或单参一变分析）、全局灵敏度（Sobol 指数或Morris筛选）与参数重要性排序，以确定哪些参数对能耗、室内温度偏差与设备应力影响最大；三是进行不确定性传播与稳健性评估，采用蒙特卡洛抽样与拉丁超立方采样生成参数样本、计算关键输出的分布（例如能耗期望与方差、温度违约概率、峰值需量），并用情景法或场景树在预测控制框架中评估最坏情形与平均情形下的控制性能；四是设计并评估鲁棒/概率约束控制策略（如chance-constrained MPC或情景化鲁棒优化），以在给定违约概率阈值下最小化能耗或成本，同时满足温度、安全流量与最小开停时长等硬约束；五是把设备寿命与运维成本内嵌进经济评价模型，通过建立启停耗损函数、维护成本率、峰谷电价与需量电费模型，计算策略的累计运行成本、净现值（NPV）、回收期与单位节能成本，并对需求响应激励进行可行性评估；六是基于上述分析制定工程实施约束与安全裕度（明确泵最低流量、机组最小连续运行/停机时间、允许的最大日启停次数、温度违约上限与报警阈值），并定义在线监测与回滚策略（当模型残差或温度违约概率超过阈值时自动恢复到保守策略、并记录诊断信息）；七是开展压力测试与试点验证，包括若干代表性极端情景（外温偏差±2°C、节假日客流倍增、单台机组故障）下的仿真与现场 A/B 试验，记录能耗、温度偏差、启停次数与维护相关指标以验证鲁棒性；八是明确所需数据与工具链：输入包括逐时或逐5–15分钟的室内/室外温度、冷冻/冷却水供回温度与流量、机组及泵开停与功率记录、历史客流与电价时间序列、COP与泵曲线或查表数据；推荐使用的分析工具包括 Python（numpy/pandas、SALib、pyomo/CasADi + 状态估计库）、MATLAB/Simulink（含System Identification）、数值求解器（Gurobi/CPLEX/BARON）以及蒙特卡洛与Sobol实现库；九是输出成果须包含：敏感性与不确定性分析报告（含Sobol或Morris指数、关键参数分布影响图）、鲁棒控制参数建议（置信水平、温度与流量裕度）、经济评价报告（NPV、回收期、单位节能成本）、实施约束清单与监测/回滚程序、以及压力测试与试点结果汇总；最后，要求将上述分析作为迭代流程的一部分：初次部署后定期（例如季度或在显著季节变化后）用新增运行数据重复敏感性与稳健性分析，更新概率模型与安全裕度，以保持策略在实际运行条件下的长期可靠性与经济性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在参数与外部扰动不确定下，评估与优化中央空调节能控制方案的稳健性与经济性，量化温度违约概率、能耗/成本分布并提出鲁棒/概率约束策略与安全裕度。",
          "expected_output": "敏感性与不确定性分析报告（含Sobol/Morris指数与影响图）、稳健性评估图表（能耗与室温违约分布、峰值需量）、鲁棒/概率约束控制参数与安全裕度清单、经济评价报表（NPV、回收期、单位节能成本）、压力测试与试点结果汇总、可执行监测/回滚策略。",
          "key_inputs_constraints": "输入：{k、C、β、COP曲线、泵最小流量75%阈值、PLR与最小开停时长、T_out预测、客流N(t)分布、电价/需量费、启停成本}；数据频率5–15分钟；需前序子任务提供灰盒负荷与MPC模型接口；约束：温度上下限、ΔT设计值≈5°C、泵流量≥0.75设计流量、机组最小连续运行/停机时长。",
          "modeling_type": "评价+仿真+优化",
          "role_in_pipeline": "作为稳健性与经济性评估及工程实施环节，依赖子任务1–3的灰盒模型与MPC问题表述与已辨识参数；向后输出部署所需安全裕度、鲁棒控制参数与回滚策略，用于现场实施与周期性复审。",
          "assumptions": "若缺少完整COP/泵曲线，允许用分段线性近似与厂商典型曲线；若无实时客流，用工作日/节假日1×与1.5–2×情景替代；经济评估贴现率默认8%。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "不确定源识别（k、C、β、COP、泵75%、客流与外温预测、电价与启停成本）",
              "description": "是否完整列出并界定这些不确定量的范围/分布，并区分参数不确定与扰动不确定对温度违约与能耗的影响路径。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：≥8项不确定源且给出范围/分布；中分：4–7项或缺分布；低分：<4项或无范围。"
            },
            {
              "sub_criteria": "工程约束与安全边界（ΔT≈5°C、泵≥75%、PLR与最小开停时长）",
              "description": "是否将关键工程约束明确化为可检验的数学不等式/逻辑约束并说明违反后果。",
              "score": 30,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：全部约束量化且可实施；中分：部分量化或含糊；低分：仅口述或遗漏关键约束。"
            },
            {
              "sub_criteria": "评价指标定义（温度违约概率、能耗/成本期望与方差、峰值需量）",
              "description": "是否提前定义稳健性与经济性度量用于后续仿真与优化目标/约束。",
              "score": 35,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：指标齐全含概率阈值α；中分：缺1–2项或阈值不明；低分：无定量指标。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "目标重述：评估与优化稳健性与经济性（chance-constrained/情景法）",
              "description": "是否把‘评估+鲁棒/概率约束优化’两部分及对象（温度、能耗、成本）清晰表述，并与先验模型接口对齐。",
              "score": 35,
              "evaluation_focus": "表达精准",
              "scoring_hint": "高分：覆盖评估与优化并提到概率约束；中分：只谈评估或优化；低分：偏离任务。"
            },
            {
              "sub_criteria": "时间尺度与采样（5–15分钟、预测窗）",
              "description": "是否明确分析与控制在相同步长与预测窗下进行，并说明对τ≈20–30分钟滞后的处理。",
              "score": 30,
              "evaluation_focus": "时序一致",
              "scoring_hint": "高分：给出步长与窗长及滞后处理；中分：仅给步长或窗长；低分：未说明。"
            },
            {
              "sub_criteria": "输出交付对齐（报告、图表、清单、回滚策略）",
              "description": "是否将预期输出列表映射到后续部署需要的文档与接口。",
              "score": 35,
              "evaluation_focus": "交付对齐",
              "scoring_hint": "高分：一一对应含格式/频率；中分：列出但不完整；低分：无明确输出。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "不确定分布/情景设定（蒙特卡洛与拉丁超立方）",
              "description": "是否为k、C、β、COP、N(t)、T_out等给出分布或离散情景及来源（历史/专家）。",
              "score": 35,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：每项有分布与参数；中分：部分设定或无来源；低分：笼统假设。"
            },
            {
              "sub_criteria": "电价与启停成本模型",
              "description": "是否假设峰谷电价、需量费与启停折旧函数并给出参数与单位。",
              "score": 25,
              "evaluation_focus": "经济建模",
              "scoring_hint": "高分：含需量费与折旧；中分：仅电价或口径不一；低分：未建模。"
            },
            {
              "sub_criteria": "安全裕度与报警阈值（违约概率α、温度/流量裕度）",
              "description": "是否设定如P(违约)≤α、ΔT与流量保守系数，并说明选择依据。",
              "score": 40,
              "evaluation_focus": "风险控制",
              "scoring_hint": "高分：量化阈值与依据；中分：给出但无依据；低分：无阈值。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "敏感性分析框架（局部偏导、Morris、Sobol）",
              "description": "是否构建可重复的局部与全局敏感性流程并与能耗/温度/设备应力挂钩。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：含Morris或Sobol实施细节；中分：仅局部或无实现细节；低分：未建立。"
            },
            {
              "sub_criteria": "不确定性传播与场景树MPC",
              "description": "是否给出蒙特卡洛/拉丁超立方仿真与情景化MPC评价方法及样本量/场景树深度。",
              "score": 30,
              "evaluation_focus": "仿真设计",
              "scoring_hint": "高分：样本量/收敛准则明确；中分：方法有但参数空缺；低分：缺此模块。"
            },
            {
              "sub_criteria": "鲁棒/概率约束模型（chance constraints）",
              "description": "是否把温度、流量、开停时长约束转化为概率或保守确定性等价并可解。",
              "score": 40,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：给出等价转化或场景近似；中分：仅口述思路；低分：未建模。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与数值策略（MILP/MIQP/MINLP与两层分解）",
              "description": "是否匹配问题非线性与实时性选择合适求解器与分层（上层调度MILP，下层QP/NLP）。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：指明求解器与时间限；中分：泛泛而谈；低分：与问题不匹配。"
            },
            {
              "sub_criteria": "非线性处理（泵三次方、COP分段线性）",
              "description": "是否说明泵功率三次关系与COP-冷凝温度耦合的线性化/查表近似与误差控制。",
              "score": 30,
              "evaluation_focus": "数值近似",
              "scoring_hint": "高分：分段数与误差上界；中分：仅提近似；低分：忽略非线性。"
            },
            {
              "sub_criteria": "不确定优化（情景数/违约概率α/鲁棒度-成本折衷）",
              "description": "是否给出场景数量、α与计算复杂度折衷，并展示可行性恢复与暖启动。",
              "score": 40,
              "evaluation_focus": "鲁棒优化",
              "scoring_hint": "高分：量化α与场景≥20且有恢复策略；中分：参数不全；低分：未涉及。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "工具链与可复现性（Python SALib/pyomo或MATLAB）",
              "description": "是否给出可运行脚本或伪代码，含依赖、随机种子、数据接口（5–15分钟步长）。",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：脚本可复现；中分：片段或缺依赖；低分：无实现。"
            },
            {
              "sub_criteria": "敏感性与蒙特卡洛实现",
              "description": "是否用SALib实现Morris/Sobol并用LHS/MC生成样本，含样本量与并行配置。",
              "score": 35,
              "evaluation_focus": "实现完整性",
              "scoring_hint": "高分：含样本量≥1000与并行；中分：样本不足或无并行；低分：未实现。"
            },
            {
              "sub_criteria": "鲁棒/概率约束求解脚本与监测回滚逻辑",
              "description": "是否提供MPC求解脚本接口与在线监测（违约概率/残差）和回滚到保守策略的代码路径。",
              "score": 30,
              "evaluation_focus": "工程落地",
              "scoring_hint": "高分：含阈值与日志；中分：仅接口；低分：无落地逻辑。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "敏感性结果解读（Sobol/Morris指数排序）",
              "description": "是否给出参数重要性排序并解释对能耗、温度偏差与设备应力的影响与管理含义。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：排序+管理建议；中分：仅排序；低分：无解释。"
            },
            {
              "sub_criteria": "稳健性与违约概率评估（α达成率）",
              "description": "是否报告温度违约概率与置信区间，并检验设定α（如5%）是否满足。",
              "score": 30,
              "evaluation_focus": "统计评估",
              "scoring_hint": "高分：给CI且满足α；中分：仅点估计；低分：未评估或超标。"
            },
            {
              "sub_criteria": "经济性指标（NPV、回收期、单位节能成本、峰值需量）",
              "description": "是否计算基线对比的累计成本、NPV与回收期，并分析峰值需量变化与启停成本权衡。",
              "score": 25,
              "evaluation_focus": "经济分析",
              "scoring_hint": "高分：指标全面且相对基线；中分：部分指标；低分：无经济分析。"
            },
            {
              "sub_criteria": "压力测试与试点A/B结果",
              "description": "是否在外温±2°C、客流倍增、机组故障情景下报告能耗、温度偏差、启停次数与可行性。",
              "score": 15,
              "evaluation_focus": "稳健验证",
              "scoring_hint": "高分：≥3情景含量化结果；中分：1–2情景；低分：无压力测试。"
            }
          ]
        }
      }
    }
  }
}