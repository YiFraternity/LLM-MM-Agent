{
  "task_id": "2019_F",
  "problem": "假设飞行器的飞行区域如图 1 所示，出发点为 A 点，目的地为 B 点。其航迹约束如下：\n\n(1) 飞行器在空间飞行过程中需要实时定位，其定位误差包括垂直误差和水平误差。飞行器每飞行 1m，垂直误差和水平误差将各增加 8 个专用单位，以下简称单位。到达终点时垂直误差和水平误差均应小于 $\\theta$ 个单位，并且为简化问题，假设当垂直误差和水平误差均小于 $\\theta$ 个单位时，飞行器仍能够按照规划路径飞行。\n\n(2) 飞行器在飞行过程中需要对定位误差进行校正。飞行区域中存在一些安全位置（称之为校正点）可用于误差校正，当飞行器到达校正点即能够根据该位置的误差校正类型进行误差校正。校正垂直和水平误差的位置可根据地形在航迹规划前确定（如图 1 为某条航迹的示意图，黄色的点为水平误差校正点，蓝色的点为垂直误差校正点，出发点为 A 点，目的地为 B 点，黑色曲线代表一条航迹）。可校正的飞行区域分布位置依赖于地形，无统一规律。若垂直误差、水平误差都能得到及时校正，则飞行器可以按照预定航线飞行，通过若干个校正点进行误差校正后最终到达目的地。\n\n(3) 在出发地 A 点，飞行器的垂直和水平误差均为 0。\n\n(4) 飞行器在垂直误差校正点进行垂直误差校正后，其垂直误差将变为 0，水平误差保持不变。\n\n(5) 飞行器在水平误差校正点进行水平误差校正后，其水平误差将变为 0，垂直误差保持不变。\n\n(6) 当飞行器的垂直误差不大于 $\\alpha_1$ 个单位，水平误差不大于 $\\alpha_2$ 个单位时才能进行垂直误差校正。\n\n(7) 当飞行器的垂直误差不大于 $\\beta_1$ 个单位，水平误差不大于 $\\beta_2$ 个单位时才能进行水平误差校正。\n\n(8) 飞行器在转弯时受到结构和控制系统的限制，无法完成即时转弯（飞行器前进方向无法突然改变），假设飞行器的最小转弯半径为 200m。\n\n请你们团队为上述智能飞行器建立从 A 点飞到 B 点的航迹规划一般模型和算法并完成以下问题：\n\n问题 1. 针对附件 1 和附件 2 中的数据分别规划满足条件 (1)～(7) 时飞行器的航迹，并且综合考虑以下优化目标：\n(A) 航迹长度尽可能小；(B) 经过校正区域进行校正的次数尽可能少。\n并讨论算法的有效性和复杂度。\n\n其中附件 1 数据的参数为：\n\\[\n\\alpha_1 = 25, \\, \\alpha_2 = 15, \\, \\beta_1 = 20, \\, \\beta_2 = 25, \\, \\theta = 30, \\, \\delta = 0.001\n\\]\n\n附件 2 中数据的参数为：\n\\[\n\\alpha_1 = 20, \\, \\alpha_2 = 10, \\, \\beta_1 = 15, \\, \\beta_2 = 20, \\, \\theta = 20, \\, \\delta = 0.001\n\\]\n\n请绘出两个数据集的航迹规划路径，并将结果（即飞行器从起点出发经过的误差校正点编号及校正前误差）依次填入航迹规划结果表，放于正文中，同时将两个数据集的结果填入附件 3 的 Sheet1 和 Sheet2 中。\n\n问题 2. 针对附件 1 和附件 2 中的数据（参数与第一问相同）分别规划满足条件 (1)～(8) 时飞行器的航迹，并且综合考虑以下优化目标：\n(A) 航迹长度尽可能小；(B) 经过校正区域进行校正的次数尽可能少。\n并讨论算法的有效性和复杂度。\n请绘出两个数据集的航迹规划路径（直线用黑色，圆弧用红色），并将结果（即飞行器从起点出发经过的误差校正点编号及校正前误差）依次填入航迹规划结果表，放于正文中，同时将两个数据集的结果填入附件3的Sheet3和Sheet4中。\n问题3.飞行器的飞行环境可能随时间动态变化，虽然校正点在飞行前已经确定，但飞行器在部分校正点进行误差校正时存在无法达到理想校正的情况（即将某个误差精确校正为0），例如天气等不可控因素导致飞行器到达校正点也无法进行理想的误差校正。现假设飞行器在部分校正点（附件1和附件2中F列标记为“1”的数据）能够成功将某个误差校正为0的概率是80%，如果校正失败，则校正后的剩余误差为min(error，5)个单位（其中error为校正前误差，min为取小函数），并且假设飞行器到达该校正点时即可知道在该点处是否能够校正成功，但不论校正成功与否，均不能改变规划路径。请针对此情况重新规划问题1所要求的航迹，并要求成功到达终点的概率尽可能大。\n请绘出两个数据集的航迹规划路径，并将结果（即飞行器从起点出发经过的误差校正点编号及校正前误差）依次填入航迹规划结果表，放于正文中，同时将两个数据集的结果填入附件3的Sheet5和Sheet6中。\n再次提醒：问题1，问题2和问题3中的结果表格除了需要放在正文中，还需要汇总到附件3的Excel表格文件的6个不同Sheet中，表x的结果放入Sheet x中，最后将汇总的Excel表格命名为：参赛队号-结果表.xlsx，以附件形式提交。\n\\begin{table}\n\\centering\n\\begin{tabular}{|c|c|c|c|}\n\\hline\n校正点编号 & 校正前垂直误差 & 校正前水平误差 & 校正点类型 \\\\\n\\hline\n0 & 0 & 0 & 出发点A \\\\\n\\hline\n$N_2$ & & & ** \\\\\n\\hline\n$N_3$ & & & ** \\\\\n\\hline\n$\\cdots$ & $\\cdots$ & $\\cdots$ & $\\cdots$ \\\\\n\\hline\n$N_n$ & & & 终点B \\\\\n\\hline\n\\end{tabular}\n\\caption{航迹规划结果表X}\n\\end{table}\\begin{itemize}\n    \\item 01 表示水平误差校正成功，\n    \\item 12 表示垂直误差校正不成功，\n    \\item 02 表示水平误差校正不成功\n\\end{itemize}",
  "subtask": {
    "1": {
      "subtask": "子任务一（精确化与数学化的动力学与复位算子建模）应独立完成下列工作：目标是把题目描述的误差累积、校正可行性与校正结果（含随机失败情形）以一组明确、可程序化调用的数学公式、逻辑谓词和接口函数形式化，输出可直接用于后续数值仿真或算法（即“状态转移算子”规范）；为此须明确输入参数、状态变量、约束条件、确定性演化方程、复位算子定义及其适用判定规则和随机化扩展并给出清晰的函数原型说明。具体要求如下：定义状态向量与初始条件——位置由校正点集合 P={p0,...,pN} 给出，每点含唯一编号、三维坐标 xi=(xi,yi,zi)（米）与类型 ti∈{V(垂直校正),H(水平校正),none} 及问题点标志 problem_flag∈{0,1}；误差状态 s = (v,h) 表示垂直与水平误差（题目单位），初始状态 s0=(0,0) 在起点 p0；全局参数需明确为误差增长率 kv,kh（题中均为 8 单位/米）、门槛参数 α1,α2,β1,β2、终点容忍 θ、数值容差/离散化精度 δ，以及可选的最小转弯半径 ρ_min（若在几何上考虑曲率约束）与随机校正成功概率 p_succ（问题3 中为 0.8）；所有变量与参数的单位须被记录。给出确定性误差演化方程：沿任意连续可行轨段（用弧长 s 参数化，轨段长度 L 为输入，由几何模块计算——若忽略曲率则 L = EuclideanDistance(x_start,x_end)，若考虑曲率则 L 为规划曲线的弧长）误差按线性增量演化 dv/ds = kv, dh/ds = kh，故到达段末的到达前误差为 (v_after, h_after) = (v_before + kv·L, h_before + kh·L)；明确说明 L 必须为轨迹的实际弧长（非直线投影），并在接口中注明如何传入。定义复位算子及可行性谓词：垂直复位算子 R_V：若且仅若到达点为垂直校正点 (ti=V) 且到达前误差满足 v_after ≤ α1 且 h_after ≤ α2，则执行 R_V(v,h) → (0, h)（垂直误差置零、水平方差保持不变）；水平复位算子 R_H：若且仅若 ti=H 且 v_after ≤ β1 且 h_after ≤ β2，则 R_H(v,h) → (v, 0)。若到达点类型与欲执行复位不符或门槛不满足，则不执行复位，错误保持 (v_after,h_after)。为数值实现还应明确整数/浮点比较的容差：在判定 ≤ 时允许紧容差 δ（例如以 v ≤ α1 + δ 视为满足）。对随机情形（问题3）将复位算子扩展为随机映射：若到达点为 problem_flag=1 且满足门槛，则复位尝试以概率 p_succ 成功（成功时行为同确定性复位），以概率 1−p_succ 失败；失败时的效果为将对应维度的误差替换为 min(error_before_reset, 5)（题目规则），未被复位的另一维不变；若门槛不满足则复位不被尝试。明确规定：到达点时飞行器可“观测”复位是否成功（即在计算模拟中可分支处理），但该观测与路径选择无关（仅为下游状态的确定性输入）。此外列出所需输出与接口契约：提供函数/算子原型（示例）—— state_after_segment = propagate_error((v,h), L, kv, kh) 返回 (v_after,h_after)； [v_new,h_new,reset_flag,success_flag] = attempt_reset((v_after,h_after), ti, thresholds, p_succ, problem_flag, δ) 返回复位后的状态、是否尝试复位、若随机则返回成功与否； predicate_can_reset = can_reset((v_after,h_after), ti, thresholds, δ) 返回布尔。明确终点可接受判定为 v ≤ θ + δ 且 h ≤ θ + δ。最后列出所做的建模假设（必须包含且仅限以下项）：误差仅与航程长度线性相关且与时间/速度无关；复位为到达点的瞬时动作且不消耗额外飞行里程或时间；复位行为独立对待垂直/水平但复位可执行性受两维误差门槛耦合约束；随机复位的独立性假设（若用于概率计算需说明事件独立性或在调用端处理相关性）；并指明该子任务的最终交付物为一份文档化的、可执行的“状态转移规范”——包含所有变量和参数的定义表、上述数学公式与逻辑判定、函数原型与输入/输出格式说明、容差 δ 的使用规则及若干简单示例（例如从已知 (v,h) 和给定轨段长度 L 计算到达前误差并判定/执行复位的例子）以确保后续模块可无歧义地调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "形式化并评估飞行器误差演化与复位算子，构建可程序化的状态转移规范以支持仿真与路径优化",
          "expected_output": "一份可执行的状态转移规范：变量/参数定义表、确定性演化方程、复位算子与可行性谓词、随机扩展、终点判定、容差规则，以及函数原型与I/O说明与示例代码片段/伪代码",
          "key_inputs_constraints": "输入：P={p0..pN}含编号、坐标(x,y,z)、类型ti∈{V,H,none}、problem_flag∈{0,1}；状态s=(v,h)；参数kv,kh=8单位/米，α1,α2,β1,β2，θ，δ，ρ_min(可选)，p_succ(问题3为0.8)；约束：到达前误差判定使用≤与δ容差；轨段长度L为实际弧长；复位可行需同时满足两维门槛",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为路径搜索/优化前的动力学与误差复位基础层模块；前序依赖：校正点数据与几何弧长L计算模块；后序输出供：最短路/采样树搜索、概率可达性评估、可行性筛选使用"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确仿真对象与状态转移（误差演化+复位算子）",
              "description": "是否准确识别本子任务是“误差(v,h)随弧长L线性增长并在校正点按门槛触发复位”的状态转移建模，而非路径优化本身",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰指出dv/ds=kv, dh/ds=kh与R_V/R_H；中分：只提到线性增长或复位其一；低分：混淆为路径长度优化或未提状态转移"
            },
            {
              "sub_criteria": "区分确定性与随机复位（p_succ, problem_flag）",
              "description": "是否识别问题3的随机复位机制与失败置min(error,5)并与问题1/2的确定性情形区分",
              "score": 35,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：分别描述确定性与随机映射；中分：提到概率但未给失败规则；低分：忽略随机或错误概率数值"
            },
            {
              "sub_criteria": "容差δ与判定边界（≤与δ）",
              "description": "是否识别边界判定需采用δ松弛以避免数值误判，并明确用于可行性与终点判定",
              "score": 30,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：给出v≤阈值+δ、h≤阈值+δ；中分：仅口头提及容差；低分：无容差或使用不当"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "变量与单位复述（P, ti, s=(v,h), kv,kh, θ, ρ_min）",
              "description": "是否完整复述关键变量、类型与单位（米/单位/概率），并明确起点s0=(0,0)",
              "score": 30,
              "evaluation_focus": "规范表达",
              "scoring_hint": "高分：逐一定义并含单位；中分：缺少1-2个量或单位；低分：变量缺失或单位混乱"
            },
            {
              "sub_criteria": "轨段弧长L与几何来源",
              "description": "是否说明L应为实际弧长（直线为欧氏距离，曲率约束时为曲线弧长）并由几何模块提供",
              "score": 35,
              "evaluation_focus": "系统接口",
              "scoring_hint": "高分：明确接口与两种情形；中分：仅说“距离”；低分：将L误作直线投影固定"
            },
            {
              "sub_criteria": "复位门槛双维耦合（α1,α2,β1,β2）",
              "description": "是否准确表述垂直/水平复位的双阈值可行性条件",
              "score": 35,
              "evaluation_focus": "逻辑严谨",
              "scoring_hint": "高分：分别给出v≤α1∧h≤α2与v≤β1∧h≤β2；中分：缺一条或不含δ；低分：搞错阈值或单维条件"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "线性误差增长与速度无关假设",
              "description": "明确假设误差仅随航程线性增长，独立于时间与速度",
              "score": 30,
              "evaluation_focus": "假设清晰",
              "scoring_hint": "高分：清楚声明并与dv/ds=kv对应；中分：隐含提及；低分：提出非线性或时间相关而无依据"
            },
            {
              "sub_criteria": "瞬时复位与零里程消耗",
              "description": "假设复位在到达点瞬时发生且不增加L或时间",
              "score": 25,
              "evaluation_focus": "建模边界",
              "scoring_hint": "高分：明确并说明影响；中分：提及但含糊；低分：未说明或与传播耦合"
            },
            {
              "sub_criteria": "随机复位独立性与可观测性",
              "description": "声明随机复位事件独立（或交由上层处理相关性）且到达时可观测成功与否但不影响路径",
              "score": 25,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：独立性+可观测性均阐明；中分：只提其一；低分：与路径决策耦合或无说明"
            },
            {
              "sub_criteria": "终点容忍判定与δ使用",
              "description": "假设终点可接受条件为v≤θ+δ且h≤θ+δ",
              "score": 20,
              "evaluation_focus": "判定规范",
              "scoring_hint": "高分：清楚给出双条件；中分：单条件或无δ；低分：未给终点判定"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "确定性演化方程（dv/ds=kv, dh/ds=kh）",
              "description": "提供从(s_before,L)到(s_after)的闭式更新：v+=kv·L, h+=kh·L，并注明L为弧长",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式完备且约束L来源；中分：缺单位或弧长说明；低分：错误关系或遗漏变量"
            },
            {
              "sub_criteria": "复位算子R_V/R_H与可行性谓词can_reset",
              "description": "给出R_V:(0,h)、R_H:(v,0)及可行性判定包含ti、阈值与δ",
              "score": 35,
              "evaluation_focus": "逻辑建模",
              "scoring_hint": "高分：函数式定义+谓词清晰；中分：缺δ或ti；低分：门槛错误或算子错位"
            },
            {
              "sub_criteria": "随机扩展（problem_flag, p_succ, min(error,5)）",
              "description": "在可行时以p_succ成功执行确定性复位，失败将对应维度设为min(error_before,5)",
              "score": 30,
              "evaluation_focus": "概率建模",
              "scoring_hint": "高分：区分成功/失败与未触发，含flag条件；中分：无min或错位另一维；低分：忽略随机或错误概率语义"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "终点可接受判定（θ+δ）",
              "description": "提供判定函数用于检测到达B时v,h是否在θ+δ内",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：布尔函数明确定义；中分：只描述文字；低分：无判定或条件错误"
            },
            {
              "sub_criteria": "与几何模块接口（传入弧长L而非坐标投影）",
              "description": "描述如何从几何求得L并作为本算子输入，支持ρ_min场景",
              "score": 35,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：清楚参数与可选ρ_min；中分：仅说距离；低分：耦合曲线求解到本模块"
            },
            {
              "sub_criteria": "复位尝试流程与返回标志（reset_flag, success_flag）",
              "description": "明确是否尝试复位与随机成功标志的返回及用法",
              "score": 35,
              "evaluation_focus": "过程规范",
              "scoring_hint": "高分：标志定义与取值时机清晰；中分：单一标志；低分：未提供或语义不明"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "函数原型规范（propagate_error, can_reset, attempt_reset）",
              "description": "提供可直接调用的函数签名、参数与返回结构，与文本定义一致",
              "score": 35,
              "evaluation_focus": "代码接口",
              "scoring_hint": "高分：三函数原型齐全且类型/命名清晰；中分：缺一或命名含糊；低分：无原型"
            },
            {
              "sub_criteria": "容差δ与比较逻辑实现",
              "description": "在代码/伪代码中体现≤阈值+δ判定，避免浮点误差",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：明确加δ；中分：提及未实现；低分：直接≤阈值导致边界错误"
            },
            {
              "sub_criteria": "随机分支实现（problem_flag与p_succ）",
              "description": "实现仅在problem_flag=1时抽样p_succ，否则确定性复位；失败分支min(error,5)",
              "score": 35,
              "evaluation_focus": "健壮实现",
              "scoring_hint": "高分：含随机种子/接口与正确分支；中分：忽略flag或min；低分：错误概率或复位到错误维度"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "示例算例正确性（从(v,h),L推导到复位后状态）",
              "description": "提供至少一个数值示例演算并核对到达前误差与复位结果",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：给出具体数值并一致；中分：示例不全或无核对；低分：无示例或错误"
            },
            {
              "sub_criteria": "边界与失败情形覆盖（v≈阈值, 失败min(error,5)）",
              "description": "分析阈值边界含δ与随机失败后的状态变化是否合理",
              "score": 30,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：覆盖边界与失败；中分：仅一类；低分：未覆盖"
            },
            {
              "sub_criteria": "接口契约一致性与可复用性",
              "description": "检查文档/原型/描述一致，声明输入单位与输出含义，便于后续仿真与优化调用",
              "score": 30,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：无歧义一致；中分：轻微不一致；低分：冲突或缺失导致不可用"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务 2（扩展状态图构造、误差与朝向离散化与可行边判定）应独立完成一个可直接用于搜索的、精确定义的数据结构和算法模块：输入为校正点表（每点包含唯一编号 id、三维坐标 x,y,z、校正类型 type ∈ {V,H,none}、问题点标志 problem_flag）、全局参数误差增量率 kv、kh（单位/米）、校正阈值 α1,α2,β1,β2、终点容忍 θ、误差离散化步长 δ、最小转弯半径 rho_min（若不考虑曲率则设为 0）、朝向离散数 M、邻居选择参数（k_neighbors 或搜索半径 r）和数值容差 tol；目标是构造一个有向、带资源标签的扩展图 G_ext，其节点精确定义为四元组 (i, psi_idx, v_bin, h_bin) —— i 为物理校正点 id，psi_idx ∈ {0,...,M-1} 为在 [0,2π) 上均匀离散的朝向索引（代表角度 psi = 2π·psi_idx/M），v_bin 和 h_bin 为垂直/水平误差的离散格索引（每格对应误差区间 [b·δ, (b+1)·δ)，并在实现中用该格代表值或格中点作为近似误差值）；构造前首先确定误差格的上界 v_max,h_max（可取为 max(α1,β1,θ)+margin 与 max(α2,β2,θ)+margin，margin 为若干格以允许在边上暂时超过门槛但不至于无穷增长），并据此确定格数 B_v,B_h。对每一对扩展节点候选 (i,psi_i) → (j,psi_j)（i≠j，或允许自环仅在必要情形）只在满足邻居选择策略的条件下生成边以控制稠密度：采用 k 最近邻或距离半径 r 在物理点层面先筛选候选目标 j，然后对每对朝向样本组合计算几何最短轨段长度 L；当 rho_min>0 时，L 应由 Dubins 最短曲线函数计算（建议调用标准 Dubins 库，输入为起点 (xi,yi) 与朝向 psi_i、终点 (xj,yj) 与朝向 psi_j、转弯半径 rho_min，并把三维高度差用于计算实际弧长增量但转弯仅在水平面上处理）；当 rho_min=0 时可直接用三维欧氏距离或在水平投影上用平直距离并把高度差并入 L = sqrt(dx^2+dy^2+dz^2)。有了 L，按误差演化规则计算到达前误差 v_after = v_rep + kv·L, h_after = h_rep + kh·L（其中 v_rep/h_rep 为源节点 v_bin/h_bin 的代表值），并对该到达误差按容差 tol 判定可执行的校正：若到达点类型为 V 并且 v_after ≤ α1+tol 且 h_after ≤ α2+tol， 则在图中同时为“不执行校正”与“执行垂直校正”两种情形建立边（即分别创建两个目标状态：一个映射至不变的误差格索引 floor(v_after/δ),floor(h_after/δ)，另一个映射至复位后的格索引 floor(0/δ),floor(h_after/δ)）；同理若 type 为 H 且 v_after ≤ β1+tol 且 h_after ≤ β2+tol，建立对应“不执行/执行水平复位”两条边；若校正门槛不满足，则只建立“不执行校正”的边。为避免状态爆炸，对到达误差超过预设上界（v_after>v_max+tol 或 h_after>h_max+tol）的边直接丢弃。每条边应记录完整属性：起点节点索引、终点节点索引、物理长度 L、误差增量 Δv,Δh、是否在到达后执行复位（类型及成功/失败模型在此子任务只记录可执行与否，随机性处理留给独立模块）、以及用于多目标优化的代价分量（长度 cost_L = L、校正代价 cost_C = 1 若执行复位且成功才计数或预设为 1 表示尝试）。实现细节包括误差格索引的取整规则（建议用 floor(v_after/δ) 并在边生成前将 v_after 夹到 [0,v_max]），朝向样本的生成方法（均匀采样 0..2π 并在需要时以更高密度局部细化），以及用于高效候选对寻找的数据结构（例如基于 KD-tree 的空间索引以快速获得 k 最近邻或半径查询）。模块应暴露明确的接口：函数 build_extension_graph(points, params) 返回节点表（含四元组与代表值）和边表（含上述属性），并提供查询函数 edge_feasible(i,psi_i,v_bin,h_bin,j,psi_j) 以在运行时判断单条边的可行性并返回到达误差及终点格索引。最后应声明边预筛的策略与参数（k_neighbors 或 r）、Dubins 计算函数签名（例如 dubins_shortest_length(xi,yi,psi_i,xj,yj,psi_j,rho_min)）和对三维高度的处理约定，以便后续搜索模块无歧义地使用此扩展图。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构造并评估用于航迹搜索的扩展有向图G_ext，完成误差与朝向离散化、可行边判定与长度/复位标签计算以支持后续优化求解",
          "expected_output": "数据结构与接口：节点表[(i, psi_idx, v_bin, h_bin, repr_values)]、边表[起终节点索引、L、Δv、Δh、reset可行与类型、cost_L、cost_C]；函数build_extension_graph与edge_feasible的可执行规范",
          "key_inputs_constraints": "输入包含：points[id,x,y,z,type∈{V,H,none},problem_flag]；参数kv,kh>0（单位/米）、阈值α1,α2,β1,β2、θ、离散步长δ>0、最小转弯半径rho_min≥0、朝向离散数M≥1、邻居参数k_neighbors或半径r>0、容差tol；约束：v_max,h_max需≥max(α1,β1,θ)等并留margin；当rho_min>0需用Dubins弧长；到达误差超v_max或h_max的边丢弃",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为搜索/优化前的离散化建图模块；前序依赖子任务一的状态转移与复位判定规范；后序任务为最短路径/多目标搜索与概率扩展。该模块输出图供后续算法直接调用"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别核心目标：扩展图G_ext构造与可行边判定",
              "description": "是否明确本子任务不是求最优路径，而是生成包含(i,psi_idx,v_bin,h_bin)节点与带L、Δv、Δh、复位标签的边的G_ext，用于后续搜索",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：准确表述四元组节点与边属性；中分：提到图构造但遗漏误差或朝向维度；低分：将任务误解为直接规划或优化"
            },
            {
              "sub_criteria": "输入与约束识别：kv,kh,α,β,θ,δ,M,rho_min,tol",
              "description": "是否列出必要输入及单位与边界条件（如rho_min>0用Dubins、误差上界v_max/h_max设置与丢弃规则）",
              "score": 35,
              "evaluation_focus": "需求梳理",
              "scoring_hint": "高分：逐一覆盖并说明用途；中分：缺少2-3项或未指明单位；低分：泛化描述或遗漏关键量"
            },
            {
              "sub_criteria": "角色定位：前序状态转移规范与后续搜索接口",
              "description": "是否指出依赖子任务一的误差演化与复位判定，并面向后续最短路径/多目标搜索输出可调用结构",
              "score": 35,
              "evaluation_focus": "系统视角",
              "scoring_hint": "高分：清楚前后衔接与接口；中分：仅泛述依赖；低分：未提上下游"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "节点定义复述：(i, psi_idx, v_bin, h_bin)",
              "description": "是否准确重述节点四元组含义、psi离散在[0,2π)、误差格[vδ,(v+1)δ)代表值选择",
              "score": 35,
              "evaluation_focus": "精确表达",
              "scoring_hint": "高分：包含区间与代表值说明；中分：缺代表值或区间边界；低分：节点含糊或缺任一维"
            },
            {
              "sub_criteria": "边生成与筛选：k邻居/半径、Dubins或欧氏",
              "description": "是否复述候选对筛选策略、rho_min条件下的Dubins弧长与三维弧长处理",
              "score": 35,
              "evaluation_focus": "要点覆盖",
              "scoring_hint": "高分：说明KD-tree/筛选、弧长三维合成；中分：仅提距离未述Dubins；低分：无筛选或弧长错误"
            },
            {
              "sub_criteria": "复位可行性与双分支边（执行/不执行）",
              "description": "是否明确V/H点阈值判断（α1,α2或β1,β2，含tol），并在满足时添加两条边",
              "score": 30,
              "evaluation_focus": "规则把握",
              "scoring_hint": "高分：两类边与阈值清楚；中分：只建一条边或缺tol；低分：忽略复位或阈值搞错"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "误差线性累积假设：Δv=kv·L, Δh=kh·L",
              "description": "明确误差与弧长线性、独立于速度时间，L为实际轨迹弧长",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：强调Dubins时仍用弧长；中分：写成欧氏长度；低分：与时间或其他因素混淆"
            },
            {
              "sub_criteria": "上界与丢弃策略：v_max,h_max与margin",
              "description": "给出设定原则（≥max(α1,β1,θ)+margin），超过上界边丢弃以控图规模",
              "score": 25,
              "evaluation_focus": "可控复杂度",
              "scoring_hint": "高分：量化margin或格数；中分：仅口头提及；低分：未设上界导致爆炸"
            },
            {
              "sub_criteria": "复位判定容差tol与取整规则floor(v/δ)",
              "description": "说明≤判定中加入tol，取格索引floor并夹到[0,v_max]",
              "score": 20,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：同时提夹取；中分：只提floor；低分：无容差导致边界错误"
            },
            {
              "sub_criteria": "三维处理与水平转弯近似",
              "description": "阐明转弯半径仅约束水平面，z差纳入弧长计算",
              "score": 20,
              "evaluation_focus": "合理近似",
              "scoring_hint": "高分：清楚水平Dubins+三维弧长合成；中分：模糊描述；低分：忽略z或错误约束"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "朝向与误差离散化设计：M, δ, B_v,B_h",
              "description": "给出M均匀采样方法与误差格数计算，代表值设定与边界处理",
              "score": 30,
              "evaluation_focus": "离散化",
              "scoring_hint": "高分：包含B_v=⌈v_max/δ⌉等；中分：缺格数细节；低分：未定义离散方法"
            },
            {
              "sub_criteria": "候选邻接生成与空间索引",
              "description": "定义k_neighbors或r筛选，并建议KD-tree/半径查询以控稠密度",
              "score": 25,
              "evaluation_focus": "结构设计",
              "scoring_hint": "高分：明确参数与复杂度动机；中分：仅口述近邻；低分：全连通导致不可扩展"
            },
            {
              "sub_criteria": "弧长计算模块：欧氏/Dubins切换",
              "description": "提供dubins_shortest_length签名与rho_min判定分支及三维弧长合成",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出函数签名和输入输出；中分：只说用Dubins；低分：用直线代替Dubins于rho_min>0"
            },
            {
              "sub_criteria": "复位分支边与代价向量(cost_L,cost_C)",
              "description": "在可复位时创建执行/不执行两条边并记录cost_C=1（尝试）设计，随机性留后续",
              "score": 20,
              "evaluation_focus": "代价建模",
              "scoring_hint": "高分：两分支与属性齐全；中分：缺cost_C或标记含糊；低分：不区分复位与否"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "边可行性判定公式应用：阈值α/β与tol",
              "description": "正确应用v_after≤α1+tol等并生成目标格索引floor",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：写清两类阈值相配；中分：阈值配错或缺一维；低分：不做判定"
            },
            {
              "sub_criteria": "误差传播计算：Δv=kv·L,Δh=kh·L",
              "description": "从源格代表值计算到达前误差并夹到上界",
              "score": 30,
              "evaluation_focus": "公式实现",
              "scoring_hint": "高分：含夹取与负值保护；中分：无夹取；低分：误差不随L增长"
            },
            {
              "sub_criteria": "边丢弃策略执行：v_after>v_max或h_after>h_max",
              "description": "在生成阶段即时丢弃越界边，避免状态爆炸",
              "score": 35,
              "evaluation_focus": "可行性控制",
              "scoring_hint": "高分：严格实现并统计丢弃率；中分：部分实现；低分：未丢弃导致图失控"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "接口与签名：build_extension_graph与edge_feasible",
              "description": "是否提供明确函数原型、输入输出字段齐全（节点/边属性、L、Δv、Δh、reset标签、cost_L,cost_C）",
              "score": 30,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：签名与返回结构完整；中分：缺少若干字段；低分：无统一接口"
            },
            {
              "sub_criteria": "数值稳健性：tol/δ取整与夹取实现",
              "description": "包含floor、[0,v_max]夹取、≤判定加tol，避免边界误差",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：边界单元测试通过；中分：有容差无夹取；低分：边界行为不确定"
            },
            {
              "sub_criteria": "几何内核：Dubins与三维弧长合成",
              "description": "正确调用dubins_shortest_length或等效实现，并合成z差到总弧长",
              "score": 25,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：rho_min分支正确、单测覆盖；中分：仅水平长度；低分：错误调用或忽略rho_min"
            },
            {
              "sub_criteria": "性能与可扩展性：邻居筛选与KD-tree",
              "description": "使用kNN/半径查询减少边数量，避免全图密连",
              "score": 20,
              "evaluation_focus": "工程能力",
              "scoring_hint": "高分：显著降维度与计时报告；中分：简单筛选；低分：全连接导致内存爆"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "结构正确性检查：节点计数与边数合理性",
              "description": "报告|V|≈|P|·M·B_v·B_h（可被筛选约束减少），边丢弃比例与原因",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出数量与越界/复位可行占比；中分：仅给总数；低分：无统计"
            },
            {
              "sub_criteria": "物理一致性：误差随L单调、阈值边界行为",
              "description": "验证样例边上v_after, h_after与L关系、靠近α/β时复位分支是否生成",
              "score": 35,
              "evaluation_focus": "一致性校验",
              "scoring_hint": "高分：展示2-3例并解释；中分：口头说明；低分：与规则矛盾"
            },
            {
              "sub_criteria": "参数敏感性：M, δ, k_neighbors/r影响",
              "description": "讨论离散度与稠密度对图规模与边可行率、近似误差的影响",
              "score": 30,
              "evaluation_focus": "稳健性分析",
              "scoring_hint": "高分：对比两组参数并量化差异；中分：定性讨论；低分：未分析"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3（求解算法设计）——范围与目标：在已构造的扩展状态空间或给定校正点集合上，设计并实现一套可执行的求解器，目标是在满足误差累积与校正门槛约束下，按多目标准则（优先或加权考虑：最小化校正次数 C、最小化轨迹长度 L、在问题3中最大化到达终点的成功概率 P_success）搜索或优化出一条从起点到终点的可行航迹并输出完整路径细节与性能指标；该求解器需同时支持（A）基于标签的精确/近似图搜索（多维标签、支配剪枝、A*启发式）以生成高质量候选解，以及（B）对候选校正点序列的连续几何局部优化（精确 Dubins 段与节点入/出航向优化）以得到最终可执行曲线，并且在遇到随机校正点时能对固定路径进行概率评估与优化。 方法与步骤（要点）：1) 标签定义与支配规则：将每个搜索状态表示为标签 T = (node_id, psi_idx, v, h, L_acc, C_acc, optionally logP_acc)；在确定性问题中以(L_acc, C_acc, v, h)为度量，在随机问题中同时维护 logP_acc（累积对数成功概率）或分布式误差 PMF；定义支配（domination）谓词：标签 A 支配标签 B 当且仅当 A.L_acc ≤ B.L_acc, A.C_acc ≤ B.C_acc, A.v ≤ B.v, A.h ≤ B.h，并在概率目标下 A.logP_acc ≥ B.logP_acc（在层次化优化中按优先级比较），并据此剪枝。2) 图搜索实现：采用 A* 或多目标 Dijkstra 框架，用优先队列按复合代价 g+h 进行扩展；启发式 h 应为到终点的可实现下界（例如欧氏距离作为长度下界与基于 k·distance 的误差下界，用以提前判定某分支不可能满足门槛）；在扩展过程中对到达节点可选执行/不执行校正的两种后继状态分别生成标签并入队列；为控制复杂度，限制每节点朝向样本数 M、对物理邻居使用 k‑NN 或半径筛选。3) 两阶段混合策略：先在粗粒度离散化（较大 δ、少量朝向样本或仅用欧氏距离）上运行标签搜索以快速产生若干高质量候选校正点序列 S_cand（按 C/L/P 排序并截取前 K）；再对每个候选序列进行连续几何优化：以序列中每个相邻点的入/出航向角为连续优化变量，用精确的 Dubins 解析/数值函数计算每段弧长并用非线性优化器（如 IPOPT、SNOPT 或 SciPy 的 SLSQP）最小化总长度 L subject to：对每段长度计算精确误差增量并在每到达点强制满足可执行的校正门槛约束或显式建模复位，若目标含校正次数则以固定 C 或引入二元变量处理（亦可在序列层面由候选序列固定哪些点执行校正以避免混合整数）。4) 随机性处理与概率评估（问题3）：对每个固定路径 P，采用两种可选评估方法：精确离散概率传播（在误差值域上维护离散 PMF，按路径序列逐点更新并在随机校正点按成功/失败概率分叉，最末计算满足 v≤θ 且 h≤θ 的概率）或并行蒙特卡洛仿真（Nsim 次随机试验并行化计算 P_success 及置信区间）；为减少状态爆炸，在离散传播中合并近似相近的误差值或截断低概率分支，在蒙特卡洛中使用重要抽样或方差缩减技术以提高估计效率。5) 将概率纳入搜索：若需要在搜索中直接优化 P_success，可在标签中维护累积对数概率并用 logP 作为优化目标的一部分（例如在加权评分或层次规则中优先保留高概率标签）；在标签扩展时对随机点进行标记并允许基于对数概率阈值进行早期剪枝。6) 算法工程要点与加速：使用高效数据结构（KD-tree 做邻居搜索、二叉堆/索引优先队列）、并行计算（并行化 Dubins 计算与 Monte‑Carlo）、数值稳定技巧（使用对数概率避免下溢）、以及启发式预筛（距离/误差下界丢弃明显不可行边）；当连续优化中 Dubins 段不可微或有不连续性时采用有限差分梯度或采样+局部插值以保证优化收敛。7) 输出与终止条件：算法应返回一条最终轨迹（校正点序列、每段的起止坐标与航向、每段几何组成：直线/圆弧及其参数）、到达每个校正点的校正前误差、在哪些点执行校正、全路径长度 L、校正次数 C 和若为问题3 的 P_success（及其置信区间）；终止条件为达到目标节点且无可改进标签（或达到计算资源/时间限制后返回当前最优候选）。 输入、工具与模型：输入为校正点表（id, x,y,z, type, problem_flag）、扩展图或点间 Dubins 计算接口、误差参数 kv/kh、阈值 α/β/θ、离散化参数 δ、最小转弯半径 ρ_min、朝向样本数 M、邻居参数 k 或 r、以及随机参数 p_succ 和 Monte‑Carlo 次数 Nsim；建议使用现成 Dubins 库（C/C++/Python）、数值非线性优化器（IPOPT/SciPy）、并行/多线程库用于仿真加速。 复杂度与稳健性提示：标明最坏状态上界约为 O(N·M·B^2)（误差格数 B），并在实现中依赖支配剪枝、邻居预筛、启发式 A* 下界与并行化来控制实际运行时间；对随机评估建议在候选集大小 K 与 Monte‑Carlo 采样数间权衡精度与速度。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在扩展状态空间上优化搜索并局部几何优化，求解最小校正次数与最短轨迹长度并在随机校正下最大化到达成功概率的航迹规划路径",
          "expected_output": "一条从A到B的可行航迹：校正点序列与是否执行校正、每段Dubins/直线几何参数与长度L、到达每点的校正前误差(v,h)、总长度L与校正次数C、问题3的P_success（含置信区间），以及搜索日志与运行时统计（扩展节点数、剪枝数）",
          "key_inputs_constraints": "输入：扩展图节点与边或校正点集、kv=kh=8单位/米、阈值α1,α2,β1,β2、终点容忍θ、离散化步长δ、最小转弯半径ρ_min、朝向样本数M、邻居参数k或r、p_succ与Nsim。约束：到达误差与门槛判定含容差δ；到达终点需v≤θ且h≤θ；Dubins段半径≥ρ_min；随机点校正成功概率p_succ=0.8且路径不可因观测而改变。",
          "modeling_type": "优化+仿真+评价",
          "role_in_pipeline": "作为求解与生成最终航迹的核心模块：前序依赖子任务一的状态转移算子与子任务二的扩展图/几何接口；后序输出供可视化与Excel结果填充及报告撰写使用。",
          "assumptions": "若未提供Dubins库则使用等效最短Dubins长度近似；启发式使用到终点的欧氏距离作为长度下界；多目标采用词典序优先级C优先于L，问题3再以P_success为首要。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "多目标优化目标识别（校正次数C、轨迹长度L、P_success）",
              "description": "是否明确区分确定性情形下以C→L的层次优化与随机情形下以P_success优先的目标结构，并指出到达终点需满足v≤θ、h≤θ。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰给出层次或加权方案，含约束θ；中分：提及C与L但未定义优先级或漏P_success；低分：仅单一目标或忽略门槛。"
            },
            {
              "sub_criteria": "约束条件定位（门槛α/β/θ、ρ_min、δ）",
              "description": "能否将α1,α2,β1,β2、θ、ρ_min、δ转化为可检验的搜索可行性与终止判定条件。",
              "score": 35,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：列出并可操作化判定（含容差δ）；中分：部分约束可操作；低分：口头提及，无可检验规则。"
            },
            {
              "sub_criteria": "随机校正机制识别（p_succ与路径不可调整）",
              "description": "识别问题3中probability模型与“观测不可改变路径”的限制，并区分评估与搜索中的作用。",
              "score": 30,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：明确logP或PMF传播与固定路径评估；中分：提及p_succ但未界定固定路径；低分：将随机观测用于在线改路。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "扩展状态标签T复述（node_id, psi_idx, v, h, L_acc, C_acc, logP_acc）",
              "description": "准确复述标签字段与其在搜索中的角色，含累计代价与误差状态。",
              "score": 35,
              "evaluation_focus": "精确定义",
              "scoring_hint": "高分：字段齐全且解释清楚；中分：缺1-2字段或用途不清；低分：仅给出节点id无状态。"
            },
            {
              "sub_criteria": "支配规则复述（C/L/v/h与logP的支配）",
              "description": "给出明确的domination谓词：C、L、v、h分别不劣且在随机时logP不小。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：形式化不等式与层次；中分：口述概念无判据；低分：无支配或错误支配。"
            },
            {
              "sub_criteria": "启发式下界复述（欧氏距离与误差下界）",
              "description": "说明A*启发式如何以到终点的欧氏距离下界h_L与误差增长kv·d, kh·d用于不可达剪枝。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出h公式与剪枝条件；中分：仅提到A*无h细节；低分：无启发式或启发式不一致。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "层次或加权多目标假设选择",
              "description": "明确采用词典序（C→L，问题3为P_success→C→L）或加权和，并说明权重或优先级依据。",
              "score": 35,
              "evaluation_focus": "建模选择",
              "scoring_hint": "高分：阐明并合理化优先级；中分：给出但无理由；低分：混乱或与题意冲突。"
            },
            {
              "sub_criteria": "Dubins与几何近似假设",
              "description": "说明ρ_min>0使用Dubins弧长；无法可用时采用近似并声明误差影响与保守性。",
              "score": 30,
              "evaluation_focus": "工程取舍",
              "scoring_hint": "高分：清晰界定适用条件与误差界；中分：提及但不量化影响；低分：忽略ρ_min。"
            },
            {
              "sub_criteria": "概率独立与评估方法假设",
              "description": "声明各随机校正独立、采用logP累乘或PMF传播/Monte-Carlo及其收敛与Nsim选择。",
              "score": 35,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：给出logP稳定性与Nsim/置信区间标准；中分：仅说独立；低分：未声明或错误相关性。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "A*/多目标Dijkstra框架与优先队列设计",
              "description": "构建以g+h的优先队列，支持多维标签与domination剪枝，保证一致性与终止性。",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：细述队列键、闭集策略；中分：概述无细节；低分：用DFS/BFS替代。"
            },
            {
              "sub_criteria": "后继生成（执行/不执行校正分支）",
              "description": "从扩展图边生成两类后继，更新(v,h)、L_acc、C_acc、logP_acc并应用门槛与容差δ。",
              "score": 30,
              "evaluation_focus": "数理实现",
              "scoring_hint": "高分：明确更新方程与阈值判断；中分：缺容差或少一维；低分：不区分两类分支。"
            },
            {
              "sub_criteria": "两阶段混合策略与连续几何优化",
              "description": "先粗粒度搜索得K个S_cand，再用Dubins入/出航向作为变量做SLSQP/IPOPT优化L并保持门槛。",
              "score": 40,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：含变量、目标、约束与收敛设置；中分：仅口述优化；低分：无第二阶段。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "启发式与剪枝有效性（h下界、不可达丢弃）",
              "description": "实现基于欧氏下界与误差下界的早期不可达剪枝，统计剪枝比例或复杂度下降。",
              "score": 30,
              "evaluation_focus": "算法效率",
              "scoring_hint": "高分：提供剪枝统计或复杂度估计；中分：有剪枝无数据；低分：未剪枝。"
            },
            {
              "sub_criteria": "随机评估（logP或PMF/Monte-Carlo）",
              "description": "对固定路径计算P_success，给出置信区间或误差界，避免数值下溢（log概率）。",
              "score": 40,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：log域实现与95%CI；中分：仅点估计；低分：忽略随机或不稳定结果。"
            },
            {
              "sub_criteria": "复杂度分析与参数权衡（N·M·B^2、K与Nsim）",
              "description": "给出最坏复杂度上界与实际运行中的参数取舍（M、k或r、K、Nsim）。",
              "score": 30,
              "evaluation_focus": "复杂度",
              "scoring_hint": "高分：量化上界与实测；中分：定性描述；低分：无分析。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据结构与接口一致性（build_extension_graph、dubins接口）",
              "description": "接口与前序子任务契约一致，边属性与状态更新字段匹配，单位一致（米与单位/米）。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：类型/单位校验通过，集成无缝；中分：小偏差可修；低分：接口不匹配。"
            },
            {
              "sub_criteria": "优先队列与支配剪枝实现正确性",
              "description": "索引优先队列/二叉堆实现，标签合并与支配检查无漏删与误删。",
              "score": 35,
              "evaluation_focus": "算法正确",
              "scoring_hint": "高分：含单元测试或断言；中分：工作但无测试；低分：出现循环或错剪。"
            },
            {
              "sub_criteria": "几何与概率模块数值稳健性",
              "description": "Dubins长度/三维弧长计算稳定；概率采用log域；Monte-Carlo并行化且设随机种子。",
              "score": 35,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：边界用例与种子控制；中分：可运行无边界测试；低分：下溢或非确定性结果。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性验证（到达终点v≤θ、h≤θ及ρ_min满足）",
              "description": "逐点报告校正前误差与终点约束满足性，Dubins转弯半径约束无违背。",
              "score": 35,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：表格逐点+自动校验；中分：仅终点验证；低分：未验证或违规。"
            },
            {
              "sub_criteria": "多目标权衡解读（C与L、问题3的P_success）",
              "description": "解释所选路径的C、L、P_success之间的权衡，提供对比候选与改进空间。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量对比至少2个候选；中分：定性描述；低分：无权衡讨论。"
            },
            {
              "sub_criteria": "敏感性与鲁棒性（M、δ、k/r、Nsim对结果影响）",
              "description": "分析关键超参数对L、C、P_success与运行时间的影响，给出推荐设置。",
              "score": 30,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：含小实验或曲线；中分：口述建议；低分：未分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4的目标是为整个实现提供一套可重复、可验证且工程化的实施及验证流程，包括输入/输出规范、参数设置建议、测试与敏感性分析步骤、性能度量、结果保存格式和可扩展实现建议，要求该子任务能独立指导工程人员完成从数据读取到最终结果汇报的全部验收工作。具体应包含：明确输入数据格式与字段（校正点表格：id,x,y,z,type,problem_flag；全局参数文件：kv,kh,α1,α2,β1,β2,θ,δ,ρ_min,p_succ；运行控制文件：M,k_neighbors,邻域半径r,搜索时间上限T_max,蒙特卡洛样本数Nsim,随机种子），以及输出规范（最终轨迹文件：按段列出起点/终点id、几何类型[直线/圆弧]、几何参数、段长；校正序列表：按顺序列出到达前垂直/水平误差、是否尝试校正、校正后误差、校正成功标志；汇总报告：总长度L、校正次数C、若含随机性则给出P_success及置信区间），并规定标准文件格式（CSV/JSON用于表格与路径，PNG或SVG用于轨迹图，Excel表格用于竞赛要求的各Sheet导出）与命名约定以便自动化后处理。实施步骤应按序列化说明：1) 校验与预处理（编号一致性、缺失值处理、坐标单位检查以及基于ρ_min的几何约束初筛）；2) 预计算与保真检查（计算点间欧氏距离及必要时的Dubins下界并缓存，验证距离矩阵的对称性与数值稳定性）；3) 参数选择建议（推荐δ范围、朝向离散M的经验值与调优策略、邻居数k或半径r的选择原则以及搜索与蒙特卡洛的时间/样本预算）；4) 运行与日志（明确记录运行环境、软件版本、随机种子、时间戳、每次运行的配置文件，并按步骤记录中间产物以便回溯）；5) 验证套件：包括若干必做测试—小规模完全枚举基准以验证正确性、随机种子固定的重现性测试、蒙特卡洛收敛性测试、以及一组参数扰动（推荐对kv,α/β,θ,p_succ分别做±10%、±20%试验）用于敏感性分析；6) 评估指标与合格判定（必须检查最终路径是否满足所有硬约束（到达时v,h≤θ、在校正点执行复位仅在门槛满足时发生、曲率约束满足），并记录运行时间、内存占用、候选路径数、最终解的L与C以及概率问题的P_success和95%置信区间）；7) 报告与可视化规范（自动生成包含轨迹平面投影图、每段几何构成图例（直线黑/圆弧红）、误差演化图、校正点序列表和关键指标表的PDF报告）；8) 自动化与重复试验策略（提供可复用脚本/Makefile或Jupyter Notebook用于批量试验、并建议在长时间运行时采用检查点与断点续跑机制）。工具与实现建议：推荐使用Python生态（pandas/numpy用于数据处理，scipy或IPOPT用于段级连续优化，现成dubins库用于最短曲线计算，scikit‑learn KDTree用于邻居查询，multiprocessing或joblib用于并行蒙特卡洛与并行边计算，matplotlib用于可视化），并强制记录版本号和随机种子以保证可重复性；数据与结果应按项目结构管理并使用版本控制（Git）和单一配置文件驱动实验。交付物应包括可执行的运行脚本、配置样例、完整运行日志与中间缓存、最终轨迹与表格（按竞赛Excel要求填入的各Sheet副本）、验证基准的对比结果以及一份简明的操作手册（说明如何复现实验、调整参数与解释输出），并在手册中列出若干常见问题与调试建议（如数值不收敛、Dubins不可行情形的处理、蒙特卡洛样本不足的指征）。",
      "criteria": {
        "task_understanding": {
          "core_goal": "设计并评估一套可重复执行的实施与验证流程，用于仿真与评估智能飞行器航迹规划系统的输入输出规范、参数设置、测试验证与报告导出。",
          "expected_output": "输入/输出规范文档；参数配置样例（JSON/CSV）；自动化运行脚本与日志；验证与敏感性测试结果；轨迹文件（CSV/JSON）、校正序列表（CSV）、汇总报告（JSON/CSV）、图像（PNG/SVG）、Excel汇总（多Sheet）；PDF自动报告。",
          "key_inputs_constraints": "1) 校正点表：id(int), x,y,z(float), type{V/H/none}, problem_flag{0/1}，坐标单位米且编号唯一；2) 全局参数文件：kv,kh(单位/米), α1,α2,β1,β2,θ,δ,ρ_min,p_succ ∈ [0,1]；3) 运行控制：M,k_neighbors或r,T_max,Nsim,random_seed；4) 几何约束：ρ_min≥0，Dubins计算需平面航向定义；5) 文件格式与命名约定需满足CSV/JSON/PNG/SVG/Excel；6) 容差tol/δ用于比较（≤判定）。",
          "modeling_type": "评价+仿真",
          "role_in_pipeline": "作为最终实施与验收环节，串联数据读取、扩展图构造与求解器执行，并负责可复现与合规输出。前序依赖：子任务一的状态转移规范、子任务二的扩展图模块、子任务三的求解器；后序：结果提交与竞赛Excel汇总、论文图表与报告。",
          "assumptions": "若未提供Dubins库则以欧氏距离近似并将ρ_min设为0进行基线验证；Excel写入使用开放库（如openpyxl）；内存与时间预算由T_max控制，超过则导出当前最优。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "输入/输出规范与文件格式识别（CSV/JSON/PNG/Excel）",
              "description": "是否完整识别并枚举校正点表、全局参数、运行控制的字段与类型要求，并明确输出的轨迹、校正序列、汇总报告、图形与Excel多Sheet。",
              "score": 30,
              "evaluation_focus": "需求梳理",
              "scoring_hint": "高分：字段齐全且含单位与合法值范围；中分：字段基本齐全但缺少单位或范围；低分：缺失关键字段或混用格式。"
            },
            {
              "sub_criteria": "约束条件识别（θ、δ、ρ_min、p_succ）",
              "description": "能否强调硬约束（到达时v,h≤θ）与几何约束（ρ_min与Dubins），以及数值容差δ与随机参数p_succ的作用。",
              "score": 25,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：清楚区分硬/软约束与容差处理；中分：只提及θ或ρ_min其一；低分：未识别或表述错误。"
            },
            {
              "sub_criteria": "验证与敏感性分析需求识别",
              "description": "是否明确需要小规模完全枚举基准、重现性测试、蒙特卡洛收敛性与±10/20%参数扰动敏感性分析。",
              "score": 25,
              "evaluation_focus": "验证意识",
              "scoring_hint": "高分：四类测试均覆盖并可操作；中分：覆盖2–3类；低分：无系统测试计划。"
            },
            {
              "sub_criteria": "可重复性要素识别（随机种子、版本、日志）",
              "description": "是否强调记录运行环境、随机种子、软件版本、时间戳与配置快照。",
              "score": 20,
              "evaluation_focus": "复现保障",
              "scoring_hint": "高分：列出全部要素与记录方式；中分：仅种子或版本之一；低分：未提复现元素。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "流程化复述（从数据读取到最终报告）",
              "description": "能否按序复述校验与预处理→预计算→参数设置→求解与日志→验证套件→评估指标→报告导出。",
              "score": 35,
              "evaluation_focus": "流程表达",
              "scoring_hint": "高分：步骤清晰可执行；中分：顺序不全或含糊；低分：无序或缺关键环节。"
            },
            {
              "sub_criteria": "输入控制与运行配置复述（M,k_neighbors/r,T_max,Nsim）",
              "description": "是否准确复述运行控制参数的作用与相互权衡（时间预算、精度）。",
              "score": 25,
              "evaluation_focus": "参数理解",
              "scoring_hint": "高分：说明对复杂度与精度影响；中分：仅列名；低分：错误解释或遗漏关键参数。"
            },
            {
              "sub_criteria": "输出与合规性复述（Excel多Sheet、图例颜色）",
              "description": "是否明确直线黑/圆弧红、Excel Sheet1–6写入要求、命名约定。",
              "score": 20,
              "evaluation_focus": "规范意识",
              "scoring_hint": "高分：逐项对应并无歧义；中分：部分缺失；低分：未复述或与题意不符。"
            },
            {
              "sub_criteria": "约束与判定规则复述（v,h≤θ+δ、复位门槛）",
              "description": "是否准确复述容差判定与复位可行性条件对验收的影响。",
              "score": 20,
              "evaluation_focus": "规则把握",
              "scoring_hint": "高分：含≤θ+δ与α/β阈值；中分：只写θ；低分：判定规则错误。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "缺失库与近似假设（Dubins缺失时ρ_min=0）",
              "description": "是否给出在无Dubins实现时的可验证基线假设并标注影响范围。",
              "score": 25,
              "evaluation_focus": "工程权衡",
              "scoring_hint": "高分：给出基线与误差说明；中分：仅给出近似；低分：无替代方案。"
            },
            {
              "sub_criteria": "随机性与重现实验假设（p_succ、random_seed）",
              "description": "是否假设并固定随机种子，明确成功概率使用与置信区间计算方法（如正态近似或Clopper-Pearson）。",
              "score": 30,
              "evaluation_focus": "统计规范",
              "scoring_hint": "高分：方法可执行且标注区间类型；中分：只给点估计；低分：忽略随机性。"
            },
            {
              "sub_criteria": "容差与单位一致性假设（δ、tol、米）",
              "description": "是否统一数值比较容差与单位，并声明输入需为米单位。",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：明确≤判定含δ；中分：含糊；低分：未设容差。"
            },
            {
              "sub_criteria": "资源与中断策略（T_max超时导出当前最优）",
              "description": "是否假设超时与检查点、断点续跑机制以保障可完成性。",
              "score": 20,
              "evaluation_focus": "运行保障",
              "scoring_hint": "高分：给出具体策略；中分：只有超时说明；低分：无任何假设与措施。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "数据校验与预处理设计（编号唯一、缺失值、单位）",
              "description": "是否提供可执行的校验清单与失败处理策略（报错/修正/丢弃）。",
              "score": 25,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：校验规则与处理动作明确；中分：仅列检查项；低分：无校验。"
            },
            {
              "sub_criteria": "预计算与保真检查（距离矩阵、Dubins下界缓存）",
              "description": "是否构建和验证对称性、数值稳定性，避免重复计算。",
              "score": 25,
              "evaluation_focus": "性能设计",
              "scoring_hint": "高分：含缓存策略与一致性检查；中分：仅计算无验证；低分：无预计算。"
            },
            {
              "sub_criteria": "参数选择建议（δ、M、k或r、Nsim）",
              "description": "是否给出经验范围与调优策略（精度与时间权衡）。",
              "score": 25,
              "evaluation_focus": "参数调优",
              "scoring_hint": "高分：提供范围与影响分析；中分：仅给范围；低分：无建议。"
            },
            {
              "sub_criteria": "输出与可视化规范（黑直线/红圆弧、Excel多Sheet）",
              "description": "是否明确字段、图例、命名与导出一致性检查。",
              "score": 25,
              "evaluation_focus": "规范设计",
              "scoring_hint": "高分：字段详尽且含校验；中分：部分明确；低分：模糊或缺失。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "运行与日志流程（版本/种子/配置快照）",
              "description": "是否规定日志内容与存储结构，能一键复现同一配置下结果。",
              "score": 30,
              "evaluation_focus": "流程控制",
              "scoring_hint": "高分：日志含版本、hash、时间、配置；中分：部分记录；低分：日志缺失。"
            },
            {
              "sub_criteria": "验证套件实现（基准、重现性、收敛性、敏感性）",
              "description": "是否可自动运行四类测试并输出判定结论与图表。",
              "score": 40,
              "evaluation_focus": "质量保证",
              "scoring_hint": "高分：四类自动化+阈值判定；中分：2–3类或无阈值；低分：无系统验证。"
            },
            {
              "sub_criteria": "评估指标与合格判定（v,h≤θ、ρ_min可行、P_success区间）",
              "description": "是否自动检查硬约束并生成L、C、P_success与95%CI及内存/时间。",
              "score": 30,
              "evaluation_focus": "验收判定",
              "scoring_hint": "高分：自动判定并失败退出码；中分：仅报告数值；低分：未检查或错误。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "I/O与格式导出（CSV/JSON/PNG/SVG/Excel）",
              "description": "是否提供稳定读写与字段校验，Excel多Sheet正确写入与命名。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含单元测试与字段校验；中分：读写可用但无校验；低分：导出错误或不一致。"
            },
            {
              "sub_criteria": "自动化与重复试验（脚本/Notebook、检查点）",
              "description": "是否提供批量运行、断点续跑、配置驱动（单一config）。",
              "score": 30,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：一键批跑+断点；中分：可批跑无断点；低分：手工多步。"
            },
            {
              "sub_criteria": "性能与并行（KDTree、并行蒙特卡洛）",
              "description": "是否利用缓存、向量化、并行库降低时间并记录资源占用。",
              "score": 25,
              "evaluation_focus": "效率优化",
              "scoring_hint": "高分：并行+缓存显著提速；中分：部分优化；低分：低效实现。"
            },
            {
              "sub_criteria": "日志与错误处理（可读报错、失败快照）",
              "description": "是否对数据非法、Dubins不可行、时间超时提供明确错误与快照保存。",
              "score": 15,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：分级日志+异常恢复；中分：简单报错；低分：静默失败或崩溃。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "轨迹与误差演化图解读（黑直线/红圆弧、v/h曲线）",
              "description": "是否提供与解释图形，指出关键校正点与误差峰值并对应门槛。",
              "score": 30,
              "evaluation_focus": "可视化解释",
              "scoring_hint": "高分：图文一致且标注门槛；中分：图有解释弱；低分：无图或矛盾。"
            },
            {
              "sub_criteria": "敏感性与稳健性结论（±10/20%扰动、Nsim收敛）",
              "description": "是否给出参数变动对L、C、P_success的变化量与收敛曲线。",
              "score": 30,
              "evaluation_focus": "稳健评估",
              "scoring_hint": "高分：量化影响与趋势；中分：定性描述；低分：未分析。"
            },
            {
              "sub_criteria": "合规性核查与失败案例复盘",
              "description": "是否列出所有硬约束检查结果，若失败能定位原因与改进建议（如调δ、M、k或r）。",
              "score": 25,
              "evaluation_focus": "诊断改进",
              "scoring_hint": "高分：逐项核查+改进路径；中分：只报是否通过；低分：无核查。"
            },
            {
              "sub_criteria": "报告与提交物一致性（Excel Sheet1–6、命名）",
              "description": "是否确保输出与竞赛要求一致，包含PDF报告、Excel多Sheet和命名规范。",
              "score": 15,
              "evaluation_focus": "交付规范",
              "scoring_hint": "高分：完全一致并附清单；中分：小处不一致；低分：缺关键提交物。"
            }
          ]
        }
      }
    }
  }
}