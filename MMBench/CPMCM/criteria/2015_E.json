{
  "task_id": "2015_E",
  "problem": "假设不考虑刀具尺寸大小及刀具磨损，加工刀具抽象为一点。希望同学们在深入研究数控加工优化控制的基础上，完成以下工作：\n\n1. 设加工型线为折线，在指定加工误差（指在加工型线的法线方向上加工型线与刀具实际轨迹的差值的最大值）的条件下，建立实时加工优化控制算法，当相邻两折线段夹角为 \\( 90^\\circ \\) 和 \\( 135^\\circ \\) 时，讨论通过折线交点时对应各坐标运动速度的变化；\n2. 设加工型线是由直线段和圆弧段（相切或不相切）组成的连续曲线，在指定加工误差的条件下，不考虑瞬时启动加速度及瞬时启动速度，建立实时加工优化控制算法，讨论圆弧半径的变化对算法效率的影响；并应用所建立的模型对下面的加工路径示例进行检验；\n\n3、在第2问基础上，考虑瞬时启动加速度及瞬时启动速度，建立相对应的实时加工优化控制算法；并应用所建立的模型对下面的加工路径示例进行检验；\n\n4、结合前3问，分析S型曲线的加减速控制方法的优缺点，在满足精度和速度要求的条件下，建立能提高机床运行平稳性的优化控制运动模型（如刀具在各坐标轴方向上的运动满足加加速度连续变化等）。",
  "subtask": {
    "1": {
      "subtask": "子任务1（几何预处理与拐角圆滑化）目标是将原始数控路径的几何描述标准化为适合后续实时速度/加速度规划的分段表示（直线段与圆弧段），并在必要时按给定法向误差 ε 和机床分辨率 Δr 对折角处做圆滑化（fillet），最终输出结构化的分段数据与每个采样点的几何属性；其工作范围仅限于输入归一化、路径分段、角点识别与圆角半径求解、圆角插入、以及基于曲率和分辨率的自适应采样，所有物理量需先统一为国际单位制（位置/长度/半径/误差以米，速度以 m/s，加速度以 m/s^2，jerk 以 m/s^3，注意将题目中 m/min 或 mm/s^3 等单位转换为 SI）。具体步骤与方法为：①输入与预检——接受原始节点坐标序列（可含直线和圆弧段的端点或中心/半径参数）、用户局部最大速度标注（如有）、机床参数（Vmin/Vmax、Amin/Amax、J_const）、误差 ε、分辨率 Δr 和数值容差 tol；检查并统一坐标系与单位、剔除冗余共线点并标记原始段类型。②折角检测——在节点处计算相邻两段的夹角 θ，通过阈值（例如 θ 不等于 180°）识别需要处理的角点并分类为“可圆滑化”或“必须保留尖角（由工艺约束/用户指定）”。③最小圆角半径 r_min 求解——针对每一可圆滑化角点，建立圆弧与两直线相切的几何关系（角平分线方向、圆心与切点位置满足 d = r / sin(θ/2) 等关系），定义圆角替代原折点后相对于原折线在法向方向的最大偏差函数 D(r;θ)（可用解析表达式或数值积分/最大值搜索表示），用数值根查法（例如二分法或牛顿法，带上下界初值和收敛容差 tol ≪ ε）解方程 D(r;θ)=ε 得到最小满足误差约束的 r_min；若用户或工艺指定最小/最大半径界限则在可行区间内取满足工艺与误差要求的 r（优先采用最大可容忍半径以降低曲率）。④圆角插入与几何替换——将原折点替换为与两相邻段相切的圆弧，计算并记录切点坐标、圆心坐标、半径 r、起止角度与弧长，并更新相邻直线段的端点为相切点；若某角点被标记为“保留尖角”则不插入圆角并在输出中标注需在后续阶段强制降速或特殊处理。⑤采样策略——为每条直线/圆弧段生成基于曲率和分辨率的自适应采样点：直线按步长不超过 s_max_line（由 Δr 和允许法向误差决定）等距采样；圆弧按角步长 Δφ 选取，使弧段上的弦高误差 ≤ min(ε, c·Δr)（可由 chord error = r(1−cos(Δφ/2)) 反解 Δφ），并保证每段至少有若干点以精确计算切向与法向向量。⑥每点几何属性计算与输出格式——对每个采样点计算并输出弧长参数 s、三维坐标 x(s)、切向单位向量 t(s)、法向单位向量 n(s)、曲率 κ(s)（圆弧取常数 1/r）、所属段 id、段内局部坐标与段总长；对每个段输出类型（直线/圆弧）、端点/中心/半径/起止角度、替换或保留标志。⑦数值与工程约束——在计算中使用稳健数值方法（向量化计算、边界检查、异常角度处理），设定合理的迭代与收敛容差（例如根查 tol ≤ ε/10），并在无法在给定约束下找到可行 r 时返回错误/警告标志以便上层决策。实现工具可选但非强制：推荐在工程实现中使用常用数值库（例如 Python+NumPy/SciPy 或等效的 C++ 数值库）完成几何计算、根查与采样；最终交付的数据为标准化的段列表与采样点表（JSON、CSV 或内存结构），并包含每处圆角替换的几何参数与可行性标记，供后续实时速度规划模块直接读取。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在给定法向误差 ε 与机床分辨率 Δr 约束下，优化构建并求解折线/圆弧路径的几何预处理与拐角圆滑化模型，输出可用于实时速度规划的标准化分段与自适应采样结果。",
          "expected_output": "标准化段列表与采样点表（含直线/圆弧段、端点/中心/半径/起止角、弧长、替换或保留标志），每采样点的 s、x(s)、t(s)、n(s)、κ(s)、段 id、段内坐标、段长；单位统一为 SI；含不可行圆角的错误/警告标记。",
          "key_inputs_constraints": "输入：原始节点坐标序列（可能含直线/圆弧参数）、局部最大速度标注（可选）、机床参数 Vmin/Vmax、Amin/Amax、J_const、误差 ε、分辨率 Δr、数值容差 tol；约束：统一至 SI 单位；剔除冗余共线点；角点 θ≠180°为候选；根查 tol ≤ ε/10；圆弧采样弦高误差 ≤ min(ε, c·Δr)；线段步长 ≤ s_max_line；若工艺给定 r 边界需满足。",
          "modeling_type": "优化+评价+仿真",
          "role_in_pipeline": "作为实时速度/加速度规划之前的几何标准化与采样子任务；前序依赖：数据读取/坐标系与单位归一；后序任务：S型加减速速度规划、限速合成与时参化、轨迹跟踪误差评估。",
          "assumptions": "输入可为2D或3D欧氏坐标；若圆弧定义缺失方向，按右手规则与法向推断；工艺“保留尖角”优先级高于圆滑；常数 c 默认取1。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别核心目标：ε 与 Δr 约束下的圆滑化优化与标准化分段",
              "description": "准确指出任务是将原始折线/圆弧在法向误差 ε 与分辨率 Δr 约束下进行拐角圆滑化（fillet），并输出直线/圆弧分段用于后续S型速度规划。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：同时提到ε、Δr、圆角半径r、标准化分段；中分：仅提两项约束或忽略分段用途；低分：将任务误解为速度规划或仅做可视化。"
            },
            {
              "sub_criteria": "单位与坐标系统一为 SI 的必要性",
              "description": "明确提出将长度/速度/加速度/jerk 全部统一到 SI（m、m/s、m/s^2、m/s^3），避免 m/min、mm/s^3 混用。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：列出需转换的量并给出示例换算；中分：仅提单位统一；低分：未提或仍以混合单位表述。"
            },
            {
              "sub_criteria": "问题边界：仅限几何预处理与采样，非动力学规划",
              "description": "清楚限定本子任务不涉及S型速度求解，只输出几何与采样属性（s, x(s), t(s), n(s), κ(s)）。",
              "score": 25,
              "evaluation_focus": "范围界定",
              "scoring_hint": "高分：枚举需输出几何属性并声明不做速度时参化；中分：笼统说前处理；低分：混入加速度/jerk时程解。"
            },
            {
              "sub_criteria": "异常与工艺约束识别（保留尖角/不可行半径）",
              "description": "识别“保留尖角”与圆角不可行（r 不满足边界或 D(r;θ)>ε）需标记并上报。",
              "score": 20,
              "evaluation_focus": "风险识别",
              "scoring_hint": "高分：给出不可行判据与标记策略；中分：仅提可能失败；低分：未考虑失败路径。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "几何替换关系复述（两直线相切圆弧）",
              "description": "用θ、r、切点、圆心关系复述：d = r/sin(θ/2)，沿角平分线布置圆心并更新相邻直线端点为切点。",
              "score": 30,
              "evaluation_focus": "几何表述",
              "scoring_hint": "高分：含θ、r、角平分线、切点更新；中分：只述相切未给公式；低分：表述含糊或错误几何关系。"
            },
            {
              "sub_criteria": "误差定义复述：法向最大偏差 D(r;θ)=ε",
              "description": "明确误差在加工型线法向方向定义，并将圆角替代后的最大法向偏差等式化为 D(r;θ)=ε。",
              "score": 30,
              "evaluation_focus": "精确定义",
              "scoring_hint": "高分：给出D的含义与求解目标；中分：只说满足误差不超限；低分：把误差当弦高或随意度量。"
            },
            {
              "sub_criteria": "采样准则复述（弦高误差与分辨率）",
              "description": "直线等距步长≤s_max_line；圆弧按Δφ使 chord error=r(1−cos(Δφ/2))≤min(ε, c·Δr)。",
              "score": 25,
              "evaluation_focus": "准则阐释",
              "scoring_hint": "高分：列出公式与阈值min(ε, c·Δr)；中分：只说基于曲率自适应；低分：无量化采样规则。"
            },
            {
              "sub_criteria": "输出字段复述（s, x, t, n, κ, 段 id）",
              "description": "逐项复述每采样点与每段需输出的字段，强调SI单位与标志位（替换/保留）。",
              "score": 15,
              "evaluation_focus": "需求映射",
              "scoring_hint": "高分：完整字段清单；中分：缺少2项以内；低分：字段缺失或混用单位。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "输入完备性假设（2D/3D、圆弧参数推断）",
              "description": "说明若圆弧缺失方向或法向，通过右手规则/相邻点顺序推断；支持2D/3D路径。",
              "score": 25,
              "evaluation_focus": "假设管理",
              "scoring_hint": "高分：给出明确推断规则；中分：仅声明可推断；低分：未说明导致算法不可复现。"
            },
            {
              "sub_criteria": "数值容差与收敛假设（tol ≤ ε/10）",
              "description": "设定根查与几何比较容差关系，阐明停止条件与最大迭代次数。",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：tol、迭代上限、收敛准则齐全；中分：仅给tol范围；低分：无容差假设。"
            },
            {
              "sub_criteria": "工艺优先级假设（保留尖角优先于圆滑）",
              "description": "明确当冲突时遵从工艺标注，圆角不插入并标记需后续降速处理。",
              "score": 25,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：含标记与后续处理提示；中分：仅说保留；低分：忽略或强制圆滑化。"
            },
            {
              "sub_criteria": "分辨率驱动的采样下界假设（最小点数）",
              "description": "每段至少若干采样点（如≥3）以保证 t(s)、n(s)、κ(s)稳定计算。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出最少点数与原因；中分：只说不少；低分：未设下界导致退化。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "角点检测模型（θ 计算与阈值）",
              "description": "通过相邻段夹角θ（矢量夹角）检测 θ≠180° 的角点并分类为可圆滑化/保留尖角。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含数值稳定技巧（归一化、钳位cosθ）；中分：仅给公式；低分：角点识别不可靠。"
            },
            {
              "sub_criteria": "圆角几何关系建模（角平分线与切点更新）",
              "description": "建立 d=r/sin(θ/2) 与圆心在角平分线上的关系，推导切点位置公式并更新相邻直线段端点。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出切点沿各边退让距离 r·cot(θ/2) 或等价表达；中分：仅给d关系；低分：关系错误或不全。"
            },
            {
              "sub_criteria": "最大法向误差 D(r;θ) 定义与表达",
              "description": "给出 D(r;θ) 的解析或数值最大化表达，并用于约束 D(r;θ)=ε。",
              "score": 25,
              "evaluation_focus": "度量设计",
              "scoring_hint": "高分：明确D的计算路径（如对原折线法向投影最大值）；中分：口述存在；低分：混淆为弦高误差。"
            },
            {
              "sub_criteria": "采样策略模型（直线 s_max_line 与圆弧 Δφ 反解）",
              "description": "建立直线步长与圆弧弦高误差控制模型，反解Δφ并设置段内均匀采样。",
              "score": 20,
              "evaluation_focus": "离散化设计",
              "scoring_hint": "高分：写出Δφ≤2 arccos(1−e/r)；中分：只给不等式；低分：无反解或无下限控制。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "r_min 数值根查（D(r;θ)=ε）",
              "description": "使用二分/牛顿法解 D(r;θ)=ε，设上下界、单调性判断、收敛容差 tol≤ε/10。",
              "score": 35,
              "evaluation_focus": "数值方法",
              "scoring_hint": "高分：边界、终止准则、退火/回退策略完整；中分：有方法但缺边界；低分：直接拍值或无求解。"
            },
            {
              "sub_criteria": "可行域裁剪与工艺边界",
              "description": "结合用户最小/最大半径限制裁剪r，可行集内优先选最大r以降低曲率κ=1/r。",
              "score": 20,
              "evaluation_focus": "优化取舍",
              "scoring_hint": "高分：实现max-feasible策略；中分：任意选择；低分：无边界处理。"
            },
            {
              "sub_criteria": "异常角度与退化处理（θ→0°/180°）",
              "description": "对近共线/极小角处理：跳过圆滑或限制r并返回警告。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：阈值与分支明确；中分：仅提醒；低分：计算发散或NaN未捕获。"
            },
            {
              "sub_criteria": "圆弧采样 Δφ 数值稳定与覆盖",
              "description": "保证Δφ分割整除弧长，端点包含，避免累计误差；最少点数保障。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：端点对齐、累计误差校正；中分：基本可用；低分：端点丢失或密度不稳。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "SI 单位转换与验证",
              "description": "实现统一单位转换（m、m/s、m/s^2、m/s^3）并含断言/单元测试校验。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含转换函数与测试用例；中分：仅转换；低分：混用单位。"
            },
            {
              "sub_criteria": "几何计算稳健性（向量化、钳位、边界检查）",
              "description": "对cosθ钳位[-1,1]、零长度向量检查、归一化安全处理，异常返回标志。",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：完整检查与错误码；中分：部分检查；低分：易崩溃。"
            },
            {
              "sub_criteria": "r_min 根查实现与收敛日志",
              "description": "封装二分/牛顿迭代，暴露 tol、max_iter，提供收敛状态与迭代次数。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：接口清晰、状态可检；中分：能收敛；低分：黑盒无可观测性。"
            },
            {
              "sub_criteria": "输出结构与字段完备性（JSON/表）",
              "description": "段表与采样点表字段齐全（id、类型、端点/中心/半径/角度、s、x、t、n、κ、标志）。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：字段齐全且一致；中分：缺少≤2项；低分：结构混乱或缺关键字段。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "误差验证：D(r;θ)≤ε 与弦高误差≤min(ε, c·Δr)",
              "description": "在示例角点与圆弧采样上报告误差检测结果与最坏点位置。",
              "score": 35,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：数值报告与可复现检查；中分：口头说明；低分：未验证或超限未发现。"
            },
            {
              "sub_criteria": "分辨率 Δr 满足性与采样密度评估",
              "description": "统计步长/角步长分布，证明满足机床分辨率与最少点数。",
              "score": 25,
              "evaluation_focus": "数据检查",
              "scoring_hint": "高分：分布/极值表；中分：摘要数；低分：无检查。"
            },
            {
              "sub_criteria": "不可行角点与保留尖角标记审计",
              "description": "列出被标记的角点、原因（工艺/半径边界/收敛失败）与后续处理建议。",
              "score": 20,
              "evaluation_focus": "风险说明",
              "scoring_hint": "高分：逐点清单；中分：总数与原因；低分：未报告。"
            },
            {
              "sub_criteria": "曲率 κ(s)=1/r 降低与后续S型规划利好",
              "description": "分析采用最大可容忍 r 对降低曲率峰值的影响，解释对速度规划的潜在收益。",
              "score": 20,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量比较或图表；中分：定性说明；低分：无关联分析。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2 的目标是在每个预采样点（由几何预处理提供，含弧长参数 s、切向单位向量 t = (t_x,t_y,t_z)、法向单位向量 n = (n_x,n_y,n_z) 及曲率 κ）上，精确计算该点对路径切向速度 v 和切向加速度 a_t = d^2s/dt^2 的可行域，并把这些几何约束映射为逐轴加速度约束与脉冲/频率约束下的可行集合；该子任务的输入为：采样点列表（s, t, n, κ）、各轴最大允许加速度 a_max,i（i∈{x,y,z}）、每轴步距/分辨率 Δr_i、每轴最大脉冲频率 f_max,i（若无可忽略）、全局速度上下界 Vmin,Vmax 以及数值容差 tol（例如 1e−6 m/s）；输出为每个采样点的三项核心结果：最大允许切向速度 v_geom_max(s)（满足所有约束的上界），在该 v 下的允许切向加速度区间 [a_t,min(s), a_t,max(s)]（若为空则标记不再可行），以及用于后续规划的可行性标志与诊断信息（哪个约束成为瓶颈、需降低哪些参数等）。具体计算步骤与方法如下：1) 单点初级约束：由法向离心加速度约束得 v_curv = ∞ if κ=0 else sqrt(a_n_max/κ)，其中 a_n_max 可取为各轴加速度约束在法向分量允许下的最小投影（或直接用总体 a_max 作为保守值）；将该量与全局速度界限 Vmin,Vmax 及频率约束初映射合并为候选上界 v_candidate = min(Vmax, v_curv, min_i(f_max,i * Δr_i / |t_i|)（若给定 f_max_i））。2) 单轴投影约束的精确判定：对给定尝试速度 v，单轴加速度分量由 a_i = t_i * a_t + v^2 κ n_i 给出（对每条轴 i 必须满足 |a_i| ≤ a_max,i）。据此对每轴求出对 a_t 的允许区间（若 |t_i|>tol）： I_i(v) = [ (−a_max,i − v^2 κ n_i)/t_i , (a_max,i − v^2 κ n_i)/t_i ]（注意分母为负时区间端点顺序相反）；若 |t_i| ≤ tol（切向分量几乎为零）则该轴约束退化为必须满足 |v^2 κ n_i| ≤ a_max,i，否则无可行 a_t（立即判为该 v 不可行）。3) 可行性判定与 v_max 求解：各轴允许区间的交集 I(v) = ∩_i I_i(v) 非空是给定 v 可行的必要且充分条件；由于 v^2 项随 v 单调增加，判定函数 feasible(v)（I(v) 非空）关于 v 是单调的（增大 v 不能使不可行变可行），因此可用二分法在区间 [Vmin, v_candidate] 上求 v_geom_max 为最大满足 feasible(v) 的 v，数值收敛判据为 |v_hi−v_lo|<tol_v 或二分迭代次数上限。4) 在得到 v_geom_max 后，返回該 v 对应的交集 I(v_geom_max) 作为允许的切向加速度区间 [a_t,min,a_t,max]；为后续选择具体 a_t 的策略可取区间中点或根据其他代价（如最小峰值轴加速度）优化得到的 a_t*，并同时计算出每轴对应的 a_i 用于诊断。5) 数值与边界处理：对 κ≈0、t_i≈0 的退化情形做专门判断以避免除零，若某轴约束在任意 v≤Vmin 下都不可满足则产出“不可行”标志并返回需要在几何层或机床限幅上调整的建议；二分初始上界应以 v_candidate 作为保守上限并确保 feasible(Vmin) 为真（否则直接标记点不可行）。实现上建议向量化并行化逐点计算、对每点先快速判别法向与频率瓶颈以避免不必要的二分求解，并把常量单位统一为 SI（m, m/s, m/s^2）。本子任务的最终结果表格化输出（每点：s, v_geom_max, a_t_min, a_t_max, 可行性标志, 瓶颈约束标识）以便上层时序剖面生成直接读取。",
      "criteria": {
        "task_understanding": {
          "core_goal": "评估并求解每个采样点在轴向加速度与频率约束下的最大可行切向速度优化与切向加速度区间计算",
          "expected_output": "逐采样点表格：含 s, v_geom_max(s), a_t_min(s), a_t_max(s), 可行性标志, 瓶颈约束标识及每轴加速度投影",
          "key_inputs_constraints": "输入：采样点(s,t,n,κ)、轴向加速度上限a_max,i、步距Δr_i、最大脉冲频率f_max,i、速度界Vmin/Vmax、tol；约束：|a_i|≤a_max,i，其中a_i=t_i a_t+v^2 κ n_i；频率约束v≤min_i(f_max,i Δr_i/|t_i|)；曲率约束v≤sqrt(a_n_max/κ)；数值要求feasible(v)单调、二分收敛tol_v",
          "modeling_type": "优化+评价",
          "role_in_pipeline": "作为几何预处理（子任务1）之后、时序速度/加速度规划之前的可行域评估与上界优化环节；前序依赖：标准化段与采样点几何属性；后序任务：全局S型速度曲线规划与jerk一致性调度",
          "assumptions": "若未给出f_max,i则忽略频率约束；a_n_max默认取min_i a_max,i 作为法向保守上限；Vmin可取0或由上游指定；tol_v建议≤1e-6 m/s。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别切向速度上界v_geom_max与切向加速度区间[a_t,min,a_t,max]的评估目标",
              "description": "明确本任务需在每个s点计算满足轴向加速度与频率、曲率约束的最大切向速度以及对应a_t可行区间，而非全局轨迹求解。",
              "score": 30,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：准确表述v_geom_max与[a_t,min,a_t,max]为单点可行域；中分：只提速度上界或只提加速度区间；低分：混淆为整段S型曲线生成。"
            },
            {
              "sub_criteria": "识别约束来源：曲率离心、单轴加速度投影、脉冲频率、Vmin/Vmax",
              "description": "完整列出v_curv、I_i(v)、频率上界与全局速度界的共同作用及优先快速筛选。",
              "score": 30,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：四类约束均被识别且说明组合方式；中分：缺少其一；低分：仅给出模糊速度限制。"
            },
            {
              "sub_criteria": "退化情形意识：κ≈0、t_i≈0 的判定需求",
              "description": "能指出零曲率和零切向分量需特别处理避免除零并改变可行性判据。",
              "score": 40,
              "evaluation_focus": "边界意识",
              "scoring_hint": "高分：给出|t_i|≤tol与κ=0的具体处理；中分：仅文字提示无具体规则；低分：未提。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用数学形式复述a_i=t_i a_t+v^2 κ n_i与|a_i|≤a_max,i",
              "description": "清晰给出轴向加速度投影公式与不等式约束作为核心判据。",
              "score": 40,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：公式正确且符号与输入一致；中分：有符号或平方项错误；低分：无公式。"
            },
            {
              "sub_criteria": "区间交集I(v)=∩ I_i(v) 非空作为feasible(v)定义",
              "description": "明确把单轴约束转化为a_t区间并以交集非空判定可行。",
              "score": 30,
              "evaluation_focus": "形式化",
              "scoring_hint": "高分：写出I_i(v)端点并说明分母符号翻转；中分：缺少翻转说明；低分：未提交集。"
            },
            {
              "sub_criteria": "feasible(v)单调性与二分搜索区间[Vmin,v_candidate]",
              "description": "正确说明随v增加v^2项增大导致可行性单调不增，从而可二分求解v_geom_max。",
              "score": 30,
              "evaluation_focus": "性质把握",
              "scoring_hint": "高分：明确单调性与终止条件tol_v；中分：提二分但无单调性依据；低分：使用不当搜索如爬山。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "a_n_max设定：取min_i a_max,i或更精细投影的保守假设",
              "description": "说明离心加速度上界如何从轴向上界推得，给出保守或改进选项。",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出min_i a_max,i并讨论保守性；中分：只写a_max无来源；低分：未定义。"
            },
            {
              "sub_criteria": "频率约束处理：无f_max,i时忽略的假设",
              "description": "明确当f_max,i缺失时删除该约束并在诊断中标注。",
              "score": 25,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：清楚写明条件与公式v≤min_i(f_max,i Δr_i/|t_i|)；中分：概述但无公式；低分：忽视。"
            },
            {
              "sub_criteria": "数值容差tol与tol_v、t_i与κ的零阈值设定",
              "description": "给出用于稳定计算的阈值并说明对判定的影响。",
              "score": 40,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：提供数值级别如1e-6并区分用途；中分：仅文字；低分：无阈值。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "v_candidate组合：min(Vmax, v_curv, 频率上界)",
              "description": "构建初始速度上界以减少二分范围并包含必需项。",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：表达式完整且含κ=0时v_curv=∞；中分：缺少其一；低分：未组合。"
            },
            {
              "sub_criteria": "I_i(v)端点计算与分母符号处理",
              "description": "正确生成[(−a_max,i−v^2 κ n_i)/t_i, (a_max,i−v^2 κ n_i)/t_i]并在t_i<0时交换端点。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出交换逻辑；中分：固定顺序导致错误；低分：未构造区间。"
            },
            {
              "sub_criteria": "t_i≈0退化：检验|v^2 κ n_i|≤a_max,i的硬约束",
              "description": "当|t_i|≤tol时，不形成区间而采用必要条件判定。",
              "score": 35,
              "evaluation_focus": "边界建模",
              "scoring_hint": "高分：实现该硬检验并纳入feasible(v)；中分：只提示不实现；低分：忽略导致除零。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "feasible(Vmin)预检与不可行标记",
              "description": "先判定Vmin是否可行，不可行则快速返回不可行与调整建议。",
              "score": 25,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：实现预检并输出诊断；中分：预检但无诊断；低分：无预检。"
            },
            {
              "sub_criteria": "二分法求v_geom_max的收敛与停止条件",
              "description": "在[Vmin,v_candidate]上二分，使用|v_hi−v_lo|<tol_v或迭代上限。",
              "score": 35,
              "evaluation_focus": "数值算法",
              "scoring_hint": "高分：明确tol_v与上限、单调性引用；中分：缺少停止准则；低分：错误方法或不收敛。"
            },
            {
              "sub_criteria": "交集计算与[a_t,min,a_t,max]返回",
              "description": "在v_geom_max处计算I(v)交集端点并输出区间，空集则标不可行。",
              "score": 40,
              "evaluation_focus": "实现正确性",
              "scoring_hint": "高分：返回闭区间并与每轴a_i诊断一致；中分：仅给区间中点；低分：未给区间或与判定矛盾。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "向量化逐点处理与早期剪枝（v_curv/频率瓶颈）",
              "description": "采用向量化或批处理并先用v_curv与频率上界过滤，减少二分次数。",
              "score": 30,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：显著减少二分调用并测量次数；中分：部分剪枝；低分：逐点暴力二分。"
            },
            {
              "sub_criteria": "数值稳健性：tol处理与除零防护",
              "description": "统一使用tol、tol_v，处理κ≈0、t_i≈0并避免NaN。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：单元测试覆盖退化用例；中分：仅条件判断；低分：出现NaN/崩溃。"
            },
            {
              "sub_criteria": "诊断输出：瓶颈约束与每轴a_i记录",
              "description": "记录限制v的约束类型与对应轴的a_i，供后续调度使用。",
              "score": 40,
              "evaluation_focus": "可观测性",
              "scoring_hint": "高分：明确标注‘曲率/频率/轴i’并提供数值；中分：仅文字标签；低分：无诊断。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性标志与不可行点原因定位",
              "description": "统计不可行比例并按‘t_i≈0硬约束超限/曲率过大/频率瓶颈’分类。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出占比与代表样本；中分：仅原因列表；低分：未分析。"
            },
            {
              "sub_criteria": "v_geom_max分布与约束主导性分析",
              "description": "展示v_geom_max随κ或段类型变化，并指出主导瓶颈的区段。",
              "score": 35,
              "evaluation_focus": "数据洞察",
              "scoring_hint": "高分：图表或统计对比直线/圆弧；中分：定性描述；低分：无对比。"
            },
            {
              "sub_criteria": "敏感性：a_max,i、f_max,i、ε/Δr变化的影响",
              "description": "讨论或试验轴向上限和频率上限变化对v_geom_max与[a_t]的影响。",
              "score": 30,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：给出定量变化或曲线；中分：定性；低分：未做。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3 的目标是从每个路径采样点处已知的几何属性（弧长参数 s、切向单位向量 t、法向单位向量 n、曲率 κ）以及每点的速度/加速度可行域（例如 v_geom_max(s) 和 a_t 可行区间），在给定机床物理约束（J_const、各轴 a_max、全局 Vmin/Vmax、分辨率 Δr、控制周期 Ts、可选的最大脉冲频率 f_max）和边界条件（起始/终止速度 V0、可选起始加速度 a0）下，生成满足 jerk 限制的最小时间（或近似最优）S 型时间參数化 s(t) 并映射为各轴的采样化指令序列；该子任务需完成的步骤和方法包括：1) 输入校验：读取并统一单位的输入数据（s、t、n、κ、v_geom_max、a_t_bounds、J_const、V0、a0、Ts、Δr、f_max 等），确认每点的可行性并在发现不可行点时返回明确错误/警告；2) 前向—后向可行速度传播：以离散采样点为节点执行前向扫描（从起点以给定初始速度和加速度 a0、受 J_const 与 a_max 限制，按逐点距离计算能达到的最大速度上界）和后向扫描（从终点反向保证能减速到终止速度），交替迭代直至每点速度上界收敛（收敛准则例如最大速度变化 < tol_v 或迭代次数上限）；实现时利用解析或半解析公式估算在给定距离和 jerk/加速度约束下的可达速度，避免对每点做昂贵全局优化。3) 段内 S 型剖面求解：对于每条插补段（段长度 L，段端速度 v0、v1，段内允许最大速度 v_allow），用解析表达式或一维数值求根（受控二分/牛顿法、含保护）确定最小时间的 jerk-limited 剖面类型（完整 7 段或退化情形），具体计算 T1 = a_peak / J_const、T2（匀加速时间）、T3（匀速时间）或相应退化参数；若允许非零初始加速度 a0，把 a0 作为段起点的初值代入剖面方程并调整求解流程；当段长不足以达到 a_max 或 v_allow 时，求解可达 v_peak（单变量求根问题），所有数值求解应限定迭代次数和容差并返回剖面参数与时间分段函数的闭式或分段多项式表示。4) 轴向映射与约束验证：基于解析的 s(t) 在细时间步（≥ Ts）上采样计算切向速度 v(s) 和切向加速度 a_t(t)，映射到每轴 v_i(t)=t_i(s)·v(s) 与 a_i(t)=t_i(s)·a_t + v^2·κ·n_i(s)，检测并确保 |a_i(t)| ≤ a_max,i 与 |J_axis|（若需要）不超限；同时将位置/速度采样量化为脉冲（Δp = Δr）并计算瞬时脉冲频率 f_i(t)=|v_i(t)|/Δr，若任一轴 f_i 超出 f_max，则按比例削减相应段的 v_allow 并重新求解受影响段的 S 型剖面（迭代回退直到满足频率约束或标记不可行）；5) 离散化输出与实时发布策略：将最终 s(t) 转换为控制周期 Ts 下的时间序列（包含每步的轴位置、速度、加速度与剖面段标识），同时输出每段的 S 型参数（T1/T2/T3 与加加速度符号），并按实时需求仅发布前向短 horizon（look-ahead 窗口）以支持滚动更新；实现上应支持增量再规划（当后端约束更新或检测到执行偏差时局部重新计算），并提供诊断标志（例如导致降速的瓶颈约束、重算次数、不可行点索引）。6) 数值实现细节：采用向量化运算与并行化遍历以提高性能，段内求根优先用收敛稳定的二分法并在可行时用牛顿加速，设置保守容差（例如 tol_v、tol_time 与最大迭代次数），并记录计算时间以确保在给定 look-ahead 大小下满足实时性；实现语言/库可选但应提供可嵌入实时控制系统的实现（如 C/C++ 或优化的 Python/Cython 模块）。最终交付物为：经验证收敛的 s(t) 的分段解析描述、每轴在采样周期 Ts 下的离散位置/速度/加速度指令序列、每段 S 型参数表、以及完整的诊断/可行性报告（包含任何降速或重规划的触发原因）。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在每个采样点的速度/加速度可行域与机床约束下，优化生成满足恒定加加速度 J_const 的最小时间 S 型时间参数化 s(t) 并映射为各轴离散指令序列",
          "expected_output": "分段S型剖面参数表（T1/T2/T3、段类型、v_peak、a_peak）、时间参数化函数s(t)的分段描述、按控制周期Ts采样的各轴位置/速度/加速度指令序列、频率/加速度约束验证报告与诊断标签",
          "key_inputs_constraints": "输入：采样点(s,t,n,κ)、v_geom_max(s)、a_t_bounds(s)、机床约束(J_const,a_max,i,Δr_i,Ts,f_max, Vmin/Vmax)、边界(V0,a0,终止速度)。约束：|a_i|≤a_max,i，jerk限幅J_const，脉冲频率f_i≤f_max，分辨率量化Δr_i，单位统一SI，数值容差tol_v/tol_time，feasible点集不为空。",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "作为几何预处理与可行域评估之后的时间参数化与指令生成环节；前序依赖：子任务1（几何与圆滑化）、子任务2（v_geom_max与a_t区间）；后续依赖：实时执行/闭环跟踪与在线再规划模块",
          "assumptions": "若未提供f_max则忽略频率约束；若提供a0则允许非零起始加速度并进入7段/退化S型求解；look-ahead采用固定窗口且需在实时预算内完成一次传播迭代。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "最小时间S型优化目标与边界(V0,a0)识别",
              "description": "明确该任务是最小时间优化而非仅平滑化，并正确识别起止速度V0/终止速度与可选起始加速度a0对剖面类型的影响",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚表述min-time目标并区分7段/退化情形；中分：有min-time但忽略a0影响；低分：将任务当作固定速度跟踪或未提最小时间"
            },
            {
              "sub_criteria": "可行域(v_geom_max, a_t_bounds)与机床约束(J_const,a_max,i,f_max,Δr,Ts)整合",
              "description": "识别并列出需同时满足几何速度上界、切向加速度区间、轴向加速度、jerk与频率/分辨率约束",
              "score": 30,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：列全约束并说明相互作用；中分：缺少1类（如f_max或Δr量化）；低分：仅提单一约束如a_max"
            },
            {
              "sub_criteria": "前向—后向速度传播与段内S型求解的区分",
              "description": "区分全局节点速度上界传播与单段内S型解析/数值求解两层问题及其交互迭代",
              "score": 40,
              "evaluation_focus": "问题分解",
              "scoring_hint": "高分：清晰两层结构与收敛准则；中分：含糊描述传播或段内求解之一；低分：无传播或直接全局优化表述不切题"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "以SI单位与采样周期Ts表述s(t)与轴向指令",
              "description": "用米/秒/秒^2/秒^3和Ts明确s(t)、v_i(t)、a_i(t)与量化到Δr_i的关系",
              "score": 25,
              "evaluation_focus": "规范表达",
              "scoring_hint": "高分：单位一致并说明量化与频率关系；中分：单位大体一致但未述量化；低分：单位混乱"
            },
            {
              "sub_criteria": "v_geom_max与[a_t,min,a_t,max]如何限制段内v_allow",
              "description": "准确复述几何上界与切向加速度区间如何投影到段内允许峰值速度v_allow与剖面类型",
              "score": 35,
              "evaluation_focus": "约束映射",
              "scoring_hint": "高分：给出v_allow=min(传播上界, v_geom_max)思路并考虑a_t区间；中分：仅提v_geom_max；低分：忽略几何可行域"
            },
            {
              "sub_criteria": "频率f_max与分辨率Δr对v_i的限制复述",
              "description": "清晰表述f_i=|v_i|/Δr_i≤f_max,i导致对v(s)按|t_i|比例约束并需回退重算",
              "score": 40,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：给出按比例削减并重求S型；中分：仅口头提频率限制；低分：未提频率/分辨率"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "jerk常量J_const与S型7段/退化假设",
              "description": "假设每段jerk为常数分段且允许退化T1/T2/T3为零的情形并说明触发条件",
              "score": 35,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：列出加加速段、匀加速、匀速等退化条件；中分：仅说S型不谈退化；低分：未说明jerk常量"
            },
            {
              "sub_criteria": "可行性与收敛假设(tol_v,tol_time,迭代上限)",
              "description": "设定数值容差与传播迭代终止准则并假设feasible(V0)与终点可达",
              "score": 30,
              "evaluation_focus": "数值设定",
              "scoring_hint": "高分：给出具体容差与迭代上限；中分：给出模糊阈值；低分：无收敛假设"
            },
            {
              "sub_criteria": "频率缺省与a0可选性假设",
              "description": "在未提供f_max时忽略频率约束；提供a0时纳入初始条件并改变段内求解",
              "score": 35,
              "evaluation_focus": "工程假设",
              "scoring_hint": "高分：清楚两种情形处理差异；中分：仅提其一；低分：与输入不一致的假设"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "前向—后向可行速度传播模型与更新规则",
              "description": "给出在采样距离下由J_const与a_max推导的速度可达上界递推，并与v_geom_max取最小",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：写出递推/包络更新与收敛判据；中分：描述思路无公式；低分：无传播建模"
            },
            {
              "sub_criteria": "段内S型剖面参数化(T1/T2/T3)与类型判定",
              "description": "建立完整7段及加速/加减对称退化情形的判别与参数方程，含v0,v1,a0,v_allow,L联立关系",
              "score": 40,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确T1=a_peak/J_const等关系并给出长度闭式/求根方程；中分：仅口述段型；低分：未给参数化"
            },
            {
              "sub_criteria": "轴向映射与约束验证模型",
              "description": "构建v_i=t_i v, a_i=t_i a_t + v^2 κ n_i与f_i=|v_i|/Δr_i的验证与回退削减策略模型",
              "score": 30,
              "evaluation_focus": "约束整合",
              "scoring_hint": "高分：给出检测->削减v_allow->重求流程；中分：只检测不回退；低分：未做轴向验证"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值求根与稳定性(二分/牛顿)用于v_peak或T2/T3",
              "description": "对段长不足达到a_max或v_allow时，构造单变量方程并用有保护的二分+牛顿求解，设tol与上限",
              "score": 35,
              "evaluation_focus": "数值算法",
              "scoring_hint": "高分：提供容差、初值与失败回退策略；中分：仅说明用牛顿；低分：无求根或不稳定"
            },
            {
              "sub_criteria": "传播收敛与终止判据实现",
              "description": "迭代直至max|v_new−v_old|<tol_v或迭代次数达上限并给出不可收敛处理",
              "score": 25,
              "evaluation_focus": "收敛控制",
              "scoring_hint": "高分：量化阈值与超限处理；中分：有阈值无超限策略；低分：无判据"
            },
            {
              "sub_criteria": "频率约束回退与再求解闭环",
              "description": "当任一轴f_i>f_max时按比例缩放v_allow并重解S型直到满足或判为不可行",
              "score": 40,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：描述比例规则与最大重算次数；中分：提回退不量化；低分：忽略频率回退"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "SI单位校验与输入验证(s,t,n,κ,v_geom_max,a_t_bounds,J_const,Ts,Δr)",
              "description": "实现统一单位与完整性检查，捕获不可行点并输出明确错误/警告",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：系统校验并定位索引；中分：基本检查；低分：无检查"
            },
            {
              "sub_criteria": "向量化前后向传播与段内S型求解模块化",
              "description": "提供可复用函数/类，向量化遍历采样点，独立模块求解T1/T2/T3与段类型",
              "score": 35,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：接口清晰、单元测试或断言；中分：模块化一般；低分：脚本式耦合"
            },
            {
              "sub_criteria": "离散化输出与量化(Δr_i)及频率检查(f_i)",
              "description": "按Ts生成各轴位置/速度/加速度并量化到Δr_i，计算f_i并标注超限与重算次数",
              "score": 40,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：完整采样管线与诊断字段；中分：输出不含诊断；低分：无量化或频率检查"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "约束验证(|a_i|≤a_max,i, f_i≤f_max)与jerk遵守",
              "description": "报告整段中轴向加速度与频率是否超限，并给出最大裕度与对应时间戳",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：量化最大值/裕度；中分：结论无数据；低分：未验证"
            },
            {
              "sub_criteria": "最小时间性评估与对比",
              "description": "给出总加工时间，与无jerk或无频率约束的基线对比，解释差异来源",
              "score": 30,
              "evaluation_focus": "性能评估",
              "scoring_hint": "高分：提供数值对比≥1个基线；中分：仅报时间；低分：无时间统计"
            },
            {
              "sub_criteria": "诊断与瓶颈定位(v_geom_max, a_t_bounds, f_max, a_max)",
              "description": "标注导致降速的瓶颈（几何、加速度或频率）及受影响段/点索引与重算次数",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：列瓶颈来源与索引；中分：仅宏观说明；低分：无诊断信息"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（平稳性改进、验证、灵敏度分析与工程实现策略）旨在对已生成的轨迹时间剖面和轴命令进行系统化的平稳性验证与改进，使其在满足几何精度和动力学约束的同时最小化对机床结构的激励并具备工程可实施性；其工作范围包括（A）基于高保真数值仿真与硬件在环试验的验证流程，检验并量化轨迹在执行器模型（包含伺服带宽、滞后/时延、刚度、摩擦等）下的跟随误差与动力学响应；（B）通过时域与频域指标评估激励大小并识别潜在谐振风险；（C）对关键模型参数与限制进行系统化灵敏度与不确定性分析；（D）设计并实现平滑性改进策略、实时实现措施与安全回退机制，并输出可部署的验证报告与调整建议。为完成上述任务应按下列步骤实施：首先输入（必须项）包括：离散化时间剖面 s(t) 或每周期轴命令序列、路径几何与采样点、机床约束集（Vmin/Vmax、各轴 a_max、J_max、步距/分辨率 Δr、控制周期 Ts、最大脉冲频率）、伺服/驱动模型参数与传感器数据要求（编码器、加速度计）；基于这些输入，在数值仿真环境（建议 MATLAB/Simulink 或 Python+NumPy/SciPy + control/sysid 库）构建执行器闭环模型并进行前向仿真，计算并记录：每轴与合成运动的最大与均方值位置跟随误差、最大/均方加速度、最大/均方 jerk（及可选 snap）、脉冲频率时序、以及法向几何偏差；同时对加速度信号做频谱分析（FFT）以识别主能量频段与可能与机床固有频率重合的峰值。其次定义并计算绩效与安全度量——例如约束裕量（每项约束到达极限的最小距离）、平稳性指标（∫ J^2 dt 或 ∫ snap^2 dt）、峰值指标（max |a|、max |J|）、跟随误差指标（max err、RMS err）及频谱能量占比——并据此判定是否需改进。第三，开展灵敏度与不确定性分析：在选定参数集合（如 a_max、J_const、ε、Δr、伺服带宽、时延）上做局部扰动或蒙特卡洛仿真，记录加工时间、峰值/均方指标与约束违例的变化率，提取对系统表现影响最大的参数并生成“风险-收益”排序。第四，基于结果提出并实现改进方法：优先级包括（1）用保证 jerk 连续或更高阶连续的轨迹重参数化（例如最小 jerk/最小 snap 五次/七次样条或二次型约束优化，目标函数可为加工时间与高阶导数能量的加权和）以平滑段间连接；（2）在短时窗内采用带约束的MPC或快速二次规划器对未来若干采样步进行滚动再优化以抑制高频激励；（3）当计算资源受限时采用查表/模板缓存与分级策略（预计算典型曲线的平滑模板并在运行时插入）与并行化前向—后向计算以保证实时性；（4）在控制器中加入软限与自适应限幅（基于在线识别的伺服带宽/延迟调整 a_max/J_const），以及安全回退逻辑（检测到跟随误差或振动阈值时自动切换到保守剖面或停机）。第五，闭环验证：将改进后的剖面在同一仿真与实际机床上重复上述验证步骤，比较改进前后的指标并确认所有硬约束与容限满足；如有必要，进行在线辨识（用标准轨迹或激励信号获取编码器/加速度数据并拟合低阶传递函数或滞后模型）以更新执行器模型并再次优化。第六，交付物与工程要求：输出一份结构化验收报告（包含输入参数、仿真与实验数据、峰值与均值指标表、频谱图、灵敏度分析结果、已实施改进的具体算法与参数、实时实现建议如 look-ahead 大小、计算时间预算、模板库说明和安全阈值），并交付可直接嵌入控制器的实现方案（推荐 C/C++ 或实时可调用模块、所需 solver 列表如 OSQP/quadprog、采样时序及接口规范）、以及必要的监测/报警规则。整个子任务要求在仿真与实机验证间完成至少一轮闭环迭代，并保证所有数值计算的采样率与控制周期 Ts 一致、频域分析覆盖机床主要固有频率范围、优化求解在规定的实时计算预算内收敛，且最终给出明确的参数调整或回退策略以便在现场部署时确保机床安全与加工质量。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在给定 s(t) 与轴命令的前提下，对机床轨迹进行仿真与评估，并通过优化改进平稳性与安全性（评估+优化+仿真），最终形成可部署的工程实现与回退策略。",
          "expected_output": "数值仿真报告与图表（跟随误差/jerk/加速度频谱）、绩效与安全度量表、灵敏度与不确定性分析结果、改进后剖面与对比指标、实时实现建议与安全回退规则、可部署代码/模块或参数配置。",
          "key_inputs_constraints": "输入：离散化 s(t) 或每周期轴命令、路径几何采样点（s,t,n,κ）、机床约束（Vmin/Vmax,a_max,J_max,Δr,Ts,f_max）、伺服/驱动模型参数（带宽、时延、刚度、摩擦）。约束：单位统一为SI；仿真采样率与 Ts 一致；频域分析覆盖固有频率；优化在实时预算内收敛；至少一轮闭环迭代验证。",
          "modeling_type": "仿真+评价+优化",
          "role_in_pipeline": "作为最终验证与改进环节，直接依赖子任务1（几何预处理与拐角圆滑化）、子任务2（每点速度/加速度可行域）、子任务3（S型时间参数化）。输出为部署与回退策略并反馈参数到上游再规划。",
          "assumptions": "若缺失实机固有频率，默认用经验带宽与二阶近似模型进行频域覆盖；若无实机数据，硬件在环以等效时延与摩擦模型替代。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "平稳性评估目标与指标对齐（J_max、a_max、∫J^2 dt）",
              "description": "是否明确本任务围绕平稳性评估与改进，选取与 S 型剖面相关的 jerk/加速度峰值与能量指标，并与机床约束 J_max、a_max 对齐。",
              "score": 30,
              "evaluation_focus": "评价指标选择",
              "scoring_hint": "高分：列出 max|J|、max|a|、∫J^2 dt，并与 J_max/a_max 对比；中分：仅峰值或仅能量；低分：没有与约束对齐的指标。"
            },
            {
              "sub_criteria": "执行器闭环仿真需求识别（伺服带宽/时延/刚度）",
              "description": "是否识别必须在闭环模型下评估跟随误差与频谱，包含带宽、时延、刚度、摩擦等关键环节。",
              "score": 30,
              "evaluation_focus": "系统认知",
              "scoring_hint": "高分：完整闭环要素清单；中分：部分要素（如仅带宽）；低分：停留开环或忽略执行器模型。"
            },
            {
              "sub_criteria": "频域与谐振风险识别（FFT与固有频率覆盖）",
              "description": "是否要求基于 FFT/PSD 分析激励能量并与机床固有频率窗口比对以识别谐振风险。",
              "score": 40,
              "evaluation_focus": "频域意识",
              "scoring_hint": "高分：明确频带范围、分辨率与比对方法；中分：仅提FFT无比对；低分：无频域分析。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "与子任务1–3接口复述（s(t)、t,n,κ、Ts）",
              "description": "是否精准复述依赖输入：s(t) 或轴命令、几何属性(t,n,κ)、控制周期 Ts 与单位一致性。",
              "score": 35,
              "evaluation_focus": "接口把握",
              "scoring_hint": "高分：枚举全部并强调SI单位与同步采样；中分：缺少其一；低分：接口不清或混用单位。"
            },
            {
              "sub_criteria": "评价+仿真+优化三重目标表述",
              "description": "是否将本任务定义为仿真+评价+优化闭环迭代并要求至少一轮闭环验证。",
              "score": 35,
              "evaluation_focus": "流程理解",
              "scoring_hint": "高分：清晰三阶段与迭代停止准则；中分：仅两阶段；低分：单次离线评估。"
            },
            {
              "sub_criteria": "安全回退与实时约束说明（f_max、Δr、预算）",
              "description": "是否复述脉冲频率 f_max、步距 Δr 与实时计算预算对实现与回退策略的约束。",
              "score": 30,
              "evaluation_focus": "工程意识",
              "scoring_hint": "高分：列出阈值与触发条件；中分：泛述；低分：未提。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "伺服模型假设（带宽/时延/摩擦）合理性",
              "description": "明确采用何种闭环模型（如二阶+时延+库仑/粘滞摩擦），并给出参数来源与范围。",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：参数区间与依据；中分：给出结构无依据；低分：无模型或过于理想化。"
            },
            {
              "sub_criteria": "频域覆盖与采样假设（FFT窗长与Ts匹配）",
              "description": "假设 FFT 频率上限≥Nyquist，窗长足以分辨主要固有频率，采样对齐 Ts。",
              "score": 30,
              "evaluation_focus": "数值设定",
              "scoring_hint": "高分：量化窗长、分辨率；中分：仅提匹配；低分：不匹配或遗漏。"
            },
            {
              "sub_criteria": "不确定性与灵敏度范围设定（a_max、J_const、ε、Δr）",
              "description": "给出扰动分布或界限，并说明蒙特卡洛或局部扰动步长与样本量。",
              "score": 35,
              "evaluation_focus": "稳健性思维",
              "scoring_hint": "高分：样本量与置信度说明；中分：仅列参数；低分：无范围设定。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "闭环仿真模型构建（s(t)→轴→执行器→误差）",
              "description": "从 s(t) 与轴命令到执行器闭环的端到端仿真链，输出跟随误差与法向几何偏差。",
              "score": 30,
              "evaluation_focus": "系统建模",
              "scoring_hint": "高分：完整链路和验证信号路径；中分：缺少偏差映射；低分：断裂链路。"
            },
            {
              "sub_criteria": "频域分析模型（FFT/PSD + 固有频率比对）",
              "description": "实现对加速度/jerk信号的频谱建模并定义峰值识别与阈值判定方法。",
              "score": 30,
              "evaluation_focus": "频域建模",
              "scoring_hint": "高分：阈值与峰选规则；中分：仅图无规则；低分：缺失。"
            },
            {
              "sub_criteria": "平滑性改进策略模型（最小jerk/snap或MPC/QP）",
              "description": "构建优化目标与约束（a_max、J_max、f_max、Δr、Ts）并给出变量与连接条件（C2/C3）。",
              "score": 40,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：清晰目标与约束、变量定义；中分：目标或约束缺失之一；低分：无可执行模型。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值仿真与稳定性（对齐Ts、积分与离散化）",
              "description": "采用稳定积分/离散方法，误差控制，确保与控制周期 Ts 对齐并报告数值误差。",
              "score": 30,
              "evaluation_focus": "数值稳定性",
              "scoring_hint": "高分：误差界与收敛；中分：基本可跑；低分：数值爆炸或偏差大。"
            },
            {
              "sub_criteria": "优化器选择与收敛（OSQP/quadprog或等效）",
              "description": "求解最小jerk/snap或MPC/QP，给出收敛容差、迭代上限、实时预算与可行性处理。",
              "score": 40,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出时间预算与实际耗时；中分：能收敛无预算；低分：不收敛或无约束处理。"
            },
            {
              "sub_criteria": "闭环迭代与回退（触发阈值与再规划）",
              "description": "定义触发（跟随误差、峰值频段能量、f_max超限）与回退路径（保守剖面/停机）。",
              "score": 30,
              "evaluation_focus": "策略执行",
              "scoring_hint": "高分：量化阈值与状态机；中分：口头描述；低分：无回退或不可执行。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "单位与采样一致性检查（SI、Ts、Δr）",
              "description": "代码层面强制单位校验、采样对齐与脉冲量化一致性，含断言与日志。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：自动校验与单测；中分：人工说明；低分：出现单位或采样错误。"
            },
            {
              "sub_criteria": "FFT与频谱实现正确性（窗函数、零填充、频率轴）",
              "description": "正确使用窗函数与频率刻度，验证频谱峰值可重现并与固有频率比对。",
              "score": 30,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：单元测试/合成信号验证；中分：可运行无验证；低分：频率轴或幅值错误。"
            },
            {
              "sub_criteria": "优化与再规划模块（QP/MPC）工程化",
              "description": "提供可调用接口、超时保护、warm-start、并行化/模板缓存，记录计算时间。",
              "score": 40,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：API清晰、超时降级与统计；中分：基本函数；低分：无接口或易超时。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "绩效与安全度量对比（max|a|、max|J|、约束裕量）",
              "description": "改进前后给出峰值、RMS、裕量的定量对比与是否满足 a_max/J_max 的结论。",
              "score": 35,
              "evaluation_focus": "量化对比",
              "scoring_hint": "高分：表格+百分比改进与是否过限；中分：定性；低分：无对比或结论不明。"
            },
            {
              "sub_criteria": "频域风险变化（主峰频段与能量占比）",
              "description": "比较 FFT/PSD 主峰位置与能量占比，说明与固有频率重合是否缓解。",
              "score": 25,
              "evaluation_focus": "频域解释",
              "scoring_hint": "高分：峰值移位/衰减量化；中分：描述性；低分：无频域结果。"
            },
            {
              "sub_criteria": "灵敏度与不确定性（参数-指标梯度或弹性）",
              "description": "报告 a_max、J_const、ε、Δr、带宽、时延等扰动对加工时间与峰值指标的影响排序。",
              "score": 25,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：敏感度排序与置信区间；中分：少量参数；低分：未做。"
            },
            {
              "sub_criteria": "部署与回退建议（look-ahead、预算、阈值）",
              "description": "给出可部署参数（look-ahead、Ts、计算预算）、回退阈值与监测/报警规则。",
              "score": 15,
              "evaluation_focus": "可实施性",
              "scoring_hint": "高分：参数表与阈值清单；中分：部分建议；低分：缺失。"
            }
          ]
        }
      }
    }
  }
}