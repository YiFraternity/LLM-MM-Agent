{
  "task_id": "2015_F",
  "problem": "附件1提供了国家旅游局公布的201个5A级景区名单，一位自驾游爱好者拟按此景区名单制定旅游计划。该旅游爱好者每年有不超过30天的外出旅游时间，每年外出旅游的次数不超过4次，每次旅游的时间不超过15天；基于个人旅游偏好确定了在每个5A级景区最少的游览时间（见附件1）。基于安全考虑，行车时间限定于每天7:00至19:00之间，每天开车时间不超过8小时；在每天的行程安排上，若安排全天游览则开车时间控制在3小时内，安排半天景点游览，开车时间控制在5小时内；在高速公路上的行车平均速度为90公里/小时，在普通公路上的行车平均速度为40公里/小时。该旅游爱好者计划在每一个省会城市至少停留24小时，以安排专门时间去游览城市特色建筑和体验当地风土人情（不安排景区浏览）。景区开放时间统一为8:00至18:00。请考虑下面问题：\n\n1. 在行车线路的设计上采用高速优先的策略，即先通过高速公路到达与景区邻近的城市，再自驾到景区。附件1给出了各景区到相邻城市的道路和行车时间参考信息，附件2给出了国家高速公路相关信息，附件3给出了若干省会城市之间高速公路路网相关信息。请设计合适的方法，建立数学模型，以该旅游爱好者的常住地在西安市为例，规划设计旅游线路，试确定游遍201个5A级景区至少需要几年？给出每一次旅游的具体行程（每一天的出发地、行车时间、行车里程、游览景区；若有必要，其他更详细表达请另列附件）。\n2. 随着各种旅游服务业的发展，出行方式还可以考虑乘坐高铁或飞机到达与景区相邻的省会城市，而后采用租车的方式自驾到景区游览（租车费用300元/天，油费和高速过路费另计，租车和还车需在同一城市）。此种出行方式可以节省一些路途时间用于景区游览或休闲娱乐，但这种出行方式也会给旅游者带来一些不便，有时费用也会增加。该旅游爱好者根据个人旅游偏好确定在每一个景区最长逗留时间不超过附件1给出的最少时间的2倍。附件4给出了若干城市之间的高铁票价和相关信息（约定：选择高铁出行要求当天乘坐高铁的时间不超过6个小时，乘坐高铁或飞机的当天至多安排半天的景区游览）；附件5给出了若干省会城市之间的机票全价价格信息（含机场建设费）。该旅游爱好者一家3人同行，综合考虑前述全程自驾、先乘坐高铁或飞机到达省会城市后再租车自驾到景区等出行方式（住宿费简\n化为省会城市和旅游景区200元/人·天，地级市150元/人·天，县城100元/人·天；高速公路的油耗加过路费平均为1.00元/公里，普通公路上油耗平均为0.60元/公里；附件1中给出了各景区所在地的信息，若景区位于某城市市区或近郊，则这类景区的市内交通费用已计入住宿费中，不再另计)，建立数学模型设计一个十年游遍所有201个5A景区、费用最优、旅游体验最好的旅游线路，给出每一次旅游的具体线路（含每次具体出行方式；每一天的出发地、费用、路途时间、游览景区、每个景区的游览时间）。\n（三）能否在第二问所建立的模型基础上加以推广，可以为全国的自驾游爱好者规划设计类似的旅游线路，进而给出常住地在北京市的自驾游爱好者的十年旅游计划；根据上述三问的结果给旅游爱好者和旅游有关部门提出建议。\n（四）自2007年3月7日至2015年7月13日，全国旅游景区质量等级评定委员会分29批共批准了201家景区为国家5A级旅游景区。附件6是从国家旅游局官网上收集的国家5A级旅游景区评定的相关信息，附件7给出了国家旅游局官网上收集的国家4A级景区名单，请更为合理地规划该旅游爱好者的十年旅游计划。",
  "subtask": {
    "1": {
      "subtask": "子任务一（数据准备、参数设定与模型符号化）旨在把所有原始附件资料和外部核验信息整理成供建模与算法调用的、格式统一且可验证的数据集与参数集，并形成完整的符号表与假设清单；其具体范围包括：从附件1提取201个景区的标准编号、名称、所属省份、省会/邻近城市标识、景区所在地类型（市区/近郊/县城等）、与邻近城市的参考路程与行车时间、以及每景区的最少游览时间（半天=4小时/一天=8小时/两天=16小时），并据此计算每景区在第二问中的最大允许游览时间（上限为最少时间的2倍）；从附件3与附件2构建省会—省会间的路网里程矩阵并区分“已全线高速连通的高速里程Dist_H(i,j)”与“需走普通路段的普通里程Dist_O(i,j)”（单位：公里），对缺项或不确定的路段使用权威地图/路网数据（如百度地图、高德API或公路管理部门公布资料）进行补齐和核验；基于Dist_H与Dist_O按高速平均速率90 km/h和普通路40 km/h计算城市间标准化行车时间矩阵Tdrive(i,j)（小时），同时从附件1直接或经核验取得每个景区到其邻近城市的“最后一段”路程Dist_site(c,s)与参考行车时间Tsite(c,s)并纳入矩阵；从附件4与附件5提取并标准化省会间高铁/动车二等座票价与运行时长矩阵（以元与分钟为单位，标注运行时间是否≤6小时）以及省会间机票全价矩阵，统一为可用于成本计算的对称票价表并注明缺项需补查的城市对；明确并固定模型所依赖的全局参数与约束：日行车窗口7:00–19:00、单日最大驾车时间8小时、若当日安排全天游览（8小时）则当日驾车≤3小时、若半天游览（4小时）则当日驾车≤5小时、景区开放8:00–18:00、每年出行天数≤30、每年出行次数≤4、单次旅行天数≤15、燃油+过路费高速1.00元/公里、普通路0.60元/公里、租车300元/天（租还同城）、住宿按城市等级省会200元/人·天、地级市150、县城100、以及景区游览时间上下限（如前）；对所有参数给出单位、源头与不确定性说明并记录为模型输入配置文件。完成城市与景区名称的统一编码与地理校对（包括标准化命名、拼写一致性、汉字简繁体统一、经纬度或行政区划ID匹配），生成并保存下列结构化输出文件：1）城市索引表（含省会/地市/县城等级、经纬度、是否为出发点西安等）；2）城市—城市路程与时间矩阵（Dist_H, Dist_O, Tdrive），并附每条记录的来源与连通性标注；3）景区表（含s_id、邻近城市c(s)、Dist_site(c,s)、Tsite(c,s)、Lmin_s、Lmax_s、所在地类型）；4）高铁矩阵与航空矩阵（票价、运行时长、是否满足6小时约束）；5）成本与约束参数表（燃油、过路、租车、住宿标准、速度假设等）；6）符号表与变量说明（集合S、P、参数Dist、Tdrive、Lmin、决策变量命名约定等）以及一份数据质量与假设记录（列出所有用外部API补齐的项目、任何近似或替代假设、以及优先级最高的待核验项）。技术上建议使用可复现的数据处理流程：采用Python（pandas、numpy、geopandas）、Excel做初步对照与人工校验，必要时调用百度/高德地图API或公开路政数据进行里程/连通性核验并记录API响应快照，所有数据表以CSV和Pickle两种格式保存以便后续建模模块直接读取，并生成一份自动化的校验脚本用于验证矩阵对称性、单位一致性、无缺失关键字段与约束参数的范围检查；最终交付物为上述结构化数据文件、符号与参数清单、数据质量报告及补齐记录，且所有假设和约束须在交付文档中明确列出以供建模者复核与后续敏感性分析使用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "规范化与核验整合多源附件数据，构建可复现的数据集与参数集，并完成符号化定义以支撑后续旅游线路优化与成本评估",
          "expected_output": "结构化数据文件(CSV/PKL：城市索引表、Dist_H/Dist_O/Tdrive矩阵、景区表、高铁与航空矩阵、成本与约束参数表)、自动化校验脚本、符号与变量说明文档、数据质量与假设报告",
          "key_inputs_constraints": "输入：附件1(201景区信息、Lmin、近邻城市与路程/时间)、附件2/3(高速/路网里程)、附件4/5(高铁票价与时长、机票全价)，外部地图API核验。约束：高速90km/h、普通40km/h；7:00–19:00行车窗；单日驾车≤8h；全天游览驾车≤3h，半天游览驾车≤5h；景区开放8:00–18:00；年出行≤30天、≤4次、单次≤15天；租车300元/天同城还；费用单价(高速1.00/公里、普通0.60/公里)；住宿(省会200、地级市150、县城100 人·天)。前置：城市与景区命名与经纬度统一编码、矩阵对称性与单位一致性校验、缺项补齐或标注",
          "modeling_type": "评价+数据工程",
          "role_in_pipeline": "作为数据准备与参数设定阶段，处于特征工程/数据清洗与优化建模前；前序依赖附件收集与外部核验，后序服务于线路优化、成本最优仿真与策略评估",
          "assumptions": "若附件缺项则以权威地图API里程/时长补齐并记录来源；票价与里程矩阵按省会城市为节点并尽量对称化；Lmax=2×Lmin；西安为唯一出发点标记；时间单位统一为小时、分钟并在表内注明"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "数据规范化与核验的核心目标识别",
              "description": "是否明确该子任务是为后续旅游线路优化与成本评估提供“统一且可验证”的CSV/PKL数据集、参数集与符号表，而非直接求解最优线路",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚区分数据准备与优化；中分：部分提及符号化但与优化混淆；低分：直接跳到路径优化或无数据核验意识"
            },
            {
              "sub_criteria": "关键对象覆盖：Dist_H/Dist_O/Tdrive与Lmin/Lmax",
              "description": "是否识别并覆盖高速/普通路里程矩阵、标准化行车时间Tdrive、景区最少游览时间Lmin与最大游览时间Lmax=2×Lmin",
              "score": 25,
              "evaluation_focus": "要素完整性",
              "scoring_hint": "高分：四者齐备且公式明确；中分：缺少其一或未给公式；低分：多数缺失或口述不成体系"
            },
            {
              "sub_criteria": "多源数据与缺项补齐策略",
              "description": "是否识别附件1–5与外部API为数据源，提出缺项路段与票价的补齐与标注流程",
              "score": 25,
              "evaluation_focus": "数据治理",
              "scoring_hint": "高分：列明API、来源标注与缺项清单；中分：仅泛称外部数据；低分：未考虑缺项"
            },
            {
              "sub_criteria": "全局约束参数识别与单位一致性",
              "description": "是否完整罗列行车时间窗、日驾车上限、游览-驾车联动约束、费用单价与住宿标准，并强调单位与时段",
              "score": 20,
              "evaluation_focus": "约束提炼",
              "scoring_hint": "高分：参数全且单位清晰；中分：漏1–2项或单位不一致；低分：多数未提"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "输出清单的明确化（六类文件+脚本+报告）",
              "description": "是否将六类结构化输出文件、自动化校验脚本、数据质量与假设报告逐项复述并与用途绑定",
              "score": 35,
              "evaluation_focus": "需求转译",
              "scoring_hint": "高分：逐项点名并说明用途；中分：列出大部分；低分：笼统描述"
            },
            {
              "sub_criteria": "符号表与变量说明复述",
              "description": "是否明确集合S、城市集合P、Dist_H/Dist_O、Tdrive、Lmin/Lmax、Dist_site/Tsite等命名与含义",
              "score": 30,
              "evaluation_focus": "符号化表达",
              "scoring_hint": "高分：给出清晰命名与含义；中分：符号不全；低分：无符号表意识"
            },
            {
              "sub_criteria": "核验与对称性/单位校验要求",
              "description": "是否复述矩阵对称性、单位一致、缺失字段检测与范围检查的自动化校验要求",
              "score": 35,
              "evaluation_focus": "质量控制",
              "scoring_hint": "高分：具体列出校验项；中分：仅口头提质量检查；低分：未涉及"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "外部API补齐与来源记录假设",
              "description": "说明使用百度/高德/路政数据补齐里程与时长、保存API响应快照、对缺项做保守估计并标注可信度",
              "score": 35,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：说明来源、快照与可信度等级；中分：仅提API；低分：无补齐假设"
            },
            {
              "sub_criteria": "Lmax=2×Lmin与开放时间绑定",
              "description": "清晰假设Lmax为Lmin两倍并与景区开放8:00–18:00、半天4h/全天8h对齐",
              "score": 25,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：倍数与时间窗一致；中分：倍数但无时间窗；低分：未说明"
            },
            {
              "sub_criteria": "对称化票价矩阵与缺项标注",
              "description": "假设省会间高铁、机票矩阵为对称；若非对称则记录方向性与缺项清单",
              "score": 20,
              "evaluation_focus": "一致性处理",
              "scoring_hint": "高分：说明处理非对称与缺项；中分：仅称对称化；低分：未提"
            },
            {
              "sub_criteria": "城市与景区命名与地理编码统一",
              "description": "假设采用标准行政区划ID/经纬度，处理汉字简繁、异名同城、并记录映射表",
              "score": 20,
              "evaluation_focus": "标准化",
              "scoring_hint": "高分：列明编码标准与映射；中分：仅提统一命名；低分：未处理"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "Tdrive计算模型与Dist_H/Dist_O映射",
              "description": "给出Tdrive(i,j)=Dist_H/90+Dist_O/40公式，单位为小时，边注来源与连通性标识",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式、单位、来源均明确；中分：公式缺单位或标识；低分：无公式或错误"
            },
            {
              "sub_criteria": "景区末段Dist_site/Tsite建模",
              "description": "从附件1抽取或核验景区到邻近城市的末段里程与时间，纳入矩阵并标注市区/近郊/县城类型",
              "score": 25,
              "evaluation_focus": "要素建模",
              "scoring_hint": "高分：两者与类型齐全；中分：缺其一；低分：未纳入"
            },
            {
              "sub_criteria": "高铁与航空矩阵标准化",
              "description": "构建票价与运行时长矩阵，标注是否≤6小时，单位元/分钟，对称化与缺项清单同步输出",
              "score": 25,
              "evaluation_focus": "数据建模",
              "scoring_hint": "高分：票价、时长、6小时标志齐；中分：漏标志或单位；低分：未结构化"
            },
            {
              "sub_criteria": "成本与约束参数表",
              "description": "形成高速/普通成本单价、租车、住宿标准、日窗与驾车上限等统一参数表并含单位与来源",
              "score": 15,
              "evaluation_focus": "参数化",
              "scoring_hint": "高分：参数全且单位来源明确；中分：少量缺失；低分：散落无表"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "矩阵对称性与连通性校验执行",
              "description": "对Dist_H/Dist_O/Tdrive和票价矩阵执行对称性、连通性与缺项扫描，输出可复现报告",
              "score": 40,
              "evaluation_focus": "质量保障",
              "scoring_hint": "高分：脚本产出明细报告；中分：口头描述；低分：未校验"
            },
            {
              "sub_criteria": "单位一致性与范围检查",
              "description": "系统检查公里/小时/分钟/元等单位一致，时间窗与上限约束范围合理性校验",
              "score": 35,
              "evaluation_focus": "规则校验",
              "scoring_hint": "高分：自动断言与失败示例；中分：人工说明；低分：无"
            },
            {
              "sub_criteria": "缺项与外部补齐回填",
              "description": "列出缺项城市对与景区末段，执行API查询并回填或置NaN附待核验标注",
              "score": 25,
              "evaluation_focus": "数据补齐",
              "scoring_hint": "高分：清单+回填记录；中分：仅清单；低分：忽略缺项"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现数据流程（pandas/geopandas）",
              "description": "使用Python脚本实现读取附件、清洗、合并、单位换算与导出CSV/PKL的流水线",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：一键运行并固定随机性/版本；中分：分散脚本；低分：仅手工说明"
            },
            {
              "sub_criteria": "自动化校验脚本",
              "description": "提供对称性、单位一致、缺失字段与范围检查的自动化测试脚本与报告输出",
              "score": 35,
              "evaluation_focus": "测试覆盖",
              "scoring_hint": "高分：覆盖四类校验并生成报告；中分：覆盖不全；低分：无脚本"
            },
            {
              "sub_criteria": "数据溯源与元数据记录",
              "description": "为每条记录附来源、时间戳、API快照路径或附件页码，便于审计",
              "score": 30,
              "evaluation_focus": "可追溯性",
              "scoring_hint": "高分：字段化元数据；中分：部分记录；低分：缺失"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "数据质量与假设报告",
              "description": "提交含外部API补齐项目、近似或替代假设、对后续优化敏感性的影响与待核验优先级的报告",
              "score": 40,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：分级标注影响与优先级；中分：仅罗列；低分：无报告"
            },
            {
              "sub_criteria": "关键统计摘要与可用性评估",
              "description": "给出矩阵稠密度、缺项比例、平均Dist_H/Dist_O、Tdrive分布、票价区间等摘要，评估数据是否可支撑优化",
              "score": 30,
              "evaluation_focus": "数据洞察",
              "scoring_hint": "高分：量化指标齐全；中分：部分指标；低分：无量化"
            },
            {
              "sub_criteria": "一致性与合理性示例核验",
              "description": "抽样展示城市对与景区末段的核对示例（里程与时间匹配、费用与单位正确）并与现实常识对比",
              "score": 30,
              "evaluation_focus": "验证思维",
              "scoring_hint": "高分：多样本含异常说明；中分：少量样本；低分：无示例"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2的目标是基于已清洗的城市间行车时间/里程矩阵、景区到邻近城市的“最后一段”时间/里程、每景区的最少与最多游览时长、交通票价与费用参数等输入，自动生成大量“可行旅行列”（candidate trips），每列为一次完整的单次旅行方案并包含逐日行程细节、总天数、分日驾驶小时与游览小时分配、行驶里程、费用分项与体验评分，以供后续全局选择与优化使用；该子任务的范围包括（1）按省会枢纽与地理邻近性对景区做空间聚类并确定候选组合种子（优先将同省或相邻省且与某省会连通良好的景区组合在一列，强制在涉及省会时安排至少24小时停留），（2）对每个组合种子构造多种序列与出行模式变体（至少生成纯自驾序列及若干“先乘高铁/飞机到省会再租车”序列），（3）对每个序列执行逐日时间窗可行性模拟并应用所有日/时约束（景区开放8:00–18:00、每日驾驶窗口7:00–19:00、日驾驶上限8小时；若当日安排全天游览（8小时）则当日驾驶≤3小时，若半天游览（4小时）则当日驾驶≤5小时；高铁/飞机当天乘坐时长≤6小时且乘坐当日至多安排半天游览；租车必须在同一城市取还并按实际地面驾车天数计租车天数），在模拟中使用城市间分段里程按高速(90 km/h)与普通路(40 km/h)分段计时，将景区到邻近城市的最后一段直接加入相应行程段并累积计算到达时刻以验证是否在开放时间内完成预定游览时长；（4）对每条通过时间窗与驾驶约束检验的候选列计算详尽费用分项（高铁/机票票价×人数、租车费300元/天×租车天数、燃油+过路费按高速公里×1.00元/公里与普通路公里×0.60元/公里、住宿按城市等级×人数×晚数等）和若干旅游体验指标（例如景区游览时间相对于最少时间的比值、连续长驾/长日行车的疲劳惩罚、换乘/租车不便惩罚）；（5）在候选生成过程中应用启发式与改良算法：初始序列以省会—景区最近邻或密度聚类贪心插入构造，再采用局部搜索算子（2‑opt、relocate、swap）和或ienteering/VRP‑TW风格的插入/删除优化以减少行车时间、改善日程可行性或降低成本，同时为每个组合生成若干模式变体（不同起止省会、纯自驾或多种铁航+租车组合）；（6）对生成的候选列实施支配关系与阈值剪枝：剔除在覆盖集合、总天数或费用上被其它候选严格支配或违反租车/分日可行性不可修复的列，以控制候选规模；（7）为保证可复现与后续集成，输出结构化的候选列数据库（CSV/JSON或数据库表），每条记录包含：列ID、出发/终止城市、出行模式、逐日记录（出发地、到达地、行车时长/里程、车次/航班编号或“自驾”、游览景区与游览时长、当晚住宿城市）、总天数、总里程、费用分项明细、体验得分及生成时用到的关键参量与可行性标志；（8）技术实现建议：使用Python（pandas/numpy/networkx）处理数据，借助地图API（高德/百度）补齐或验证路段连通性与里程，使用 OR‑Tools/自实现启发式或小规模动态规划解子问题，采用并行化生成以产出千至万量级候选列，最终以可筛选的候选集合供后续整数规划或列生成主优化模块调用。该子任务仅负责生成并验证单次旅行的逐日可行性与评估指标，不进行全局年度分配或最终组合选择。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于清洗后的路网与费用参数，仿真并优化生成可行的单次旅行候选列（含逐日行程与费用/体验评估），并进行支配剪枝输出结构化候选库。",
          "expected_output": "可复现的候选列数据库（CSV/JSON），每列含列ID、出发/终止城市、出行模式（纯自驾/高铁或飞机+租车）、逐日记录（出发地、到达地、行车时长/里程、车次/航班或自驾、游览景区与游览时长、当晚住宿城市）、总天数、总里程、费用分项（燃油/过路、高铁/机票、租车、住宿）、体验评分、可行性标志与生成参数。",
          "key_inputs_constraints": "输入：Dist_H(i,j)/Dist_O(i,j)、Tdrive(i,j)、Dist_site(c,s)/Tsite(c,s)、Lmin_s/Lmax_s、票价矩阵（高铁≤6小时标记、机票全价）、费用参数（高速1.00元/公里、普通0.60元/公里、租车300元/天、住宿标准）、开放时间8:00–18:00、驾车窗口7:00–19:00。约束：单日驾驶≤8小时；全天游览（8h）当天驾驶≤3h；半天游览（4h）当天驾驶≤5h；省会停留≥24h；租车取还同城；乘坐高铁/飞机当日至多半天游览；每次旅行天数≤15。",
          "modeling_type": "仿真+优化+评价",
          "role_in_pipeline": "作为候选列生成与可行性仿真环节，位于数据准备之后、全局列选择/年度分配优化之前；直接依赖子任务一的数据集与参数，后续被整数规划或列生成主问题调用。",
          "assumptions": "若票价或路段缺项则使用外部核验补齐或跳过该城市对并标注缺项；体验评分线性加权（游览充足度、疲劳惩罚、换乘不便）；并行生成规模达千至万列。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别仿真+优化+评价的核心目标",
              "description": "是否明确本任务需‘仿真’逐日时间窗可行性、‘优化’行程序列（2-opt/relocate/swap等）并‘评价’费用与体验评分，而非做年度分配。",
              "score": 35,
              "evaluation_focus": "任务边界",
              "scoring_hint": "高分：清楚区分列生成与全局选配；中分：提到可行性与费用但忽略优化或评价；低分：将任务误解为总规划或仅做静态统计。"
            },
            {
              "sub_criteria": "关键约束识别（7:00–19:00/8h驾车/3h与5h联动）",
              "description": "是否完整识别日驾驶≤8h、全天游览日驾驶≤3h、半天游览日驾驶≤5h、景区8:00–18:00开放等硬约束。",
              "score": 35,
              "evaluation_focus": "约束提取",
              "scoring_hint": "高分：列全并将最后一段Tsite纳入到达时刻校验；中分：缺1项或未用到达时刻校验；低分：未提关键联动约束。"
            },
            {
              "sub_criteria": "模式与成本构成识别",
              "description": "是否识别纯自驾与高铁/飞机+租车两大模式及费用分项（票价×人数、租车天数、油路费、住宿分级）。",
              "score": 30,
              "evaluation_focus": "要素完备",
              "scoring_hint": "高分：枚举并正确公式化分项；中分：遗漏1个分项或人数系数；低分：费用未结构化或模式单一。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "候选列输出结构复述（列ID与逐日字段）",
              "description": "能否按要求复述列ID、出发/终止、模式、逐日出发地/到达地/行车时长里程/车次或自驾/游览与住宿、总天数/里程、费用、体验、可行性标志。",
              "score": 40,
              "evaluation_focus": "需求对齐",
              "scoring_hint": "高分：字段齐全并说明对称票价与缺项标注；中分：缺2项以内；低分：无法映射到可落地字段。"
            },
            {
              "sub_criteria": "输入矩阵与参数的引用准确性",
              "description": "是否准确引用Dist_H/Dist_O、Tdrive、Dist_site/Tsite、Lmin/Lmax、票价矩阵与租车/住宿参数用于仿真与计费。",
              "score": 30,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：清楚分段计费（1.00与0.60）与速度映射；中分：参数引用模糊；低分：混淆或遗漏关键矩阵。"
            },
            {
              "sub_criteria": "流程边界与前后依赖阐明",
              "description": "是否说明依赖子任务一的数据清洗，产出供列生成主问题/年度分配使用。",
              "score": 30,
              "evaluation_focus": "流程定位",
              "scoring_hint": "高分：清晰列出前序/后序；中分：仅泛述依赖；低分：无任何流程定位。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "缺项与核验假设（票价/路段）",
              "description": "对缺失票价、路段连通性如何补齐或剔除并打标（如API补齐、对称化处理）。",
              "score": 30,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：给出缺项策略与标志位；中分：只口头说明；低分：忽略缺项问题。"
            },
            {
              "sub_criteria": "体验评分假设（充足度、疲劳、换乘惩罚）",
              "description": "是否明确体验评分构成与权重或可调参数，含游览时间/最少时间比值与疲劳、换乘不便惩罚。",
              "score": 30,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：定义公式或量纲一致权重；中分：只列指标无量化；低分：无体验设计。"
            },
            {
              "sub_criteria": "租车计费与取还同城假设",
              "description": "是否假设按实际地面驾车天数计租车天数，跨模式日不计或单独计，并确保同城取还。",
              "score": 20,
              "evaluation_focus": "业务规则",
              "scoring_hint": "高分：边界日（高铁/飞机当日）处理清晰；中分：仅概述；低分：与约束冲突。"
            },
            {
              "sub_criteria": "时间窗与到达时刻计算假设",
              "description": "明确如何将Dist_H/Dist_O速度与Tsite合并得到到达时刻，并校验景区8:00–18:00可用时长。",
              "score": 20,
              "evaluation_focus": "时窗建模",
              "scoring_hint": "高分：给出时间线与缓冲策略；中分：口头描述；低分：未覆盖到达与开放叠加。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "空间聚类与组合种子（省会枢纽/邻近性）",
              "description": "是否使用省会为枢纽的聚类（如密度/最近邻）生成同省或相邻省组合种子，并强制省会停留≥24h。",
              "score": 25,
              "evaluation_focus": "结构设计",
              "scoring_hint": "高分：明确聚类准则与门限；中分：笼统按省分组；低分：无种子构造。"
            },
            {
              "sub_criteria": "序列构造与局部搜索（2-opt/relocate/swap）",
              "description": "是否从贪心/插入构造初解，并应用2‑opt、relocate、swap等算子减少行车时间/冲突。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：说明触发与终止条件；中分：只提1个算子；低分：无优化。"
            },
            {
              "sub_criteria": "多模式变体建模（纯自驾/高铁或飞机+租车）",
              "description": "是否为每个种子生成多种起止省会与运输模式变体，并正确嵌入高铁/飞机≤6小时与半天游览规则。",
              "score": 25,
              "evaluation_focus": "多模式建模",
              "scoring_hint": "高分：含票价矩阵选择与可行性分支；中分：仅一个公共交通模式；低分：忽略模式多样性。"
            },
            {
              "sub_criteria": "费用与体验函数的可微/可计算性与单位一致性",
              "description": "费用分项与体验指标单位一致、可累积，分段收费（高速/普通）正确叠加。",
              "score": 25,
              "evaluation_focus": "量纲一致",
              "scoring_hint": "高分：列清楚单位与合计；中分：小量纲混淆；低分：计费不合逻辑。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "逐日时间窗可行性仿真",
              "description": "实现按7:00–19:00窗口模拟，校验日驾驶≤8h，全天/半天游览与3h/5h联动，景区8:00–18:00开放与到达时刻可完成Lmin_s或设定游览时长。",
              "score": 40,
              "evaluation_focus": "仿真准确",
              "scoring_hint": "高分：到达-开放重叠时间精确；中分：少量边界误差；低分：不做时窗检验。"
            },
            {
              "sub_criteria": "分段里程计时与最后一段整合",
              "description": "将Dist_H/Dist_O按90/40 km/h计时，并将Dist_site/Tsite并入当日段落计算到达时刻及里程费用。",
              "score": 25,
              "evaluation_focus": "数值正确",
              "scoring_hint": "高分：分段与费用同步；中分：只用Tdrive；低分：忽略最后一段。"
            },
            {
              "sub_criteria": "支配关系与阈值剪枝",
              "description": "对候选列实施费用/天数/覆盖支配剔除及不可修复可行性冲突剪枝，控制规模。",
              "score": 20,
              "evaluation_focus": "搜索效率",
              "scoring_hint": "高分：明确定义支配准则；中分：简单去重；低分：无剪枝导致爆炸。"
            },
            {
              "sub_criteria": "并行化与规模控制",
              "description": "采用并行/批处理生成千–万级候选并记录随机种子，保障可复现。",
              "score": 15,
              "evaluation_focus": "工程求解",
              "scoring_hint": "高分：说明并行策略与随机种子；中分：串行但稳定；低分：无法扩展或不可复现。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据接口与校验（CSV/JSON I/O、对称性/缺失检查）",
              "description": "实现读取Dist、Tdrive、票价等并做矩阵对称性、单位、缺失与范围检查，错误可追踪。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：自动校验脚本与日志；中分：基本读取；低分：读写混乱或无校验。"
            },
            {
              "sub_criteria": "可复现性（随机种子、配置化参数）",
              "description": "随机源统一、配置文件管理费用与约束，结果可重跑一致。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：config与seed固定；中分：部分可配；低分：每次结果漂移。"
            },
            {
              "sub_criteria": "时间窗仿真与计费函数的单元测试覆盖",
              "description": "关键函数（到达时间、驾驶上限联动、分段计费、租车天数）具备单元测试与边界用例。",
              "score": 25,
              "evaluation_focus": "测试质量",
              "scoring_hint": "高分：覆盖边界（6小时高铁、3h/5h限制）；中分：少量测试；低分：无测试。"
            },
            {
              "sub_criteria": "性能与并行实现（pandas/numpy/networkx/OR-Tools）",
              "description": "合理使用向量化/并行/图算法或启发式库，生成规模达标且耗时可接受。",
              "score": 20,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：提供复杂度或基准耗时；中分：尚可但无说明；低分：性能瓶颈明显。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性覆盖率与失败原因分析",
              "description": "报告生成候选总数、通过时间窗与约束的比例、常见不可行原因（如省会停留不足、3h/5h冲突）。",
              "score": 30,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：量化比例并列前3原因；中分：定性描述；低分：无可行性分析。"
            },
            {
              "sub_criteria": "费用分项与里程分段分布",
              "description": "展示费用构成占比（票价/租车/油路费/住宿）与高速/普通里程占比，解释主要成本驱动。",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：提供占比或箱线/直方概览；中分：只给总费用；低分：无分项。"
            },
            {
              "sub_criteria": "体验评分敏感性与模式对比",
              "description": "比较纯自驾与铁航+租车候选在体验评分与成本的Pareto分布，说明权重变化影响。",
              "score": 25,
              "evaluation_focus": "评价洞察",
              "scoring_hint": "高分：给出Pareto或前沿列表；中分：仅口头对比；低分：无对比。"
            },
            {
              "sub_criteria": "样例候选列正确性核查",
              "description": "对至少1–2条代表性候选列逐日核查（到达时刻、开放时段、3h/5h/8h限制）并通过。",
              "score": 20,
              "evaluation_focus": "一致性核验",
              "scoring_hint": "高分：逐日表与校验记录；中分：抽查不全；低分：样例出错或缺失。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（全局选择与年度分配的整数规划与优化求解）旨在以子任务2生成并验证的“候选单次旅行列”数据库为输入，构建并求解覆盖所有201个景区的全局组合优化问题，输出每条被选旅行的年度归属和逐日详细日程以及相应费用与体验指标；其具体目标包括两类情形：一类（问题1）在“纯自驾、优先高速”约束体系下，求最小可行完成年限 Years（等价于在给定Years下判断候选列能否被按年分配以覆盖全部景区）；另一类（问题2）以十年为硬约束，求在覆盖约束下最小化总体费用并在费用相近时优化旅游体验（可采取分层目标或加权多目标形式）。在数学表达上，引入二元决策变量 y_c 表示是否选择候选列 c、二元变量 z_{c,a} 表示候选列 c 是否被安排在年度 a（约束 ∑_a z_{c,a} = y_c），并对每个景区 s 强制覆盖约束 ∑_{c: s∈c} z_{c,a summed over a} ≥ 1；对每一年度 a 施加资源约束 ∑_{c} Days_c * z_{c,a} ≤ D_year_max（=30）与 ∑_{c} z_{c,a} ≤ Trips_year_max（=4），并确保每列内在约束（单列天数 ≤15、每日驾驶/游览可行性、租车同城取还等）已在候选列生成阶段保证或作为额外约束引入；若需要最小Years，可采用二分法将Years作为参数，将年份域上的可行性检验嵌入整数规划可行性模型并逐步逼近最小Years。求解策略基于混合方法：当候选列规模在几千量级且可直接容纳进MIP时，使用商用整数规划求解器（Gurobi/CPLEX，通过其Python接口或Pyomo）对上述0‑1整数规划直接求解，输出最优或近优解；当候选列规模超出直接MIP可处理范围时，采用列生成/branch‑and‑price 框架——主问题为覆盖/分配的LP松弛（或整数主问题的松弛），子问题为生成能改善目标的旅行列（本质是或ienteering/VRP‑TW类型问题），子问题可用启发式（贪心插入、局部2‑opt、动态规划近似或OR‑Tools的VRP模块）快速生成候选列并以启发式或精确方法求解；在列生成之外，结合拉格朗日松弛的下界估计、贪心覆盖启发式、遗传算法或禁忌搜索开展全局搜索与解修复，以应对非线性或组合性的附加约束（如多模式换乘惩罚、按年度平衡体验分布等）。实现细节包括：将每个候选列的已预计算属性（覆盖的景区集合、总天数、逐日计划、总费用、体验得分、可行性标志）作为输入常数，利用这些常数在线性MIP中构造目标函数（问题1为可行性检验/极小Years问题的目标函数或二分检验；问题2为最小化 ∑_c Cost_c * y_c，若需要再优化体验则采用二级目标或将体验以负权重并入目标），对求解器设置合理时间限制与并行线程数、启用求解器本身的启发式与割平面以加速求解，并在求解后执行后处理（若解中年度资源约束微违背或出现孤立小违约，以局部替换或列交换的修复启发式调整）。输出要求为可直接执行的年度行程表：对每年列出被选旅行的顺序、每条旅行的逐日出发地、到达地、行车时间/里程、使用交通模式、游览景区与游览时长、住宿城市与费用分项，并计算总体指标（完成年限或十年覆盖的总费用、总行驶里程、总租车天数与体验总分）；同时生成可复现的求解日志（模型文件、求解器配置、被选择列ID列表与未被选择但可替代的高潜力列），并提供可选的替代解（近优解或权衡解）以支持决策者在费用与体验间的选择。建议采用的工具链为Python数据处理（pandas/numpy）、MIP建模（Gurobi/CPLEX或Pyomo）、列生成与子问题求解可调用OR‑Tools或自实现启发式算法、并行化候选列评估与修复模块；为应对规模问题，应在建模前对候选列进行支配剪枝（去除被其它列在覆盖、天数和费用上同时支配的列）并设定求解时间预算与中间可接受解质量阈值，以保证在可用计算资源下产出可实施的年分配与行程计划。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于候选单次旅行列的0-1整数规划优化与分配，最小化完成年限或十年总费用并兼顾旅游体验，输出年度排程与选列结果",
          "expected_output": "最小Years或十年最小总费用的最优/近优解；被选列ID与每年分配矩阵z_{c,a}；年度行程表（逐日出发/到达、行车时长/里程、模式、游览时长、住宿与费用分项）；求解日志与模型文件；可替代近优解集",
          "key_inputs_constraints": "输入：候选列数据库（列c的覆盖景区集S(c)、Days_c≤15、Cost_c、体验分E_c、逐日明细与可行性标志）、年度上限D_year_max=30与Trips_year_max=4、人数与费用参数。约束：∑_a z_{c,a}=y_c；每景区s覆盖∑_{c: s∈S(c)}∑_a z_{c,a}≥1；年度资源∑_c Days_c z_{c,a}≤30、∑_c z_{c,a}≤4；问题1需二分Years并限制a∈{1..Years}；问题2固定a∈{1..10}，目标最小化∑_c Cost_c y_c并次级优化体验。",
          "modeling_type": "优化+评价",
          "role_in_pipeline": "作为全局组合与年度分配环节，直接依赖子任务2生成的可行候选列与成本/体验属性；其结果将作为最终行程发布与报告（后序可能有解修复与可视化）。前序：子任务1数据准备、子任务2候选列生成；后序：结果报告与可视化/敏感性分析"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "区分问题1最小Years与问题2十年成本最小化",
              "description": "明确两类优化目标与年份处理方式（问题1采用Years二分可行性检验，问题2固定10年最小化∑Cost_c·y_c并二级优化体验E_c）。",
              "score": 35,
              "evaluation_focus": "目标理解",
              "scoring_hint": "高分：给出两套清晰目标与相应模型写法；中分：只描述其一或混用目标；低分：未区分或目标表述错误。"
            },
            {
              "sub_criteria": "识别关键年度资源约束D_year_max与Trips_year_max",
              "description": "准确阐述每年出行天数≤30、每年旅行次数≤4对∑Days_c z_{c,a}与∑z_{c,a}的限制及其对可行性的影响。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：写出两条年度约束并解释含义；中分：只写出一条或单位不清；低分：忽略或误解。"
            },
            {
              "sub_criteria": "候选列输入与覆盖约束的角色",
              "description": "明确候选列S(c)覆盖201景区的强制约束∑_{c: s∈S(c)}∑_a z_{c,a}≥1，且列内可行性在子任务2已保证。",
              "score": 20,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：准确写出覆盖约束并说明列内可行性来源；中分：只泛述覆盖；低分：遗漏覆盖或重复校验列内日约束。"
            },
            {
              "sub_criteria": "多目标（费用与体验）处理方式",
              "description": "识别分层目标或加权目标（如费用优先、体验次之）并说明切换策略。",
              "score": 20,
              "evaluation_focus": "目标设计",
              "scoring_hint": "高分：给出层级优化或λ加权并讨论权重；中分：仅口头提及体验；低分：忽略体验。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "变量y_c与z_{c,a}的精确定义",
              "description": "清楚复述y_c∈{0,1}是否选择候选列，z_{c,a}∈{0,1}表示列c是否安排在年度a，且∑_a z_{c,a}=y_c。",
              "score": 35,
              "evaluation_focus": "符号表达",
              "scoring_hint": "高分：含取值域和耦合约束；中分：缺少取值域或耦合；低分：变量意义模糊。"
            },
            {
              "sub_criteria": "年度索引域与Years二分策略复述",
              "description": "准确表述a∈{1..Years}（问题1）与{1..10}（问题2），并说明Years参数通过二分外层驱动可行性MIP。",
              "score": 25,
              "evaluation_focus": "算法表述",
              "scoring_hint": "高分：给出二分上/下界与停止准则；中分：仅提二分；低分：未说明或混乱。"
            },
            {
              "sub_criteria": "目标函数形式复述",
              "description": "问题1为可行性/最小Years；问题2目标为min ∑Cost_c y_c，次级max ∑E_c y_c或等价最小化-体验。",
              "score": 20,
              "evaluation_focus": "目标清晰",
              "scoring_hint": "高分：给出明确的函数形式与次级目标；中分：只写费用；低分：目标缺失或错误。"
            },
            {
              "sub_criteria": "输入数据字段与单位",
              "description": "复述候选列需包含Days_c、Cost_c、E_c、S(c)、可行性标志、逐日明细，单位一致。",
              "score": 20,
              "evaluation_focus": "数据理解",
              "scoring_hint": "高分：列举字段与单位；中分：列举不全；低分：未说明。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "候选列可行性封装假设",
              "description": "假设子任务2已保证逐日时间窗与租车同城取还可行，主问题不再展开日级约束，仅引用Days_c等聚合属性。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：阐明边界与必要性；中分：含糊提及；低分：重复建模或忽略来源。"
            },
            {
              "sub_criteria": "体验得分E_c的尺度与可加性",
              "description": "说明E_c已标准化至可加/可比较，适合线性汇总；若非则给出归一化或分层处理假设。",
              "score": 25,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：给出归一化区间或权重依据；中分：仅称可加；低分：未处理可比性问题。"
            },
            {
              "sub_criteria": "对称/独立年度分配假设",
              "description": "假设不同年度之间无跨年耦合（除资源约束），列c在任一年执行成本相同。",
              "score": 20,
              "evaluation_focus": "问题简化",
              "scoring_hint": "高分：明确写出与影响；中分：隐含假设；低分：自相矛盾设定。"
            },
            {
              "sub_criteria": "缺失候选的补救策略",
              "description": "对未覆盖景区的情况给出假设（退化补列/罚项），以保障覆盖约束可满足。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：提出占位高成本列或惩罚；中分：仅提醒风险；低分：无对策。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "覆盖约束与年度资源约束的规范线性化",
              "description": "正确写出∑_{c: s∈S(c)}∑_a z_{c,a}≥1、∑_c Days_c z_{c,a}≤30、∑_c z_{c,a}≤4及∑_a z_{c,a}=y_c，变量为0-1。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：方程完备无歧义；中分：少一条或单位混乱；低分：线性化错误或缺失。"
            },
            {
              "sub_criteria": "问题1最小Years的二分可行性模型",
              "description": "构建给定Years的可行性MIP（无费用目标或最小∑y_c以缩解），并支持外层二分控制。",
              "score": 25,
              "evaluation_focus": "模型设计",
              "scoring_hint": "高分：给出边界、停止条件与不可行判定；中分：只提可行性；低分：直接将Years当变量导致非线性。"
            },
            {
              "sub_criteria": "问题2多目标策略",
              "description": "分层（先min费用，再max体验）或加权（min ∑(Cost_c-λE_c) y_c）并讨论λ或ε-约束设定。",
              "score": 20,
              "evaluation_focus": "目标建模",
              "scoring_hint": "高分：可复现实施方案；中分：仅文字描述；低分：未体现多目标。"
            },
            {
              "sub_criteria": "规模控制与剪枝",
              "description": "在建模前进行支配剪枝（覆盖、天数、费用同时支配），减少变量与约束规模。",
              "score": 20,
              "evaluation_focus": "模型效率",
              "scoring_hint": "高分：说明判定规则与实现点；中分：泛说剪枝；低分：忽略导致爆炸。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与配置（Gurobi/CPLEX/Pyomo）",
              "description": "选择合适MIP求解器，设置时间限制、并行线程、启发式与割平面；记录日志。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：列出关键参数与理由；中分：仅指名求解器；低分：无配置与日志。"
            },
            {
              "sub_criteria": "大规模列集合应对（列生成/branch-and-price）",
              "description": "当变量过多时采用主问题LP松弛+子问题生成，描述子问题性质与定价策略连接子任务2。",
              "score": 30,
              "evaluation_focus": "高阶方法",
              "scoring_hint": "高分：给出定价思路与停机标准；中分：只提列生成；低分：无策略导致不可求。"
            },
            {
              "sub_criteria": "启发式与解修复",
              "description": "采用贪心覆盖、禁忌/遗传或局部交换在时间限制内输出可行近优解，修复年度轻微违约。",
              "score": 25,
              "evaluation_focus": "实用性",
              "scoring_hint": "高分：描述具体操作与触发条件；中分：泛述启发式；低分：无可行解保障。"
            },
            {
              "sub_criteria": "最小Years外层二分实现与终止",
              "description": "实现二分循环，更新上下界，记录每次可行性结果与最终Years。",
              "score": 15,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：含单调性假设与容差；中分：有循环无准则；低分：未实现二分。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据接口与一致性检查",
              "description": "正确读取候选列数据库（CSV/JSON/DB），校验S(c)、Days_c、Cost_c、E_c、可行标志的完整性与单位。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含schema校验与缺失处理；中分：仅能读取；低分：读入错误未检。"
            },
            {
              "sub_criteria": "MIP建模代码正确性",
              "description": "用Python+Gurobi/CPLEX/Pyomo构建y_c、z_{c,a}、约束与目标，索引与集合准确。",
              "score": 35,
              "evaluation_focus": "实现正确",
              "scoring_hint": "高分：索引维度无越界，约束数量与期望一致；中分：小瑕疵但可运行；低分：变量或约束搭建错误。"
            },
            {
              "sub_criteria": "求解流程与日志持久化",
              "description": "实现时间限制、线程设置、求解状态判断、Gap记录、模型/日志文件输出与种子复现。",
              "score": 20,
              "evaluation_focus": "工程质量",
              "scoring_hint": "高分：含随机种子与版本；中分：仅打印日志；低分：无记录不可复现。"
            },
            {
              "sub_criteria": "结果导出与年度行程表生成",
              "description": "基于z_{c,a}=1生成年度顺序、逐日行程与费用分项汇总，导出CSV/JSON报表。",
              "score": 15,
              "evaluation_focus": "产出生成",
              "scoring_hint": "高分：字段完备且可直接使用；中分：部分字段缺失；低分：无法生成可用报表。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "完成年限或十年费用与体验指标报告",
              "description": "清晰给出最小Years或十年总费用、总里程、总租车天数与总体验得分，并解释含义。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：指标齐全、单位一致；中分：缺少1-2项；低分：指标不全或单位混乱。"
            },
            {
              "sub_criteria": "可行性与资源约束核验",
              "description": "逐年验证∑Days_c≤30、∑行次≤4、覆盖201景区均≥1次，报告任何边界情况。",
              "score": 30,
              "evaluation_focus": "一致性检查",
              "scoring_hint": "高分：提供自动校验结果；中分：口头说明；低分：未验证或存在违规。"
            },
            {
              "sub_criteria": "敏感性/权衡分析（费用-体验、Years变化）",
              "description": "展示λ或ε设置对费用与体验的影响，或Years±1对可行性/成本的变化。",
              "score": 25,
              "evaluation_focus": "洞察力",
              "scoring_hint": "高分：含数值或图表对比；中分：定性描述；低分：未分析。"
            },
            {
              "sub_criteria": "备选解与替代列说明",
              "description": "给出未选但高潜力列与替代解，说明更换对费用/体验的影响。",
              "score": 15,
              "evaluation_focus": "决策支持",
              "scoring_hint": "高分：列出具体列ID与差异；中分：泛述存在替代；低分：无替代方案。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4的目标是对已生成的候选行程与年度组合方案进行系统性的可实施性验证、鲁棒性（不确定性敏感性）分析和滚动重规划方案设计，并产出可操作的验证报告、应急规则集和自动化再优化工作流；其工作范围包括（1）输入准备：接收候选行程数据库（每条行程的逐日出发地/到达地、行车时长与里程、票价/机票/租车/住宿分项、景区游览时长、已验时间窗可行性标记）、城市间静态路网与里程矩阵、历史与实时交通耗时分布（若可得）、高铁/航班历年票价与时刻分布样本、以及模型约束参数表；（2）确定验证基准与可接受性准则：定义逐日时间窗可行率（目标≥95%）、年度日数与次数满足率、行程总成本相对基线的置信区间、每日驾车小时超限频率与景区开放冲突率等定量指标及阈值；（3）精确可实施性仿真：对每个代表性候选行程使用确定性复现与基于分布的仿真重算到达时刻（利用百度/高德等交通API或历史分布模型按路段抽样），逐日检测景区开放时段、日内驾驶上限与“全天/半天”驱车上限约束，标注所有违约点并记录造成违约的具体路段或换乘节点；（4）全局鲁棒性分析：采用单参数一维灵敏度（对平均速度、燃油/过路费、租车费、票价、每年可用天数等逐项扰动）与全局不确定性分析（拉丁超立方或蒙特卡洛采样）评估关键输出（完成年限/十年覆盖的实现概率、总费用分布、体验分布）的分布与置信区间，必要时采用Sobol或Morris等全局灵敏度方法识别影响最大的参数；（5）情景与压力测试：构造若干现实情景（高速临时封闭、高铁班次取消、票价突涨、景区季节性封园、油价飙升等）并对候选行程进行应急演练以评估替代路径与费用冲击；（6）稳健化与应急策略设计：基于仿真与灵敏度结果提出并量化若干稳健化规则（例如在长段跨省迁移中预留最小缓冲时间、对关键路段保留可替代省会/景区替换列、对跨区转移优先保留高铁/航班的备选票务）、并定义触发阈值（例如某段路段预计延误概率>30%或票价上涨>20%）及相应快速重规划动作；（7）滚动重规划工作流与自动化实施细节：定义重规划频率（例：年度全面重算、每次出行前72小时的即时验证与必要的局部重排）、所需数据源与API（实时路况、高铁/航班余票与票价接口、天气预警）、重规划算法调用序列（先局部修补受影响旅行列，再在受影响年份内进行快速整数/启发式重优化）、版本控制与通知机制（变更记录、差异化行程与费用通知模板）；（8）输出与交付件：生成可机读的验证报告（含各候选行程的可行率、违约点详表、灵敏度图表、情景分析结果）、一套机器可执行的重规划脚本（Python，依赖pandas/numpy、SALib、OR-Tools或Gurobi/CPLEX接口）、API调用与数据快照日志、以及运维手册与验收标准；（9）工具与资源建议：采用Python生态（pandas/numpy/scipy/geopandas）、交通数据API（百度/高德）、不确定性分析工具（SALib或自实现蒙特卡洛）、MIP/启发式求解器（Gurobi/CPLEX与OR-Tools）、并行化/容器化部署（Docker）以保证可重复性与可扩展性。完成该子任务应明确指出哪些候选行程在现实条件下可直接执行、哪些需改进并给出改进措施与替代行程，量化在不同不确定性情景下的风险暴露，并交付一套可运行的滚动重规划机制与触发规则，确保在实际执行期内能够快速、可控地调整行程以维持可行性与体验目标。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对候选行程与年度组合方案进行可实施性验证与鲁棒性评估并设计滚动重规划策略，以评估完成年限/总费用/体验的稳定性与合规性。",
          "expected_output": "可机读验证报告（各行程逐日可行率、违约点清单、敏感性与情景分析图表）、鲁棒性统计（置信区间/分布）、应急规则与触发阈值、滚动重规划脚本与流程说明、API数据快照与日志、被判不可行的行程清单与修复建议。",
          "key_inputs_constraints": "输入：候选行程数据库（逐日出发地/到达地、行车时长/里程、票价/租车/住宿分项、游览时长、可行标记）、城市路网里程矩阵（Dist_H/Dist_O、Tdrive）、景区到邻近城市最后一段Dist_site/Tsite、票价与时刻分布样本（高铁/航班）、参数表（驾驶窗口7:00–19:00、日驾≤8h、全天游览驾≤3h、半天驾≤5h、景区开放8:00–18:00、年天数≤30、年次数≤4、单次≤15天、费用参数）。约束：逐日时间窗可行率≥95%、高铁/航班当日乘坐≤6h且当日至多半天游览、租车同城取还、成本计算口径一致、矩阵对称性与单位一致。",
          "modeling_type": "仿真+评价+优化",
          "role_in_pipeline": "作为最终验证与运行期运维环节：在子任务2生成候选列、子任务3完成年度组合后进行精确仿真与鲁棒性评估，并输出应急与滚动重规划方案；依赖子任务1清洗数据与参数，向运维执行与可能的再优化（调用子任务3模型）反馈。",
          "assumptions": "若实时交通与票价API不可用，则以历史分布替代并记录来源；无缺失字段的候选行程方可进入仿真；置信区间以95%为缺省；拉丁超立方采样规模默认≥1,000，蒙特卡洛≥5,000次作为合格下限。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "可实施性验证目标与约束识别（时间窗/驾驶/开放/租车同城）",
              "description": "是否完整识别并转译7:00–19:00、日驾≤8h、全天驾≤3h、半天驾≤5h、景区8:00–18:00、高铁/航班≤6h且当日至多半天、租车同城取还等为验证检查点。",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：逐条列出并映射到检测函数/规则；中分：覆盖大部分但遗漏1–2项；低分：仅笼统描述或遗漏关键约束。"
            },
            {
              "sub_criteria": "鲁棒性与不确定性范围界定（速度/票价/天数等）",
              "description": "明确需要评估的扰动参数清单与取值域（高速/普通速度、票价、油费、租车费、每年可用天数）。",
              "score": 25,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：给出数值区间或分布设定；中分：列出参数但无量化范围；低分：未区分确定性与不确定性参数。"
            },
            {
              "sub_criteria": "验证基准与可接受性准则（可行率≥95%等）",
              "description": "是否设定逐日时间窗可行率阈值、年度日数/次数满足率、成本置信区间等明确判定阈值。",
              "score": 35,
              "evaluation_focus": "标准设定",
              "scoring_hint": "高分：量化多个阈值并说明计算口径；中分：提供部分阈值；低分：无阈值或不可执行。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将“候选行程数据库”映射为仿真输入结构",
              "description": "清晰复述逐日记录字段如何用于到达时刻重算与约束校验（含Dist_H/Dist_O与Tsite拼接）。",
              "score": 35,
              "evaluation_focus": "需求转译",
              "scoring_hint": "高分：给出字段到计算项的对应关系；中分：部分对应不清；低分：无法说明如何使用字段。"
            },
            {
              "sub_criteria": "年度组合方案的验证口径",
              "description": "说明如何从单列验证汇总到年度层面的日数≤30、次数≤4、单次≤15天的检查。",
              "score": 35,
              "evaluation_focus": "口径一致",
              "scoring_hint": "高分：含累计与边界情形（跨年边界）处理；中分：仅给出总计思路；低分：未提年度验证。"
            },
            {
              "sub_criteria": "成本分项一致性复述（高速1.00/普通0.60/租车300等）",
              "description": "重述费用口径并说明如何在仿真/扰动中同步更新成本。",
              "score": 30,
              "evaluation_focus": "口径控制",
              "scoring_hint": "高分：列举分项与扰动联动；中分：列出分项无联动；低分：成本口径含混或矛盾。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "交通耗时分布与抽样假设（速度分布/API回退）",
              "description": "给出高速90/普通40的基础上如何设定分布（如正态/对数正态/经验分布）与API不可用回退策略。",
              "score": 30,
              "evaluation_focus": "不确定性设定",
              "scoring_hint": "高分：分布+参数来源+回退流程；中分：仅分布类型；低分：无分布或未考虑回退。"
            },
            {
              "sub_criteria": "票价/时刻的历史样本与当日≤6小时约束处理",
              "description": "说明票价时刻抽样口径与同日半天游览限制的处理假设。",
              "score": 25,
              "evaluation_focus": "规则化假设",
              "scoring_hint": "高分：样本窗口与抽样方案清晰；中分：仅口述；低分：未处理≤6小时或半天限制。"
            },
            {
              "sub_criteria": "住宿等级与景区所在地类型费用假设",
              "description": "明确省会/地级/县城费用使用规则与市内交通已含的处理。",
              "score": 20,
              "evaluation_focus": "口径假设",
              "scoring_hint": "高分：列出决策逻辑；中分：模糊；低分：遗漏或冲突。"
            },
            {
              "sub_criteria": "采样规模与置信区间设定（蒙特卡洛/拉丁超立方）",
              "description": "给出≥1,000（LHS）/≥5,000（MC）的最小规模与95%置信区间计算方法。",
              "score": 25,
              "evaluation_focus": "统计设定",
              "scoring_hint": "高分：规模+区间方法（如BCa或正态近似）；中分：仅规模或仅区间；低分：均未给出。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "逐日时间窗仿真与到达时刻重算（Tdrive+Tsite）",
              "description": "构建分段行程时间累积模型，校验7:00–19:00与8:00–18:00、全天/半天驾车上限并标注违约点与路段。",
              "score": 35,
              "evaluation_focus": "仿真建模",
              "scoring_hint": "高分：含多段拼接与窗口边界处理；中分：基本累积无边界细节；低分：无法逐日校验。"
            },
            {
              "sub_criteria": "鲁棒性分析框架（单参数敏感度+全局采样）",
              "description": "设计一维灵敏度与LHS/蒙特卡洛全局分析输出完成年限/费用/体验分布。",
              "score": 30,
              "evaluation_focus": "方法设计",
              "scoring_hint": "高分：两类方法齐备且输出定义清晰；中分：仅其一；低分：未设计鲁棒性框架。"
            },
            {
              "sub_criteria": "情景/压力测试模型（封路/取消/涨价/封园）",
              "description": "形式化情景参数与替代路径/列的评估机制与费用冲击测算。",
              "score": 20,
              "evaluation_focus": "场景建模",
              "scoring_hint": "高分：多情景+替代策略评估；中分：少量情景；低分：缺失或不可执行。"
            },
            {
              "sub_criteria": "稳健化规则与触发阈值设计（>30%延误，>20%涨价等）",
              "description": "将阈值与动作（重排/替换列/改用高铁等）结构化为规则库。",
              "score": 15,
              "evaluation_focus": "策略设计",
              "scoring_hint": "高分：阈值量化+动作清单；中分：仅口头建议；低分：无规则或不可操作。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "仿真与采样执行效率（并行/向量化/缓存API）",
              "description": "对千至万量级行程×数千样本的高效运行设计与资源控制。",
              "score": 35,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：并行+批处理+缓存方案；中分：部分优化；低分：串行低效无规模评估。"
            },
            {
              "sub_criteria": "局部重规划与快速再优化调用（OR-Tools/Gurobi）",
              "description": "定义从违约点到局部修补、年份内快速整数/启发式重优化的求解序列。",
              "score": 35,
              "evaluation_focus": "求解流程",
              "scoring_hint": "高分：清晰接口与退避策略；中分：仅说明可调用；低分：无可执行求解路线。"
            },
            {
              "sub_criteria": "支配与剪枝在重规划中的应用",
              "description": "采用支配关系/阈值剪枝控制替代列规模与搜索时间。",
              "score": 30,
              "evaluation_focus": "搜索控制",
              "scoring_hint": "高分：明确支配准则与实现点；中分：只描述概念；低分：未考虑剪枝。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "验证与仿真代码可靠性（单元测试/边界用例）",
              "description": "到达时刻重算、时间窗校验、费用计算的单测与极端用例（跨午夜、半天/全天混合等）。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：覆盖率说明+关键函数测试；中分：部分测试；低分：缺失或脆弱。"
            },
            {
              "sub_criteria": "数据接口与日志（API快照、版本化配置）",
              "description": "实现API调用封装、失败回退、请求/响应快照、参数版本化与可追溯日志。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：日志+快照+重放脚本；中分：部分记录；低分：不可复现。"
            },
            {
              "sub_criteria": "并行与容器化（多进程/分布式、Docker）",
              "description": "提供可重复部署脚本与并行执行配置，控制资源与随机种子。",
              "score": 25,
              "evaluation_focus": "可扩展性",
              "scoring_hint": "高分：Dockerfile+并行参数化；中分：仅本地并行；低分：无并行与环境描述。"
            },
            {
              "sub_criteria": "输出产物结构化与可机读（CSV/JSON/报告生成）",
              "description": "一致的数据模式（列ID、可行率、违约点、CI、情景结果、规则触发与动作）。",
              "score": 20,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：模式校验+示例导出；中分：部分字段；低分：非结构化或缺关键字段。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行率与违约点诊断（≥95%阈值判定）",
              "description": "报告逐行程/逐日可行率、具体违约路段/节点与原因分类（时间窗/驾时/开放/换乘）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化+定位到路段/日；中分：仅汇总；低分：无法定位问题。"
            },
            {
              "sub_criteria": "鲁棒性与敏感度解读（完成年限/费用置信区间）",
              "description": "展示分布、CI与关键影响因子（Sobol/Morris或一维敏感度排序）。",
              "score": 30,
              "evaluation_focus": "不确定性分析",
              "scoring_hint": "高分：CI图+因子贡献；中分：仅区间或排序；低分：无量化结论。"
            },
            {
              "sub_criteria": "情景与压力测试对策与费用冲击",
              "description": "量化不同情景下的替代路径/列选择与费用/天数变化。",
              "score": 20,
              "evaluation_focus": "决策支持",
              "scoring_hint": "高分：表格化对比与建议；中分：定性描述；低分：无对策。"
            },
            {
              "sub_criteria": "滚动重规划方案与触发规则可操作性",
              "description": "给出频率（年度/出行前72小时）、触发阈值与自动化执行清单及通知模板。",
              "score": 20,
              "evaluation_focus": "运维方案",
              "scoring_hint": "高分：流程图或步骤化清单；中分：粗略流程；低分：不可执行或缺失。"
            }
          ]
        }
      }
    }
  }
}