{
  "task_id": "2020_E",
  "problem": "为了估计不同大雾情况下对应的能见度以及预测大雾的消散，请回答以下问题：\n\n1. 众所周知，雾与近地面的气象因素有关。建立模型描述能见度与地面气象观测（温度、湿度和风速等）之间的关系，并针对题目所提供的数据（机场 AMOS 观测.zip）导出具体的关系式；\n2. 根据题目提供的某机场视频数据（机场视频.zip）和能见度数据（机场 AMOS 观测.zip），建立基于视频数据的能见度估计深度学习模型，并对估计的能见度进行精度评估；\n3. 高速公路某路段只有监控视频数据，建立不依赖能见度仪观测数据的能见度估计算法（提示：事实上，在有雾的情形可以估计视频中物体的景深【1】。反过来，理论上也可以利用视频中不同景深的物体，在不同能见度下的亮度差异估计能见度），讨论相关算法实现过程，并针对题目提供的一段视频（高速公路视频截图.zip）绘制该时间段这段高速公路能见度随时间变化曲线；\n4. 利用问题三得到的能见度随时间变化规律，建立数学模型预测大雾变化趋势（加重或减弱）、何时散去（达到指定的能见度，比如 MOR=150m）？",
  "subtask": {
    "1": {
      "subtask": "子任务1的目标是从题目提供的 AMOS 原始观测文件（例如 AMOS20191216、AMOS20200313 中的 .his 文件）中逐步产出可供建模的、具有物理含义的能见度目标变量与一组经过严格工程化的近地面气象特征，并以半物理可解释的统计模型形式给出能见度与地面气象要素的定量关系式；为此需要按下列有序步骤实现：一是数据读取与单位统一——解析所有 .his 字段（MOR_1A、RVR_1A、TEMP、DEWPOINT、RH、WS2A/WD2A、垂直风、气压 PAINS/HPA、LIGHT_S、CREATEDATE/LOCALDATE、SITE 等），将温度/压力/风速等单位统一并转换为数值型时间序列，记录并保留原始元数据；二是时间对齐与重采样——将各变量重采样到统一时间分辨率（建议 1 分钟，与 MOR_1A 的时间尺度一致），处理时区/夏令时与时钟偏差，若存在多站点则明确代表性站点并记录空间偏差；三是质量控制与异常处理——依据物理边界（例如 RH∈[0,100]%、TEMP 在合理区间内、负值或极大突变的 MOR/风速视为异常）、仪器标志（如 LIGHT_S、站点状态）与统计方法（滑动中位数滤波、 MAD 检测、基于局部窗口的突变剔除）剔除或标注坏值，对短期缺失用线性/样条插值或卡尔曼平滑填补、对长缺失段标记为不可用；四是目标变量变换——将观测能见度 MOR 转换为光学衰减系数 β = −ln(0.05)/MOR，并对 β 取对数 y = log(β) 以稳定方差并更好满足回归假设，同时保留原始 MOR 以便阈值分类分析；五是物理启发的特征工程——构造露点差 ΔT = TEMP − DEWPOINT、绝对/相对湿度指标、风速 WS 与风向的正弦/余弦分量、气压 P、日夜/太阳辐射指示（小时/日照因子）、季节/日序特征（day-of-year、hour-of-day 的周期编码）、垂直风/湍动代理与历史滞后项（y 的 1,5,10,30,60 分钟滞后及移动平均、差分和变化率），并构造交互项（如 ΔT·I(WS<w0)）与二元“雾/非雾”指示以支持门控或混合模型；六是平滑与去噪处理——对气象量和目标变量在建模前用低通滤波或局部回归（LOESS）去除高频噪声但保留关键瞬变用于滞后特征；七是基线建模策略与估计——以半物理可解释为主的回归框架，首选对 y = log β 建立广义可加模型（GAM，使用样条平滑函数捕捉非线性效应）并在必要时引入自回归残差项（AR(1)）或状态空间扩展以吸收时间相关性；若需要非参数对比，可并行训练 LightGBM/随机森林作为基线并比较性能；建模时对低能见度（高 β）样本加权（如权重与 1/MOR 或基于分位的权重）以避免晴好样本主导拟合；八是模型选择、正则与验证——用 GCV/AIC/BIC 选取样条平滑度和变量子集，用时间分块交叉验证（按日、按事件或按月份留出，禁止随机时点抽样）评估泛化并用网格或贝叶斯优化调整超参；九是诊断与不确定度估计——检验残差自相关（ACF/PACF）、异方差（Breusch–Pagan）、偏离正态性的影响并在必要时采用稳健回归或方差建模（GARCH/异方差项）；通过残差引导的自助法（bootstrap）、GAM 的置信带或模型集合构造预测区间并输出变量的部分效应曲线、显著性与相对重要性（可用 SHAP 作补充）；十是输出物与可复现性要求——最终产出应包含（1）明确的数学关系式（例如 y = α0 + s1(ΔT) + s2(WS) + s3(hour) + α4·sinWD + ...，并给出各平滑函数的估计曲线与置信区间），或当使用树模型时提供近似解析表达（主导变量规则/分段回归表示）；（2）性能评价指标表（MAE/RMSE 于整体与低能见度子域、分类指标如 POD/FAR 对关键阈值）；（3）数据清洗与特征工程脚本、模型训练脚本与随机种子、以及用到的主要工具建议（Python：pandas、numpy、scipy、statsmodels、pyGAM、scikit-learn、lightgbm；或 R：data.table、mgcv、forecast），并记录模型假设与局限以便后续审查。该子任务的成功判据是可复现地从原始 AMOS 数据得到经物理变换的目标变量、一个经过验证的、可解释的回归关系（含显著自变量和非线性效应）以及可靠的误差/置信区间，以供后续建模或决策使用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "从 AMOS .his 原始观测中完成能见度目标变量构造与气象特征工程，并拟合与评估半物理可解释的回归模型以定量刻画能见度（MOR/β）的关系",
          "expected_output": "1分钟分辨率的时间序列数据集（含 MOR、β、y=logβ 与工程化特征）；数据清洗与特征工程脚本；半物理可解释关系式 y = α0 + s1(ΔT)+s2(WS)+… 或等价近似；模型文件/超参；性能指标表（整体与低能见度子域的MAE/RMSE、阈值POD/FAR）；不确定度/置信区间与部分效应曲线；可复现实验记录（随机种子、版本）。",
          "key_inputs_constraints": "输入：AMOS .his 字段（MOR_1A、RVR_1A、TEMP、DEWPOINT、RH、WS2A、WD2A、垂直风、PAINS/HPA、LIGHT_S、CREATEDATE/LOCALDATE、SITE）；约束：单位统一（°C、hPa、m/s）、时间对齐到1分钟并处理时区/夏令时、质量控制（物理边界与仪器标志）、缺测填补策略（短缺测插值、长缺测标注不可用）、多站点需指明代表性与空间偏差记录。",
          "modeling_type": "拟合+评价+预测",
          "role_in_pipeline": "作为特征工程与基线回归建模子任务，依赖原始 AMOS 数据读取与清洗；产出可解释关系式与评估结果供后续视频模型融合与预测使用。前序：数据获取；后序：视频融合建模、阈值告警与消散预测。",
          "assumptions": "AMOS 时间戳可转换为本地时区；若 RVR_1A 与 MOR_1A 冲突，以 MOR_1A 为主；缺少太阳辐射时用小时与昼夜指示近似。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别目标变量转换（MOR→β→y=logβ）",
              "description": "是否明确采用 β = −ln(0.05)/MOR 并对 β 取对数 y=logβ 作为回归目标以稳定方差，且保留 MOR 供阈值（如150m）分析。",
              "score": 30,
              "evaluation_focus": "建模思维/物理理解",
              "scoring_hint": "高分：给出公式并验证数值稳定性；中分：只提及β或y但无验证；低分：直接拟合MOR且无解释。"
            },
            {
              "sub_criteria": "时间对齐与重采样到1分钟",
              "description": "是否将所有字段重采样到1分钟分辨率，处理时区/夏令时与时钟偏差，并记录对齐策略。",
              "score": 25,
              "evaluation_focus": "数据规范/时序处理",
              "scoring_hint": "高分：有明确重采样规则与偏差校正；中分：重采样但未处理时区/偏差；低分：混用原频率。"
            },
            {
              "sub_criteria": "质量控制与异常识别（RH范围、极端MOR/WS）",
              "description": "是否基于物理边界和仪器标志（LIGHT_S/站点状态）剔除或标注坏值，并区分短缺测与长缺测。",
              "score": 25,
              "evaluation_focus": "数据质量/规则制定",
              "scoring_hint": "高分：列出阈值与标注策略；中分：仅粗略过滤；低分：未做QC。"
            },
            {
              "sub_criteria": "低能见度样本重要性识别与加权",
              "description": "是否识别晴好样本占优问题，并提出基于1/MOR或分位权重的加权策略。",
              "score": 20,
              "evaluation_focus": "问题洞察/采样偏差",
              "scoring_hint": "高分：实现并报告权重效果；中分：提到但未实现；低分：忽略。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "明确子任务边界（AMOS→可建模数据集→可解释关系式）",
              "description": "是否将流程拆解为读取与单位统一、对齐、QC、目标变换、特征工程、建模与验证，且强调可复现。",
              "score": 30,
              "evaluation_focus": "流程设计/复现实验",
              "scoring_hint": "高分：列出每步输入输出；中分：有流程但缺关键细节；低分：表述笼统。"
            },
            {
              "sub_criteria": "变量清单与单位标准（TEMP, RH, WS2A/WD2A, PAINS/HPA）",
              "description": "是否逐项列出字段与单位，并处理风向/风速矢量化与气压单位一致性。",
              "score": 25,
              "evaluation_focus": "数据规范/细节把控",
              "scoring_hint": "高分：给出转换公式；中分：仅口述；低分：遗漏关键变量。"
            },
            {
              "sub_criteria": "评价指标的双域说明（整体与低能见度子域）",
              "description": "是否区分整体与低能见度（如MOR<800m、<400m）评估，并加入阈值POD/FAR。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：阈值清晰且给出指标定义；中分：仅整体指标；低分：无评价设计。"
            },
            {
              "sub_criteria": "关系式表达（y = α0 + s(·)）",
              "description": "是否明确输出GAM形式或树模型的分段规则近似，并说明各项物理含义。",
              "score": 20,
              "evaluation_focus": "表达清晰/可解释性",
              "scoring_hint": "高分：提供显著性与置信带；中分：仅给出形式；低分：无关系式。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "半物理假设（ΔT、RH、WS 对 y=logβ 的单调/非线性影响）",
              "description": "声明露点差ΔT负相关、RH正相关、低风速利于积雾的门槛效应等假设。",
              "score": 30,
              "evaluation_focus": "物理机理/可解释",
              "scoring_hint": "高分：与文献或数据探索一致；中分：给出但未验证；低分：无或与常识冲突。"
            },
            {
              "sub_criteria": "时序相关与异方差假设",
              "description": "假设残差存在AR(1)与随MOR变化的异方差，并提出处理方案（AR项/稳健回归）。",
              "score": 25,
              "evaluation_focus": "统计假设/诊断",
              "scoring_hint": "高分：ACF/PACF与BP检验；中分：仅口述；低分：忽略。"
            },
            {
              "sub_criteria": "缺测机制与插值边界",
              "description": "区分短缺测（可插值）与长缺测（不可用）的假设并量化阈值（如≤10分钟）。",
              "score": 25,
              "evaluation_focus": "数据假设/稳健性",
              "scoring_hint": "高分：阈值与敏感性分析；中分：有阈值无验证；低分：无说明。"
            },
            {
              "sub_criteria": "站点代表性与时区处理假设",
              "description": "多站点选择代表性站并记录空间偏差；明确LOCALDATE与CREATEDATE映射到本地时区。",
              "score": 20,
              "evaluation_focus": "数据一致性",
              "scoring_hint": "高分：有偏差量化；中分：仅选择无量化；低分：忽略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "目标与特征工程（ΔT、绝对/相对湿度、WS/WD分量、季节与日夜、滞后项）",
              "description": "是否按要求构造物理启发特征与滞后/移动统计，并保留MOR用于阈值评估。",
              "score": 30,
              "evaluation_focus": "特征设计/物理对齐",
              "scoring_hint": "高分：含交互项如ΔT·I(WS<w0)且经检验；中分：少量核心特征；低分：仅原始变量。"
            },
            {
              "sub_criteria": "GAM 建模与平滑选择",
              "description": "建立 y=logβ 的GAM，说明样条种类与平滑度选择（GCV/AIC/BIC）。",
              "score": 25,
              "evaluation_focus": "模型设定/正则",
              "scoring_hint": "高分：给出自由度/λ与理由；中分：默认设置；低分：无说明或不当。"
            },
            {
              "sub_criteria": "样本加权与类不平衡处理",
              "description": "对低能见度样本加权（1/MOR或分位），并报告对拟合的影响。",
              "score": 20,
              "evaluation_focus": "稳健拟合/加权",
              "scoring_hint": "高分：前后对比指标与曲线；中分：声明未验证；低分：未处理。"
            },
            {
              "sub_criteria": "对比基线（RF/LightGBM）与可解释近似",
              "description": "训练非参数对比模型并提供部分依赖或规则近似，比较性能与偏差。",
              "score": 25,
              "evaluation_focus": "基准对比/解释",
              "scoring_hint": "高分：系统对比与重要性分析；中分：训练无对比；低分：无基线。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "时间分块交叉验证",
              "description": "采用按日/事件/月份留出，禁止随机打散，报告每折MAE/RMSE与阈值POD/FAR。",
              "score": 30,
              "evaluation_focus": "验证策略/泄漏控制",
              "scoring_hint": "高分：清晰折划分与稳定性；中分：时间留出但描述不足；低分：随机CV。"
            },
            {
              "sub_criteria": "超参与平滑度选择（GCV/AIC/BIC/贝叶斯优化）",
              "description": "系统搜索平滑度与特征子集，报告选择准则与最优解。",
              "score": 25,
              "evaluation_focus": "超参搜索/模型选择",
              "scoring_hint": "高分：有搜索空间与最优报告；中分：手工调参；低分：默认无依据。"
            },
            {
              "sub_criteria": "残差诊断（ACF/PACF、异方差、正态性偏离）",
              "description": "进行统计检验并在必要时引入AR(1)/稳健或方差建模。",
              "score": 25,
              "evaluation_focus": "数理推导/诊断",
              "scoring_hint": "高分：采取修正并提升指标；中分：仅报告无修正；低分：无诊断。"
            },
            {
              "sub_criteria": "不确定度估计与预测区间",
              "description": "使用GAM置信带/残差自助法构造预测区间，并校准覆盖率。",
              "score": 20,
              "evaluation_focus": "不确定性/校准",
              "scoring_hint": "高分：报告覆盖率接近标称；中分：给区间无校准；低分：无区间。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据读取与单位统一脚本（AMOS .his 全字段解析）",
              "description": "提供可运行脚本解析 MOR_1A/RVR_1A/TEMP/DEWPOINT/RH/WS2A/WD2A/PAINS/HPA/LIGHT_S/时间字段并单位转换。",
              "score": 30,
              "evaluation_focus": "代码可靠性/IO",
              "scoring_hint": "高分：含异常处理与日志；中分：能跑但脆弱；低分：缺字段或报错。"
            },
            {
              "sub_criteria": "时间对齐、QC、插值实现",
              "description": "实现1分钟重采样、物理边界过滤、MAD/中位滤波、短缺测插值与长缺测标注。",
              "score": 25,
              "evaluation_focus": "数据工程/稳健性",
              "scoring_hint": "高分：模块化与可配置阈值；中分：部分实现；低分：缺关键步骤。"
            },
            {
              "sub_criteria": "特征工程与管道化（滞后、循环时间编码、风向分解）",
              "description": "封装特征构造、滞后窗口与交叉项，避免数据泄漏（基于过去信息）。",
              "score": 25,
              "evaluation_focus": "工程化/泄漏防护",
              "scoring_hint": "高分：严格时序索引与管道；中分：手工拼接；低分：泄漏。"
            },
            {
              "sub_criteria": "模型训练、加权与评估可复现",
              "description": "固定随机种子，保存模型与配置，导出指标报表与部分效应图。",
              "score": 20,
              "evaluation_focus": "可复现/报告化",
              "scoring_hint": "高分：一键重现；中分：多步重现；低分：不可复现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "性能指标与低能见度子域表现",
              "description": "报告整体与MOR<800m/400m的MAE/RMSE，并对比加权/不加权或模型间差异。",
              "score": 30,
              "evaluation_focus": "结果解释/对比",
              "scoring_hint": "高分：量化提升与误差来源；中分：仅列数值；低分：缺子域或指标。"
            },
            {
              "sub_criteria": "关系式可解释性与部分效应（ΔT、WS、hour）",
              "description": "展示GAM平滑曲线与置信带，解释物理一致性与门槛效应。",
              "score": 25,
              "evaluation_focus": "可解释性/物理一致",
              "scoring_hint": "高分：曲线合乎机理；中分：有图少解释；低分：无图无解释。"
            },
            {
              "sub_criteria": "残差与不确定度报告（覆盖率、偏差）",
              "description": "给出残差分布、ACF、预测区间覆盖率及偏差分析。",
              "score": 25,
              "evaluation_focus": "诊断/不确定性",
              "scoring_hint": "高分：覆盖率接近标称并解释偏差；中分：仅残差图；低分：无诊断。"
            },
            {
              "sub_criteria": "局限性与改进方向（站点代表性、变量缺失）",
              "description": "讨论站点代表性、太阳辐射缺失替代、传感器故障对结果的影响与缓解方案。",
              "score": 20,
              "evaluation_focus": "批判性思维",
              "scoring_hint": "高分：提出可执行改进；中分：泛述；低分：未提局限。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2的目标是在给定机场视频序列与同步地面能见度观测（如 AMOS 数据集中的 MOR_1A/RVR 时间序列）作为监督标签的条件下，设计、训练与验证一个端到端的基于深度学习的能见度估计器，该估计器以视频帧序列为输入、输出时间同步的能见度估计值（MOR 或等价的衰减系数 β）及其不确定度，并可选同时输出场景相对深度图与“去雾”重建图以增强物理一致性；该任务的范围包括（1）输入数据处理：读取并对齐视频帧时间戳与 AMOS 的分钟级能见度标签，剔除或标注曝光失真、雨滴遮挡、夜昼极端光照等坏帧，做相机曝光/白平衡归一化及必要的几何裁剪；（2）模型设计：采用“空间骨干 + 时序聚合 + 多任务头”架构，空间骨干可选预训练的 ResNet/EfficientNet（或移动端 MobileNet）、时序聚合采用 ConvLSTM / Temporal Convolutional Network / Transformer（保留空间信息时优先 ConvLSTM），多任务头包含主回归头预测 β̂ 或 MOR̂、辅助头预测相对深度 d̂(x,t) 与去雾图 Ĵ(x,t)，并包含一个输出预测置信度/方差以量化不确定性；（3）物理与损失函数：主损失为对低能见度加权的回归损失（加权 MAE 或 Huber），辅以深度自监督/监督损失（若用 MiDaS 等外部深度估计做伪标签）、重建/感知损失（L1/SSIM/感知损失）以及物理一致性损失 Lphys，后者基于 Koschmieder 成像模型 I ≈ J e^{−β d} + A(1−e^{−β d}) 强制网络输出在亮度—距离域自洽（A 可由网络估计或通过亮暗远近像素统计初始化）；同时可采用负对数似然或 heteroscedastic loss、MC Dropout 或模型集成来训练/估计不确定度；（4）训练策略与数据增强：先用晴日图像与合成雾（用已知 β 与深度图合成）进行预训练以建立亮度—距离先验，再用真实 AMOS 标签微调，数据增强包含曝光/增益/色温扰动、色彩随机化、仿真不同雾色散与噪声，以提高鲁棒性；（5）数据切分与评估：用按时间块/事件留出的验证与测试集避免时序泄露，评估指标包括 MAE/RMSE、低能见度子域（如 MOR<1000m）的相对误差、阈值分类指标（POD/FAR/AUC 对 150/400/800m）、置信区间覆盖率与校准图；（6）实现细节与算力建议：推荐使用 PyTorch 或 TensorFlow，利用预训练权重、混合精度训练与 Adam 优化器，训练与推理在具备 ≥16GB GPU 的环境上进行，导出可用于实时/近实时推断的轻量化模型（剪枝/量化或用 MobileNet 骨干）与推理流程；（7）对标签噪声与现实偏差的处理：在损失中对 MOR 标签噪声加权或用稳健回归（Huber）、并在训练中引入场景/时段掩码（夜间/日间、灯光异常），记录模型在不同光照、摄像机曝光与镜头污迹条件下的失效警告逻辑。最终交付物为可复现的训练代码与配置、经过时间分块验证的模型权重、按帧或按分钟输出的 MOR̂ 与不确定度置信区间、以及用于人工审查的深度图與去雾图像以便检验物理合理性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "设计、训练与评估一个端到端深度学习模型，基于视频帧序列预测分钟级能见度（MOR 或衰减系数β）并量化不确定度，同时可选输出相对深度与去雾重建以增强物理一致性。",
          "expected_output": "按帧/分钟的MOR̂或β̂数值序列及置信区间；深度图d̂与去雾图Ĵ示例集；时间分块验证的误差表（MAE/RMSE、POD/FAR/AUC）；校准曲线与置信区间覆盖率；训练代码与配置、模型权重、推理脚本。",
          "key_inputs_constraints": "输入：机场视频序列（含时间戳）、AMOS分钟级MOR_1A/RVR标签；必要：时间对齐与时区处理；约束：坏帧（曝光/雨滴/夜间极端光照）需剔除或加掩码；模型须输出不确定度；训练需时间块留出避免泄露；计算资源≥16GB GPU；物理一致性需考虑Koschmieder模型。",
          "modeling_type": "预测+拟合+评价",
          "role_in_pipeline": "作为面向视频的能见度预测核心模型训练与验证环节，直接依赖前序的标签对齐与清洗（子任务1产出的MOR/β、时间戳），其输出供后续公路/机场应用与预测任务使用（如任务3/4的不确定度传播与策略决策）。",
          "assumptions": "RVR可作为低能见度时的替代或融合标签；采用PyTorch与预训练ResNet+ConvLSTM；使用加权Huber为主损失，异方差回归输出对数方差。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "视频到分钟级MOR/β预测目标界定",
              "description": "是否明确以视频帧序列为输入，输出时间同步的分钟级MOR̂或β̂，并说明两者互换关系与选择理由。",
              "score": 30,
              "evaluation_focus": "问题边界/预测目标",
              "scoring_hint": "高分：清晰给出MOR↔β=−ln(0.05)/MOR关系并说明选择；中分：仅说明预测MOR或β但未阐明换算；低分：未界定输出或混淆时间尺度。"
            },
            {
              "sub_criteria": "监督标签与时间对齐约束识别",
              "description": "是否指出AMOS分钟级标签需要与视频时间戳对齐，处理时区/时钟偏差和抽样窗口设计。",
              "score": 25,
              "evaluation_focus": "数据对齐/前置条件",
              "scoring_hint": "高分：阐明对齐策略（窗口聚合/插值）与偏差校正；中分：提到对齐但无细节；低分：忽略或用随机匹配。"
            },
            {
              "sub_criteria": "低能见度样本重要性与标签噪声",
              "description": "是否识别低MOR区域对安全更关键并提出加权或稳健损失，讨论RVR/MOR噪声。",
              "score": 25,
              "evaluation_focus": "任务权重/稳健性",
              "scoring_hint": "高分：提出基于1/MOR或分位加权与Huber；中分：仅口头强调低能见度重要；低分：一视同仁无任何加权。"
            },
            {
              "sub_criteria": "物理一致性（Koschmieder）需求",
              "description": "是否识别需用I≈J e^{−β d}+A(1−e^{−β d})做物理约束，辅助深度/去雾输出的作用。",
              "score": 20,
              "evaluation_focus": "物理先验融合",
              "scoring_hint": "高分：明确A估计、d̂/Ĵ与β̂一致性损失；中分：仅提到物理模型；低分：完全忽略。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "端到端深度学习+多任务表述",
              "description": "是否准确复述“空间骨干+时序聚合+多任务头”结构及输出不确定度。",
              "score": 30,
              "evaluation_focus": "需求映射",
              "scoring_hint": "高分：点名ResNet/EfficientNet+ConvLSTM/TCN/Transformer与异方差输出；中分：泛称CNN+RNN；低分：与任务脱节的简单回归。"
            },
            {
              "sub_criteria": "数据处理与坏帧处理复述",
              "description": "是否复述曝光/白平衡归一化、坏帧掩码、几何裁剪及夜昼差异处理。",
              "score": 25,
              "evaluation_focus": "数据工程要点",
              "scoring_hint": "高分：列出具体掩码/阈值或规则；中分：只笼统提及；低分：未涉及。"
            },
            {
              "sub_criteria": "评估设计与时间分块验证",
              "description": "是否复述按时间块/事件留出的验证与POD/FAR/AUC、覆盖率与校准图。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：清楚区分训练/验证/测试的时段留出；中分：仅给MAE/RMSE；低分：随机切分导致泄露。"
            },
            {
              "sub_criteria": "算力与部署约束复述",
              "description": "是否说明≥16GB GPU、混合精度、轻量化（量化/剪枝/MobileNet）。",
              "score": 20,
              "evaluation_focus": "实现可行性",
              "scoring_hint": "高分：给出具体显存与batch推理速率目标；中分：泛述需要GPU；低分：不提。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "标签选择与融合假设（MOR与RVR）",
              "description": "对低能见度时RVR替代/融合MOR的假设、冲突解决与加权说明。",
              "score": 30,
              "evaluation_focus": "数据假设/合理性",
              "scoring_hint": "高分：给出阈值与融合规则（如MOR<600m用RVR）；中分：口头声明可替代；低分：混用无说明。"
            },
            {
              "sub_criteria": "物理模型参数假设（A与深度先验）",
              "description": "对大气光A估计方法、MiDaS等伪标签深度可靠性的假设与限制。",
              "score": 25,
              "evaluation_focus": "物理与先验",
              "scoring_hint": "高分：提出A分通道可学习/统计初始化、深度置信权重；中分：只说使用MiDaS；低分：未提A/深度。"
            },
            {
              "sub_criteria": "时序平稳与数据切分假设",
              "description": "说明事件级留出能代表未来情形、域偏移（季节/相机变更）的处理假设。",
              "score": 25,
              "evaluation_focus": "泛化假设",
              "scoring_hint": "高分：声明跨季/跨设备验证或域自适应；中分：默认同分布；低分：无说明。"
            },
            {
              "sub_criteria": "噪声与不确定度建模假设",
              "description": "异方差高斯或分布选择及MC Dropout/深度集成可近似后验的假设。",
              "score": 20,
              "evaluation_focus": "统计建模",
              "scoring_hint": "高分：明确NLL损失与方差正则；中分：仅输出一个sigma；低分：未建模不确定度。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "空间骨干与时序聚合设计",
              "description": "是否采用ResNet/EfficientNet等骨干与ConvLSTM/TCN/Transformer并说明保留空间信息的理由。",
              "score": 30,
              "evaluation_focus": "架构选择",
              "scoring_hint": "高分：给出层级、输入窗口、特征尺寸与因果卷积；中分：泛述组件；低分：仅单帧CNN。"
            },
            {
              "sub_criteria": "多任务头与物理一致性损失Lphys",
              "description": "主回归头β̂/MOR̂，辅助d̂/Ĵ与Â，构造I≈Je^{−βd}+A(1−e^{−βd})的一致性约束。",
              "score": 25,
              "evaluation_focus": "损失/约束设计",
              "scoring_hint": "高分：写明损失项权重与采样策略；中分：仅提到一致性；低分：无物理约束。"
            },
            {
              "sub_criteria": "不确定度输出与训练目标",
              "description": "异方差回归（预测logσ^2）或NLL，MC Dropout/集成的实现与目的。",
              "score": 20,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：公式化NLL与数值稳定技巧；中分：仅输出置信度分数；低分：无不确定度。"
            },
            {
              "sub_criteria": "低能见度加权与稳健损失",
              "description": "加权Huber/MAE设计、权重函数（如w∝1/MOR或分位）避免晴好样本主导。",
              "score": 25,
              "evaluation_focus": "训练目标/鲁棒性",
              "scoring_hint": "高分：给出权重曲线与阈值；中分：口头声明加权；低分：未加权。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数据对齐、批处理与增强流程",
              "description": "窗口采样（如T=16–32帧）、时间对齐到分钟标签、增强（曝光/色温/雾色散）。",
              "score": 25,
              "evaluation_focus": "训练管线",
              "scoring_hint": "高分：详述采样与增强参数；中分：笼统描述；低分：未实现或与目标不符。"
            },
            {
              "sub_criteria": "优化与训练策略",
              "description": "Adam/AdamW、余弦退火/OneCycle、混合精度、冻结-解冻微调与合成雾预训练。",
              "score": 25,
              "evaluation_focus": "优化实现",
              "scoring_hint": "高分：阶段化学习率与早停标准；中分：默认训练；低分：无策略、易过拟合。"
            },
            {
              "sub_criteria": "时间分块验证与超参选择",
              "description": "事件/月份留出、网格/贝叶斯优化、避免时序泄露。",
              "score": 25,
              "evaluation_focus": "验证与选择",
              "scoring_hint": "高分：清晰切分与固定随机种子；中分：简单留出；低分：随机混洗导致泄露。"
            },
            {
              "sub_criteria": "不确定度估计与校准",
              "description": "NLL训练、MC Dropout/集成推断、温度缩放/等概率分箱校准。",
              "score": 25,
              "evaluation_focus": "统计求解/校准",
              "scoring_hint": "高分：报告PICP/ACE；中分：仅给均方误差；低分：无校准与覆盖率。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据加载与时间对齐代码可靠性",
              "description": "可复现读取视频/AMOS，处理时区、帧到分钟聚合、坏帧掩码。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含单元测试/断言与日志；中分：基本可跑；低分：时间错配或崩溃。"
            },
            {
              "sub_criteria": "模型与损失实现正确性",
              "description": "骨干+ConvLSTM/TCN、异方差NLL、Lphys、加权Huber的无误实现与数值稳定。",
              "score": 30,
              "evaluation_focus": "实现正确性",
              "scoring_hint": "高分：梯度检查/NaN防护；中分：部分实现；低分：关键损失缺失或错误。"
            },
            {
              "sub_criteria": "训练脚本与复现实验配置",
              "description": "配置化训练（yaml/argparse）、固定随机种子、混合精度与检查点。",
              "score": 25,
              "evaluation_focus": "工程化/复现",
              "scoring_hint": "高分：一键重现实验；中分：需手动改代码；低分：不可复现。"
            },
            {
              "sub_criteria": "推理与导出（轻量化）",
              "description": "导出权重与ONNX/torchscript、量化/剪枝或MobileNet以满足时延目标。",
              "score": 20,
              "evaluation_focus": "部署可用性",
              "scoring_hint": "高分：提供实时推理脚本与性能报告；中分：仅保存权重；低分：无推理流程。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "误差指标与低能见度子域评估",
              "description": "报告整体与MOR<1000m子域的MAE/RMSE/相对误差，并与基线对比。",
              "score": 30,
              "evaluation_focus": "结果量化",
              "scoring_hint": "高分：给出子域误差降低≥15%对比；中分：仅整体指标；低分：无量化或劣于基线。"
            },
            {
              "sub_criteria": "阈值分类与业务指标",
              "description": "POD/FAR/AUC针对150/400/800m阈值，混淆矩阵与业务含义解读。",
              "score": 20,
              "evaluation_focus": "业务相关性",
              "scoring_hint": "高分：多阈值稳定且AUC>0.85；中分：单阈值或无解读；低分：未评估。"
            },
            {
              "sub_criteria": "不确定度覆盖与校准分析",
              "description": "置信区间覆盖率（PICP）与校准曲线（ACE/NLL），过/欠置信讨论与修正。",
              "score": 25,
              "evaluation_focus": "不确定度评估",
              "scoring_hint": "高分：90%区间覆盖≈90%±5%且ACE低；中分：报告但偏差大；低分：未提供。"
            },
            {
              "sub_criteria": "物理一致性与可解释性展示",
              "description": "展示d̂/Ĵ与β̂的一致性案例、失败模式（夜间、强光、雨滴）与告警逻辑。",
              "score": 25,
              "evaluation_focus": "可解释/诊断",
              "scoring_hint": "高分：提供案例图与定性/定量一致性；中分：仅示例图；低分：无展示与诊断。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3 — 仅基于视频的能见度估计算法（独立说明）：目标是设计并实现一个可操作的、仅依赖单目监控视频（无地面能见度仪标签）就能在帧级或分钟级输出道路段能见度（MOR）估计及其置信度的端到端流程；该流程假定摄像头位置固定且视域内雾层在短时间尺度上近似横向均匀，输入为连续视频帧序列与可选的摄像头元数据（内参、曝光/增益/快门时间、时间戳）以及可选的道路几何信息（车道线、路标物理尺寸或标定点），输出为时序化的 MOR(t)（或衰减系数 β(t)）及每时刻的不确定度/诊断标志。实现步骤与方法（逐步、可复现）：1) 预处理：读取帧并用摄像头元数据或图像统计对每帧做曝光/白平衡和伽玛归一化，剔除严重运动模糊、直射阳光或雨滴遮挡的帧（基于图像熵、饱和像素比和光流突变检测）；2) 语义筛选与参照对象提取：用语义分割/目标检测（例如 pretrained Detectron2、YOLOv5 或语义模型）标识并跟踪可作为距离与亮度参照的语义类（车辆、路牌、路灯、车道线、护栏等），并记录每个检测的置信度与像素包围盒/位置信息；3) 距离映射（像素→距）：若有相机内外参或已知道路标定点，则用透视几何或单平面单应求出像素行坐标到物理距离的函数 d(y)（经验形式可取 d = a/(y−y0)+b 或多项式），若无则用单目深度估计器（如 MiDaS/DPT）得到相对深度图并通过少量已知尺寸对象（或假定车辆宽度/牌高）做尺度标定；4) 亮度/对比特征计算：在每个候选对象或固定景深区间上计算稳定的光学量作为可见性指标，例如局部亮度 Bobj 与背景亮度 Bbg 的对比 K = |Bbg−Bobj|/max(Bbg,Bobj)，或边缘能量/高频谱能量、暗通道值或点光源（夜间路灯/车灯）半径与峰值强度；5) 指数衰减拟合以估计 β：利用同一时间帧或短时间窗口内多个不同距离处的同类目标测得的对比值构造比值关系 R = K(d2)/K(d1) ≈ exp(−β (d2−d1))，由此得 β̂ = −ln R /(d2−d1)；更一般地，用所有采样点对以加权最小二乘拟合对数模型 ln K(d) = ln K0 − β d + ε，估计截距 ln K0 与 β（K0 为无雾基线对比，可作为隐变量或通过晴时基线/历史数据初始化）；夜间点光源可改用 Iobs(d) ≈ I0 /(d^2) · exp(−β d)（或在对数域拟合得到 β）；6) 统计稳健化与时间平滑：对每帧/每分钟得到的多个 β̂ 值按检测置信度、对象面积和对比稳定性加权聚合，并用鲁棒估计（Huber 回归）或卡尔曼滤波/指数加权移动平均平滑时间序列以抑制测量噪声与短期遮挡；7) MOR 计算与不确定度量化：将 β̂ 转换为能见度 MOR̂ = −ln(0.05)/β̂，并通过拟合残差、样本数、检测置信度及时间序列方差合成不确定度估计（例如用拟合标准误差与时间平滑的不确定传播）；8) 置信判断与异常标识：当可用参照对象数低于阈值、图像曝光饱和、深度标定不可靠或场景出现强空间非均匀雾（检测到前后景差异或对比在空间上非一致）时输出“低置信/不可用”标志；9) 验证与轻量标定步骤：在实际部署前建议进行一次人工或半自动标定（用若干帧中已知距离的标志物或人工测距点校准 d(y) 与/或校准 K0），并提供自动日志记录以便后续离线校验；10) 实现工具与接口：推荐使用 OpenCV（图像处理与透视校正）、PyTorch/TensorFlow（单目深度模型与检测器）、Detectron2/YOLO（目标检测）、NumPy/SciPy/statsmodels（统计拟合与滤波），并输出 CSV/JSON 格式的时间序列（时间戳、MOR̂、β̂、置信区间、可用参照计数及诊断码）。关键假设与限制要在实现中显性检查：摄像头固定、雾层在视域近似均匀、参照对象在亮度上随时间内可视为同类或通过聚合消除差异；算法需在昼夜条件下分别调整对比度度量（白天以对比/边缘为主，夜间以点光源强度与光晕为主）。最终产出为按帧或按分钟的 MOR 时间序列、每时刻的置信区间与诊断标志，以及可复现的代码模块（预处理、检测与跟踪、距离校准、β 拟合、时序滤波、不确定度输出），可立即用于生成高速公路路段在给定视频时间段内的能见度随时间变化曲线。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于单目监控视频拟合与估计道路路段能见度（MOR）与衰减系数β的时序估计，并输出每时刻的置信度与诊断标志",
          "expected_output": "按帧或按分钟的时间序列（CSV/JSON）：时间戳、β̂、MOR̂、置信区间、可用参照计数、诊断码；附：图表（能见度随时间曲线）、校准参数文件、可复现代码模块与日志",
          "key_inputs_constraints": "主要输入与约束：1) 连续单目视频帧序列（帧率、分辨率、时间戳）；2) 摄像头元数据（内参、曝光/增益/快门、可选外参或标定点）或若无则说明需单目深度标定；3) 可选道路几何信息（牌高/车宽/标志点物理距）用于尺度标定；关键约束：摄像头固定、视域内雾层短时近似横向均匀、参照对象必须在多距离处可检测",
          "modeling_type": "预测+拟合",
          "role_in_pipeline": "作为独立的“仅视频”能见度估计模块：依赖视频预处理（去噪、曝光归一化）和目标检测/跟踪，产出时序化 MOR̂/β̂ 供后序大雾趋势预测（子任务4）与与 AMOS 数据的离线比对（子任务1/2）使用"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别估计对象：MOR 与 β 的时序输出需求",
              "description": "判断并指出应估计的变量为衰减系数β与由其转换的能见度MOR，并要求输出时序估计与置信度。",
              "score": 30,
              "evaluation_focus": "建模目标识别",
              "scoring_hint": "高分：明确写出β̂→MOR̂转换公式并要求置信区间；中分：指出MOR或β之一但未给转换细节；低分：未明确β或MOR或只给模糊时序输出。"
            },
            {
              "sub_criteria": "识别单目视频约束与关键前提",
              "description": "明确列出单目、固定摄像头、视域雾层近似均匀、昼夜差异、参照对象需求等约束条件。",
              "score": 25,
              "evaluation_focus": "假设识别",
              "scoring_hint": "高分：列出并解释至少4项约束（如摄像头固定、雾层均匀、需像素→距映射、昼夜不同度量）；中分：列出2–3项；低分：仅笼统提及视频即可。"
            },
            {
              "sub_criteria": "识别关键子模块需求（预处理、检测、距映、拟合、平滑）",
              "description": "能识别并拆解为预处理(曝光/伽玛)、语义检测与跟踪、像素→距标定、对比/边缘特征提取、β拟合与时序平滑等模块。",
              "score": 25,
              "evaluation_focus": "流程拆解",
              "scoring_hint": "高分：列出并说明至少5个模块并其输入输出关系；中分：列出3–4个模块；低分：模块缺失或流程混乱。"
            },
            {
              "sub_criteria": "识别不确定度与诊断标志的重要性",
              "description": "强调置信区间、检测计数门限、曝光饱和与非均匀雾时的低置信/不可用标志需要输出。",
              "score": 20,
              "evaluation_focus": "风险控制",
              "scoring_hint": "高分：给出量化诊断规则（如参照数<3触发低置信）；中分：提出诊断项但无阈值；低分：忽略不确定度或诊断。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述核心目标：输出按帧/分钟MOR̂与置信度",
              "description": "用简洁句子复述任务要求：从单目监控视频估计β̂并转换为MOR̂，按时序输出并含置信区间与诊断码。",
              "score": 40,
              "evaluation_focus": "目标复述",
              "scoring_hint": "高分：准确复述并包含β→MOR公式与置信度输出；中分：复述MOR时序但遗漏置信度或公式；低分：复述模糊或与原任务不符。"
            },
            {
              "sub_criteria": "复述实现约束与昼夜模型差异",
              "description": "复述需适配昼夜：白天主用对比/边缘，夜间主用点光源模型并说明相应拟合形式（指数/逆平方式）。",
              "score": 30,
              "evaluation_focus": "细节把握",
              "scoring_hint": "高分：明确区分昼夜度量方法并写出拟合表达；中分：提及昼夜差异但无拟合表达；低分：未提昼夜差异。"
            },
            {
              "sub_criteria": "复述验证与校准需求",
              "description": "指出需要半自动校准步骤（用已知距离标志物或车辆宽度标定d(y)与K0）并记录日志以便离线验证。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：给出校准方法与所需最小标定点数；中分：提及需校准但无实施细节；低分：忽略校准。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "显式假设：摄像头固定与视域雾层近似均匀",
              "description": "明确写出并解释摄像头固定和短时视域横向雾密度近似均匀的理由及其对β估计的影响。",
              "score": 25,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：说明假设必要性并给出检测违背的诊断方法；中分：说明假设但无违背检测；低分：未说明或冲突。"
            },
            {
              "sub_criteria": "辐射传输与衰减模型假设（Koschmieder形式）",
              "description": "采用指数衰减模型ln K(d)=ln K0−β d或夜间Iobs≈I0/d^2·exp(−β d)并说明其局限。",
              "score": 25,
              "evaluation_focus": "数学假设",
              "scoring_hint": "高分：写出公式并讨论K0为隐变量及晴时初始化；中分：给公式无局限讨论；低分：未给出或给出错误公式。"
            },
            {
              "sub_criteria": "参照对象同类亮度可聚合的假设",
              "description": "假定同类对象（车灯/牌面/护栏）在短时内亮度可视为可比或通过加权聚合消除差异，并说明权重策略。",
              "score": 25,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：给出权重准则（置信度/面积/对比稳定性）；中分：说明聚合但无权重细节；低分：无聚合策略。"
            },
            {
              "sub_criteria": "时序平稳与短时平滑假设",
              "description": "假设β在短时间窗口内可通过卡尔曼或EWM平滑，并说明窗口/时常数选择依据。",
              "score": 25,
              "evaluation_focus": "时序假设",
              "scoring_hint": "高分：给出平滑器类型与参数选取原则并说明对响应延迟的影响；中分：提出平滑但无参数；低分：未考虑时序平滑。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建像素→距离映射 d(y) 并说明标定策略",
              "description": "构造并说明经验函数d(y)=a/(y−y0)+b或单应/深度估计标定方法，含缺参时的尺度推断方案。",
              "score": 20,
              "evaluation_focus": "几何标定",
              "scoring_hint": "高分：给出标定方程、所需标定点数与拟合误差评估；中分：给出方程但无标定细节；低分：未提供距离映射方案。"
            },
            {
              "sub_criteria": "设计亮度/对比/边缘与暗通道等可见性特征",
              "description": "提出白天以对比K或边缘能量为主、夜间以点光源强度/光晕为主的特征集合，并说明计算窗口与鲁棒统计量。",
              "score": 20,
              "evaluation_focus": "特征工程",
              "scoring_hint": "高分：列出具体特征和计算公式（例如K、边缘谱、暗通道）并给出窗口大小建议；中分：列出特征但无计算细节；低分：特征过泛或缺失。"
            },
            {
              "sub_criteria": "β 拟合模型：对数线性回归与权重策略",
              "description": "基于ln K(d)=ln K0−β d构建加权最小二乘或Huber回归，并说明权重与K0初始化策略。",
              "score": 20,
              "evaluation_focus": "拟合方法",
              "scoring_hint": "高分：给出拟合目标函数、权重公式（置信度/面积/距离分布）与K0估计方法；中分：提出回归但权重或K0模糊；低分：无加权或鲁棒性考虑。"
            },
            {
              "sub_criteria": "夜间点光源模型与昼夜切换逻辑",
              "description": "构建夜间Iobs≈I0/d^2·exp(−β d)拟合流程，并给出昼夜判定准则与模型切换策略。",
              "score": 20,
              "evaluation_focus": "昼夜模型",
              "scoring_hint": "高分：给出判定阈（例如平均亮度或时间段）且实现切换与校准；中分：提出夜间模型但切换模糊；低分：忽视夜间/昼夜切换。"
            },
            {
              "sub_criteria": "时序稳健化：卡尔曼/EMA 与不确定度传播设计",
              "description": "设计卡尔曼滤波或指数加权平均器以平滑β̂时序，并说明如何从拟合残差与样本数构造置信区间。",
              "score": 20,
              "evaluation_focus": "时序滤波",
              "scoring_hint": "高分：给出滤波器状态方程、噪声假设与置信区间传播公式；中分：提出滤波但无误差传播；低分：未设计时序稳健化。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "统计求解与鲁棒估计实现（WLS/Huber/RANSAC）",
              "description": "实现加权最小二乘或Huber回归并提供残差诊断与异常点剔除策略，用于估计β和lnK0。",
              "score": 25,
              "evaluation_focus": "算法鲁棒性",
              "scoring_hint": "高分：实现并报告拟合残差分布、异方差检验与异常点数；中分：使用鲁棒方法但无诊断；低分：仅普通最小二乘且无异常处理。"
            },
            {
              "sub_criteria": "尺度标定与最小样本数的识别",
              "description": "实现像素→距标定的拟合求解并明确最小可靠参照对象数目与其对β不确定度的影响。",
              "score": 25,
              "evaluation_focus": "标定可靠性",
              "scoring_hint": "高分：给出标定残差与当参照数<阈值时触发低置信告警（如<3）；中分：提到最小样本但无阈值；低分：无样本数阈值。"
            },
            {
              "sub_criteria": "实时性与计算复杂度控制",
              "description": "说明帧级或分钟级实现的计算预算、并发策略或降频方案以满足在线运行需求。",
              "score": 25,
              "evaluation_focus": "工程化实现",
              "scoring_hint": "高分：给出每帧平均时延或帧率能达成指标（如≤1s/帧或≤分钟级）；中分：提出降频方案但无时延测量；低分：忽略实时性。"
            },
            {
              "sub_criteria": "不确定度量化与置信区间计算",
              "description": "通过拟合标准误差、样本方差与时间平滑传播合成每时刻置信区间并给出覆盖率评估流程。",
              "score": 25,
              "evaluation_focus": "不确定度估计",
              "scoring_hint": "高分：提供置信带计算方法并在校准集上报告覆盖率（例如95%覆盖率）；中分：提供误差来源描述但无覆盖率评估；低分：无置信区间。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化与可复现的代码结构与接口",
              "description": "代码按预处理、检测/跟踪、距映/标定、特征提取、β拟合、时序滤波、输出模块划分，并提供配置文件与随机种子。",
              "score": 25,
              "evaluation_focus": "代码质量",
              "scoring_hint": "高分：提供模块化代码、README、配置示例与种子；中分：代码可运行但耦合或缺少说明；低分：代码不可复现或无说明。"
            },
            {
              "sub_criteria": "使用推荐工具与库并提供依赖清单",
              "description": "实现使用 OpenCV、PyTorch/Detectron2/MiDaS、NumPy/SciPy，并提供requirements.txt或环境说明与版本。",
              "score": 25,
              "evaluation_focus": "环境可重现",
              "scoring_hint": "高分：提供完整依赖清单与可复现环境脚本；中分：列出主要库但无版本或脚本；低分：未列依赖。"
            },
            {
              "sub_criteria": "日志、异常处理与诊断输出",
              "description": "代码实现需记录每帧诊断（参照计数、曝光/饱和标志、标定状态）、并在异常时返回诊断码与低置信标志。",
              "score": 25,
              "evaluation_focus": "可靠性/日志",
              "scoring_hint": "高分：完整日志与诊断码并示例日志；中分：有部分日志但不完整；低分：无日志与诊断。"
            },
            {
              "sub_criteria": "测试与示例复现（示例视频与单元测试）",
              "description": "提供至少一个示例运行脚本并包含关键单元测试或端到端示例以验证主要模块功能。",
              "score": 25,
              "evaluation_focus": "可验证性",
              "scoring_hint": "高分：包含端到端示例数据与单元测试能通过；中分：仅示例脚本无测试；低分：无示例或测试。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "时序可视化：MOR̂/β̂ 曲线与置信带",
              "description": "绘制并解释MOR̂与β̂随时间曲线，包含置信区间、参照计数与诊断码叠加，区分昼夜段落。",
              "score": 25,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：图表清晰标注置信带与诊断事件并支持交互或导出；中分：提供静态图但信息不全；低分：无置信带或诊断叠加。"
            },
            {
              "sub_criteria": "一致性与自洽性检验（空间/时间）",
              "description": "通过前后景对比、不同距离段β一致性、平滑残差检验及参照对象子集稳定性来验证估计自洽性。",
              "score": 25,
              "evaluation_focus": "自洽检验",
              "scoring_hint": "高分：提供多种自洽检验并给出定量结果（残差统计、子集差异）；中分：提供1–2项检验；低分：无自洽检验。"
            },
            {
              "sub_criteria": "对缺地面标签情形的替代验证策略",
              "description": "提出无AMOS标签时的验证方法：人工标定帧、与车辆速度/车距间接比对或利用历史晴雾基线检验K0稳定性。",
              "score": 25,
              "evaluation_focus": "替代验证",
              "scoring_hint": "高分：给出至少两种替代验证并提供实施步骤；中分：提出方法但细节缺失；低分：未讨论无标签验证。"
            },
            {
              "sub_criteria": "敏感性分析与局限说明",
              "description": "对关键假设（摄像头固定、雾均匀、K0估计、距离映射误差）进行敏感性实验并明确算法局限与失效场景。",
              "score": 25,
              "evaluation_focus": "稳健性分析",
              "scoring_hint": "高分：给出量化敏感性结果与建议缓解措施；中分：讨论影响但无量化；低分：忽视敏感性或局限。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务 4（雾演化动力学建模、短期概率预测与“何时散去”时间估计）要求在给定经预处理并对齐的能见度时间序列（可用衰减系数 β(t) 或直接的 MOR(t)）以及同步的近地面气象驱动变量（例如温度、露点/露点差 ΔT、相对湿度、风速与风向分量、气压、辐射/昼夜指示等）和可选的短期气象预报输入下，构建一套既能做实时同化又能给出带不确定度概率预报的数学—统计框架，用以预测未来短时（分钟到数小时）内能见度的演变并估计达到或超过指定阈值（例如 MOR = 150 m）的时间分布；具体工作范围包括：1）数据准备与质量控制——对输入序列做时间戳对齐、异常值检测与短期平滑，明确观测误差模型（观测方差随能见度或采样数变化）；2）模型建构——并行建立（A）确定性/经验动力学形式 dβ/dt = F(β, M(t); θ)（F 可由物理启发的生成/消散项参数化）用于快速点值预测与情景分析，以及（B）随机状态空间或 SDE 模型（例如带驱动项的 Ornstein–Uhlenbeck 形式 dβ = −α[β−β_eq(M(t))]dt + σ dW），其中 β_eq(·) 可由回归/GAM/树模型拟合得到；3）参数估计与同化方法——在历史数据上用最大似然、卡尔曼/扩展/无迹卡尔曼滤波或 EM 算法估计模型参数，必要时采用贝叶斯方法（MCMC／变分推断）得到后验分布，运行时用卡尔曼滤波、Ensemble Kalman 或粒子滤波将实时观测（视频或地面估计）同化进模型以校正状态与不确定度；4）预测与首次到达时间计算——基于估计参数和当前状态，用蒙特卡洛路径模拟（采样模型噪声与若干气象预报情景）并前向积分得到 β(t) 与对应 MOR(t) 的若干样本路径，统计首次满足阈值条件的 hitting-time 分布（含期望、分位数与置信区间），并输出阈值发生概率随时间变化曲线；5）不确定度量化与敏感性分析——报告预测置信区间、事件概率（如在未来 T 小时内 MOR≤150m 的概率）、Brier/CRPS 等校准评分，采用全局（Sobol）或局部灵敏度分析量化驱动变量与参数对到达时间的贡献；6）验证与性能指标——通过时间块交叉验证评估短期预报的 MAE/RMSE、事件预报的检测率/误报率及覆盖率，并用创新序列诊断滤波器一致性；7）在线部署与运维策略——明确同化频率、预测时窗与计算预算，设定在线诊断（如滤波增益、残差自相关或观测创新异常）以触发再校准或模型切换，并提供决策输出（概率化散雾时间、推荐采取措施的置信度与提前量）；以及8）实现与工具建议——建议使用 Python 生态（numpy/scipy、statsmodels、filterpy/pykalman、pymc3/pyro 或 stan、SALib、multiprocessing/numba 加速蒙特卡洛），并在实现文档中明确输入格式、接口、所需计算资源与性能阈值。该子任务的最终交付物应包含：可复现的模型代码与训练/估计脚本、实时同化与蒙特卡洛预测流程、到达阈值的概率时间分布与置信区间、关键性能指标报告及用于在线监控与触发再训练的诊断规则。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于β(t)/MOR(t)与同步气象驱动，构建并同化随机状态空间/经验动力学模型以预测短时能见度演变并评估达到阈值（如 MOR=150m）的首次到达时间分布与不确定度",
          "expected_output": "未来分钟到数小时的β(t)/MOR(t)概率预报轨迹、阈值（MOR=150m）首次到达时间分布（期望/分位数/置信区间）、事件概率随时间曲线、MAE/RMSE与Brier/CRPS等评估表、滤波/同化诊断图、可复现代码与模型文件",
          "key_inputs_constraints": "输入：对齐且质控后的β(t)或MOR(t)时间序列；同步气象驱动M(t)：TEMP、RH/ΔT、WS/WD分量、P、昼夜/辐射指示；可选短期预报场。约束：分钟级时间步，缺测短期可插补、长缺测标记；观测误差随能见度变化；同化需时间顺序一致，禁止时序泄露；阈值默认MOR=150m可配置",
          "modeling_type": "预测+仿真+拟合",
          "role_in_pipeline": "作为雾演化的在线预测与决策输出环节，依赖前序子任务1的数据工程与目标变量变换、子任务2/3的能见度估计作为观测输入；其输出为后续运营决策与告警的直接依据",
          "assumptions": "摄像头/站点状态稳定；雾层在站点尺度近似均匀；分钟步长可近似连续时间离散化；驱动场短期预报可视为外生输入；阈值以MOR=150m为主可扩展"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "阈值预测与首次到达时间（MOR=150m）界定",
              "description": "是否明确目标为预测能见度阈值事件的首次到达时间分布而非仅点值MOR轨迹，并指明阈值可配置（默认150m）。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰阐述hitting-time定义、阈值可配置与结果分布输出；中分：仅给出到达时间点估计；低分：忽略阈值事件或混同点值预测。"
            },
            {
              "sub_criteria": "观测同化需求与时序泄露风险识别",
              "description": "是否指出需用卡尔曼/粒子等滤波将β(t)/MOR(t)实时同化，并避免使用未来信息造成时序泄露。",
              "score": 25,
              "evaluation_focus": "风险识别",
              "scoring_hint": "高分：明确同化频率、创新序列诊断与避免泄露措施；中分：提同化但未给诊断；低分：无同化或训练/验证混用未来信息。"
            },
            {
              "sub_criteria": "不确定度与概率预报需求",
              "description": "是否将CRPS/Brier、覆盖率等作为核心目标，强调输出置信区间与事件概率曲线。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：列出CRPS/Brier与校准图；中分：仅置信区间无校准；低分：仅点预测无不确定度。"
            },
            {
              "sub_criteria": "驱动变量M(t)与可选预报的角色",
              "description": "是否明确温度、ΔT、RH、WS/WD、P、昼夜作为外生驱动对β_eq或F的影响，并区分可选短期预报场。",
              "score": 20,
              "evaluation_focus": "要素识别",
              "scoring_hint": "高分：列出主要要素并说明进入β_eq或F；中分：泛泛列举；低分：未说明驱动或错误使用。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "β(t)/MOR(t)双域表达与转换",
              "description": "是否准确复述以β建模、MOR输出，含β=−ln(0.05)/MOR与双向转换在预测中的使用。",
              "score": 30,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：给出公式与数值稳定性考虑；中分：仅文字说明；低分：混淆β与MOR或未说明转换。"
            },
            {
              "sub_criteria": "模型双轨：确定性F与随机SDE/状态空间",
              "description": "是否复述并区分dβ/dt=F(β,M;θ)与SDE/状态空间（如OU趋向β_eq(M)）两类模型的用途。",
              "score": 35,
              "evaluation_focus": "模型框架",
              "scoring_hint": "高分：阐述两者互补及场景；中分：只提一种；低分：未提或表述错误。"
            },
            {
              "sub_criteria": "预测对象与时窗",
              "description": "是否明确分钟到数小时滚动预测、输出路径集合与事件概率随时间曲线。",
              "score": 35,
              "evaluation_focus": "任务界定",
              "scoring_hint": "高分：给具体时窗与滚动策略；中分：模糊时间尺度；低分：未界定时窗或与数据分辨率不匹配。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "观测误差模型与异方差",
              "description": "是否假设并刻画观测噪声随能见度/样本数变化（如低能见度方差更大），并在滤波中使用R_t。",
              "score": 30,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：给出R_t函数或估计方法；中分：定性描述；低分：忽略异方差。"
            },
            {
              "sub_criteria": "平稳性/均值回复到β_eq(M)",
              "description": "是否提出β围绕β_eq(M)的均值回复假设，并说明β_eq来源（回归/GAM/树）。",
              "score": 25,
              "evaluation_focus": "机理假设",
              "scoring_hint": "高分：定义β_eq与拟合计划；中分：仅口头；低分：无均值回复或不合理。"
            },
            {
              "sub_criteria": "驱动与噪声独立性与分布",
              "description": "是否说明过程噪声白噪声/高斯或备选分布，及与M(t)的独立性或条件异方差。",
              "score": 20,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出σ或Q_t结构；中分：笼统高斯；低分：完全未设定。"
            },
            {
              "sub_criteria": "阈值事件定义与处置（边界/不可用）",
              "description": "是否规定数据缺失/异常时的事件判定、左/右删失等处理以保证hitting-time计算稳健。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：明确删失与不可用标记；中分：简单跳过；低分：导致偏差未说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "确定性动力学F(β,M;θ)的物理参数化",
              "description": "是否给出雾生成/消散项（如与ΔT、RH、WS相关）的F结构与可解释参数θ。",
              "score": 25,
              "evaluation_focus": "模型设计",
              "scoring_hint": "高分：明确函数形式与符号约束；中分：仅口头关系；低分：无F或不可解释。"
            },
            {
              "sub_criteria": "SDE/状态空间模型与β_eq(M)拟合",
              "description": "是否构建dβ=−α[β−β_eq(M)]dt+σ dW，说明β_eq用GAM/树回归并集成到滤波。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：完整SDE与离散化；中分：缺少β_eq细节；低分：形式错误。"
            },
            {
              "sub_criteria": "观测方程与同化策略",
              "description": "是否给出观测方程y_t=h(x_t)+ε_t（β或MOR）与EKF/UKF/EnKF/粒子滤波选择依据。",
              "score": 25,
              "evaluation_focus": "同化设计",
              "scoring_hint": "高分：匹配非线性程度阐述选择；中分：泛指卡尔曼；低分：无观测方程。"
            },
            {
              "sub_criteria": "预测路径模拟与阈值概率计算",
              "description": "是否设计蒙特卡洛前向积分、采样噪声与驱动情景，并统计首次到达时间分布与概率曲线。",
              "score": 20,
              "evaluation_focus": "仿真实现",
              "scoring_hint": "高分：说明样本数、时间步与数值稳定性；中分：仅提模拟；低分：未给概率计算。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "参数估计（MLE/EM/贝叶斯）与不确定度",
              "description": "是否用MLE/EM或MCMC/VI估计α,σ,θ及β_eq参数并给出置信区间/后验。",
              "score": 30,
              "evaluation_focus": "参数估计",
              "scoring_hint": "高分：报告标准误/后验区间；中分：仅点估计；低分：未说明方法。"
            },
            {
              "sub_criteria": "滤波/平滑实现与一致性诊断",
              "description": "是否实现EKF/UKF/EnKF/粒子滤波，提供创新序列均值≈0、方差检验与残差自相关检验。",
              "score": 30,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：提供创新统计与 Ljung–Box/ACF；中分：仅展示轨迹；低分：无诊断。"
            },
            {
              "sub_criteria": "数值稳定与时间步选择",
              "description": "是否处理SDE离散化（Euler–Maruyama）、分钟步长设置、裁剪负β/极端MOR并保持稳定。",
              "score": 20,
              "evaluation_focus": "工程可靠性",
              "scoring_hint": "高分：说明裁剪/变步长；中分：仅固定步长；低分：出现数值爆炸。"
            },
            {
              "sub_criteria": "时间块交叉验证与滚动起点评估",
              "description": "是否采用按事件/月份留出、滚动起点的预测评估以避免时序泄露。",
              "score": 20,
              "evaluation_focus": "验证方案",
              "scoring_hint": "高分：明确切分与重复次数；中分：简单holdout；低分：随机切分。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "同化与蒙特卡洛流水线复现性",
              "description": "是否提供可复现脚本与随机种子，包含滤波同化与前向模拟一体化流程。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：一键运行生成预测与图表；中分：多步手工；低分：无法复现。"
            },
            {
              "sub_criteria": "工具选型与性能",
              "description": "是否合理使用numpy/scipy/statsmodels/filterpy/pymc等，并说明并行/numba加速配置。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：提供并行或向量化；中分：可运行但慢；低分：低效或依赖缺失。"
            },
            {
              "sub_criteria": "输入输出接口与配置化",
              "description": "是否定义清晰的输入格式（β/MOR、M(t)）、阈值与时窗可配置、输出CSV/JSON含置信区间与诊断码。",
              "score": 25,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：参数化良好、Schema文档；中分：部分硬编码；低分：不可配置。"
            },
            {
              "sub_criteria": "异常处理与在线监控",
              "description": "是否实现缺测、异常观测、创新异常告警、滤波增益阈值触发再校准。",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：有日志与告警；中分：简单try/except；低分：异常导致崩溃或静默失败。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "点值与概率评估（MAE/RMSE, CRPS/Brier）",
              "description": "是否同时报告β/MOR点预测误差与概率评分（CRPS/Brier）及低能见度子域表现。",
              "score": 30,
              "evaluation_focus": "结果评价",
              "scoring_hint": "高分：含分位数覆盖率与子域指标；中分：仅MAE/RMSE；低分：无量化评估。"
            },
            {
              "sub_criteria": "首次到达时间分布与置信区间解释",
              "description": "是否给出MOR=150m的到达时间分布、期望/5-95%区间，并解释业务含义与不确定度来源。",
              "score": 25,
              "evaluation_focus": "解释能力",
              "scoring_hint": "高分：图表+文字解读；中分：仅数值；低分：未给或误解。"
            },
            {
              "sub_criteria": "校准与可靠性图",
              "description": "是否提供事件概率随时间的校准/可靠性曲线与覆盖率检验，评述过/欠置信问题。",
              "score": 20,
              "evaluation_focus": "校准分析",
              "scoring_hint": "高分：包含可靠性图与PIT/覆盖率；中分：粗略比较；低分：无校准分析。"
            },
            {
              "sub_criteria": "敏感性分析与情景分析",
              "description": "是否进行Sobol/局部敏感性，量化M(t)对到达时间的贡献；并展示不同风速/ΔT情景的散雾时间变化。",
              "score": 25,
              "evaluation_focus": "洞察力",
              "scoring_hint": "高分：定量贡献与情景图；中分：定性描述；低分：无分析。"
            }
          ]
        }
      }
    }
  }
}