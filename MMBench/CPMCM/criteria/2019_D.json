{
  "task_id": "2019_D",
  "problem": "在上述背景下，请根据附件（3个数据文件，每个数据文件为同一辆车在不同时间段内所采集的数据）所提供的某城市轻型汽车实际道路行驶采集的数据（采样频率1Hz），构建一条能体现参与数据采集汽车行驶特征的汽车行驶工况曲线（1200-1300秒），该曲线所体现的汽车运动特征（如平均速度、平均加速度等）能代表所采集数据源的相应特征，两者间的误差越小，说明所构建的汽车行驶工况的代表性越好。\n\n三、解决的问题\n\n1.数据预处理\n\n由汽车行驶数据的采集设备直接记录的原始采集数据往往会包含一些不良数据值，不良数据主要包括几个类型：\n\n由于高层建筑覆盖或过隧道等，GPS信号丢失，造成所提供数据中的时间不连续；\n\n汽车加、减速度异常的数据（普通轿车一般情况下：0至100km/h的加速时间大于7秒，紧急刹车最大减速度在7.5~8 $m/s^2$）；\n\n长期停车（如停车不熄火等候人、停车熄火了但采集设备仍在运行等）所采集的异常数据。\n\n长时间堵车、断断续续低速行驶情况（最高车速小于10km/h）,通常可按怠速情况处理。\n\n一般认为怠速时间超过180秒为异常情况，怠速最长时间可按180秒处理。\n\n请设计合理的方法将上述不良数据进行预处理，并给出各文件数据经处理后的记录数。\n\n2.运动学片段的提取\n\n运动学片段是指汽车从怠速状态开始至下一个怠速状态开始之间的车速区间，如图3所示（基于运动学片段构建汽车行驶工况曲线是日前最常用的方法之一，但并不是必须的步骤，有些构建汽车行驶工况曲线的方法并不需要进行运动学片段划分和提取）。请设计合理的方法，将上述经处理后的数据划分为多个运动学片段，并给出各数据文件最终得到的运动学片段数量。\n\n3. 汽车行驶工况的构建\n\n请根据上述经处理后的数据，构建一条能体现参与数据采集汽车行驶特征的汽车行驶工况曲线（1200-1300秒），该曲线的汽车运动特征能代表所采集数据源（经处理后的数据）的相应特征，两者间的误差越小，说明所构建的汽车行驶工况的代表性越好。要求：\n\n（1）科学、有效的构建方法（数学模型或算法，特别鼓励创新方法，如果采用已有的方法，必须注明来源）；\n\n（2）合理的汽车运动特征评估体系（至少包含但不限于以下指标：平均速度（km/h）、平均行驶速度（km/h）、平均加速度（m/）、平均减速度（m/）、怠速时间比（%）、加速时间比（%）、减速时间比（%）、速度标准差（km/h）、加速度标准差（m/）等）；\n\n（3）按照你们所构建的汽车行驶工况及汽车运动特征评估体系，分别计算出汽车行驶工况与该城市所采集数据源（经处理后的数据）的各指标（运动特征）值，并说明你们所构建的汽车行驶工况的合理性。部分名词解释\n\n\\textbf{怠速}：汽车停止运动，但发动机保持最低转速运转的连续过程。 \n\n\\textbf{加速}：汽车加速度大于 $0.1 m/s^2$ 的连续过程。 \n\n\\textbf{减速}：汽车加速度小于 $-0.1 m/s^2$ 的连续过程。 \n\n\\textbf{巡航/匀速}：汽车加速度的绝对值小于 $0.1 m/s^2$ 非怠速的连续过程。 \n\n\\textbf{平均速度}：一段时间周期内，汽车速度的算术平均值。 \n\n\\textbf{平均行驶速度}：汽车在行驶状态下汽车速度的算术平均值，即不包含汽车怠速状态。 \n\n\\textbf{怠速时间比}：一段时间周期内，怠速状态的累计时间长度占该时间周期总时间长度的百分比。 \n\n\\textbf{平均加速度}：汽车在加速状态下各单位时间（秒）加速度的算术平均值。 \n\n\\textbf{平均减速度}：汽车在减速状态下各单位时间（秒）减速度的算术平均值。 \n\n\\textbf{加速时间比}：一段时间周期内，处在加速状态的累计时间长度占该时间周期总时间长度的百分比。 \n\n\\textbf{减速时间比}：一段时间周期内，处在减速状态的累计时间长度占该时间周期总时间长度的百分比。 \n\n\\textbf{速度标准差}：一段时间周期内，汽车速度的标准差，即包括怠速状态。 \n\n\\textbf{加速度标准差}：一段时间周期内，处在加速状态的汽车加速度的标准差。",
  "subtask": {
    "1": {
      "subtask": "子任务1（数据预处理与异常检测）应明确定义其范围、目标与可复现的步骤：输入为三份原始 1 Hz Excel 表（每条记录至少含时间戳、GPS 速度（km/h）、经纬度及若干车载传感量如加速度/RPM/扭矩/瞬时油耗等），输出为每个文件若干“清洗后连续时序块”（CSV），每块包含时间序列（统一为 UTC 时间戳）、经时间对齐与插值后的速度（m/s）、基于滤波后的加速度（m/s^2）、以及每条记录的异常/怠速标识与断点日志；同时产出清洗统计（原始记录数、删除/插值/裁剪记录数、断点位置）。处理步骤与规则（可直接编码执行，推荐使用 Python + pandas/numpy + scipy.signal）：1）时间一致性检查：把时间戳解析为标准时间类型，若相邻记录时间差 Δt 与采样期 1 s 误差小于允许抖动阈值 τ_clock = 0.2 s，则按最近整秒对齐并保留；若 Δt ≤ Δt_interp_max = 5 s，标记为可线性插值缺失并在随后对所有变量（速度、经纬度、RPM 等）进行线性插值；若 Δt > 5 s 则在该处断开序列，作为不同连续块单独处理并记录断点。2）单位与基本校验：将 GPS 速度从 km/h 转为 m/s（v_m/s = v_km/h / 3.6）；剔除或修正显然不合理值：负速度设为 0（并记录），速度超过上限 v_max_phys = 120 m/s（≈432 km/h）或突变 Δv/Δt > 30 m/s^2 的样本视为传感器错误并标记为异常待修正。3）滤波降噪：对速度序列先使用 Savitzky–Golay 滤波器（窗口长度建议 7 或 9 点，二阶多项式）或可选的 4 阶 Butterworth 低通（截止频率约 0.3–0.5 Hz）以去除高频噪声，保存原始与滤波后版本以便审计。4）加速度估算与平滑：用中心差分 a(t) ≈ (v_f(t+1) − v_f(t−1)) / 2（m/s^2）计算瞬时加速度，随后用短窗中位数滤波（窗口 3–5 s）或再用 Savitzky–Golay（窗口 7、二阶）平滑以抑制差分噪声；任何 |a| > a_clip = 12 m/s^2（可配置）视为异常并以邻域中位数替代或插值修正，同时记录替换次数。5）怠速与长时低速处理：定义怠速阈值 v_idle = 1 km/h（≈0.2778 m/s）并要求连续持续至少 t_idle_min = 2 s 才认定为怠速；对于被认定的怠速区段如果持续时间 > 180 s，则在该区段内部按最长 180 s 裁剪或将其分割为多个不超过 180 s 的怠速段（并在统计输出中说明裁剪规则）；对持续的低速拥堵段（例如整段最大速度 vmax < 10 km/h）也应标记为“怠速/低速等效”并按相同裁剪/记录策略处理（可作为可选参数开启）。6）短段与碎片处理：为避免噪声导致的大量极短片段，设最小有效段长 L_min = 5 s；任何长度 < L_min 的连续块按邻接性优先与前/后块合并（若合并后仍 < L_min 则与最近邻合并），如合并不可行则标记并在输出中剔除。7）多变量对齐与异常检测：其它传感器通道（经纬度、RPM、油耗等）按时间戳与速度对齐，若插值用于速度则对这些通道同步线性插值；对 RPM/瞬时油耗等做基本范围校验（例如 RPM<0 或 > 10000 RPM 视为异常），并将这些异常同步标注到时间行。8）审计日志与可复现性：记录并输出每个文件的断点位置、所有插值区间、被替换/剔除点的索引及理由、所使用的所有参数（滤波窗、阈值、插值上限等），并保存中间产物（原始、对齐、滤波后速度序列与计算的加速度）以便复现与复核。该子任务的实施工具推荐 Python（pandas 用于读写与时序处理、numpy 进行数值运算、scipy.signal 实现滤波与 Savitzky–Golay），可选使用 pyproj 若需将经纬度转换为平面坐标用于位移校验；所有阈值应可配置并在处理报告中列出。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对三份原始1 Hz车辆Excel数据执行预处理与异常检测，构建可复现的数据清洗与分段流程并输出清洗后连续时序块与审计日志以评估与复核",
          "expected_output": "每文件若干CSV连续时序块（UTC时间戳、对齐插值后速度m/s、滤波后加速度m/s^2、异常/怠速标识），以及清洗统计与断点/插值/替换日志的报表与中间序列（原始/对齐/滤波）",
          "key_inputs_constraints": "输入：三份1 Hz Excel（时间戳、GPS速度km/h、经纬度、RPM/油耗等）；约束：τ_clock=0.2 s时间抖动阈值、Δt_interp_max=5 s插值上限、v_max_phys=120 m/s、|Δv/Δt|>30 m/s^2突变阈、Savitzky–Golay窗口7–9二阶或巴特沃斯0.3–0.5 Hz、a_clip=12 m/s^2、v_idle=1 km/h、t_idle_min=2 s、怠速最长180 s、L_min=5 s最短段；前置：可解析时间并统一到UTC，通道可线性插值",
          "modeling_type": "评价+拟合",
          "role_in_pipeline": "作为数据清洗与时序重建阶段，位于特征工程和工况构建前；前序依赖原始数据采集，后序依赖于清洗输出进行运动学片段提取与工况曲线构建"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "时间一致性检查与UTC对齐（τ_clock、Δt_interp_max）",
              "description": "能识别1 Hz采样的抖动与缺失，明确τ_clock=0.2 s内对齐、Δt≤5 s线性插值、Δt>5 s断点分块并记录断点位置。",
              "score": 30,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：清楚区分三类Δt并量化记录断点索引；中分：有对齐与断点但阈值不全；低分：未定义阈值或未处理断点。"
            },
            {
              "sub_criteria": "单位转换与物理约束（km/h→m/s、v_max_phys）",
              "description": "准确识别单位不一致风险，声明v_km/h/3.6转换与v_max_phys=120 m/s上限及负速归零处理。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：列出转换公式与上限并记录修正日志；中分：只做转换无上限；低分：缺失或错误转换。"
            },
            {
              "sub_criteria": "异常模式识别（Δv/Δt突变、传感器异常）",
              "description": "识别速度突变|Δv/Δt|>30 m/s^2、RPM/油耗越界等异常并区分替换与剔除策略。",
              "score": 25,
              "evaluation_focus": "异常识别",
              "scoring_hint": "高分：给出阈值与逐点标注策略；中分：只做简单阈值；低分：未识别或混淆异常类型。"
            },
            {
              "sub_criteria": "怠速/低速等效与最长180 s规则",
              "description": "识别v_idle=1 km/h且持续≥2 s为怠速，低速拥堵vmax<10 km/h等效处理，且执行≤180 s裁剪。",
              "score": 20,
              "evaluation_focus": "规则识别",
              "scoring_hint": "高分：同时覆盖怠速判定、拥堵等效与裁剪；中分：仅怠速无裁剪；低分：无清晰规则。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "核心目标复述（预处理与异常检测+可复现输出）",
              "description": "明确该子任务不构建工况曲线而是输出连续时序块、加速度、标识与审计日志。",
              "score": 30,
              "evaluation_focus": "目标对齐",
              "scoring_hint": "高分：精确罗列输出四要素与日志；中分：输出含糊；低分：偏离到建模训练等。"
            },
            {
              "sub_criteria": "流程复述（1–8步规则的次序与依赖）",
              "description": "准确复述时间→单位→滤波→加速度→怠速→短段→通道对齐→审计的流程顺序与依赖。",
              "score": 25,
              "evaluation_focus": "流程清晰",
              "scoring_hint": "高分：顺序正确且指出相互依赖；中分：步骤不全；低分：顺序错乱。"
            },
            {
              "sub_criteria": "参数可配置性与报告化",
              "description": "重述所有关键阈值可配置并需在报告中列出，含窗口/截止频率/阈值。",
              "score": 25,
              "evaluation_focus": "规范化",
              "scoring_hint": "高分：覆盖全部参数并指定默认；中分：部分参数；低分：硬编码未暴露。"
            },
            {
              "sub_criteria": "输入/输出数据结构与字段命名",
              "description": "清晰描述CSV字段（UTC、v_ms、a_ms2、flags）及中间产物命名与索引。",
              "score": 20,
              "evaluation_focus": "数据契约",
              "scoring_hint": "高分：字段含义、单位与类型齐全；中分：缺少单位；低分：未定义结构。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "时间戳解析与UTC统一假设",
              "description": "说明时区信息缺失时的UTC假设与夏令时处理，确保跨文件一致。",
              "score": 25,
              "evaluation_focus": "假设清晰",
              "scoring_hint": "高分：给出优先级与回退策略；中分：仅声明UTC；低分：未说明。"
            },
            {
              "sub_criteria": "线性插值适用性假设（Δt≤5 s）",
              "description": "阐明对速度/经纬度/RPM线性插值的合理性与超过上限断开假设。",
              "score": 25,
              "evaluation_focus": "合理性",
              "scoring_hint": "高分：区分可插值与不可插值变量；中分：一刀切插值；低分：无说明。"
            },
            {
              "sub_criteria": "噪声模型与滤波选择假设（SG或Butterworth）",
              "description": "说明噪声高频特性、所选窗口/截止频率与车辆动力学带宽匹配的假设。",
              "score": 25,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：给出频带理由；中分：仅列参数；低分：无依据选型。"
            },
            {
              "sub_criteria": "怠速/拥堵等效处理边界条件",
              "description": "说明v_idle、t_idle_min与拥堵vmax<10 km/h等效的适用边界与例外。",
              "score": 25,
              "evaluation_focus": "边界设定",
              "scoring_hint": "高分：列出异常场景处理；中分：仅给阈值；低分：缺失边界。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "时间重采样与断点分块算法（τ_clock、Δt_interp_max）",
              "description": "构建基于阈值的对齐与分段算法，生成连续块并保留断点索引。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出伪代码/流程并含边界；中分：口述算法；低分：无成体系方法。"
            },
            {
              "sub_criteria": "速度滤波与加速度估计（SG/Butter+中心差分）",
              "description": "先滤波速度再用中心差分与二次平滑，避免放大噪声，并定义a_clip替换策略。",
              "score": 30,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：说明先后顺序与参数；中分：仅差分无平滑；低分：直接原始速度求导。"
            },
            {
              "sub_criteria": "异常检测与修正策略（Δv/Δt、v_max_phys、a_clip）",
              "description": "模型化多阈值检测，区分替换（邻域中位数）与剔除，并记录原因。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：多通道一致性与优先级；中分：单阈值；低分：无修正或全删。"
            },
            {
              "sub_criteria": "怠速/低速段识别与≤180 s裁剪",
              "description": "在连续块内标注怠速、低速等效，执行最长180 s裁剪或分割并记录。",
              "score": 20,
              "evaluation_focus": "规则实现",
              "scoring_hint": "高分：实现分割与日志；中分：仅标注不裁剪；低分：未实现。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "参数寻优与敏感性（滤波窗、截止频率）",
              "description": "通过网格或启发式选择窗口长度7/9、截止0.3–0.5 Hz并报告对加速度方差的影响。",
              "score": 30,
              "evaluation_focus": "参数调优",
              "scoring_hint": "高分：对比至少两组参数并量化方差/峰值；中分：单组默认；低分：未报告。"
            },
            {
              "sub_criteria": "边界与缺失处理（Δt>5 s、短段L_min=5 s合并）",
              "description": "实现大缺口断开、短段合并优先级与不可合并剔除策略。",
              "score": 30,
              "evaluation_focus": "鲁棒实现",
              "scoring_hint": "高分：列出合并准则与示例；中分：部分实现；低分：忽略短段。"
            },
            {
              "sub_criteria": "多通道同步插值与校验（经纬度、RPM）",
              "description": "对速度插值时同步对其它通道插值并施加范围校验（如RPM 0–10000）。",
              "score": 40,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：一致时间索引与异常标注同步；中分：仅速度；低分：不同步导致错位。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现流水线（pandas/numpy/scipy.signal）",
              "description": "以函数/脚本组织1–8步，参数化阈值，固定随机性，保证同输入同输出。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：配置文件或参数对象；中分：散乱常量；低分：手工操作不可复现。"
            },
            {
              "sub_criteria": "时间对齐与插值实现（UTC索引、线性插值、断点日志）",
              "description": "正确解析时区、重采样到整秒、Δt≤5 s线性插值、Δt>5 s切块并输出断点CSV。",
              "score": 25,
              "evaluation_focus": "时序处理",
              "scoring_hint": "高分：含起止索引与时长；中分：仅切块；低分：对齐错误。"
            },
            {
              "sub_criteria": "滤波与导数计算（SG/Butter、中心差分）",
              "description": "实现SG或Butter滤波（参数可选），中心差分与后续平滑，防止边界伪影。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：处理边界与NaN；中分：简单diff；低分：不稳定震荡。"
            },
            {
              "sub_criteria": "审计日志与统计（删除/插值/裁剪/替换计数）",
              "description": "输出每文件统计与详细索引及理由，保存原始/对齐/滤波序列供审计。",
              "score": 20,
              "evaluation_focus": "可追溯性",
              "scoring_hint": "高分：结构化CSV/JSON日志；中分：仅总计数；低分：无日志。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "清洗效果量化（速度/加速度标准差、异常替换率）",
              "description": "比较滤波前后标准差、峰值加速度截断比例，评估降噪与稳健性。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：提供数值与阈值合理性讨论；中分：仅口述改善；低分：未量化。"
            },
            {
              "sub_criteria": "数据完整性与连续块质量（块数、长度分布、短段处理）",
              "description": "报告连续块数量、长度直方与被合并/剔除短段占比，验证L_min策略影响。",
              "score": 25,
              "evaluation_focus": "数据质量",
              "scoring_hint": "高分：有分布统计与图表描述；中分：仅总数；低分：无报告。"
            },
            {
              "sub_criteria": "怠速与低速段标注正确性（阈值命中与≤180 s裁剪验证）",
              "description": "统计怠速段次数、总时长、被裁剪次数，抽样核对阈值命中率。",
              "score": 25,
              "evaluation_focus": "规则验证",
              "scoring_hint": "高分：抽样比对原始序列截图/索引；中分：仅给汇总；低分：无验证。"
            },
            {
              "sub_criteria": "可复现性与参数敏感性小结",
              "description": "说明不同窗口/截止频率对加速度与段划分的影响，给出推荐默认值。",
              "score": 20,
              "evaluation_focus": "稳健结论",
              "scoring_hint": "高分：至少两组参数对比并解释；中分：主观推荐；低分：无讨论。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（运动学片段提取与特征化）描述：输入为子任务1输出的已清洗、时间对齐且按 1 Hz 采样的连续时序块（每条记录至少含时间戳、滤波后的速度 v(t) [m/s]、平滑后加速度 a(t) [m/s^2]，以及文件/段来源标识）；本子任务目标是按照“从一次怠速（或低速等效）开始到下一次怠速开始”为语义单元提取所有运动学片段，并为每一片段生成一套结构化、可用于相似度度量与下游聚类/合成的定量特征与标准化时序表示，同时输出片段级元数据与质量标志。实现步骤与技术细则如下：1) 参数与初始判定：配置并记录关键阈值（怠速速度阈 v_idle，默认 1 km/h ≈0.2778 m/s；怠速最短持续 t_idle_min，默认 2 s；最小有效片段长度 L_min，默认 5 s；加/减速阈 a_th_pos=0.1 m/s^2、a_th_neg=−0.1 m/s^2；低速等效阈 vmax_low=10 km/h，用于将长期低速片段标记为怠速等效），并假定任何超长怠速已在预处理阶段按规则裁剪或标注。2) 怠速区间定位与片段边界：在每个清洗好的连续时序块上检测所有满足 v(t) ≤ v_idle 且持续 ≥ t_idle_min 的怠速区间并记录其起止时间；将每对相邻怠速区间的起始点之间的时间区间定义为一个运动学片段 S_m（片段可定义为包括起始怠速的结束秒到下一怠速开始前的最后秒，具体端点包含策略需一致记录），若整段最大速度 vmax_segment < vmax_low 则同时标注为“低速/拥堵等效”。3) 最短片段处理与合并规则：若某片段 L_m < L_min，则尝试与时间上最近的邻接片段合并（优先合并前段或后段以保持“怠速到怠速”语义），若合并后仍 < L_min 则标记为“无效并剔除”；所有合并/剔除动作均在元数据中记录并可复现。4) 片段内部状态划分：对每一片段按每秒 a(t) 将时刻分类为加速（a>a_th_pos）、减速（a<a_th_neg）、巡航（|a|≤|a_th| 且 v>v_idle），并识别连续的加/减速事件（事件计数、每事件持续时长、峰值加速度/减速度），用于后续统计量计算。5) 片段特征计算（输出特征向量 F_m）：计算并保存至少以下定量指标——持续时间 L_m（s）；平均速度 μ_v = mean(v)（m/s）及以 km/h 表示；平均行驶速度 μ_v_drive（仅 v>v_idle 时的平均）；最大/最小速度 v_max,v_min；速度标准差 σ_v 与速度分位数（10/50/90%）；平均加速度 A_plus（仅在加速时段）、平均减速度 A_minus（仅减速时段，取绝对值）；加速时间比 p_acc = T_acc/L_m、减速时间比 p_dec、巡航时间比 p_cruise、怠速时间比 p_idle（仅片段内部若包含短怠速）；加速/减速事件计数 n_acc,n_dec；峰值加/减速度 max_a,max_dec; 加速度标准差（仅加速时段）σ_a_plus；速度能量相关指标（如 ∑ v^2·Δt、低频能量占比 E_low/E_total，通过对速度时序做短时傅里叶或离散小波分解得到）；以及若可用，关联动力变量的同步统计（平均 RPM、平均瞬时油耗等）；所有指标应给出单位与计算公式并写入元数据。6) 标准化时序表示与相似度准备：为支持时序相似度算法，保存两种时序副本：原始秒级速度与加速度序列（不裁剪），以及经时间归一化/插值到固定参考长度 L_ref 的标准化序列（L_ref 可设为片段长度中位数或用户设定，如 60 s；插值方法可选线性或三次样条并记录方法）；基于标准化序列可构建 DTW/欧氏距离矩阵（建议使用 fastdtw 或 tslearn 的 DTW），并输出距离矩阵文件以供后续聚类。7) 质量标志与异常注记：对每个片段记录质量标志（如含大量插值点、存在加速度异常替换次数、是否含低 GPS 置信度区间等）与来源文件/时间戳，便于后续筛选或加权。8) 存储格式与交付物：输出为（a）片段元数据表（CSV 或 Parquet），每行包含片段 ID、源文件/段、起止时间、L_m、F_m 各特征、质量标志、合并/剔除日志；（b）每片段的原始时序文件（每秒记录）和标准化时序文件（固定长度数组，存为 NumPy npy 或 CSV）；（c）全体片段的时序距离矩阵（NumPy/CSV）；（d）参数配置文件记录 v_idle,t_idle_min,L_min,a_th 等以保证可复现。9) 推荐工具与实现细节：建议使用 Python（pandas/numpy 处理时序与表格，scipy.signal 做插值与滤波，tslearn 或 fastdtw 计算 DTW 与 DBA），并在实现中对所有阈值与插值/合并策略进行参数化以便批量试验与审计。该子任务的完成标志是产生一套包含所有运动学片段、详尽特征向量、标准化时序表示及相似度矩阵的结构化数据包，且对每一步操作都有可重现的日志与参数说明。",
      "criteria": {
        "task_understanding": {
          "core_goal": "从清洗且1 Hz对齐的行驶数据中提取并分类运动学片段，构建片段特征向量与标准化时序用于后续聚类/相似度评估",
          "expected_output": "多文件结构化数据包：片段元数据表（CSV/Parquet，含片段ID、起止时间、L_m、F_m、质量标志、合并/剔除日志）、每片段原始与标准化时序（CSV/NPY）、全体片段DTW/欧氏距离矩阵（CSV/NPY）、参数配置文件（JSON/YAML）",
          "key_inputs_constraints": "输入：子任务1输出的连续时序块（UTC时间戳、v(t)[m/s]滤波后、a(t)[m/s^2]平滑后、来源标识；可含RPM/油耗/GPS质量）; 关键阈值：v_idle≈0.2778 m/s、t_idle_min≥2 s、L_min≥5 s、a_th_pos=0.1 m/s^2、a_th_neg=-0.1 m/s^2、vmax_low=10 km/h; 约束：片段边界需由怠速开始到下一次怠速开始；合并/剔除操作需可复现并记录；标准化时序需统一到L_ref并记录插值方法; 输出需含质量标志（插值比率、异常次数、GPS置信度）",
          "modeling_type": "分类+评价+拟合",
          "role_in_pipeline": "作为特征工程与数据制备环节，位于数据清洗对齐（子任务1）之后、聚类/合成驾驶循环构建（子任务3）之前；前序依赖清洗参数与断点日志，后序任务使用本子任务的特征、标准化时序与距离矩阵进行聚类/代表片段选择与合成",
          "assumptions": "若部分块含短时怠速未被子任务1裁剪，仍按本任务阈值识别；DTW计算可选fastdtw或tslearn，L_ref默认60 s且可配置"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确“怠速到下一次怠速开始”的片段定义与边界策略",
              "description": "是否准确识别v(t)≤v_idle且持续≥t_idle_min的怠速区间，并将相邻怠速起点之间定义为片段S_m；端点包含策略一致且记录于元数据",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：给出清晰端点规则与示例，边界含/不含说明并在元数据中记录；中分：能识别怠速但端点含义含糊；低分：未用怠速定义片段或混淆边界"
            },
            {
              "sub_criteria": "关键阈值配置与约束识别（v_idle,t_idle_min,L_min,a_th,vmax_low）",
              "description": "是否列出并参数化所有阈值、单位一致（m/s、m/s^2），并说明与子任务1的衔接",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：参数集中管理且写入配置文件；中分：阈值零散硬编码；低分：缺失关键阈值或单位混乱"
            },
            {
              "sub_criteria": "低速/拥堵等效与异常片段的识别需求",
              "description": "是否识别vmax_segment<vmax_low的片段并标注“低速/拥堵等效”，并考虑质量标志影响后续权重",
              "score": 20,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确标注并在元数据与质量标志中体现；中分：仅文本提及无实现；低分：未考虑此类标注"
            },
            {
              "sub_criteria": "输出面向下游聚类/相似度的可用性识别",
              "description": "是否明确需要标准化时序（L_ref）与DTW/欧氏距离矩阵作为下游输入",
              "score": 20,
              "evaluation_focus": "结果对接",
              "scoring_hint": "高分：给出L_ref与DTW实现选择；中分：只输出特征不含时序或距离；低分：未考虑下游需求"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "与子任务1衔接的输入复述（UTC、v/a已滤波、连续块）",
              "description": "是否准确复述输入为清洗后的连续时序块，包含UTC时间戳、v(t)[m/s]、a(t)[m/s^2]及来源标识",
              "score": 25,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：逐项列出并核对单位；中分：少数字段遗漏；低分：与前序不一致或误用原始未清洗数据"
            },
            {
              "sub_criteria": "输出复述（元数据表、时序文件、距离矩阵、配置）",
              "description": "是否完整罗列四类交付物并说明格式与内容字段",
              "score": 35,
              "evaluation_focus": "结果定义",
              "scoring_hint": "高分：指明CSV/Parquet/NPY与关键列名；中分：只列部分；低分：笼统描述无格式"
            },
            {
              "sub_criteria": "片段特征F_m的指标与单位复述",
              "description": "是否列出L_m、μ_v、μ_v_drive、v_max/v_min、σ_v、分位数、A_plus/A_minus、时间比分、n_acc/n_dec、max_a/max_dec、σ_a_plus、能量指标等并给出单位",
              "score": 40,
              "evaluation_focus": "指标清单",
              "scoring_hint": "高分：覆盖≥12项并含单位/计算口径；中分：覆盖6–11项或单位不全；低分：≤5项或缺少关键时间比/加减速统计"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "端点包含假设与一致性记录",
              "description": "明确片段是否包含起始怠速末秒/是否包含终止怠速前一秒，并在元数据记录",
              "score": 30,
              "evaluation_focus": "规范性",
              "scoring_hint": "高分：清晰阐述并代码实现一致；中分：阐述不清但实现固定；低分：实现前后不一致或未说明"
            },
            {
              "sub_criteria": "L_ref与插值方法假设",
              "description": "设定L_ref（如60 s或中位长度）与线性/三次样条插值选择及理由",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给参数可配置与合理理由；中分：固定值无依据；低分：未设定标准化时序"
            },
            {
              "sub_criteria": "事件阈值a_th_pos/a_th_neg与v_idle一致性假设",
              "description": "说明加/减速阈值与怠速阈值的关系与敏感性",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出敏感性或经验依据；中分：仅默认值；低分：阈值自相矛盾（如|a_th|过大导致全为巡航）"
            },
            {
              "sub_criteria": "低速等效与合并规则假设（L_min）",
              "description": "明确短片段合并优先级（前/后）与不可合并时剔除策略",
              "score": 15,
              "evaluation_focus": "规则设定",
              "scoring_hint": "高分：规则完备且有例外处理；中分：仅给优先级；低分：未定义或与怠速语义冲突"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "怠速区间检测与片段边界算法",
              "description": "基于v_idle与t_idle_min的运行长度编码/滑窗检测，稳定输出片段索引并处理相邻/重叠",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：线性时间实现并附边界单元测试思路；中分：能跑但边界含糊；低分：误分段频繁"
            },
            {
              "sub_criteria": "短片段合并/剔除机制（L_min）",
              "description": "实现与记录所有合并动作，保持“怠速到怠速”的语义",
              "score": 20,
              "evaluation_focus": "规则实现",
              "scoring_hint": "高分：合并后仍满足语义且日志完备；中分：合并未记录；低分：破坏片段语义"
            },
            {
              "sub_criteria": "片段内部状态分类与事件抽取",
              "description": "按a(t)阈值标注加速/减速/巡航，统计事件次数、持续时长与峰值",
              "score": 20,
              "evaluation_focus": "信号处理",
              "scoring_hint": "高分：去抖/最小事件长度处理；中分：有分类无事件统计；低分：分类与阈值不一致"
            },
            {
              "sub_criteria": "特征向量F_m设计与能量/频域指标",
              "description": "构建包含速度统计、时间比、加速度统计与∑v^2Δt、E_low/E_total等",
              "score": 15,
              "evaluation_focus": "特征工程",
              "scoring_hint": "高分：含频域比例并解释窗口/带宽；中分：仅时域；低分：特征过少"
            },
            {
              "sub_criteria": "标准化时序与相似度准备（DTW/欧氏）",
              "description": "输出原始与L_ref标准化时序，选择DTW实现并说明参数",
              "score": 15,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：记录带宽/窗口参数并生成距离矩阵；中分：仅保存标准化时序；低分：缺失"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "算法复杂度与可扩展性",
              "description": "对怠速检测/分段/事件抽取实现线性或近线性复杂度；DTW计算采用采样或带宽约束",
              "score": 35,
              "evaluation_focus": "效率优化",
              "scoring_hint": "高分：给出复杂度与加速策略（如Sakoe-Chiba带）；中分：全量DTW无约束；低分：算法不可扩展"
            },
            {
              "sub_criteria": "鲁棒性与边界条件处理",
              "description": "处理片段首尾与缺测、无怠速整段、极短拥堵段、全巡航段等情况",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：覆盖≥4类边界并有回退策略；中分：覆盖1–3类；低分：出现崩溃或错分段"
            },
            {
              "sub_criteria": "参数搜索与敏感性检查",
              "description": "对v_idle,t_idle_min,L_min,a_th进行网格或局部敏感性评估并记录影响",
              "score": 20,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：报告关键指标稳定区间；中分：仅单次设置；低分：未评估"
            },
            {
              "sub_criteria": "质量标志与权重生成",
              "description": "依据插值占比、异常替换次数、GPS置信度生成片段质量标志/权重",
              "score": 20,
              "evaluation_focus": "数据治理",
              "scoring_hint": "高分：量化阈值与权重公式；中分：布尔标志；低分：缺失质量标志"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "参数化与可复现性（配置文件+日志）",
              "description": "所有阈值/方法写入配置文件，输出断点、合并/剔除、插值与事件日志",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：版本化配置+种子+路径；中分：部分参数硬编码；低分：无法复现"
            },
            {
              "sub_criteria": "数据结构与I/O规范（CSV/Parquet/NPY）",
              "description": "统一列名与单位，批量输出元数据与时序文件，避免内存爆炸",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：分块/流式写入；中分：一次性内存聚合；低分：格式不一致或损坏"
            },
            {
              "sub_criteria": "信号处理实现正确性（阈值、单位、去抖）",
              "description": "确保单位换算与阈值一致、状态分类带去抖与最小事件长度",
              "score": 25,
              "evaluation_focus": "正确性",
              "scoring_hint": "高分：含单元测试或断言；中分：能跑但无校验；低分：单位/阈值错误"
            },
            {
              "sub_criteria": "相似度计算与性能（DTW/欧氏）",
              "description": "实现DTW/欧氏距离矩阵，控制复杂度（采样/带约束）并缓存",
              "score": 20,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：对大样本仍可完成；中分：小样本可跑；低分：超时/崩溃"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "统计摘要与分布合理性（L_m、μ_v、时间比）",
              "description": "给出片段长度、速度、加/减/巡航/怠速时间比分布，检查与常识一致性",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：含分位数/箱线图描述；中分：均值方差；低分：无统计或异常未解释"
            },
            {
              "sub_criteria": "质量标志影响分析",
              "description": "比较含高插值/异常片段与高质量片段的特征差异并提出筛选阈值",
              "score": 20,
              "evaluation_focus": "数据治理",
              "scoring_hint": "高分：量化差异并建议过滤；中分：定性描述；低分：忽视质量影响"
            },
            {
              "sub_criteria": "标准化时序与DTW距离有效性检验",
              "description": "展示若干片段标准化曲线与距离热力图，验证相似片段聚集性",
              "score": 25,
              "evaluation_focus": "模型验证",
              "scoring_hint": "高分：呈现清晰簇结构或近邻示例；中分：仅给距离统计；低分：未生成或无可解释性"
            },
            {
              "sub_criteria": "参数敏感性与稳健性结论",
              "description": "报告v_idle/t_idle_min/L_min变化对片段数与特征均值的影响并给推荐设置",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出变化曲线或表格；中分：口头描述；低分：未分析"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（代表片段生成与合成序列构建）描述：本子任务的目标是在已有的运动学片段集合（每片段包含秒级速度与加速度时序、片段长度及预计算特征与距离矩阵）基础上，构建一个用于拼接的有限代表段库并在总时长约束（1200–1300 s）下生成一条物理连续且在指定运动学指标上尽量逼近目标统计特征的合成工况时间序列；输出为：代表段库（每类的时序原型与原始 medoid）、合成的秒级速度与加速度序列、拼接/伸缩记录和质量日志。为实现该目标，按以下步骤精确执行：1) 聚类与代表段生成：以片段的时序相似度（DTW 或标准化欧氏距离）或特征向量为输入，采用 K‑medoids 或层次聚类（簇数由轮廓系数或 Calinski–Harabasz 指标自动选取）将片段分群；对每簇选取 medoid（保留真实时序）或用 DTW‑Barycenter Averaging (DBA) 计算时序原型 R_c(t)，并记录原型长度 L_c、统计特征与簇内样本分布。2) 受限时间伸缩：允许在合成阶段对代表段做时间伸缩 s∈[s_min,s_max]（建议默认 s_min=0.7, s_max=1.7，可配置），按时间伸缩规则生成 R_c^s(t)（插值到整秒）；显式应用解析关系 a_s(t) = (1/s)·a_orig(t/s) 以快速估算伸缩对加速度统计量的影响，并在伸缩后校验加速度峰值不超过物理上限 a_phys_max（例如 8–10 m/s^2）；若超限则拒绝该伸缩或通过局部平滑降低峰值。3) 序列生成策略（两条并行可选路径）：A. 概率模拟路径：从原始片段序列估计簇间转移矩阵 P，并按 P 随机构造类别序列，逐步抽取簇内实例或代表段（可结合伸缩）直至累计时长落入目标区间；B. 优化拼接路径（推荐用于精确匹配统计指标）：将合成问题表述为组合优化：决策变量为序列位置的类别索引 c_k 和伸缩因子 s_k，约束 Σ_k s_k L_{c_k} ∈ [1200,1300]；目标函数为带权多项式 J = Σ_q w_q·(M_construct,q − M_target,q)^2 + α·Σ_k D_cont(k,k+1) + β·Σ_k P_phys(k)，其中 M_construct,q 为合成序列在第 q 个评估指标（例如平均速度、怠速比、加速/减速时间比、速度/加速度标准差等）上的值，D_cont 为相邻片段拼接不连续性惩罚（例如末速度与次段首速度差平方、末加速度与次首加速度差平方，可扩展为窗口内均方差），P_phys 对违反加速度上限或产生负速度等物理不合理情况给出高罚；使用元启发式求解器（遗传算法、模拟退火或差分进化）在离散类别和连续伸缩因子空间中搜索，初始解可由按簇总时长占比的贪婪分配构建并做局部调优。4) 拼接与连续性处理：在每一拼接点采用短窗交叉淡入淡出（长度 w_c，建议 3–8 s）或带约束的三次 Hermite / C1 样条插值对两段速度曲线过渡，确保速度与一阶导数（加速度）在拼接窗口内平滑过渡并同步调整发动机工况关联变量（如存在）；交叉窗内优先保持原始形态并最小化瞬时能量失真。5) 可选策略与约束管理：允许在合成中直接使用原始片段实例以提高瞬态真实度；对代表段的重复次数或出现频率可受原始簇出现频率约束以避免单一事件的过度重复；对时间伸缩设置安全筛选以避免生成过多极端伸缩组合。6) 质量控制与输出记录：在生成候选合成后计算完整指标向量 M_construct，输出指标误差、速度/加速度 RMSE、各拼接处的连续性残差与物理违规日志；保存每一候选解的序列构成（c_k, s_k）、拼接窗位置及参数，以便回溯与再优化。7) 实现细节与工具建议：输入格式为包含每片段秒级时序与特征的结构化文件（CSV/NumPy），推荐使用 Python 生态实现：tslearn 或 fastdtw 做 DTW/DBA，scikit‑learn / pyclustering 做聚类，NumPy/SciPy 做插值与样条，DEAP 或 pygad 做遗传算法；对大规模搜索可并行化种群评估。通过上述精确的代表段库构建、受限伸缩及以连续性与物理约束为罚项的全局/概率生成策略，本子任务独立产出可直接用于后续拼接平滑与评价的、满足时长约束且在运动学统计量上可控制误差的合成行驶工况序列。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在1200–1300秒时长约束下优化合成轻型车行驶工况序列，使合成序列的运动学指标拟合并评估逼近目标统计特征，同时最小化拼接不连续与物理违规。",
          "expected_output": "代表段库（簇原型/medoid与长度）、合成的秒级速度/加速度序列（1200–1300 s）、拼接/伸缩记录（c_k,s_k,窗口参数）、质量与误差日志、参数配置与可复现实验记录。",
          "key_inputs_constraints": "输入：标准化时序与原始片段时序、片段长度L_m、特征向量F_m、DTW或欧氏距离矩阵；约束：总时长∈[1200,1300]、伸缩因子s∈[0.7,1.7]、加速度峰值≤a_phys_max（8–10 m/s^2）、拼接连续性C1平滑；前置：子任务2已完成片段提取与特征化且质量标志可用。",
          "modeling_type": "聚类+优化+仿真+拟合",
          "role_in_pipeline": "作为代表片段生成与合成阶段：前序依赖子任务2（运动学片段提取与特征化、距离矩阵）；后续连接子任务4（整段平滑与评价/对比实际统计、用于标定仿真或下游控制评估）。",
          "assumptions": "若未提供目标统计特征，则以经处理后的全体片段（加权按时长）作为目标分布；默认DTW为时序相似度，DBA可用；物理上限a_phys_max=9 m/s^2。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "时长约束识别（1200–1300 秒）与优化目标",
              "description": "是否明确总时长Σ s_k L_{c_k}需落入1200–1300 s，并将该硬约束纳入优化或生成流程。",
              "score": 30,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：实现硬约束或可行域搜索；中分：以软罚项控制且最终满足；低分：未约束或超出范围＞10 s。"
            },
            {
              "sub_criteria": "目标统计特征拟合与评估指标集合",
              "description": "是否点名并采用平均速度、怠速比、加/减速时间比、速度/加速度标准差等为M_target并在M_construct上评估误差。",
              "score": 30,
              "evaluation_focus": "指标定义",
              "scoring_hint": "高分：≥6项核心指标并给出公式；中分：3–5项无公式；低分：少于3项或未对应任务名词。"
            },
            {
              "sub_criteria": "拼接连续性与物理约束问题识别",
              "description": "是否识别末/首速度与加速度不连续需惩罚D_cont，并设置a_phys_max等物理约束与负速度禁止。",
              "score": 25,
              "evaluation_focus": "物理约束",
              "scoring_hint": "高分：同时考虑速度与加速度C1连续和峰值约束；中分：仅速度连续；低分：未考虑连续性或物理上限。"
            },
            {
              "sub_criteria": "代表段生成与伸缩对统计量影响",
              "description": "是否指出聚类（K‑medoids/DBA）与时间伸缩a_s(t)=(1/s)a_orig(t/s)对加速度统计的解析影响与限制。",
              "score": 15,
              "evaluation_focus": "问题要点",
              "scoring_hint": "高分：给出解析关系并用于筛选s；中分：提到伸缩不量化影响；低分：未提及代表段或伸缩。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "以DTW/特征聚类生成代表段库的复述准确性",
              "description": "是否复述通过DTW或特征向量聚类，选medoid/DBA为R_c(t)，并记录L_c与簇分布。",
              "score": 25,
              "evaluation_focus": "精确复述",
              "scoring_hint": "高分：同时包含DTW与DBA选择与簇评估指标；中分：仅述其一；低分：未涉及聚类代表段。"
            },
            {
              "sub_criteria": "优化拼接路径J函数要素复述",
              "description": "是否完整复述J=Σ w_q(M_construct−M_target)^2 + αD_cont + βP_phys的多目标形式与变量(c_k,s_k)。",
              "score": 35,
              "evaluation_focus": "目标函数",
              "scoring_hint": "高分：变量、权重、三项罚都明确；中分：缺少一项罚或权重；低分：未给出J或变量不清。"
            },
            {
              "sub_criteria": "概率模拟路径与转移矩阵P的表述",
              "description": "是否说明从原始片段估计簇转移矩阵P并按P采样类别序列以构造合成。",
              "score": 20,
              "evaluation_focus": "随机建模",
              "scoring_hint": "高分：含估计方法与停时策略；中分：仅提到采样无P；低分：未提概率路径。"
            },
            {
              "sub_criteria": "拼接平滑方法（交叉淡入/样条）的复述",
              "description": "是否说明w_c窗口、C1样条或Hermite插值，确保速度与加速度平滑过渡。",
              "score": 20,
              "evaluation_focus": "技术细节",
              "scoring_hint": "高分：含w_c范围和C1要求；中分：提到平滑无细节；低分：未提平滑。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "目标统计特征来源假设",
              "description": "当未显式给出M_target时，是否假设以全体片段（时长加权）作为目标并说明合理性与偏差风险。",
              "score": 30,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：说明加权与置信区间；中分：仅声明来源；低分：未说明来源。"
            },
            {
              "sub_criteria": "伸缩边界与物理上限假设",
              "description": "明确s∈[0.7,1.7]与a_phys_max范围（8–10 m/s^2），并给出超限处理（拒绝或平滑）。",
              "score": 30,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：含超限处理与验证；中分：仅给范围；低分：无范围或处理。"
            },
            {
              "sub_criteria": "连续性与窗口长度假设",
              "description": "设定拼接窗口w_c（3–8 s）与C1连续性要求，并说明对能量失真控制策略。",
              "score": 20,
              "evaluation_focus": "工程假设",
              "scoring_hint": "高分：含能量最小化或RMSE界；中分：仅给w_c；低分：未设窗口或连续性。"
            },
            {
              "sub_criteria": "聚类簇数选择假设",
              "description": "说明用轮廓系数或CH指标自动选簇数，并设定阈值或搜索范围。",
              "score": 20,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：含具体指标与范围；中分：仅提自动选择；低分：固定簇数无依据。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "代表段生成（K‑medoids/DBA）实现设计",
              "description": "给出使用DTW/欧氏距离、K‑medoids或DBA生成R_c(t)的流程及原型长度L_c与特征记录。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含距离、原型、簇评估；中分：缺评估或长度处理；低分：不成体系。"
            },
            {
              "sub_criteria": "伸缩模型与加速度解析关系",
              "description": "明确R_c^s(t)插值到秒级与a_s(t)=(1/s)a_orig(t/s)，并给出峰值校验与拒绝/平滑策略。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式+验证流程；中分：有伸缩无解析；低分：未处理加速度影响。"
            },
            {
              "sub_criteria": "优化目标J与权重设定",
              "description": "定义Σ_q w_q(M_construct−M_target)^2、αD_cont、βP_phys并解释权重含义或调参策略。",
              "score": 25,
              "evaluation_focus": "目标建模",
              "scoring_hint": "高分：含权重调参或归一化；中分：固定权重无依据；低分：目标不全或混乱。"
            },
            {
              "sub_criteria": "连续性惩罚D_cont与拼接平滑模型",
              "description": "构造末/首速度与加速度差平方或窗口内MSE，并用C1样条/交叉淡入实现。",
              "score": 25,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：窗口MSE+样条细节；中分：仅末/首差；低分：无惩罚或无实现思路。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "元启发式求解器设计与变量编码",
              "description": "在(c_k离散,s_k连续)空间用遗传算法/差分进化/模拟退火搜索并描述编码、变异/交叉与可行性修复。",
              "score": 35,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：含混合编码与可行域修复；中分：仅给算法名；低分：无可执行求解方案。"
            },
            {
              "sub_criteria": "初始解与局部调优",
              "description": "按簇总时长占比构造初始序列并做局部伸缩/替换调优以逼近Σ s_k L_{c_k}与M_target。",
              "score": 25,
              "evaluation_focus": "启发式",
              "scoring_hint": "高分：给出具体贪婪与微调步骤；中分：仅有初始解；低分：无初始或随机。"
            },
            {
              "sub_criteria": "概率模拟路径的对照实现",
              "description": "基于转移矩阵P的采样生成并用于候选解或对照基线，含停止与超时长调整策略。",
              "score": 20,
              "evaluation_focus": "基线构建",
              "scoring_hint": "高分：含回退/裁剪策略；中分：简单采样；低分：未实现概率路径。"
            },
            {
              "sub_criteria": "约束与罚项的可行性校验流程",
              "description": "在求解循环内校验时长、a_phys_max、负速度、连续性阈值，超限即高罚或修复。",
              "score": 20,
              "evaluation_focus": "可行性控制",
              "scoring_hint": "高分：多约束统一校验与日志；中分：部分校验；低分：无系统校验。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "DTW/DBA与聚类实现正确性",
              "description": "使用tslearn/fastdtw与K‑medoids/层次聚类复现代表段生成，含簇评估（轮廓/CH）。",
              "score": 25,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：API正确、评估充分；中分：能跑少评估；低分：实现错误或不可复现。"
            },
            {
              "sub_criteria": "伸缩与物理校验代码健壮性",
              "description": "插值到整秒、应用a_s解析、峰值超限处理（拒绝/平滑），并有单元测试样例。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含边界测试；中分：基本通过；低分：越界或未校验。"
            },
            {
              "sub_criteria": "优化器与约束处理代码",
              "description": "实现遗传/差分进化，含可行域修复、罚项、并行评估与随机种子控制。",
              "score": 30,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：并行+seed可重复；中分：单线程可跑；低分：不稳定或不可复现。"
            },
            {
              "sub_criteria": "输出制品与日志规范",
              "description": "导出代表段库、合成序列、拼接记录、误差与违规日志、参数配置（JSON/YAML）。",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：路径清晰、含版本与时间戳；中分：部分缺失；低分：输出混乱或缺失关键文件。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "统计指标拟合误差评估",
              "description": "对M_construct与M_target逐项给出误差（绝对/相对），加权总误差与是否达标阈值。",
              "score": 30,
              "evaluation_focus": "结果评估",
              "scoring_hint": "高分：≥6项且误差≤设定阈；中分：3–5项或误差偏大；低分：无量化或严重偏差。"
            },
            {
              "sub_criteria": "连续性与物理合理性检查",
              "description": "报告各拼接处速度/加速度残差、负速度次数、a_phys_max违规次数与最大值。",
              "score": 25,
              "evaluation_focus": "一致性检查",
              "scoring_hint": "高分：残差统计齐全且违规=0；中分：少量违规并说明；低分：未检查或频繁违规。"
            },
            {
              "sub_criteria": "对照基线（概率路径）与消融分析",
              "description": "与P采样基线或无平滑/无罚项版本对比，量化改进幅度（如误差降低%、残差降低）。",
              "score": 25,
              "evaluation_focus": "对比分析",
              "scoring_hint": "高分：含至少1项消融与改进≥20%；中分：仅口述改进；低分：无对照。"
            },
            {
              "sub_criteria": "敏感性与鲁棒性",
              "description": "分析权重w_q、α、β与s边界变化对结果的敏感性，并给出稳定区间或建议。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：多参数曲线或表格；中分：定性描述；低分：未分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（评估、优化迭代、不确定性量化与工程交付）——本子任务的目标是：基于已合成或候选的行驶序列与经处理的原始时序/片段数据，系统化地计算并汇报一组标准化的运动学与序列相似性指标、利用这些指标驱动迭代优化以改善合成工况、对最终方案进行不确定性与敏感性量化，并以可复现的工程交付包形式输出全部结果与元数据。输入要求：清洗后的秒级原始时序或片段集合、候选合成序列（秒级速度与加速度）、代表性指标目标向量（M_target）及参数配置文件；输出要求：最终合成序列（CSV，含时间戳/速度/加速度及拼接元数据）、完整指标报告（包含点估计与置信区间）、敏感性与不确定性分析报告、优化日志、可执行代码与参数快照（含随机种子）。具体任务步骤与方法：1) 指标定义与实现：精确定义并实现一组评价指标（至少包括总时长T、平均速度V_bar = (1/T)Σv_km, 平均行驶速度V_drive_bar = (1/T_drive)Σ_{v>v_idle}v_km, 怠速时间比 R_idle = T_idle/T, 加速/减速时间比分别 R_acc、R_dec（以 a>0.1 / a<−0.1 为准），平均加速度/减速度 A_plus/A_minus（仅在加速/减速时段的算术平均），速度标准差 σ_v， 加速度标准差 σ_a（针对加速段），速度与加速度的RMSE与NRMSE相对于原始数据，以及速度分布距离（例如Earth Mover’s Distance））；为每一指标写出明确的计算公式和单位并在代码中实现。2) 基线评估：对每个候选合成序列计算上述指标向量 M_construct，并计算误差向量 Δ = M_construct − M_target；同时计算序列级相似度（速度RMSE、加速度RMSE）和拼接点的连续性度量（末首速度差、末首加速度差、交叉窗内均方差）。3) 优化迭代框架：以多目标或加权单目标形式将指标误差最小化，支持两种求解器：若需多目标折衷，使用 NSGA‑II（如 pymoo 库）搜索 Pareto 前沿；若需加权最小化，使用遗传算法或差分进化（DEAP/pygad或scipy.optimize）对候选序列的选择、重复次数与时间伸缩因子进行迭代优化；设计停止准则（固定代数或若干代无改善阈值），并在每次迭代记录目标值、最优序列及随机种子。4) 权重与验收策略：允许用户在配置文件中指定指标权重 w_q；同时提供默认验收阈值（建议：平均速度与平均行驶速度相对误差 ≤ 10%，怠速时间比绝对差 ≤ 3 个百分点，加速/减速时间比相对误差 ≤ 15%，速度/加速度标准差相对误差 ≤ 15%），并在不能同时满足所有阈值时输出 Pareto 备选方案并标注优先级。5) 不确定性量化（Bootstrap）：采用片段级自助法对原始片段集合进行重采样 B 次（推荐 B = 200–500），对每次重采样重复聚类/生成或对候选合成序列的构建决策做随机扰动（若完整重算成本过高，则对合成阶段做参数扰动），得到指标分布并报告每项指标的中位数、95%置信区间与偏差来源分解。6) 全局敏感性分析：对关键处理与生成参数（如 v_idle、a_threshold、滤波窗口长度、时间伸缩上下限 s_min/s_max、最小片段长度 L_min、交叉窗长度 w_c）按 ±10% 与 ±20% 两级进行单因子扰动试验，重算主要指标并以 Tornado 图或敏感度表格展示各参数对指标的影响度量（例如相对变化率或标准化回归系数）。7) 统计与数值稳健性检验：对关键指标差异进行统计检验（例如两组速度分布用 Kolmogorov–Smirnov 测试，速度直方图差异用 EMD 与置信区间比对）；对优化结果验证数值稳定性（在不同随机种子下重复优化若干次并报告结果方差）。8) 报告与工程交付物：生成机器可读与人可读两套交付物——（A）可复现包：Python 源码、requirements.txt、配置文件、随机种子、运行脚本、所有中间数据（清洗后时序、片段库、代表段、候选与最终序列）、优化日志与运行时间记录；（B）分析报告：一份包含方法摘要、最终合成序列（CSV）、所有指标的点估计与置信区间、优化过程中关键决策与 Pareto 解集、敏感性分析结果、以及对潜在物理违规（若存在）的列表与修正建议的 PDF/HTML 报告。9) 可视化与审计：为便于审查，提供标准化图表（速度/加速度时序图、速度直方图与累积分布、加速度分布、拼接处局部放大图、优化目标收敛曲线、Pareto 前沿与敏感性 Tornado 图），并将所有图表与数据一并打包。10) 可复现性与版本控制：要求在交付包中包含明确的版本标识（代码提交哈希或版本号）、环境说明（Python 版本、主要库版本）、固定随机种子并提供运行说明文档；建议使用 Git 管理并在交付时包含 commit id。推荐工具栈：Python (numpy, pandas, scipy, statsmodels, scikit‑learn, tslearn/fastdtw, pymoo 或 DEAP/pygad, matplotlib/seaborn)，以及用于报告生成的 Jupyter Notebook/nbconvert。上述步骤应形成一个可执行的流水线：输入候选序列→基线评估→若未达标则进入优化迭代→对优化结果做 bootstrap 与敏感性分析→产出最终合成序列与完整交付包，所有中间产物、参数与随机种子均被保存以保证可复现。",
      "criteria": {
        "task_understanding": {
          "core_goal": "评估与优化合成行驶工况序列，使其在平均速度、怠速时间比、加/减速时间比、速度/加速度标准差等指标上贴合目标统计，并量化不确定性与敏感性。",
          "expected_output": "最终合成序列CSV（含时间戳/速度/加速度与拼接元数据）、指标报告（点估计与置信区间）、优化日志与Pareto解、Bootstrap与敏感性分析报告、可执行代码与参数快照、标准化图表集。",
          "key_inputs_constraints": "清洗后的原始时序/片段集合（1 Hz，含v[m/s], a[m/s^2]）；候选合成序列（秒级速度与加速度）；代表性指标目标向量M_target；参数配置文件（含v_idle=0.2778 m/s, a阈值±0.1 m/s^2, s_min/s_max, w_c, 随机种子）；必须提供计算指标所需单位一致性与UTC时间戳；拼接连续性需满足速度/加速度无物理违规（a峰值<~10 m/s^2）。",
          "modeling_type": "评价+优化",
          "role_in_pipeline": "作为最终评估与闭环优化环节：输入为子任务1–3的清洗数据、片段与合成候选；输出为达标的最终工况与完整报告，并将误差信息回传驱动代表段选择与拼接策略优化。直接依赖前序数据清洗/片段构建与合成（子任务1–3），后续用于交付与模型复现实验。",
          "assumptions": "若完整重算成本过高，Bootstrap阶段允许对合成阶段参数（如s_min/s_max、w_c、权重w_q）做随机扰动替代全流程重算；默认验收阈值：V_bar与V_drive_bar相对误差≤10%，R_idle绝对差≤3个百分点，R_acc/R_dec相对误差≤15%，σ_v/σ_a相对误差≤15%。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "指标评估目标对齐M_target",
              "description": "是否明确以M_construct−M_target为核心误差向量Δ，覆盖平均速度、平均行驶速度、怠速时间比、R_acc/R_dec、σ_v、σ_a等必备指标。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：逐项定义并实现Δ含全部必备指标；中分：遗漏1–2项或单位未统一；低分：未形成Δ或指标不对应M_target。"
            },
            {
              "sub_criteria": "序列级相似性与拼接连续性",
              "description": "是否同时识别速度/加速度RMSE与拼接点末首速度/加速度差、交叉窗内均方差为必要评估。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：给出RMSE/NRMSE与连续性度量并实现；中分：仅RMSE无拼接连续性；低分：无序列级度量。"
            },
            {
              "sub_criteria": "不确定性与敏感性需求",
              "description": "是否识别Bootstrap置信区间与参数±10%/±20%敏感性分析为必需输出。",
              "score": 20,
              "evaluation_focus": "风险意识",
              "scoring_hint": "高分：明确B≥200、给CI与Tornado/表格；中分：仅点估计或粗略扰动；低分：无不确定性与敏感性。"
            },
            {
              "sub_criteria": "物理约束与单位一致性",
              "description": "是否强调a峰值上限与单位换算（km/h与m/s）在评估中的硬性约束。",
              "score": 20,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：实现单位校验与a上限检查；中分：仅口头说明；低分：忽略导致错误评估。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "评价+优化闭环表述",
              "description": "能否复述为先评估M_construct与M_target误差，再通过权重w_q与NSGA‑II/DE迭代优化直至达标或给出Pareto解。",
              "score": 30,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：清晰阐述评价→优化→再评价循环；中分：有循环但不完整；低分：只描述单次评估或单次优化。"
            },
            {
              "sub_criteria": "指标与阈值复述",
              "description": "准确复述默认验收阈值（如R_idle±3pp、V_bar误差≤10%等）及单位。",
              "score": 25,
              "evaluation_focus": "规范把握",
              "scoring_hint": "高分：逐项列出并合理解释；中分：少量遗漏；低分：阈值混乱或缺失。"
            },
            {
              "sub_criteria": "序列与拼接度量复述",
              "description": "阐明RMSE/NRMSE与拼接点连续性度量在验收中的作用与位置。",
              "score": 25,
              "evaluation_focus": "结构化思维",
              "scoring_hint": "高分：明确纳入目标或约束；中分：只作为参考；低分：未提及。"
            },
            {
              "sub_criteria": "不确定性与敏感性复述",
              "description": "说明Bootstrap B次与±10/±20%单因子扰动的产出（CI、Tornado/表）。",
              "score": 20,
              "evaluation_focus": "风险沟通",
              "scoring_hint": "高分：明确B范围与输出类型；中分：只给CI或只给扰动；低分：未复述。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "指标单位与阈值假设",
              "description": "明确v_idle=0.2778 m/s、a阈值±0.1 m/s^2、a_phys_max≈8–10 m/s^2等并可配置。",
              "score": 30,
              "evaluation_focus": "参数设定",
              "scoring_hint": "高分：参数集中配置并记录到报告；中分：代码硬编码；低分：未说明导致不一致。"
            },
            {
              "sub_criteria": "Bootstrap策略假设",
              "description": "若成本高，采用合成阶段参数扰动替代全流程重算并说明影响。",
              "score": 25,
              "evaluation_focus": "方法选择",
              "scoring_hint": "高分：说明近似合理性与局限；中分：仅使用扰动无解释；低分：未说明即替代。"
            },
            {
              "sub_criteria": "优化停止准则与随机种子",
              "description": "假设固定代数或无改善代数为停止条件，并固定随机种子保证复现。",
              "score": 25,
              "evaluation_focus": "实验设计",
              "scoring_hint": "高分：列明代数/耐心与seed；中分：仅代数或仅seed；低分：两者皆无。"
            },
            {
              "sub_criteria": "物理可行性处理",
              "description": "假设对超限加速度进行惩罚或平滑并在日志中记录。",
              "score": 20,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：实现惩罚/拒绝与记录；中分：只记录不处理；低分：忽略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "指标公式与实现映射",
              "description": "给出V_bar、V_drive_bar、R_idle、R_acc/R_dec、A_plus/A_minus、σ_v、σ_a、RMSE/NRMSE、EMD等明确定义与代码实现接口。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式一致并含单位；中分：缺少1–2项或单位未明；低分：定义不清或与实现不符。"
            },
            {
              "sub_criteria": "目标函数J与权重w_q",
              "description": "构建加权误差J与连续性惩罚、物理违规罚项，并可切换NSGA‑II的多目标设定。",
              "score": 25,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：J含多项指标与惩罚；中分：仅指标误差；低分：无明确目标函数。"
            },
            {
              "sub_criteria": "验收阈值与Pareto策略",
              "description": "内置默认阈值与当无法满足时输出Pareto前沿备选与优先级说明。",
              "score": 20,
              "evaluation_focus": "决策准则",
              "scoring_hint": "高分：程序化阈值检查与自动报告；中分：手动判断；低分：无阈值策略。"
            },
            {
              "sub_criteria": "Bootstrap与敏感性设计",
              "description": "定义B（200–500）与±10/±20%扰动集合、输出CI与Tornado/表格。",
              "score": 20,
              "evaluation_focus": "统计设计",
              "scoring_hint": "高分：参数化B与扰动集；中分：固定B或缺图表；低分：未建模。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "NSGA‑II/DE求解配置",
              "description": "合理设置种群、代数、交叉变异、停止准则，并记录最优前沿与日志。",
              "score": 30,
              "evaluation_focus": "优化实现",
              "scoring_hint": "高分：参数可配与日志完备；中分：默认参数且少日志；低分：求解过程不可追踪。"
            },
            {
              "sub_criteria": "连续性与物理罚项计算",
              "description": "在求解中实时计算D_cont与P_phys并参与选择。",
              "score": 25,
              "evaluation_focus": "约束处理",
              "scoring_hint": "高分：在线惩罚有效降低断点与违规；中分：离线筛除；低分：未纳入。"
            },
            {
              "sub_criteria": "收敛与稳定性检验",
              "description": "多随机种子重复优化并报告方差与收敛曲线。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：≥3个seed结果稳定；中分：2个seed或无曲线；低分：单次运行无检验。"
            },
            {
              "sub_criteria": "效率与可扩展性",
              "description": "利用并行评估或向量化提升B次Bootstrap与多候选评估效率。",
              "score": 20,
              "evaluation_focus": "工程效率",
              "scoring_hint": "高分：显式并行/缓存；中分：部分向量化；低分：低效循环导致不可用。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "指标计算与单位校验代码",
              "description": "以Python实现全部指标与单位一致性检查（km/h↔m/s），含断言与边界处理。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：单元测试覆盖关键函数；中分：基本正确少量缺测处理；低分：易崩溃或单位错误。"
            },
            {
              "sub_criteria": "优化与日志复现性",
              "description": "固定随机种子、保存配置与优化日志（目标值、解、seed、运行时间）。",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：完整快照与hash/版本；中分：部分日志；低分：无法复现。"
            },
            {
              "sub_criteria": "Bootstrap与敏感性管线",
              "description": "实现B次重采样/扰动的批处理与CI计算，输出结构化结果。",
              "score": 25,
              "evaluation_focus": "流水线化",
              "scoring_hint": "高分：参数化B并并行；中分：可运行但慢；低分：未实现或结果不一致。"
            },
            {
              "sub_criteria": "可视化与报表输出",
              "description": "自动生成时序图、分布图、拼接放大、收敛曲线、Pareto、Tornado，并导出HTML/PDF。",
              "score": 20,
              "evaluation_focus": "可解释性",
              "scoring_hint": "高分：图表齐全可复现；中分：缺少2项以上；低分：无图或无法导出。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "指标误差与达标判定",
              "description": "逐项报告Δ与是否满足默认验收阈值，并解释超标项成因。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：有量化差异与原因分析；中分：仅给数值；低分：无判定或误判。"
            },
            {
              "sub_criteria": "序列相似性与连续性诊断",
              "description": "分析RMSE/NRMSE与拼接点残差，定位问题段并提出修正建议。",
              "score": 25,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：定位到具体时间窗并建议w_c/平滑；中分：笼统描述；低分：不诊断。"
            },
            {
              "sub_criteria": "不确定性与敏感性解读",
              "description": "解释Bootstrap CI与Tornado排序，指出最敏感参数与鲁棒改进方向。",
              "score": 25,
              "evaluation_focus": "统计思维",
              "scoring_hint": "高分：结合CI宽度与参数影响率；中分：仅罗列；低分：误读或缺失。"
            },
            {
              "sub_criteria": "物理一致性与工程建议",
              "description": "检查a峰值、负速度等物理违规并给出约束或平滑修正建议。",
              "score": 20,
              "evaluation_focus": "工程洞察",
              "scoring_hint": "高分：列举违规次数与修复效果；中分：泛泛而谈；低分：忽略。"
            }
          ]
        }
      }
    }
  }
}