{
  "task_id": "2015_C",
  "problem": "本研究旨在挖掘、提炼和聚合实测信道数据中的各种特征，进而用数学的语言描述“指纹”，并验证其在不同场景或不同地理位置下的适用性，具体包括：\n\n问题1：“数据包1”提供了三种场景的真实信道测量结果。基于三种已知场景的测量结果，参考背景中的知识介绍，采用数学建模特别是特征提取的方法，对所提供的样本加以分析，给出无线信道“指纹”的模型。在此基础上，给出简洁而明确的“评价指标”，用于分析验证所建模“指纹”合理有效。所谓有效是指，该模型应能从数学上对已知的三种场景进行合理区分。要求详细说明建模的思路、使用的方法以及得出结论的过程。另外，所提取的特征或所建立的模型最好有一定的物理意义。最后，提供获取“指纹”的程序代码，要求代码可运行，但代码形式不限。\n\n问题2：“数据包2”提供了与“问题1”中某些场景相对应的二个真实信道测量结果。基于“问题1”中所提供的三个场景，以及所建立的“指纹”模型和“评价指标”，采用数学的方法，识别出此处提供的二个样本分别属于哪个场景。需要保证“场景识别”的结果正确，且对识别的结果进行合理的分析。请明确给出“场景识别”的结果，并详细描述分析的过程。\n\n问题3：“数据包3”提供了一条连续路段的真实信道测量结果。该结果对应于以3km/h的速度步行近150m的测试距离。该路段可能包含不同的场景或环境，对应不同的“指纹”特征。基于上述测量结果，先自行分段，采用“问题1”中的建模方法，给出分段的“指纹”分析。在分段分析的基础上，对所提取的“指纹”进行合理分类。通过对比不同段的分析结果，最终决定该路段可以依“指纹”划分为多少个区域。理论上，“区域划分”越细，后续做“区域识别”的精确程度越高，但过细的“区域划分”会在“指纹”特征中引入更多的错误，导致误判概率增大。要求详细说明“区域划分”的思路及过程，并对划分结果进行合理的分析。\n\n问题4：“数据包4”提供了二个真实信道测量结果。基于“问题3”中的“区域划分”和“问题1”中的“评价指标”，首先判断此处提供的二个样本是否采集自“问题3”中所提供的路段。对于已判断出的采自上述路段的样本，请识别其对应于“问题3”中的哪一块区域。需要保证“样本判断”的结果正确，以及“区域识别”的误判距离尽可能小，同时对所识别的结果进行合理的分析。要求详细说明样本判别的思路和方法，以及得出结论的过程。",
  "subtask": {
    "1": {
      "subtask": "子任务1的目标是把观测到的带滤波与噪声的时域测量序列 r[k,n]（k=0..K-1, n=0..N-1 的复数矩阵，从 MAT 文件加载）预处理并尽可能重构出接近理想时延域信道 h_hat[k,n]，并在必要时给出稀疏化的路径参数集合 {τ_l[n], h_l[n], L_est[n]} 及重构质量度量；为此要求按以下明确步骤和方法实施：首先读取并校验输入数据（场景文件与 filter.mat），确保索引、数据类型为复数并记录滤波器 g[m] 的长度 M（若存在）；对每个样本 n 做基础预处理——去直流项（减样本平均）、估计并记录每帧总功率用于归一化、并在时间/频率域上用窗函数（如汉宁窗）和零填充扩展到长度 L_fft ≥ K+M-1 以避免循环卷积伪影；若已知 g，则在频域基于稳健反卷积重构 h_hat：对每个 n 计算 R(ω,n)=FFT{r[·,n]} 与 G(ω)=FFT{g, L_fft}，运用带正则的Wiener/Tikhonov反卷积 H_hat(ω,n)=conj(G(ω))·R(ω,n)/(|G(ω)|^2+γ(ω))，其中 γ(ω) 可由噪声方差 σ_u^2（估自高时延或空白窗口）与信号能量比估计设定或通过 L-curve/交叉验证微调，随后做逆 FFT 得到时域 h_hat[k,n]，并输出重构残差与频域放大因子以检测不稳定频点；若 g 未知或反卷积不稳定，则提供两条可选路径：一是采用盲去卷积/交替最小二乘方法同时估计 g 与 h（以约束（平滑/带宽）正则化并用多起始点以避免局部极小），二是跳过显式去卷积直接对归一化的 r 进行后续稀疏建模或特征计算（在输出中标注未去卷积的标识）。为提高时延分辨率并提取可解释的多径参数，提供基于细网格的稀疏恢复方案：在超采样延迟格上建立 Toeplitz 卷积矩阵 G_big（基于已知或假定 g），求解复值稀疏问题 α_hat = argmin ||G_big α − r||_2^2 + λ||α||_1（复杂变量可用实虚部分解或复值优化器），推荐使用 FISTA / 坐标下降 / CVX 或 scikit-learn 的 Lasso（实虚分离）实现，λ 可由噪声能量或交叉验证确定；由 α_hat 的峰值提取 τ_l 与对应复权 h_l，并用能量阈值 η 或等效路径数 N_eff 判定有效路径 L_est。全过程需记录并输出所有关键参数（γ、λ、窗长与零填充长度、阈值 η）、复数重构矩阵 h_hat[K×N]、每帧残差范数 ||G*h_hat − r||_2、噪声与信号能量估计、以及路径参数列表与其置信度（基于峰值高度与残差）；实现工具建议使用 Python（scipy.io.loadmat、numpy.fft、scipy.signal）、CVX/CVXPy 或 scikit-learn（Lasso/FISTA 实现），并在重构后进行简单稳健性检查（功率守恒近似、频域增益上限、重构残差比例）以判定去卷积是否可信。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对带滤波与噪声的时域测量 r[k,n] 进行稳健反卷积/稀疏恢复拟合以重构理想时延域信道 h_hat[k,n] 并提取稀疏路径参数 {τ_l[n], h_l[n], L_est[n]}，同时评估重构质量。",
          "expected_output": "可运行代码与日志；重构矩阵 h_hat[K×N]（复数）；每帧残差范数 ||G*h_hat−r||_2 与残差比例；估计的噪声/信号能量；频域放大因子与不稳定频点报告；路径参数列表 {τ_l[n], h_l[n], L_est[n]} 及置信度；关键超参数记录（γ(ω)、λ、窗函数、L_fft、阈值η）；若 g 未知时的盲去卷积或跳过标记。",
          "key_inputs_constraints": "输入 MAT 文件包含 r[k,n]（复数 K×N）；可选 filter.mat 含 g[m]（长度 M>0）；索引 k∈[0,K−1], n∈[0,N−1]；需要去直流与功率归一化；FFT 长度 L_fft≥K+M−1；若反卷积，需正则 γ(ω)>0；噪声方差 σ_u^2 来自高时延窗估计；稀疏恢复需超采样延迟格与 Toeplitz 卷积矩阵；λ、η 需可追溯设置与记录。",
          "modeling_type": "拟合+评价",
          "role_in_pipeline": "作为数据清洗与特征工程之间的重构子任务，向后续指纹特征提取与场景分类提供 h_hat 与稀疏路径参数；前序依赖：原始测量导入与一致性校验；后序任务：特征计算、指纹建模、场景识别与验证。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别 r[k,n]→h_hat[k,n] 的稳健反卷积拟合目标",
              "description": "明确本任务是对带滤波与噪声的 r[k,n] 进行稳健反卷积/稀疏恢复以拟合理想信道 h_hat，而非直接做场景分类或频域可视化。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚区分去卷积重构与后续指纹分类；中分：提到重构但混淆部分目标；低分：将任务表述为分类或仅做去噪。"
            },
            {
              "sub_criteria": "识别滤波器 g[m] 已知/未知两种路径",
              "description": "明确已知 g 用正则频域反卷积；未知 g 时采用盲去卷积或标注跳过并继续稀疏建模。",
              "score": 25,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：两分支流程、适用条件与回退策略完整；中分：只提一种路径；低分：忽略 g 的可用性差异。"
            },
            {
              "sub_criteria": "识别关键约束：复数数据、L_fft≥K+M−1、正则 γ(ω)>0",
              "description": "点出复值处理、避免循环卷积伪影的零填充、正则稳定性要求。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：三项约束均到位并解释目的；中分：缺少其一；低分：未提零填充或正则。"
            },
            {
              "sub_criteria": "识别质量度量与稳定性检查",
              "description": "强调残差范数、频域放大因子、不稳定频点与功率守恒近似用于评价重构可信度。",
              "score": 20,
              "evaluation_focus": "评价意识",
              "scoring_hint": "高分：列出≥2个具体度量并给出判定逻辑；中分：只提残差；低分：无任何质量评估。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "精确复述 h_hat[K×N] 与路径参数 {τ_l[n], h_l[n], L_est[n]} 的预期输出",
              "description": "复述需包含复数矩阵维度、参数集合及置信度输出。",
              "score": 30,
              "evaluation_focus": "表达准确",
              "scoring_hint": "高分：维度与类型准确且含置信度；中分：缺置信度或维度模糊；低分：只笼统说‘重构信道’。"
            },
            {
              "sub_criteria": "复述预处理细节：去直流、功率归一化、窗与零填充",
              "description": "完整描述基础预处理的次序与目的以避免伪影。",
              "score": 25,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：包含四项并说明避免循环卷积；中分：缺1–2项；低分：未提预处理。"
            },
            {
              "sub_criteria": "复述 γ(ω)、λ、η 等超参数记录与来源",
              "description": "说明噪声窗估计 σ_u^2、L-curve/交叉验证调参与日志记录要求。",
              "score": 25,
              "evaluation_focus": "可追溯性",
              "scoring_hint": "高分：来源+记录+调参方法齐全；中分：只给经验值；低分：无来源与记录。"
            },
            {
              "sub_criteria": "复述不稳定时的回退策略",
              "description": "当反卷积不稳时，说明盲去卷积或跳过去卷积直接稀疏建模并打标。",
              "score": 20,
              "evaluation_focus": "稳健设计",
              "scoring_hint": "高分：含判据与回退路径；中分：仅口头提回退；低分：无回退方案。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "噪声模型与估计假设（复高斯、σ_u^2 来源）",
              "description": "假设 u[k,n] 为复高斯白噪声，σ_u^2 由高时延或空白窗估计并记录区间。",
              "score": 30,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：说明估计窗选择与稳健性；中分：仅声明高斯；低分：未给噪声假设。"
            },
            {
              "sub_criteria": "信道稀疏性与超采样延迟格假设",
              "description": "说明多径稀疏、采用细网格近似连续时延并讨论泄漏/偏差。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：解释网格密度与偏差-方差权衡；中分：只提稀疏；低分：无稀疏假设。"
            },
            {
              "sub_criteria": "滤波器 g 的带限/平滑先验（若盲去卷积）",
              "description": "阐明 g 的带宽/平滑正则与尺度不可辨识性的消解策略（归一化/锚点）。",
              "score": 25,
              "evaluation_focus": "可辨识性",
              "scoring_hint": "高分：给出归一化与多起始点；中分：仅提平滑；低分：忽略不可辨识性。"
            },
            {
              "sub_criteria": "功率守恒近似与窗口效应假设",
              "description": "说明功率在重构前后近似守恒、窗口引入的能量缩放需补偿。",
              "score": 20,
              "evaluation_focus": "物理一致",
              "scoring_hint": "高分：给出补偿或校正；中分：只口头说明；低分：无此考虑。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "频域正则反卷积模型 H_hat(ω,n) 与 γ(ω) 设计",
              "description": "推导 H_hat=conj(G)R/(|G|^2+γ(ω)) 并给出 γ(ω) 与 σ_u^2、信号能量比或 L-curve 的联系。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式完整且 γ(ω)可操作；中分：只给公式无 γ 细节；低分：无正则或易发散。"
            },
            {
              "sub_criteria": "稀疏恢复 α_hat 的优化建模与复值处理",
              "description": "建立 ||G_big α−r||_2^2+λ||α||_1，说明复值转实-虚分离或使用复优化器。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确矩阵构造与复值实现；中分：仅写 Lasso；低分：无可解表述。"
            },
            {
              "sub_criteria": "窗函数与零填充策略（L_fft≥K+M−1）",
              "description": "阐明汉宁窗目的、零填充长度选择、避免循环卷积伪影。",
              "score": 20,
              "evaluation_focus": "信号处理",
              "scoring_hint": "高分：给出 L_fft 计算与示意；中分：泛述窗；低分：未处理伪影。"
            },
            {
              "sub_criteria": "路径提取与阈值 η、N_eff 规则",
              "description": "从 α_hat 峰值提取 τ_l、h_l，设置能量阈值或等效路径数并说明物理意义。",
              "score": 25,
              "evaluation_focus": "特征构建",
              "scoring_hint": "高分：阈值与能量占比明确；中分：仅峰值；低分：未定义 L_est。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "稳健数值实现：频域增益上限与不稳定频点处理",
              "description": "限制 1/(|G|^2+γ) 的增益，剔除或夹持深零点频率并记录。",
              "score": 25,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：有阈值与日志；中分：仅口头提限制；低分：无控制导致爆噪。"
            },
            {
              "sub_criteria": "稀疏求解器（FISTA/坐标下降/CVX）与收敛判据",
              "description": "给出步长/回溯、停止条件、最大迭代数与时间复杂度考虑。",
              "score": 30,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：明确收敛阈值与迭代上限；中分：默认参数；低分：无收敛控制。"
            },
            {
              "sub_criteria": "超参数 γ、λ 的估计与调参与交叉验证",
              "description": "依据 σ_u^2、SNR 或 L-curve/折叠验证设置并记录选择依据。",
              "score": 25,
              "evaluation_focus": "参数选择",
              "scoring_hint": "高分：提供数据驱动选择；中分：经验固定值；低分：未说明来源。"
            },
            {
              "sub_criteria": "残差与功率守恒检查",
              "description": "计算 ||G*h_hat−r||_2、残差比例与重构前后功率偏差阈值判断可信度。",
              "score": 20,
              "evaluation_focus": "结果校验",
              "scoring_hint": "高分：给出明确阈值（如残差≤20%、功率偏差≤1 dB）；中分：只报告数值；低分：无检查。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据读取与校验（scipy.io.loadmat、复数类型、维度一致）",
              "description": "正确读取 r、g；验证复数 dtype、K×N 与 M；异常处理与提示。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含断言/异常与单元测试样例；中分：基本读取；低分：dtype/维度错误。"
            },
            {
              "sub_criteria": "FFT 管线（窗、零填充 L_fft≥K+M−1、iFFT）",
              "description": "实现窗函数与零填充，避免循环卷积，保持相位与尺度一致。",
              "score": 25,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：有可复现实例与长度检查；中分：实现但无检查；低分：遗漏零填充。"
            },
            {
              "sub_criteria": "正则反卷积与稀疏求解接口（参数可配置与记录）",
              "description": "实现 H_hat 计算与 FISTA/Lasso 求解，γ、λ、η、L_fft 可配置并日志化。",
              "score": 25,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：CLI/配置文件与结构化日志；中分：硬编码参数；低分：无法复现实验。"
            },
            {
              "sub_criteria": "稳定性与质量报告（不稳定频点、残差、SNR）",
              "description": "输出频域增益上限、被抑制频点、残差比例、估计 SNR、可信标志。",
              "score": 25,
              "evaluation_focus": "可诊断性",
              "scoring_hint": "高分：报告齐全且含阈值判定；中分：只打印少量指标；低分：无报告。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "重构质量度量解读（残差比例、功率偏差）",
              "description": "用量化阈值判断去卷积是否可信，并解释可能失配原因（噪声、深零点）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：阈值清晰并定位瓶颈；中分：仅口头好/坏；低分：无分析。"
            },
            {
              "sub_criteria": "路径参数物理合理性（τ_l、h_l 与能量占比）",
              "description": "检查时延顺序、直达径存在性、前 L_est 路径能量覆盖率。",
              "score": 25,
              "evaluation_focus": "物理一致",
              "scoring_hint": "高分：能量覆盖≥80% 且解释异常；中分：覆盖说明不全；低分：无检查。"
            },
            {
              "sub_criteria": "不稳定频点与正则 γ(ω) 的权衡分析",
              "description": "讨论 γ 过大/过小对分辨率与噪声放大的影响并给出改进建议。",
              "score": 25,
              "evaluation_focus": "调参与权衡",
              "scoring_hint": "高分：提出可执行改进（频带掩蔽/频变γ）；中分：泛泛而谈；低分：未涉及。"
            },
            {
              "sub_criteria": "对后续指纹提取的可用性结论",
              "description": "基于 h_hat 与 {τ_l,h_l,L_est} 的稳定性，判断是否可进入指纹建模或需回退策略。",
              "score": 20,
              "evaluation_focus": "决策能力",
              "scoring_hint": "高分：给出明确 go/no-go 与条件；中分：模糊结论；低分：无结论。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（特征提取与“指纹向量”构造）——在给定已预处理的时延域信道矩阵 h_hat[k,n]（若无法可靠去卷积则以观测 r[k,n] 的幅度或功率为替代输入），其目标是从滑动时间/位置窗口内稳定、可解释且判别性强的物理/统计量中构造每窗口的定长指纹向量 F，并为每个分量提供置信度估计；为此应按如下步骤精确实施：1) 窗口划分与预处理——以窗口长度 W_n（建议初始值 20–50 个连续样本，可基于样本密度与预期场景尺度调优）和步长 S（可取 W_n/2）在 n 方向滑动，窗口内对每个延迟 bin τ 计算功率时延谱（PDP）P(τ)= (1/|W|) ∑_{n'∈W} |h_hat[τ,n']|^2（或替代为 |r[τ,n']|^2），并记录窗口总功率 P_tot = ∑_τ P(τ)；2) PDP 基本量与归一化——构建归一化PDP p_i = P(τ_i)/P_tot 以消除绝对功率差异，计算平均时延 τ_mean = ∑ τ_i p_i，RMS 时延展宽 σ_τ = sqrt(∑ (τ_i−τ_mean)^2 p_i)，并保留 P_tot 作为可选大尺度功率特征；3) 能量集中度与等效路径数——计算有效路径数 N_eff = (∑ P(τ))^2 / ∑ P(τ)^2 以度量能量分散程度，并采用阈值法 N_thr = |{τ: P(τ) > η·max P}|（建议阈值 η = 0.05–0.2）作为备选离散路径计数；4) 谱形与信息量——计算谱熵 H_pdp = −∑ p_i log p_i（基底任意但须一致）与若干分位数（例如 10%, 50%, 90% 的延迟处），这些量能反映反射复杂度与多径稠密性；5) K 因子与直达径检测——若 PDP 存在显著主峰，可估计 K = P_peak / (P_tot − P_peak)（或通过幅度分布拟合 Rice 分布得更鲁棒的 K 估计）；6) 频域相干带宽估计——通过计算频率相关函数或用经验公式 B_c ≈ 1/(c·σ_τ)（c 为经验常数，建议初值 c=50）来得到相干带宽 B_c；7) 多普勒特征——对每个 τ bin 或对整体链路在 n 方向上用 STFT/Welch（建议段长 M_Doppler ≈ 32–128 样本、50% 重叠、适当 nfft）估计多普勒谱 S_f(f_D)，并提取多普勒谱宽度 B_D（例如二阶矩或半功率带宽）、谱峰位置 f_peak 和谱熵 H_Doppler；8) 幅度统计与时序相关量——计算幅度（|h|）的窗口内均值、方差、偏度与峰度、若干分位数（P10,P50,P90），以及时序自相关在滞后1处的值 ρ1 以表征相干时间/速度影响；9) 特征归一化與缺失处理——对得到的每一类特征在窗口层面做尺度归一（例如除以 P_tot、或在全数据集上做 z-score 标准化/范围缩放），对异常或缺失值采用邻窗插值或用训练集中位数替代；10) 向量组装与降维——按固定顺序将上述量组合成原始指纹向量 F_raw（典型维度 d_raw 在 8–20 之间，可按需要扩展），并可选地在训练范围内应用 PCA（保留 ≥90% 能量）或 LDA（若有标签）得到低维指纹 F；11) 置信度与不确定度估计——对每一窗口采用 bootstrap（在窗口内有放回重采样若干次）或噪声注入蒙特卡洛方法评估每个特征的标准误与协方差，输出每个 F 分量的置信区间和整个向量的协方差矩阵；12) 输出格式与工具建议——每个窗口输出结构化记录 {window_center_index, F (标准化向量), Σ_F (协方差), 原始 P(τ) 轮廓, 元数据（W_n、η、STFT 参数）}，实现可用的工具包括 numpy/scipy（FFT、welch）、scipy.signal（STFT、窗函数）、scipy.stats（高阶矩）、sklearn（PCA）、以及 bootstrap 实现；参数（W_n、η、STFT 段长、nfft、归一化策略）应以配置文件形式保存以便复现与调优。该子任务应明确返回连续窗口级的指纹向量序列及其不确定度估计，且保证每一分量的定义、计算公式与数值参数在实现文档中被精确记录以便独立复现。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在滑动窗口内从预处理的时延域信道 h_hat[k,n]（或替代 r[k,n]）提取稳定可解释的多域特征并构造定长“指纹向量”F，评估并量化每个分量的不确定度与置信度。",
          "expected_output": "连续窗口级的指纹记录序列：{window_center_index, F(标准化定长向量), Σ_F(协方差矩阵), 原始PDP P(τ), 元数据(参数配置)}, 以及实现代码与可复现的配置文件。",
          "key_inputs_constraints": "输入：复数矩阵 h_hat[k,n] 或 r[k,n]；必要前置：子任务1的去卷积/归一化已给出或标注未去卷积；窗口参数 W_n 与步长 S；PDP 需归一化 p_i；阈值 η∈[0.05,0.2]；STFT/Welch 参数(M_Doppler, nfft, 50%重叠)；特征需z-score或范围缩放；需输出每分量置信区间与Σ_F；缺失/异常值需可重复处理策略。",
          "modeling_type": "评价+拟合+分类",
          "role_in_pipeline": "作为特征工程与指纹建模环节，位于前序“子任务1：h_hat[k,n]重构/归一化”之后，后接“场景分类/区域识别与评估（问题2/3/4）”。直接依赖：h_hat或r、滤波器存在性标注、噪声估计；后序依赖：指纹F与Σ_F供分类与判别。",
          "assumptions": "若频域去卷积不可靠则以 |r|^2 替代构建PDP；相干带宽经验常数 c=50；多普勒谱用Welch估计，窗口长度在32–128内可调；PCA仅在训练集拟合并固化。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确提取与构造“指纹向量”F的核心目标",
              "description": "是否准确识别本任务是对 h_hat[k,n]/r[k,n] 进行滑动窗口特征提取与归一化，形成定长F并量化不确定度（Σ_F与置信区间），而非直接做场景分类。",
              "score": 35,
              "evaluation_focus": "任务界定",
              "scoring_hint": "高分：清楚区分特征工程与分类，强调PDP、多普勒、统计量与Σ_F输出；中分：提及特征但忽略不确定度或窗口；低分：将任务误写为分类或仅做可视化。"
            },
            {
              "sub_criteria": "输入与约束识别（h_hat或r、W_n/S、η、STFT参数）",
              "description": "是否枚举 h_hat[k,n] 或 r[k,n] 替代路径、W_n/S、η阈值、STFT/Welch参数、标准化策略与缺失处理等关键约束。",
              "score": 30,
              "evaluation_focus": "约束梳理",
              "scoring_hint": "高分：列出并解释所有核心参数对F的影响；中分：少量遗漏（如η或nfft）；低分：未说明任何参数或误解数据类型。"
            },
            {
              "sub_criteria": "评价对象与质量度量识别（Σ_F、置信区间）",
              "description": "是否识别需要对每个特征分量提供置信度与协方差矩阵，以及窗口级质量标记（如P_tot、数据缺失标志）。",
              "score": 35,
              "evaluation_focus": "质量度量",
              "scoring_hint": "高分：规定bootstrap/噪声注入并输出Σ_F与区间；中分：仅给方差无方法；低分：完全无不确定度。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "滑动窗口与PDP定义的精确复述",
              "description": "是否按 P(τ)=(1/|W|)∑|h_hat[τ,n']|^2、P_tot=∑τ P(τ) 进行复述，并说明替代 |r|^2 的情形。",
              "score": 35,
              "evaluation_focus": "公式把握",
              "scoring_hint": "高分：公式正确且提及替代路径；中分：有小误但不影响实现；低分：错误公式或忽略P_tot。"
            },
            {
              "sub_criteria": "归一化与统计量复述（p_i、τ_mean、σ_τ）",
              "description": "是否正确复述 p_i=P(τ_i)/P_tot、τ_mean、RMS时延展宽σ_τ，并说明P_tot可作大尺度功率特征。",
              "score": 30,
              "evaluation_focus": "定义准确",
              "scoring_hint": "高分：三者定义完整；中分：缺少其一；低分：定义混乱或数值含义错误。"
            },
            {
              "sub_criteria": "多普勒与相干量复述（B_c、B_D、H_Doppler）",
              "description": "是否复述 B_c≈1/(c·σ_τ)、STFT/Welch多普勒谱、谱宽B_D与谱熵H_Doppler的估计流程。",
              "score": 35,
              "evaluation_focus": "跨域理解",
              "scoring_hint": "高分：完整链路与参数；中分：只提及STFT未给B_c关系；低分：未涉及多普勒或相干带宽。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "未去卷积替代假设（以|r|^2构建PDP）",
              "description": "明确何时以 |r|^2 替代，并说明对特征偏差的影响与标注未去卷积标识。",
              "score": 30,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出触发条件与偏差讨论；中分：仅声明可替代；低分：未说明替代策略。"
            },
            {
              "sub_criteria": "噪声与正则相关假设（bootstrap/噪声注入）",
              "description": "设定噪声水平来源（高时延窗或子任务1估计），并假设其用于不确定度评估的注入范围。",
              "score": 35,
              "evaluation_focus": "统计设定",
              "scoring_hint": "高分：明确噪声估计窗口与重复次数；中分：仅口头描述；低分：无噪声假设。"
            },
            {
              "sub_criteria": "经验常数与参数范围假设（c=50, η∈[0.05,0.2]）",
              "description": "合理给出 c、η、M_Doppler、nfft、W_n、S 的初值与调优依据（样本密度/场景尺度）。",
              "score": 35,
              "evaluation_focus": "参数选择",
              "scoring_hint": "高分：参数与场景尺度关联清晰；中分：给出数值无依据；低分：缺省或不合理范围。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "指纹分量设计（p_i、τ_mean、σ_τ、N_eff、N_thr、H_pdp、分位数）",
              "description": "是否构成包含PDP归一化、延迟统计、能量集中度与谱熵/分位数的核心F_raw子集。",
              "score": 30,
              "evaluation_focus": "特征设计",
              "scoring_hint": "高分：≥6项且定义清楚；中分：3–5项；低分：<3项或定义错误。"
            },
            {
              "sub_criteria": "K因子与直达径检测设计",
              "description": "采用 K=P_peak/(P_tot−P_peak) 或Rice拟合的稳健方案并定义主峰判据与边界情况处理。",
              "score": 20,
              "evaluation_focus": "物理含义",
              "scoring_hint": "高分：含阈值与异常处理；中分：仅公式；低分：未包含K或定义不当。"
            },
            {
              "sub_criteria": "频域与多普勒特征设计（B_c、B_D、f_peak、H_Doppler）",
              "description": "给出Welch/STFT配置、谱宽/峰值提取方法与单位定义，避免泄漏/分辨率陷阱。",
              "score": 25,
              "evaluation_focus": "跨域特征",
              "scoring_hint": "高分：参数与方法匹配；中分：不完整；低分：缺失或不一致单位。"
            },
            {
              "sub_criteria": "归一化与缺失处理、PCA/LDA降维规范",
              "description": "说明z-score/范围缩放、邻窗插值/中位数替代、训练集拟合PCA（≥90%能量）并固化变换。",
              "score": 25,
              "evaluation_focus": "规范性",
              "scoring_hint": "高分：流程与数据泄漏防护；中分：有归一化无泄漏控制；低分：无归一化或训练/测试混淆。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "窗口滑动实现与边界处理（W_n、S）",
              "description": "正确实现滑动与边缘窗口裁剪/填充，记录 window_center_index。",
              "score": 25,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：边界与索引准确；中分：小偏移；低分：窗口错位严重。"
            },
            {
              "sub_criteria": "PDP与特征计算的数值稳定性",
              "description": "避免除零（P_tot≈0）、log(0)处理、数值下溢；单位与量纲一致。",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：全面防护；中分：个别缺陷；低分：频繁NaN/Inf。"
            },
            {
              "sub_criteria": "不确定度评估（bootstrap/噪声注入）与Σ_F计算",
              "description": "给出重复次数、采样策略、协方差估计与对置信区间的输出格式。",
              "score": 30,
              "evaluation_focus": "统计计算",
              "scoring_hint": "高分：Σ_F正定、区间合理；中分：仅方差无协方差；低分：未评估或错误。"
            },
            {
              "sub_criteria": "参数可配置与可复现性（配置文件管理）",
              "description": "W_n、S、η、Welch参数、标准化策略、PCA等均外置配置并记录版本。",
              "score": 20,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：统一配置+日志；中分：部分硬编码；低分：全硬编码且无记录。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "PDP/统计量/多普勒实现正确性（numpy/scipy.signal/scipy.stats）",
              "description": "使用Welch/STFT、分位数、偏度峰度API正确，验证维度与单位。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：单元测试或断言覆盖关键路径；中分：手工检查；低分：明显API误用。"
            },
            {
              "sub_criteria": "数值与异常处理（除零、log安全、NaN处理）",
              "description": "稳健处理P_tot≈0、p_i=0的log、缺失/异常值填补与标记。",
              "score": 25,
              "evaluation_focus": "鲁棒实现",
              "scoring_hint": "高分：统一异常管道；中分：零散处理；低分：崩溃或静默错误。"
            },
            {
              "sub_criteria": "指纹向量与Σ_F输出结构化与文档化",
              "description": "输出{window_center_index, F, Σ_F, P(τ), 元数据}并含字段说明，与配置文件一致。",
              "score": 25,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：模式校验或schema；中分：结构基本正确；低分：字段缺失或混乱。"
            },
            {
              "sub_criteria": "可配置与重现（配置文件、随机种子、版本记录）",
              "description": "参数YAML/JSON、固定随机种子、库版本记录，保证复现。",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：一键重现脚本；中分：部分可复现；低分：不可复现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "物理可解释性验证（K因子、σ_τ、N_eff与场景直觉一致）",
              "description": "分析指纹分量随场景变化的物理意义，验证直达径、稠密多径、遮挡对F的影响方向。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出典型窗口案例与对照；中分：定性描述；低分：无物理解释。"
            },
            {
              "sub_criteria": "稳定性与不确定度解读（Σ_F与区间合理性）",
              "description": "讨论特征置信区间大小与窗口内样本数、噪声水平、η阈值的关系，并识别不稳定分量。",
              "score": 30,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：量化示例（如区间占比）；中分：定性说明；低分：忽略Σ_F解读。"
            },
            {
              "sub_criteria": "可判别性与冗余度评估（PCA/LDA或相关性分析）",
              "description": "报告特征间相关性、PCA方差解释率≥90%或LDA可分性指示，讨论冗余特征。",
              "score": 35,
              "evaluation_focus": "判别力评估",
              "scoring_hint": "高分：提供方差解释率或可分性曲线；中分：口头认为有效；低分：未评估可判别性。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（建模、判别规则与性能评估）的目标是：以子任务2输出的窗口级指纹向量序列及其协方差为输入，建立每一已知场景/段的统计原型并训练可复现的判别器，定义并校准用于归属判定的距离/概率阈值，同时用一组规范化的数学度量全面评估判别能力与稳健性，并对关键超参数做灵敏度和不确定性分析；具体应按如下步骤实施并输出明确交付物：1) 数据准备与标准化——对所有指纹向量做统一缩放/去均值（全局 z-score 或按场景归一化），在高维情况下先用PCA（保留≥90%能量）或基于互信息/递归特征消除的函数选择以降低维度并保存可解释性；2) 原型构建——对每一场景/段计算样本均值 μ_class 与协方差 Σ_class，若协方差不可逆则采用协方差收缩（Ledoit–Wolf）或对角化正则化；输出每类的 μ、Σ 与样本数；3) 判别规则设计——实现并比较若干判别器：基于马氏距离的原型判别（D_M(x,μ_class)=√((x−μ)^T Σ^{-1}(x−μ))）作为首选可解释规则，并实现LDA（线性判别分析）和基于核的SVM与GMM（高斯混合模型）作为基准；对马氏距离方法同时实现拒绝机制（若 min D_M > 阈值T 则标记为“非归属”）；4) 阈值与置信度校准——通过训练集或留出验证集计算距离分布并用分位数法（例如95%上界）或ROC曲线选取操作点，或用GMM后验概率直接给出归属置信度；5) 性能评估指标——采用k折交叉验证（k≥5）报告分类准确率、混淆矩阵、每类精确率/召回率/F1、ROC/AUC（适用于二类或一对多场景）、并计算类内散度S_w与类间散度S_b及Fisher判别比J=trace(S_b)/trace(S_w)以量化总体可分性；对于无监督或聚类相关检验额外输出轮廓系数、Davies–Bouldin指数与BIC/AIC（用于GMM或模型选择）；6) 不确定性与灵敏度分析——采用bootstrap重采样和/或噪声注入蒙特卡洛实验评估分类准确率与阈值的置信区间，系统性地改变关键超参数（窗口长度W_n、正则化强度γ/λ、特征维数）并绘制性能-参数曲线以识别稳健参数区间；7) 失衡与鲁棒处理——如类别样本不均衡，采用加权损失或重采样技术，并测试协方差收缩、鲁棒估计器（如M估计）对性能的改进；8) 输出与保存——将训练好的模型（原型μ/Σ、LDA投影矩阵、SVM/GMM参数）、阈值T、详细评估报告（含混淆矩阵、ROC曲线和Fisher J 值）、以及灵敏度分析结果以机器可读格式保存；9) 实现建议——优先使用Python生态实现（numpy/scipy用于矩阵与统计、scikit-learn用于PCA/LDA/SVM/GMM/交叉验证、sklearn.covariance.LedoitWolf用于协方差收缩、matplotlib用于可视化），并为每一步记录随机种子与数据划分以保证可重复性。最终交付物应允许用一个待测指纹向量快速计算马氏距离与归属置信度、并能基于提供的评估报告判断该判别体系在不同置信水平下的误报/漏报率及其对关键参数的敏感度。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于窗口级指纹向量及其协方差，构建场景统计原型并训练判别器，校准马氏距离/概率阈值以评估与提升场景归属判别性能与稳健性",
          "expected_output": "标准化后的指纹数据集；每类原型参数(μ_class, Σ_class, 样本数)；已训练的判别器（马氏距离原型判别、LDA、SVM、GMM）及阈值T；交叉验证评估报告（准确率、混淆矩阵、精确率/召回率/F1、ROC/AUC、Fisher J、聚类指标可选）；灵敏度与不确定性分析结果（置信区间、性能-参数曲线）；可序列化模型文件与随机种子/配置",
          "key_inputs_constraints": "输入：窗口级指纹向量序列F∈R^d与对应协方差Σ_F（来自子任务2）；标签（场景/段ID）；配置参数（PCA保留能量≥90%、k折k≥5、阈值选择方法）；约束：协方差可能奇异需收缩正则；类别可能失衡需加权或重采样；保持可重复性（固定随机种子，记录划分）",
          "modeling_type": "分类+评价",
          "role_in_pipeline": "作为特征工程（子任务2）之后、场景识别与验证之前的核心训练与评估环节；前序依赖：指纹向量与协方差生成；后序输出：用于问题2/4的场景归属与阈值化拒绝决策，以及问题3的区域识别与稳健性报告"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别“基于马氏距离的原型判别”和阈值T校准为核心目标",
              "description": "明确本任务以μ_class、Σ_class构建原型并用D_M最小化做归属，需同时设计拒绝机制min D_M > T。",
              "score": 30,
              "evaluation_focus": "任务界定",
              "scoring_hint": "高分：给出D_M公式与拒绝条件；中分：仅提到距离判别或阈值其一；低分：未指出马氏距离或拒绝机制。"
            },
            {
              "sub_criteria": "指纹向量F与协方差Σ_F的输入约束",
              "description": "说明F维度、标准化需求（z-score/PCA≥90%能量）与Σ_F的可能奇异性及收缩处理必要性。",
              "score": 25,
              "evaluation_focus": "输入约束",
              "scoring_hint": "高分：明确PCA阈值与收缩策略；中分：仅提标准化或降维；低分：忽略输入尺度与协方差问题。"
            },
            {
              "sub_criteria": "判别性能评估与稳健性需求识别",
              "description": "识别需k折交叉验证、混淆矩阵、AUC、Fisher判别比J及灵敏度/不确定性分析。",
              "score": 25,
              "evaluation_focus": "评价指标",
              "scoring_hint": "高分：列出≥3种指标含J或AUC；中分：仅准确率/F1；低分：无系统评估方案。"
            },
            {
              "sub_criteria": "类不平衡与鲁棒性考虑",
              "description": "识别样本不均衡需加权或重采样，鲁棒协方差（Ledoit–Wolf/M估计）必要性。",
              "score": 20,
              "evaluation_focus": "鲁棒性认知",
              "scoring_hint": "高分：提出类权重/重采样+协方差收缩；中分：只提其一；低分：未提不平衡与鲁棒。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用任务术语准确复述“PCA≥90%能量与全局z-score”标准化流程",
              "description": "复述需先统一缩放/去均值，再PCA保留≥90%能量，保证后续判别器适用性。",
              "score": 25,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：顺序正确且含能量阈值；中分：顺序或细节缺一；低分：无具体标准化描述。"
            },
            {
              "sub_criteria": "清晰表述“μ_class, Σ_class, 样本数”的原型输出",
              "description": "复述每类需输出均值、协方差和样本数，并说明协方差正则化条件。",
              "score": 25,
              "evaluation_focus": "输出定义",
              "scoring_hint": "高分：三者齐全并含正则条件；中分：缺样本数或正则说明；低分：只给均值或含糊。"
            },
            {
              "sub_criteria": "阈值与置信度校准方法复述",
              "description": "复述用分位数（如95%）或ROC选择操作点，或用GMM后验概率给置信度。",
              "score": 25,
              "evaluation_focus": "阈值策略",
              "scoring_hint": "高分：至少两种方法并含具体百分位；中分：仅提阈值无方法；低分：未述校准。"
            },
            {
              "sub_criteria": "评估与灵敏度分析复述",
              "description": "复述k折≥5、混淆矩阵/AUC/F1、Fisher J，以及对W_n、特征维数、正则强度的敏感性分析。",
              "score": 25,
              "evaluation_focus": "评估计划",
              "scoring_hint": "高分：包含k值与参数列表；中分：有评估无敏感性；低分：未述评估细节。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "高斯性与马氏距离适用假设",
              "description": "明确指纹在类内近似高斯或椭球分布，使马氏距离与LDA合理；偏离时说明GMM兜底。",
              "score": 30,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：阐明椭球/高斯假设与备选模型；中分：仅提高斯；低分：无分布假设。"
            },
            {
              "sub_criteria": "协方差可逆与收缩正则假设",
              "description": "假定Σ_class可能奇异，提出Ledoit–Wolf或对角加λI并说明λ选择策略。",
              "score": 25,
              "evaluation_focus": "正则化",
              "scoring_hint": "高分：点名Ledoit–Wolf并给λ或自动法；中分：泛化正则；低分：忽略奇异性。"
            },
            {
              "sub_criteria": "独立同分布与划分可重复性假设",
              "description": "假设窗口级样本近似独立，同一场景内分布稳定；固定随机种子保证重现。",
              "score": 25,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：给出种子与分层k折；中分：仅提随机种子；低分：无可重复性说明。"
            },
            {
              "sub_criteria": "类别不平衡处理假设",
              "description": "假定存在不平衡，采用类权重或重采样；评估时使用加权指标。",
              "score": 20,
              "evaluation_focus": "鲁棒假设",
              "scoring_hint": "高分：明确权重=1/n_class或类似；中分：只提不平衡；低分：无处理设定。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "原型构建：μ_class与Σ_class（含收缩）",
              "description": "给出μ与Σ估计公式，若Σ不可逆使用Ledoit–Wolf或Σ+λI并记录参数。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式+收缩实现细节；中分：仅均值/协方差；低分：无可用Σ或未正则。"
            },
            {
              "sub_criteria": "判别器集合：马氏距离、LDA、SVM、GMM",
              "description": "实现多模型以对比，说明核SVM选择、GMM成分数（BIC/AIC）与LDA投影维数。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：四者齐备并含模型选择准则；中分：2–3个基线；低分：仅单一模型。"
            },
            {
              "sub_criteria": "阈值与置信度校准",
              "description": "基于训练/验证的D_M分布分位数或ROC选T；GMM用后验概率给置信度。",
              "score": 25,
              "evaluation_focus": "阈值设计",
              "scoring_hint": "高分：提供具体分位如95%并验证；中分：给T无依据；低分：缺阈值与置信度。"
            },
            {
              "sub_criteria": "标准化与降维（z-score+PCA≥90%能量）",
              "description": "统一缩放并以PCA降维，保留解释方差≥90%，记录投影矩阵供复现。",
              "score": 15,
              "evaluation_focus": "特征工程",
              "scoring_hint": "高分：报告累计方差与维数d；中分：做PCA无阈值；低分：未标准化或降维。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "k折交叉验证与数据划分可重复",
              "description": "采用k≥5的分层k折；固定random_state并记录划分索引。",
              "score": 25,
              "evaluation_focus": "实验设计",
              "scoring_hint": "高分：k≥5且分层+固定种子；中分：k折无分层/种子；低分：单次切分。"
            },
            {
              "sub_criteria": "协方差收缩与数值稳定性",
              "description": "使用Ledoit–Wolf或λI正则，确保Σ^{-1}可计算并检验条件数。",
              "score": 25,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：报告条件数/λ；中分：仅调用库默认；低分：逆失败或未处理。"
            },
            {
              "sub_criteria": "超参数搜索与模型选择（SVM/GMM）",
              "description": "SVM核与C/γ网格搜索；GMM成分数用BIC/AIC；记录最优参数。",
              "score": 25,
              "evaluation_focus": "调参与选择",
              "scoring_hint": "高分：网格或贝叶斯搜索+指标；中分：手工少量尝试；低分：无调参依据。"
            },
            {
              "sub_criteria": "阈值T求解与拒绝率控制",
              "description": "通过分位数或ROC选择T并报告对应误报/漏报与拒绝率。",
              "score": 25,
              "evaluation_focus": "阈值求解",
              "scoring_hint": "高分：给T值与ROC点、拒绝率；中分：有T无代价权衡；低分：无T或不可复现。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现流水线（z-score→PCA→原型/判别→评估）",
              "description": "Python实现并固定随机种子；管道化与配置化（保存参数与版本）。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：pipeline/Config与seed齐全；中分：脚本可跑无配置；低分：不可复现。"
            },
            {
              "sub_criteria": "马氏距离与拒绝机制接口",
              "description": "提供函数计算D_M(x,μ,Σ^{-1})与min D_M> T的归属/拒绝结果与置信度。",
              "score": 25,
              "evaluation_focus": "接口完备性",
              "scoring_hint": "高分：返回类ID、距离、置信度；中分：仅类ID；低分：无可调用接口。"
            },
            {
              "sub_criteria": "模型与阈值持久化",
              "description": "序列化保存μ/Σ、Σ^{-1}或收缩器、PCA/LDA矩阵、SVM/GMM参数、阈值T。",
              "score": 25,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：版本化文件+加载函数；中分：只保存部分；低分：不保存或不可加载。"
            },
            {
              "sub_criteria": "评估与可视化产物",
              "description": "生成混淆矩阵、ROC/AUC、Fisher J、性能-参数曲线并导出报告。",
              "score": 25,
              "evaluation_focus": "可视化与报告",
              "scoring_hint": "高分：图表+数值表导出；中分：部分指标或仅图；低分：缺评估产物。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "分类性能解读（准确率/精确率/召回率/F1/ROC-AUC）",
              "description": "逐类与总体报告并对失衡进行加权指标说明与比较基线（LDA/SVM/GMM）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：完整指标+基线对比；中分：少量指标；低分：仅总体准确率。"
            },
            {
              "sub_criteria": "可分性量化与Fisher判别比J",
              "description": "计算S_w、S_b与J=trace(S_b)/trace(S_w)，并解释与误差的相关性。",
              "score": 20,
              "evaluation_focus": "数理指标",
              "scoring_hint": "高分：给出J数值与解读；中分：仅提J无计算；低分：未涉及。"
            },
            {
              "sub_criteria": "阈值T与拒绝样本分析",
              "description": "报告阈值操作点下的拒绝率、误报/漏报变化，给出T的选择理由。",
              "score": 25,
              "evaluation_focus": "阈值评估",
              "scoring_hint": "高分：量化三者关系并图示；中分：定性描述；低分：无分析。"
            },
            {
              "sub_criteria": "灵敏度与不确定性分析结论",
              "description": "展示对W_n、特征维数、正则强度的性能-参数曲线与bootstrap置信区间。",
              "score": 25,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：曲线+CI并给稳健区间；中分：仅单参数或无CI；低分：无敏感性结果。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务 4（路段分段、样本归属判定与决策输出）的目标是：以一个按时间/位置顺序给出的指纹序列 F(n)（每个元素包含向量化指纹与可选协方差估计 Σ_F(n)）为输入，自动将连续轨迹划分为若干具有内部统计均匀性的段（segments），为每段计算稳健的段级原型（均值 μ_seg 与协方差 Σ_seg），并为若干待测样本计算是否来自该路段以及若来自则定位到哪一段，同时为所有判定给出可量化的置信度与“误判距离”估计；为实现该目标必须按确定的步骤和算法模块化执行：首先对原始指纹序列做可选去噪/平滑（例如中值滤波或卡尔曼平滑）以抑制短期测量噪声；其次以相邻窗或重叠子序列为单位构造局部统计描述（窗口内均值与协方差），并对相邻窗口统计量计算变化度量 S(n)，可选度量包括基于窗口高斯近似的对称KL散度、或基于合并协方差的马氏距离（用 Ledoit–Wolf 或收缩方法保证协方差可逆）；第三步用变化点检测算法检测候选分割点：可选实现包括 CUSUM 或累积马氏距离阈值、基于动态规划的最优分段（最小化段内负对数似然加复杂度惩罚 λ·#segments）或专用库（如 ruptures）中的 Pelt/Window 方法，并通过信息准则（BIC/AIC）或交叉验证/验证集上的 ROC/精度曲线确定惩罚参数或阈值；第四步对候选点做后处理合并（将间隔小于 merge_gap 的相邻候选点合并）并施加最小段长约束 L_min，以避免过细切分，最后输出段边界索引与每段样本数；第五步对每段计算段级原型 μ_seg、Σ_seg 与段内质量指标（段内平均马氏距离、段内协方差迹或谱熵）以及相邻段间可分性度量（相邻段间马氏距离或对称KL），并记录这些量以便后续置信度解释；第六步针对待测样本（单个或多帧样本文件），计算其指纹 f_test（及可选协方差 Σ_test），对所有段计算马氏距离 D_i = √((f_test−μ_seg_i)^T Σ_seg_i^{-1} (f_test−μ_seg_i)) 或基于段级高斯/GMM 模型的后验概率 p_i；按规则判定归属：若 min_i D_i < T_D（或对应 p_max > p_thresh）则分配到 argmin_i D_i，否则拒绝归属为“非路段样本”；阈值 T_D 与 p_thresh 应通过训练/验证数据上分位数或 ROC 曲线选择并记录；第七步为每次归属给出置信度指标（如基于距离的渐近 p-value、后验概率或 bootstrap 重采样得出的置信区间），并计算“误判距离”作为分配段索引与最接近真实段索引之差或（若段物理长度已知）对应的物理距离估计；第八步将所有结果以结构化格式输出：段列表（每段起止索引、μ_seg、Σ_seg、段内样本数、质量度量）、变化点置信区间、待测样本判定表（样本ID、分配段、D_min、p_max、拒绝标志、误判距离估计、置信度区间），并保存用于复现的参数集（平滑/窗口参数、检测阈值、最小段长 L_min、merge_gap、随机种子）；实现建议采用数值与统计库（numpy/scipy）、协方差收缩与分类工具（scikit-learn）、专用变化点检测库（ruptures）与并行化工具以并行计算窗口统计，复杂度主要受样本数 N 与指纹维度 d 的影响（大致 O(N·d^2) 用于协方差逆与距离计算），并应在实现中对协方差奇异、样本不均衡与短段情况做稳健处理（收缩、对角正则或拒绝判决），以保证输出的段划分与样本归属既可解释又可量化置信度。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对按时间/位置排序的指纹序列 F(n) 进行分段与统计原型拟合，并对待测样本执行场景归属判定与误判距离评估及置信度评估",
          "expected_output": "段边界索引与每段样本数；每段原型参数μ_seg、Σ_seg与质量度量；变化点置信区间；待测样本判定表（样本ID、分配段、D_min或p_max、拒绝标志、误判距离估计、置信区间）；可复现的参数配置文件",
          "key_inputs_constraints": "输入为按n排序的指纹向量序列F(n)与可选协方差Σ_F(n)；需提供分段检测参数（阈值或惩罚λ、L_min、merge_gap）与平滑参数；协方差需可逆或使用收缩（Ledoit–Wolf/对角正则）；待测样本指纹f_test（可含Σ_test）；复杂度受N与d影响，需保证稳定性与数值可逆",
          "modeling_type": "分类+评价+拟合",
          "role_in_pipeline": "作为子任务2（指纹向量构造）之后、子任务3（场景判别模型）与最终应用之前的路段级结构化建模与决策输出环节；前序依赖F(n)与其标准化策略；后续向判别与在线识别模块提供段级原型与阈值",
          "assumptions": "若Σ_F(n)缺失则以段内样本协方差收缩估计；若物理长度未知则误判距离以段索引差度量；变化点检测采用ruptures的Pelt或Window法与对称KL/马氏距离作为代价"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别F(n)分段与原型拟合的核心目标",
              "description": "是否明确本任务需同时完成指纹序列F(n)的分段、每段μ_seg与Σ_seg拟合，以及待测样本的归属判定与误判距离评估",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚列出分段+原型+判定+置信度四要素；中分：缺少其一；低分：仅描述分段或仅分类"
            },
            {
              "sub_criteria": "关键度量与阈值的识别",
              "description": "是否指出需计算马氏距离D_i、对称KL或负对数似然代价，并通过阈值T_D或p_thresh实现拒绝机制",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出D_i定义与阈值来源（ROC/分位数）；中分：仅口述距离无阈值来源；低分：无拒绝机制"
            },
            {
              "sub_criteria": "约束与数值稳定性识别",
              "description": "是否识别协方差不可逆风险并提出收缩/对角正则、最小段长L_min和merge_gap以避免过细切分",
              "score": 35,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：同时提出收缩+L_min+merge_gap；中分：仅提到其一；低分：未考虑"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "输入输出边界与格式复述",
              "description": "是否精确定义输入F(n)、Σ_F(n)、分段参数与输出段列表、判定表、参数集",
              "score": 30,
              "evaluation_focus": "需求对齐",
              "scoring_hint": "高分：列出全部字段；中分：缺少置信区间或质量度量；低分：输出不成体系"
            },
            {
              "sub_criteria": "流程顺序复述",
              "description": "是否按平滑→局部统计→变化点检测→后处理→段级原型→样本归属→置信度→结构化输出复述",
              "score": 40,
              "evaluation_focus": "流程化",
              "scoring_hint": "高分：顺序完整且合理；中分：调换或缺1步；低分：流程混乱"
            },
            {
              "sub_criteria": "关键参数复述与可调性",
              "description": "是否复述T_D/p_thresh、L_min、merge_gap、惩罚λ/模型法（Pelt/Window/CUSUM）及调参依据（BIC/ROC）",
              "score": 30,
              "evaluation_focus": "参数意识",
              "scoring_hint": "高分：参数与校准方法成对出现；中分：仅列参数；低分：未提参数"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "段内高斯近似与独立性假设",
              "description": "是否明确段内F(n)服从高斯近似以支持μ_seg、Σ_seg与马氏距离/对称KL的使用",
              "score": 30,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：写明高斯近似与其合理性；中分：隐含使用未声明；低分：与所用度量矛盾"
            },
            {
              "sub_criteria": "Σ估计与收缩假设",
              "description": "是否假设使用Ledoit–Wolf或对角正则确保Σ_seg可逆并说明短段处理策略",
              "score": 35,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出收缩方法与短段拒绝/合并策略；中分：仅提收缩；低分：无处理"
            },
            {
              "sub_criteria": "误判距离定义假设",
              "description": "是否定义误判距离为段索引差或映射为物理距离并说明物理长度未知时的替代方案",
              "score": 35,
              "evaluation_focus": "评价定义",
              "scoring_hint": "高分：两种度量均给出；中分：仅索引差；低分：未定义"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "变化度量S(n)构造",
              "description": "是否基于相邻窗口高斯近似构造对称KL或合并协方差马氏距离的S(n)并说明窗口化细节",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：给出S(n)公式与窗口大小；中分：仅口述；低分：未定义S(n)"
            },
            {
              "sub_criteria": "变化点检测与惩罚项",
              "description": "是否实现Pelt/Window/CUSUM并最小化段内负对数似然+λ·#segments或等价阈值法",
              "score": 30,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：清楚目标函数与λ选择方法；中分：仅阈值；低分：经验切分无依据"
            },
            {
              "sub_criteria": "段级原型与质量度量",
              "description": "是否计算μ_seg、Σ_seg、段内平均马氏距离和相邻段间马氏距离/对称KL用于可分性评估",
              "score": 40,
              "evaluation_focus": "统计建模",
              "scoring_hint": "高分：原型+两类质量/可分性度量齐全；中分：缺其一；低分：仅均值"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值稳定与Σ^{-1}求解",
              "description": "是否采用协方差收缩、对角正则或伪逆，并验证条件数/失败回退策略",
              "score": 35,
              "evaluation_focus": "数值计算",
              "scoring_hint": "高分：实现收缩+条件数监控；中分：仅收缩；低分：直接求逆致不稳定"
            },
            {
              "sub_criteria": "阈值T_D与p_thresh校准",
              "description": "是否用验证集分位数或ROC确定T_D/p_thresh，并记录操作点与预期FPR/TPR",
              "score": 35,
              "evaluation_focus": "阈值校准",
              "scoring_hint": "高分：报告阈值与对应FPR/TPR；中分：给阈值无依据；低分：无阈值"
            },
            {
              "sub_criteria": "后处理与约束",
              "description": "是否合并近邻候选（merge_gap）并施加最小段长L_min，保证结果可解释",
              "score": 30,
              "evaluation_focus": "规则实现",
              "scoring_hint": "高分：两者兼施并量化参数；中分：仅一项；低分：无后处理"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "分段与检测实现（ruptures/自研）",
              "description": "是否提供可运行代码实现Pelt/Window/CUSUM，并支持配置λ、L_min、merge_gap与随机种子",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：脚本可运行且参数可配置；中分：硬编码参数；低分：伪代码或缺失"
            },
            {
              "sub_criteria": "马氏距离与收缩协方差",
              "description": "是否用sklearn.covariance.LedoitWolf或等实现Σ_seg并稳健计算D_i",
              "score": 35,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：含失败回退与单元测试；中分：基本可用；低分：数值溢出/崩溃"
            },
            {
              "sub_criteria": "结构化输出与复现参数",
              "description": "是否输出段列表、判定表、参数集（阈值、L_min、merge_gap、λ）并持久化为机器可读格式",
              "score": 30,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：JSON/CSV落盘且含版本/种子；中分：仅打印；低分：无输出"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "段划分质量与可分性报告",
              "description": "是否报告段内平均马氏距离、协方差迹/谱熵与相邻段间马氏距离/对称KL，并进行解释",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量给出并解释边界合理性；中分：给数值少解释；低分：无量化"
            },
            {
              "sub_criteria": "归属判定与拒绝分析",
              "description": "是否给出D_min或p_max、拒绝标志、误判距离及其置信区间，分析错误来源",
              "score": 35,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：含CI与错误案例复盘；中分：仅点估计；低分：无拒绝与误判评估"
            },
            {
              "sub_criteria": "阈值/参数敏感性",
              "description": "是否展示T_D/λ/L_min变动对分段数与判定准确率的影响曲线或表格",
              "score": 30,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：至少两参数敏感性；中分：仅单参数；低分：无敏感性分析"
            }
          ]
        }
      }
    }
  }
}