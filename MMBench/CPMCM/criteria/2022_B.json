{
  "task_id": "2022_B",
  "problem": "本赛题由两个子问题组成，第二个子问题的约束都基于第一个子问题并与之相容，但两个子问题所提供的数据不相关。如果概念定义和过程描述与业界有所出入，皆以本赛题为准。本题假定：\n\n1. 只考虑齐头切的切割方式（直线切割、切割方向垂直于板材一条边，并保证每次直线切割板材可分离成两块）；\n2. 切割阶段数不超过3，同一个阶段切割方向相同；\n3. 排样方式为精确排样；\n4. 假定板材原片仅有一种规格且数量充足；\n5. 排样方案不用考虑锯缝宽度（即切割的缝隙宽度）影响。\n\\textbf{子问题1：}排样优化问题。要求建立混合整数规划模型，在满足生产订单需求和相关约束条件下，尽可能减少板材用量。\n约束：\n1. 在相同栈（stack）里的产品项（item）的宽度（或长度）应该相同；\n2. 最终切割生成的产品项是完整的，非拼接而成。\n本子问题要求编程，以数据集A为输入，输出结果要求见第五部分。\n\\textbf{子问题2：}订单组批问题。要求建立混合整数规划模型，对数据集B中全部的订单进行组批，然后对每个批次进行独立排样，在满足订单需求和相关约束条件下，使得板材原片的用量尽可能少。\n在满足子问题1约束的基础上进一步要求：\n1. 每份订单当且仅当出现在一个批次中；\n2. 每个批次中的相同材质的产品项（item）才能使用同一块板材原片进行排样；\n3. 为保证加工环节快速流转，每个批次产品项（item）总数不能超过限定值；\n4. 因工厂产能限制，每个批次产品项（item）的面积总和不能超过限定值；\n本子题要求编程，以数据集B为输入，输出结果要求见第五部分。\n四、输入数据说明\n每套输入数据由两部分组成，一部分是输入参数（参见后文），另一部分是产品项（item）数据（需要另外下载），这里仅给出格式描述。\n1. 输入参数：\n1). 单个批次产品项（item）总数上限 max_item_num = 1000\n2). 单个批次产品项（item）的面积总和上限max_item_area = 250（m2）\n3). 原片长度plate_length = 2440（mm）\n4). 原片宽度plate_width = 1220 (mm)\n\n2. 产品项数据格式\n\\begin{table}\n\\begin{tabular}{|c|c|c|c|c|}\n\\hline\n序号 & 材质 item_material & 数量 & 长度(mm) & 宽度(mm) \\\\\nitem_id & & item_num & item_length & item_width \\\\\n\\hline\n0 & JL-18-E0 & 1 & 553 & 60 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n3. 数据集：\n1). 数据集A；\n2). 数据集B。\n\n",
  "subtask": {
    "1": {
      "subtask": "子任务1（数据预处理、基本假设与符号化建模准备）应当独立完成并输出一套用于后续建模的、结构化且经校验的输入数据与符号说明：具体工作步骤为——（1）数据读取与校验：用可复现脚本（建议 Python + pandas/numpy）读取给定 CSV 文件，逐字段校验数据类型、单位（确认长度/宽度单位为 mm）、缺失值与重复行；对 item_num>1 的记录根据需要提供两种可选处理：按需展开为多条单位条目（每条 d_i=1）或保留为一条并设 d_i=item_num，同时记录两种模式的文件；检查并剔除或标记异常值（负值、零值、尺寸任一维度大于原片 PL/PW 的项应报错或作特殊处理）；（2）明确并记录工程假设：强制设定齐头切（guillotine）、最多三阶段切割、精确排样、单一原片规格 PL=2440 mm、PW=1220 mm、忽略锯缝宽度，以及一个可配置的旋转许可标志 rotate_allowed（布尔）；同时约定坐标系：原片左下角为原点，X 轴沿板长 PL 方向，Y 轴沿板宽 PW 方向；（3）标准化与索引化：为每个产品项生成唯一索引 i，产生标准化字段集 {item_id, mat(i)（材质）, ord(i)（所属订单，可为空）, d_i, l_i, w_i, area_i = l_i*w_i, rotate_allowed}，并按材质将项分组；如允许旋转，则在预处理阶段记录两种方向的尺寸候选并标注为同一项的两个方向选项；（4）聚合与降维选项：提供按（材质、长、宽）三元组聚合统计以减少模型变量维度（记录每类的总需求量），同时保留逐单位明细文件以便几何排样使用；（5）几何有效性与离散化准备：计算并输出所有项是否满足 l_i ≤ PL 且 w_i ≤ PW（或在旋转下满足），并生成唯一的宽度集合 W 和长度集合 L（用于后续 stripe/stack 离散化），同时生成按宽度/长度的出现频次分布表；（6）下界与基准量计算：计算总体参数 PL,PW,A_plate=PL*PW、总产品面积 S = Σ_i d_i*area_i、面积下界 LB_area = ceil(S/A_plate) 以及按宽度/长度的粗下界（例如按每一宽度 w 计算所需 stripe 数的下界），并将这些下界写入元数据以供结果评估；（7）输出格式与元数据：生成并保存三份标准化输出文件——（A）详尽条目文件（逐单位或聚合，含索引、材质、订单、d_i、l_i、w_i、area、旋转选项），（B）分材质汇总表（每材质的尺寸类别、总件数与总面积、W/L 列表），（C）元数据 JSON（含 PL,PW,A_plate、max_item_num、max_item_area、rotate_allowed、下界值、字段说明与符号表）；同时给出符号化说明文档，明确定义将用于建模的集合与参数符号（例如 PL,PW,A_plate；集合 I（产品项）、O（订单）、M（材质）；参数 d_i,l_i,w_i,mat(i),ord(i); 以及模型中将使用的布尔/选项参数如 rotate_allowed），以便后续把数据直接映射到 MIP 或列生成算法的变量与约束中；整个子任务必须生成可重复运行的代码、清晰的日志（记录所有校验/异常处理决策）以及用于人工核验的统计摘要表与可选的二维尺寸分布可视化图，以保证数据质量和符号一致性，供后续建模模块直接调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "完成子任务1的数据读取与校验、标准化与符号化建模准备，生成可复现的输入数据集与符号说明以支持后续排样优化模型（包括下界计算与几何有效性校验）",
          "expected_output": "可复现的 Python 脚本与日志、详尽条目文件（CSV，逐单位或聚合）、分材质汇总表（CSV）、元数据 JSON（包含 PL,PW,A_plate、下界等）、符号说明文档、统计摘要表与二维尺寸分布可视化图",
          "key_inputs_constraints": "1) 原始 CSV 文件字段：item_id (字符串/整数), item_material (字符串), item_num (整数≥1), item_length (mm, 实数), item_width (mm, 实数)；2) 单一原片规格 PL=2440 mm, PW=1220 mm；3) rotate_allowed (布尔，可配置)；4) 需校验单位为 mm、无缺失/重复、无负/零尺寸；5) max_item_num 和 max_item_area 为上游约束用于记录（数值已给）",
          "modeling_type": "混合",
          "role_in_pipeline": "作为排样优化（MIP/列生成）前的关键数据预处理与符号化环节：依赖原始 CSV 输入；输出供后续模型构建（变量映射）、下界比较与几何排样算法直接调用；后序任务包括 MIP 建模、排样求解与结果验证",
          "assumptions": "题目要考什么——按题型拆解关键能力：本子任务重点考查数据读取与校验、工程假设明确、符号化建模准备与可复现代码能力。若输入未显式给出 rotate_allowed，则默认配置 rotate_allowed = False；若 CSV 中无 order 字段，ord(i) 可为空。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并列出数据读取与校验需求（读取、字段类型、单位 mm）",
              "description": "必须准确识别需要实现的读取/校验项：字段类型、单位（mm）、缺失值、重复行与 item_num 展开两种模式等。",
              "score": 40,
              "evaluation_focus": "数据校验能力",
              "scoring_hint": "高分：准确列出所有校验项并能用脚本检出实例（包含单位 mm 检验）；中分：列出常见校验但缺少单位或重复行检验；低分：遗漏 item_num 展开或单位校验"
            },
            {
              "sub_criteria": "识别几何约束与异常值（尺寸≤0、尺寸>PL/PW、旋转可行性）",
              "description": "明确要检测负值/零值、任何维度大于 PL/PW 的项并制定报错或特殊处理规则，包含 rotate_allowed 情况下的可行性判断。",
              "score": 30,
              "evaluation_focus": "几何有效性",
              "scoring_hint": "高分：给出逐条判定规则并示例标记/剔除流程；中分：检测规则存在但处理流程模糊；低分：未检测尺寸超限或未考虑 rotate_allowed"
            },
            {
              "sub_criteria": "识别输出与可复现性要求（脚本、日志、两种展开模式文件）",
              "description": "识别须产出的可复现 Python 脚本、详细日志、逐单位与聚合两类文件及元数据 JSON，说明两种模式的用途。",
              "score": 30,
              "evaluation_focus": "工程复现性",
              "scoring_hint": "高分：列出并能生成脚本+日志+两种输出文件；中分：列出文件但未强调可复现脚本或日志；低分：未明确两种模式或无日志要求"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述并明确输出三份标准文件要求（详尽条目、分材质汇总、元数据 JSON）",
              "description": "明确三份文件的字段、格式要求与保存路径，说明详尽条目可为逐单位或按类聚合两种模式。",
              "score": 40,
              "evaluation_focus": "规格明晰",
              "scoring_hint": "高分：逐字段列出三份文件样式与示例（包含索引、d_i、area 等）；中分：列出文件但字段不全；低分：只笼统描述文件未给字段"
            },
            {
              "sub_criteria": "复述符号化说明与集合参数（PL,PW,A_plate、集合 I,M,O 与参数 d_i,l_i,w_i）",
              "description": "明确定义将用于建模的符号表：集合与参数名、单位和值域，便于直接映射到 MIP 变量。",
              "score": 30,
              "evaluation_focus": "符号化能力",
              "scoring_hint": "高分：给出完整符号表与示例映射；中分：提供部分符号（如 PL,PW,A_plate）但集合定义不全；低分：无可直接映射的符号说明"
            },
            {
              "sub_criteria": "复述并说明两种 item_num 处理模式（展开与聚合）及其输出差别",
              "description": "明确按需展开为单位条目与保留聚合条目两种处理的文件生成规则、字段差异和后续适用场景（几何排样 vs MIP 降维）。",
              "score": 30,
              "evaluation_focus": "方法说明",
              "scoring_hint": "高分：清楚给出两种模式的转换脚本和示例行数差异；中分：描述模式但未给转换细节；低分：未提供两种模式或混淆适用场景"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确工程假设：齐头切、最多三阶段、精确排样、忽略锯缝宽度",
              "description": "必须写明并固定齐头切、≤3 阶段、排样精确、忽略锯缝等工艺假设以保证与题意一致。",
              "score": 30,
              "evaluation_focus": "工程假设",
              "scoring_hint": "高分：逐项列明并说明与数据处理的影响；中分：列出假设但未说明影响；低分：缺少关键假设如齐头切或锯缝忽略"
            },
            {
              "sub_criteria": "明确原片规格默认值与可配置项（PL=2440,PW=1220,rotate_allowed）",
              "description": "说明 PL,PW 的固定值、rotate_allowed 的可配置性及默认值，且脚本可从配置文件读取这些参数。",
              "score": 30,
              "evaluation_focus": "参数配置",
              "scoring_hint": "高分：配置项可外部设置且文档化；中分：写明值但不可配置；低分：未说明 rotate_allowed 或 PL/PW"
            },
            {
              "sub_criteria": "对异常处理建立明确策略（剔除、标记或报错的判定规则）",
              "description": "对负值/零值、尺寸>PL/PW、重复数据等给出可执行的处理策略并记录在日志与元数据中。",
              "score": 40,
              "evaluation_focus": "异常策略",
              "scoring_hint": "高分：提供脚本化判定并在日志中记录每条处理决策；中分：列出策略但未实现日志记录；低分：策略不明确或遗漏关键异常类型"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建符号表并将数据映射到模型参数（集合 I,M,O 与参数 d_i,l_i,w_i）",
              "description": "输出可直接用于 MIP 的符号化文件与映射说明，保证字段名与单元一致（单位 mm、面积 mm^2 或 m^2 需注明）。",
              "score": 40,
              "evaluation_focus": "建模衔接",
              "scoring_hint": "高分：提供映射表、字段类型与单位转换脚本；中分：提供符号表但缺单位一致性说明；低分：符号与输出文件不一致"
            },
            {
              "sub_criteria": "计算并记录下界 LB_area 及按宽度/长度的粗下界（stripe 下界）",
              "description": "精确计算 A_plate、总件面积 S、LB_area = ceil(S/A_plate) 与按宽度/长度的条带/栈的下界并记录为元数据。",
              "score": 30,
              "evaluation_focus": "数学下界",
              "scoring_hint": "高分：下界计算正确且保留单位及示例；中分：提供 LB_area 但未提供条带下界；低分：未提供下界或计算错误"
            },
            {
              "sub_criteria": "提供按材质聚合与降维选项并保留逐单位明细",
              "description": "实现按（材质、长、宽）聚合统计减少 MIP 变量维度，同时保存逐单位明细供几何排样使用，记录聚合映射关系。",
              "score": 30,
              "evaluation_focus": "降维设计",
              "scoring_hint": "高分：同时输出聚合表与逐单位文件并有映射脚本；中分：仅输出聚合或逐单位之一；低分：未考虑聚合或映射"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "计算几何有效性判断（l_i≤PL 且 w_i≤PW 或旋转可行）",
              "description": "对每一项计算并输出布尔可装板性，考虑 rotate_allowed 情况并在日志中记录不可装项的处理。",
              "score": 40,
              "evaluation_focus": "几何检验",
              "scoring_hint": "高分：逐项可装板性正确并有示例日志；中分：整体比例统计正确但未逐项列示；低分：未检查或检查方法错误"
            },
            {
              "sub_criteria": "生成宽度集合 W 与长度集合 L，以及出现频次分布表",
              "description": "输出离散化集合 W/L 用于 stripe/stack 离散化，并给出频次分布表以辅助后续离散化策略。",
              "score": 30,
              "evaluation_focus": "离散准备",
              "scoring_hint": "高分：给出完整 W/L 列表和频次直方图；中分：仅给出列表无频次或图；低分：未生成或生成错误"
            },
            {
              "sub_criteria": "计算并记录基本下界与基准量（A_plate,S,LB_area）以供结果评估",
              "description": "明确 A_plate、总面积 S、LB_area 并将其写入元数据 JSON，便于后续结果与下界比较。",
              "score": 30,
              "evaluation_focus": "基准计算",
              "scoring_hint": "高分：数值一致且单位明确存入元数据；中分：提供数值但单位或舍入说明不明；低分：未提供或计算错误"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现的 Python 脚本与日志（读取、校验、异常处理均有日志记录）",
              "description": "提供可直接运行的 Python 脚本（建议 pandas/numpy），并生成详细日志记录每次校验与异常处理决策，脚本可重现所有输出文件。",
              "score": 40,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：脚本可运行且日志详尽（示例日志可复现）；中分：脚本可运行但日志不完整；低分：脚本运行困难或无日志"
            },
            {
              "sub_criteria": "实现两种 item_num 处理模式的自动化（展开与聚合）并保存对应文件",
              "description": "代码应能按配置生成逐单位展开文件与聚合文件，并记录两者之间的转换映射或注释以支持复审。",
              "score": 30,
              "evaluation_focus": "功能完备性",
              "scoring_hint": "高分：两种模式一键切换并有测试样例；中分：手动流程存在但半自动；低分：仅实现一种模式或不稳定"
            },
            {
              "sub_criteria": "输出格式与元数据 JSON 正确（字段完整、单位清晰）且包含下界与配置",
              "description": "脚本应保存三份标准化输出文件并生成元数据 JSON（含 PL,PW,A_plate,max_item_num,max_item_area,rotate_allowed,下界等）。",
              "score": 30,
              "evaluation_focus": "交付完整度",
              "scoring_hint": "高分：所有文件按规格生成且 JSON 字段完整；中分：文件生成但 JSON 缺字段；低分：输出不符合指定格式"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "生成统计摘要与可视化（尺寸分布、频次表、面积利用率基准对比）",
              "description": "输出统计摘要表与至少一张二维尺寸分布图和频次直方图，比较实际总面积 S 与 LB_area 给出利用率基准。",
              "score": 40,
              "evaluation_focus": "数据洞察",
              "scoring_hint": "高分：提供图表和表格并计算利用率差值；中分：仅提供表或图之一；低分：无统计或图表混乱"
            },
            {
              "sub_criteria": "异常与质量报告（不可装项、剔除/标记条目清单）",
              "description": "列出所有被剔除或标记的异常条目并解释处理理由，日志与异常报告行对应以便人工核验。",
              "score": 30,
              "evaluation_focus": "质量控制",
              "scoring_hint": "高分：异常清单完整且可追溯到原 CSV 行；中分：异常类型列出但行号缺失；低分：无异常报告或报告含糊"
            },
            {
              "sub_criteria": "建模就绪性评估（元数据与符号说明评估是否可直接映射到 MIP）",
              "description": "检查元数据 JSON 与符号说明是否完整并能被后续 MIP/列生成模型直接调用，给出就绪性评分与改进建议。",
              "score": 30,
              "evaluation_focus": "建模衔接",
              "scoring_hint": "高分：确认可直接映射并给出改进建议；中分：多数字段可映射但存在小差异；低分：映射缺失或需重大修改"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（上层混合整数规划建模与求解）的目标是：以已有的“排样模式”集合P（每一模式p为单张原片上、且只含单一材质mat(p)的可行三阶段齐头切排样方案，已包含对每种产品i的放置容量q_{p,i}、模式占用面积area_p及具体几何布局信息）为输入，构造并求解一个整数规划模型，按批次（batch）把数据集B中的全部订单O分配到若干批次b，并在每个批次内按材质选择并使用若干模式，使得满足所有订单的产品项需求且总用原片数最小；为便于实现，模型须明确使用的输入项为：产品/项集合I（或按订单细化的项集合，含每项的材质mat(i)、所属订单ord(i)、需求量d_{i}、尺寸与面积）、订单集合O（每个订单o提供其包含项集合、订单总项数num_items(o)与总面积area_of_order(o)）、模式集合P（含q_{p,i}、area_p、mat(p)及每模式的坐标布局）、以及参数PL,PW、max_item_num、max_item_area和批次数上界B_max（可设为|O|或ceil(total_area/max_item_area)）；决策变量包括：二元变量 b_{o,b}（若订单o被指派到批次b则为1，且每个订单恰好被分配到一个批次： sum_b b_{o,b} = 1），非负整数变量 x_{p,b}（在批次b中使用模式p的张数，且仅允许当mat(p)等于相应项材质时被用于覆盖该材质的需求），模型目标为最小化总原片数 min ∑_{b} ∑_{p∈P} x_{p,b}；约束集合应至少包含：1) 订单分配约束 sum_b b_{o,b} = 1 ∀o∈O；2) 每批次容量约束 sum_{o} b_{o,b} * num_items(o) ≤ max_item_num 和 sum_{o} b_{o,b} * area_of_order(o) ≤ max_item_area ∀b，保证批次内项数与面积上限；3) 覆盖约束（按批次与材质划分）——对每种产品i及每个批次b，确保该批次中来自对应材质的模式提供的数量覆盖属于该批次的该产品需求： ∑_{p∈P_{mat(i)}} q_{p,i} * x_{p,b} ≥ ∑_{o: i∈order(o)} b_{o,b} * d_{i,o}；4) 模式-材质一致性隐含在P的定义中（即不允许用不同材质的模式覆盖i），以及非负/整型域约束 x_{p,b} ∈ Z_{\\ge0}, b_{o,b} ∈ {0,1}；另外应加入批次可行性修正项（例如禁止无订单却使用模式的浪费变量，或对空批次的剔除约束）以约束解结构。为便于计算与工程实现，模型说明应明确：批次数索引范围b∈{1..B_max}；当模式集合P规模过大时，主问题以列（模式）为列生成的主问题形式求解，其LP松弛可作为下界，整数化可通过直接求解MIP（若P可枚举时）或采用分支定价/启发式整数化（若P以动态生成方式提供）完成；求解工具建议使用商用MIP求解器（如 Gurobi 或 CPLEX）或开源替代，并应输出决策映射：每个被选模式的复制次数x_{p,b}用于实例化具体原片编号并结合模式内的坐标布局生成 cut_program.csv（列出每张原片上每个产品id的 x,y 坐标与方向尺寸），同时把每条产品项记录附加其批次号 b_{o,b} 生成 sum_order.csv。该子任务须明确变量与约束的数学表达、批次数上界设定逻辑、输入P的格式要求（包含q_{p,i}与布局），并说明若干必要实施细节：如何将按批次的覆盖约束与订单分配变量耦合以保证“每份订单当且仅当出现在一个批次中”的严格性、如何通过材质分组限制模式的可用性、以及如何在算例规模增大时采用列生成或启发式对主问题进行可扩展求解。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并求解上层混合整数规划以优化订单组批与排样模式选择，最小化总原片数。",
          "expected_output": "最优/可行MIP解：批次分配矩阵b_{o,b}、模式使用数x_{p,b}、最小原片数；并生成cut_program.csv与sum_order.csv的映射方案说明。",
          "key_inputs_constraints": "输入：I(含mat(i), ord(i), d_i, l_i, w_i, area_i)、O(含num_items(o), area_of_order(o), item清单)、P(含q_{p,i}, area_p, mat(p), 几何布局)、参数PL,PW,max_item_num,max_item_area,B_max。约束：sum_b b_{o,b}=1；每批次∑ b_{o,b}*num_items(o)≤max_item_num且∑ b_{o,b}*area_of_order(o)≤max_item_area；覆盖∑_{p∈P_mat(i)} q_{p,i} x_{p,b} ≥ ∑_{o: i∈o} b_{o,b} d_{i,o}；x_{p,b}∈Z≥0, b_{o,b}∈{0,1}；模式材质一致性mat(p)=mat(i)。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为上层主问题：在子任务1预处理与子任务3列/模式生成之后，整合模式集合P并进行全局批次-模式联合优化；输出供后续切割程序实例化与生产调度使用。",
          "assumptions": "B_max取max{|O|, ceil(total_area/max_item_area)}；P仅含单一材质模式；若P过大采用列生成，LP松弛用于下界，必要时分支定价或启发式整数化。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "最小化总原片数的优化目标识别",
              "description": "明确目标函数为min ∑_b ∑_p x_{p,b}并与原片数对应，而非面积或利用率替代指标。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰写出min∑ x_{p,b}且解释其等于原片数；中分：描述最小原片但目标为面积或含权重不当；低分：目标不清或与任务不符。"
            },
            {
              "sub_criteria": "订单组批与模式选择的耦合识别",
              "description": "识别到b_{o,b}与x_{p,b}通过覆盖约束按材质和批次耦合，体现跨层决策关联。",
              "score": 30,
              "evaluation_focus": "问题抽象",
              "scoring_hint": "高分：给出按批次-材质的覆盖不等式；中分：有覆盖但缺批次或材质维度；低分：独立处理两问题无耦合。"
            },
            {
              "sub_criteria": "批次容量约束识别（max_item_num与max_item_area）",
              "description": "准确识别两类批次容量：件数与面积，并与b_{o,b}线性绑定。",
              "score": 35,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：两条容量式均正确、单位一致；中分：只给出一条或系数用错；低分：未体现容量限制。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "集合与索引清晰复述（I,O,P,b∈{1..B_max}）",
              "description": "准确复述I、O、P及批次索引范围与其含义，避免歧义。",
              "score": 30,
              "evaluation_focus": "表述清晰",
              "scoring_hint": "高分：I,O,P,B_max逐一定义；中分：集合不全或含混；低分：集合未定义。"
            },
            {
              "sub_criteria": "材质一致性复述（mat(p)=mat(i)）",
              "description": "明确模式与产品材质一致性，禁止跨材质覆盖。",
              "score": 35,
              "evaluation_focus": "约束准确",
              "scoring_hint": "高分：陈述mat(p)=mat(i)过滤或按材质拆分覆盖；中分：口头提及未入模型；低分：忽略材质。"
            },
            {
              "sub_criteria": "覆盖需求的批次化复述（∑ q_{p,i} x_{p,b} ≥ ∑ b_{o,b} d_{i,o}）",
              "description": "用数学式复述按批次的覆盖需求并说明i与o的关联。",
              "score": 35,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：完整双求和表达；中分：缺一侧或索引错误；低分：未给出数学形式。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "批次数上界B_max设定逻辑",
              "description": "给出B_max=|O|或ceil(total_area/max_item_area)等合理上界并解释可行性。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出两种上界并择优；中分：仅|O|或含糊其词；低分：未设B_max。"
            },
            {
              "sub_criteria": "模式集P性质假设（单材质、三阶段精确齐头切）",
              "description": "明确P仅含单一材质模式且已满足齐头切与三阶段结构，q_{p,i}有效。",
              "score": 35,
              "evaluation_focus": "一致性假设",
              "scoring_hint": "高分：逐项陈述并关联覆盖；中分：部分提及；低分：与P定义矛盾。"
            },
            {
              "sub_criteria": "空批次与浪费规则假设",
              "description": "说明是否允许空批次、禁止无订单的模式使用（如引入y_b或逻辑约束）。",
              "score": 35,
              "evaluation_focus": "可行性设定",
              "scoring_hint": "高分：提出y_b与x_{p,b}≤My_b及∑ b_{o,b}≥y_b；中分：只文字描述；低分：未考虑。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "变量定义完整性（b_{o,b}, x_{p,b}域）",
              "description": "明确定义二元b_{o,b}与非负整数x_{p,b}并给出域与索引集合。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：域与索引齐全；中分：遗漏域或索引；低分：变量不清。"
            },
            {
              "sub_criteria": "目标函数与原片数的一致性",
              "description": "目标min ∑ x_{p,b}并说明area_p无需额外权重。",
              "score": 20,
              "evaluation_focus": "建模严谨",
              "scoring_hint": "高分：精确无冗余；中分：加入无关权重；低分：目标错误。"
            },
            {
              "sub_criteria": "订单分配与容量约束的线性化表达",
              "description": "给出sum_b b_{o,b}=1及两条容量线性不等式，单位匹配。",
              "score": 25,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：两式正确且单位一致；中分：一式缺失或单位混淆；低分：未给出。"
            },
            {
              "sub_criteria": "按材质-批次的覆盖约束与索引过滤",
              "description": "覆盖仅在P_mat(i)集合求和，或以大M禁用跨材质x_{p,b}影响。",
              "score": 30,
              "evaluation_focus": "约束正确",
              "scoring_hint": "高分：集合过滤清晰；中分：事后说明但未体现在式子；低分：跨材质错用。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "可扩展性方案（列生成/LP松弛下界）",
              "description": "当P大时，提出列生成主问题、LP下界与返回多列的策略。",
              "score": 35,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：描述主从结构与净收益=∑π_i q_{p,i}-1判定；中分：只说列生成无细节；低分：未考虑扩展性。"
            },
            {
              "sub_criteria": "整数化策略（直接MIP/分支定价/启发式）",
              "description": "说明何时直接MIP、何时分支定价或启发式圆整并给出终止准则。",
              "score": 30,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：列出时间/迭代上限与无正净收益停止；中分：笼统描述；低分：缺失。"
            },
            {
              "sub_criteria": "可行性与边界检查（不产生无订单模式）",
              "description": "通过逻辑变量或约束禁止空批次用模式，确保解结构合理。",
              "score": 35,
              "evaluation_focus": "可行性控制",
              "scoring_hint": "高分：提供形式化约束；中分：口头说明；低分：未避免浪费。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "输入P与I,O解析与一致性校验（mat(p)=mat(i), q_{p,i}索引齐全）",
              "description": "代码加载并校验模式与产品的材质匹配及q_{p,i}缺失处理。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：实现校验并记录日志；中分：部分校验；低分：无校验。"
            },
            {
              "sub_criteria": "MIP建模与求解器调用（变量域与约束完整）",
              "description": "用Gurobi/CPLEX/开源工具构建b_{o,b}, x_{p,b}及所有约束与目标。",
              "score": 35,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：模型可运行并返回解；中分：能运行但缺少关键约束；低分：无法求解。"
            },
            {
              "sub_criteria": "结果映射输出（cut_program.csv与sum_order.csv）",
              "description": "依据x_{p,b}展开模式布局生成原片坐标清单，并输出订单-批次分配。",
              "score": 35,
              "evaluation_focus": "数据输出",
              "scoring_hint": "高分：两文件格式正确、数量合计匹配需求；中分：仅输出其一或格式不严谨；低分：未输出或不一致。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "目标值与下界对比（最小原片数 vs 面积下界）",
              "description": "报告∑ x_{p,b}与面积下界ceil(S/A_plate)差距，评估最优性。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出数值差与百分比；中分：只口头描述；低分：未对比。"
            },
            {
              "sub_criteria": "批次容量合规性检查（max_item_num/max_item_area）",
              "description": "逐批次验证件数与面积不超限，并列出最紧约束批次。",
              "score": 35,
              "evaluation_focus": "合规验证",
              "scoring_hint": "高分：提供批次摘要表；中分：抽样检查；低分：无检查或超限未说明。"
            },
            {
              "sub_criteria": "材质分组覆盖率与浪费模式排查",
              "description": "统计各材质覆盖率、未覆盖需求是否为0，是否存在空批次或无订单模式使用。",
              "score": 30,
              "evaluation_focus": "诊断分析",
              "scoring_hint": "高分：提供材质级统计与零未覆盖证明；中分：部分统计；低分：遗漏或出现浪费未解释。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3 的目标是作为“列生成/模式生成”子模块，独立产生满足三阶段精确齐头切并符合同一 stack 内短边一致约束的可行排样模式集 P，每个模式 p 输出其材质 mat(p)、在该原片上对每种产品 i 的放置数量 q_{p,i}、模式占用面积 area_p、以及完整的几何布局信息（按 stripe→stack→item 层次给出每个 item 的左下角坐标和方向尺寸）以供主问题调用；其输入为：板材规格 PL、PW、允许旋转标志、产品明细（每条记录含 item_id、材质、长 l_i、宽 w_i、需求上限 d_i）以及可选的对偶价向量 π_i（用于列生成的收益评估）；其输出格式为结构化模式记录（包含 stripe/stack 划分和每件的坐标）和若干质量指标（净收益 = Σ_i π_i q_{p,i} − 1、利用率等）。实现范围与步骤包括：1) 预处理——从输入产生离散候选宽度集合 W 和长度集合 L（同时把旋转后的尺寸作为候选），并为每种材质单独处理；2) 精确生成方法（可选，用于小规模或需要高质量列时）——把模式生成子问题形式化为一个整数优化或动态规划问题：决策变量包括为每种候选 stack 类型（定义为某一固定短边高度 h∈W 且沿 PL 方向装入若干件的组合）选择的数量，以及对这些 stack 的组合成 stripe（使得 Σ stripe 高度 ≤ PW）；约束包括每个 stack 内沿 PL 的长度总和 ≤ PL、每个 item 的总放置量 ≤ d_i（或不超过需求上限）、stripe 和 stack 的数量限制以保证最多三阶段切割结构，并以最大化净收益（或在无 π 时最大化放置总面积/利用率）为目标，用商用 MIP（Gurobi/CPLEX）或自定义 DP/分支界定求解并回溯生成具体几何布局；3) 启发式生成方法（推荐用于大规模实例）——采用 strip-first 策略：按候选短边高度分组，对每一高度族用一维装箱启发式（FFD、Best-Fit 或一维背包 DP）沿 PL 方向生成若干 stack（每个 stack 为一个长度序列），然后用贪心或多起始顺序将 stack 按高度堆叠生成若干 stripe 组合形成完整模式；在此过程中实现多种变体以扩大候选模式池（例如不同排序规则、允许把小宽度 stack 填入剩余高度、尝试局部交换/合并/拆分 stacks，或把低频 item 作为 filler），并为每个候选模式计算净收益并仅保留收益高或利用率高的几列；4) 约束处理与可行性验证——所有生成的模式必须通过几何可行性检查（每个 stack 中沿 PL 的项按顺序不重叠且总长 ≤ PL，stripe 高度和堆叠使总高度 ≤ PW），并且模式结构应显式记录以保证能被按三阶段 guillotine 切割序列复现；5) 算法工程细节——支持并行生成（按材质或按候选宽度并行），对已生成模式做缓存与去重，允许在列生成循环中基于当前对偶价向量优先寻求高收益模式（返回多列以提高收敛速度），并提供终止准则（无正净收益、达到最大迭代次数或时间限）；6) 性能提升与可靠性措施——对启发式 stack 生成可用一维 DP 作为子例程以改进单个 stack 的装填率，对关键小实例用精确子方法验证并用于调参，生成的每个模式必须输出完整布局以便主问题直接实例化并写入 cut_program.csv。工具与实现建议：原型可用 Python（pandas, numpy）实现启发式与管控流程，关键密集计算模块（如一维 DP、stack 枚举、几何校验）可用 C/C++ 或 Cython 加速；精确子问题调用 Gurobi/CPLEX 求解器；并提供单元测试例程验证 guillotine 可切割性与布局坐标正确性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "生成满足三阶段精确齐头切（guillotine）、同一stack内短边一致约束的可行排样模式集P，优化模式净收益以支持列生成/模式生成的主问题",
          "expected_output": "结构化模式记录集合P（每个模式含 mat(p)、q_{p,i}、area_p、stripe→stack→item 层次的每件左下角坐标与方向尺寸、可复现的切割序列），另附模式质量指标（净收益、利用率）和可机读 CSV/JSON 文件及可复现代码",
          "key_inputs_constraints": "输入：板材规格 PL(数值 mm), PW(数值 mm), 允许旋转标志 rotate_allowed(布尔)、产品明细表（每条 item_id, mat(i), l_i(mm), w_i(mm), d_i(int)）、可选对偶价向量 π_i(实数或空)。关键约束：三阶段精确齐头切、每个stack内短边一致、每模式总长≤PL/总高≤PW、每item放置量≤d_i。前置条件：子任务1已完成数据标准化并保证几何有效性。",
          "modeling_type": "优化（列生成/模式生成，混合 MIP + 启发式）",
          "role_in_pipeline": "作为列生成/模式生成子模块：依赖子任务1的数据预处理与符号化输出，作为主问题（列生成主问题/切割主MIP）的列提供器；输出供后序的主MIP求解器或列生成循环直接调用。",
          "assumptions": "若对偶价π_i缺失，则净收益以放置面积或利用率为目标；默认原片数量充足，切缝忽略；允许返回多列以供主问题选择。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别生成模式集P的核心目标",
              "description": "判断是否准确识别子任务目标为“生成可用于列生成的模式集P”，包括输出 mat(p)、q_{p,i}、area_p 与完整几何布局",
              "score": 40,
              "evaluation_focus": "识别",
              "scoring_hint": "高分：明确写出生成模式集P并列出 mat(p)、q_{p,i}、area_p、坐标等输出字段；中分：提到模式生成但遗漏部分字段；低分：未提及 mat(p)或 q_{p,i} 或无结构化输出说明。"
            },
            {
              "sub_criteria": "识别“三阶段精确齐头切”与 stack 短边一致约束",
              "description": "检查是否点名并解释“三阶段精确齐头切”和“同一stack内短边一致约束”对模式生成的几何结构要求",
              "score": 35,
              "evaluation_focus": "识别",
              "scoring_hint": "高分：明确解释三阶段切割（stripe→stack→item）且说明stack短边一致的约束影响；中分：仅提到齐头切或stack约束但解释不全；低分：未识别或误解释为非齐头切或无限阶段。"
            },
            {
              "sub_criteria": "识别列生成上下文与对偶价π_i作用",
              "description": "评价是否识别该模块为列生成子模块且说明对偶价π_i用于计算模式净收益（Σ_i π_i q_{p,i}−1）以引导生成高价值模式",
              "score": 25,
              "evaluation_focus": "识别",
              "scoring_hint": "高分：明确π_i 用于净收益排序并说明π_i 可缺省且退化目标为利用率；中分：提到π_i但未说明如何用在净收益；低分：未提及对偶价或误用为约束。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述输出格式（pattern记录与CSV/JSON）",
              "description": "评估是否精确复述要求的输出：stripe/stack/item 层次坐标、mat(p)、q_{p,i}、area_p、净收益、可复现切割序列与 cut_program.csv 格式",
              "score": 40,
              "evaluation_focus": "表达",
              "scoring_hint": "高分：逐项列出所有输出字段并举例或指定CSV列名；中分：列出大多数字段但未给出坐标或切割序列；低分：输出描述笼统，不具备可机读性。"
            },
            {
              "sub_criteria": "复述输入约束（PL,PW,rotate_allowed,d_i 上限）",
              "description": "检查是否明确复述板材规格 PL=2440、PW=1220 (或泛化为变量)、rotate_allowed 标志与每件 d_i 上限的输入约束",
              "score": 30,
              "evaluation_focus": "表达",
              "scoring_hint": "高分：明确列出 PL/PW/rotate_allowed/d_i 并说明单位（mm）以及 d_i 含义；中分：提到部分参数但遗漏单位或 rotate_allowed；低分：未提及这些输入约束。"
            },
            {
              "sub_criteria": "复述可选算法路径（精确 MIP vs 启发式）",
              "description": "要求复述两条生成路线：对小规模使用精确 MIP/DP 反解生成可复现几何；大规模使用 strip-first 启发式并说明多起始与局部交换策略",
              "score": 30,
              "evaluation_focus": "表达",
              "scoring_hint": "高分：清楚列出精确与启发式方法并说明适用场景；中分：仅描述一种方法；低分：未描述方法或与任务不符。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确齿切/阶段与精确排样假设",
              "description": "检查是否明确假设：齐头切（guillotine）、最多三阶段精确排样、忽略锯缝宽度，以及切割方向一致性",
              "score": 30,
              "evaluation_focus": "假设",
              "scoring_hint": "高分：逐项列明并说明对模式结构的直接影响；中分：列出大多数假设但未说明影响；低分：缺少关键假设或与题意冲突。"
            },
            {
              "sub_criteria": "明确几何与旋转假设 rotate_allowed",
              "description": "评估是否给出 rotate_allowed 布尔的处理规则（若允许则记录两种方向候选；否则仅原方向），并验证项是否满足 l_i≤PL 且 w_i≤PW（或旋转后满足）",
              "score": 25,
              "evaluation_focus": "假设",
              "scoring_hint": "高分：明确给出旋转处理、几何有效性检验准则并描述异常处理；中分：说明旋转但未给出异常处理；低分：忽略旋转或几何检验。"
            },
            {
              "sub_criteria": "约定列生成与模式可复现性假设",
              "description": "判断是否假设生成的模式必须能被三阶段 guillotine 切割序列复现并能输出切割序列以供主问题验证",
              "score": 25,
              "evaluation_focus": "假设",
              "scoring_hint": "高分：明确要求可复现的切割序列并描述校验方法；中分：提及复现性但无校验细节；低分：未考虑可复现性。"
            },
            {
              "sub_criteria": "对π_i 缺失时的默认目标假设",
              "description": "检查是否说明在π_i不可用时净收益退化为最大化放置面积或利用率的假设",
              "score": 20,
              "evaluation_focus": "假设",
              "scoring_hint": "高分：给出明确备选目标并说明选择优先级；中分：提到备选目标但无优先级；低分：无备选策略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "精确模型变量与约束表述（stack/stripe/模式）",
              "description": "评估是否用决策变量刻画 stack 类型与数量、stripe 组合、每模式中 q_{p,i}，并写出约束：stack 内沿PL长度和≤PL、stripe 总高度≤PW、每item放置量≤d_i、最多三阶段结构",
              "score": 30,
              "evaluation_focus": "变量选择",
              "scoring_hint": "高分：给出变量符号（如二元或整数）、关键约束数学表达并标注单位；中分：变量与约束描述较完整但无数学表达；低分：变量或约束缺失或不一致。"
            },
            {
              "sub_criteria": "目标函数（净收益或利用率）形式化",
              "description": "检查是否将目标明确为最大化净收益 Σ_i π_i q_{p,i} − 1（或无π时最大化利用率/放置面积）并指出常数项与规模归一化方法",
              "score": 30,
              "evaluation_focus": "目标形式",
              "scoring_hint": "高分：精确给出净收益公式并解释“−1”含义或替代归一化；中分：给出目标但对归一化解释不足；低分：目标表述模糊或与列生成不匹配。"
            },
            {
              "sub_criteria": "三阶段 guillotine 可切割性编码",
              "description": "评估是否构建能保证模式可由三阶段齐头切复现的结构化表示（显式记录 stripe→stack→item 顺序与尺寸）",
              "score": 20,
              "evaluation_focus": "结构化",
              "scoring_hint": "高分：提供可直接还原切割序列的数据结构示例；中分：描述层次但无复现示例；低分：未保证可复现性。"
            },
            {
              "sub_criteria": "考虑多材质 mat(p) 与分材质单独处理策略",
              "description": "检查是否在模型中区分 mat(p) 并说明按材质单独生成模式或在模式中标注 mat(p) 的处理策略",
              "score": 20,
              "evaluation_focus": "材质处理",
              "scoring_hint": "高分：明确定义按材质分离生成并说明合并策略；中分：提及材质但未给实施细节；低分：忽视材质约束。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "精确解法设计（MIP/DP）与回溯生成几何",
              "description": "评价是否提出在小规模使用 MIP/DP 精确求解并能回溯得到 stripe→stack→item 的具体坐标布局",
              "score": 30,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：列出求解器（Gurobi/CPLEX）、变量规模估计及回溯方法；中分：提及MIP/DP但无回溯细节；低分：仅笼统建议精确求解。"
            },
            {
              "sub_criteria": "启发式解法（strip-first）与多变体策略",
              "description": "检查是否设计了 strip-first 启发式、单维装箱子例程（FFD/Best-Fit/一维DP）、多起始顺序、局部交换/合并策略以扩充模式池",
              "score": 30,
              "evaluation_focus": "启发式",
              "scoring_hint": "高分：给出具体启发式步骤、变体及参数并说明何时采纳；中分：描述启发式但无变体或参数；低分：无具体验证策略。"
            },
            {
              "sub_criteria": "基于对偶价π_i 的列优先搜索与终止准则",
              "description": "评估是否实现基于π_i 优先生成正净收益模式、并给出终止准则（无正净收益、迭代上限、时间限）以保障列生成收敛性",
              "score": 20,
              "evaluation_focus": "列策略",
              "scoring_hint": "高分：明确正净收益判定、迭代与时间限并示例阈值；中分：有终止准则但不详；低分：无终止或无基于π_i 的优先策略。"
            },
            {
              "sub_criteria": "并行化、缓存与去重以提升性能",
              "description": "评价是否设计按材质或候选宽度并行生成、模式去重/哈希缓存机制以避免重复列并提升效率",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：给出并行策略与去重实现思路（如哈希、规范化坐标）；中分：提及并行与去重但无实现细节；低分：无性能工程考虑。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现的代码与模块化接口（输入/输出）",
              "description": "检查是否提供可复现的代码（Python 示例）、模块化接口接受 PL,PW,rotate_allowed,items,π 并输出结构化模式记录及 cut_program.csv",
              "score": 30,
              "evaluation_focus": "代码可靠",
              "scoring_hint": "高分：提交可运行示例、明确函数签名与示例输入/输出文件；中分：代码片段但缺少运行示例或接口说明；低分：无可运行代码或接口混乱。"
            },
            {
              "sub_criteria": "单元测试与几何可行性验证例程",
              "description": "评估是否包含单元测试验证 guillotine 可切割性、stack 长度/stripe 高度约束、以及坐标无重叠的几何校验例程",
              "score": 25,
              "evaluation_focus": "测试",
              "scoring_hint": "高分：包含多组单元测试与自动化断言并示例测试数据；中分：含若干手动测试脚本；低分：无测试或测试无法复现。"
            },
            {
              "sub_criteria": "性能实现（并行/DP加速/语言选择）",
              "description": "检查是否采用并行、用一维DP或Cython/C++加速关键子例程并记录性能参数与配置选项",
              "score": 25,
              "evaluation_focus": "性能",
              "scoring_hint": "高分：有具体加速模块、可配置并行参数并给出基准时间；中分：提及加速但未实现；低分：未考虑性能或单线程不可扩展。"
            },
            {
              "sub_criteria": "日志、错误处理与可配置参数",
              "description": "评价代码是否产生详尽日志、处理异常（超尺寸、负需求）、并暴露参数（max_columns, time_limit, rotate_allowed）以便在列生成循环中调控",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：实现日志级别、异常捕获与参数文件；中分：简单日志或参数硬编码；低分：无日志/无异常处理。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "模式质量评估（净收益与利用率）",
              "description": "要求计算并报告每列的净收益 Σ_i π_i q_{p,i}−1、材料利用率 area_p/A_plate 及保留阈值以筛选候选模式",
              "score": 30,
              "evaluation_focus": "分析",
              "scoring_hint": "高分：提供统计表（均值/分位数）、阈值筛选逻辑并展示示例模式；中分：报告基本利用率与净收益但无统计分析；低分：仅列出若干模式无质量指标。"
            },
            {
              "sub_criteria": "几何可行性与切割序列验证",
              "description": "检查是否对每个模式用切割序列回放验证三阶段齐头切可行性并报告验证结果（通过/不通过及原因）",
              "score": 25,
              "evaluation_focus": "验证",
              "scoring_hint": "高分：对所有模式自动回放切割序列并标注失败模式与修正建议；中分：抽样验证或手工验证；低分：无切割序列验证。"
            },
            {
              "sub_criteria": "覆盖性与多样性分析",
              "description": "评估生成模式池对需求覆盖的广度（高频尺寸覆盖率）与多样性（不同 stripe/stack 结构数）以支持主问题求解",
              "score": 25,
              "evaluation_focus": "覆盖性",
              "scoring_hint": "高分：给出覆盖率数值（例如覆盖需求件数或面积的%）及模式结构多样度统计；中分：提供覆盖或多样性之一；低分：无覆盖/多样性分析。"
            },
            {
              "sub_criteria": "主问题兼容性与输出可用性",
              "description": "检查模式输出是否易于被主列生成主MIP直接读取（字段命名、CSV格式、坐标单位一致），并提供少量示例可立即导入主问题",
              "score": 20,
              "evaluation_focus": "兼容性",
              "scoring_hint": "高分：提供示例 cut_program.csv 且能被主问题直接加载；中分：数据可读但需少量转换；低分：输出格式不兼容或字段缺失。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4承担将列生成/模式生成与主问题求解、整数化与后处理串联成一个工程化求解器的职责，其范围包括：从规范化输入（板材规格、max_item_num、max_item_area、按材质/订单/产品项的明细CSV）接收数据，初始化启发式候选模式池，为每个材质和每个初始批次构造可行起始解，随后在一个可控的列生成主循环中交替求解主问题的LP松弛并并行为每个材质或受影响批次运行模式生成子例程以发现正收益新列，直至达到终止准则（例如无正减少成本列、达到时间上限或迭代次数上限）；在LP收敛后对当前列池执行整数化（直接求解MIP或采用启发式整数化），并对得到的整数解通过局部搜索算子（单订单移动、订单交换、合并/拆分批次）进行交替改进——每次局部变动仅对受影响的批次重新调用模式生成与排样求解以减少重复计算；实现细节要求明确并行策略（按材质/批次并行生成模式、并行求解独立子问题）、缓存机制（模式去重与复用、对偶价值变更阈值触发重新生成）、加速手段（用C/C++或Cython实现一维DP与几何校验、使用Gurobi/CPLEX的warm start和多线程功能、对频繁子例程进行向量化）、以及内存与日志管理（记录每次列生成、LP/MIP解、局部搜索改动与收益）。工程接口须定义清晰的输入/输出规范：输入为标准化产品与订单明细、板材参数与算法配置文件（时间限、并发度、启发式参数）；输出为要求格式的 cut_program.csv（每张原片的编号、材质、每个item的左下角坐标与方向尺寸）与 sum_order.csv（每条产品记录附加批次号），并同时导出诊断报告（总原片数、利用率、LP下界、各批次原片分配、每次迭代改进曲线、运行时间分布）。验证与容错机制必须包括几何可行性检查（无重叠、位于版材范围内、stripe/stack/item层次与三阶段guillotine可切割性）、约束满足性检验（每订单恰归属一个批次、批次内项数与面积上限）、以及单元测试套件（模式复现、坐标一致性、CSV读写），并提供可视化模块输出每张原片的二维布局图用于人工核验。终止准则应可配置（时间、迭代、收益阈值），性能统计应记录并返回以便后续敏感性分析，系统应支持参数化扩展接口（例如启用锯缝宽度、多规格原片或残料跨批次再利用）但这些扩展通过明确的输入参数开关控制，不会改变核心求解流程。",
      "criteria": {
        "task_understanding": {
          "core_goal": "题目要考什么——按题型拆解关键能力：优化并工程化实现基于列生成的混合整数规划求解器，以最小化总原片数（板材用量）并生成可复现的 cut_program.csv 与 sum_order.csv。",
          "expected_output": "数值最优/启发式解（每批次所用原片数与被选模式 x_{p,b}）；文件输出 cut_program.csv（每张原片编号、材质、每件 item 的左下角坐标与方向尺寸）与 sum_order.csv（每条产品记录附加批次号）；诊断报告（总原片数、利用率、LP 下界、迭代曲线、运行时间分布）；可复现代码与日志。",
          "key_inputs_constraints": "标准化产品/订单 CSV（字段：item_id, mat, ord, d_i, l_i, w_i, area, rotate_allowed）、板材参数 PL=2440 PW=1220、max_item_num、max_item_area、初始模式池 P 或模式生成子模块接口（含 q_{p,i}, area_p, mat(p), 布局）、齐头切与三阶段/精确约束、每份订单只分配到一个批次。",
          "modeling_type": "优化（混合整数规划 + 列生成/定价子问题 + 启发式整数化）",
          "role_in_pipeline": "作为最终求解器/工程化整合模块，依赖子任务1（数据预处理与符号化）、子任务3（列/模式生成）与子任务2（上层 MIP 主问题定义）；输出供生产部/后处理（生成切割指令与分拣计划）使用。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别最小化总原片数目标",
              "description": "能否明确指出子任务核心是“最小化总原片数（板材用量）”并将其作为主目标函数。",
              "score": 25,
              "evaluation_focus": "目标识别",
              "scoring_hint": "高分：文中明确写出并用数学式 min ∑_{b,p} x_{p,b} 表示；中分：口头表述最小化板材但无数学式；低分：未明确最小化目标或混淆为最小化交期等。"
            },
            {
              "sub_criteria": "识别列生成与 LP 松弛角色",
              "description": "是否识别并阐明列生成（模式生成）与主问题 LP 松弛在求下界和动态扩列中的关键作用。",
              "score": 25,
              "evaluation_focus": "算法理解",
              "scoring_hint": "高分：说明用 LP 松弛作为下界并用定价子问题产生正净收益模式；中分：提到列生成但未说明 LP 下界/定价关系；低分：未提及列生成或误解其作用。"
            },
            {
              "sub_criteria": "识别批次与材质耦合约束",
              "description": "能否识别“每份订单当且仅当出现在一个批次”和“批次内同材质模式共享板材”等关键耦合约束对模型结构的影响。",
              "score": 25,
              "evaluation_focus": "约束解析",
              "scoring_hint": "高分：列出两个约束并说明对变量 b_{o,b} 与 x_{p,b} 的耦合；中分：仅列出约束名但未说明耦合；低分：遗漏任一关键约束。"
            },
            {
              "sub_criteria": "识别工程化输出与检验项",
              "description": "是否识别并列出必须的工程输出与验证项：cut_program.csv、sum_order.csv、几何可行性与批次容量校验、LP 下界与诊断日志。",
              "score": 25,
              "evaluation_focus": "工程意识",
              "scoring_hint": "高分：完整列出文件与检验清单并说明校验要点；中分：列出部分输出文件；低分：未给出工程化输出或校验要求。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用数学符号复述最小化总原片数",
              "description": "是否用符号化表达主问题（变量 b_{o,b}, x_{p,b}，目标 min ∑_{b,p} x_{p,b}）及关键约束的数学式。",
              "score": 25,
              "evaluation_focus": "符号化",
              "scoring_hint": "高分：完整给出目标与主要约束的数学式；中分：给出目标式但约束表达不全或含糊；低分：无符号化表达或表达错误。"
            },
            {
              "sub_criteria": "复述列生成主循环与定价子问题",
              "description": "是否用文字+符号说明主问题 LP 松弛解取得对偶价 π，基于 π 求解定价子问题（模式生成）并判断净收益 ≥ 0 的循环流程。",
              "score": 25,
              "evaluation_focus": "流程复述",
              "scoring_hint": "高分：清晰描述迭代流程并写出净收益公式 Σ_i π_i q_{p,i} − 1；中分：描述流程但无净收益表达；低分：流程混乱或非列生成流程。"
            },
            {
              "sub_criteria": "复述整数化与局部搜索的工程步骤",
              "description": "是否明确在 LP 收敛后执行整数化（直接 MIP 或启发式）并进行局部搜索（单订单移动/交换/合并/拆分等）以改进解。",
              "score": 25,
              "evaluation_focus": "工程步骤",
              "scoring_hint": "高分：列明候选整数化方法与局部搜索算子并说明触发条件；中分：提到整数化与改进但细节不足；低分：未涉及整数化或局部改进。"
            },
            {
              "sub_criteria": "复述 I/O 与可复现要求",
              "description": "是否明确定义输入文件格式（标准化条目文件、分材质汇总、元数据 JSON）与输出 cut_program.csv/sum_order.csv，并要求可复现脚本与日志。",
              "score": 25,
              "evaluation_focus": "工程接口",
              "scoring_hint": "高分：准确列出文件名/字段并要求可复现脚本；中分：列出部分文件与字段；低分：未定义 I/O 或不可复现。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "显式假设齐头切与三阶段精确排样",
              "description": "是否明确假设并记录 guillotine（齐头切）、切割阶段不超过 3 且为精确排样等工艺约束。",
              "score": 25,
              "evaluation_focus": "工艺假设",
              "scoring_hint": "高分：明确写出并在模型/代码中强制实施；中分：提及但未在模型中体现；低分：遗漏或与题意冲突。"
            },
            {
              "sub_criteria": "板材规格与忽略锯缝假设",
              "description": "是否设定 PL=2440, PW=1220、忽略锯缝宽度、原片单一规格且数量充足等工程假设并写入元数据。",
              "score": 25,
              "evaluation_focus": "参数假设",
              "scoring_hint": "高分：所有参数写入元数据 JSON 并用于校验；中分：参数存在但未系统记录；低分：参数错误或缺失。"
            },
            {
              "sub_criteria": "订单与批次处理假设",
              "description": "是否明确每份订单仅在一个批次出现、批次项数与面积上限（max_item_num,max_item_area）以及批次数上界 B_max 的设定逻辑。",
              "score": 25,
              "evaluation_focus": "批次约束",
              "scoring_hint": "高分：给出 B_max 设定策略（如 |O| 或 ceil(total_area/max_item_area)）并在模型中使用；中分：列出约束但未给 B_max 策略；低分：未处理。"
            },
            {
              "sub_criteria": "旋转与项展开假设",
              "description": "是否说明 rotate_allowed 的布尔配置和 item_num>1 的两种处理（展开为单件或作为计数），并在预处理/模型中体现。",
              "score": 25,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：提供两套预处理文件并在日志记录所选模式；中分：只实现一种处理；低分：无处理或未记录决策。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "主问题 MIP 的变量与目标形式化",
              "description": "是否规范定义 b_{o,b}∈{0,1}, x_{p,b}∈Z_{\\ge0}，并以 min ∑_{b,p} x_{p,b} 为目标写出数学模型。",
              "score": 30,
              "evaluation_focus": "MIP建模",
              "scoring_hint": "高分：完全且无歧义地给出变量域与目标；中分：变量或目标有小遗漏；低分：变量定义错误或无目标式。"
            },
            {
              "sub_criteria": "覆盖约束与材质分组建模",
              "description": "是否对每个批次 b 和每种产品 i 写出覆盖约束 ∑_{p∈P_{mat(i)}} q_{p,i} x_{p,b} ≥ ∑_{o: i∈o} b_{o,b} d_{i,o} 并利用材质分组限制模式可用性。",
              "score": 30,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：约束完整且处理材质一致性；中分：约束表述不完全或忽略材质分组；低分：遗漏关键覆盖约束。"
            },
            {
              "sub_criteria": "批次容量与无效模式限制",
              "description": "是否在模型中加入批次项数/面积上限约束及禁止空批次被占用或用于浪费变量的约束（如 y_b≥b_{o,b} 的处理）。",
              "score": 20,
              "evaluation_focus": "约束细化",
              "scoring_hint": "高分：实现无订单却使用模式的剔除约束或惩罚变量；中分：实现容量约束但未处理空批次；低分：未处理容量或空批次问题。"
            },
            {
              "sub_criteria": "列生成数学化与 B_max 设定",
              "description": "是否将主问题写成以模式为列的集成形式并说明 B_max 的索引范围与设定逻辑（用于列生成主问题的维度设计）。",
              "score": 20,
              "evaluation_focus": "列化建模",
              "scoring_hint": "高分：清晰写出列式主问题与 B_max 选取规则；中分：提到列生成但无列式主问题；低分：未涉及列生成形式。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "LP 松弛与下界报告",
              "description": "是否在求解流程中求解主问题 LP 松弛、报告 LP 下界并用作收敛/终止判断依据。",
              "score": 30,
              "evaluation_focus": "下界分析",
              "scoring_hint": "高分：实现 LP 求解并记录下界与 gap（例如整数解比下界差距）；中分：求解 LP 但未用作终止准则；低分：未求解 LP 或未记录下界。"
            },
            {
              "sub_criteria": "定价子问题（模式生成）接口与净收益判定",
              "description": "是否实现定价子问题接口（接收对偶价 π）并以净收益 Σ_i π_i q_{p,i} − 1 > 0 为新列筛选标准。",
              "score": 30,
              "evaluation_focus": "定价实现",
              "scoring_hint": "高分：接口可并行运行并按净收益返回多列；中分：实现单列或不能并行；低分：无对偶价交互或净收益判定错误。"
            },
            {
              "sub_criteria": "整数化与启发式策略",
              "description": "是否给出整数化策略（直接 MIP 或分支定价/启发式整数化）并实现至少一种可复现的启发式或商用解法（Gurobi/CPLEX）。",
              "score": 20,
              "evaluation_focus": "整数化",
              "scoring_hint": "高分：实现并比较两种整数化策略或报告时间/质量；中分：仅实现单一策略并有基本解释；低分：未实现整数化或结果不可复现。"
            },
            {
              "sub_criteria": "局部搜索与受影响批次重生成",
              "description": "是否实现单订单移动/订单交换/合并-拆分算子，在局部变动后仅对受影响批次重新调用模式生成以节约计算。",
              "score": 20,
              "evaluation_focus": "局部改进",
              "scoring_hint": "高分：实现算子并证明对解的改进，有收益曲线；中分：实现算子但无受影响重生成优化；低分：无局部搜索或复算效率低。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现的数据预处理与日志",
              "description": "是否提供可复现的预处理脚本（Python+pandas）并记录完整日志：字段校验、异常处理、展开策略及元数据 JSON。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：脚本可直接复现并有日志/单元测试；中分：脚本存在但缺少日志或测试；低分：无预处理脚本或不可复现。"
            },
            {
              "sub_criteria": "模块化与并行化实现",
              "description": "代码是否模块化（主问题、定价、几何检验、I/O、可视化）并支持并行生成模式/并行定价与求解子任务。",
              "score": 30,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：模块清晰、并行参数可配置并在文档中说明；中分：模块化但无并行或有硬编码并行；低分：单脚本、不可配置或不可并行。"
            },
            {
              "sub_criteria": "缓存/去重机制与性能加速",
              "description": "是否实现模式缓存与去重、对一维 DP/几何校验加速（Cython/C++ 或向量化）并利用求解器 warm start。",
              "score": 20,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：实现去重缓存并提供性能基准；中分：实现单项加速无完整缓存；低分：无任何性能优化措施。"
            },
            {
              "sub_criteria": "单元测试与几何可行性校验",
              "description": "是否提供单元测试套件验证 guillotine 可切割性、无重叠、位于板材内及 CSV 读写一致性。",
              "score": 20,
              "evaluation_focus": "可靠性",
              "scoring_hint": "高分：单元测试覆盖关键函数并全部通过；中分：测试有限或部分通过；低分：无测试或关键检验失败。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "解质量与下界 Gap 报告",
              "description": "是否报告最终整数解原片数、LP 下界及相对 gap，并对 gap 提供解释或改进建议。",
              "score": 30,
              "evaluation_focus": "解评估",
              "scoring_hint": "高分：提供数值（例如 gap ≤5%）并解释瓶颈；中分：提供数值但无解释；低分：未提供下界或 gap。"
            },
            {
              "sub_criteria": "几何可行性与 cut_program.csv 校验",
              "description": "是否对 cut_program.csv 做几何校验（无重叠、项在板内、stripe/stack/item 层次满足三阶段 guillotine 可切割性）。",
              "score": 30,
              "evaluation_focus": "几何验证",
              "scoring_hint": "高分：自动校验并给出可视化示例；中分：仅人工核验或局部校验；低分：无几何校验。"
            },
            {
              "sub_criteria": "诊断报告与迭代曲线",
              "description": "是否输出诊断报告（每次迭代的原片数、利用率、新增列数、运行时间分布）并提供迭代改进曲线。",
              "score": 20,
              "evaluation_focus": "诊断分析",
              "scoring_hint": "高分：完整图表与表格并可导出；中分：仅部分统计；低分：无诊断或统计不完整。"
            },
            {
              "sub_criteria": "稳健性与敏感性分析",
              "description": "是否对关键参数（max_item_num, max_item_area, B_max）做敏感性分析并讨论对解的影响与鲁棒性。",
              "score": 20,
              "evaluation_focus": "敏感性",
              "scoring_hint": "高分：给出多组参数下的结果对比并分析趋势；中分：做单一参数测试；低分：无敏感性分析。"
            }
          ]
        }
      }
    }
  }
}