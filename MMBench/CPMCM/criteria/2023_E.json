{
  "task_id": "2023_E",
  "problem": "\\section*{二、数据集介绍及建模目标}\n\n赛题提供了 160 例（100 例训练数据集 + 60 例独立测试数据集）出血性脑卒中患者的个人史、疾病史、发病及治疗相关信息、多次重复的影像学检查（CT 平扫）结果及患者预后评估，该部分信息可在“表 1-患者列表及临床信息”中查询。\n\n如图 1 为脑出血患者 CT 平扫，红色为血肿区域，黄色为水肿区域。赛题提供影像学检查数据，包括各个时间点血肿/水肿的体积、位置、形状特征及灰度分布等信息。体积及位置信息可在“表 2-患者影像信息血肿及水肿的体积及位置”中查询。形状及灰度分布信息可在“表 3-患者影像信息血肿及水肿的形状及灰度分布”中查询。\n\n赛题目标：通过对真实临床数据的分析，研究出血性脑卒中患者血肿扩张风险、血肿周围水肿发生及演进规律，最终结合临床和影像信息，预测出血性脑卒中患者的临床预后。\n\n\\subsection*{目标变量：}\n\\begin{itemize}\n    \\item 发病 48 小时内是否发生血肿扩张：1 是；0 否。\n    \\item 发病后 90 天 mRS：0-6，有序等级变量。其中 mRS 是评估卒中后患者功能状态的重要工具，详见附件 2 相关概念。\n\\end{itemize}\n\n\\subsection*{临床信息：相关信息在“表 1-患者列表及临床信息”中获取。}\n\\begin{itemize}\n    \\item ID：患者 ID。\n \\begin{itemize} \n        \\item 训练数据集：sub 001 至 sub 100，共计 100 例。包含：患者信息、首次及所有随访影像数据及 90 天 mRS。\n       \\item 测试数据集 1：sub 101 至 sub 130，共计 30 例。包含：患者信息、首次影像数据。不包含：随访影像数据及 90 天 mRS。\n       \\item 测试数据集 2：sub 131 至 sub 160，共计 30 例。包含：患者信息、首次及所有随访影像数据。不包含：90 天 mRS。\n\\end{itemize}   \\item 入院首次影像检查流水号：一个 14 位数字编码。前 8 位代表年月日，后 6 位为顺序编号（注意：不是时分秒）。流水号是影像检查的唯一编码，具体影像检查时间点可通过对应流水号在“附表 1-检索表格-流水号 vs 时间”中检索。\n    \\item 年龄：岁\n    \\item 性别：男/女\n    \\item 脑出血前 mRS 评分：0-6，有序等级变量\n    \\item 高血压病史：1 是 0 否\n    \\item 卒中病史：1 是 0 否\n    \\item 糖尿病史：1 是 0 否\n    \\item 房颤史：1 是 0 否\n    \\item 冠心病史：1 是 0 否\n    \\item 吸烟史：1 是 0 否\n    \\item 饮酒史：1 是 0 否\n\\end{itemize}\n\n\\subsection*{发病相关特征，共计2字段。}\n\\begin{itemize}\n    \\item 血压：收缩压/舒张压。单位：毫米汞柱\n    \\item 发病到首次影像检查时间间隔：单位：小时\n\\end{itemize}\n\n\\subsection*{治疗相关特征，共计7字段。}\n\\begin{itemize}\n    \\item 脑室引流：1是0否\n    \\item 止血治疗：1是0否\n    \\item 降颅压治疗：1是0否\n    \\item 降压治疗：1是0否\n    \\item 镇静、镇痛治疗：1是0否\n    \\item 止吐护胃：1是0否\n    \\item 营养神经：1是0否\n\\end{itemize}\n\n\\subsection*{影像相关特征，共计84字段/时间点。}\n\\begin{itemize}\n    \\item 血肿及水肿的体积和位置信息在“表2-患者影像信息血肿及水肿的体积及位置”中获取，包含了：每个时间点血肿（Hemo）总体积及水肿（ED）总体积及不同位置的占比。体积占比定义：血肿/水肿在该位置的体积占总体积大小的比例，取值范围为：0-1。如：0代表该区域没有发生血肿/水肿，1则代表该患者所有血肿/水肿均发生在该区域，可通过占比换算出该位置绝对体积。本赛题采用通用模板，区分左右侧大脑前动脉（ACA\\_L，ACA\\_R），左右侧大脑中动脉（MCA\\_L，MCA\\_R），左右侧大脑后动脉（PCA\\_L，PCA\\_R），左右侧脑桥/延髓（Pons\\_Medulla\\_L，Pons\\_Medulla\\_R），左右侧小脑（Cerebellum\\_L，Cerebellum\\_R）共十个不同位置，具体位置和参考文献见附件2-相关概念。综上，总体积：2个字段（单位：$10^{-3}$ml），位置：20个字段。在每个时间点，体积及位置特征共计22个字段。\n    \\item 血肿及水肿的形状及灰度分布在“表3-患者影像信息血肿及水肿的形状及灰度分布”的两个不同标签页存放，可通过流水号检索对应数据。每个时间点血肿及水肿的形状及灰度特征，反映目标区域内体素信号强度的分布（17个字段）及三维形状的描述（14个字段），因此，在每个时间点，血肿及水肿的形状+灰度分布特征共62字段。\n\\end{itemize}\n注：重复影像数据根据临床真实情况提供，重复时间个体间可能存在差异。\n\n\\section*{三、请建模回答如下问题}\n\n\\section*{1 血肿扩张风险相关因素探索建模。}\n\\begin{enumerate}\n    \\item[a)] 请根据“表1”（字段：入院首次影像检查流水号，发病到首次影像检查时间间隔），“表2”（字段：各时间点流水号及对应的HM\\_volume），判断患者sub001至sub100发病后48小时内是否发生血肿扩张事件。\n\\end{enumerate}\n结果填写规范：1是0否，填写位置：“表4”C字段（是否发生血肿扩张）。\n\n如发生血肿扩张事件，请同时记录血肿扩张发生时间。\n\n\n\n\\textbf{结果填写规范：}如10.33小时，填写位置：“表4”D字段（血肿扩张时间）。\n\n是否发生血肿扩张可根据血肿体积前后变化，具体定义为：后续检查比首次检查绝对体积增加≥6 mL或相对体积增加≥33%。\n\n注：可通过流水号至“附表1-检索表格-流水号vs时间”中查询相应影像检查时间点，结合发病到首次影像时间间隔和后续影像检查时间间隔，判断当前影像检查是否在发病48小时内。\n\n\\item[b)] 请以是否发生血肿扩张事件为目标变量，基于“表1” 前100例患者（sub001至sub100）的个人史，疾病史，发病相关（字段E至W）、“表2”中其影像检查结果（字段C至X）及“表3”其影像检查结果（字段C至AG，注：只可包含对应患者首次影像检查记录）等变量，构建模型预测所有患者（sub001至sub160）发生血肿扩张的概率。\n\n注：该问只可纳入患者首次影像检查信息。\n\n\\textbf{结果填写规范：}记录预测事件发生概率（取值范围0-1，小数点后保留4位数）；填写位置：“表4”E字段（血肿扩张预测概率）。\n\n\\end{enumerate} \\section*{2 血肿周围水肿的发生及进展建模，并探索治疗干预和水肿进展的关联关系。}\n\na) 请根据“表2”前100个患者（sub001至sub100）的水肿体积（ED\\_volume）和重复检查时间点，构建一条全体患者水肿体积随时间进展曲线（x轴：发病至影像检查时间，y轴：水肿体积，$y=f(x)$），计算前100个患者（sub001至sub100）真实值和所拟合曲线之间存在的残差。\n\n\\textbf{结果填写规范：}记录残差，填写位置“表4”F字段（残差（全体））。\n\nb) 请探索患者水肿体积随时间进展模式的个体差异，构建不同人群（分亚组：3-5个）的水肿体积随时间进展曲线，并计算前100个患者（sub001至sub100）真实值和曲线间的残差。\n\n\\textbf{结果填写规范：}记录残差，填写位置“表4”G字段（残差（亚组）），同时将所属亚组填写在H段（所属亚组）。\n\nc) 请分析不同治疗方法（“表1”字段Q至W）对水肿体积进展模式的影响。\n\nd) 请分析血肿体积、水肿体积及治疗方法（“表1”字段Q至W）三者之间的关系。\n\n\\section*{3 出血性脑卒中患者预后预测及关键因素探索。}\n\na) 请根据前100个患者（sub001至sub100）个人史、疾病史、发病相关（“表1”字段E至W）及首次影像结果（表2，表3中相关字段）构建预测模型，预测患者（sub001至sub160）90天mRS评分。\\textbf{注：该问只可纳入患者首次影像检查信息。}\n\n\\textbf{结果填写规范：记录预测 mRS 结果，0-6，有序等级变量。填写位置“表 4”I 字段（预测 mRS（基于首次影像））。}\n\nb) 根据前 100 个患者（sub001 至 sub100）所有已知临床、治疗（表 1 字段 E 到 W）、表 2 及表 3 的影像（首次+随访）结果，预测所有含随访影像检查的患者（sub001 至 sub100，sub131 至 sub160）90 天 mRS 评分。\n\n\\textbf{结果填写规范：记录预测 mRS 结果，0-6，有序等级变量。填写位置“表 4”J 字段（预测 mRS）。}\n\nc) 请分析出血性脑卒中患者的预后（90 天 mRS）和个人史、疾病史、治疗方法及影像特征（包括血肿/水肿体积、血肿/水肿位置、信号强度特征、形状特征）等关联关系，为临床相关决策提出建议。",
  "subtask": {
    "1": {
      "subtask": "子任务1 聚焦于数据准备与衔接以生成用于后续分析的、可复现的时间序列与“48小时内血肿扩张”标签：输入文件为“表1-患者列表及临床信息.xlsx”（含每例的入院首次影像流水号与发病到首次影像时间间隔等）、“表2-患者影像信息血肿及水肿的体积及位置.xlsx”（按随访序列给出每次流水号与 HM_volume/ED_volume 等）、以及“附表1-检索表格-流水号vs时间.xlsx/…(1).xlsx”；输出为标准化的长表（每条为一例一扫描）并在“表4-答案文件.xlsx”相应 C（是否发生血肿扩张）与 D（扩张发生时间）字段写入结果。具体步骤：1) 数据导入与重整：用 Python(pandas)/R(dplyr) 将表2 从宽表转为长表，字段至少包含 patient_id、scan_seq、scan_流水号、HM_volume、ED_volume、其它位置占比字段；2) 扫描时间映射与发病时刻重构：通过附表1 将每一流水号映射为绝对扫描时间（精确到分钟/小时）；对于每位患者计算 onset_time = first_scan_time - 发病到首次影像时间间隔（小时），再为每次扫描计算 t_from_onset = scan_time - onset_time（小时，浮点）；在无法映射流水号时记录为缺失并在日志中标注；3) 体积单位与一致性校验：检测 HM_volume/ED_volume 的原始单位（若为 mm^3 或文档指明为 mm³，则统一转换为 mL：mL = mm³ / 1000），确保所有体积以 mL 存储并对负值、零值或极端离群值做 plausibility check（超出生理范围或 >99.9 百分位的值标为异常并记录）；4) 基线与时间窗口定义：对每位训练集中（sub001–sub100）患者识别基线 HM0 = HM at first scan（若基线缺失则在日志标注并将该例标记为“无法判定”以供人工复核或后续规则处理）；5) 血肿扩张自动判定逻辑：对每位患者遍历其后续扫描点（按 t_from_onset 升序），仅考虑 t_from_onset ≤ 48 小时的扫描；对每次扫描计算绝对增量 ΔHM = HM(t) - HM0（mL）与相对增量 rHM = HM(t)/HM0 - 1；若存在最早时间点满足 ΔHM ≥ 6 mL 或 rHM ≥ 0.33，则将该患者的扩张指示 E = 1，扩张时间 Tau = 对应 t_from_onset（小时，保留两位小数），并在遇到相同时间点有多次记录时取最大 HM 值用于判定；若在 48 小时窗口内无任何扫描满足条件则设 E = 0；6) 缺失与边界情况处理规则：若患者无任何随访扫描或无可用体积值则将 E 置为 0 并单独标注为“缺乏随访数据/需人工核查”，若基线 HM0 极小（接近零）导致相对增幅计算不稳定，则优先采用绝对阈值并同时保留异常标志；7) 质量控制与日志：对每一步（流水号未映射、时间负值、体积单位不一致、异常值、缺失记录数、判定为无法判定的病例）写入处理日志，并保存中间文件（长表、时间映射表、异常清单）；8) 可重复性与工具建议：实现时在脚本中固定随机种子、版本化数据与代码（git），常用工具为 Python (pandas, numpy) 或 R (tidyverse)，并将最终标注结果（E 与 Tau）以规定格式写回“表4”指定字段，同时输出一份含方法说明、缺失统计与判定例外的处理报告以便审查与后续使用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "根据表1/表2/附表1重整为按扫描的长表，重构发病时刻与 t_from_onset，并按“48 小时内血肿扩张”定义（ΔHM ≥ 6 mL 或 相对增量 ≥33%）自动判定并输出标签/扩张时间",
          "expected_output": "长表（每行一例一扫描，字段至少包含 patient_id, scan_seq, scan_serial, scan_time, t_from_onset(小时), HM_volume(mL), ED_volume(mL), 位置占比...）；以及表4 中 C（E: 0/1）与 D（Tau: 小时，保留两位小数）字段，处理日志、异常清单与中间文件",
          "key_inputs_constraints": "1) 表1: patient_id, 入院首次影像流水号（14 位）, 发病到首次影像时间间隔（小时）—字符串/数值；2) 表2: 每次 scan_流水号 对应 HM_volume、ED_volume（可能单位为 mm^3 或 10^-3 ml），宽表需可转换为长表；3) 附表1: 流水号 -> 精确扫描时间 映射（精确到分钟），若流水号缺失需记录并标注；4) 体积单位需统一为 mL，异常值（负、零、超生理或 >99.9 百分位）要被标注；5) 仅使用首次影像作为 HM0 基线；若 HM0 缺失需标注“无法判定”",
          "modeling_type": "分类+混合（数据清洗/重构 + 判定规则输出标签）",
          "role_in_pipeline": "作为特征工程与标签生成（数据清洗/时间重构）步骤：位于模型训练前，直接为后序血肿扩张预测、水肿进展及预后建模提供标准化时序长表与 48 小时扩张标签；依赖前序数据文件（表1/表2/附表1），为后序模型训练/评估提供标签与时间特征。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "生成按扫描的长表并输出表4 C/D（是否发生血肿扩张、扩张时间）",
              "description": "是否明确需要生成包含 patient_id、scan_流水号、scan_time、t_from_onset、HM_volume(mL) 的长表，并将 E/Tau 写回表4 的 C/D 字段",
              "score": 40,
              "evaluation_focus": "数据需求识别",
              "scoring_hint": "高分：明确列出长表字段并示例输出，表4 C/D 格式与示例一致；中分：列出长表无示例；低分：未明确写回表4 或字段不完整"
            },
            {
              "sub_criteria": "识别判定规则：48 小时窗口 + ΔHM ≥ 6 mL 或 rHM ≥ 33%",
              "description": "是否识别并准确复述“仅考虑 t_from_onset ≤48 小时的扫描；若存在最早满足 ΔHM ≥6 mL 或 rHM ≥0.33 则为扩张”",
              "score": 35,
              "evaluation_focus": "规则识别",
              "scoring_hint": "高分：精确给出 ΔHM 与 rHM 判定条件并强调最早时间点；中分：条件部分正确但未强调最早点或 48 小时限制；低分：判定条件错误或缺失"
            },
            {
              "sub_criteria": "识别时间重构与流水号映射需求（附表1）",
              "description": "是否识别需用附表1 将流水号映射到绝对 scan_time，并用 first_scan_time 与 发病到首次影像时间间隔 重构 onset_time 与 t_from_onset",
              "score": 25,
              "evaluation_focus": "时间映射",
              "scoring_hint": "高分：列出 onset_time 计算公式并说明时间单位与精度（小时/分钟）；中分：说明需映射但公式不全；低分：未提及附表1 或时间重构"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "准确复述 t_from_onset 与 onset_time 的计算流程",
              "description": "需明确写出 onset_time = first_scan_time - 发病到首次影像时间间隔(小时)，并说明 scan_time - onset_time 得到 t_from_onset（小时）",
              "score": 50,
              "evaluation_focus": "数学重构",
              "scoring_hint": "高分：给出公式并示例数值计算，包含单位转换；中分：给出公式但无示例；低分：公式错误或缺单位说明"
            },
            {
              "sub_criteria": "复述体积单位转换与一致化要求（mm^3->mL 或 10^-3 mL）",
              "description": "是否明确说明原始体积可能为 mm^3 或 10^-3 mL 并提供统一转换（mL = mm^3/1000）和最终存储单位",
              "score": 30,
              "evaluation_focus": "单位一致性",
              "scoring_hint": "高分：提供明确转换公式并说明检测方法；中分：说明需转换但公式不全；低分：忽略单位问题"
            },
            {
              "sub_criteria": "复述缺失与并列时间点处理规则（同一 t 取最大 HM）",
              "description": "是否指出在同一 t_from_onset 存在多次记录时应取该时刻最大 HM 值用于判定，并说明无随访时标注为“缺乏随访数据/需人工核查”",
              "score": 20,
              "evaluation_focus": "边界处理",
              "scoring_hint": "高分：准确说明并给出示例；中分：提及但无示例；低分：未提及或处理规则矛盾"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确体积单位与基线可用性假设",
              "description": "需声明若表中未指明单位则假定 mm^3 或 10^-3 ml，并说明若首次影像体积 HM0 缺失则标注为“无法判定”",
              "score": 40,
              "evaluation_focus": "合理假设",
              "scoring_hint": "高分：列出具体假设并说明合理性与替代处理；中分：列出假设但无替代方案；低分：未给假设或不合理"
            },
            {
              "sub_criteria": "对时间映射缺失的可接受替代假设",
              "description": "若附表1 中某流水号无法映射，需假定记录为缺失并在日志标注，而不向前后插值替代，或明确说明插值规则",
              "score": 30,
              "evaluation_focus": "缺失策略",
              "scoring_hint": "高分：给出缺失处理原则并记录到日志；中分：说明会标注但无记录格式；低分：盲目插值或不记录"
            },
            {
              "sub_criteria": "基线极小（接近零）时优先使用绝对阈值的假设",
              "description": "若 HM0 极小导致 rHM 不稳定，需声明优先采用绝对阈值（ΔHM ≥6 mL）并给出“接近零”定量阈值或处理标志",
              "score": 30,
              "evaluation_focus": "数值稳健性",
              "scoring_hint": "高分：给出数值阈（如 HM0 < 1 mL）并说明理由；中分：描述问题无定量阈；低分：忽视该情形"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "长表重整（宽->长）与字段完整性实现",
              "description": "是否实现将表2 从宽表转换为包含 patient_id, scan_seq, scan_serial, HM_volume, ED_volume, 位置占比 的长表并提供字段说明",
              "score": 25,
              "evaluation_focus": "数据重整",
              "scoring_hint": "高分：长表字段齐全并含样例行；中分：字段齐全但无样例；低分：缺少关键字段如 HM_volume 或 scan_serial"
            },
            {
              "sub_criteria": "扫描时间映射与 onset_time/t_from_onset 计算模块",
              "description": "是否实现通过附表1 映射 scan_流水号->scan_time，并计算 onset_time 与 t_from_onset（小时，浮点）",
              "score": 25,
              "evaluation_focus": "时间计算",
              "scoring_hint": "高分：映射正确、时间精度至分钟、示例核验通过；中分：映射存在部分缺失但记录日志；低分：未映射或计算错误"
            },
            {
              "sub_criteria": "体积单位规范化与 plausibility check 实现",
              "description": "实现体积单位转换到 mL，并对负值、零值、超生理及 >99.9 百分位值做标注与输出异常清单",
              "score": 25,
              "evaluation_focus": "数据合理性",
              "scoring_hint": "高分：全面检测并输出异常清单；中分：检测但未输出清单；低分：未检测或删除数据无记录"
            },
            {
              "sub_criteria": "自动判定逻辑实现（48 小时内判定最早满足 ΔHM≥6 mL 或 rHM≥0.33）",
              "description": "是否实现按 t_from_onset 升序遍历并在 t ≤48 小时区间内按规则判定 E 与 Tau（同一时间点取最大 HM）",
              "score": 25,
              "evaluation_focus": "规则实现",
              "scoring_hint": "高分：逻辑与规则完全匹配并有单元测试；中分：逻辑基本正确但边界处理不全；低分：判定逻辑有误或不稳定"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "E（0/1）与 Tau（小时，两位小数）输出的正确性与一致性",
              "description": "对训练集 sub001–sub100 给出 E 与 Tau，Tau 以首次满足条件的 t_from_onset 并保留两位小数；若无扩张则 Tau 为空或 NaN",
              "score": 40,
              "evaluation_focus": "输出准确性",
              "scoring_hint": "高分：输出与手工抽查或规则一致（随机抽查 10% 个例无差异）；中分：多数一致但边界案例不同；低分：大量不一致"
            },
            {
              "sub_criteria": "边界与异常情况的判定（无随访、基线缺失、基线极小）",
              "description": "是否按照规则把无随访标注为 E=0 并记录为“缺乏随访数据/需人工核查”，基线缺失标注为“无法判定”，基线极小优先用绝对阈值并打标",
              "score": 30,
              "evaluation_focus": "异常处理",
              "scoring_hint": "高分：所有边界案例均有标注且在日志中可追踪；中分：部分有标注；低分：无边界处理或处理不一致"
            },
            {
              "sub_criteria": "可追溯性与判定时间选择（同一时刻多记录取最大 HM）",
              "description": "是否实现当同一 t_from_onset 存在多条记录时以该时刻最大 HM 值用于判定并在日志中保留原始条目",
              "score": 30,
              "evaluation_focus": "可追溯性",
              "scoring_hint": "高分：实现并能展示用以判定的原始记录；中分：实现但未保留原始记录；低分：未处理或任意取值"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现的脚本与环境/版本控制（Python/R，固定随机种子，git 记录）",
              "description": "是否提供可运行脚本（.py/.R）、requirements.txt 或 sessionInfo，并在代码中固定随机种子与提供 git 提交记录说明",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：脚本可直接重现结果并含环境文件与 git commit；中分：脚本可运行但无环境说明；低分：脚本缺失或不可运行"
            },
            {
              "sub_criteria": "单元/集成测试与输入校验（流水号映射、单位转换、缺失值）",
              "description": "是否提供基本单元测试或断言来校验关键步骤（如流水号是否全部映射、单位转换是否发生、HM_volume 非负）",
              "score": 25,
              "evaluation_focus": "代码健壮性",
              "scoring_hint": "高分：包含测试用例并自动运行；中分：包含断言但无完整测试；低分：无校验"
            },
            {
              "sub_criteria": "日志记录与中间文件保存（长表、时间映射表、异常清单）",
              "description": "代码是否在每关键步骤输出日志，并保存中间文件（长表、时间映射表、异常清单、判定结果）以供审计",
              "score": 25,
              "evaluation_focus": "可审计性",
              "scoring_hint": "高分：日志详尽且中间文件齐全；中分：有部分日志/文件；低分：无日志或未保存中间结果"
            },
            {
              "sub_criteria": "写回表4 与结果导出格式规范（CSV/Excel 指定字段）",
              "description": "是否将 E（0/1）写入表4 C 列，Tau 写入表4 D 列，且以规定格式（保留两位小数）导出，同时提供方法说明文档",
              "score": 20,
              "evaluation_focus": "结果交付",
              "scoring_hint": "高分：表4 写回正确并含方法说明；中分：导出正确但说明不全；低分：导出格式错误或字段错位"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "质量控制汇总（映射成功率、缺失数、异常体积分布、扩张比例）",
              "description": "是否提供日志化的 QC 指标：流水号映射成功率、无随访例数、异常体积计数、sub001–sub100 中判定为扩张的比例",
              "score": 40,
              "evaluation_focus": "QC 报告",
              "scoring_hint": "高分：提供表格/图表显示各 QC 指标并解释；中分：提供数字但无图表或解释；低分：无 QC 汇总"
            },
            {
              "sub_criteria": "Tau 分布与可疑值检测（负值/超大值/非数）",
              "description": "是否统计并可视化扩张发生时间 Tau 的分布，并列出不合理值（如负数、>48 小时被误纳入等）",
              "score": 30,
              "evaluation_focus": "结果合理性",
              "scoring_hint": "高分：提供直方图/箱线图并列出异常样本 ID；中分：提供数值摘要但无图表；低分：未检查 Tau 合理性"
            },
            {
              "sub_criteria": "异常清单与人工复核建议（无法判定/需核查样本）",
              "description": "是否输出需人工复核的病例清单（如基线缺失、流水号未映射、极端体积或基线极小导致相对增幅不适用）并给出优先复核排序策略",
              "score": 30,
              "evaluation_focus": "临床可用性",
              "scoring_hint": "高分：清单详尽并按影响建模程度排序；中分：清单存在但无排序；低分：未输出复核清单"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（48小时内血肿扩张判定与概率预测）旨在两步完成：一是基于表1（含首次影像流水号与发病到首次影像时间间隔）、表2（每次检查流水号与 HM_volume）及附表1（流水号→绝对检查时间映射）生成训练集中每例（sub001–sub100）的二元标签 E（48 小时内是否发生血肿扩张）和扩张发生时间 Tau（首个满足阈值的 t，从发病起，单位小时，保留两位小数）；判定规则为仅检索 t ≤ 48 小时的随访影像，先将所有体积统一单位（mm^3→mL，1 mL = 1000 mm^3），以首次影像 HM0 为基线，遍历后续扫描若存在 HM(t) - HM0 ≥ 6 mL 或 HM(t)/HM0 ≥ 1.33 则记录最早满足条件的 t 为 Tau 并设 E=1，否则 E=0；在基线 HM0 极小或缺失、流水号无法映射、同一时间点有多次测量等异常情形应按预先定义的规则处理（优先绝对阈值、以该时间点最大 HM 判定、记录为需人工复核），并将所有处理与异常写入处理日志。二是以仅含首次影像和入院临床信息（表1 的临床变量、表2/表3 中首次影像的体积/位置/形状/灰度特征）为输入，在 sub001–sub100 上训练概率化模型 P(E=1|features) 并将对所有患者（sub001–sub160）给出事件发生概率（0–1，保留4位小数）；实施细节包括：数据预处理（缺失值多重插补或缺失指示、连续特征标准化、类别变量独热/有序编码、体积单位统一）、高维影像特征降维或稀疏选择（方差/共线性过滤、基于单变量筛选后 PCA 或 LASSO/ElasticNet 选择）、处理类别不平衡（类别权重或 SMOTE/欠采样），模型候选为带正则化的 Logistic 回归（ElasticNet）以输出校准概率为首选，备用/比较为梯度提升树（XGBoost/LightGBM）并在训练后使用独立验证折进行 Platt 或 Isotonic 校准；训练与评估采用嵌套交叉验证进行超参调优并以 AUC、Brier score、灵敏度/特异度、校准曲线与决策阈值敏感性作为主要度量，最终模型在独立或留出集上预测概率并导出四位小数的结果写入答案表（表4 指定字段），同时保存模型、特征重要性（标准化回归系数或 SHAP 值）、不确定性与处理日志以保证可复现性（固定随机种子、记录软件包版本）。",
      "criteria": {
        "task_understanding": {
          "core_goal": "判定并标注训练集每例在发病48小时内是否发生血肿扩张及其发生时间（E与Tau），并基于首次影像与入院临床信息训练概率化模型预测所有病例的血肿扩张发生概率。",
          "expected_output": "标准化长表（patient_id, scan_seq, scan_uid, scan_time, t_from_onset, HM_volume(mL), ED_volume(mL), ...）；表4 中 C（E=0/1）和 D（Tau, 小时, 两位小数）字段写入；对于 sub001–sub160 的血肿扩张概率（0–1，保留4位小数）表格；模型文件（训练代码、已保存模型）、特征重要性、处理日志与方法说明报告。",
          "key_inputs_constraints": "1) 表1: 首次影像流水号（14位）、发病到首次影像时间间隔（小时）、临床变量（年龄/性别/既往史/治疗等）; 2) 表2: 每次流水号对应 HM_volume 与 ED_volume（需从宽表转长表），流水号用于映射扫描绝对时间；3) 附表1: 流水号→绝对检查时间（至少精确到分钟/小时）; 约束：体积单位需统一为 mL（mm^3→mL），仅用首次影像特征训练概率模型；标签判定约束为 t≤48小时且 ΔHM≥6mL 或 HM/HM0≥1.33。若关键信息缺失须记录日志并按预定义规则处理。",
          "modeling_type": "分类+概率预测",
          "role_in_pipeline": "该子任务为数据标注与首轮模型训练环节：作为特征工程后、模型训练前的关键步骤，依赖数据导入/清洗（流水号映射、单位转换、长表生成），输出二元标签 E 与 Tau 及首次影像特征用于后续概率模型训练；后序依赖包括：校准/验证、临床解释与随访分析。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别发病48小时内血肿扩张判定目标",
              "description": "明确以“发病48小时”时间窗口判定血肿扩张（ΔHM≥6 mL或相对增幅≥33%）并输出 E 与 Tau。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：准确写出48小时窗口和两种阈值并说明取最早满足时间；中分：指出48小时或阈值但某一项描述不全；低分：未明确 48 小时或阈值错误。"
            },
            {
              "sub_criteria": "识别数据源与关键字段（表1/表2/附表1）",
              "description": "明确必须使用表1（首次流水号、发病间隔、临床变量）、表2（各次 HM_volume）与附表1（流水号→检查时间）进行时间与体积重构。",
              "score": 30,
              "evaluation_focus": "数据理解",
              "scoring_hint": "高分：列出三表及关键字段并说明用处（如流水号映射时间）；中分：列出表但未列具体字段；低分：遗漏至少一张表或误认字段。"
            },
            {
              "sub_criteria": "识别单位转换与 HM0 基线要求",
              "description": "指出需将 mm^3 转为 mL（1 mL=1000 mm^3），并设定基线 HM0 为首次影像 HM_volume；当 HM0 极小需优先采用绝对阈值。",
              "score": 25,
              "evaluation_focus": "数值一致性",
              "scoring_hint": "高分：明确单位换算、HM0 定义及 HM0≈0 的处理规则；中分：提到单位转换但未提 HM0 边界处理；低分：未提单位或 HM0 概念错误。"
            },
            {
              "sub_criteria": "识别异常/日志与可复现要求",
              "description": "识别需记录流水号未映射、缺失体积、时间负值、极端值与判定为需人工复核的案例，并保存处理日志与中间文件。",
              "score": 15,
              "evaluation_focus": "工程质量",
              "scoring_hint": "高分：列出至少4类需记录的异常并要求保存日志/中间文件；中分：列出异常但无明确保存要求；低分：未识别异常或无日志要求。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述标签生成逻辑（生成 E 与 Tau）",
              "description": "逐步复述如何从表2与附表1映射时间、计算 t_from_onset、以 HM0 判定 ΔHM 与相对增幅、并取首个满足条件的 t 作为 Tau。",
              "score": 40,
              "evaluation_focus": "流程准确性",
              "scoring_hint": "高分：按步骤描述映射→时间重构→ΔHM/rHM计算→取最早满足点；中分：步骤正确但遗漏细节（如同一时间点取最大 HM）；低分：步骤混乱或判定条件错误。"
            },
            {
              "sub_criteria": "复述缺失与异常处理规则",
              "description": "重述在基线缺失、无随访、流水号未映射或 HM0 极小等情形下的优先处理逻辑与标注（如标为需人工复核或 E=0 并注记）。",
              "score": 35,
              "evaluation_focus": "异常处理",
              "scoring_hint": "高分：明确每种异常的具体标签策略并要求日志记录；中分：覆盖异常但策略不完整；低分：未覆盖关键异常。"
            },
            {
              "sub_criteria": "复述概率模型训练输入约束（仅首次影像）",
              "description": "明确概率模型仅纳入首次影像相关的表2/表3 特征与表1 临床变量，不使用后续随访特征训练模型。",
              "score": 25,
              "evaluation_focus": "建模边界",
              "scoring_hint": "高分：清楚写明仅用首次影像并列出主要特征类型；中分：指出仅首次影像但未列特征；低分：未限定首次影像或错误包含随访特征。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "假设 HM0 可代表发病基线（HM0 基线假设）",
              "description": "明确假设首次影像 HM_volume 为基线 HM0；若首次影像在发病延迟较长需说明潜在偏差并记录为假设限制。",
              "score": 40,
              "evaluation_focus": "临床合理性",
              "scoring_hint": "高分：陈述 HM0 为基线并讨论当首次影像延迟对判定的影响；中分：仅声明 HM0 为基线，无偏差讨论；低分：未声明 HM0 或忽略延迟影响。"
            },
            {
              "sub_criteria": "假设体积单位可统一且测量误差可忽略",
              "description": "假设所有体积在转换为 mL 后可比较，测量误差小于判定阈值或通过日志/异常检测剔除极端值。",
              "score": 35,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：说明单位转换并给出异常值判别规则（如>99.9百分位）；中分：仅提单位转换；低分：未提单位或无异常检测规则。"
            },
            {
              "sub_criteria": "假设概率模型输出可校准为真实概率",
              "description": "假设通过 Platt/Isotonic 或校准步骤能将模型分数映射为可解释概率，并用 Brier/AUC 验证。",
              "score": 25,
              "evaluation_focus": "模型概率性",
              "scoring_hint": "高分：指定校准方法与评估指标（Brier/AUC）；中分：提及需校准但无方法；低分：未提校准或概率不可解释。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "首次影像特征工程与缺失处理（首次影像/标准化/编码）",
              "description": "对首次影像体积/位置/形状/灰度进行单位统一、连续变量标准化、有序/分类变量编码，并对缺失做多重插补或缺失指示处理。",
              "score": 30,
              "evaluation_focus": "特征工程",
              "scoring_hint": "高分：实现单位统一、标准化并报告插补方法与缺失比例；中分：做了标准化或插补但无报告；低分：无缺失处理或编码错误。"
            },
            {
              "sub_criteria": "遵循 HM0 标签生成逻辑（ΔHM≥6mL 或 HM/HM0≥1.33）",
              "description": "模型构建前必须用指定判定规则生成训练标签 E 与 Tau，保证标签来源可追溯且记录判定时间点源扫描流水号。",
              "score": 25,
              "evaluation_focus": "标签质量",
              "scoring_hint": "高分：标签按规则生成并保留原始扫描 uid 与时间；中分：标签逻辑正确但无追溯信息；低分：标签生成不遵守阈值或无时间信息。"
            },
            {
              "sub_criteria": "高维影像特征降维/稀疏选择（PCA/LASSO）",
              "description": "对表3 的高维形状与灰度特征执行方差过滤、共线性检测，随后用 PCA 或 LASSO/ElasticNet 等方法降维/选择以避免过拟合。",
              "score": 25,
              "evaluation_focus": "维度约简",
              "scoring_hint": "高分：报告筛选阈值、降维方法与保留信息量；中分：使用降维但无阈值说明；低分：无降维或直接使用所有高维特征且无正则化。"
            },
            {
              "sub_criteria": "类别不平衡处理与模型候选（ElasticNet 优先）",
              "description": "对不平衡样本采用类别权重、SMOTE 或欠采样，并以正则化 Logistic (ElasticNet) 输出校准概率为首选，备选 XGBoost/LightGBM 并比较性能。",
              "score": 20,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：实现类别权重/SMOTE 并比较 ElasticNet 与树模型；中分：只选单一方法无比较；低分：不处理不平衡或选择不可概率化模型。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "嵌套交叉验证与超参调优（嵌套CV）",
              "description": "使用嵌套交叉验证进行超参调优与评估，外层保留验证集用于最终性能估计，记录随机种子与折数。",
              "score": 30,
              "evaluation_focus": "验证设计",
              "scoring_hint": "高分：实现嵌套CV并报告折数/随机种子；中分：用单层 CV 或留出集无嵌套；低分：无交叉验证或过拟合风险高。"
            },
            {
              "sub_criteria": "概率校准与概率评估（Platt/Isotonic/Brier）",
              "description": "对训练后分数进行 Platt 或 Isotonic 校准，并报告校准曲线与 Brier 分数以衡量概率质量。",
              "score": 25,
              "evaluation_focus": "概率校准",
              "scoring_hint": "高分：提供校准方法、校准曲线与 Brier 分数（示例高分阈：AUC≥0.80 且 Brier≤0.12）；中分：有校准但无量化指标；低分：无校准或概率未评估。"
            },
            {
              "sub_criteria": "性能度量报告（AUC/灵敏度/特异度）",
              "description": "输出模型 AUC、敏感度/特异度（至少在一个推荐阈值）、精确度、召回率与混淆矩阵，并在留出集上给出实际数字。",
              "score": 25,
              "evaluation_focus": "性能衡量",
              "scoring_hint": "高分：报告 AUC、灵敏度/特异度 与混淆矩阵数值；中分：报告 AUC 但缺少阈值下指标；低分：仅给非标准指标或无验证集结果。"
            },
            {
              "sub_criteria": "不确定性与模型持久化（保存模型与版本）",
              "description": "保存训练后模型文件与依赖环境版本，固定随机种子，并提供性能不确定性估计（如置信区间或折差）。",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：保存模型、记录版本与随机种子并报告不确定性；中分：保存模型但无环境信息；低分：不保存模型或不可复现。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据管道实现：流水号映射与长表生成",
              "description": "代码能将表2 从宽表转为长表，使用附表1 映射流水号→scan_time，并计算 onset_time 与 t_from_onset；对无法映射记录日志。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：长表正确生成、时间映射准确并记录未映射流水号；中分：长表生成正确但有少量映射错误；低分：长表或映射逻辑错误或无日志。"
            },
            {
              "sub_criteria": "单位转换与异常检测实现（mm^3→mL、极端值标注）",
              "description": "代码实现体积单位统一转换，识别负值/零值/>99.9百分位的极端值并写入异常清单。",
              "score": 25,
              "evaluation_focus": "数值健壮性",
              "scoring_hint": "高分：所有体积转换正确并输出异常清单；中分：转换实现但异常检测不完整；低分：无转换或异常检测缺失。"
            },
            {
              "sub_criteria": "边界情形与日志（HM0≈0/无随访/多次同一时间点）",
              "description": "代码处理 HM0 极小情形优先绝对阈值、同一时间点取最大 HM、无随访标注 E=0 并在日志注明需人工复核的记录。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：实现所有边界规则并输出复核列表；中分：实现部分边界规则；低分：未处理边界或处理不当。"
            },
            {
              "sub_criteria": "结果写回与可复现脚本（表4 写入与版本控制）",
              "description": "将 E（表4 C）与 Tau（表4 D）按规定格式写回表4，并提供可执行脚本（固定随机种子）与版本化说明（如 git tag）。",
              "score": 20,
              "evaluation_focus": "工程交付",
              "scoring_hint": "高分：表4 写入正确、提供脚本与版本信息；中分：表4 写入正确但无版本说明；低分：输出格式错误或无脚本。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "标签质量检查与残差/不一致性报告",
              "description": "对生成的 E 与 Tau 进行一致性校验（如同一患者多次满足条件的最早时间是否一致）、并报告疑似错误与需人工复核样本比例。",
              "score": 25,
              "evaluation_focus": "质量控制",
              "scoring_hint": "高分：提供不一致率、复核样本列表与自动检测脚本；中分：仅列出数量但无复核细节；低分：无质量检查或报告不详。"
            },
            {
              "sub_criteria": "模型性能与校准分析（AUC/Brier/校准曲线）",
              "description": "提供模型 AUC、Brier 分数、灵敏度/特异度并绘制校准曲线评估概率质量，说明是否需重新校准。",
              "score": 30,
              "evaluation_focus": "结果解读",
              "scoring_hint": "高分：给出 AUC≥0.80 或明确改进方向并附校准曲线；中分：有 AUC/Brier 但无阈值建议；低分：无标准指标或仅给准确率。"
            },
            {
              "sub_criteria": "特征重要性与临床可解释性（系数/SHAP）",
              "description": "提供标准化回归系数或 SHAP 值排序，指出首要临床/影像特征并讨论其生物学合理性与局限。",
              "score": 25,
              "evaluation_focus": "临床解释",
              "scoring_hint": "高分：提供定量重要性、置信区间并与临床解释对照；中分：有重要性排序但无置信区间；低分：无解释或与临床不符。"
            },
            {
              "sub_criteria": "报告限制、可复现性材料与后续建议",
              "description": "在结果报告中列出假设/限制、缺失数据影响、需人工复核个例，并提供后续改进建议与可复现材料清单（脚本、模型、日志）。",
              "score": 20,
              "evaluation_focus": "科学严谨",
              "scoring_hint": "高分：完整列出限制、复现材料与明确改进路径；中分：列出限制但复现材料不全；低分：无限制讨论或无后续建议。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3（仅关于血肿周围水肿 ED 的发生与进展建模、亚组划分及治疗干预关联分析）的目标是：基于前100例患者的随访影像（按流水号映射到发病后时间点）构建群体水平的 ED 随时间曲线、量化全体拟合残差，提取并表征个体间进展异质性以划分 3–5 个可解释的亚组并计算亚组残差，同时评估不同治疗对 ED 进展的因果关联并建立血肿（HM）与水肿（ED）动态耦合模型；为实现该目标，请按以下步骤精确实现：1) 数据准备与质量控制：将表2 中每次扫描的 ED_volume 按流水号映射为 t（小时，从发病起），统一体积单位为 mL（若为 mm^3 则 /1000），排除明显错误值并记录缺失/观测次数；为保证时间序列可建模，初步纳入至少有两次（建议 ≥3 次优先）有效 ED 测量的个体，保留不规则采样信息以供后续建模。2) 群体平均曲线拟合与全体残差计算：以功能形式表示 ED_i(t)（t 连续），用带惩罚样条的线性混合效应模型或广义可加混合模型（例如 ED_i(t)=mu(t)+b_i(t)+ε，mu(t)=∑α_m B_m(t)，b_i 为患者特异随机函数）在 REML/贝叶斯框架下估计mu(t)，并用均方根残差 RMS_all = sqrt(∑_{i,j}(ED_i(t_{ij})-μ̂(t_{ij}))^2 / N_all) 表征全体拟合误差；样条基、节点数和惩罚强度通过 REML、AIC 或交叉验证选择。3) 个体差异提取与亚组划分：对患者间偏离 mu(t) 的函数残差应用功能主成分分析（FPCA）提取前 K 个主成分分数（K 依据累积解释方差或信息准则选择），以这些 FPCA 分数为低维特征用 K-means 或高斯混合聚类确定 3–5 个亚组；为每个亚组单独拟合 mu_g(t) 并计算亚组残差 RMS_sub（同 RMS_all 公式但以组内数据），选择使 RMS_sub 明显小于 RMS_all 的划分，同时用轮廓系数和 BIC/silhouette 指标确定聚类数并输出每例所属亚组标签。4) 治疗干预因果分析（基线与时变）：针对表1 中的每种治疗（Q–W），先估计基于基线协变量 X 和首诊影像 Z0 的倾向评分 P(A=1|X,Z0)；对于基线固定治疗使用倾向评分匹配/加权（IPW）并检验平衡（标准化均差），对于随访期间可能的时变治疗采用边缘结构模型（MSM）并构建稳定化逆概率权重 w_i(t)=∏_{s≤t} P(A_i(s)|history) 分母/分子形式以校正时变混淆，裁剪极端权重以避免高方差；在加权或匹配后的数据上用加权混合效应模型（或 MSM 对应的加权样条模型）拟合 ED 曲线并在模型中包含治疗×spline(t) 交互项以估计治疗对 ED 时序的即时与时间依赖效应，报告效应大小（mL）、95% CI、p 值及权重诊断指标。5) HM—ED 耦合建模：构建联合或耦合模型以量化血肿动态对水肿的影响，例如联合混合效应模型（HM_i(t)=μ_H(t)+b_i^H(t)+e; ED_i(t)=μ_E(t)+θ·b_i^H(t)+b_i^E(t)+e），或在 ED 方程中加入滞后/当期 HM(t−τ) 与患者特异随机斜率，以及/或共享随机效应框架；参数估计可用 REML（频率学）或在需要完整不确定性量化时采用贝叶斯 MCMC（Stan/brms）；通过比较包含/不包含耦合项的模型的 AIC/WAIC 和拟合残差评估耦合强度与显著性。6) 诊断、敏感性与输出：在每一步提供诊断（基线/时变倾向评分平衡表、权重分布、模型残差图、FPCA 解释方差、聚类稳定性指标），对关键假设（如权重截断阈值、FPCA 组件数、样条复杂度）做敏感性分析，并生成最终输出：群体 mu(t)、每个亚组 mu_g(t)、RMS_all、RMS_sub、每例亚组标签及治疗效应估计（含不确定性区间）；建议使用 R（mgcv/gamm4、nlme/lme4、refund/fdapace、MatchIt、survey、brms）或 Python（scikit-learn、statsmodels、PyMC/NumPyro）实现，所有代码应记录随机种子、软件包版本并保存中间数据以确保可复现。",
      "criteria": {
        "task_understanding": {
          "core_goal": "拟合群体水平 ED(t)（水肿体积随发病时间的函数），评估拟合残差（RMS_all/RMS_sub）、划分 3–5 个基于 FPCA 的 ED 进展亚组，并评估治疗（Q–W）的因果影响与 HM—ED 耦合关系",
          "expected_output": "群体 mu(t) 曲线与图表（mL vs 小时）、RMS_all、每个亚组 mu_g(t) 与 RMS_sub、每例亚组标签、治疗效应估计（mL，95% CI，p 值）、HM—ED 耦合模型结果、诊断图/表、可复现代码与处理日志（长表、中间文件）",
          "key_inputs_constraints": "1) 表2 中每次扫描记录（字段：patient_id, scan_流水号, ED_volume, HM_volume, 扫描序列）且需通过附表1 映射为 t_from_onset（小时）; 2) 每例至少有 2 次有效 ED_volume（建议 ≥3 次优先），否则该例应排除或标注；3) 体积单位需统一为 mL（若为 mm^3 则 /1000），并记录异常/缺失；4) 治疗字段为表1 Q–W（基线或时变）用于倾向评分/MSM 分析；5) 软件与随机种子固定（Python/R，mgcv/brms/PyMC 等）",
          "modeling_type": "拟合+聚类(分组)+因果评价（混合）",
          "role_in_pipeline": "作为影像时间序列分析与因果评估的核心子任务，依赖前序的数据导入/长表构建（流水号→时间映射、单位转换、QC）；其输出（mu(t)、亚组标签、治疗效应与耦合参数）为后续预后预测模型与临床建议提供特征与证据"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别群体 mu(t) 与全体残差 RMS_all 估计目标",
              "description": "明确需拟合群体平均 ED(t)=mu(t)，并计算 RMS_all 表征全体拟合误差（使用所有 sub001–sub100 的 t_ij 点）",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确定义 mu(t) 与 RMS_all 公式并说明用 REML/penalized spline 拟合；中分：给出 mu(t) 但未写出 RMS_all 具体公式；低分：未识别或误用 RMS_all 计算（如按个体而非全体计算）"
            },
            {
              "sub_criteria": "识别个体异质性与亚组划分需求（FPCA+聚类）",
              "description": "识别需用 FPCA 提取个体偏离 mu(t) 的函数性主成分，并用这些分数进行 3–5 群聚类划分",
              "score": 25,
              "evaluation_focus": "方法选择",
              "scoring_hint": "高分：明确 FPCA 用途与聚类目标，并要求累积方差或信息准则选取 K；中分：提到 FPCA 或聚类但未说明判定聚类数；低分：只做 K-means 时间序列分组，未利用函数残差特征"
            },
            {
              "sub_criteria": "识别治疗干预的因果分析需求（倾向评分/IPW/MSM）",
              "description": "识别 Q–W 治疗可能为基线或时变干预，需采用倾向评分匹配/加权或 MSM 进行因果推断并校正时变混淆",
              "score": 25,
              "evaluation_focus": "因果思维",
              "scoring_hint": "高分：区分基线与时变治疗，明确采用 PS/IPW 或 MSM 并提出权重截断策略；中分：提出倾向评分但未区分时变/基线；低分：未考虑因果偏差或直接用未加权回归"
            },
            {
              "sub_criteria": "识别 HM—ED 耦合建模目标与选择共享随机效应/滞后项",
              "description": "明确需建立 HM—ED 耦合模型（共享随机效应或在 ED 方程中加入 HM(t−τ)），并用 AIC/WAIC 或残差比较评估耦合强度",
              "score": 20,
              "evaluation_focus": "耦合建模",
              "scoring_hint": "高分：提出具体耦合结构（θ·b_i^H 或滞后 HM）并说明比较指标；中分：仅笼统建议耦合模型；低分：忽略 HM 对 ED 的潜在动态影响"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述需拟合群体 mu(t) 并计算 RMS_all",
              "description": "用任务术语复述：在 REML/贝叶斯框架下拟合 mu(t)（惩罚样条），并用 RMS_all 衡量拟合残差",
              "score": 30,
              "evaluation_focus": "表达准确",
              "scoring_hint": "高分：明确 mu(t) 拟合方法、样条基选择与 RMS_all 公式；中分：描述 mu(t) 但未写出 REML/惩罚选择方法；低分：复述含糊或与任务不符"
            },
            {
              "sub_criteria": "复述 FPCA→聚类→mu_g(t) 流程与 RMS_sub 计算",
              "description": "清晰复述：对残差做 FPCA，基于前 K 分数聚类（3–5），为每组拟合 mu_g(t) 并计算 RMS_sub 以比较组内拟合误差",
              "score": 25,
              "evaluation_focus": "流程衔接",
              "scoring_hint": "高分：说明 K 选取准则（累积解释方差）与聚类稳定性指标（轮廓系数/BIC）；中分：流程描述完整但缺选择准则；低分：遗漏 mu_g(t) 或 RMS_sub 步骤"
            },
            {
              "sub_criteria": "复述治疗因果分析所需步骤（PS/MSM、权重诊断）",
              "description": "表述需估计倾向评分、平衡检验（标准化均差）、采用 IPW/MSM 并裁剪极端权重，模型纳入 treatment×spline(t) 交互项",
              "score": 25,
              "evaluation_focus": "因果流程",
              "scoring_hint": "高分：包含权重诊断、权重裁剪与后续加权混合效应建模细节；中分：提到倾向评分但未提权重诊断；低分：仅做简单比较未做因果校正"
            },
            {
              "sub_criteria": "复述 HM—ED 耦合模型评价与模型选择准则",
              "description": "复述比较含耦合项与不含耦合项模型的 AIC/WAIC 与残差以检验耦合显著性",
              "score": 20,
              "evaluation_focus": "模型比较",
              "scoring_hint": "高分：具体指出用 AIC/WAIC、残差和 CI 判定耦合；中分：提到对比但无判定标准；低分：未提出比较指标"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于时间映射与测量误差的假设",
              "description": "假设流水号→时间映射是准确的，t_from_onset 可视为连续时间，测量误差独立且服从同方差或可通过模型残差处理",
              "score": 25,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：明确映射精度要求并提出对异常时间点的处理规则；中分：给出映射假设但无异常处理；低分：未说明时间映射假设或忽略测量误差"
            },
            {
              "sub_criteria": "关于缺失与纳入标准的假设（观测次数）",
              "description": "假设观测缺失为 MAR，可纳入至少 2 次（建议 ≥3 次）测量者，缺失/少量随访需在模型/权重中调整或标注",
              "score": 25,
              "evaluation_focus": "缺失处理",
              "scoring_hint": "高分：明确 MAR 假设并说明对少量测量的处理规则；中分：提及需两次测量但无缺失假设；低分：忽略缺失机制"
            },
            {
              "sub_criteria": "关于治疗可忽略性与混淆校正的假设",
              "description": "基线治疗假设无未测混淆（可通过 PS 校正）；时变治疗分析假设可用历史观测构造稳定化权重以近似无未测混淆",
              "score": 25,
              "evaluation_focus": "因果假设",
              "scoring_hint": "高分：明确不可测混淆的风险并提出敏感性分析；中分：说明倾向评分可校正但无时变混淆讨论；低分：未说明因果假设"
            },
            {
              "sub_criteria": "关于模型平滑与组件选择的统计假设",
              "description": "假设 mu(t) 可用惩罚样条平滑表达，FPCA 分量按解释方差截断，权重截断阈值与样条复杂度需敏感性分析",
              "score": 25,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：提出具体阈值/选择准则并安排敏感性检验；中分：提到需选择但无准则；低分：未说明样条/组件选择假设"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建群体 mu(t) 的惩罚样条混合效应模型（ED_i(t)=mu(t)+b_i(t)+ε）",
              "description": "明确样条基函数形式、随机函数 b_i(t) 表示个体偏离，并指定 REML 或贝叶斯估计方式（mgcv/gamm4 或 brms）",
              "score": 30,
              "evaluation_focus": "模型设定",
              "scoring_hint": "高分：给出样条基、结点选择方法并实现 REML/贝叶斯估计；中分：模型框架正确但细节如结点/惩罚未说明；低分：模型设定不包含随机函数 b_i(t)"
            },
            {
              "sub_criteria": "构建 FPCA 提取函数残差与基于分数的聚类（3–5 组）",
              "description": "规定 FPCA 的实现（refund/fdapace），K 选取依据累积解释方差或信息准则，聚类用 K-means 或 GMM 并评估轮廓系数/BIC",
              "score": 25,
              "evaluation_focus": "降维+聚类",
              "scoring_hint": "高分：明确 FPCA 前处理、K 选取与聚类算法并报告 silhouette/BIC；中分：步骤合理但无判定阈值；低分：直接聚类原始时间点"
            },
            {
              "sub_criteria": "构建治疗因果模型：倾向评分（基线）或 MSM（时变）并纳入 treatment×spline(t)",
              "description": "为基线治疗指定 PS 模型、匹配或 IPW；为时变治疗设计 MSM、构建稳定化逆概率权重并裁剪极端权重",
              "score": 20,
              "evaluation_focus": "因果模型",
              "scoring_hint": "高分：给出 PS 变项、权重公式与裁剪阈值并计划平衡检验；中分：提出 MSM 但实现细节不足；低分：只用简单调整回归"
            },
            {
              "sub_criteria": "构建 HM—ED 耦合模型（共享随机效应或滞后 HM）并定义比较准则",
              "description": "明确耦合形式（如 ED 中加入 θ·b_i^H 或 HM(t−τ)），并指定用 AIC/WAIC、残差与 CI 评估耦合强度与显著性",
              "score": 25,
              "evaluation_focus": "耦合模型",
              "scoring_hint": "高分：给出耦合公式、滞后选择策略与比较指标；中分：提出耦合但未指定比较准则；低分：未建耦合或仅做相关性检验"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "选择并执行估计方法（REML/AIC/CV 或贝叶斯 MCMC）以拟合 mu(t) 与随机效应",
              "description": "说明采用 REML（mgcv/gamm4）或贝叶斯 MCMC（brms/Stan），并用 AIC/REML/交叉验证选择样条复杂度与惩罚强度",
              "score": 30,
              "evaluation_focus": "估计执行",
              "scoring_hint": "高分：报告具体软件/函数与模型收敛诊断（Rhat、梯度）；中分：选择方法合适但无收敛诊断；低分：估计方法不当或无模型选择"
            },
            {
              "sub_criteria": "FPCA 分解与聚类求解（组件数选择与聚类稳定性）",
              "description": "用 FPCA 提取主成分，依据累积解释方差/信息准则选 K，聚类结果报告轮廓系数、重复初始化稳定性",
              "score": 25,
              "evaluation_focus": "降维求解",
              "scoring_hint": "高分：FPCA 解释方差 ≥80% 或明确阈值，聚类 silhouette ≥0.4；中分：提供解释方差但未报告稳定性；低分：未验证聚类稳定性"
            },
            {
              "sub_criteria": "因果估计求解与权重诊断（IPW/MSM 的权重计算与截断）",
              "description": "计算倾向评分并生成稳定化权重，检查权重分布、裁剪极端值，给出权重诊断图并在加权模型中估计治疗×time 效应",
              "score": 25,
              "evaluation_focus": "因果估计",
              "scoring_hint": "高分：权重均衡后 SMD <0.1，权重分布无极端值且提供敏感性分析；中分：权重计算合理但未充分诊断；低分：无权重诊断或权重极端且未裁剪"
            },
            {
              "sub_criteria": "HM—ED 耦合模型参数估计与模型比较（AIC/WAIC/残差）",
              "description": "估计耦合系数 θ 与滞后效应并比较包含/不含耦合项模型的 AIC/WAIC 与 RMS 变化",
              "score": 20,
              "evaluation_focus": "耦合估计",
              "scoring_hint": "高分：报告 θ 的估计值、95% CI、模型优劣指标显著改善；中分：报告估计但未给 CI 或模型比较不充分；低分：未比较模型或耦合不显著且未讨论"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现的数据处理脚本（长表构建、时间映射、单位转换、QC 日志）",
              "description": "提供可运行脚本完成表2→长表、附表1 映射到 t_from_onset、体积单位统一、异常检测并保存处理日志与中间文件",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：脚本能复现长表且生成 QC 报表与日志；中分：脚本基本可用但遗漏日志或部分边界情况；低分：未提供可运行的数据处理代码"
            },
            {
              "sub_criteria": "模型实现与封装（mgcv/brms/PyMC 实现、参数可配置）",
              "description": "代码实现 mu(t)、FPCA、聚类、IPW/MSM 与耦合模型，并将超参（样条结点、权重裁剪、FPCA K）配置化",
              "score": 25,
              "evaluation_focus": "实现质量",
              "scoring_hint": "高分：模块化代码、参数可调、附示例运行脚本；中分：实现完整但耦合/因果模块简陋；低分：代码缺失关键模块或不可运行"
            },
            {
              "sub_criteria": "可重复性与环境说明（随机种子、包版本、运行说明）",
              "description": "在代码中固定随机种子、记录软件包与版本、提供环境/依赖说明（requirements.txt 或 sessionInfo）与运行说明",
              "score": 25,
              "evaluation_focus": "复现性",
              "scoring_hint": "高分：含 seed、依赖版本与示例输出；中分：含部分依赖说明但无完整环境文件；低分：无版本/seed 说明"
            },
            {
              "sub_criteria": "计算效率与异常处理（并行/内存控制、异常记录）",
              "description": "考虑大规模样条/FPCA/MCMC 的计算开销，提供并行或采样策略并在代码中稳妥处理缺失/异常记录",
              "score": 20,
              "evaluation_focus": "工程健壮性",
              "scoring_hint": "高分：提供并行实现或子样本策略并记录异常；中分：有基本异常处理但未优化性能；低分：代码在真实数据上无法完成或无异常处理"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "报告群体 mu(t)、RMS_all 与可视化（含置信带）",
              "description": "给出 mu(t) 曲线图（mL vs 小时）并标注 95% CI 与 RMS_all 数值，用于说明群体水肿进展特征",
              "score": 25,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：图含置信带、RMS_all 并解释临床意义；中分：提供曲线但无置信带或少量解释；低分：无图或无 RMS_all 报告"
            },
            {
              "sub_criteria": "报告亚组 mu_g(t)、RMS_sub 与每例亚组标签及聚类稳定性指标",
              "description": "输出每组的 mu_g(t) 曲线、RMS_sub、每例所属亚组表，并给出 silhouette/BIC 与 FPCA 解释方差",
              "score": 20,
              "evaluation_focus": "亚组解释",
              "scoring_hint": "高分：RMS_sub 显著低于 RMS_all，轮廓系数 ≥0.4，并解释组别生物学/临床含义；中分：提供 mu_g(t) 但未量化稳定性；低分：未提供组内残差或组别难以解释"
            },
            {
              "sub_criteria": "报告治疗效应估计（mL）、95% CI、p 值及权重/平衡诊断",
              "description": "对每种治疗给出时间依赖效应估计（加权模型中的 treatment×spline(t)），并报告倾向评分平衡表和权重分布图",
              "score": 20,
              "evaluation_focus": "因果推断",
              "scoring_hint": "高分：效应有 CI、p 值，平衡检验 SMD <0.1 且权重合理；中分：有估计无充分平衡诊断；低分：效应未给出不确定性或平衡差"
            },
            {
              "sub_criteria": "报告 HM—ED 耦合强度、模型比较与临床解读",
              "description": "提供耦合参数 θ 或滞后效应估计、AIC/WAIC 比较表与对临床含义的解释（如 HM 增大对 ED 的即时/滞后影响）",
              "score": 20,
              "evaluation_focus": "耦合解释",
              "scoring_hint": "高分：耦合参数显著且模型比较支持耦合，提供生理/临床解释；中分：耦合估计但不显著或解释不足；低分：无耦合结论或误解耦合含义"
            },
            {
              "sub_criteria": "敏感性分析与局限性讨论",
              "description": "对关键假设（权重截断阈值、FPCA 组件数、样条复杂度）做敏感性分析并明确局限性与未测混淆风险",
              "score": 15,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：至少两项敏感性分析并量化结果差异；中分：做了单一敏感性分析；低分：无敏感性分析或未讨论局限"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4的目标是构建、训练、验证并交付两类有序结局（mRS 0–6）的预测模型：一是仅基于入院/首次影像（表1的临床与治疗基线变量、表2/表3的首次影像体积、位置、形状与灰度特征）在训练集（sub001–sub100）上建立的静态有序预测器并对所有病例（sub001–sub160）输出每类概率分布及最可能等级；二是利用训练集中所有可得纵向影像与治疗记录（首次+随访影像、表1的时序治疗变量、表2/表3的随访影像量化）构建的联合/增强预测器，用随访信息提高对含随访患者（sub001–sub100 与 sub131–sub160）的mRS预测精度并输出概率分布与不确定区间。为实现该目标须按下列步骤实施：① 数据准备与清洗——从表1/表2/表3抽取指定字段，统一体积单位（mm^3→mL）、用流水号映射时间并计算自发病的时间点，对缺失采用多重插补（mice）或在模型中使用缺失指示变量并记录缺失机制；② 特征工程——保留医学先验重要临床变量，对高维影像组学做稳健预筛（方差/相关性过滤）随后采用有监督筛选或PCA/稀疏PCA降维；当使用纵向影像时，提取每例的功能主成分分数（FPCA）、样条基系数或基于混合效应样条的个体随机效应作为跨时间的低维表征；③ 模型架构与训练——静态路径优先使用有序Logit/有序回归（proportional odds）并结合ElasticNet正则化以输出校准概率，作为对照并行训练基于树的模型（LightGBM/XGBoost）或基于ordinal objective的模型以捕捉非线性；纵向路径采用两种可选实现：A）将纵向特征（FPCA分数或个体随机效应估计值）作为协变量代入有序回归；B）构建联合模型（共享随机效应的混合效应-有序回归或在贝叶斯框架下用brms/Stan联合建模），直接在单一框架中同时拟合纵向过程与有序结局以获得更一致的参数估计与不确定性量化；④ 超参数调优与模型选择——采用嵌套交叉验证（对小样本防止信息泄露）进行超参搜索并以加权Kappa、平均绝对误差（MAE）、准确率、ordinal c-index、Brier score 及校准曲线为主要选择标准；在存在类不平衡时使用类别权重或重采样策略；⑤ 校准、置信区间与不确定性评估——对概率输出做Platt或Isotonic校准并通过自助法或贝叶斯后验获得预测不确定区间与置信区间，报告预测分布而非单一点估计；⑥ 可解释性与临床可用输出——提供全局重要性（标准化系数、SHAP值）、局部解释示例、部分依赖图与变量影响方向，输出每例的完整概率向量、最可能等级及 95% 置信/可信区间；⑦ 验证与外部评估——在题目提供的独立集上分别验证静态模型（仅首诊可用者 sub101–130）与纵向/联合模型（含随访者 sub131–160），并报告上述性能指标与校准图；⑧ 实施与可重复性——代码使用 Python（scikit-learn, lightgbm, statsmodels, mord）或 R（ordinal, glmnet, brms, lme4, fdapace），模型与数据处理流水线版本化（git）、固定随机种子并保存训练集/验证集划分、模型权重与数据预处理参数以便复现；对于贝叶斯联合模型，指出需要更高计算资源（并行链、多核 CPU 与更大内存），并为部署提供模型序列化格式与调用说明。最终输出为两套可解释、校准的预测结果与不确定性估计（静态模型用于所有病例的首次影像预测，联合模型用于含随访的更精细预测），并伴随完整的性能评估报告、变量重要性解释和再校准建议。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建、训练、验证并交付两类有序结局（mRS 0–6）的预测模型：一是基于入院/首次影像的静态有序预测器，二是利用纵向影像与治疗记录的联合/增强预测器，输出每类概率分布并评估与校准不确定性。",
          "expected_output": "静态模型与联合模型的序列化模型文件、每例的类别概率向量（mRS 0-6，保留4位小数）、每例最可能等级、95% 置信/可信区间、性能报告（加权Kappa、ordinal c-index、Brier、校准图）、可解释性报告（标准化系数/SHAP）、代码与处理日志。",
          "key_inputs_constraints": "1) 表1（临床与治疗基线变量，类别/连续），必须含首次影像流水号与发病到首次影像时间间隔； 2) 表2/表3（首次影像体积/位置/形状/灰度特征，数值向量），须先统一体积单位(mm^3→mL)并以首次影像为静态输入； 3) 附表1（流水号→绝对检查时间映射），用于构建纵向 t_from_onset；若流水号无法映射需记日志并按规则处理； 4) 约束：静态模型仅能使用首次影像特征，联合模型可使用首次+随访影像与时序治疗（需处理不规则采样与缺失）。",
          "modeling_type": "预测+混合",
          "role_in_pipeline": "该子任务为模型构建与验证核心环节，位于特征工程之后、模型部署之前；直接依赖的数据清洗/时间映射/体积单位统一（前序），并为后续临床解释与部署提供概率化预测与模型文件（后序）。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "区分静态（首次影像）与纵向（首次+随访影像）mRS 预测",
              "description": "明确识别静态模型只能用首次影像/表1基线变量，联合模型可用纵向表2/表3与时序治疗，且在说明中使用“首次影像”“纵向”“mRS”关键词。",
              "score": 30,
              "evaluation_focus": "任务分解",
              "scoring_hint": "高分：清晰列出两条建模路径并指明静态仅用首次影像、联合用随访与治疗；中分：区分但未明确字段限制；低分：未区分或混用首次/随访数据。"
            },
            {
              "sub_criteria": "时间映射与体积单位一致性识别（流水号→时间、mm^3→mL）",
              "description": "识别并要求实现流水号映射与单位(mm^3→mL)统一、t_from_onset计算与日志记录，使用关键词“流水号映射”“mm^3→mL”“t_from_onset”。",
              "score": 25,
              "evaluation_focus": "数据衔接",
              "scoring_hint": "高分：提供映射流程、缺失记录规则与示例；中分：提及但无缺失处理细则；低分：忽略时间或单位转换。"
            },
            {
              "sub_criteria": "输出形式与不确定性要求识别（概率分布+置信区间+校准）",
              "description": "识别需输出每类概率向量、最可能等级和不确定区间，并需对概率做校准，包含关键词“概率分布”“校准”“置信/可信区间”。",
              "score": 25,
              "evaluation_focus": "结果约束",
              "scoring_hint": "高分：列出概率精度（4位小数）、校准方法（Platt/Isotonic）与置信区间方案；中分：提到概率与置信区间但无校准细节；低分：只输出单点预测，无概率/校准。"
            },
            {
              "sub_criteria": "评估指标与验证要求识别（加权Kappa/ordinal c-index/MAE/Brier）",
              "description": "识别并要求使用有序问题适配的性能指标（例如加权Kappa、ordinal c-index、Brier、MAE），并计划独立集验证（sub101–130/ sub131–160）。",
              "score": 20,
              "evaluation_focus": "评估设计",
              "scoring_hint": "高分：明确列出指标并指派到静态/联合模型验证集；中分：列出指标但无验证分配；低分：指标不匹配有序结局或无独立验证计划。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述静态有序Logit预测目标（mRS 0-6）并注明ElasticNet/校准输出概率",
              "description": "以任务词汇复述静态路径：使用‘有序Logit/有序回归+ElasticNet’，输出经Platt/Isotonic校准的概率向量与最可能mRS。",
              "score": 40,
              "evaluation_focus": "方法表述",
              "scoring_hint": "高分：精确写出模型、正则化与校准流程；中分：只写模型名无正则/校准；低分：误用非有序方法或未提概率校准。"
            },
            {
              "sub_criteria": "复述纵向/联合建模策略（FPCA或共享随机效应）",
              "description": "明确纵向路径采用FPCA提取时间特征或构建共享随机效应的联合模型，并说明如何将FPCA分数或随机效应作为有序回归的输入。",
              "score": 35,
              "evaluation_focus": "时序建模",
              "scoring_hint": "高分：给出FPCA或联合模型二选项并说明输入输出；中分：仅提一项且无细节；低分：忽略纵向特征表示。"
            },
            {
              "sub_criteria": "复述验证与输出要求（独立集/概率精度/模型保存）",
              "description": "说明要在sub101–130验证静态模型、在sub131–160验证纵向模型，并要求导出模型文件与特征处理流水线以便复现。",
              "score": 25,
              "evaluation_focus": "交付规格",
              "scoring_hint": "High: 明确独立集分配、模型序列化格式、概率保留4位；Mid: 提到验证但未指集；Low: 无交付/验证细节。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于缺失机制与插补的可检验假设（MCAR/MAR/使用mice或缺失指示）",
              "description": "陈述缺失假设（MCAR或MAR）并定义采用多重插补(mice)或缺失指示变量的规则，以及何时回退至删除或人工复核。",
              "score": 30,
              "evaluation_focus": "缺失处理",
              "scoring_hint": "高分：明确假设并给出数值判据（缺失率阈值、插补次数）；中分：有插补方案无缺失假设；低分：无缺失处理或任意删例。"
            },
            {
              "sub_criteria": "关于有序Logit比例优势（proportional odds）假设的检验与备选方案",
              "description": "声明将检验比例优势假设（Brant或score test），若违背则采用部分比例模型或非参数有序方法（LightGBM ordinal），并记录选择理由。",
              "score": 25,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：提供检验方法与备选方案并举例；中分：提检验无备选；低分：忽略比例优势假设。"
            },
            {
              "sub_criteria": "关于样本量与类别不平衡的可操作假设（权重或重采样）",
              "description": "陈述处理类别不平衡的方法（类别权重、SMOTE或重采样）及何时使用（如某类占比<5%），并评估对指标的影响假设。",
              "score": 25,
              "evaluation_focus": "样本处理",
              "scoring_hint": "高分：给出阈值与方法并模拟影响；中分：提出方法无阈值；低分：忽略不平衡。"
            },
            {
              "sub_criteria": "关于纵向时间不规则采样与同步化的处理假设（FPCA可接受不规则采样）",
              "description": "声明采用FPCA/混合效应样条处理不规则采样，或在必要时对时间做插值并说明插值方法与风险。",
              "score": 20,
              "evaluation_focus": "时序假设",
              "scoring_hint": "高分：说明FPCA处理不规则采样并给参数；中分：提插值无方法细节；低分：无时序采样处理。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "首次影像静态模型构建（有序Logit+ElasticNet）",
              "description": "设计有序Logit/Proportional Odds模型并结合ElasticNet做特征选择，明确标准化、类别编码与正则化路径，输出概率并校准。",
              "score": 30,
              "evaluation_focus": "模型设计",
              "scoring_hint": "高分：给出正则化寻优策略、特征预处理与校准流程；中分：提出模型无详细超参策略；低分：未用有序模型或无正则化。"
            },
            {
              "sub_criteria": "纵向特征提取（FPCA/样条随机效应）并入有序回归或联合建模",
              "description": "构建FPCA或混合效应样条提取个体时序低维描述或直接构建共享随机效应的联合模型，并说明如何纳入有序结局模型。",
              "score": 25,
              "evaluation_focus": "时序表示",
              "scoring_hint": "高分：提供FPCA分量选择标准与混合模型公式；中分：仅提方法无参数；低分：将时序数据平铺为原始长矢量。"
            },
            {
              "sub_criteria": "非线性/树模型作为备选（LightGBM/XGBoost ordinal）与模型集合策略",
              "description": "设计树模型或ordinal objective作为对照，说明如何与有序Logit比较/融合（堆叠/加权平均）以提高性能。",
              "score": 20,
              "evaluation_focus": "模型丰富",
              "scoring_hint": "高分：实现并比较至少一种树模型并给出融合策略；中分：提及树模型但无比较；低分：仅单一模型且无对照。"
            },
            {
              "sub_criteria": "特征工程与降维（形态/灰度/体积/位置）",
              "description": "对表2/表3影像特征做方差/共线性过滤，后续用监督筛选或PCA/稀疏PCA降维，并说明保留维度与医学可解释性处理。",
              "score": 25,
              "evaluation_focus": "特征工程",
              "scoring_hint": "高分：给出阈值、方法与医学生物学解释；中分：有降维但无保留规则；低分：直接使用高维原始特征无降维。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "训练与验证策略（嵌套交叉验证与独立集验证）",
              "description": "实施嵌套CV做超参寻优并使用sub101–130或sub131–160做独立验证，记录随机种子与数据切分策略。",
              "score": 30,
              "evaluation_focus": "验证设计",
              "scoring_hint": "高分：嵌套CV+独立验证并报告fold结果与种子；中分：仅CV或仅独立验证；低分：无交叉验证或信息泄露。"
            },
            {
              "sub_criteria": "超参优化、校准与不确定性估计（bootstrap或贝叶斯）",
              "description": "说明超参搜索（网格/随机/贝叶斯优化）、校准方法(Platt/Isotonic)与不确定度通过引导法或后验分布估计。",
              "score": 25,
              "evaluation_focus": "优化/不确定",
              "scoring_hint": "高分：实施并报告超参搜索空间、校准前后指标与置信区间；中分：有超参与校准但无不确定性；低分：无校准或不确定性评估。"
            },
            {
              "sub_criteria": "性能度量与阈值选择（加权Kappa/ordinal c-index/Brier/MAE）",
              "description": "在训练与验证中报告加权Kappa、ordinal c-index、Brier与MAE并说明决策阈值选择依据与敏感性分析。",
              "score": 25,
              "evaluation_focus": "性能报告",
              "scoring_hint": "高分：完整报告指标并做阈值敏感性分析；中分：报告部分指标；低分：只给单一准确率或无阈值讨论。"
            },
            {
              "sub_criteria": "模型选择与可重复性（模型保存与版本记录）",
              "description": "选定最终模型并保存权重、预处理参数、随机种子与软件包版本，提供载入与推断示例。",
              "score": 20,
              "evaluation_focus": "复现性",
              "scoring_hint": "高分：模型文件、预处理参数与版本皆保存并有示例；中分：保存模型无环境记录；低分：无模型持久化或复现说明。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据衔接代码（流水号映射、t_from_onset、mm^3→mL转换）",
              "description": "实现流水号→时间映射、onset_time计算、t_from_onset生成与体积单位转换，并记录无法映射/异常的日志文件。",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：自动化脚本有日志与异常清单并示例；中分：实现功能但无详尽日志；低分：手动或不完整实现。"
            },
            {
              "sub_criteria": "可复现的训练代码与配置（随机种子、版本、参数化）",
              "description": "训练脚本参数化、固定随机种子并记录软件包版本，训练流水线可通过配置复现最终结果。",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：提供requirements、seed、config文件并能复现；中分：部分信息缺失；低分：无法复现。"
            },
            {
              "sub_criteria": "单元测试与输入校验（缺失、异常值、维度一致性）",
              "description": "包含关键函数的单元测试或断言，验证输入字段存在性、体积范围合理性与时间排序，遇异常返回可读日志。",
              "score": 25,
              "evaluation_focus": "代码鲁棒",
              "scoring_hint": "高分：有单元测试并覆盖边界情况；中分：有断言无测试；低分：无校验易崩溃。"
            },
            {
              "sub_criteria": "模型序列化与预测接口（API/示例脚本）",
              "description": "提供模型序列化（pickle/ONNX/PMML或RDS）和示例推断脚本/API，能接受表4格式输入并输出概率向量与置信区间。",
              "score": 20,
              "evaluation_focus": "部署准备",
              "scoring_hint": "高分：提供API示例与序列化格式并测试；中分：仅有序列化文件；低分：无序列化或调用示例。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "整体性能与校准分析（加权Kappa/ordinal c-index/Brier和校准图）",
              "description": "提供训练/验证/独立集的性能表与校准图，并量化校准改进（如Brier或ECE变化）。",
              "score": 30,
              "evaluation_focus": "性能解读",
              "scoring_hint": "高分：完整表格+图表并解释数值意义；中分：有表或图无解释；低分：仅列单一指标或无独立集结果。"
            },
            {
              "sub_criteria": "不确定性与置信区间报告（自助法或贝叶斯后验）",
              "description": "对每例预测给出95%置信/可信区间并说明计算方法（bootstrap或Bayesian posterior），展示不确定性在不同mRS等级的分布。",
              "score": 25,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：每例概率向量+95%区间并说明方法；中分：总体不确定性估计无逐例区间；低分：无不确定性报告。"
            },
            {
              "sub_criteria": "可解释性分析（标准化系数、SHAP、局部示例）",
              "description": "提供全局重要性（有序Logit系数或SHAP排名）、部分依赖图与若干局部病例解释示例，解释变量与mRS关联方向。",
              "score": 25,
              "evaluation_focus": "可解释性",
              "scoring_hint": "高分：系数与SHAP并举、含局部解释；中分：仅全局重要性；低分：无解释或仅列变量名。"
            },
            {
              "sub_criteria": "子群/敏感性分析与临床可用性建议",
              "description": "对关键子群（如高/低基线HM、是否扩张、接受随访与否）做性能对比、敏感性分析并提出临床使用建议与再校准策略。",
              "score": 20,
              "evaluation_focus": "临床价值",
              "scoring_hint": "高分：给出子群性能差异、再校准建议与临床阈值；中分：有子群分析无建议；低分：无子群或临床建议。"
            }
          ]
        }
      }
    }
  }
}