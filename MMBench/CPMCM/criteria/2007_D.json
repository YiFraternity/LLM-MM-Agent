{
  "task_id": "2007_D",
  "problem": "1. 以县局$X_1$及其所辖的16个支局$Z_1, Z_2, \\cdots, Z_{16}$为研究对象，假设区级第一班次邮车08:00到达县局 $X_1$ ，区级第二班次邮车16:00从县局 $X_1$ 再出发返回地市局D，若每辆县级邮车最多容纳65袋邮件，试问最少需要多少辆邮车才能满足该县的邮件运输需求？同时，为提高邮政运输效益，应如何规划邮路和如何安排邮车的运行？（邮件量见表2，空车率= $(\\text{邮车最大承运的邮件量(袋)}-\\text{邮车运载的邮件量(袋)})/\\text{邮车最大承运的邮件量(袋)}$，单车由于空车率而减少的收入为 $(\\text{空车率} \\times 2元/公里)$）\n\n2. 采用尽可能少、尽可能短的邮路可以减少邮政部门车辆和人员等的投入，从而显著降低全区邮政运输网的总运行成本。考虑投入车况较好的邮车，通常每条邮路只需要一辆邮车即能满足运载能力要求，试问应如何构建该地区的邮政运输网络（县的划分不能变更），请你给出邮路规划和邮车调度方案。请注意邮车的调度必须满足上文中有关该地区的邮政运输流程及时限规定。（每条邮路的运行成本为3元/公里）\n\n3. 考虑到部分县与县交界地带的支局，其邮件由邻县县局负责运送可能会降低全区的运行成本，带来可观的经济效益。若允许在一定程度上打破行政区域的限制，你能否给出更好的邮路规划和邮车调度方案？（在此同样不必考虑邮车的运载能力的限制，每条邮路的运行成本为3元/公里）\n\n4. 县局选址的合理与否对构建经济、快速的邮政运输网络起到决定性的作用。假设图2中县局$X_1，\\cdots，X_5$均允许迁址到本县内任一支局处，同时原来的县局弱化为普通支局。设想你是该地区网运部门负责人，请你重新为各个县局选址，陈述你的迁址理由并以书面材料形式提交省局网运处。\n\n\\begin{table}[H]\n\\centering\n\\caption{邮局间直达公路里程}\n\\begin{tabular}{ccc}\n\\hline\n\\textbf{邮局i} & \\textbf{邮局j} & \\textbf{直达公路里程(km)} \\\\\n\\hline\nD & Z42 & 50 \\\\\nD & Z59 & 54 \\\\\nD & Z60 & 43 \\\\\nD & Z61 & 22 \\\\\nD & Z62 & 40 \\\\\nD & Z63 & 51 \\\\\nD & Z65 & 51 \\\\\n\\vdots & \\vdots & \\vdots \\\\\nZ72 & Z73 & 13 \\\\\n\\hline\n\\end{tabular}\n\\end{table}\n\n\\begin{table}[H]\n\\centering\n\\caption{各支局邮件收寄及寄达量(单位: 袋)}\n\\begin{tabular}{cccccccccccccccc}\n\\hline\n & Z1 & Z2 & Z3 & Z4 & Z5 & Z6 & Z7 & Z8 & Z9 & Z10 & Z11 & Z12 & Z13 & Z14 & Z15 & Z16 \\\\\n\\hline\n寄达局为$Z_i$的邮件量 & 10 & 15 & 6 & 9 & 13 & 6 & 11 & 4 & 13 & 17 & 11 & 2 & 11 & 21 & 13 & 14 \\\\\n支局$Z_i$收寄的邮件量 & 9 & 14 & 5 & 10 & 9 & 10 & 13 & 9 & 15 & 9 & 6 & 7 & 13 & 15 & 10 & 16 \\\\\n\\hline\n\\end{tabular}\n\\end{table>",
  "subtask": {
    "1": {
      "subtask": "子任务1的目标是对给定的“邮局间直达公路里程.xlsx”进行全面的数据清洗与预处理，并在此基础上建立县级（以X1为例）与区级通用的路网与参数数据库并给出可直接用于后续建模的数学模型模版（变量、目标、约束与线性化说明）和实现接口；其范围包括（1）数据读取与质量检查：用工具（例如 Python 的 pandas 读取 Excel）加载原始边表，检查并去重双向记录（i→j 与 j→i）、去除自环、识别与标注缺失值或异常里程并记录处理策略（例如取对向最小值/平均值或标记为需补充），同时输出连通性检测和孤立节点报告；（2）构建标准化图结构与矩阵：将清洗后数据对称化为无向加权图 G=(V,E)，生成并导出距离矩阵 D=[d_{ij}]（单位：km）和对应的县级行驶时间矩阵 T^c=[d_{ij}/30] 与区级行驶时间矩阵 T^d=[d_{ij}/65]（速度参数可配置），并生成邻接表/边列表（CSV/JSON格式）供算法使用；（3）参数化与常量定义：建立并导出参数表（包括所有节点标识、必须覆盖节点集合Z58..Z73与X1..X5、每个支局的寄达量g_i与收寄量p_i、车辆容量C=65袋、支局卸装时间5min、县局卸装时间10min、县级可用时间窗（由区级班次时刻导出，示例：区级第一班08:00到达X1→县级最早出发≈09:00、须在15:00前返回以保证区级第二班16:00出发）、空车率/空驶损失的计价规则等）；（4）数学模型模版：给出县级VRP的标准MIP表述要素並明确定义决策变量（弧变量 x_{ij}^k、到达时间 t_i^k、载荷 l_i^k、车辆启用 y_k 或路径变量 z_r）、目标函数候选（优先最小化车辆数，其次在车辆数固定下最小化里程与空车损失）、以及完整约束集合（流守恒、每支局被覆盖、车辆容量与载荷动态平衡、时间推进/到达时间的大M线性化、服务时间、起止时间窗、车辆启用与弧的耦合），并对非线性项（如空车率×里程）给出可行的线性化或路径级预计算近似方案；（5）实现接口与算法建议：提供用于后续列生成/路径生成与主问题求解的代码框架接口说明（建议使用 Python + networkx 构建路网，scikit-learn 做聚类初始化，Clarke‑Wright/2‑opt 做候选路径生成，Pyomo/GuRoBi 或 CPLEX 接入 MIP 求解，列生成时给出路径评估函数计算时间窗与空车成本），并附带单元测试用小实例验证数据完整性与时间窗计算正确性；（6）交付件：清洗后的距离矩阵与时间矩阵文件、节点与需求参数表、MIP 模型文件（或 Pyomo 模板）、路径生成器脚本与示例输入、数据质量报告和使用说明文档（包括如何调整速度、服务时间与时间窗的参数）；所有输出应保证可直接被后续子任务调用且附有格式规范说明与示例。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对“邮局间直达公路里程.xlsx”进行全面数据清洗与预处理，构建县级（以X1为例）与区级通用的路网与参数数据库，并生成用于后续县级VRP的数学模型模版（变量/目标/约束/线性化）和实现接口文档",
          "expected_output": "清洗后的边表/距离矩阵D/县级行驶时间矩阵T^c/区级行驶时间矩阵T^d；邻接表/边列表（CSV/JSON）；参数表（节点、需求g_i/p_i、C=65、服务时长、时间窗等）；Pyomo或MIP模板文件；路径生成器脚本与单元测试；数据质量报告与使用说明文档",
          "key_inputs_constraints": "原始边表 Excel (边 i-j, 里程数，可能有双向重复、自环、缺失值)；必须覆盖节点集合 Z58..Z73 与 X1..X5；支局需求表（每支局收寄和寄达量 g_i, p_i）；车辆容量 C=65 袋、支局卸装5min、县局卸装10min、县级速度默认30km/h、区级速度默认65km/h；时间窗约束（区级第一班08:00到达X1，第二班16:00离开X1，县级出发/返回时窗由此派生）；输出格式需支持 CSV/JSON 与 Pyomo 模板",
          "modeling_type": "混合（数据清洗/结构化 + 优化建模模板）",
          "role_in_pipeline": "作为建模流程的前端与基础模块：位于原始数据读取后、具体路由优化求解前，输出为后续县级VRP/区级网络规划与调度（列生成/路径生成/MIP 求解）的直接输入；直接依赖原始边表与需求表，后续被路径生成、MIP 求解器与调度仿真模块调用",
          "assumptions": "原始 Excel 可能只列出部分直达路段（非完全图）；未提供完整节点坐标，故以节点间里程为边权；若对向里程不一致，默认取最小值或明确标注为需补充；示例时间窗以题示意的X1为例展开，其它县按同一逻辑派生"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "去重双向记录与自环处理",
              "description": "检测并处理 Excel 中 i→j 与 j→i 的重复记录与自环，记录处理策略（保留最小/平均/标注需补充）并输出操作日志",
              "score": 40,
              "evaluation_focus": "数据清洗准确性",
              "scoring_hint": "高分：所有双向重复记录被识别并按策略去重（日志列出数量与规则）；中分：≥90%重复记录处理并有少量人工标注；低分：未去重或无处理记录"
            },
            {
              "sub_criteria": "异常里程与缺失值识别与标注",
              "description": "识别异常里程（负值、极端值、缺失），给出自动填补策略或标注为需补充，并输出替换/保留决策的统计表",
              "score": 30,
              "evaluation_focus": "异常检测策略",
              "scoring_hint": "高分：异常/缺失全部识别并按规则处理（例如取对向最小/均值或标注），且提供统计表；中分：80–99%识别并处理；低分：未提供明确处理策略或统计"
            },
            {
              "sub_criteria": "连通性检测与孤立节点报告",
              "description": "对清洗后图做连通性检测，输出连通分量、孤立节点列表，并对非连通部分给出补充建议（需补边或调整）",
              "score": 20,
              "evaluation_focus": "网络完整性",
              "scoring_hint": "高分：提供连通分量个数、孤立节点列表和补边建议；中分：提供连通性结果但无补救建议；低分：未检测连通性或结果缺失"
            },
            {
              "sub_criteria": "重复与冲突记录审计日志",
              "description": "生成可审计的变更日志，包括原始记录、清洗后记录、处理人/规则与时间戳，便于后续追溯",
              "score": 10,
              "evaluation_focus": "可追溯性/文档化",
              "scoring_hint": "高分：完整变更日志含原值与新值并可检索；中分：仅部分变更记录；低分：无审计日志"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "Excel 读取与表结构规范化说明",
              "description": "明确说明如何读取原始 Excel（字段名、单位、缺失标识），并给出标准化列名映射与示例行",
              "score": 30,
              "evaluation_focus": "接口规范",
              "scoring_hint": "高分：给出字段映射、示例行与读取代码片段；中分：只描述字段但无代码；低分：未说明读取细节"
            },
            {
              "sub_criteria": "生成距离矩阵D与时间矩阵T^c/T^d的步骤说明",
              "description": "复述如何由清洗后边表构造对称距离矩阵 D 和按速度参数生成县级行驶时间矩阵T^c与区级T^d，说明速度参数可配置性",
              "score": 30,
              "evaluation_focus": "数学结构化",
              "scoring_hint": "高分：提供构造步骤、示例数值、参数化接口；中分：描述正确但缺示例；低分：叙述模糊或有错误"
            },
            {
              "sub_criteria": "参数表与时间窗复述（含X1示例）",
              "description": "明确列出参数表字段（节点ID、必须覆盖集合Z58..Z73、g_i/p_i、C、服务时长、时间窗等），并用X1流程示例推导县级时间窗",
              "score": 20,
              "evaluation_focus": "参数完整性",
              "scoring_hint": "高分：参数齐全且X1时间窗推导正确；中分：参数齐全但示例有轻微偏差；低分：参数缺失或示例错误"
            },
            {
              "sub_criteria": "交付件清单与调用接口说明",
              "description": "列明交付文件（CSV/JSON/pyomo模板等）格式、字段、示例及后续模块如何调用这些文件",
              "score": 20,
              "evaluation_focus": "可用性/文档化",
              "scoring_hint": "高分：交付清单齐全且含调用示例；中分：清单齐全但无调用示例；低分：不明确交付内容"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "对向里程处理假设说明",
              "description": "明确对向里程不一致时的处理假设（取最小/平均/标注需补充），并评估该假设对路网对称性的影响",
              "score": 25,
              "evaluation_focus": "建模合理性",
              "scoring_hint": "高分：给出优先规则并量化影响；中分：给出规则但未量化；低分：无明确假设"
            },
            {
              "sub_criteria": "速度与服务时间参数假设",
              "description": "说明县级/区级默认平均时速（示例30/65 km/h）及支局/县局卸装时长5/10min 可配置性与来源",
              "score": 25,
              "evaluation_focus": "参数化假设",
              "scoring_hint": "高分：明确数值并说明可调接口与默认来源；中分：给出数值但未说明可调性；低分：缺参数或不合理"
            },
            {
              "sub_criteria": "连通性与补边假设",
              "description": "对非连通情形给出可接受假设（允许补边/人工补充/近似路径）并说明对后续模型的影响",
              "score": 25,
              "evaluation_focus": "风险评估",
              "scoring_hint": "高分：列出补边策略并评估影响；中分：给出策略无影响评估；低分：无应对方案"
            },
            {
              "sub_criteria": "需求与时间窗聚合假设（以X1为例）",
              "description": "说明如何使用表2的收寄/寄达量聚合为县级发车/回程负载，并演示X1基于区级班次推导出的县级出发/返回时间窗",
              "score": 25,
              "evaluation_focus": "建模假设明确性",
              "scoring_hint": "高分：给出计算公式与X1示例数值校验；中分：描述合理但无数值示例；低分：模糊或错误"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "决策变量的明确定义（含弧变量 x_{ij}^k、到达时间 t_i^k 等）",
              "description": "逐项定义县级VRP所需决策变量（弧变量、到达时间、载荷、车辆启用或路径变量），并说明索引范围与变量类型（0/1/实数）",
              "score": 25,
              "evaluation_focus": "变量定义/建模思路",
              "scoring_hint": "高分：变量齐全、索引范围明确并与数据结构匹配；中分：变量基本齐全但边界/索引有遗漏；低分：变量不完整或类型错误"
            },
            {
              "sub_criteria": "目标函数候选与优先级（最小车辆数→最小里程/空车损失）",
              "description": "给出主目标（最小车辆数）与次目标（固定车辆数下最小里程和空车率损失）的数学表述，并说明加权/分层求解策略",
              "score": 25,
              "evaluation_focus": "目标设定/多目标处理",
              "scoring_hint": "高分：数学化表达清晰并给出分层求解或加权参数建议；中分：表达合理但无求解策略；低分：目标模糊或不一致"
            },
            {
              "sub_criteria": "约束集合完整性（流守恒、覆盖、容量、时间窗、服务时长）",
              "description": "列出并形式化流守恒、每支局被覆盖、容量与载荷连续性、到达时间推进、大M线性化、起止时窗、车辆启用与弧耦合等约束",
              "score": 25,
              "evaluation_focus": "约束完整性",
              "scoring_hint": "高分：约束完整且无逻辑矛盾，包含大M说明；中分：少数约束缺失或表达不完整；低分：关键约束缺失"
            },
            {
              "sub_criteria": "非线性项线性化或近似处理（空车率×里程等）",
              "description": "对空车率×里程等非线性成本提出可行线性化（路径级预计算、分段线性或引入辅助变量）与误差评估",
              "score": 25,
              "evaluation_focus": "线性化/近似方案",
              "scoring_hint": "高分：给出可执行线性化方案并量化近似误差；中分：给出方案但无误差评估；低分：未处理非线性或方案不可行"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "MIP 模板与求解可用性（Pyomo/LP 格式）",
              "description": "提供可直接调用的 MIP/ Pyomo 模板文件，变量/约束映射清晰，能直接接入求解器（Gurobi/CPLEX）",
              "score": 30,
              "evaluation_focus": "求解器接入",
              "scoring_hint": "高分：模板可直接跑通并给出示例求解脚本；中分：模板完整但需小改动；低分：模板不完整或无法运行"
            },
            {
              "sub_criteria": "路径生成/列生成接口与评估函数设计",
              "description": "说明列生成或路径生成器接口、路径评估函数（检验时间窗/容量/空车成本）及与主问题的交互方式",
              "score": 25,
              "evaluation_focus": "算法接口设计",
              "scoring_hint": "高分：接口文档与示例实现并能评估空车成本；中分：接口描述但无实现示例；低分：无接口或不可复现"
            },
            {
              "sub_criteria": "可扩展性与复杂度/性能评估",
              "description": "评估模型规模对求解时间的影响，给出节点/边数增长时的时间复杂度估计及推荐的分治或启发式策略",
              "score": 25,
              "evaluation_focus": "可扩展性评估",
              "scoring_hint": "高分：给出复杂度估算与可行的降维/启发式方案并用实验数据支持；中分：有估算但无实验；低分：无性能讨论"
            },
            {
              "sub_criteria": "单元测试与验证实例",
              "description": "提供若干小规模测试实例（含预期解）用于验证时间窗计算、载荷平衡与边权导入的正确性",
              "score": 20,
              "evaluation_focus": "验证/测试",
              "scoring_hint": "High: 至少2个测试用例均通过并含断言；中: 有测试但覆盖不全；低: 无测试用例"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据清洗代码质量与可复现性（pandas 实现）",
              "description": "提供可执行的 Excel 读取、去重双向记录、自环剔除、异常标注与数据日志化的代码（含依赖与运行说明）",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：一键运行产生清洗后文件与日志；中分：需小幅修改参数即可运行；低分：无法运行或缺关键脚本"
            },
            {
              "sub_criteria": "路网构建与矩阵导出（networkx + CSV/JSON）",
              "description": "实现基于 networkx 的无向加权图构建、导出距离矩阵D与时间矩阵T^c/T^d，并支持速度参数配置",
              "score": 25,
              "evaluation_focus": "实现完整性",
              "scoring_hint": "高分：输出格式完全符合说明且含示例；中分：输出正确但格式需手动调整；低分：输出错误或缺导出功能"
            },
            {
              "sub_criteria": "Pyomo/ MIP 模板与求解接口实现",
              "description": "提供可直接调用的 Pyomo 模板或 MIP 写法，包含 solver 接入示例（Gurobi/CPLEX/GLPK）与参数化入口",
              "score": 25,
              "evaluation_focus": "求解接口实现",
              "scoring_hint": "高分：模板直接可解小实例并输出解；中分：模板完整但仅能建模不能求解；低分：模板缺失或错误"
            },
            {
              "sub_criteria": "单元测试、示例输入与使用说明文档",
              "description": "代码仓含单元测试、示例输入文件与 README（说明如何调整速度/服务时间/时间窗），便于后续调用",
              "score": 20,
              "evaluation_focus": "可维护性/文档",
              "scoring_hint": "高分：覆盖关键函数且文档完整；中分：有文档但测试不全；低分：无测试或说明"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "数据质量报告与处理结果统计（含X1示例）",
              "description": "提交数据质量报告，列出原始记录数、去重数、自环数、异常/缺失条目及处理后统计，并以X1为示例展示前后对比",
              "score": 35,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：报告详尽并量化变化（表格或图表）；中分：报告有主要统计但不详尽；低分：无或不完整报告"
            },
            {
              "sub_criteria": "矩阵与参数文件一致性校验",
              "description": "对比邻接表、距离矩阵 D、时间矩阵 T^c/T^d 与参数表，验证维度一致、对称性及数值匹配并列出校验脚本输出",
              "score": 30,
              "evaluation_focus": "一致性检验",
              "scoring_hint": "高分：自动校验脚本无异常并给出通过报告；中分：手工检验或部分自动化；低分：未检验或检验失败"
            },
            {
              "sub_criteria": "时间窗与班次推导验证（X1 推导是否正确）",
              "description": "验证基于区级班次（08:00 到达、16:00 出发）推导出的县级最早出发/最晚返回时间窗与县级邮件处理时长的一致性",
              "score": 20,
              "evaluation_focus": "时窗正确性",
              "scoring_hint": "高分：X1 时间窗计算正确且有数值示例；中分：有计算但示例与文档不匹配；低分：计算错误或缺示例"
            },
            {
              "sub_criteria": "可配置性与后续调用友好性说明",
              "description": "说明如何调整速度、服务时间、空车率计价规则并演示调整后重新生成矩阵/参数的流程",
              "score": 15,
              "evaluation_focus": "灵活性/可重用性",
              "scoring_hint": "高分：可通过配置文件或命令行参数完成全部调整；中分：需改代码常量；低分：不支持参数化"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2的目标是在已清洗的路网距离矩阵与支局日需求（对X1来说为16个支局的“寄达量”g_i与“收寄量”p_i）、车辆参数（县级车速度30 km/h、容量65袋、支局服务时间5分钟、县局装卸10分钟）及时间窗（区级第一班08:00到达X1→县级最早出发约09:00，必须在15:00前全部返回以保证区级第二班16:00出发）等已知输入下，判定并给出满足所有容量与时间窗约束的最小县级邮车数m*及对应的可执行路由、时刻表和装载计划；为此应按如下明确步骤实施：1) 数据准备：从清洗后的距离矩阵构建县内路网（无向加权图），预计算任意两节点间最短路程/时间（Floyd或多次Dijkstra），并汇总每支局的总日需发/收包量；2) 下界计算：先计算容量下界 m_L = max(ceil(sum g_i / C), ceil(sum p_i / C)) 作为起点；3) 候选路径生成：对于给定车辆数m（从m_L起），基于路网距离和需求权重(g_i+p_i)对支局做路网聚类（基于图距离的K-means或基于最短路半径的层次聚类）生成m簇，针对每簇用启发式构造若干候选回路（Clarke‑Wright savings、贪心插入法，再用2‑opt/3‑opt局部搜索改进）并在生成时对每条路径进行时间窗与载荷轨迹仿真——按顺序累加行驶时间与服务时间、计算到达/离开时刻并实时累加载荷变化（出发时装载用于寄达的包，沿途累计收寄包），若任一时刻载荷>65或回程超出15:00则该路径标记为不可行；4) 路径成本与空车率处理：对每个可行路径计算精确里程、运行时间及基于路径上段平均载荷的空车率与因空车率导致的单位里程收入损失，把这些成本项预先合成为路径的总代价；5) 最小车辆可行性判定：将候选路径汇入集合覆盖/集合分区的整数线性规划（每条路径为一个变量，约束为每个支局至少被覆盖一次且每辆车对应路径数限制），目标先最小化启用路径/车辆数m（或在固定m下最小化总成本），使用商业求解器（Gurobi/CPLEX，或Pyomo接口）求解；若在当前m下无可行解则令m←m+1并重复第3、4、5步直至找到可行解m*；6) 精化与验证：对得到的方案执行高精度时序仿真（包含离散服务时间、节点装卸、可选错峰出发策略）验证每辆车的到达/离开时间序列、最大载荷与回场时间，若发现边缘违约通过局部调整（路径互换、节点重新分配或错峰出发）修正；7) 输出与交付物：返回最少车辆数m*、每辆车的具体路径序列、各停点的到达/离开时刻、出发时装载量与回程预计载量、每条路径的总里程/运行成本/空车率及总体成本汇总，并提供用于复制计算的代码（Python，建议用pandas/networkx处理数据、scikit‑learn做聚类、启发式路径生成器实现savings与2‑opt、并以Pyomo+Gurobi或CPLEX做集合覆盖求解）、配置参数清单和自动化验证脚本；8) 计算性能与鲁棒性注意：对路径生成与MIP求解采用并行化或多起点启发式以加速搜索，并设定明确终止标准（如达到最小m且MIP可行或达到允许的最大车辆上限），所有步骤需严格按照时间窗与容量约束做逐条可行性判断，确保交付的路线表可直接用于现场调度。",
      "criteria": {
        "task_understanding": {
          "core_goal": "判定并给出满足容量与时间窗约束的最少县级邮车数 m*，并输出每辆车的可执行路由、时刻表与装载计划（含空车率成本纳入路径代价）",
          "expected_output": "标量 m*；每辆车的路径序列（节点顺序）、到达/离开时刻表、出发装载量与回程载量；每路径总里程、运行时间、空车率与成本；可复现的 Python 代码（数据读入、路径生成、仿真、Pyomo/Gurobi 接口）与自动化验证脚本",
          "key_inputs_constraints": "1) 距离矩阵 D（对称无向加权矩阵，单位 km）与支局需求向量 g_i(寄达)、p_i(收寄)（整数袋）；2) 车辆参数：县级速度 30 km/h、容量 C=65 袋、支局服务时间 5 min、县局装卸 10 min；3) 时间窗：县级可出发最早约 09:00，所有车辆须在 15:00 前返回以保障区级第二班 16:00 从县局出发；4) 初始下界 m_L = max(ceil(sum g_i/C), ceil(sum p_i/C))，路径必须满足载荷轨迹与时间推进仿真；5) 空车率计价规则纳入路径总代价（空车率×2元/公里）",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "作为子任务1（数据清洗与路网构建）之后的核心运筹优化实现，依赖清洗后的距离矩阵、时间矩阵与节点/需求参数；为后续全区邮路规划与县级合并优化提供最小车辆基线与可执行路由（后序可用于子任务3/4的网络重构与成本比较）"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别最小车辆下界 m_L",
              "description": "是否正确从 g_i 与 p_i 计算容量下界 m_L= max(ceil(sum g_i/C), ceil(sum p_i/C)) 并解释其作为搜索起点的合理性",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：给出精确计算并说明为何取两项最大；中分：计算正确但缺乏解释；低分：m_L 错误或未使用下界指导搜索"
            },
            {
              "sub_criteria": "识别并量化时间窗约束（09:00—15:00）",
              "description": "是否明确时间窗来源（区级第一班08:00到达→县级最早出发约09:00，需在15:00前返回）并将其作为路径可行性判断要素",
              "score": 40,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：精确列出出发/返回窗并用于仿真判定；中分：列出时间窗但未用于路径筛选；低分：忽略或错误使用时间窗"
            },
            {
              "sub_criteria": "识别容量与载荷时间动态（含收寄累加）",
              "description": "是否识别车辆出发即装载寄达包、沿途收寄累加载荷并据此进行时序载荷仿真判断",
              "score": 30,
              "evaluation_focus": "动态仿真",
              "scoring_hint": "高分：实现时间序列载荷仿真并检验任一时刻载荷≤65；中分：静态累计检查总量但未按到达顺序仿真；低分：忽视收寄累加导致容量违约风险"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述目标“最小县级邮车数 m*”与交付物",
              "description": "是否在复述中精确包含‘最少车辆 m*、每车可执行路由/时刻表/装载计划及成本（含空车率）’等要求",
              "score": 40,
              "evaluation_focus": "目标对齐",
              "scoring_hint": "高分：逐项列出所有交付物并与任务输出格式一致；中分：列出主要交付物但遗漏空车率或成本；低分：复述含糊或缺重大输出"
            },
            {
              "sub_criteria": "复述求解流程（m_L→候选路径→集合覆盖→迭代m）",
              "description": "是否按步骤描述从下界 m_L、聚类/路径生成、时间/载荷仿真、集合覆盖 ILP、若不可行则 m←m+1 重试的完整流程",
              "score": 35,
              "evaluation_focus": "流程化思维",
              "scoring_hint": "高分：流程顺序完整且每步输入/输出明确；中分：流程有次序但细节欠缺；低分：流程断裂或步骤遗漏"
            },
            {
              "sub_criteria": "表述空车率与路径代价的整合方式",
              "description": "是否明确把空车率×2元/km 的损失与里程合成路径总代价并说明预计算或线性近似策略",
              "score": 25,
              "evaluation_focus": "成本建模",
              "scoring_hint": "高分：给出可计算公式并说明以平均载荷或分段预计算方式；中分：说明纳入但未给明确计算方法；低分：忽略空车率成本"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "列出并合理化速度与服务时间假设",
              "description": "是否声明县级速度 30 km/h、支局服务 5min、县局装卸 10min 且说明这些参数如何影响时间窗仿真",
              "score": 50,
              "evaluation_focus": "参数假设",
              "scoring_hint": "高分：列出参数并讨论其合理性与可调性；中分：列出参数无讨论；低分：参数遗漏或与题目矛盾"
            },
            {
              "sub_criteria": "图与需求的结构性假设（对称/连通性/孤立处理）",
              "description": "是否假设距离矩阵对称、图连通并说明孤立/缺失路段的处理策略（如标注需补充或用最短对向值替代）",
              "score": 30,
              "evaluation_focus": "数据假设",
              "scoring_hint": "高分：明确对称化与异常值处理规则并记录后处理标记；中分：仅陈述假设未给处理细则；低分：未提或处理规则不当"
            },
            {
              "sub_criteria": "对搜索边界与可行性上限的假设",
              "description": "是否给出最大车辆上限、迭代终止条件与可接受最优性（如 MIP gap、时间限制）假设",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：设置合理上限与终止准则并说明原因；中分：给出上限但无解释；低分：无终止标准或上限不合理"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "MIP 决策变量与目标函数表述（含最小化 m*）",
              "description": "是否定义弧/路径变量 x 或路径启用变量 z，车辆启用 y，明确首要目标最小化车辆数 m*，次级目标最小化总代价并给出数学式",
              "score": 40,
              "evaluation_focus": "数学表述",
              "scoring_hint": "高分：变量、目标函数与优先级分层清晰并配大M说明；中分：变量与目标存在但优先级或约束不清；低分：变量或目标缺失/错误"
            },
            {
              "sub_criteria": "时间窗与载荷动态的约束与线性化（到达时间 t_i、载荷 l_i）",
              "description": "是否给出到达时间推进约束、服务时间叠加、载荷动态平衡约束及大M 线性化或路径级预仿真替代方案",
              "score": 30,
              "evaluation_focus": "线性化",
              "scoring_hint": "高分：给出可求解的大M 线性化或路径级预计算替代并论证正确性；中分：描述约束但线性化欠清晰；低分：未处理非线性或错误线性化"
            },
            {
              "sub_criteria": "路径级成本（里程+空车率损失）建模与近似",
              "description": "是否将空车率相关非线性项用路径级预计算或分段线性化转为集合覆盖中可加权代价，并说明计算方法",
              "score": 30,
              "evaluation_focus": "成本线性化",
              "scoring_hint": "高分：提供具体预计算算法并在路径代价中体现；中分：提出方法但缺细节或可复现公式；低分：忽视空车率或未线性化"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "候选路径生成与时窗/载荷可行性仿真",
              "description": "是否实现基于聚类的 m 簇生成、Clarke‑Wright/savings 或贪心插入构造路径，并对每条路径做时序载荷仿真判可行",
              "score": 35,
              "evaluation_focus": "启发式",
              "scoring_hint": "高分：多起点生成并用 2‑opt/3‑opt 改进且仿真全部通过；中分：单一启发式生成部分通过；低分：路径生成不能通过时间/载荷仿真"
            },
            {
              "sub_criteria": "集合覆盖 ILP 构建与求解（Gurobi/CPLEX 接口）",
              "description": "是否把候选路径装入集合覆盖模型，每支局至少被覆盖一次，使用商用求解器并报告可行性与最优性信息",
              "score": 35,
              "evaluation_focus": "ILP集成",
              "scoring_hint": "高分：ILP 求解成功并报告最优解/Gap 与运行时；中分：可行解但未报告 gap 或参数；低分：ILP 未能求解或构建错误"
            },
            {
              "sub_criteria": "迭代策略、并行化与终止准则",
              "description": "是否实现 m 从 m_L 递增至 m* 的迭代、并行化路径生成或多起点启发式加速，并设定终止准则（最大 m、时间限、gap）",
              "score": 30,
              "evaluation_focus": "算法工程",
              "scoring_hint": "高分：实现并行/多起点并有合理终止准则；中分：有迭代但无并行或终止阐述；低分：无迭代控制或易无限循环"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化实现（数据→路径生成→仿真→ILP）与接口规范",
              "description": "是否提供可复用模块：ShortestPath、Cluster、PathGenerator、Simulator、ILPInterface，并以 CSV/JSON 格式输出结果，附参数配置清单",
              "score": 40,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：模块齐全、接口清晰、输出格式规范；中分：模块实现但耦合度高或缺配置说明；低分：单体脚本无法复用或无输出规范"
            },
            {
              "sub_criteria": "可重复性与单元/验算脚本",
              "description": "是否提供自动化验证脚本（小实例单元测试：最短路、载荷仿真、时间窗校验）且能复现 m* 结果",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：所有单元测试通过并能复现报告；中分：部分测试或手动说明；低分：无测试或无法复现"
            },
            {
              "sub_criteria": "性能优化与鲁棒性（并行/超时处理）",
              "description": "是否实现并行化路径生成或对大规模候选集做截断，并在超时/大 gap 情况下返回可用备选解",
              "score": 30,
              "evaluation_focus": "工程性能",
              "scoring_hint": "高分：有并行实现并能在限时内给出可行备选；中分：有部分性能优化；低分：无性能策略导致长时间失败"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可执行性验证：每车到达/离开时刻、最大载荷与回场时间",
              "description": "是否用高精度时序仿真验证所有车辆到达/离开时间、任一时刻最大载荷≤65 且回场时间≤15:00，并提供违约修正建议",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：所有车辆仿真通过并给出修正记录；中分：少量边界违约并提供可行修正；低分：存在违约且无修正策略"
            },
            {
              "sub_criteria": "成本汇总与空车率影响分析",
              "description": "是否汇总总里程、运行成本（3元/km 或空车率损失 2元/km 已纳入路径代价）、单车/总体空车率并量化节省或损失",
              "score": 30,
              "evaluation_focus": "成本解释",
              "scoring_hint": "高分：给出明细表并解读空车率对成本影响；中分：列出成本但分析肤浅；低分：成本计算错误或遗漏空车率"
            },
            {
              "sub_criteria": "鲁棒性与敏感性分析（需求或速度变动）",
              "description": "是否对关键参数（需求波动、速度±10%、服务时长变更）做敏感性测试并评估 m* 与成本变化",
              "score": 30,
              "evaluation_focus": "稳定性评估",
              "scoring_hint": "高分：提供系统敏感性表并指出临界点；中分：提供单一情景测试；低分：无敏感性分析"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（全区两层网络重构与跨县优化）的目标是：在保持县划分不变（问2 情形）并在允许跨县服务（问3 情形）两种策略下，构建并输出一组满足时间窗、容量与覆盖约束的区级与县级邮路与邮车调度方案，使得总体运行成本（按每条邮路运行成本3元/公里计）和车辆投入尽可能最小化，同时保证区级两班与县级班次的时序耦合关系（第一班06:00后出发且须于11:00前返回、第二班须在各县级所有邮车返回并集中处理1小时后出发且于18:00前返回；且区级两班路线相同、县级邮车通常每条邮路配一辆车），并确保必须覆盖的节点集合（Z58..Z73 与 X1..X5）被包含。为实现上述目标，任务需按以下步骤系统实施：1) 输入与预处理：使用已清洗的无向距离矩阵（节点归属县信息已确定）、各支局日需求（寄达/收寄袋数）、车辆参数（县级速度30 km/h、区级速度65 km/h、县级车容量65袋、支局/县局装卸时间5/10分钟）、以及时间窗与必须覆盖集合作为标准化输入；对路网做全点对最短路时距预计算（Dijkstra/Floyd），并建立能快速查询的行驶时间矩阵和路径列表。2) 候选县级邮路生成：在每个县内（问2）或跨县允许重新分配服务（问3）情形下，基于路网距离与需求权重生成候选邮路集——采用图聚类（基于路网距离的层次聚类或带权Voronoi可选）、启发式路径构造（Clarke‑Wright savings、插入启发式、贪心分配）并结合2‑opt/3‑opt 局部改进，生成满足县级装载、单车行程时长和时间窗约束的多条可行回路候选（每条候选路径记录里程、耗时、出发/到达时刻区间与载荷轨迹、是否需要备用车等）。3) 区级候选停靠序列与时刻模拟：基于县级候选路的最晚返回时间，生成区级停靠顺序候选，并对区级两班在每个停靠县的到达/离开时刻进行仿真（区级两班路线相同、需保证第一班在06:00后出发并11:00前回到D，第二班在各县允许出发时刻≥该县最晚县级返回+1小时且18:00前回到D），对不满足时序耦合的县级/区级组合进行标注。4) 组合优化与求解方法：将问题表述为两层集合选取与顺序安排的混合整数规划（上层为选取区级停靠序列并确定区级到达时刻，下层为为每县选取若干条县级邮路以覆盖本县支局或在允许跨县情形下重新分配支局归属），目标为最小化总成本（3元/公里×路程之和，可并入因空车率产生的损失项），约束包括覆盖性、每条候选路线最多被选择一次、时间窗耦合与车辆数限制。对于规模较小或候选集受限情形，建议采用精确求解器（Pyomo+Gurobi/CPLEX）求解集合覆盖/集合分区的 MIP；若候选集或图规模较大，则采用列生成/branch‑and‑price 框架在路径层面做列生成，或使用分解与拉格朗日松弛将区级顺序与县级路由耦合，通过交替优化（固定区级序列求县级最优、固定县级返回时刻求区级序列）进行迭代收敛。5) 启发式与元启发式备选方案：为提升可扩展性和实际可运算性，还应并行实现基于分治的启发式（先按县或跨县重划服务区，再对每区做VRP‑TW启发式求解）、混合局部搜索（节点交换、路径合并/拆分）与模拟退火或遗传算法作为全局优化器，用于在给定时间内找到高质量可行解并供整数规划作初始解。6) 可行性验证与仿真：对优化得到的路线与调度进行离散事件仿真（精确到分钟级）验证时间窗、装卸时序与容量轨迹，标注并自动修正任何违约（如通过节点重新分配或增加短路备车）；同时对问3的跨县方案应输出跨县服务的行政/结算映射供管理决策参考。7) 产出物与交付：输出最终选定的区级邮路序列与两班时刻表、每县所选县级邮路清单及车辆分配、每条邮路的里程与运行成本分解、总车辆数统计与成本对比（问2 与问3 两情形）、以及用于复现的代码模块（用于候选路径生成、MIP/列生成求解、仿真验证），并附带敏感性接口（可调整速度、需求、服务时间）以便后续鲁棒性分析。实现工具建议以 Python 为主（networkx 处理图、scikit‑learn 做聚类、OR‑Tools/Gurobi/CPLEX 做路由与整数规划、并行化候选生成与仿真），并保留 GIS 映射输出用于可视化；整个子任务应交付可复现的流程与算法组件，使运维人员能在县划分固定与跨县放宽两种政策下比较并选择最优实施方案。",
      "criteria": {
        "task_understanding": {
          "core_goal": "题目要考什么——按题型拆解关键能力: 优化并构建全区两层邮政运输网络，目标是优化（minimize）总体运行成本与车辆投入并同时满足时间窗、覆盖性与车辆容量约束（含允许/不允许跨县服务两种情形）的路由与调度方案。",
          "expected_output": "可直接调用的候选县级与区级邮路集合（路径序列、里程、时刻表、载荷轨迹）、每条邮路的运行成本分解（含空车率损失）、全区车辆分配清单、两情形（县内/跨县）成本与车辆统计对比报告、可执行的MIP/列生成模型文件（Pyomo模板或LP/MPS）、路径生成器与仿真验证代码、数据接口与参数表（CSV/JSON）。",
          "key_inputs_constraints": "1) 已清洗的对称无向距离矩阵D（节点带县属标识，类型: CSV/2D数组），必须连通或标注孤岛；2) 每支局日需求g_i(寄达)/p_i(收寄)（整数袋），车辆容量C=65袋，县/区车速参数（县级30 km/h、区级65 km/h），支局/县局服务时间5/10分钟；3) 时间窗与耦合规则：区级两班必须同路线且第一班出发>06:00并11:00前返回，第二班出发≥县级最晚回场+1h并18:00前返回；县划分在问2固定但问3允许跨县服务；4) 运行成本基准：每条邮路3元/公里及空车率收入损失计价规则；5) 实现前置条件：依赖子任务1的数据清洗和子任务2的县级基线可行性检验。",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "该子任务为整体建模过程的中后段：在子任务1（数据清洗、路网/参数库）与子任务2（单县最小车辆判定与路由模板）之后执行，负责全区两层网络的组合优化与时序耦合；输出供部署决策和实施仿真使用，直接依赖清洗数据、县级候选路径与时间窗验证，后续用于生成调度下发与敏感性分析。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别优化目标（最小化运行成本与车辆投入）",
              "description": "是否准确识别并量化“最小化总体运行成本（3元/公里+空车损失）”与“最小化车辆数/启用车路”两层目标，并提出主次目标设定策略（优先车辆数，次优里程）。",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确分层目标并给出量化优先级或加权方案；中分：识别两个目标但未量化优先级；低分：未能同时识别成本与车辆投入或混淆目标。"
            },
            {
              "sub_criteria": "识别时间窗耦合与区级两班约束",
              "description": "是否明确并细化区级两班时序耦合规则（第一班>06:00且11:00前回，第二班出发≥县级最晚回场+1h且18:00前回）并说明对县级路由的影响。",
              "score": 25,
              "evaluation_focus": "约束验证",
              "scoring_hint": "高分：列出所有耦合时刻约束并能说明如何用于候选路径过滤（示例计算）；中分：列出约束但未示例化；低分：遗漏关键时序耦合或表述模糊。"
            },
            {
              "sub_criteria": "识别覆盖与县划分限制（含跨县情形）",
              "description": "是否清楚列出必须覆盖集合(Z58..Z73, X1..X5)、县划分不可变（问2）与允许跨县服务的政策差异（问3），并指出这两种情形对优化决策的本质影响。",
              "score": 25,
              "evaluation_focus": "问题解构",
              "scoring_hint": "高分：准确列举必须覆盖节点并阐明跨县放宽如何影响成本与结算；中分：列出集合但未深入影响分析；低分：未正确区分两情形或遗漏必须覆盖节点。"
            },
            {
              "sub_criteria": "识别数据与可行性前置条件（路网、需求、计算）",
              "description": "是否识别依赖已清洗的对称距离矩阵、最短路预计算、车辆参数与子任务1/2的前置结果，并说明若缺项的补救策略（如插值/标注需补）。",
              "score": 25,
              "evaluation_focus": "数据质量",
              "scoring_hint": "高分：列出数据清单并给出缺失处理策略与连通性检查方法；中分：列出数据但未给处理策略；低分：忽视数据前置或连通性检查。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述全区两层优化问题与目标层次",
              "description": "能否用任务关键词复述：构建区级与县级邮路候选、选择路径覆盖所有支局、并在问2/问3两情形下最小化3元/公里运行成本与车辆投入。",
              "score": 40,
              "evaluation_focus": "表达精确",
              "scoring_hint": "高分：用关键词完整无歧义复述问题并说明两情形差别；中分：大体正确但遗漏细节（如空车损失）；低分：复述模糊或误述目标。"
            },
            {
              "sub_criteria": "复述决策变量与约束类别",
              "description": "是否明确复述需决策的对象（区级停靠序列、县级回路选择、每条路是否启用）以及主要约束（覆盖、容量C=65、时间窗、每条候选路最多选一次）。",
              "score": 30,
              "evaluation_focus": "建模要素",
              "scoring_hint": "高分：清晰列出变量与主要约束并示例化；中分：列出部分变量或约束；低分：遗漏主要变量如区级序列或时间窗耦合。"
            },
            {
              "sub_criteria": "复述输出与交付物要求",
              "description": "是否准确复述需交付的产物：候选路径集、MIP/列生成模型、仿真验证脚本、路由/时刻表及成本对比（问2 vs 问3）。",
              "score": 30,
              "evaluation_focus": "工程交付",
              "scoring_hint": "高分：列出全部交付物并说明格式与可调用性；中分：列出主要交付物但格式描述不足；低分：遗漏交付物或不可复现。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于路网与行驶时间的假设（对称/速度）",
              "description": "是否明确假设行驶里程对称、县级/区级速度分别为30/65 km/h（且可配置），并说明对单向差异或交通拥堵的放弃或替代处理方案。",
              "score": 30,
              "evaluation_focus": "合理性",
              "scoring_hint": "高分：明确假设并给出替代（异向/拥堵）处理策略；中分：给出假设但无替代策略；低分：未明确关键速度或对称性假设。"
            },
            {
              "sub_criteria": "关于服务时间与装卸假设（支局/县局）",
              "description": "是否声明支局卸装5分钟、县局卸装10分钟为确定常量并说明对服务时间波动的鲁棒性处理（缓冲、错峰策略）。",
              "score": 35,
              "evaluation_focus": "约束稳健",
              "scoring_hint": "高分：声明常量并给出容错/缓冲策略；中分：声明常量但未给容错方案；低分：忽略服务时间或不一致。"
            },
            {
              "sub_criteria": "关于跨县服务与结算的行政假设",
              "description": "对于问3是否声明允许跨县服务的行政/结算假设（例如由接收县承担或按里程结算），并说明如何在模型中反映（成本项或约束）。",
              "score": 35,
              "evaluation_focus": "政策适配",
              "scoring_hint": "高分：明确结算假设并在成本模型中体现；中分：说明跨县允许但未细化结算；低分：未处理行政/结算问题。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "两层混合整数规划（区级序列+县级路径选择）建模",
              "description": "是否给出明确的两层MIP框架（上层区级停靠序列及到达时刻，下层县级路径集合覆盖），包含目标函数形式（成本与车辆数层次化）和关键约束集合（覆盖、时间窗、容量）。",
              "score": 30,
              "evaluation_focus": "数学建模",
              "scoring_hint": "高分：提供清晰上/下层MIP模型表达式与变量定义；中分：提供部分模型但缺少耦合约束；低分：模型不区分层次或缺关键约束。"
            },
            {
              "sub_criteria": "决策变量与线性化（载荷、到达时间的大M）",
              "description": "是否定义弧/路径变量、车辆启用变量、到达时间与载荷变量，并给出大M线性化与载荷动态平衡的具体表达或替代线性化方案。",
              "score": 25,
              "evaluation_focus": "线性化",
              "scoring_hint": "高分：提供明确大M设置、载荷更新约束与避免弱界的方法；中分：给出变量但线性化表述模糊；低分：未处理非线性项。"
            },
            {
              "sub_criteria": "空车率与空驶损失的模型化",
              "description": "是否将空车率×里程的收入损失纳入路径成本并给出线性化/路径预计算方案（如基于路径段平均载荷的近似）。",
              "score": 20,
              "evaluation_focus": "成本建模",
              "scoring_hint": "高分：给出可求解的线性化或路径级预计算并示例；中分：定性说明但无可行化方法；低分：忽略空车率成本。"
            },
            {
              "sub_criteria": "候选路径集与列生成建模接口",
              "description": "是否建立路径级变量的集合覆盖表述并说明列生成/branch‑and‑price 的接口与路径评估子问题（含时间窗与空车成本）。",
              "score": 25,
              "evaluation_focus": "算法衔接",
              "scoring_hint": "高分：明确路径变量化并给出列生成框架与定价子问题描述；中分：提出列生成但无定价细节；低分：无路径级建模设想。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "可行性判定与时间窗逐条仿真检查",
              "description": "是否设计逐条路径的时间推进/载荷仿真器用于判断单车行程是否满足县级回场时间与容量限制，并据此筛除候选路径。",
              "score": 35,
              "evaluation_focus": "可行性验证",
              "scoring_hint": "高分：提供逐条仿真算法并示例零违约；中分：有仿真设计但未示例化或未覆盖载荷轨迹；低分：无逐条仿真或不能判定时间窗合规性。"
            },
            {
              "sub_criteria": "求解策略（精确求解与启发式兼容）",
              "description": "是否提出混合求解策略：规模小候选集用Pyomo+Gurobi精确解，大规模时采用列生成/拉格朗日/分治+局部搜索并给出终止准则与并行化建议。",
              "score": 35,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确给出两套策略并说明何时切换与终止标准；中分：只给出一类策略或缺终止条件；低分：未给出可执行求解方案。"
            },
            {
              "sub_criteria": "可扩展性与计算性能度量",
              "description": "是否提供候选集规模、MIP规模估算、并行化建议及在给定时间内可获解质量保障（如启发式初解、时间限制、MIP gap）。",
              "score": 30,
              "evaluation_focus": "性能/鲁棒",
              "scoring_hint": "高分：给出复杂度估算、并行与停机策略并提供预期MIP gap或时间；中分：有性能建议但无估算；低分：忽视可扩展性。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据接口与路网构建（符合子任务1输出）",
              "description": "是否实现或说明CSV/JSON接口以加载清洗后距离矩阵、节点属性与参数表，并用networkx生成对称无向图与最短路查询表。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：提供可运行接口示例与单元测试覆盖（连通性检测）；中分：接口说明完整但无测试；低分：接口不明或不兼容子任务1输出。"
            },
            {
              "sub_criteria": "路径生成器与仿真模块实现",
              "description": "是否提供Clarke‑Wright/贪心+2‑opt路径生成实现，并包含逐条时序载荷仿真模块用于可行性验证与空车率计算。",
              "score": 30,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：代码可复现候选路径并输出时序/载荷轨迹；中分：实现路径生成但仿真粗糙；低分：未实现或实现不可运行。"
            },
            {
              "sub_criteria": "MIP/列生成求解接口与复现性",
              "description": "是否提供Pyomo（或OR‑Tools）模板并示例与Gurobi/CPLEX联调，或列生成框架的接口说明与样例输入/输出以便复现最终解。",
              "score": 25,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：包含可运行Pyomo模板与复现步骤；中分：提供模型文件但缺求解配置说明；低分：无模型实现或不可复现。"
            },
            {
              "sub_criteria": "单元测试、文档与参数化配置",
              "description": "是否包括单元测试（时间窗计算、载荷更新）、使用说明、参数清单（速度、服务时间可调）及示例输入/输出文件。",
              "score": 15,
              "evaluation_focus": "可维护性",
              "scoring_hint": "高分：包含自动化测试与清晰文档；中分：文档存在但无测试；低分：缺文档或测试。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "方案可行性验证（分钟级仿真无违约）",
              "description": "是否对最终选定方案做离散事件（分钟级）仿真，验证每辆车到达/离开时间、最大载荷与回场时间均满足时间窗与容量约束，并报告违约条目（若有）。",
              "score": 35,
              "evaluation_focus": "仿真验证",
              "scoring_hint": "高分：仿真无违约并给出逐车时间载荷表；中分：少量边缘违约并提供修正建议；低分：大量违约或无仿真验证。"
            },
            {
              "sub_criteria": "成本与车辆投入对比（问2 vs 问3）",
              "description": "是否提供问2（县内不可跨县）与问3（允许跨县）两情形的总成本、总车辆数与按县/路分解的差异分析并量化节约（绝对与相对）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出明晰表格/数值比较并说明节约来源；中分：提供对比但缺分县分解；低分：无对比或结论无数据支撑。"
            },
            {
              "sub_criteria": "敏感性分析与稳健性建议",
              "description": "是否对关键参数（速度、需求±10%/20%、服务时间）做敏感性分析并报告对车辆数与总成本的影响，给出稳健实施或备用策略建议。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：包含多场景敏感性并给出调整建议；中分：单因素分析但不充分；低分：无敏感性分析。"
            },
            {
              "sub_criteria": "跨县实施的行政/结算建议与可视化输出",
              "description": "对于问3是否提供跨县服务的行政结算映射、实施建议与GIS路径可视化结果（供管理决策参考）。",
              "score": 15,
              "evaluation_focus": "政策落地",
              "scoring_hint": "高分：提供结算表、GIS图与落地建议；中分：仅文字建议；低分：无行政/可视化支持。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（县局迁址优化与实施建议）的目标是对每个县在其内部候选支局点集合中择优确定新的县级中心（每县选择1个点，即一县一中心），以最小化以邮件量为权重的运输成本并同时满足时限、可达性与设施约束；该任务需在明确输入数据（每县内各支局的标识与经纬坐标、支局间或到候选点的路网最短里程/时间矩阵、每支局的日均寄达量与收寄量g_i与p_i、现有县局位置与功能约束、道路等级/通行能力、候选点的场地与容量限制、县级与区级时间窗与装卸时长以及行政约束如不得跨县选址等）基础上，按步骤开展：一是数据准备与校验——清洗并对称化里程表，合并日均邮件量为服务权重w_i（建议w_i=g_i+p_i或按往返权重调整），并为每候选点计算到县内所有支局的单程与往返时间矩阵；二是约束设定与目标函数明确——将迁址建模为每县的离散1‑median/p‑median问题（p=1），目标为最小化加权总旅行成本（可选包含往返系数、车辆运行成本与集中处理成本），同时加入约束：候选点必须为县内现有支局、单程或往返最大时延上限、候选点设施承载能力、对跨县服务的可选限制及必要的过渡运营条件；三是算法与求解策略——对规模较小县用精确整数规划求解（在Pyomo/AMPL 中构建二元选择模型并用Gurobi/CPLEX 求最优解），对规模较大或需快速决策的县采用启发式与局部搜索（加权贪心初始化、交换/1‑opt/2‑opt 改进、局部枚举），并辅以地理信息工具（GeoPandas、NetworkX、OSM 路网或预处理的距离矩阵）进行路径时距计算与可视化；四是多目标评估与稳健性检验——对候选迁址结果计算关键绩效指标（加权总里程减少量、车辆公里数VKT变化、平均/最大单程时延、所需车辆数变化、时限合规率以及估算的年度运行成本节约），并通过情景分析与蒙特卡洛模拟（邮件量±20%、速度/路况扰动、个别路段拥堵）评估方案在不确定条件下的鲁棒性，必要时提出冗余车辆或分阶段迁移策略以降低风险；五是实施与运营建议——为每县生成迁址优先级列表（推荐点与备选点）、迁址的量化收益与成本对比（含一次性改造成本、设施投资估算、运维成本与预期回收期）、迁移实施计划（试点—分批迁移—全面切换时间表）、配套的行政与结算建议（如跨县服务的责任划分与结算机制）、以及现场评估清单与验收标准；六是交付物——提交可复现的计算脚本与模型文件（包含输入数据格式说明）、每县的迁址决策报告（含地图可视化、成本收益表、风险评估与实施路线图）、用于向省局网运处提交的书面材料模板（迁址理由、量化依据、预期效益与风险缓释措施）以及用于现场试点的数据采集与监控指标清单。该子任务应保证方法论透明、数据可追溯并留出敏感性与人工复核环节，以便决策者在行政、财政与运营约束下采纳或调整迁址方案。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化县局迁址（每县一中心1-median）以最小化以邮件量为权重的运输成本并满足时间窗与可达性约束",
          "expected_output": "每县最优候选支局点ID（1个/县）、对应加权总里程/时间成本、可达性与时间窗合规报告、约束校验日志、敏感性分析图表与报表、Pyomo/AMPL或等价MIP模型文件与求解代码、输入数据格式与可复现脚本",
          "key_inputs_constraints": "输入变量：每县支局ID与经纬度（点集）、支局间/至候选点最短里程与时间矩阵D、T，日均寄达量g_i与收寄量p_i（服务权重w_i=g_i+p_i），现有县局位置，候选点容量与场地上限，县级与区级时间窗（如最晚返回15:00）、装卸时长（支局5min/县局10min），道路等级/通行能力。约束：不得跨县选址；最大单程或往返时延上限；候选点容量满足sum w_i的服务需求；与区级班次时序耦合（第二班≥县级返回+1h）。前置：路网最短路已计算且对称化、数据无缺失或已插补。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为全区两层网络重构前的设施选址优化环节，依赖前序的数据清洗与最短路矩阵（子任务1）与县内需求与时间窗（子任务2/3），输出新的县局位置供后续县级VRP与区级时序耦合再优化使用",
          "assumptions": "若缺少经纬度则以最短路矩阵替代空间距离；加权成本默认按往返系数2×里程×3元/公里，可切换为时间加权；时间窗以县级最晚回场15:00为硬约束并含服务时间。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确1‑median优化目标与权重w_i=g_i+p_i",
              "description": "是否将县局迁址建模为每县p=1的1‑median问题，且将寄达量g_i与收寄量p_i合并为服务权重w_i并进入成本函数",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰写出min Σ_i w_i·dist(i,center)；中分：提到权重但未入目标或表达不完整；低分：未识别为1‑median或忽略w_i"
            },
            {
              "sub_criteria": "时限与可达性约束识别（15:00返回、装卸时长）",
              "description": "是否识别县级最晚回场15:00与支局5min/县局10min服务时间，并将其转化为最大单程/往返时间约束",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：给出T约束含服务时间；中分：只口头描述时限；低分：未考虑时间窗"
            },
            {
              "sub_criteria": "行政边界与候选集限制（不得跨县）",
              "description": "是否强调候选点必须为本县支局，不得跨县选址，且列出候选容量/场地约束",
              "score": 20,
              "evaluation_focus": "需求边界",
              "scoring_hint": "高分：写入集合限制与容量阈值；中分：只提不跨县；低分：允许跨县或无限制"
            },
            {
              "sub_criteria": "成本口径（里程/时间与3元/公里）统一",
              "description": "是否明确运输成本度量（里程或时间）与单价3元/公里或等价时间成本转换",
              "score": 15,
              "evaluation_focus": "口径一致",
              "scoring_hint": "高分：单位与换算清楚；中分：单位不统一但可推断；低分：口径混乱"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "以县为单位的一县一中心（p=1）",
              "description": "复述每县从候选支局集中选择1个中心并最小化w_i加权成本",
              "score": 30,
              "evaluation_focus": "表达精准",
              "scoring_hint": "高分：准确描述p=1；中分：描述含糊；低分：误表为多中心"
            },
            {
              "sub_criteria": "与区级班次耦合（第二班≥返回+1h）",
              "description": "复述区级第二班出发需≥县级最晚返回+1小时的耦合要求",
              "score": 25,
              "evaluation_focus": "时序理解",
              "scoring_hint": "高分：写明+1h条件；中分：只提到耦合未量化；低分：忽略耦合"
            },
            {
              "sub_criteria": "可达性与道路通行能力",
              "description": "复述道路等级/通行能力对最短时间T的影响并体现在候选合法性",
              "score": 20,
              "evaluation_focus": "场景贴合",
              "scoring_hint": "高分：提及限速/封闭路段处理；中分：泛泛而谈；低分：未提道路条件"
            },
            {
              "sub_criteria": "输出与交付件明确（报告+模型+脚本）",
              "description": "复述应输出最优点ID、成本、合规报告、模型文件与复现脚本",
              "score": 25,
              "evaluation_focus": "需求覆盖",
              "scoring_hint": "高分：逐项列出；中分：缺少部分；低分：仅给结论无交付物"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "距离与时间矩阵的对称性与最短路假设",
              "description": "明确使用对称化的最短路里程/时间矩阵D、T并说明来源与插补策略",
              "score": 30,
              "evaluation_focus": "合理性",
              "scoring_hint": "高分：给出对称化与缺失处理；中分：只说明最短路；低分：无说明"
            },
            {
              "sub_criteria": "成本函数选择（里程/时间与往返系数）",
              "description": "假设成本按往返2×里程×3元/公里或以时间为权，并说明选择理由",
              "score": 25,
              "evaluation_focus": "口径设定",
              "scoring_hint": "高分：解释往返与单位；中分：给出其一；低分：未说明"
            },
            {
              "sub_criteria": "时间窗参数固化（15:00、服务时长）",
              "description": "明确将15:00最晚回场、5/10min服务作为硬约束或软约束并给罚项",
              "score": 25,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：硬/软界定清楚；中分：仅列数值；低分：未体现在模型"
            },
            {
              "sub_criteria": "候选容量与场地限制的量化",
              "description": "假设候选容量≥峰值处理量或≥Σw_i×系数，给出检验方法",
              "score": 20,
              "evaluation_focus": "可实施性",
              "scoring_hint": "高分：明确阈值与数据来源；中分：只口头提；低分：不设容量"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "1‑median MIP表述（y_j二元、x_ij分配）",
              "description": "给出min Σ_i Σ_j w_i·c_ij·x_ij，Σ_j x_ij=1，Σ_j y_j=1，x_ij≤y_j，y_j∈{0,1}",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：完整且正确定义变量与约束；中分：少一两条约束；低分：不规范或错误"
            },
            {
              "sub_criteria": "时间窗/可达性约束嵌入",
              "description": "将T_ij+服务时间≤阈值的可行性过滤或以x_ij禁用（c_ij=∞）实现",
              "score": 25,
              "evaluation_focus": "约束实现",
              "scoring_hint": "高分：清晰给出过滤/大M处理；中分：仅文字描述；低分：未实现"
            },
            {
              "sub_criteria": "成本口径与单位一致性（3元/公里）",
              "description": "在目标中统一使用里程×3或时间×单价，避免混用单位，说明转换",
              "score": 20,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：单位自洽且注明；中分：可推断；低分：单位混乱"
            },
            {
              "sub_criteria": "多目标或附加项（处理成本/鲁棒项）",
              "description": "如加入处理成本或鲁棒项（速度扰动），给出加权或ε‑约束表述",
              "score": 20,
              "evaluation_focus": "扩展性",
              "scoring_hint": "高分：形式化给出；中分：仅提思路；低分：无扩展"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "精确求解器配置（Pyomo/AMPL+Gurobi/CPLEX）",
              "description": "提供可运行的MIP求解设置、gap/时限参数与最优性证据",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含求解日志/最优性gap≤1%；中分：可运行无证据；低分：无配置或不可运行"
            },
            {
              "sub_criteria": "启发式与局部搜索（1‑opt/交换）",
              "description": "给出加权贪心初始化与候选中心交换改进以加速大规模县",
              "score": 25,
              "evaluation_focus": "求解效率",
              "scoring_hint": "高分：实现并展示改进幅度；中分：描述无实现；低分：未考虑"
            },
            {
              "sub_criteria": "可行性过滤与预处理（不可达边剔除）",
              "description": "在求解前依据时间窗与通行能力剔除不可行x_ij，缩小模型规模",
              "score": 25,
              "evaluation_focus": "模型裁剪",
              "scoring_hint": "高分：量化规模下降或时间提升；中分：口头提；低分：未做"
            },
            {
              "sub_criteria": "稳健性与情景分析（±20%需求/速度）",
              "description": "在求解后对最优点做情景重算并报告解的稳定性",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：提供多情景结果；中分：单一示例；低分：无分析"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据准备与校验（对称化D/T、w_i合并）",
              "description": "pandas读入、最短路对称化、缺失插补、生成w_i与可达性矩阵，含单元测试",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含测试与报告；中分：实现无测试；低分：读写或对称化错误"
            },
            {
              "sub_criteria": "MIP建模接口（Pyomo/AMPL脚本）",
              "description": "可重复运行的模型文件与参数化输入，支持单位切换与约束开关",
              "score": 30,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：命令行配置+示例数据；中分：硬编码；低分：缺少脚本"
            },
            {
              "sub_criteria": "可视化与报告生成（地图/表格）",
              "description": "GeoPandas或matplotlib输出新旧中心与服务区图、成本表与合规清单",
              "score": 20,
              "evaluation_focus": "可视化",
              "scoring_hint": "高分：清晰图表与可读表格；中分：仅表无图；低分：无报告"
            },
            {
              "sub_criteria": "复现性与参数化（速度、服务时间、上限可调）",
              "description": "配置文件驱动参数，固定随机种子，提供一键运行脚本",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：README+配置+脚本；中分：部分可调；低分：不可复现"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "关键指标对比（加权总里程、VKT、平均/最大时延）",
              "description": "量化新旧县局的Σw_i·dist、车辆公里数、平均与最大单程时延变化",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：完整指标且数值一致；中分：指标不全；低分：只结论无数据"
            },
            {
              "sub_criteria": "时间窗与合规率（15:00返回率）",
              "description": "统计各支局在新中心下的可达性与按时返回合规率并解释边界点",
              "score": 25,
              "evaluation_focus": "合规评估",
              "scoring_hint": "高分：给出≥95%等量化；中分：定性描述；低分：未评估"
            },
            {
              "sub_criteria": "敏感性/鲁棒性（±20%需求/速度扰动）",
              "description": "展示迁址稳定性与成本区间，对风险点给出应对（冗余车辆/分阶段）",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：多情景图表；中分：单情景；低分：无敏感性"
            },
            {
              "sub_criteria": "实施建议与回收期估算",
              "description": "量化一次性改造成本、年度节约与回收期，并给出试点—分批—切换计划",
              "score": 20,
              "evaluation_focus": "决策支持",
              "scoring_hint": "高分：给出数值回收期；中分：定性建议；低分：无实施路径"
            }
          ]
        }
      }
    }
  }
}