{
  "task_id": "2006_C",
  "problem": "根据仪表刻度可知控制流量的阀是一个线性阀，即阀体的旋转角度与砂浆流量成正比。在设计分析中假设砂浆的压力恒定，进而流量与“过流面积“（严格定义见下文）成正比，因此阀体的旋转角度应该与“过流面积“成正比。一般来讲，控制流量的阀体为两个同心圆柱筒（两筒直径大致相等）。外筒固定，它的侧面上有一个孔，形状为两个直径不等（相差至少3、4倍以上）的圆柱体的交线（见示意图，孔的形状可能由于输出水泥砂浆的管道是圆柱形的和磨损方面的考虑而取上述形状）。内筒和外筒轴向之间没有相对运动，内筒可以自由转动。内筒的侧面上也有一个孔，它原来的形状未知（维修的任务就是设计内筒孔的形状），砂浆可以从两个孔的相交部分即“过流面积”流过。显然“过流面积”不能超过外筒孔的面积。现在数控机床比较普及，只要知道曲线的形状就可以在维修所需要的内筒上加工出合适的孔。当然从实际加工角度考虑，内筒孔的形状也不宜太复杂。\n\n可以把两个圆柱筒展开成平面，即为两个长方形，筒的转动转化为两个长方形的平动来思考，此时可将外筒孔近似看作圆孔。\n\n讨论在上述阀体结构下，在“过流面积”从为零直到外筒孔面积的范围（简称“最大范围”）内，能否通过选择内筒孔形状实现“过流面积”与内筒旋转角度成严格的线性关系。如果不能，请设计内筒孔的形状，在“最大范围”内，使“过流面积”与内筒旋转角近似成线性关系，同时在“最大范围”内，实际情况与严格线性关系的误差在某种意义下最小。\n\n实际上，固井机向孔壁喷射水泥砂浆时经常采用的“过流面积”是在一个稍小的范围内，被称为主要工作区，它是 “最大范围”中的一段。因此，在维修固井机内筒时，比较令人满意的内筒孔形状应该使主要工作区中所对应的旋转角度的线性区间尽量长（至少达“最大范围”区间长度的75%以上），而且主要工作区的最大“过流面积”尽量大（至少要达到外筒孔面积的85%以上），并且使“过流面积”和内筒的旋转角度之间的“线性关系”尽量地好。请按此要求设计内筒孔的形状。如果固井机的外筒孔也发生了程度较轻的磨损，怎么办？",
  "subtask": {
    "1": {
      "subtask": "子任务一（物理与几何建模及严格线性条件的理论分析）旨在以严格、可复制的数学形式把工程问题从物理假设到几何表述完全明确化，并推导出“过流面积”关于内筒转角（等价平移量）的解析表达式与实现严格线性的充要条件；具体地，本子任务的范围包括：明确并写出所有必要的物理与几何假设（例如砂浆静压近似恒定、流量与局部轴向过流面积线性相关、两同心圆柱在周向展开为平面、外筒孔在展开平面上以半径 R 的圆盘表示、内筒孔由周期为 2πR 的非负轴向高度函数 h(x) 描述、内筒绕轴转角 θ 对应平移 s = R·θ），精确定义坐标与变量（周向坐标 x 或 u、轴向坐标 z、圆弦高度 c(x)=2√(R^2−x^2) 在 |x|≤R 处为外孔在该周向可用的轴向长度），并以这些符号导出过流面积的基本积分表达式 A(s)=∫_{x=−R}^{R} min{ c(x), h(x−s) } dx（等价地 A(s)=∫_{u=−R−s}^{R−s} min{ c(u+s), h(u) } du）以及在二维指示函数/卷积视角下的等价形式 A(s)=∬ I_D(x,z) I_B(x−s,z) dx dz；在此表达式基础上，本子任务要求用严格的分析工具（包括但不限于换元与积分判断、Leibniz 在参数下对积分求导的条件、最小函数的可交换性论证、傅里叶变换/卷积理论以分析频谱可重构性，以及必要时的测度论/分布意义下的讨论）推导并表述实现 A(s) 在指定区间上严格线性的充分与必要条件：说明在何种几何约束（例如存在一个工作区 S_work 使得对所有 s∈S_work 与相应 u，恒有 h(u)≤c(u+s)）下 min 项退化为单一函数并从而可用 h 的解析形式（例如一次函数）通过对 s 求导得到常数导数；同时以同一数学框架说明为什么在没有此类约束或在全量程（从 A=0 到 A=area(D)）下实现严格线性通常不可行（通过边界条件、光滑性及指示函数卷积的频谱特性给出定性和可证的理由），并精确陈述对 h 的正则性和支撑限制（例如要求 h 为连续或分段 C1，非负且有界、支持长度有限）以保证上述推导的合法性。为便于后续数值验证，该子任务还应明确需要的输入数据和函数类：外孔半径 R 及其 c(x) 函数、待检验的 s 区间 S_work、内孔候选函数空间（如一次函数、分段线性或指定正则性类）、以及欲证明或检验的边界值（例如期望 A 在端点的值）；并指明可用的数学/计算工具以完成分析与严谨验证（手工解析推导结合符号计算与数值验证工具如 Mathematica 或 MATLAB，用于验证导数计算、卷积性质和傅里叶域论证）。本子任务的可交付物应为：一份包含清晰符号约定的数学模型说明、A(s)的推导过程与证明步骤、关于实现严格线性的精确充要条件及其可验证判据、以及在所给函数类下的若干必要正则性假设和用于数值检验的最小输入清单；该子任务不涉及形状优化实现或制造约束的工程折衷，仅提供可直接用于后续优化与数值求解的严谨理论基础与判别准则。",
      "criteria": {
        "task_understanding": {
          "core_goal": "推导并证明过流面积 A(s) 关于内筒转角 θ（等价平移 s）严格线性的充要条件，并给出可验证的正则性与判据",
          "expected_output": "数学建模说明文档（含符号约定）、A(s) 的解析积分表达式与等价指示函数/卷积形式、严格的充要条件证明、必要正则性假设列表、可用于数值验证的最小输入清单及建议的符号/数值检验脚本/工具清单",
          "key_inputs_constraints": "1) 外筒半径 R（实数标量）与圆弦高度函数 c(x)=2√(R^2−x^2) 在 |x|≤R 的显式表达；2) 内筒孔候选函数类 h(x)（函数空间描述：非负、具有指定正则性如连续或分段 C1、周期 2πR、支持长度有限）；3) 旋转-平移映射 s=R·θ 与待考察的 s 区间 S_work（闭区间）；4) 物理假设约束（砂浆静压近似恒定、流量与轴向局部过流面积线性相关）",
          "modeling_type": "混合（严格数学证明 + 仿真/数值验证）",
          "role_in_pipeline": "作为理论建模与验证环节，位于测量外孔几何与后续形状优化之前；直接依赖的前序任务：外孔 R 与 c(x) 测量、工作区 S_work 确定；直接支撑的后序任务：内筒孔形状优化、数值求解与制造可行性验证"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并表述过流面积 A(s) 的推导目标（推导/证明）",
              "description": "是否明确识别任务核心为推导 A(s) 关于平移 s 的解析表达式并证明其严格线性条件，而非直接做形状优化或数值拟合。",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确写出“推导 A(s) 与证明充要条件”为核心目标并区分后续优化；中分：表述含糊但能指出需要推导 A(s)；低分：将任务误解为仅做数值拟合或仅画图。"
            },
            {
              "sub_criteria": "识别关键变量与映射（R, c(x), h(x), s=R·θ, S_work）",
              "description": "是否明确列出 R、c(x)、周期性与 h(x) 的函数空间、旋转到平移 s 的映射及 S_work 等关键符号和物理量。",
              "score": 30,
              "evaluation_focus": "符号定义",
              "scoring_hint": "高分：完整列出 R、c(x)、h(x)、s、S_work 并说明类型与域；中分：列出但部分域或正则性缺失；低分：缺少 R 或 h(x) 的周期/正则性说明。"
            },
            {
              "sub_criteria": "识别用于证明的数学工具与物理假设（Leibniz/傅里叶/测度论）",
              "description": "是否识别需要的分析工具（参数下积分求导、最小值交换、卷积/傅里叶分析、测度论分布视角）及物理假设（恒压、面积与流量线性）。",
              "score": 30,
              "evaluation_focus": "工具选择",
              "scoring_hint": "高分：列出并解释为何需 Leibniz、最小函数和傅里叶/卷积分析；中分：列出工具但无清晰用途说明；低分：未列出或列出不相关工具。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用数学语言复述 A(s) 的积分表达式并给出两个等价形式",
              "description": "是否将物理叙述精确化为 A(s)=∫_{−R}^{R} min{c(x),h(x−s)} dx 与等价卷积/指示函数二重积分形式。",
              "score": 40,
              "evaluation_focus": "数理转写",
              "scoring_hint": "高分：准确写出两种等价形式并说明变量替换关系；中分：写出一种形式或存在下标/域错误；低分：表达式错误或缺少 min/卷积等关键结构。"
            },
            {
              "sub_criteria": "复述严格线性目标与 S_work 的作用",
              "description": "是否精确说明‘在某区间 S_work 上 A(s) 严格线性’的含义并指出该区间与最大范围/主要工作区的关系和量化要求。",
              "score": 30,
              "evaluation_focus": "目标细化",
              "scoring_hint": "高分：明确定义 S_work，指出线性区间长度≥最大范围的 75% 等目标；中分：定义模糊或未给出量化要求；低分：未区分 S_work 与全程。"
            },
            {
              "sub_criteria": "复述对 h 的函数类与正则性要求",
              "description": "是否说明待检验的内孔函数空间（一次/分段线性/分段 C1 等），并指出非负性、有界与支持限制等必要条件。",
              "score": 30,
              "evaluation_focus": "函数空间",
              "scoring_hint": "高分：列出明确函数类与正则性并说明为何需要（用于 Leibniz/傅里叶）；中分：给出函数类但未说明原因；低分：未给或不合理的函数类。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "物理假设的数学化（恒压、流量∝轴向过流面积）",
              "description": "是否将砂浆恒压与流量与过流面积线性关系以数学语句写出并讨论其适用范围与局限。",
              "score": 35,
              "evaluation_focus": "物理建模",
              "scoring_hint": "高分：数理化并讨论边界情形（黏度/雷诺数等假设限制）；中分：仅陈述假设无讨论；低分：未数学化或假设自相矛盾。"
            },
            {
              "sub_criteria": "几何/周期性假设的精确定义（展开面、周期 2πR）",
              "description": "是否严格说明筒展开为周向长度 2πR 的函数定义域、外孔用 c(x) 表示并限定其域 |x|≤R。",
              "score": 30,
              "evaluation_focus": "几何表述",
              "scoring_hint": "高分：精确给出坐标系与 c(x) 定义及周期延拓策略；中分：给出但细节有遗漏；低分：几何定义模糊或错误。"
            },
            {
              "sub_criteria": "分析性假设（h 的正则性、可测性、支持长度）",
              "description": "是否列出对 h(x) 为连续/分段 C1、非负、有界和有限支撑等分析性假设以保证积分/导数交换及傅里叶分析合法。",
              "score": 20,
              "evaluation_focus": "正则假设",
              "scoring_hint": "高分：给出必要且尽量弱的假设并论证其用处；中分：列出假设但未关联证明步骤；低分：假设缺失或不现实。"
            },
            {
              "sub_criteria": "对积分与最小函数操作合法性的可测/分布式说明",
              "description": "是否以可测函数/测度论或分布意义说明 min 与参数积分的可交换性及必要条件。",
              "score": 15,
              "evaluation_focus": "测度论/严谨性",
              "scoring_hint": "高分：给出明确可交换性条件并引用定理；中分：给出直观说明但缺定理支持；低分：忽略可交换性或错误交换。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "从物理假设到 A(s) 的严格积分推导（含变元替换）",
              "description": "是否逐步从几何/坐标定义出发严谨推导 A(s)=∫ min{c(x),h(x−s)} dx 并给出变量替换到等价形式的证明。",
              "score": 40,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：推导无逻辑跳步、边界处理正确；中分：推导基本正确但有细小步骤省略；低分：推导错误或边界条件处理错。"
            },
            {
              "sub_criteria": "构造指示函数/卷积的二重积分等价形式并说明其意义",
              "description": "是否将问题提升为 I_D 与 I_B 的卷积表示 A(s)=∬ I_D(x,z) I_B(x−s,z) dx dz，并解释频域分析的适用性。",
              "score": 30,
              "evaluation_focus": "卷积视角",
              "scoring_hint": "高分：明确给出指示函数定义并说明卷积/傅里叶变换的用途；中分：给出公式但解释不充分；低分：未给或错误给出卷积形式。"
            },
            {
              "sub_criteria": "标明用于后续证明的辅助量（边界点、临界 s 值）与几何约束",
              "description": "是否定义临界点集合（使 min 退化的点集）、支撑交集与用于证明导数常数的几何约束。",
              "score": 30,
              "evaluation_focus": "辅助构造",
              "scoring_hint": "高分：列出并用这些量构建后续证明；中分：列出但未在证明中充分利用；低分：缺少临界点与几何约束定义。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "严格推导实现 A(s) 线性的充分条件（例如 min 退化为 h）",
              "description": "是否用参数积分求导（Leibniz 规则）和几何约束证明：若存在 S_work 使对所有 s∈S_work 有 h(u)≤c(u+s) 则 A'(s)=constant，从而 A(s) 线性。",
              "score": 40,
              "evaluation_focus": "证明能力",
              "scoring_hint": "高分：给出完整严格证明并说明条件的可检验性；中分：证明思路正确但缺少技术细节；低分：证明错误或只是直观说明。"
            },
            {
              "sub_criteria": "证明严格线性通常不可行的必要性论证（边界/频谱/不连续导致的不可重构性）",
              "description": "是否用边界效应、指示函数卷积的频谱特性或反例说明在全量程（A 从 0 到 area(D)）下实现严格线性不可行或极不常见。",
              "score": 30,
              "evaluation_focus": "反例/频域论证",
              "scoring_hint": "高分：给出具体反例或傅里叶域论证并量化不可行性；中分：给出定性理由；低分：未论证或论证与问题不相关。"
            },
            {
              "sub_criteria": "给出可验证判据与数值检验清单（输入数据与工具）",
              "description": "是否列出用于数值验证的最小输入（R, c(x), S_work, h 类候选）及可用工具（Mathematica/MATLAB/数值积分/FFT）与判据（A'(s) 接近常数的容差等）。",
              "score": 30,
              "evaluation_focus": "实用判据",
              "scoring_hint": "高分：提供具体容差（例如 ||A'(s)−const||_∞≤ε）与测试用例；中分：给出工具但无容差量化；低分：未给出可执行的检验清单。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "提供可复现的符号/数值验证脚本（Mathematica/MATLAB/Python）",
              "description": "是否提交或说明用于验证 A(s) 推导与常数导数判据的可运行脚本或伪代码，能重现关键图表和数值检验。",
              "score": 40,
              "evaluation_focus": "代码可复现",
              "scoring_hint": "高分：提供可运行脚本与测试数据并能复现结果；中分：提供伪代码或半成品脚本；低分：未提供或脚本不可运行。"
            },
            {
              "sub_criteria": "代码正确性与数值稳定性（积分/FFT 精度控制）",
              "description": "代码是否正确实现积分与导数计算，并考虑数值精度、周期延拓边界与 FFT/卷积的截断误差处理。",
              "score": 30,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：含误差控制、步长/网格敏感性分析与收敛检验；中分：实现正确但无精度分析；低分：数值错误或忽视周期/边界导致错误结论。"
            },
            {
              "sub_criteria": "文档化与测试用例（包含 R, S_work, h 示例）",
              "description": "是否附带明确的使用说明、参数输入格式、以及覆盖边界/典型/反例的测试用例集合。",
              "score": 30,
              "evaluation_focus": "可复现性文档",
              "scoring_hint": "高分：文档完整并含至少 3 个测试用例（包含反例）；中分：文档或用例不完整；低分：无文档或无测试用例。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "对充要条件的解释与工程含义（可测性与可验证性）",
              "description": "是否将数学充要条件翻译为工程可检验的准则（如对于给定 h, 检查 h(u)≤c(u+s) 在 S_work 是否成立），并讨论测量误差影响。",
              "score": 35,
              "evaluation_focus": "理论到工程",
              "scoring_hint": "高分：给出具体检测流程与容差并讨论测量误差；中分：给出准则但未讨论误差；低分：未将数学条件与工程检测联系。"
            },
            {
              "sub_criteria": "对极限情形与灵敏度分析（边界、磨损影响）",
              "description": "是否分析边界情形（A→0 或 A→area(D)）与外筒轻度磨损对线性条件的影响，并给出定性/定量结论。",
              "score": 35,
              "evaluation_focus": "灵敏度分析",
              "scoring_hint": "高分：包含数值敏感性图与结论（例如磨损如何缩小 S_work）；中分：定性讨论；低分：忽略极限或磨损影响。"
            },
            {
              "sub_criteria": "为后续优化与制造提供清晰输入与建议",
              "description": "是否明确列出后续形状优化所需的数学接口、约束集与建议的 h(x) 初始族（一次/分段线性等）。",
              "score": 30,
              "evaluation_focus": "工程可用性",
              "scoring_hint": "高分：给出可直接用于优化的参数化族与界限；中分：给出推荐但不够具体；低分：未提供或无法用于后续优化。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（参数化、制造约束与工程设计目标制定）的目标是在明确外孔半径R和所需主要工作区长度/位置的前提下，把内筒孔的周向轴向轮廓 h(u)（u 为展开周向坐标，周期 2πR）构造成低维、可加工且可优化的参数族，并将工程性能指标与制造/装配约束用数学表达式固定下来以便后续数值求解与数控加工；为此本子任务应完成如下具体工作：一是确定必须的输入数据和工艺参数（外孔半径 R 与圆弦函数 c(x)=2√(R^2−x^2)，目标主要工作区 S_work 的角/平移范围或其相对长度比例，目标覆盖率 α（例如0.85）对应的最小最大过流面积 A_max_work，制造约束参数包括最大允许坡度 S_max（单位高度/单位周向长度）、最小特征宽度 w_min、最小过渡圆角半径 r_min、加工公差 δ_dim、允许残余加工量 margin_for_adjust），并记录目标加工设备能力（刀具半径、最大进给速度、CNC 分辨率）；二是选定并精确定义参数化族的数学形式并给出变量说明：优先推荐分段线性（piecewise-linear）与带圆角过渡的样条（C1 或 C2 B-spline）两类，分别用节点矢量 {u_j} 与节点高度向量 {h_j} 或用基函数系数 {a_k} 表示，变量还应包括孔的支撑区间 [u0, u0+L_h]（或等价的支撑长度 L_h）、安装相位 φ（相对于外孔的初始角度偏移），以及当允许时的分段数和每段的线性系数；三是把工程目标转化为可操作的约束和目标函数条目：以设计约束形式强制 h(u)≥0、|Δh/Δu|≤S_max、相邻节点间距离≥w_min、在节点处用圆弧半径≥r_min 平滑连接，且保证支撑长度 L_h 与 S_work 一致（即 L_h 要覆盖 S_work 在平移坐标上的要求）；对覆盖率用约束或罚函数表述：max_s∈S_work ∫ min{c(u+s),h(u)} du ≥ α·area(D)（离散化后替代为采样点不等式）；当要求严格线性时，明确并实现逐节点上界 m_j = min_{s∈S_work} c(u_j + s) 并施加 h_j ≤ m_j，否则将该不等式作为软约束并通过加权罚项控制违反程度；四是给出离散化与数值表示细节以便直接实现：建议在 u 与 s 方向分别选取 Nu 与 Ns 样点（典型 Nu, Ns=200~2000，依据所需精度与加工分辨率），用分段线性插值表达 h(u) 并把积分 A(s) 近似为 Σ_j min{c(u_j+s), h_j}·Δu，在参数化阶段把可加工性约束（最大斜率、最小宽度、圆角半径、加工公差）直接以线性或二次不等式写入优化模型或作为后处理判别准则；五是规定输出与交付物：参数化结果应输出（1）最终参数向量（节点位置与高度或样条系数，支撑区与相位），（2）离散 h(u) 表格供数控插补使用，(3) CAD 曲线与带圆角的2D剖面文件（DXF/STEP），以及（4）建议的 NC/刀路策略说明（刀具半径、进给与多段粗/精加工顺序）和加工余量建议，以便加工和现场微调；六是给出可用的软件工具与实现建议：用 MATLAB/Python（NumPy）或 Julia 完成离散化与约束生成、用线性/二次规划或连续非线性优化器（CPLEX/Gurobi/OSQP/OSQP 或 IPOPT）求解参数化问题，最终在 CAD/CAM（SolidWorks/Autodesk Fusion 360/CAMotics）中导出 NC 代码并在数控机床上验证刀路可加工性；七是明确评审与验收标准：参数化解必须同时满足所有硬性制造约束、覆盖率下界和相位/支撑长度要求，生成的曲线经离散数值积分后在 S_work 的采样点上与目标线性拟合误差（可选 L∞ 或加权 L2）低于预定阈值，且 CAD 曲线满足圆角与最小特征宽度约束，以上条件作为本子任务完成的判据。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将内筒周向轴向轮廓 h(u) 参数化为低维、可加工的族并把工程目标（覆盖率 α、主要工作区 S_work、线性拟合误差）与制造约束（S_max、w_min、r_min 等）转化为可求解的数学优化/拟合问题，以便生成可直接用于数控加工的参数向量和 CAD/NC 输出。",
          "expected_output": "参数化族定义（分段线性节点或样条系数）、最终参数向量（节点位置与高度或样条系数、支撑区与相位）、离散 h(u) 表格（Nu 点）、A(s) 离散值序列、约束与目标的数学表达式、用于优化的等式/不等式矩阵或函数、CAD/STEP/DXF 文件和刀路/加工建议文档，示例调用代码（MATLAB/Python/Julia）。",
          "key_inputs_constraints": "外孔半径 R（数值）；圆弦函数 c(x)=2√(R^2−x^2)（解析或采样）；主要工作区 S_work（角度或平移区间）及目标覆盖率 α（数值，如0.85）；制造参数：最大坡度 S_max、最小特征宽度 w_min、最小圆角半径 r_min、加工公差 δ_dim、刀具半径与CNC分辨率；离散化设置 Nu、Ns；假设：砂浆静压恒定、流量∝过流面积、两筒同心。",
          "modeling_type": "拟合+优化",
          "role_in_pipeline": "作为参数化与设计目标制定环节：依赖子任务一提供的几何 c(x)、A(s) 的理论表达与线性可行性判据；为后续数值优化/形状优化与制造（后序任务，如子任务三的数值求解与加工仿真）提供可直接输入的参数化模型、约束矩阵与离散化数据。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别关键几何与输入（R、c(x)、S_work、α）",
              "description": "是否明确列出并量化外孔半径 R、圆弦函数 c(x)、主要工作区 S_work 的角/平移范围及目标覆盖率 α，并说明其数值或采样表示形式。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：列出 R、c(x)、S_work、α 并给出数值/采样方案与单位；中分：列出项但缺数值或采样细节；低分：缺少上述任一关键输入。"
            },
            {
              "sub_criteria": "识别制造约束（S_max、w_min、r_min、δ_dim）",
              "description": "是否明确列出最大坡度 S_max、最小特征宽度 w_min、最小过渡圆角 r_min、加工公差 δ_dim 与刀具半径等制造/装配约束并说明其来源或典型值范围。",
              "score": 30,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：提供所有参数并给出来源/数值范围；中分：列出参数但未给数值或来源；低分：未识别或混淆制造约束。"
            },
            {
              "sub_criteria": "识别输出交付物（参数向量、CAD/NC 文件）",
              "description": "是否明确需要输出的参数向量、离散 h(u) 表、CAD/STEP/DXF 文件及刀路/加工建议以便数控加工与检验。",
              "score": 20,
              "evaluation_focus": "工程输出",
              "scoring_hint": "高分：列出全部交付物并描述格式；中分：部分列出交付物；低分：未明确可直接加工的输出。"
            },
            {
              "sub_criteria": "识别数值/采样与工具能力（Nu、Ns、刀具、分辨率）",
              "description": "是否明确离散化参数 Nu、Ns 的典型取值及 CNC 能力（刀具半径、最大进给、分辨率）以决定可加工精度与离散步长。",
              "score": 20,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：给出 Nu,Ns 范围并说明与刀具/分辨率的关联；中分：给出 Nu 或 Ns 单一值；低分：未提供离散化或设备能力信息。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将设计目标表述为覆盖率/目标 A_max_work 约束",
              "description": "是否把‘主要工作区覆盖率 α’精确复述为数学约束，例如 max_{s∈S_work} ∫ min{c(u+s),h(u)}du ≥ α·area(D) 或离散化采样不等式。",
              "score": 30,
              "evaluation_focus": "数学表达",
              "scoring_hint": "高分：给出连续与离散两种等价数学表达并指明采样策略；中分：只给出离散或只给出概念性表达；低分：未能将覆盖率转化为可计算约束。"
            },
            {
              "sub_criteria": "把 h(u) 参数化族具体化（piecewise-linear / B-spline）",
              "description": "是否将内筒孔 h(u) 明确为分段线性（节点{u_j,h_j}）或带圆角的 B-spline（系数{a_k}）并定义支撑区 [u0,u0+L_h] 与安装相位 φ 。",
              "score": 30,
              "evaluation_focus": "参数化",
              "scoring_hint": "高分：明确参数化形式、节点定义、周期性与支撑区；中分：提供参数化但缺少相位或支撑区说明；低分：参数化模糊或不可加工。"
            },
            {
              "sub_criteria": "把制造约束转化为数学不等式",
              "description": "是否把 S_max 转化为 |Δh/Δu|≤S_max，把 w_min 转化为相邻节点距离≥w_min，把 r_min 转化为圆角半径下界等数学约束或可检查条件。",
              "score": 20,
              "evaluation_focus": "约束化",
              "scoring_hint": "高分：所有制造约束都有明确不等式表示并可在优化中施加；中分：部分约束数学化；低分：无数学化表达。"
            },
            {
              "sub_criteria": "明确 A(s) 的离散化近似形式（Nu, Ns）",
              "description": "是否把 A(s)=∫ min{c(u+s),h(u)}du 离散化为 Σ_j min{c(u_j+s),h_j}·Δu，并给出 Nu、Ns 的选择原则。",
              "score": 20,
              "evaluation_focus": "数值近似",
              "scoring_hint": "高分：给出离散化公式、采样密度选择理由与误差估计；中分：仅给出公式无采样理由；低分：未给出离散化方案。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "列出并量化物理假设（砂浆静压恒定、流量∝面积、同心筒）",
              "description": "是否明确写出砂浆静压近似恒定、流量与局部过流面积线性相关、两筒同心且仅发生相对周向位移等物理假设并讨论适用范围。",
              "score": 25,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：明确假设并给出适用条件与潜在误差来源；中分：列出假设但未讨论适用性；低分：缺少关键物理假设。"
            },
            {
              "sub_criteria": "列出数学正则性假设（h 非负、分段 C1、支撑长度有界）",
              "description": "是否规定 h(u) 的正则性与支撑（非负、有界、分段 C1 或 B-spline 形式），并说明为何需要这些假设以确保积分与导数计算合法。",
              "score": 25,
              "evaluation_focus": "数学正则",
              "scoring_hint": "高分：给出明确正则性类并解释其在导数与最小函数处合法性的作用；中分：声明正则性但无解释；低分：无正则性说明。"
            },
            {
              "sub_criteria": "说明制造与离散化相关假设（公差、刀具、加工余量）",
              "description": "是否明确加工公差 δ_dim、刀具半径、允许的残余加工量等，并将它们作为可检验的假设写入模型约束或后处理规则。",
              "score": 25,
              "evaluation_focus": "工程假设",
              "scoring_hint": "高分：给出具体数值或合理区间并说明如何影响参数化/离散化；中分：声明存在但无数值；低分：未考虑加工相关假设。"
            },
            {
              "sub_criteria": "检验性/敏感性假设（可检验性与对结果影响）",
              "description": "是否指定如何验证主要假设（如通过子任务一的理论判据或数值敏感性分析）并说明若假设不成立的替代策略。",
              "score": 25,
              "evaluation_focus": "假设验证",
              "scoring_hint": "高分：提供具体检验方法与替代策略；中分：提出需要检验但无方法；低分：未提及检验或敏感性分析。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "参数化族的数学构造（分段线性/带圆角样条）",
              "description": "是否用节点向量 {u_j,h_j} 精确定义分段线性族，和/或用 B-spline 系数 {a_k} 定义带圆角或 C1/C2 光滑族，并说明周期性与支撑区 [u0,L_h] 表达。",
              "score": 30,
              "evaluation_focus": "参数化表达",
              "scoring_hint": "高分：提供明确公式、节点/基函数定义与周期扩展说明；中分：提供参数化但缺少周期或支撑说明；低分：参数化模糊不可实现。"
            },
            {
              "sub_criteria": "制造约束的数学化（坡度、宽度、圆角、公差）",
              "description": "是否把 S_max 写为 |Δh/Δu|≤S_max、w_min 写为相邻节点距离≥w_min、r_min 写为圆角最小半径等可直接约束的数学形式并考虑加工公差 δ_dim。",
              "score": 25,
              "evaluation_focus": "约束化",
              "scoring_hint": "高分：所有制造约束都有明确可计算不等式并与离散化兼容；中分：大部分约束数学化；低分：关键约束未数学化。"
            },
            {
              "sub_criteria": "覆盖率/线性目标转化为优化目标与罚项",
              "description": "是否将覆盖率 α、主要工作区线性拟合误差（L∞ 或 加权 L2）转化为硬约束或罚函数，并给出权重或阈值设定方法。",
              "score": 25,
              "evaluation_focus": "目标化",
              "scoring_hint": "高分：明确硬约束与罚项形式并给数值阈值或调参方法；中分：只给出目标概念无数值；低分：未转化为可优化目标。"
            },
            {
              "sub_criteria": "A(s) 离散化与数值积分表达",
              "description": "是否把 A(s)=∫ min{c(u+s),h(u)}du 离散化为 Σ_j min{c(u_j+s),h_j}Δu 并说明 Nu、Ns 选择与误差控制策略。",
              "score": 20,
              "evaluation_focus": "数值表达",
              "scoring_hint": "高分：给出离散化公式、采样密度建议与误差估计；中分：给出公式但无误差控制；低分：未给出可执行的离散化方案。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "优化器与数值方法选择（LP/QP/非线性）",
              "description": "是否根据参数化与目标/约束的线性/非线性性质推荐具体求解器（例如 LP/QP 用 Gurobi/OSQP，非线性用 IPOPT）并说明理由。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：推荐合适求解器并解释可行性、收敛性与效率；中分：推荐求解器但解释不足；低分：未明确或不匹配模型性质。"
            },
            {
              "sub_criteria": "离散化精度与数值稳定性分析（Nu、Ns 收敛）",
              "description": "是否提供采样（Nu、Ns）收敛测试方案与数值稳定性策略（正则化、平滑化或多尺度网格）以保证求解可靠性。",
              "score": 25,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：给出收敛测试与正则化策略并示例数值阈值；中分：提出问题无具体测试；低分：忽视离散化误差或稳定性。"
            },
            {
              "sub_criteria": "可加工性后处理与约束修正（圆角/刀路适配）",
              "description": "是否说明在优化后如何处理圆角 r_min、刀具半径和加工余量以生成可加工曲线并保证制造约束不被破坏（后处理算法或约束强化）？",
              "score": 25,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：给出具体后处理步骤与可验证判据；中分：提出需要后处理但无步骤；低分：忽略可加工性后处理。"
            },
            {
              "sub_criteria": "输出直接可用于 CAD/NC（参数向量、DXF、刀具策略）",
              "description": "是否保证优化解能导出为离散 h(u) 表格、CAD 曲线与刀路建议（刀具半径、粗精加工顺序）以便现场加工？",
              "score": 20,
              "evaluation_focus": "可交付性",
              "scoring_hint": "高分：能直接导出 DXF/STEP 与 NC 建议；中分：仅能导出参数向量需手工转换；低分：输出不可直接用于加工。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "离散化与约束生成代码（MATLAB/Python/Julia）",
              "description": "是否提供生成 u、s 采样点、计算 c(u+s)、构造 min 表达与约束矩阵的可复现代码，并说明参数 Nu、Ns 的默认值。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含完整脚本、注释、示例输入与默认 Nu,Ns；中分：代码片段可运行但缺注释或示例；低分：无可运行代码或逻辑错误。"
            },
            {
              "sub_criteria": "优化求解可复现性（求解器接口与参数）",
              "description": "是否提供调用具体求解器（IPOPT/Gurobi/OSQP）的示例、初始猜测、容限参数与随机种子以确保结果可复现？",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：含 solver 调用、参数与可复现脚本；中分：含求解器调用但缺可复现细节；低分：无求解器或不可运行。"
            },
            {
              "sub_criteria": "CAD/NC 导出与刀路建议脚本",
              "description": "是否提供从参数向量生成 DXF/STEP 或 CSV 刀具轨迹的脚本，以及刀具半径、进给与粗/精加工顺序的建议说明文件？",
              "score": 20,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：含自动导出脚本与加工参数；中分：仅人工说明导出格式；低分：未提供导出或建议。"
            },
            {
              "sub_criteria": "代码文档、测试用例与可复现说明",
              "description": "是否提供 README、参数说明与一组测试用例（含输入数据与预期输出）便于他人复现与验收？",
              "score": 20,
              "evaluation_focus": "可维护性",
              "scoring_hint": "高分：含完整 README 与至少 2 个测试用例；中分：有简短说明但缺测试用例；低分：无文档或测试。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "覆盖率与线性拟合误差验证（L∞ 或 加权 L2）",
              "description": "是否对 S_work 采样点计算 A(s)，并报告覆盖率达成情况与线性拟合误差（最大偏差 L∞ 与 加权 L2）并与阈值比较。",
              "score": 35,
              "evaluation_focus": "结果评估",
              "scoring_hint": "高分：在 S_work 给出 A(s) 曲线、L∞≤阈值且加权L2报告；中分：给出部分误差指标；低分：无量化误差或超阈值且无解释。"
            },
            {
              "sub_criteria": "制造约束符合性检查（坡度、宽度、圆角与公差）",
              "description": "是否在最终 h(u) 上逐项检查最大坡度、最小特征宽度、圆角半径与加工公差，并给出验证表或示意图。",
              "score": 25,
              "evaluation_focus": "工程验证",
              "scoring_hint": "高分：所有制造约束逐项通过并有证据图表；中分：部分验证或存在轻微违例并解释；低分：未验证或严重违例未说明。"
            },
            {
              "sub_criteria": "敏感性分析（对 S_work、R、外孔轻微磨损 的影响）",
              "description": "是否分析 S_work、外孔半径 R 与外孔轻微磨损（外孔 c(x) 变化）对覆盖率与线性拟合误差的影响并给出稳健改进建议。",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出数值敏感性曲线并提出改进（如增大 L_h 或调整相位）；中分：做定性分析；低分：忽略敏感性。"
            },
            {
              "sub_criteria": "加工建议与验收准则（NC 现场微调）",
              "description": "是否给出刀具选择、进给/转速建议、加工余量与现场微调（margin_for_adjust）策略及最终验收准则（如样件测量方法与容限）？",
              "score": 20,
              "evaluation_focus": "工艺建议",
              "scoring_hint": "高分：提供详细可执行的加工参数与验收流程；中分：给出建议但不够详细；低分：无加工或验收建议。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3 的目标是把第 2 子任务给出的内孔参数化形式和工程约束，翻译成一个可求解的、数值化的优化问题并给出稳定高效的求解流程与实现细节；具体范围包括：输入（外孔半径 R 与弦长函数 c(x)=2√(R^2−x^2)、选定的主要工作区 S_work、离散化精度 Ns（θ/ s 方向采样数）与 Nu（周向 u 方向节点数）、制造参数 S_max、w_min、r_min、加工公差与目标覆盖率 α）、变量定义（以分段线性表示的节点高度向量 h_j, j=1..Nu，可选的相位/支撑长度作为外循环变量或并入非线性变量）和目标/约束的精确数学表达；数值化步骤为：在 S_work 上取等距或自适应 Ns 个采样 s_i，在周向区间取 Nu 个节点 u_j 并令 Δu 为节点间距，预先计算常数矩阵 c_{ij}=c(u_j + s_i)；为精确表示局部“过流轴向长度” t_{ij}=min(c_{ij}, h_j)，引入辅助变量 d_{ij}≥0 与线性约束 d_{ij} ≥ h_j − c_{ij} 和 d_{ij} ≥ c_{ij} − h_j，定义 t_{ij} = 0.5*(h_j + c_{ij} − d_{ij})，从而用完全线性的等式/不等式精确表示 min 运算；每一采样点的过流面积近似为 A_i = Σ_j t_{ij} Δu（权重可按非均匀网格调整）；优化目标建议以“最小化最大线性拟合误差”为主（minimize t_max，s.t. |A_i − (m·s_i + q)| ≤ t_max ∀ i，其中 m,q 为拟合线性参数并一并作为优化变量），并同时加入覆盖率约束（引入 A_max ≥ A_i ∀ i，且 A_max ≥ α·area(D)）、制造硬约束（h_j ≥ 0，|h_{j+1} − h_j| ≤ S_max·Δu，邻节点间距 ≥ w_min，端点圆角通过后处理或通过二次平滑正则项约束）以及若需严格线性时的上界约束 h_j ≤ m_j（其中 m_j = min_{s_i∈S_work} c_{ij}，可预先计算）；为控制曲率与便于加工，可在目标中加二次正则项 λ·Σ_j (h_{j+1} − 2h_j + h_{j−1})^2（将问题转为凸二次规划）；数值求解策略：若目标与约束均为线性或二次（含二次正则），构造成稀疏 LP/QP 并优先使用 Gurobi/CPLEX/OSQP（或开源的 ECOS/OSQP）以利用稀疏性与并行；若引入相位、支撑长度或其他拓扑整数选择，可对这些离散变量做外层网格/枚举或使用混合整数求解器（Gurobi/CPLEX MIP），但要注意规模增长；若选择直接平滑化 min 并用连续非线性目标，可用 IPOPT/SNOPT 等 NLP 求解器并利用稀疏雅可比/Hessian；推荐先以 LP/QP 格式求解以得到可靠初值，必要时用 NLP 精细化；规模与资源建议：Nu, Ns 在数百至数千范围通常足够（例如 Nu=400~1200, Ns=360~3600），在普通工作站上 LP/QP 求解时间可从秒级到数十分钟，MIP 或大规模 NLP 可能需更长；后处理步骤包括对 h_j 做小半径圆角平滑、用细网格重采样并验证 A(s) 的连续曲线拟合误差（在更密采样上计算 L∞ 与 RMS）、生成 CAD/NC 曲线（DXF/STEP）并导出刀路（考虑刀具半径与进给），最后进行逐点台架模拟或高分辨率数值积分验证；实现工具栈建议为 Python/NumPy 用于离散化与约束矩阵生成，CVX/OSQP 或 Gurobi/CPLEX 求解器用于 LP/QP，IPOPT 用于连续非线性精化，MATLAB 可用于快速原型与可视化，CAM 软件用于刀路验证。",
      "criteria": {
        "task_understanding": {
          "core_goal": "把第2子任务给出的内孔参数化 h(u) 与工程约束翻译并优化为可求解的数值化优化问题，拟合并最小化最大线性拟合误差（minimize t_max）以求得可加工的节点高度向量 h_j 并给出稳定高效的求解流程与实现细节。",
          "expected_output": "1) 求解器就绪的离散化优化模型（LP/QP/MIP）与稀疏约束矩阵；2) 最优或可用解向量 {h_j}、拟合参数 m,q 与 t_max；3) 离散 A_i 曲线与误差度量（L∞, RMS）；4) 求解流程文档、求解器参数、后处理（圆角、CAD/NC 导出）与验证脚本或代码。",
          "key_inputs_constraints": "必需输入/约束示例：外孔半径 R 与弦长函数 c(x)=2√(R^2−x^2)（函数/数值表）；主要工作区 S_work（角度/平移区间）；离散采样精度 Nu（u方向节点数）、Ns（s方向采样数）；制造约束 S_max（坡度）、w_min（最小特征宽度）、r_min（圆角半径）、加工公差 δ；目标覆盖率 α；可用求解器类型（LP/QP/MIP/NLP）。",
          "modeling_type": "优化+实现",
          "role_in_pipeline": "该子任务位于参数化（子任务2）之后、制造/CAM 之前：将参数化族转为数值优化并产出可加工曲线；直接依赖子任务2的参数化形式与工艺参数，输出供后续 CAM 验证与现场加工的 h_j/CAD 文件。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并列出必需输入 R、c(x)、S_work、Nu、Ns",
              "description": "检查是否明确识别外孔半径 R、弦长函数 c(x)、主要工作区 S_work 与离散化参数 Nu、Ns 作为建模底层输入。",
              "score": 30,
              "evaluation_focus": "输入识别",
              "scoring_hint": "高分：给出 R、c(x)、S_work、Nu、Ns 的类型与合理默认值；中分：列出但缺默认或精度建议；低分：遗漏上述任一关键项。"
            },
            {
              "sub_criteria": "识别制造约束 S_max、w_min、r_min、α 与求解器可用性",
              "description": "检查是否识别并说明坡度 S_max、最小宽度 w_min、圆角 r_min、目标覆盖率 α 及可用求解器类别（LP/QP/MIP/NLP）。",
              "score": 35,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：列出并量化或建议典型值，说明求解器优先级；中分：列出但未量化；低分：未列出关键制造或求解器约束。"
            },
            {
              "sub_criteria": "识别优化目标与关键变量 t_max、h_j、A_i、c_{ij}",
              "description": "验证是否明确最小化 t_max 的拟合目标，以及离散变量 h_j、采样过流面积 A_i 与预计算矩阵 c_{ij} 的角色。",
              "score": 35,
              "evaluation_focus": "目标识别",
              "scoring_hint": "高分：清晰说明 t_max、m,q 为优化变量且 A_i=Σ_j t_{ij}Δu；中分：说明目标但变量关系不全；低分：未识别 t_max 或 A_i 离散表达。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述数值化目标：最小化最大线性拟合误差 t_max",
              "description": "检查是否将原问题精确复述为 min t_max，约束 |A_i − (m·s_i+q)| ≤ t_max，且 m,q 作为拟合参数并入优化。",
              "score": 40,
              "evaluation_focus": "目标表达",
              "scoring_hint": "高分：给出完整数学表述并说明 m,q,t_max 的变量类型；中分：目标正确但未把 m,q 并入优化；低分：未给出明确 min t_max 的数学形式。"
            },
            {
              "sub_criteria": "复述离散化及变量映射 h_j、Δu、A_i、c_{ij}",
              "description": "验证对离散化细节的复述：节点 h_j、节点间距 Δu、采样 s_i、预计算 c_{ij} 与 A_i 的求和形式。",
              "score": 30,
              "evaluation_focus": "离散化",
              "scoring_hint": "高分：给出 A_i=Σ_j t_{ij}Δu 并说明 Δu 处理不均匀网格；中分：公式正确但网格处理含糊；低分：离散化描述错误或缺乏符号一致性。"
            },
            {
              "sub_criteria": "复述 min 线性化方法（d_{ij} 变量引入）",
              "description": "检查是否复述用 d_{ij} 与线性不等式精确表示 t_{ij}=min(c_{ij},h_j) 的构造及其等价表达。",
              "score": 30,
              "evaluation_focus": "线性化",
              "scoring_hint": "高分：精确写出 d_{ij} ≥ h_j−c_{ij}, d_{ij} ≥ c_{ij}−h_j, t_{ij}=0.5(h_j+c_{ij}−d_{ij})；中分：描述正确但公式不完整；低分：未使用或误用线性化方法。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确 h(u) 周期、支撑与正则性假设",
              "description": "检查是否声明 h(u) 的周期 2πR、支撑长度 L_h、正则性（连续或分段C1）及非负有界性等假设。",
              "score": 25,
              "evaluation_focus": "函数假设",
              "scoring_hint": "高分：列出周期、支撑、C0/C1 要求并说明理由；中分：列出部分正则性假设；低分：未说明或假设不合理。"
            },
            {
              "sub_criteria": "明确采样精度假设 Nu、Ns 与误差容限",
              "description": "检查是否对 Nu、Ns 给出精度选择准则或误差容限（如用于近似积分的 Δu 与采样密度）。",
              "score": 25,
              "evaluation_focus": "采样假设",
              "scoring_hint": "高分：给出 Nu,Ns 范围建议与收敛判断方法；中分：给出数值选择但无收敛说明；低分：未讨论采样精度。"
            },
            {
              "sub_criteria": "明确凸性/可解性与求解器可用性假设",
              "description": "说明当目标为 LP/QP 时可获凸问题，或在引入相位/支撑为离散变量时需 MIP，并假定可获得相应求解器或外部枚举策略。",
              "score": 25,
              "evaluation_focus": "可解性",
              "scoring_hint": "高分：明确区分 LP/QP 与 MIP/NLP 场景并给出求解器假设；中分：提到求解器但不区分问题类型；低分：未说明可解性或求解器限制。"
            },
            {
              "sub_criteria": "假设外孔轻微磨损的处理策略说明",
              "description": "检查是否给出当外筒孔轻微磨损时的建模假设或鲁棒化方案（例如在 c_{ij} 中引入不确定带宽或灵敏度分析）。",
              "score": 25,
              "evaluation_focus": "鲁棒假设",
              "scoring_hint": "高分：提供具体鲁棒化或灵敏度分析方案；中分：提及磨损但无具体数值策略；低分：忽略外孔磨损情形。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "正确构造线性化 min 运算与约束（d_{ij}, t_{ij}）",
              "description": "评价是否按规范把 t_{ij}=min(c_{ij},h_j) 用线性不等式与辅助 d_{ij} 精确写出并保证变量域约束。",
              "score": 30,
              "evaluation_focus": "线性建模",
              "scoring_hint": "高分：提供完整约束集并证明等价性；中分：约束基本正确但边界或非负性遗漏；低分：未线性化或表达错误。"
            },
            {
              "sub_criteria": "A_i 离散积分及权重 Δu 的精确实现",
              "description": "检查积分近似 A_i = Σ_j t_{ij}Δu 的权重处理（均匀/非均匀网格、端点处理）是否明确且正确。",
              "score": 25,
              "evaluation_focus": "数值积分",
              "scoring_hint": "高分：正确处理 Δu 并说明非均匀网格处理；中分：使用均匀 Δu 但无说明；低分：权重错误或未说明网格类型。"
            },
            {
              "sub_criteria": "覆盖率约束与 m_j 上界的数学表达",
              "description": "评判是否把覆盖率 α 和严格线性上界 h_j ≤ m_j 的关系以可行约束或软罚项形式给出并离散化实现。",
              "score": 20,
              "evaluation_focus": "约束表达",
              "scoring_hint": "高分：给出离散不等式并说明软/硬处理方式；中分：给出约束但未讨论数值实现；低分：未包含覆盖率或 m_j 约束。"
            },
            {
              "sub_criteria": "制造约束（S_max,w_min,r_min）在模型中的编码",
              "description": "检查是否将坡度、最小特征宽度、圆角半径及加工公差转化为线性/二次约束或后处理规则，并明确 Δu 与节点间距的关系。",
              "score": 25,
              "evaluation_focus": "制造编码",
              "scoring_hint": "高分：把 S_max、w_min 编入硬约束并说明圆角处理方案；中分：以罚项或后处理处理；低分：未考虑制造约束。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "将问题转为稀疏 LP/QP 并选择合适求解器",
              "description": "评价是否优先构造稀疏 LP/QP（含二次正则项）并建议使用 Gurobi/CPLEX/OSQP 等高效求解器及稀疏格式。",
              "score": 30,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：提供稀疏矩阵格式、求解器选择与参数建议；中分：选择合适求解器但未优化稀疏性；低分：使用不当求解器或忽略规模问题。"
            },
            {
              "sub_criteria": "相位/支撑长度与离散变量的处理（外循环、枚举或 MIP）",
              "description": "检查是否提出对相位 φ 与支撑长度 L_h 的可行处理：外层网格枚举、并行化或 MIP 建模，并评估规模影响。",
              "score": 25,
              "evaluation_focus": "离散处理",
              "scoring_hint": "高分：给出可行枚举策略并估计计算量；中分：提出 MIP 但无规模估计；低分：未提供处理策略或不切实际。"
            },
            {
              "sub_criteria": "数值稳定性、正则化与预处理（λ 正则、缩放）",
              "description": "检查是否建议添加二次正则项、变量缩放或预条件化以提高数值稳定性并说明 λ 选择原则。",
              "score": 20,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：提供 λ 经验值与缩放策略并展示效果；中分：建议正则化但无参数建议；低分：忽略数值稳定性问题。"
            },
            {
              "sub_criteria": "后处理验证与重采样验证流程",
              "description": "评估是否包含解的后处理：圆角平滑、细网格重采样并计算 L∞ 与 RMS 验证 A(s) 与线性拟合的一致性。",
              "score": 25,
              "evaluation_focus": "验证流程",
              "scoring_hint": "高分：提供重采样验证并给出阈值（如 L∞≤1% area(D)）；中分：有验证但无阈值；低分：无验证步骤。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "正确生成并存储 c_{ij}、Δu 与约束矩阵",
              "description": "检查实现是否能生成 c_{ij} 矩阵、Δu 向量并以稀疏矩阵格式输出约束供求解器使用，支持可复现运行。",
              "score": 25,
              "evaluation_focus": "矩阵生成",
              "scoring_hint": "高分：代码生成稀疏 c_{ij}、Δu 并保存为标准格式；中分：生成正确但非稀疏或无保存；低分：矩阵生成错误或不可复现。"
            },
            {
              "sub_criteria": "实现 d_{ij} 线性化、A_i 计算与目标约束",
              "description": "检查代码是否正确构造 d_{ij} 不等式、t_{ij} 与 A_i 的线性等式并将 m,q,t_max 等变量并入求解器接口。",
              "score": 25,
              "evaluation_focus": "约束实现",
              "scoring_hint": "高分：约束矩阵与变量索引一致并能复现小例子；中分：逻辑正确但实现有次序或索引瑕疵；低分：约束实现与数学模型不符。"
            },
            {
              "sub_criteria": "求解器接口、参数设置与求解结果管理",
              "description": "评价是否封装求解器调用（支持 Gurobi/OSQP/IPOPT）、设置容差/时间限制并保存求解日志与解向量。",
              "score": 25,
              "evaluation_focus": "求解接口",
              "scoring_hint": "高分：支持多求解器且记录日志与可复现参数；中分：只支持单一求解器但能运行；低分：无错误处理或结果不可复现。"
            },
            {
              "sub_criteria": "输出 CAD/NC 文件与后处理脚本（圆角与刀具补偿）",
              "description": "检查是否实现从 h_j 到 CAD/STEP/DXF 的导出并包含圆角后处理与刀具半径补偿脚本便于 CAM 使用。",
              "score": 25,
              "evaluation_focus": "工程输出",
              "scoring_hint": "高分：直接输出可用 CAD/NC 文件并说明刀具补偿；中分：输出曲线数据但需人工转化；低分：无工程导出支持。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "线性拟合误差与 t_max、L∞、RMS 汇报",
              "description": "核查是否按样本 s_i 汇报 t_max，且提供 L∞ 与 RMS（或加权 L2）误差用于判断与目标线性关系的好坏。",
              "score": 30,
              "evaluation_focus": "误差评估",
              "scoring_hint": "高分：提供 t_max、L∞、RMS，并与 baseline 或 area(D) 百分比比较；中分：提供部分误差指标；低分：无误差量化。"
            },
            {
              "sub_criteria": "覆盖率 α 与 A_max_work 验证（采样下不等式检验）",
              "description": "检查是否在 S_work 上验证 max_s A(s)≥α·area(D) 并给出违反点和缓解建议。",
              "score": 25,
              "evaluation_focus": "覆盖验证",
              "scoring_hint": "高分：给出离散检验结果并标注未达标 s 区间；中分：计算覆盖率但无局部分析；低分：未验证覆盖率或验证错误。"
            },
            {
              "sub_criteria": "可制造性检查：坡度、最小宽度与圆角合规性",
              "description": "验证最终 h(u) 是否满足 S_max、w_min、r_min 要求，若不满足要有可操作的修正或后处理方案。",
              "score": 20,
              "evaluation_focus": "制造合规",
              "scoring_hint": "高分：全部制造约束满足或给出可操作修正；中分：部分满足并标注需手工处理区域；低分：多数制造约束不满足且无修正计划。"
            },
            {
              "sub_criteria": "稳健性与敏感性分析（Nu,Ns、外孔磨损）",
              "description": "检查是否对 Nu/Ns 采样、正则参数 λ 及外孔轻微磨损情形做敏感性分析并报告结论。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出多组 Nu,Ns 与磨损情形的结果并定量比较；中分：提供单项敏感性分析；低分：无稳健性分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（鲁棒性验证、敏感性分析、实验校准与长期维护策略）应作为一个独立、可执行的工程与统计流程：目标是量化并降低由外筒轻微磨损、制造公差、砂浆非理想流变以及长期磨损/沉积造成的性能退化风险，并把验证、在线监测与再优化形成闭环。具体步骤与方法如下：首先以显式的不确定集或概率分布定义输入不确定性（必要输入：外孔名义半径 R0 与允许磨损区间 ΔR 或外孔边界扰动模型 c(x) 的统计特性、制造公差与表面粗糙度规格、刀具/加工偏差、砂浆的典型流变参数集（例如黏度随剪切率变化曲线或幂律参数）、运行工况范围（工作压力、温度、循环次数）以及可测量的基线台架数据）；其次构建数值评估流程：采用场景/样本化鲁棒优化或最坏情况（min–max）检验——对 R、表面粗糙度、偏心度等在预定样本集合上并行计算过流面积-转角映射并评估性能指标（例如主工作区内最大绝对偏差L∞、RMS误差与线性度指标R^2、主区覆盖率与最大过流面积占比）；采用局部灵敏度（有限差分或解析/伴随法）和全局灵敏度（Sobol/方差分解或蒙特卡洛）识别对性能影响最大的不确定源；当高成本模型（CFD）被需要时，用有限数量的高保真CFD样本构建代理模型（高斯过程或多项式混沌）以便在大规模样本上快速评估并用于鲁棒性分析。第三步制定与实施实验校准程序：在台架上用代表性非牛顿介质或经标定的替代流体进行角度扫描试验，测量角位置（高分辨编码器）、流量（质量流量计或容积流量计）、工作压力与温度，并用CMM/轮廓仪量测加工实际轮廓与外孔形貌；从实验数据拟合必要的修正模型（例如乘性系数、幂律校正或基于A的阻力修正函数），并估计不确定性分布以更新数值模型；第四步在设计与加工策略中内嵌可调整余量与可替换部件：基于灵敏度结果规定加工余量、保留可切削余量范围、并提出可替换内衬/衬片或可调安装相位的机械解决方案，以便在现场按测量结果微调；第五步建立在线监测与维护策略：部署必要传感器（角位置编码器、在线流量计、压力传感器、温度传感器），定义实时数据记录频率、基线与报警阈值（例如当主区最大偏差或线性度指标越过容限时触发维护），并给出判定规则（例如若L∞偏差＞指定%或R^2＜指定阈值则现场修整或更换内衬）；第六步把数据同化与再优化作为闭环：定期（或在报警后）用最新运行/试验数据更新不确定性模型与代理模型，必要时重新运行鲁棒优化以得到修正设计或加工指令；最后明确验收与性能准则（在给定不确定集下，主工作区内最大绝对偏差≤指定阈值或RMS≤指定值、覆盖率与最大过流面积满足最低比例），并给出所需工具与软件清单（测量：高精度流量计、角编码器、压力/温度传感器、CMM/轮廓仪；数值：Python/MATLAB、统计包/蒙特卡洛工具、全局灵敏度工具箱、CFD 软件如 OpenFOAM 或 ANSYS Fluent、高斯过程/代理建模库；优化/鲁棒工具如 IPOPT/Gurobi/CPLEX 与场景化鲁棒化脚本），以及推荐的交付物（不确定性规格文档、灵敏度报告、台架校准数据与拟合校正模型、在线监测与报警阈值表、维护与再优化操作手册）。整个子任务应输出量化的鲁棒性评估结论、可执行的校准与维护程序、以及在给定不确定性范围内的验收准则和再优化触发策略。",
      "criteria": {
        "task_understanding": {
          "core_goal": "评估与量化内筒孔设计在外筒微磨损、制造公差与砂浆流变不确定性下的鲁棒性，并基于台架实验数据校准模型以提出再优化与在线维护触发策略",
          "expected_output": "鲁棒性评估报告（L∞/RMS/线性度R^2指标表）、灵敏度分析（Sobol/方差分解结果）、代理模型与校准参数（GP/多项式混沌模型文件）、场景化最坏情况测试结果表、在线监测与报警阈值清单、再优化触发规则与维护操作手册、可执行代码与数据集",
          "key_inputs_constraints": "外孔名义半径 R0 (数值) 与允许磨损区间 ΔR 或外孔边界扰动模型 c(x) 的统计描述；制造公差集与刀具/加工偏差（数值或分布）；砂浆流变参数集（非牛顿幂律参数或黏度-剪切率曲线）；台架实验数据（角度-流量-压力-温度的时间序列）；性能验收准则（主工作区L∞、RMS或覆盖率α）；离散化采样数 Nu,Ns 与计算资源限制",
          "modeling_type": "评价+拟合+优化",
          "role_in_pipeline": "作为设计后与部署前的验证与闭环模块，依赖子任务3输出的参数化内孔 h(u) 与数值模型，使用子任务1/2给定的几何与输入函数进行不确定性仿真；其结果（校准参数、再优化触发）反馈回子任务3以进行设计调整，并为现场维护提供操作手册。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别不确定性源（外孔磨损/制造公差/砂浆流变）",
              "description": "明确列出并量化外孔磨损 ΔR、制造公差与刀具偏差、砂浆流变参数集，并给出每项的不确定性模型（区间/分布）或假设边界。",
              "score": 40,
              "evaluation_focus": "不确定建模",
              "scoring_hint": "高分：为 ΔR、加工公差、流变参数提供明确数值区间或概率分布并给出来源（测量/文献）；中分：仅给区间或仅给分布但无来源；低分：未区分主要不确定源或仅口头描述无量化。"
            },
            {
              "sub_criteria": "定义鲁棒性指标与验收准则（主工作区L∞/RMS/线性度R^2/覆盖率）",
              "description": "明确主工作区性能度量（如主区L∞、RMS、R^2、覆盖率 α 与 A_max 要求）并给出数值阈值或容忍范围以作为验收标准。",
              "score": 35,
              "evaluation_focus": "指标定义",
              "scoring_hint": "高分：给出量化阈值（例如主区L∞≤指定值或R^2≥指定阈值）并说明来源；中分：给出指标但未量化阈值；低分：未指定任何可量化验收准则。"
            },
            {
              "sub_criteria": "识别观测与测量数据需求（台架/在线传感器）",
              "description": "列出所需实验与在线测量项（角编码器、流量计、压力、温度、CMM轮廓）及其精度/采样率要求，以支持校准与在线监测。",
              "score": 25,
              "evaluation_focus": "实验需求",
              "scoring_hint": "高分：列出具体传感器类型、精度与采样频率并匹配校准需求；中分：列出传感器类型但无精度/频率；低分：遗漏关键测量项或不切实际的要求。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述鲁棒性评估与量化目标",
              "description": "以数学语言重述任务：在给定不确定集下评估 A(s) 映射的主工作区鲁棒性并量化最坏情况偏差与统计分布。",
              "score": 40,
              "evaluation_focus": "任务表述",
              "scoring_hint": "高分：用 A(s)、S_work、不确定集等符号精确表述评估目标与输出指标；中分：表述清晰但缺少符号化或部分要素；低分：表述模糊、未涵盖 A(s) 或主工作区概念。"
            },
            {
              "sub_criteria": "复述实验校准与代理模型目的",
              "description": "说明台架试验用于校准代理模型（如高斯过程）或阻力修正函数，并将其用于大规模样本化鲁棒评估。",
              "score": 30,
              "evaluation_focus": "校准目的",
              "scoring_hint": "高分：明确代理模型类型、校准变量与验证方法；中分：提到校准与代理但无模型细节；低分：未说明校准如何支持鲁棒性分析。"
            },
            {
              "sub_criteria": "复述在线监测与再优化闭环逻辑",
              "description": "明确在线监测指标、报警阈值与再优化触发条件，以及数据同化更新代理/不确定性模型的频率与流程。",
              "score": 30,
              "evaluation_focus": "运维闭环",
              "scoring_hint": "高分：给出触发规则（例如L∞或R^2阈值）及再优化频率；中分：给出监测项但触发规则模糊；低分：无闭环机制或不现实的触发条件。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "外孔磨损与 c(x) 扰动假设",
              "description": "明确外孔边界扰动模型（均匀收缩 ΔR、偏心或随机高频粗糙度）及其数学表述（分布/范数/功率谱）。",
              "score": 30,
              "evaluation_focus": "边界假设",
              "scoring_hint": "高分：给出可测量的扰动模型（如 ΔR∼Uniform/Normal 或谱密度）并说明测量依据；中分：给出类型但无数学细节；低分：仅口头提及磨损无建模。"
            },
            {
              "sub_criteria": "制造公差与测量噪声假设",
              "description": "对加工偏差、刀具误差与测量噪声给出数值界定与独立/相关性假设，并说明对 A(s) 的预期影响方向。",
              "score": 25,
              "evaluation_focus": "公差建模",
              "scoring_hint": "高分：量化公差与噪声分布并讨论相关性；中分：提供界限但无分布或相关性说明；低分：忽略测量噪声影响。"
            },
            {
              "sub_criteria": "砂浆流变模型假设（非牛顿行为）",
              "description": "明确流变模型形式（牛顿/幂律/宾汉姆）并给出关键参数区间与在测压下的适用性假设。",
              "score": 25,
              "evaluation_focus": "流变假设",
              "scoring_hint": "高分：指定幂律参数范围并引用文献或试验数据；中分：指定模型类型但无参数范围；低分：未考虑流变或错误选择模型。"
            },
            {
              "sub_criteria": "独立性与线性化近似假设",
              "description": "声明是否采用线性化近似（流量与过流面积线性关系）及适用区间，并量化逼近误差上界的假设。",
              "score": 20,
              "evaluation_focus": "近似假设",
              "scoring_hint": "高分：给出线性近似适用条件与误差上界估计；中分：描述近似使用但无误差估计；低分：盲目使用线性关系无条件说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "场景化鲁棒性评估模型（min–max/场景抽样）",
              "description": "构造场景集合或概率样本用于评估最坏情况与统计性能，明确采样方法（蒙特卡洛/拉丁超立方/网格化）与样本量策略。",
              "score": 30,
              "evaluation_focus": "鲁棒建模",
              "scoring_hint": "高分：给出采样方法、样本数估算并提供并行计算策略；中分：说明方法但未给样本量或并行计划；低分：未提出可执行的采样策略。"
            },
            {
              "sub_criteria": "代理模型与高保真样本策略（GP/多项式混沌）",
              "description": "提出用于替代高成本模型的代理（如高斯过程、PC）并给出训练/验证分割、交叉验证或误差指标方案。",
              "score": 25,
              "evaluation_focus": "代理拟合",
              "scoring_hint": "高分：指定代理类型、训练样本数、验证指标（RMSE/R^2）与置信区间；中分：提代理但无训练/验证细节；低分：未使用代理或无验证计划。"
            },
            {
              "sub_criteria": "灵敏度分析方法（局部与全局）",
              "description": "明确采用的灵敏度度量（有限差分、Sobol 索引、方差分解）并说明如何用其决定加工余量与可调策略。",
              "score": 25,
              "evaluation_focus": "灵敏度方法",
              "scoring_hint": "高分：给出全局/局部方法组合、计算细节与决策规则；中分：仅用一种方法或无决策映射；低分：灵敏度分析不充分或缺乏解释。"
            },
            {
              "sub_criteria": "在线监测与报警模型构建",
              "description": "构建基于实时测量的偏差评估与报警逻辑（例如基于滑动窗口的 L∞ 判据或基于代理的预测残差阈值）。",
              "score": 20,
              "evaluation_focus": "监测建模",
              "scoring_hint": "高分：定义具体检测统计量、窗长与阈值计算方法；中分：提出监测项但阈值设定模糊；低分：未给出可执行报警逻辑。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "场景/样本化求解与计算资源规划",
              "description": "说明如何在 Nu/Ns 与样本数下并行运行场景计算、代理训练与最坏情况验证，并给出时间/存储估计。",
              "score": 30,
              "evaluation_focus": "数值规划",
              "scoring_hint": "高分：提供估计计算量、并行策略与容错方案；中分：指出并行化但无资源估计；低分：未考虑可计算性与规模问题。"
            },
            {
              "sub_criteria": "代理训练与验证求解细节（超参/交叉验证）",
              "description": "给出代理的超参数选择、交叉验证方案与误差容限，并报告训练/验证误差以保证代理可用于鲁棒性评估。",
              "score": 25,
              "evaluation_focus": "代理求解",
              "scoring_hint": "高分：交叉验证 RMSE/R^2 在目标范围内并提供不确定性预测；中分：训练误差报告但无交叉验证；低分：代理过拟合或无误差报告。"
            },
            {
              "sub_criteria": "最坏情况（min–max）与概率风险评估求解",
              "description": "描述如何求解最坏情况偏差（直接网格/优化或代理辅助），并给出概率风险（如 P(超出阈值)）的估计方法。",
              "score": 25,
              "evaluation_focus": "风险评估",
              "scoring_hint": "高分：提供可复现的最坏情况求解方法并量化概率风险；中分：给出方法但无概率估计；低分：忽略最坏情况验证。"
            },
            {
              "sub_criteria": "验证与高保真回测（CFD 或高分辨率积分）",
              "description": "对关键最坏/代表性情形使用高保真模型或细网格数值积分进行验证，并报告差异与置信度。",
              "score": 20,
              "evaluation_focus": "验证回测",
              "scoring_hint": "高分：用若干高保真样本验证代理并量化误差；中分：仅局部验证；低分：无高保真验证或验证不充分。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可执行鲁棒性分析与采样脚本",
              "description": "提供可复现的脚本用于样本化、A(s) 批量计算、并行调度与结果聚合（带运行说明与依赖）。",
              "score": 30,
              "evaluation_focus": "脚本可复现",
              "scoring_hint": "高分：提供脚本、环境说明、样例数据与一键运行说明并能复现主要表格；中分：代码可运行但缺少文档或样例；低分：给出伪代码或不可运行代码。"
            },
            {
              "sub_criteria": "代理训练/校准与数据同化实现",
              "description": "实现代理模型训练、超参优化、以及用台架数据进行校准的数据同化或贝叶斯更新流程代码。",
              "score": 25,
              "evaluation_focus": "校准实现",
              "scoring_hint": "高分：代码包含训练、验证、参数后验估计及结果可视化；中分：训练代码可运行但无完整验证或文档；低分：未实现校准或实现错误。"
            },
            {
              "sub_criteria": "在线监测与报警原型代码",
              "description": "提供实时/近实时监测逻辑的原型实现（流量/角度数据流入、统计量计算、阈值报警），并能产生报警日志。",
              "score": 20,
              "evaluation_focus": "监测实现",
              "scoring_hint": "高分：原型在模拟数据上演示报警触发并记录日志；中分：离线脚本实现检测但无流式接口；低分：未提供监测实现。"
            },
            {
              "sub_criteria": "代码质量、单元测试与结果可视化工具",
              "description": "代码遵循版本控制、包含单元测试与示例可视化（鲁棒性曲线、不确定性带、灵敏度条形图）。",
              "score": 25,
              "evaluation_focus": "代码质量",
              "scoring_hint": "高分：有单元测试覆盖关键函数、清晰模块化与示例可视化；中分：代码可运行但缺单元测试或结构凌乱；低分：无测试、难以复现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "量化鲁棒性结论与验收判定",
              "description": "报告主工作区在不确定集下的最坏情况 L∞、RMS 与 R^2，并明确是否满足验收准则，给出置信区间或概率违例率。",
              "score": 35,
              "evaluation_focus": "结论量化",
              "scoring_hint": "高分：给出数值化最坏情形、置信区间并明确通过/不通过验收；中分：给出多数指标但缺置信区间或判断依据；低分：仅定性结论或无明确量化。"
            },
            {
              "sub_criteria": "灵敏度排序与可操作建议（加工余量/相位调整）",
              "description": "基于 Sobol 或局部灵敏度给出对设计最重要的不确定源并提出具体可操作措施（如加工余量值、相位调节范围）。",
              "score": 25,
              "evaluation_focus": "可操作建议",
              "scoring_hint": "高分：给出排序、数值化的加工余量建议与优先级；中分：列出敏感项但无具体数值建议；低分：无建议或建议不可执行。"
            },
            {
              "sub_criteria": "校准效果与不确定性减少量化",
              "description": "展示台架校准前后代理/不确定性模型变化、误差降低量与对鲁棒性指标的改进影响。",
              "score": 20,
              "evaluation_focus": "校准效果",
              "scoring_hint": "高分：给出校准前后 RMSE/R^2 改善数值并证明统计显著性；中分：给出误差变化但无显著性分析；低分：未展示校准效果。"
            },
            {
              "sub_criteria": "运维与再优化触发策略与交付物完整性",
              "description": "提供在线报警阈值表、再优化触发规则与维护 SOP（包含所需仪器清单与再优化流程），并交付可执行代码与报告。",
              "score": 20,
              "evaluation_focus": "运维交付",
              "scoring_hint": "高分：交付阈值表、SOP、代码与示例并说明修整流程；中分：交付部分文档或无示例；低分：缺少实用运维文档或触发规则。"
            }
          ]
        }
      }
    }
  }
}