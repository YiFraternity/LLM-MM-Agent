{
  "task_id": "2013_C",
  "problem": "请研究下列问题：\n一、基本问题\n(1)  电波从发射天线出发，向空间各个方向均匀发射。为了能够进行数值计算，我们需要将总的发射能量均匀地分配到若干条射线上，这个过程称之为发射角量化过程。显然，规定的射线条数越多，量化就越精细，计算量也就越大。因此请根据实际情况，首先选择定量化的精细程度，然后跟踪确定发射机Tx (坐标为(500, 200))和接收机Rx (坐标为(250, 350))间的主要传播路径，并可视化展示在图1中。\n(2) 如图1所示，在路径AB（两点坐标分别为(300, 350)和(500, 350)）上以50m为间隔取5个位置准备放置发射机；在路径CD（两点分别为(450, 300)和(450, 200)）上以25m为间隔取5个位置准备放置接收机；这样有25种发射机-接收机组合。请问哪一个组合收发机间的传播路径最多，哪一个组合最少？\n(3) 将(2)中所有发射机-接收机组合的传播路径进行比对，请寻找尽可能多的规律。\n二、宽带问题\n(4) 两个或两个以上的波相遇时，在一定情况下会相互影响，这种现象叫干涉现象。声波、光波和其他电磁波等都有此现象。考虑如下的多波干涉问题：对于(2)中提到的CD路径上的所有接收点，从发射机出发的电波都有多个传播途径(可能是多次反射传播、多次绕射传播或是反射与绕射的任意组合传播)到达这些点，这些频率相同、振动方向相同、初相位相同的简谐波（即正弦波）在各个接收点相遇叠加，出现某些接收点振动始终加强、而在另一些接收点振动始终减弱的现象，这种现象称为多波干涉现象。 \n上述接收点处，多波干涉形成的接收信号可以描述为\n$$f(\\omega, t) = \\sum_{i=1}^{Q} A_i e^{j(\\omega t + k r_i)}$$\n上式中，Q为到达某接收点的传播途径总数；和分别为到达接收点的第i条传播路径的信号电场强度和长度；为长度为的传播路径上的相位积累；(c为光速，值为)。\n请针对上述25种情况, 对这种多波干涉的振幅$|f(w,t)|$进行统计学分析，包括：一、二阶矩特性，不同路径到达信号的相关性及概率密度分布函数；\n(5) 继续考虑图1，从发射机同时发射一组功率相同的电波，频率从2000Mhz到2100Mhz，间隔近似1Mhz，这样我们总共要同时发射101个单频信号。每个单频信号都会形成(4)中提到多波干涉问题，多个单频信号会形成宽带多波干涉现象，请对这种宽带多波干涉现象进行数学建模，并分析合成波的包络统计特性，如同一频率、不同路径信号之间，同一路径、不同频率信号之间的相关性等。",
  "subtask": {
    "1": {
      "subtask": "子任务一（场景建模与数据预处理）要求把题目提供的二维城市平面图原始文本数据规范化为一个可用于后续射线跟踪与数值计算的、结构化且经校验的几何数据库；其具体目标是读取并验证“城市微小区地图对应的数据.txt”中每个多边形建筑记录（以米为单位的顶点坐标序列），将其转换为标准化的几何对象（保证闭合、顶点顺序一致性与非自交），并为每个几何对象和其构成的边与顶点生成必需的几何与拓扑属性以支持高效空间查询与后续物理建模。为完成该任务应按下列步骤和技术实现：一、输入解析与格式校验——实现稳健的文本解析器（建议使用 Python + pandas/regex 或等价工具）逐条读取建筑编号与顶点坐标，去除多余精度与空白行，检查每个多边形第一个点与最后一点是否相同（若非闭合则自动闭合或报错），检测并报告重叠点、重复边或自交多边形，并在可能时自动修复（例如按常见容差合并几乎重合的顶点）；二、几何构建与单位/坐标一致性——用成熟几何库（如 Shapely/GEOS 或 CGAL）将坐标构建为多边形对象，统一单位（米）和坐标系，计算并存储每个多边形的边列表（有序线段）、边长、边中点、边向量与法向（法向须与多边形方向一致以便定义“外侧”与“内侧”）；三、顶点属性与分类——为每个顶点计算内角/外角、判断凹凸性（便于后续绕射劈角 β 的计算），为顶点分配唯一 ID 并记录其相邻边索引、邻接多边形（若两建筑共享顶点/边则记录拓扑关系），同时标注可能的几何奇异情况（内角接近 0 或 180°）；四、空间索引与加速结构——为所有边线段与多边形构建空间加速索引（如 R-tree 或 KD-tree）以支持高效的线段相交测试、点在多边形内判定与最近邻查询，并实现高性能的线段-多边形交叉检测与可视性初步筛查接口；五、参数与配置文件生成——在场景数据库中写入并版本化一组全局参数（例如长度单位、默认反射功率比与相位约定（题中默认反射功率 80% 对应幅值 sqrt(0.8)）、默认角量化分辨率 N0 的建议值、频带描述 2000–2100 MHz 与采样点数 101、路径次数上限与贡献阈值 T_dB 的初始值等），并把这些配置与几何数据以可交换格式导出（GeoJSON/WKT + JSON/YAML 元数据）以便复现与后续处理；六、质量控制与可视化输出——实现自动化校验报告（包括多边形计数、孤立顶点、极短边、最小/最大内角分布、总覆盖范围/bounding box）和基础可视化（二维地图预览、边与顶点标注、编号与法向箭头），以便人工核查；七、接口与错误处理规范——为后续模块定义清晰的 API（函数或文件格式），包括按 ID 访问边/顶点、查询相邻关系、执行线段相交与点内检测，并保证在发现未修复的几何异常时返回可解释的错误信息与修复建议。整个子任务应以可重复、可审计的数据管线实现，保留原始输入、清洗日志与最终几何数据库的版本信息，便于后续路径枚举、物理系数计算与统计分析模块直接调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "规范化与校验城市微小区多边形数据，构建可用于射线跟踪仿真的几何数据库并评估数据质量",
          "expected_output": "结构化几何数据库（边/顶点/多边形表或对象存储）、GeoJSON/WKT与JSON/YAML配置文件、空间索引（R-tree/KD-tree）构件、自动化校验报告与二维可视化预览、可调用API/函数接口与错误日志",
          "key_inputs_constraints": "输入：文本文件“城市微小区地图对应的数据.txt”；数据类型：建筑编号+顶点(x,y)序列（米）；约束：多边形必须闭合、顶点顺序一致（顺/逆时针统一）、非自交；容差：坐标合并/去重阈值ε（如1e-3~1e-2 m）；单位：米（统一）；拓扑：共享边/点需记录邻接；性能：需构建R-tree/KD-tree支持线段相交/点内查询；参数：反射幅值系数sqrt(0.8)、角量化N0、频带2000–2100 MHz与采样数101、路径次数上限与阈值T_dB。",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为数据清洗与几何建模阶段，位于射线枚举/物理计算之前，依赖原始文本数据；直接为后续路径追踪、反射/绕射判断、干涉与统计分析提供几何与拓扑查询接口与配置。",
          "assumptions": "允许在小容差ε内自动闭合与合并近重合顶点；若自交无法修复则记录为错误并中止导出；可选用Python+Shapely/GEOS+Rtree；可输出GeoJSON+YAML以版本化。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别核心目标：规范化与校验用于射线跟踪仿真的几何数据库",
              "description": "是否明确本子任务是将“城市微小区地图对应的数据.txt”转化为可用于射线跟踪仿真的、经校验的几何数据库，而非直接进行路径预测或电磁计算。",
              "score": 30,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：清晰区分数据建库与物理仿真；中分：部分提及规范化但混入物理求解；低分：将任务误表述为路径损耗预测。"
            },
            {
              "sub_criteria": "关键约束识别：闭合、顺序一致、非自交",
              "description": "是否明确提出多边形闭合检查、顶点顺/逆时针统一、非自交检测为硬性校验点。",
              "score": 30,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：三项均覆盖且给出检测方法；中分：只覆盖其中两项；低分：未提或混淆。"
            },
            {
              "sub_criteria": "空间索引与性能需求（R-tree/KD-tree）",
              "description": "是否识别到高效线段相交与点内查询对后续射线跟踪至关重要，需要R-tree或KD-tree。",
              "score": 20,
              "evaluation_focus": "系统意识",
              "scoring_hint": "高分：点名R-tree/KD-tree并说明用途；中分：仅泛称索引；低分：未提性能需求。"
            },
            {
              "sub_criteria": "参数与配置（sqrt(0.8), N0, 2000–2100 MHz, 101, T_dB）",
              "description": "是否识别需在数据库中版本化全局参数并导出配置文件。",
              "score": 20,
              "evaluation_focus": "配置管理",
              "scoring_hint": "高分：参数全列且说明版本化；中分：缺少1–2项；低分：未提参数或配置。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "输入解析与格式校验（文本→顶点序列）",
              "description": "能否用任务语言复述：稳健解析建筑编号与(x,y)并去除冗余精度/空白行。",
              "score": 25,
              "evaluation_focus": "需求复写",
              "scoring_hint": "高分：给出解析规则与异常行处理；中分：只提解析；低分：模糊描述。"
            },
            {
              "sub_criteria": "几何构建与单位/坐标一致性（米）",
              "description": "复述需用Shapely/GEOS构建Polygon，统一米单位与坐标系。",
              "score": 25,
              "evaluation_focus": "规范对齐",
              "scoring_hint": "高分：点出坐标系假定与单位存储；中分：只提米单位；低分：未提一致性。"
            },
            {
              "sub_criteria": "顶点属性与凹凸性/内角计算（β相关）",
              "description": "复述需计算内角/外角与凹凸分类，为绕射劈角β准备。",
              "score": 25,
              "evaluation_focus": "物理衔接",
              "scoring_hint": "高分：说明角度定义与数值稳定性；中分：只提凹凸；低分：未提。"
            },
            {
              "sub_criteria": "空间索引与可视性筛查接口",
              "description": "复述构建R-tree并提供线段-多边形交叉、点内与最近邻接口。",
              "score": 25,
              "evaluation_focus": "接口清晰",
              "scoring_hint": "高分：列出函数签名或调用语义；中分：泛述；低分：缺失。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "容差ε与自动修复策略",
              "description": "明确合并近重合顶点、闭合尾首点、去重边的容差范围与规则。",
              "score": 30,
              "evaluation_focus": "假设与阈值",
              "scoring_hint": "高分：给出定量ε并区分软/硬校验；中分：仅文字说明；低分：无容差策略。"
            },
            {
              "sub_criteria": "共享边/顶点的邻接判定假设",
              "description": "规定共享判定的距离与方向一致性（反向边识别）与记录方式。",
              "score": 25,
              "evaluation_focus": "拓扑假设",
              "scoring_hint": "高分：含方向/长度阈值与ID映射；中分：只提共享概念；低分：未提。"
            },
            {
              "sub_criteria": "坐标系与单位假设（米，平面近似）",
              "description": "说明使用平面直角坐标与米单位，忽略投影误差。",
              "score": 20,
              "evaluation_focus": "范围界定",
              "scoring_hint": "高分：说明误差影响可忽略范围；中分：仅声明；低分：未说明。"
            },
            {
              "sub_criteria": "异常处理假设（自交与不可修复）",
              "description": "约定自交或奇异角（≈0°/180°）的处理：报错、隔离或中止导出。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：列出分类处理与日志级别；中分：笼统报错；低分：无策略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "几何对象标准化（闭合、顺序一致、非自交）",
              "description": "基于Shapely/GEOS构建Polygon并强制顺/逆时针一致与simple属性检查。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：实现方向统一与simple验证；中分：缺一项；低分：未标准化。"
            },
            {
              "sub_criteria": "边与法向、边中点与向量计算（外侧一致）",
              "description": "生成有序边表，计算长度、单位切向与外法向（与多边形方向一致）。",
              "score": 25,
              "evaluation_focus": "数理实现",
              "scoring_hint": "高分：法向外向性可检；中分：仅有向量无法向；低分：缺失。"
            },
            {
              "sub_criteria": "顶点内角/外角与凹凸性分类",
              "description": "稳定计算夹角，标注凹点/凸点并记录奇异角阈值报警。",
              "score": 20,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：处理180°附近与归一化；中分：基本计算；低分：错误或缺失。"
            },
            {
              "sub_criteria": "空间索引结构（R-tree/KD-tree）与接口定义",
              "description": "为边与多边形构建R-tree并定义线段相交、点内、最近邻API。",
              "score": 25,
              "evaluation_focus": "工程设计",
              "scoring_hint": "高分：索引覆盖边与面并含批量查询；中分：仅面或边；低分：无索引。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "格式校验流程与自动修复执行",
              "description": "执行从解析到闭合检查、去重、容差合并、自交检测与修复/隔离的流水线。",
              "score": 35,
              "evaluation_focus": "流程落地",
              "scoring_hint": "高分：全流程可复现并有步骤日志；中分：部分环节缺失；低分：零散无序。"
            },
            {
              "sub_criteria": "拓扑关系构建（邻接表/共享边映射）",
              "description": "生成边-多边形、顶点-边、建筑-建筑邻接映射，支持反向边匹配。",
              "score": 30,
              "evaluation_focus": "数据结构",
              "scoring_hint": "高分：双向映射且O(logN)检索；中分：单向或不完整；低分：无拓扑。"
            },
            {
              "sub_criteria": "可视性与相交初筛性能验证",
              "description": "利用R-tree实现线段-多边形相交批量初筛并报告平均查询耗时。",
              "score": 20,
              "evaluation_focus": "性能评估",
              "scoring_hint": "高分：提供基准耗时/复杂度；中分：定性描述；低分：无验证。"
            },
            {
              "sub_criteria": "配置写入与版本化",
              "description": "将sqrt(0.8)、N0、2000–2100 MHz、101、T_dB与单位等写入YAML/JSON并含版本号与时间。",
              "score": 15,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：含git或hash与时间戳；中分：仅文件；低分：无配置输出。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "解析器鲁棒性（pandas/regex）与错误回退",
              "description": "能处理空行、异常坐标、科学计数法与局部损坏行，并给出逐行错误报告。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：单元测试覆盖>80%解析分支；中分：基本通过；低分：易崩溃。"
            },
            {
              "sub_criteria": "Shapely/GEOS与Rtree正确使用",
              "description": "正确构造Polygon/LineString、使用prepared geometry与Rtree批量查询。",
              "score": 25,
              "evaluation_focus": "库使用",
              "scoring_hint": "高分：避免重复构造与提升性能；中分：可运行但低效；低分：错误API。"
            },
            {
              "sub_criteria": "数据结构与API设计（按ID访问/查询）",
              "description": "提供按ID访问边/顶点、多边形，邻接查询、线段相交与点内检测函数。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：类型注解与文档字符串完善；中分：函数可用；低分：接口混乱。"
            },
            {
              "sub_criteria": "导出与版本化（GeoJSON/WKT+YAML/JSON）",
              "description": "正确导出几何与配置，包含坐标精度控制与CRS/单位元数据。",
              "score": 20,
              "evaluation_focus": "I/O工程",
              "scoring_hint": "高分：大小与精度权衡，含校验摘要；中分：基本导出；低分：格式错误。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "质量控制报告（计数/极短边/内角分布/Bounding Box）",
              "description": "输出多边形计数、孤立顶点、极短边比例、内角最小/最大与包围盒。",
              "score": 30,
              "evaluation_focus": "结果完整性",
              "scoring_hint": "高分：含阈值对比与可视表格；中分：仅列值；低分：缺失关键项。"
            },
            {
              "sub_criteria": "可视化预览（边/顶点编号与法向箭头）",
              "description": "二维地图带编号与法向箭头，用以人工核查方向与拓扑。",
              "score": 25,
              "evaluation_focus": "可视沟通",
              "scoring_hint": "高分：可交互或分图层；中分：静态但清晰；低分：无或混乱。"
            },
            {
              "sub_criteria": "异常与修复日志（自交、重复边、近重合点）",
              "description": "列出异常数量、位置与处理动作（修复/隔离/中止），含明细样例。",
              "score": 25,
              "evaluation_focus": "可审计性",
              "scoring_hint": "高分：可追溯到建筑ID与行号；中分：汇总级；低分：无日志。"
            },
            {
              "sub_criteria": "对后续射线跟踪可用性的评述",
              "description": "评估数据库对反射/绕射判定与可视性查询的适配性与潜在风险。",
              "score": 20,
              "evaluation_focus": "应用导向",
              "scoring_hint": "高分：点出β计算、外法向一致性与性能瓶颈；中分：笼统可用；低分：未评述。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务二的目标是为每一对发射机–接收机（Tx–Rx）系统地、可重复且高效地枚举出所有满足题目限制的物理可行传播路径（仅允许在多边形边上发生镜面反射、仅允许在多边形顶点发生绕射），并为后续幅相计算输出每条候选路径的完整几何拓扑信息与可视性判据；其范围明确包括：纯反射序列（反射阶数 ≤ R_max，题目默认 R_max=7）、纯绕射序列（绕射阶数 ≤ D_max，题目默认 D_max=2）以及规定的组合模式（一次绕射 + 1–4 次反射；两次绕射 + 一次反射），并且需将重复等价路径、不可见或物理不可能的路径剔除。为实现该目标应按以下步骤和技术实现：一）输入与预处理——以结构化几何数据库为输入（闭合多边形列表、每条边的端点索引与法向、每个顶点的局部内外角信息、Tx/Rx 坐标），并构建空间加速结构（R-tree 或 KD-tree）以支持快速线段相交与点内判定；二）纯反射路径生成（镜像法）——递归应用镜像源法：对反射阶数从 1 到 R_max 逐级生成发射点关于候选反射边的镜像点，连接镜像点与接收点得到在物理空间中对应的入射/反射点，要求每个反射点必须位于对应边的线段范围内且满足入射/反射几何（镜像构造保证角度关系，但应再次检验边界处点落在边段上）；对于得到的每条反射链上的每一段，执行严格的可视性检测（线段与所有建筑多边形求交，禁止穿越建筑内部或与非该反射边的边不当相交），并记录每段的入射角/反射角、接触点坐标与段长；三）绕射路径生成（顶点插入法）——将每个建筑顶点视为潜在绕射源，生成 Tx→顶点→Rx 的单绕射候选，并在允许的组合结构中将顶点插入到反射序列中（例如在某一反射链的任一步替换为“到顶点”的到达并从顶点继续反射或绕射），对每个绕射步骤进行可视性检验以确保证明向外传播方向没有被建筑遮挡，并计算建立绕射需要的几何量（顶点的劈角、绕射入出角关系）供后续 UTD 计算使用；四）角量化与自适应发射/逆射策略——为避免盲目全空间细采样，采用混合策略：先以粗角分辨率 N0（例如 360 或 720）进行正向或逆向（从 Rx 发射）Shooting-and-Bouncing-Rays（SBR）快速探测命中边/顶点的方向，识别可能到达 Rx 的角区段后对这些角段实行二分细化直至路径几何或估算的接收幅度/相位收敛到预定容差（例如幅度变化 <0.5 dB 或相位变化 <5°）或达到最大细化层数；逆向发射（Rx→场景）与正向发射复用结果以提高命中概率并减小计算冗余；五）数值与几何鲁棒性措施——在所有几何判定中使用容限（epsilon）处理“在边上/顶点上”的判断，避免因浮点误差错判；对近乎掠射入射角情形设定阈值以防止数值奇异；在顶点绕射可见性判定中明确区分“顶点暴露”与“被夹遮”情况并剔除不可达顶点；六）剪枝、去重与缓存策略——对候选路径采用早期剪枝规则：在构造过程中实时估算该路径的最大可能接收功率（基于段长 1/r 粒度估计与每次反射的默认幅值衰减）并在预设阈值下（例如相对主路径低于 T_dB，如 −40 dB）终止该分支；对生成的候选路径做拓扑去重（长度、节点序列与接触点在容差范围内视为同一路径）并缓存镜像序列与可视性查询结果以便并行重用；七）输出规范——对每一对 Tx–Rx 输出经验证的候选路径集合，且每条路径须包含：节点序列（Tx, 接触点或顶点索引, …, Rx）、每段的端点坐标、段长与总长度 r_i、每次反射的入射角/法向、每次绕射的几何参数（劈角 β、入出角 α 等）、路径类型标签（纯反射/单绕射/组合）、可视性布尔标志、用于后续物理计算所需的预估能量衰减因子与唯一标识符；八）实现工具建议与并行化——建议使用成熟几何库（如 Shapely/GEOS 或 CGAL）做精确几何运算、使用 R-tree 做索引、用高性能语言或并行框架（Python + C++ 扩展、并行线程或分布式任务队列）并在镜像/可视性查询上启用并行化以加速对 25 个组合与多频点的批处理；最后，任务应在实现中包含详尽的日志与可视化验证接口以展示每条路径的几何构造过程（用于后续人工审查与单元测试），且严格限定本子任务不执行物理幅相叠加或统计分析，仅输出可供后续模块精确计算物理量的、经过可视性与物理可行性校验的路径列表。",
      "criteria": {
        "task_understanding": {
          "core_goal": "系统枚举并评估城市微蜂窝环境中Tx–Rx间满足镜面反射与顶点绕射限制的物理可行传播路径，用于后续幅相计算与统计分析",
          "expected_output": "每个Tx–Rx组合的候选路径列表（JSON/CSV/数据库表），含唯一ID、节点序列(Tx/反射边/顶点/Rx)、每段端点坐标与段长、总长度ri、反射入射角/法向、绕射劈角β与入/出角α、可视性布尔、路径类型标签（纯反射/单绕射/组合）、预估衰减因子、日志与可视化快照索引",
          "key_inputs_constraints": "输入：结构化几何数据库（多边形列表、边端点索引与法向、顶点内外角/凹凸性、共享拓扑）、Tx/Rx坐标；约束：反射阶数R_max≤7、绕射阶数D_max≤2、组合模式（1次绕射+1–4次反射；2次绕射+1次反射）；仅允许边上镜面反射与顶点绕射；可视性必须通过（不穿越建筑内部）；角量化初值N0（如360/720），细化停止准则（如<0.5 dB或<5°）；剪枝阈值T_dB（如-40 dB）；几何判定容差epsilon；空间索引（R-tree/KD-tree）可用",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为路径生成与物理计算前置的核心枚举环节，依赖子任务一的几何数据库与索引；其输出直接供后续幅相计算、UTD系数求解与干涉统计分析使用；后续任务包括路径幅相精算、频率扫描与统计建模",
          "assumptions": "采用Shapely/GEOS实现几何与R-tree索引；Tx/Rx位于自由空间不在建筑内；默认反射幅值系数为sqrt(0.8)仅用于剪枝估计；所有可视性测试在2D平面内进行并使用统一米制坐标"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "限定R_max≤7与D_max≤2的路径枚举目标识别",
              "description": "能明确本任务需仿真并枚举纯反射（R_max≤7）、纯绕射（D_max≤2）与规定组合模式的Tx–Rx传播路径，并与后续幅相计算区分开",
              "score": 30,
              "evaluation_focus": "任务边界",
              "scoring_hint": "高分：清晰列出三类路径与上限并强调不做幅相叠加；中分：提到上限但未区分组合细则；低分：遗漏约束或混入功率计算"
            },
            {
              "sub_criteria": "镜面反射与顶点绕射的物理可行性与可视性判据",
              "description": "识别“仅边上镜面反射、仅顶点发生绕射”和线段不穿越建筑内部的可视性硬约束，含入射=反射角与顶点暴露条件",
              "score": 35,
              "evaluation_focus": "物理约束",
              "scoring_hint": "高分：列出入射=反射、段内落点、顶点暴露与遮挡判定；中分：仅提到不穿越建筑；低分：无可视性或混淆反射与绕射位置"
            },
            {
              "sub_criteria": "角量化与SBR/逆射探测在搜索空间控制中的作用",
              "description": "指出需用N0粗量化+二分细化与Rx逆向发射提升命中率并控制计算量",
              "score": 35,
              "evaluation_focus": "搜索策略",
              "scoring_hint": "高分：给出N0与细化收敛准则示例；中分：只提角量化不述细化；低分：无策略或全空间盲扫"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "输入与前置依赖（几何数据库与R-tree）的准确复述",
              "description": "复述需要闭合多边形、边法向、顶点内外角/凹凸性、R-tree索引及Tx/Rx",
              "score": 30,
              "evaluation_focus": "上下游衔接",
              "scoring_hint": "高分：逐项点名属性与索引；中分：部分属性缺失；低分：未提依赖或假定原始文本"
            },
            {
              "sub_criteria": "输出规范（路径ID、节点序列、角度β/α、可视性标志）的复述",
              "description": "明确每条路径需包含ri、入射/反射角、β与α、类型标签与可视性布尔",
              "score": 40,
              "evaluation_focus": "输出契约",
              "scoring_hint": "高分：逐项覆盖并与后续UTD相匹配；中分：缺1–2项；低分：仅给坐标或不含角参数"
            },
            {
              "sub_criteria": "约束与剪枝（T_dB、epsilon）的陈述一致性",
              "description": "复述并量化剪枝阈值T_dB与几何容差epsilon在判定中的应用",
              "score": 30,
              "evaluation_focus": "约束一致",
              "scoring_hint": "高分：解释何处用T_dB与epsilon；中分：只提其存在；低分：未提或误用"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "几何鲁棒性假设（epsilon、掠射阈值）",
              "description": "对边/顶点命中、共线/端点落点与近掠射入射设定容差与阈值并说明影响",
              "score": 35,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：给出数量级如1e-6~1e-3 m或角度阈值；中分：定性描述；低分：无容差导致不稳定"
            },
            {
              "sub_criteria": "反射幅值sqrt(0.8)用于剪枝的建模假设",
              "description": "阐明反射仅用于能量上界估计，不等同最终物理幅相",
              "score": 25,
              "evaluation_focus": "物理合理",
              "scoring_hint": "高分：清楚区分预估与最终；中分：含糊；低分：将其当作最终系数"
            },
            {
              "sub_criteria": "二维模型有效性与顶点暴露判定假设",
              "description": "声明2D近似与顶点“暴露/夹遮”的分类准则用于绕射可见性",
              "score": 40,
              "evaluation_focus": "建模边界",
              "scoring_hint": "高分：给出基于角扇区或半平面测试规则；中分：仅提需要暴露；低分：未定义绕射可见性"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "镜像源法递归构造R_max≤7的反射链",
              "description": "正确实现镜像点生成与反求接触点，确保点落在线段内且入射=反射角",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含链级构造与段内判定；中分：只到一次反射；低分：未用镜像或忽略段内约束"
            },
            {
              "sub_criteria": "顶点插入法生成D_max≤2的绕射与组合路径",
              "description": "从Tx→顶点→Rx及在反射链中插入顶点，并计算β、入/出角α供UTD使用",
              "score": 30,
              "evaluation_focus": "几何构型",
              "scoring_hint": "高分：覆盖单/双绕射与组合限制；中分：仅单绕射；低分：未实现顶点插入"
            },
            {
              "sub_criteria": "SBR正/逆射与角区段细化策略",
              "description": "以N0粗量化并在命中区段二分细化至幅相或几何收敛阈值，结合Rx逆射",
              "score": 25,
              "evaluation_focus": "搜索优化",
              "scoring_hint": "高分：包含收敛准则示例（<0.5 dB或<5°）；中分：仅粗量化；低分：无细化或无逆射"
            },
            {
              "sub_criteria": "可视性与相交裁剪管线",
              "description": "为每段执行R-tree加速的线段-多边形相交测试与端点例外处理，禁止穿越",
              "score": 15,
              "evaluation_focus": "几何判定",
              "scoring_hint": "高分：说明排除反射边自身与端点容差；中分：仅做全局相交测试；低分：无可视性验证"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "早期剪枝与上界估计（1/r与sqrt(0.8)^R）",
              "description": "在构造过程中基于段长与反射次数估计接收上界，与T_dB比较终止分支",
              "score": 35,
              "evaluation_focus": "复杂度控制",
              "scoring_hint": "高分：给出具体判停规则与实现点；中分：仅事后过滤；低分：无剪枝导致爆炸"
            },
            {
              "sub_criteria": "拓扑去重与容差归并（节点序列+接触点）",
              "description": "用节点/边/顶点序列和坐标容差判同一路径，移除等价与自相似循环",
              "score": 30,
              "evaluation_focus": "解集合质量",
              "scoring_hint": "高分：定义容差与哈希键；中分：模糊去重；低分：大量重复路径残留"
            },
            {
              "sub_criteria": "可视性缓存与镜像序列重用的并行化",
              "description": "缓存线段相交与镜像结果，线程/进程并行按Tx–Rx或深度批次执行",
              "score": 35,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：说明缓存键与并行粒度；中分：仅单线程缓存；低分：无缓存与并行"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "几何库与空间索引正确使用（Shapely/GEOS + R-tree）",
              "description": "使用可靠API构造多边形、线段、半平面反射与相交查询，避免自实现错误",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：调用精确几何运算与索引过滤；中分：部分自写；低分：全部手写易错"
            },
            {
              "sub_criteria": "容差处理与边界情形单元测试",
              "description": "实现epsilon、掠射阈值与端点/共线专门测试，含回归用例",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：含多类边界单测与持续集成门槛；中分：少量测试；低分：无测试"
            },
            {
              "sub_criteria": "输出契约与日志/可视化接口",
              "description": "导出标准JSON/CSV含必备字段，提供路径几何快照与调试日志定位失败原因",
              "score": 25,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：字段完备且可复现；中分：字段缺失或日志不足；低分：仅打印不落盘"
            },
            {
              "sub_criteria": "并行与缓存实现的可控性（种子/确定性）",
              "description": "确保SBR随机性可控、并行无竞态、缓存一致，结果可重复",
              "score": 20,
              "evaluation_focus": "工程质量",
              "scoring_hint": "高分：固定随机种子与锁/无共享写；中分：结果大体稳定；低分：每次结果不同"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可视性与物理可行性验证报告",
              "description": "统计被剔除原因（穿越、落点越界、暴露失败）与通过率，定位常见失败模式",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：分原因占比；中分：仅总体数；低分：无报告"
            },
            {
              "sub_criteria": "搜索与剪枝效果评估（角量化与T_dB敏感性）",
              "description": "比较不同N0与T_dB下候选数与运行时，给出收敛与稳定性结论",
              "score": 35,
              "evaluation_focus": "性能评估",
              "scoring_hint": "高分：含两档以上参数对比与曲线/表；中分：定性描述；低分：无评估"
            },
            {
              "sub_criteria": "路径集合质量检查（去重率与覆盖代表性）",
              "description": "报告去重前后数量、重复率、按阶数分布与代表路径可视化示例",
              "score": 30,
              "evaluation_focus": "质量度量",
              "scoring_hint": "高分：定量统计与样例；中分：零散展示；低分：未验证去重效果"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3 — 路径物理量计算与窄带多波干涉统计分析（单频）：给定经可视性/拓扑检验得到的候选路径集合作为唯一输入（每条路径包含节点序列、每段端点坐标、边/顶点索引及段长），本子任务的目标是为每条路径精确计算其复场贡献并在单一频率下对接收复包络的统计特性做系统性量化和拟合检验，输出规整化的路径物理量表与统计指标。具体步骤与方法如下：一）物理量计算——对每条路径 i 计算总几何长度 r_i（段长之和）和时延 τ_i = r_i / c；规定发射参考场强 E0 和天线方向因子 A_ant(θ_tx,θ_rx)（若无方向性则取 1）；每次镜面反射赋予复反射系数 R_j（默认幅值 |R_j| = sqrt(0.8)，相位 φ_Rj 可设为 0 或作为可调参数），每次绕射用题中 UTD 表达式计算复绕射系数 D_m（式(1)），其中过渡函数 F(x) 在 x<0.001、x>10 分别用给定渐近展开式（式(3),(4)）计算，在 0.001 ≤ x ≤ 10 区间用高精度复费涅尔/ Faddeeva 实现或数值积分评估；数值判据采用容差 ε_geom（例如 1e-9）避免奇异并在 cot 等函数接近奇点时使用极限或正则化。每条路径的复场按统一表达式 E_i = E0 * A_ant * (∏_j R_j) * (∏_m D_m) * (1 / r_i) * exp(j k r_i + j Φ_R_sum)，其中 Φ_R_sum 为反射/绕射累计相位项；记录并输出每条路径的复幅 E_i（幅值与相位）、功率 |E_i|^2、r_i、τ_i、路径类型标签。二）路径筛选与归一化——按照接收功率对路径排序并按相对功率阈值 T_dB（默认 −40 dB）剪去极小贡献路径；保存 Q 有效路径和总接收功率 P_tot = Σ_i |E_i|^2。三）解析性矩与互相关——给出合成复包络 F = Σ_{i=1}^Q E_i（公共时间因子 e^{jωt 忽略）），直接计算确定性一阶矩 μ = F（在几何无随机化时）及二阶矩展式 E[|F|^2] = Σ_i |E_i|^2 + Σ_{i≠j} E_i E_j^*，并为后续统计化定义路径间复协方差矩阵 C_path with entries C_{ij} = E[ E_i E_j^* ]（在无不确定性情形下等于 E_i E_j^*）；计算路径对互相关系数/互相干度 γ_{ij} = |C_{ij}| / sqrt(C_{ii} C_{jj}) 并输出矩阵。四）统计化蒙特卡洛扰动与经验分布估计——为模拟小尺度位置误差与物理不确定性引入参数化扰动并进行蒙特卡洛（默认 N_MC = 2000）：常用扰动包括接收位置微位移 Δx drawn Uniform(−δ,δ)×Uniform(−δ,δ)（建议 δ = min(λ/4, 0.5 m) 或由用户设定）以随机化相位／路径长度，及可选的反射相位/幅值微扰（正态分布 σ_φ、σ_amp）；每一 MC 样本重算 E_i^s 并得到样本合成 F^s = Σ_i E_i^s，收集幅度 R^s = |F^s| 与功率 P^s = |F^s|^2 的样本集合。五）概率分布拟合与检验——基于样本 {R^s} 用方法矩估计与最大似然分别拟合常用包络模型：Rayleigh、Rice（估计 K 因子 K = |dominant|^2 / Σ_{others} |E_i|^2 或用 ML）、Nakagami‑m（用矩法估计 m 和 Ω），并用 Kolmogorov–Smirnov (KS) 检验、Anderson–Darling 或似然比检验报告每种模型的 p 值/拟合优度；同时用核密度估计（KDE）或直方图给出经验 PDF 与模型曲线比较。六）二阶与高阶统计量与不确定性量化——计算样本均值、方差、偏度、峰度及其置信区间（例如通过自助法 bootstrap），输出包络均值 E[|F|]、RMS、信噪比估计、以及因主导路径存在所估的 Rice K 与 Nakagami m 值及其不确定度。七）输出规范——为每一接收点/Tx-Rx 对产生结构化报告：路径列表（带 E_i、|E_i|^2、phase、r_i、τ_i、类型）、Q、P_tot、P_max、主导路径 ID、路径相关矩阵 γ_{ij}、蒙特卡洛样本摘要（N_MC、δ、扰动类型）、经验分布（直方图数据或 KDE 样本）、拟合模型参数与检验 p 值、一阶/二阶矩与置信区间；所有数值按可机器读取格式导出（CSV/JSON），并保存用于可视化的路径几何与显著路径标识。八）数值实现与工具建议——推荐使用高精度数值库（Python: numpy, scipy, mpmath 或 Faddeeva for complex Fresnel integrals），统计拟合与检验采用 scipy.stats / statsmodels 或专门的 ML 优化器，蒙特卡洛并行化可用 multiprocessing 或并行计算框架以提高效率；对关键数值步骤（UTD F(x) 在分界处、cot 接近奇点）应加入容差处理与对数/相位分支一致性检查以保证鲁棒性。该子任务不负责生成几何候选路径（仅以其为输入）且输出应足够完整以直接支持后续宽带合成或可视化模块。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在单一频率下对候选传播路径计算复场贡献并对接收复包络进行统计分析与拟合评估（Rayleigh/Rice/Nakagami），输出路径物理量与干涉统计指标。",
          "expected_output": "规范化路径物理量表（含 E_i、|E_i|^2、phase、r_i、τ_i、类型）、有效路径集合Q、P_tot/P_max/主导路径ID、路径互相关矩阵γ_ij、蒙特卡洛样本摘要与经验PDF、已拟合模型参数与检验p值、矩统计与置信区间；同时导出CSV/JSON与可视化数据。",
          "key_inputs_constraints": "输入：经子任务二验证的候选路径集合（节点序列、段端点坐标、边/顶点索引、段长）；参数：频率f、波数k、E0、A_ant(θ_tx,θ_rx)；反射系数R_j（|R_j|=sqrt(0.8)，φ_Rj可设0）、绕射系数D_m（式(1)与F(x)分段计算）；常数c；阈值T_dB（默认-40 dB）；蒙特卡洛N_MC、扰动幅δ、相位/幅值噪声σ_φ/σ_amp；数值容差ε_geom与奇点正则化；前置条件：路径已通过可视性/拓扑校验且无自交。",
          "modeling_type": "仿真+拟合+评价",
          "role_in_pipeline": "作为路径枚举（子任务二）之后、宽带合成与可视化之前的窄带物理计算与统计评价环节；直接依赖：子任务一（几何库）、子任务二（候选路径）；为后续宽带建模与干涉包络统计提供参数与验证基线。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "单频复场计算目标与对象（E_i、r_i、τ_i）",
              "description": "是否明确本子任务在单一频率下计算每条路径的复场E_i=E0·A_ant·ΠR_j·ΠD_m·(1/r_i)·exp(jkr_i+Φ_R_sum)，并提取r_i与τ_i。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：公式完整含A_ant、R_j、D_m、1/r与相位项；中分：缺少1个关键因子；低分：未形成可计算的E_i表达式。"
            },
            {
              "sub_criteria": "干涉统计与矩特性（μ、E[|F|^2]）识别",
              "description": "是否识别需对合成复包络F=ΣE_i进行一阶μ与二阶矩E[|F|^2]=Σ|E_i|^2+Σ_{i≠j}E_iE_j*的计算。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确给出展开式并讨论共轭项；中分：只给总体思路无展开；低分：忽略二阶矩或误写。"
            },
            {
              "sub_criteria": "UTD与F(x)分段近似/数值积分需求",
              "description": "是否指出绕射系数D_m需按x区间使用式(3)(4)与数值积分/高精度Faddeeva。",
              "score": 20,
              "evaluation_focus": "物理理解",
              "scoring_hint": "高分：清晰列出三个区间策略；中分：仅提到需数值积分；低分：忽略或错误处理F(x)。"
            },
            {
              "sub_criteria": "阈值筛选T_dB与有效路径Q",
              "description": "是否识别以T_dB（默认−40 dB）剪枝并汇总有效路径数Q与P_tot。",
              "score": 15,
              "evaluation_focus": "方案制定",
              "scoring_hint": "高分：说明相对主径的功率阈值与排序；中分：有筛选但无阈值细节；低分：未筛选或错误标准。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述单频前提与输入来自子任务二",
              "description": "是否清晰复述单频设定、输入为经可视性/拓扑检验的候选路径（含段长与节点序列）。",
              "score": 30,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：点名可视性/拓扑检验已完成；中分：只说来自上游；低分：将本任务与路径生成混淆。"
            },
            {
              "sub_criteria": "参数与常量明确（E0、k、A_ant、c）",
              "description": "是否复述需要的物理常量与参数定义及默认值假设（如A_ant=1）。",
              "score": 30,
              "evaluation_focus": "规范意识",
              "scoring_hint": "高分：逐项列出并单位一致；中分：缺1-2项；低分：未说明或单位混乱。"
            },
            {
              "sub_criteria": "输出规范复述（CSV/JSON、γ_ij、p值）",
              "description": "是否准确复述需要输出路径物理量表、相关矩阵γ_ij、拟合参数与检验p值等。",
              "score": 40,
              "evaluation_focus": "结果导向",
              "scoring_hint": "高分：含格式与关键字段；中分：只概述；低分：无结构化输出。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "反射系数假设（|R_j|=sqrt(0.8)、φ_Rj）",
              "description": "是否明确采用题设默认反射幅度并说明相位设定（0或可调）及影响。",
              "score": 25,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：给出幅相设定与理由；中分：仅幅度；低分：与题设冲突或缺失。"
            },
            {
              "sub_criteria": "A_ant与各向同性/方向性假设",
              "description": "是否说明A_ant(θ_tx,θ_rx)默认1或提供方向图接口且保持一致单位。",
              "score": 20,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：阐明接口与默认；中分：含糊；低分：遗漏导致量纲错误。"
            },
            {
              "sub_criteria": "数值容差与奇点处理（ε_geom、cot正则）",
              "description": "是否假设并给出cot奇点、掠射等情况下的正则化策略与容差量级。",
              "score": 30,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：具体阈值/分段；中分：仅口头说明；低分：未设致计算不稳定。"
            },
            {
              "sub_criteria": "蒙特卡洛扰动设定（δ、N_MC、σ_φ/σ_amp）",
              "description": "是否给出位置扰动范围δ与样本数N_MC、可选反射微扰分布设定。",
              "score": 25,
              "evaluation_focus": "实验设计",
              "scoring_hint": "高分：δ=min(λ/4,0.5m)、N_MC≥1000；中分：给定但不合理；低分：未说明扰动。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "E_i物理模型完备性（R_j、D_m、1/r_i、相位）",
              "description": "E_i构造是否包含所有反射与绕射因子、路径衰减与相位累积，统一相位约定。",
              "score": 35,
              "evaluation_focus": "物理建模",
              "scoring_hint": "高分：完整一致；中分：缺一项或相位不统一；低分：模型失配。"
            },
            {
              "sub_criteria": "UTD过渡函数F(x)实现策略",
              "description": "是否构建x<0.001、0.001≤x≤10、x>10的分段近似/积分方案并考虑复数实现精度。",
              "score": 25,
              "evaluation_focus": "数值方法",
              "scoring_hint": "高分：指明Faddeeva/高精度积分；中分：仅数值积分；低分：误用近似区间。"
            },
            {
              "sub_criteria": "路径筛选与归一化（T_dB、排序、Q）",
              "description": "构建按相对功率阈值的剪枝流程，定义P_tot与主导路径，并说明归一化口径。",
              "score": 20,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：含相对主径判定与稳定性；中分：只阈值无细节；低分：无剪枝。"
            },
            {
              "sub_criteria": "相关性度量与γ_ij矩阵构造",
              "description": "是否构建C_path与γ_ij=|C_ij|/sqrt(C_ii C_jj)的计算与输出结构。",
              "score": 20,
              "evaluation_focus": "统计建模",
              "scoring_hint": "高分：矩阵对称性与数值稳定处理；中分：仅定义；低分：缺失。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值稳健求解（奇点、相位分支、一致性检查）",
              "description": "在cot奇点、掠射、复对数/相位分支下的稳定求解与连续性检查。",
              "score": 30,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：含阈值与连续相位展开；中分：部分处理；低分：产生NaN/发散。"
            },
            {
              "sub_criteria": "蒙特卡洛实现与收敛性",
              "description": "N_MC采样、δ扰动与并行化；是否进行收敛诊断（均值/方差稳定或批间差）。",
              "score": 30,
              "evaluation_focus": "仿真实现",
              "scoring_hint": "高分：N_MC≥2000或收敛证据；中分：N_MC≈500-1000无诊断；低分：样本过少无说明。"
            },
            {
              "sub_criteria": "分布拟合与检验（KS/AD/ML）",
              "description": "对Rayleigh/Rice/Nakagami进行矩法/ML估计并用KS或AD检验输出p值与K、m等。",
              "score": 40,
              "evaluation_focus": "统计推断",
              "scoring_hint": "高分：多模型比较与p值报告；中分：单模型或缺p值；低分：仅画图无检验。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数值库与精度（numpy/scipy/mpmath/Faddeeva）",
              "description": "是否正确调用高精度复数运算与F(x)实现，验证区间拼接连续性。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：包含单元测试与连续性误差<1e-3；中分：实现但无测试；低分：精度问题明显。"
            },
            {
              "sub_criteria": "接口与数据格式（CSV/JSON、字段齐全）",
              "description": "输出路径物理量表、γ_ij、拟合结果的机器可读导出，字段与文档一致。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：schema校验通过；中分：基本可读但字段缺失；低分：无结构化导出。"
            },
            {
              "sub_criteria": "性能与并行（蒙特卡洛、多Tx-Rx批处理）",
              "description": "是否实现多进程/向量化，加速N_MC与多组合计算，包含缓存复用。",
              "score": 25,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：加速≥3x且有基准；中分：一定向量化；低分：循环低效。"
            },
            {
              "sub_criteria": "错误处理与日志（异常路径、奇点警告）",
              "description": "规范的异常与告警（如F(x)非数、cot奇点、被剪枝路径计数），可追溯日志。",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：分类错误与上下文；中分：简单try/except；低分：静默失败。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "路径能量构成与主导路径识别",
              "description": "分析P_tot、P_max、Q与各类型路径贡献，解释主导路径物理原因。",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化占比并关联几何；中分：定性说明；低分：无分析。"
            },
            {
              "sub_criteria": "相关性解读（γ_ij）与干涉机制",
              "description": "解读γ_ij矩阵的高/低相干对包络的影响与潜在路径冗余。",
              "score": 25,
              "evaluation_focus": "统计解读",
              "scoring_hint": "高分：结合几何相位差阐释；中分：只给数表；低分：未讨论。"
            },
            {
              "sub_criteria": "分布拟合对比与模型选择（Rayleigh/Rice/Nakagami）",
              "description": "报告各模型参数与p值，基于检验选择最佳模型并讨论K或m的物理意义。",
              "score": 30,
              "evaluation_focus": "模型评价",
              "scoring_hint": "高分：含置信区间与模型优选理由；中分：报告参数无比较；低分：结论缺依据。"
            },
            {
              "sub_criteria": "不确定性量化与稳健性（CI、敏感性）",
              "description": "提供均值/方差/偏度/峰度及CI，讨论对δ、T_dB等参数的敏感性。",
              "score": 20,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：含bootstrap或多δ对比；中分：仅点估计；低分：无不确定性报告。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（宽带频率合成、时域冲激响应与相关性分析及数值实现与验证/灵敏度策略）的目标是：以已列出的确定性路径集合（每条路径至少含有总长度 r_i 和复增益谱参数化 A_i(f) 或其近似常数幅值）为输入，在频率轴上将这些路径的窄带复贡献快速合成为离散频率响应 H(f_n)（f_n = 2000,2001,…,2100 MHz，Δf = 1 MHz，总点数 N_f = 101），并通过数值逆傅里叶变换得到时域冲激响应 h(τ) 与功率时延谱 P(τ)=|h(τ)|^2，进而计算并输出关键宽带指标（平均时延 τ_mean、RMS 时延扩展 σ_τ、多普勒无关情形下的相干带宽 B_c 的若干定义值例如基于 0.5 自相关阈值的 B_c(0.5) 与基于经验关系 B_c≈1/(5σ_τ)），同时给出频域与路径层面的相关性量化：频率互相关矩阵 C(f_p,f_q)=E[H(f_p)H(f_q)^*] 的估计（在确定性场景下直接计算，在引入参数扰动时用蒙特卡洛估计）、每条路径跨频率的相关系数以及同一频率下不同路径之间的互相关系数，从而明确“同一路径不同频率之间的相关性”和“同一频率不同路径之间的相关性”；为实现上述目标应按下列精确步骤与数值约定执行：1) 输入准备：读取并缓存所有路径的几何长度 r_i 和复增益参数 A_i(f) 的表示（若幅值近似不变则仅缓存常数幅值和相位偏移），并确定常数 c 与 k(f)=2π f / c 的计算精度；2) 频域合成：对每一频点向量化计算 H(f_n)=Σ_i A_i(f_n) exp(−j k(f_n) r_i)，采用复杂指数的数值稳定实现并统一相位分支（避免数值折叠），若路径数或频点数大则以块（chunk）或矩阵化方式向量运算并并行化；3) 频->时域转换：为获得时域分辨率 Δτ=1/B（B=100 MHz）与良好旁瓣特性，对 H(f_n) 先按用户选定的窗（例如 Hanning）加窗并进行适当的零填充至下一个功率二的长度 N_fft（以提高时延分辨率与降低环绕），然后调用高效 FFT 库（如 FFTW 或 numpy.fft）做 IFFT 得到离散 h(τ_m)，保证能量守恒并进行 Parseval 校验（频域平均功率与时域功率积分一致）；4) 指标计算：从 P(τ) 计算 τ_mean、σ_τ，并按两种或多种标准计算相干带宽（例如 B_c(0.5) 由互相关函数在 0.5 欄位处的频差判定，另一常用值由 B_c≈1/(5σ_τ) 给出），同时计算频域相关矩阵 C(f_p,f_q)（若需统计化，则对每一蒙特卡洛样本计算 H^s(f) 并累积样本均值与协方差）；5) 数值实现细节：UTD 或其他频率依赖项的评估（如 A_i(f) 含绕射系数）应使用高精度复费涅尔/ Faddeeva 实现或在 x 极端区间调用题中给定的渐近式，以避免积分/渐近不连续；对相位与幅度运算应统一数据类型（双精度复数），对大量路径与频点的计算应采用向量化与并行化（频点层与路径层并行、并可对多个 Tx–Rx 并行），并使用缓存策略重复利用 r_i 与中间矩阵以减少重复计算；6) 资源与数值稳定性管理：为控制内存与运算量，允许按能量阈值剪枝极低贡献路径、按频段分块计算并在内存允许范围内做 IFFT；在 IFFT 前应处理相位展开/去卷绕以避免跳变导致时域伪影；7) 验证与一致性检查：实现单元测试验证频域-时域一致性（Parseval 定律）、在已知合成例子上比对解析结果（例如单路径应产生时延脉冲位置与幅度正确），对 UTD/F(x) 的数值实现进行极限（x→0 与 x→∞）一致性测试；8) 校准与灵敏度分析：为评估不确定性与稳健性，定义并执行蒙特卡洛试验（建议 N_MC = 1000–2000，可调整）对关键输入参数（建筑坐标扰动标准差例如 0.1–1.0 m、反射系数幅值±10%、角量化分辨等）做随机化，并对每一试验计算 H(f), h(τ), τ_mean, σ_τ, B_c 以获得统计分布与置信区间，输出敏感度量表（例如参数扰动对 τ_mean 与 B_c 的标准差比）；9) 输出格式与可视化对象：生成并保存机器可读结果文件（频域 H(f_n) 列表、时域 h(τ_m) 序列、P(τ) 向量、τ_mean、σ_τ、B_c、频率相关矩阵 C 及其特征值/谱图、蒙特卡洛样本统计摘要与置信区间），并提供可选的图像（PDP、CIR、频域相关热图、B_c 随扰动的置信区间曲线）；10) 工具与库建议：推荐使用 Python + numpy/scipy（或 MATLAB）做向量化运算与 FFT，调用 Faddeeva / mpmath 或专用 C 库做复费涅尔积分，采用 FFTW 或 MKL 加速 IFFT，使用 multiprocessing / joblib / MPI 做并行化，并以 HDF5/NetCDF 保存大规模结果以便后续分析。整个子任务的成品应包括清晰的输入/输出接口定义、可复现的数值实现、自动一致性检验与可配置的灵敏度试验参数，使得在给定路径集合和一组配置参数下可一次性产出完整的宽带传输函数、时域冲激响应、时延统计与频域/路径相关性分析结果并伴随不确定性度量。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于已给定路径集合评估并合成宽带频率响应H(f)、逆变换得到时域冲激响应h(τ)与功率时延谱P(τ)，并量化相干带宽B_c、平均时延τ_mean与RMS时延扩展σ_τ及频率/路径相关性。",
          "expected_output": "离散H(f_n)复数序列（2000–2100 MHz, Δf=1 MHz, N_f=101）；加窗与零填充说明；IFFT得到的h(τ_m)与P(τ)向量；τ_mean、σ_τ、B_c(0.5)与近似B_c≈1/(5σ_τ)；频率互相关矩阵C(f_p,f_q)及路径/频率相关系数；一致性校验（Parseval、单路径基准）；蒙特卡洛灵敏度统计（均值/方差/置信区间）；机器可读导出文件与可视化摘要。",
          "key_inputs_constraints": "输入：路径集合{r_i, A_i(f)}；频率网格f_n=2000…2100 MHz，Δf=1 MHz；光速c与k(f)=2πf/c；窗口类型（如Hanning）；零填充与N_fft；能量阈值与剪枝；数值精度（双精度复数）。约束：相位分支一致；UTD与F(x)在极限区间使用渐近式；能量守恒（Parseval）；内存与并行资源受限；仅对已验证可见的路径求和。",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为窄带物理量计算（子任务3）之后、统计分析与可视化之前的宽带合成与指标评价环节；前序依赖：子任务1几何数据库、子任务2路径枚举、子任务3单频复增益A_i(f)；后续：报告与决策、可视化与对比实验。",
          "assumptions": "若A_i(f)未显式给出频率依赖，则幅值常数、相位由exp(-jk(f)r_i)主导；使用均匀频率采样并默认Hanning窗；蒙特卡洛样本数N_MC=1000可调整。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确宽带合成目标H(f)与h(τ)/P(τ)评估",
              "description": "是否将核心任务界定为对给定r_i与A_i(f)进行频率合成得到H(f_n)，并通过IFFT获得h(τ)、P(τ)与指标τ_mean、σ_τ、B_c。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：同时点出H(f)、h(τ)、P(τ)、τ_mean、σ_τ、B_c(0.5)与1/(5σ_τ)；中分：仅部分指标；低分：停留在窄带或未提时域/带宽指标。"
            },
            {
              "sub_criteria": "输入与约束识别（r_i, A_i(f), Δf=1 MHz, N_f=101）",
              "description": "是否准确识别频率网格、路径参数、光速c与k(f)的计算精度需求及相位分支一致性约束。",
              "score": 25,
              "evaluation_focus": "需求提取",
              "scoring_hint": "高分：逐一列出r_i、A_i(f)、c、k(f)、Δf、N_f与相位分支；中分：漏1–2项；低分：未区分必要输入。"
            },
            {
              "sub_criteria": "数值稳定与资源管理需求",
              "description": "是否识别加窗、零填充、Parseval校验、并行/分块与剪枝对稳定性和资源的作用。",
              "score": 25,
              "evaluation_focus": "数值意识",
              "scoring_hint": "高分：同时提及窗函数、零填充、Parseval与剪枝/分块；中分：提及其二；低分：无数值稳定策略。"
            },
            {
              "sub_criteria": "相关性量化范围（频率互相关C与路径/频率相关）",
              "description": "是否明确需要计算C(f_p,f_q)、同一路径跨频率相关、同一频率路径间互相关。",
              "score": 20,
              "evaluation_focus": "指标覆盖",
              "scoring_hint": "高分：三类相关性均覆盖；中分：仅频率互相关；低分：未涉及相关性。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将合成公式H(f_n)=Σ_i A_i(f_n)exp(−jk(f_n)r_i)精确复述",
              "description": "是否给出正确的复指数与波数表达，并注明双精度复数与相位展开。",
              "score": 35,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：公式正确且说明相位分支/双精度；中分：公式正确但缺少实现要点；低分：公式错误或遗漏A_i(f)。"
            },
            {
              "sub_criteria": "频->时域转换流程复述（加窗→零填充→IFFT）",
              "description": "是否按顺序说明窗口类型、N_fft选择与能量归一，避免时域环绕伪影。",
              "score": 35,
              "evaluation_focus": "流程表达",
              "scoring_hint": "高分：顺序与理由完整；中分：顺序对但缺少能量归一；低分：直接IFFT无加窗/零填充。"
            },
            {
              "sub_criteria": "宽带指标定义复述（τ_mean, σ_τ, B_c）",
              "description": "是否明确τ_mean、σ_τ由P(τ)加权计算，并给出B_c(0.5)与B_c≈1/(5σ_τ)。",
              "score": 30,
              "evaluation_focus": "指标定义",
              "scoring_hint": "高分：两种B_c均给出；中分：仅一种；低分：只给定性描述。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "A_i(f)频率依赖与常幅假设",
              "description": "是否说明若未提供A_i(f)细节则采用幅值常数、相位由exp(−jk(f)r_i)主导的假设。",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出适用范围与影响；中分：仅提出不量化；低分：未说明。"
            },
            {
              "sub_criteria": "窗口与零填充假设（Hanning与N_fft选择）",
              "description": "是否阐明采用Hanning窗、零填充到2的幂并讨论对时延分辨率Δτ=1/B的影响。",
              "score": 25,
              "evaluation_focus": "数值假设",
              "scoring_hint": "高分：关联Δτ与旁瓣；中分：仅说明使用；低分：未提。"
            },
            {
              "sub_criteria": "蒙特卡洛扰动与B_c稳健性假设",
              "description": "是否设定N_MC、扰动分布（位置/幅相）并假设统计量收敛与输出置信区间。",
              "score": 25,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：给出N_MC与参数范围；中分：仅提蒙特卡洛；低分：无扰动设定。"
            },
            {
              "sub_criteria": "能量阈值剪枝与对指标偏差的假设",
              "description": "是否声明剪枝对τ_mean与σ_τ的潜在偏差并给出阈值（如T_dB）建议。",
              "score": 15,
              "evaluation_focus": "风险意识",
              "scoring_hint": "高分：定量阈值与偏差方向；中分：仅警示；低分：未提。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "频域合成矩阵化与并行化设计",
              "description": "是否将H(f)=V(f,r)·A(f)矩阵化或block并行，复指数向量化并缓存k(f)与r_i。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确矩阵/块策略与缓存；中分：仅循环实现；低分：低效逐点求和。"
            },
            {
              "sub_criteria": "加窗与能量归一/Parseval校验模块",
              "description": "是否在模型层纳入窗口归一、能量守恒与单路径基准测试钩子。",
              "score": 25,
              "evaluation_focus": "数值健壮",
              "scoring_hint": "高分：有Parseval与基准；中分：仅一种校验；低分：无校验。"
            },
            {
              "sub_criteria": "相关性度量模型（C(f_p,f_q)、路径/频率相关）",
              "description": "是否定义协方差与相关系数计算与可选蒙特卡洛估计流程。",
              "score": 25,
              "evaluation_focus": "统计建模",
              "scoring_hint": "高分：给出公式与估计步骤；中分：仅点到；低分：缺失。"
            },
            {
              "sub_criteria": "指标计算模型（τ_mean、σ_τ、B_c两种口径）",
              "description": "是否对P(τ)的加权矩与互相关阈值法建模，含插值求B_c(0.5)。",
              "score": 20,
              "evaluation_focus": "指标实现",
              "scoring_hint": "高分：含插值与数值细节；中分：仅离散搜索；低分：未实现B_c。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值稳定的复指数计算与相位展开",
              "description": "是否统一相位分支，避免大r_i·k导致的数值折叠，使用安全expj实现。",
              "score": 30,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：有相位unwrap或模2π管理；中分：仅用expj；低分：出现NaN/不稳定迹象。"
            },
            {
              "sub_criteria": "FFT/IFFT配置（N_fft、零填充、缩放）",
              "description": "是否正确设置N_fft、频率到时延映射与IFFT缩放，确保Δτ=1/B与峰值定位正确。",
              "score": 30,
              "evaluation_focus": "算法细节",
              "scoring_hint": "高分：峰值与单路径时延匹配误差≤一个采样；中分：小偏差；低分：明显错位或能量不守恒。"
            },
            {
              "sub_criteria": "并行/分块与内存控制",
              "description": "是否按路径或频点分块、并使用并行库控制峰值内存并报告加速比。",
              "score": 20,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：可重复的加速与资源上限说明；中分：仅开启并行；低分：大规模时崩溃/超时。"
            },
            {
              "sub_criteria": "剪枝与缓存正确性",
              "description": "是否保证剪枝不改变关键指标（给出阈值扫描）且缓存命中率与一致性校验通过。",
              "score": 20,
              "evaluation_focus": "正确性",
              "scoring_hint": "高分：有阈值敏感性曲线；中分：仅口头说明；低分：剪枝造成明显偏差未披露。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "向量化与数值类型管理（双精度复数）",
              "description": "是否使用numpy/FFT库进行向量化，统一complex128，避免隐式实数截断。",
              "score": 30,
              "evaluation_focus": "代码性能",
              "scoring_hint": "高分：端到端无显著Python循环；中分：混合；低分：纯循环低效。"
            },
            {
              "sub_criteria": "模块化API与I/O（H(f)、h(τ)、C导出）",
              "description": "是否提供清晰函数/类接口与机器可读导出（CSV/JSON/HDF5），含配置记录。",
              "score": 25,
              "evaluation_focus": "代码可用",
              "scoring_hint": "高分：独立可调用、含配置与版本；中分：可运行但耦合；低分：脚本式不可复用。"
            },
            {
              "sub_criteria": "单元测试与校验（Parseval、单路径）",
              "description": "是否包含自动测试覆盖Parseval与单路径脉冲位置/幅度基准。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：测试自动化并过；中分：手工验证；低分：无测试。"
            },
            {
              "sub_criteria": "并行与缓存实现（joblib/multiprocessing/FFT库）",
              "description": "是否正确实现并行与缓存、线程安全并避免重复计算k(f)与exp矩阵。",
              "score": 20,
              "evaluation_focus": "工程能力",
              "scoring_hint": "高分：显著加速与缓存命中统计；中分：部分实现；低分：并行引入竞态或无效。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "PDP与CIR解释及τ_mean、σ_τ解读",
              "description": "是否基于P(τ)解释主/次径、时延散布并定量报告τ_mean与σ_τ含义与单位。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：结合图与数值；中分：仅数值；低分：无解释或单位错误。"
            },
            {
              "sub_criteria": "相干带宽B_c(0.5)与1/(5σ_τ)对比",
              "description": "是否同时给出两种B_c并分析差异来源（窗口/采样/剪枝）。",
              "score": 25,
              "evaluation_focus": "指标对比",
              "scoring_hint": "高分：差异≤20%且原因自洽；中分：报告无原因；低分：两者冲突严重未解释。"
            },
            {
              "sub_criteria": "频率互相关矩阵与路径/频率相关性分析",
              "description": "是否展示C(f_p,f_q)热图或特征值，解释同一路径跨频率相关与同频不同路径互相关的物理含义。",
              "score": 25,
              "evaluation_focus": "统计解读",
              "scoring_hint": "高分：定量系数与物理解释；中分：定性描述；低分：未分析。"
            },
            {
              "sub_criteria": "灵敏度与不确定性量化（置信区间）",
              "description": "是否给出N_MC下的τ_mean、σ_τ、B_c的均值/标准差/CI，并指出主导不确定源。",
              "score": 20,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：95%CI与主导因素排序；中分：仅标准差；低分：无统计量。"
            }
          ]
        }
      }
    }
  }
}