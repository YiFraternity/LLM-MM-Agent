{
  "task_id": "2019_C",
  "problem": "本题从实际需求出发，选择单幅图像距离信息分析、平面视频距离信息分析和立体视频距离信息分析几个典型场景，提出如下四项任务：\n\n\\textbf{任务1：} 测算图1中红色车辆A车头和白色车辆B车头之间的距离、拍照者距马路左侧边界的距离；图2中黑色车辆A车头和灰色车辆C车尾之间的距离以及拍照者距白色车辆B车头的距离；图3中拍照者距岗亭A的距离以及拍照者距离地面的高度；图4中塔体正面（图中四边形ABCD）的尺寸，即AB和CD的长度以及AB和CD之间的距离（已知地砖尺寸为80cm×80cm）。\n\n任务2：附件“车辆.mp4”（右键点击后选择“保存到文件”可导出视频文件）是别克英朗2016款车上乘客通过后视镜拍摄的视频。（1）估算该车和后方红色车辆之间的距离；（2）估算该车超越第一辆白色车辆时两车的速度差异。\n\n任务3：附件“水面.mp4”是高铁乘客拍摄的一块水面，测算高铁行驶方向左侧第一座桥桥面距水面的高度、距高铁轨道的距离以及水面宽度，估算拍摄时高铁的行驶速度。\n\n任务4：附件“无人机拍庄园.mp4”记录了某老宅的全景。（1）估算其中环绕老宅道路的长度、宽度、各建筑物的高度、后花园中树木的最大高度；（2）估算该老宅的占地面积；（3）测算无人机的飞行高度和速度。",
  "subtask": {
    "1": {
      "subtask": "子任务1（数据预处理、相机内外参估计与尺度锚识别）旨在把原始图像和视频转化为几何可用的、经校正且带不确定度评估的输入，并输出（1）矫正后的影像序列或关键帧、（2）相机内参与畸变参数及其不确定性、（3）候选尺度锚（位置与置信度）、（4）地面平面单应或相机相对于地面/参考平面的初步外参估计、以及（5）用于后续几何测量的语义掩码和诊断信息；为此本子任务按以下步骤和方法执行：首先读取并解析输入文件（图像、视频流、帧率、时间戳及可用的EXIF/telemetry），并按需求抽取关键帧；其次进行影像预处理：去噪、对比度增强并在视频上做全局运动估计/稳定（基于特征匹配与全局仿射/单应配准）以减少抖动对后续几何估计的影响；然后进行畸变与内参的初步确定：若存在厂商EXIF或已知传感器参数则作为初始值，否则通过检测图像中的直线（LSD/Hough）并用平行线群集求消失点估计主点与焦距（构建K的初值），并检测径向/切向畸变（Brown–Conrady模型 k1,k2,k3,p1,p2）以供校正；内参与畸变可用OpenCV标定、或基于直线/消失点的自标定初始化，再用以最小化重投影误差的非线性优化（Levenberg–Marquardt/Ceres）精化并输出协方差估计或通过Bootstrap/Monte Carlo采样量化不确定性。与此同时执行语义分割与几何要素检测（利用预训练分割模型如 DeepLabv3/HRNet 或传统颜色/纹理分割）以标注地面、道路、地砖、轨道、水面、车辆与镜面区域；在语义掩码基础上检测并提取尺度锚候选：对地砖使用方形/网格检测（角点检测+Hough或连通域与正交性约束）拟合规则格网并用RANSAC拟合平面单应H；对轨道检测两条平行铁轨线段并对其像平行性与已知轨距生成尺度候选；对车辆采用模板匹配或检测器（YOLO/Mask R-CNN）并结合常见车辆尺寸做备用尺度锚；同时对可能的镜面（后视镜、水面）进行检测（基于高亮、局部对称性与反射纹理）并标注为需要特殊处理的区域。对每种候选尺度锚执行位置精度评估与一致性检验：用RANSAC剔除异常点、用单应H的内点比例和重投影误差判定可靠性，并计算尺度锚对由像素到世界尺度因子的影响与不确定度传播（对像素测量噪声、焦距与锚尺寸先验做敏感性分析）。最终输出包括：经畸变校正的影像或关键帧、估计的K = diag(fx,fy) with (cx,cy) 与畸变系数及其置信区间、每个候选尺度锚的位置与类型（地砖格、轨距、车辆等）与置信度分数、基于锚和内参解出的地面单应H及其不确定度估计、语义掩码和诊断日志（如内参来源、重投影残差统计、RANSAC内点比率）；若未检测到可信尺度锚则明确返回“仅相对尺度可用”并建议获取外部尺度信息。实现工具建议包括 OpenCV（畸变校正、特征、RANSAC、单应估计）、线检测与消失点算法（LSD、Hough、聚类交点）、深度语义分割模型（预训练网络）、非线性优化库（Ceres/LM）、以及用于不确定性评估的Monte Carlo或Bootstrap脚本；输入要求为原始图像/视频文件和（若有）任何可用的传感器元数据或尺度先验，输出必须以机器可读的格式记录参数、光栅化掩码和误差度量以便下游复用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "估计并校正图像/视频的相机内参与畸变，识别并拟合尺度锚与地面单应，评估并量化相关参数与尺度的不确定性",
          "expected_output": "经畸变校正的关键帧影像序列（图像文件/数组）、相机内参K与畸变系数及置信区间（数值JSON）、候选尺度锚列表（位置、类型、置信度，JSON）、地面单应H与不确定度（矩阵+协方差）、语义掩码（光栅PNG/数组）、诊断日志与可复现的代码/脚本",
          "key_inputs_constraints": "1) 原始图像/视频文件（帧率、时间戳、EXIF/telemetry若有）；2) 场景需包含可用几何特征（直线群、地砖/轨道或可识别车辆）以生成尺度锚；3) 若无外部尺度先验则结果仅给出相对尺度并需标注“不确定度大”；4) 必要计算资源与外部预训练分割模型（DeepLabv3/HRNet）或等价替代。",
          "modeling_type": "拟合+分类+评价",
          "role_in_pipeline": "作为预处理与几何参数估计子任务：位于特征提取后、几何测量与尺度换算前，依赖原始文件解析、关键帧抽取与语义分割，输出供后续距离/高度/速度计算使用"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "关键帧抽取与时间戳识别（关键帧）",
              "description": "是否基于视频帧率、运动量与目标可见性合理选择关键帧并记录时间戳，确保后续几何测量的时间参考。",
              "score": 40,
              "evaluation_focus": "识别能力",
              "scoring_hint": "高分：关键帧覆盖目标事件且时间戳精确到帧，帧间运动量最小化；中分：关键帧基本覆盖但有少量模糊/抖动；低分：关键帧未覆盖目标或未记录时间戳。"
            },
            {
              "sub_criteria": "相机元数据与EXIF可用性识别（相机内参）",
              "description": "检验并标注EXIF/telemetry或厂商传感器参数的存在性，并明确使用或否决这些元数据作为K的初值。",
              "score": 30,
              "evaluation_focus": "数据审查",
              "scoring_hint": "高分：准确识别并安全使用EXIF作为初值并记录来源；中分：发现EXIF但未验证可信度；低分：忽略或误用EXIF信息。"
            },
            {
              "sub_criteria": "可用尺度锚与几何特征识别（尺度锚）",
              "description": "识别场景中地砖网格、铁轨、车辆、镜面/水面等候选尺度锚并给出初步置信度与可行性说明。",
              "score": 30,
              "evaluation_focus": "要素识别",
              "scoring_hint": "高分：列出≥1个可信尺度锚并给出位置与RANSAC内点率；中分：列出候选但置信度低或未给内点率；低分：未能识别任何候选或误标镜面为尺度锚。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "重述需输出的相机内参与畸变（相机内参）",
              "description": "准确复述要求输出的K矩阵项(fx,fy,cx,cy)与Brown–Conrady畸变系数(k1,k2,k3,p1,p2)及需给出不确定度。",
              "score": 40,
              "evaluation_focus": "表达清晰",
              "scoring_hint": "高分：明确列出K各元素与畸变系数并要求置信区间；中分：列出K或畸变但未强调不确定度；低分：未完整列出所需参数。"
            },
            {
              "sub_criteria": "重述尺度锚与地面单应H的期望输出（尺度锚+单应）",
              "description": "明确应输出每个尺度锚的位置、类型、置信度，及基于锚解出的地面单应H和其不确定度。",
              "score": 30,
              "evaluation_focus": "表达清晰",
              "scoring_hint": "高分：逐项列明锚位置、类型、置信度及H矩阵与协方差；中分：输出项不全或未说明协方差；低分：描述模糊或遗漏H/置信度。"
            },
            {
              "sub_criteria": "重述语义掩码与诊断日志的交付要求（语义掩码）",
              "description": "说明需输出道路/地面/车辆/水面等语义掩码并记录重投影残差、RANSAC内点比例等诊断信息。",
              "score": 30,
              "evaluation_focus": "表达清晰",
              "scoring_hint": "高分：清楚列出掩码类别与需记录诊断项并指定格式；中分：列出掩码但诊断项不全；低分：未明确输出掩码或诊断信息。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于相机模型的假设（针孔/畸变）",
              "description": "明确假设采用针孔相机模型并用Brown–Conrady模型拟合径向与切向畸变，说明何时该假设可能失效。",
              "score": 30,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：说明针孔与Brown模型并列出失效情形（鱼眼、强透镜畸变）；中分：只说明针孔或Brown模型；低分：无明确相机模型假设。"
            },
            {
              "sub_criteria": "地面/尺度锚的平面假设（单应H）",
              "description": "明确将地砖/轨道作为平面并用单应H表征，说明对高度起伏或非平面区域的处理策略。",
              "score": 35,
              "evaluation_focus": "现实假设",
              "scoring_hint": "高分：说明平面假设并给出非平面异常检测与剔除方法；中分：声明平面假设但未给处理策略；低分：未声明或忽视平面误差。"
            },
            {
              "sub_criteria": "噪声与先验尺度不确定性假设（不确定性）",
              "description": "给定像素测量噪声模型、焦距先验不确定范围与尺度锚尺寸先验误差，并说明这些假设如何用于不确定度传播。",
              "score": 35,
              "evaluation_focus": "概率假设",
              "scoring_hint": "高分：提供噪声数值（如像素σ）、焦距与尺度先验的置信区间并描述传播方法；中分：提供定性描述；低分：无噪声或先验说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "基于直线/消失点的内参与畸变初值构建（消失点/畸变）",
              "description": "设计检测直线并用消失点聚类估计主点与焦距的步骤，以及用直线残差拟合径向/切向畸变的初值方案。",
              "score": 30,
              "evaluation_focus": "建模细节",
              "scoring_hint": "高分：给出直线检测算法(LSD/Hough)、消失点聚类与残差最小化公式；中分：给出方法名无细节；低分：无消失点或畸变初值方案。"
            },
            {
              "sub_criteria": "语义分割与尺度锚检测模块设计（语义掩码+尺度锚）",
              "description": "说明使用预训练分割（如DeepLabv3/HRNet）与后处理（角点检测/网格拟合、轨道直线拟合、车辆模板）以产生尺度锚候选。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确网络、后处理步骤与阈值并与候选锚类型对应；中分：列出网络与少量后处理；低分：无具体分割或锚提取方法。"
            },
            {
              "sub_criteria": "单应H与尺度换算模型构建（单应H+尺度）",
              "description": "建立从像素坐标通过单应H到地面坐标的换算关系，并说明如何从锚尺寸推导像素到世界尺度因子。",
              "score": 25,
              "evaluation_focus": "几何推导",
              "scoring_hint": "高分：给出单应H估计方程、像素-世界比例推导与量纲检验；中分：给出概念性推导；低分：无数学推导或逻辑错误。"
            },
            {
              "sub_criteria": "不确定度传播与诊断量设计（不确定性）",
              "description": "构建Monte Carlo/Bootstrap或分析式误差传播流程以量化K、H与尺度锚对测量误差的影响，并设计诊断指标（重投影残差、RANSAC内点率）。",
              "score": 20,
              "evaluation_focus": "误差分析",
              "scoring_hint": "高分：给出MC/Bootstrap采样方案、样本数与诊断阈值；中分：给出方法但无参数；低分：无不确定度传播方案。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "非线性优化精化与重投影误差最小化（LM/Ceres）",
              "description": "设计以最小化重投影误差为目标的参数精化流程（使用Levenberg–Marquardt或Ceres），并给出收敛与初值策略。",
              "score": 30,
              "evaluation_focus": "求解算法",
              "scoring_hint": "高分：给出损失函数、参数化、收敛准则及重投影残差阈值（高分:残差≤2像素）；中分：选用LM/Ceres但无细节；低分：无优化或错误目标函数。"
            },
            {
              "sub_criteria": "RANSAC与鲁棒内点剔除（RANSAC）",
              "description": "说明用RANSAC剔除异常匹配并以内点比例与重投影中位数误差判断尺度锚可靠性。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：RANSAC内点率≥0.6且中位残差≤3像素；中分：内点率0.3-0.6或残差稍高；低分：内点率低或未使用RANSAC。"
            },
            {
              "sub_criteria": "尺度锚一致性检验与融合（锚一致性）",
              "description": "提出多锚一致性检验策略（交叉比对锚尺度因子、方差加权融合或放弃不一致锚）。",
              "score": 25,
              "evaluation_focus": "融合策略",
              "scoring_hint": "高分：给出加权融合算法与不一致判据(如尺度因子差异<10%)；中分：提出检验但无融合细则；低分：无多锚一致性处理。"
            },
            {
              "sub_criteria": "不确定度量化与结果稳定性验证（不确定性评估）",
              "description": "用Monte Carlo或Bootstrap估计K、H与尺度因子的协方差并报告置信区间与对关键参数的敏感性分析。",
              "score": 20,
              "evaluation_focus": "稳定性",
              "scoring_hint": "高分：给出样本数≥1000、参数置信区间并讨论敏感参数；中分：有MC但样本数小或无敏感性分析；低分：无量化或样本数极少。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "预处理与关键帧抽取代码完整性（关键帧）",
              "description": "实现读取视频/图像、提取帧率与时间戳、去噪、对比度增强与关键帧选择的可复现代码模块并提供测试示例。",
              "score": 30,
              "evaluation_focus": "代码可靠",
              "scoring_hint": "高分：提供可运行脚本、示例输入与输出且有注释；中分：代码可运行但无示例或注释；低分：代码缺失或无法运行。"
            },
            {
              "sub_criteria": "相机标定与畸变校正实现（内参/畸变）",
              "description": "实现基于直线/消失点的初值、OpenCV或Ceres精化与畸变校正函数，输出K与畸变并保存协方差。",
              "score": 25,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：实现完整流程并输出协方差文件；中分：实现标定但无协方差；低分：只实现部分步骤或错误实现。"
            },
            {
              "sub_criteria": "语义分割与尺度锚检测实现（语义掩码）",
              "description": "集成预训练分割模型或替代方法并实现地砖角点/轨道线/车辆模板检测与锚位置输出，结果可视化为掩码文件。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：分割输出与后处理稳定、掩码与锚坐标可直接使用；中分：分割结果需手工调整；低分：未实现或掩码错误。"
            },
            {
              "sub_criteria": "结果导出、日志与可复现性（诊断日志）",
              "description": "实现标准化输出格式（JSON/PNG/CSV）、诊断日志记录（重投影残差、RANSAC内点率）与复现脚本或Notebook。",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：提供完整导出与复现说明；中分：有导出但说明不全；低分：无导出或无法复现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "相机内参与畸变的结果报告与不确定度解释（相机内参）",
              "description": "报告最终K与畸变系数、重投影残差统计并解释参数不确定度对后续尺度测量的影响。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出参数值+置信区间并定量说明对距离误差的贡献；中分：给出参数值但不充分量化影响；低分：仅列数值无解释。"
            },
            {
              "sub_criteria": "尺度锚置信度与单应H的不确定度说明（尺度锚+单应）",
              "description": "展示每个候选尺度锚的位置、RANSAC内点率、置信度分数，并给出基于锚的H矩阵不确定度与一致性评估结论。",
              "score": 25,
              "evaluation_focus": "可信度评估",
              "scoring_hint": "高分：每锚给出内点率、重投影中位残差与置信区间并判断可用性；中分：提供部分指标；低分：无置信度量化。"
            },
            {
              "sub_criteria": "失败模式诊断与外部尺度建议（诊断/建议）",
              "description": "分析可能导致尺度不确定或失败的场景（无直线、镜面误导、模糊），并给出获取外部尺度（尺子、已知物高）的明确建议。",
              "score": 25,
              "evaluation_focus": "故障排查",
              "scoring_hint": "高分：列出具体失败模式并提供替代尺度采集方案；中分：指出问题类型但建议泛化；低分：无失败分析或建议。"
            },
            {
              "sub_criteria": "下游可用性与格式合规性（导出/下游）",
              "description": "验证输出能被后续几何测量模块直接使用（JSON字段齐全、掩码对齐），并举例说明如何用于距离/高度估算。",
              "score": 20,
              "evaluation_focus": "工程适配",
              "scoring_hint": "高分：输出字段与格式完全满足下游示例并附转换说明；中分：格式基本可用需少量调整；低分：格式不兼容或缺字段。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（单幅图像的平面单应与垂直消失点几何测量）旨在用一幅静态图像在已知或可估相机内参与至少一个已知真实长度的平面尺度锚下，精确计算地面平面上任意两点之间的水平距离以及图中竖直方向的物体高度，并给出误差估计；其工作范围包括（1）输入：待测单幅图像（可含EXIF焦距/传感器信息）、像素坐标或语义掩码中标注的测量关键点（例如车头、路侧边界、塔体顶端/底端等）和至少一个平面尺度锚的真实长度L_ref（例如地砖边长或轨距）；（2）预处理：若存在畸变则先基于已知内参或通过直线自标定估计并用OpenCV undistort校正图像，必要时增强对比度以利于直线/角点检测；（3）地面平面单应求解：在语义掩码或角点检测（如Harris/FAST +角点聚类）结果上提取至少四对地面平面对应点，使用DLT结合RANSAC求解平面单应矩阵H（并输出内点比率与重投影残差），若无已知内参可用则把H分解为K[r1 r2 t]并通过消失点约束或EXIF信息估计K的初值；（4）尺度定标与逆映射：利用已知尺度锚计算由像素到地面平面真实坐标的尺度因子，将图像中任意地面像素逆变换为实际平面坐标并据此计算两点间欧氏距离；（5）竖直高度测量：在图像中检测多条对应世界竖直方向的直线（LSD或Hough +线段聚类），用这些直线交点在图像上鲁棒估计竖直消失点v_y（RANSAC聚类），在已知某参考垂直高度H_ref及其图像顶底像点(y_ref_top,y_ref_base)的条件下通过投影比/相似三角关系 H_target = H_ref * ((y_top - v_y)/(y_base - v_y)) / ((y_ref_top - v_y)/(y_ref_base - v_y)) 计算目标高度；（6）不确定度评估与一致性检测：对像素定位噪声、焦距和锚长度不确定性做雅可比矩阵线性化传播或用Monte Carlo采样（扰动像素点、f和L_ref）得到测量的置信区间，同时检验单应条件数、重投影误差和消失点估计方差以判定测量可靠性；（7）实现细节与工具建议：可用OpenCV实现特征/直线检测、findHomography（RANSAC）、undistort和重投影计算，使用SVD分解与最小二乘精化单应与消失点，必要时用Ceres/LM对H与K联合非线性优化以最小化重投影误差并输出协方差估计；（8）输出要求：对每一对测量点输出实际坐标、测距或高度值以及95%置信区间、重投影残差统计和内点比率，并以条件化语句明确列出关键假设（地面共面、目标竖直于地面、镜头可用针孔模型近似等）以便结果的可解释性与复现。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在单幅图像中拟合地面平面单应与竖直消失点，利用尺度锚定标并评估不确定度，从而计算地面水平距离与物体垂直高度。",
          "expected_output": "数值报表：每对测量点的实际坐标、欧氏距离及95%置信区间；每个目标的高度及95%置信区间；单应矩阵H、竖直消失点v_y、内参K与畸变参数的估计与残差统计（内点比率、重投影误差）；条件化假设清单与诊断日志。",
          "key_inputs_constraints": "输入：单幅图像/EXIF；测量关键点像素坐标或语义掩码；至少一个平面尺度锚真实长度L_ref；可选参考垂直高度H_ref与对应像点。约束：针孔模型近似；目标竖直与地面共面假设；直线/角点可检测；像素定位噪声、L_ref与焦距存在不确定度；若无尺度锚则仅能输出相对尺度。",
          "modeling_type": "拟合+评价",
          "role_in_pipeline": "作为几何测量核心模块：在子任务1输出的去畸变影像、K与候选尺度锚基础上，拟合单应H与竖直消失点并完成尺度定标和误差评估；其结果为后续距离/高度报告与多场景任务的量化依据。前序依赖：数据预处理、内外参与尺度锚识别。后续衔接：任务1–4的具体测距/测高与决策报告。",
          "assumptions": "若缺少EXIF与标定，则通过直线消失点自标定初始化K；参考垂直高度H_ref可来自场景已知物体，如门高或层高。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别单幅图像中拟合平面单应H的核心需求",
              "description": "明确必须通过DLT+RANSAC在地面共面点上拟合单应矩阵H，并指出其对后续像素到平面坐标逆映射的关键性。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：指出H用于逆映射与尺度定标且需内点比率/残差；中分：只提求H未说明用途或鲁棒性；低分：未识别需要单应。"
            },
            {
              "sub_criteria": "识别竖直消失点v_y用于高度评估",
              "description": "指出需检测竖直线、估计v_y并使用相似三角投影比公式计算高度。",
              "score": 25,
              "evaluation_focus": "问题定位",
              "scoring_hint": "高分：给出H_target投影比公式要素齐全；中分：提到消失点但无公式；低分：用错误几何或忽略v_y。"
            },
            {
              "sub_criteria": "识别尺度锚L_ref与参考高度H_ref的角色",
              "description": "区分平面尺度锚用于水平距离定标与H_ref用于垂直高度标定，说明无锚仅相对尺度。",
              "score": 25,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：区分L_ref与H_ref并说明各自不确定度影响；中分：仅提到需要尺度；低分：混淆或未提尺度锚。"
            },
            {
              "sub_criteria": "识别不确定度评估与诊断指标",
              "description": "指出需评估像素噪声、焦距、L_ref对距离/高度CI的影响，并报告内点比率与重投影误差。",
              "score": 20,
              "evaluation_focus": "评价意识",
              "scoring_hint": "高分：提出雅可比或Monte Carlo；中分：仅口头说误差；低分：无任何误差评估。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述输入与约束（K、畸变、语义掩码）",
              "description": "准确复述需使用undistort、K初始化或来自EXIF、以及掩码/角点来源。",
              "score": 35,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：逐项列出图像/EXIF/关键点/L_ref/H_ref及前置去畸变；中分：缺1–2项；低分：复述与任务不符。"
            },
            {
              "sub_criteria": "复述输出格式与诊断（H、v_y、CI）",
              "description": "明确输出包含H、v_y、测距/测高值及95%CI、内点比率和残差统计。",
              "score": 35,
              "evaluation_focus": "结果规范",
              "scoring_hint": "高分：完整覆盖并量化CI；中分：列出结果但无CI或诊断；低分：仅给数值无结构化输出。"
            },
            {
              "sub_criteria": "边界条件复述（仅相对尺度可用）",
              "description": "正确说明无L_ref或H_ref时的可行输出范围与限制。",
              "score": 30,
              "evaluation_focus": "边界意识",
              "scoring_hint": "高分：分别说明水平/垂直的可测与否；中分：笼统表述；低分：宣称可绝对测量而无锚。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "针孔模型与小畸变假设",
              "description": "说明采用针孔投影并在undistort后剩余畸变可忽略或进入误差项。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：提剩余畸变对H条件数/残差影响；中分：仅提针孔；低分：无成像假设。"
            },
            {
              "sub_criteria": "地面共面与竖直线假设",
              "description": "清晰声明测距点共面且待测高度沿世界竖直方向。",
              "score": 30,
              "evaluation_focus": "几何约束",
              "scoring_hint": "高分：区分坡面/台阶的失效情形；中分：只提共面；低分：忽略或错误假设。"
            },
            {
              "sub_criteria": "尺度锚与参考高度可信度假设",
              "description": "量化L_ref、H_ref先验不确定度，并将其纳入传播。",
              "score": 25,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：给出数值先验或区间；中分：口头说明；低分：未考虑。"
            },
            {
              "sub_criteria": "特征可检测与RANSAC内点率阈值",
              "description": "假设可检测足够直线/角点，并设置内点率与残差阈以判定可靠性。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：给出阈值示例如内点>0.5、RMSE<2px；中分：仅提RANSAC；低分：无鲁棒性设定。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "DLT+RANSAC单应H构建与正则化",
              "description": "使用归一化DLT与RANSAC估H，报告内点比率和重投影误差；必要时用LM精化。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：提坐标归一化与LM收敛准则；中分：DLT无鲁棒性/归一化；低分：错误方法。"
            },
            {
              "sub_criteria": "竖直消失点v_y估计与线段聚类",
              "description": "基于LSD/Hough检测竖直线，RANSAC聚类求v_y并输出方差。",
              "score": 25,
              "evaluation_focus": "几何提取",
              "scoring_hint": "高分：排除非竖直的语义掩码约束；中分：估计v_y无方差；低分：缺v_y流程。"
            },
            {
              "sub_criteria": "尺度定标与逆映射到平面坐标",
              "description": "利用L_ref在平面内建立像素-世界尺度，提供从像素点到平面坐标的逆映射函数。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：说明坐标系定义与单位一致性；中分：有定标无函数接口；低分：未完成定标。"
            },
            {
              "sub_criteria": "高度投影比模型与参考高度H_ref",
              "description": "给出H_target=H_ref*((y_top−v_y)/(y_base−v_y))/...公式并说明像点选取原则。",
              "score": 20,
              "evaluation_focus": "公式正确",
              "scoring_hint": "高分：说明顶/底像点对齐同竖直线；中分：给公式无细节；低分：错误或缺失公式。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "稳健估计与RANSAC参数设置",
              "description": "合理设置RANSAC阈值、迭代次数，并报告内点统计与模型选择依据。",
              "score": 30,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：阈值与像素噪声一致(如1–3px)；中分：默认参数未解释；低分：无参数或不报告统计。"
            },
            {
              "sub_criteria": "非线性精化与收敛性",
              "description": "对H或K联合进行LM/Ceres精化，给出终止条件与残差下降曲线或指标。",
              "score": 25,
              "evaluation_focus": "优化实现",
              "scoring_hint": "高分：提供迭代次数、终止阈；中分：声明精化无细节；低分：无精化。"
            },
            {
              "sub_criteria": "不确定度传播（雅可比/Monte Carlo）",
              "description": "对像素、f、L_ref扰动进行线性化或采样，输出95%CI。",
              "score": 30,
              "evaluation_focus": "误差分析",
              "scoring_hint": "高分：两种方法择一并量化CI；中分：仅口头误差；低分：无误差传播。"
            },
            {
              "sub_criteria": "条件数与数值稳定性检查",
              "description": "检查H条件数、点集分布退化（共线/窄基线），给出缓解措施。",
              "score": 15,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：提出归一化与增加基线；中分：仅提退化；低分：忽略。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "OpenCV管线与API正确性（undistort/findHomography/LSD）",
              "description": "正确调用undistort、findHomography(RANSAC)、LSD/Hough并处理返回状态与掩码。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：检查失败分支与掩码；中分：能跑但无错误处理；低分：API误用。"
            },
            {
              "sub_criteria": "数据结构与接口（像素↔平面逆映射函数）",
              "description": "提供清晰函数将像素点批量映射到平面坐标并返回单位一致的结果。",
              "score": 25,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：矢量化/批处理；中分：零散实现；低分：无可复用接口。"
            },
            {
              "sub_criteria": "鲁棒性与参数化（RANSAC阈值、迭代、L_ref/H_ref输入）",
              "description": "可配置参数并有合理默认值与边界检查。",
              "score": 20,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：参数校验与日志；中分：可调但无校验；低分：硬编码。"
            },
            {
              "sub_criteria": "不确定度评估实现（雅可比或Monte Carlo）",
              "description": "实现误差传播并输出95%CI与种子可复现性。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：固定随机种子/报告样本数≥500；中分：实现但无复现控制；低分：未实现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "重投影残差与内点比率解读",
              "description": "分析残差统计与内点比率对测距/测高可靠性的影响并做阈值判定。",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给阈值示例如RMSE<2px且内点>60%；中分：定性描述；低分：不分析。"
            },
            {
              "sub_criteria": "敏感性与CI解读（像素噪声/焦距/L_ref）",
              "description": "量化不同误差源对最终CI的贡献并指出主导因素。",
              "score": 25,
              "evaluation_focus": "误差拆解",
              "scoring_hint": "高分：贡献排序或条形图说明；中分：笼统说明；低分：未区分来源。"
            },
            {
              "sub_criteria": "一致性与物理可行性检查",
              "description": "检验高度/距离是否与场景常识一致（如地砖80cm倍数、车辆尺寸范围）。",
              "score": 25,
              "evaluation_focus": "常识校验",
              "scoring_hint": "高分：列出参考范围并标注异常；中分：仅口头；低分：无检查。"
            },
            {
              "sub_criteria": "边界情况与改进建议",
              "description": "指出退化视角、少特征、镜面等导致失败的原因与改进（增加锚、更多角点）。",
              "score": 25,
              "evaluation_focus": "改进思路",
              "scoring_hint": "高分：提出具体可操作改进；中分：泛泛建议；低分：未讨论。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（视频时序结构—运动恢复与速度估计）旨在利用单目视频序列在时间域内恢复相机相对位姿与场景三维结构并据此估算相机与场景中刚体的速度，输出包括随时间的相机位姿轨迹（相机中心在三维空间的位置，若提供尺度锚则为公制坐标）、三维稀疏点云、各时刻的速度向量及其不确定度估计；其输入为原始视频文件（或按帧提取的图像序列）、帧率信息、（可选）相机内参初值或标定结果以及（可选）尺度先验或外部遥测（IMU/GNSS/已知物距），工作范围限定为单目视觉测量与基于视觉的尺度定标融合。实现步骤为：1) 预处理——按帧提取与去畸变（若内参可用），并按需做基础去噪与曝光一致化；2) 特征建立与跟踪——在每帧检测局部不变特征（如 SIFT/ORB）并用描述子匹配或稠密/稀疏光流（KLT/TV-L1）建立跨帧对应，过滤重复与不可靠点；3) 两帧几何估计与筛选——采用八点法/五点法联合 RANSAC 求解基础矩阵/本质矩阵并剔除外点；4) 相对位姿恢复与三角化——由本质矩阵分解得到相对旋转 R 和方向性平移 t，使用多视角三角化为初始稀疏三维点云；5) 时域优化（滑动窗口 Bundle Adjustment）——在滑动时间窗口内同时优化若干帧的相机位姿与三维点以最小化重投影误差，优化中可加入尺度约束项（来自已知距离、地面平面单应或外部传感器）以恢复绝对尺度，使用鲁棒损失函数（Huber/Tukey）和非线性求解器（如 Ceres/g2o）；6) 速度计算与平滑——由相邻关键帧或优化后相机中心轨迹差分获得瞬时速度，或对特定三维点轨迹求导得到物体速度，并使用卡尔曼滤波或鲁棒平滑器对速度序列降噪与融合外部速率测量；7) 异常情形处理——对动态场景或多刚体运动进行运动分割以隔离静态背景用于位姿估计，对滚动快门和运动模糊采用对应模型（逐行时间校正或局部时间偏移参数化）并在优化中联合估计；8) 不确定性量化——通过优化后Hessian逆近似估计参数协方差或以蒙特卡洛像素扰动/内参扰动重复优化得到速度与位姿的置信区间；9) 输出与诊断——导出时间序列位姿、稀疏点云、速度数值及其置信区间、重投影残差统计与内点比率以供验证。建议采用的工具与算法组件包括 OpenCV（帧处理、特征检测/匹配、光流、基本矩阵求解）、Ceres/g2o（非线性优化与滑动窗口 BA）、可选的 SfM 软件（COLMAP）用于初始稀疏重建，以及标准匹配器（FLANN/BF）、描述子（SIFT/ORB）和滤波器（Kalman/TS）。",
      "criteria": {
        "task_understanding": {
          "core_goal": "通过单目视频拟合与优化方法恢复相机位姿、生成三维稀疏点云并估算相机及场景刚体的速度（含不确定度评估）",
          "expected_output": "随时间的相机位姿轨迹（相机中心三维坐标序列，若有尺度锚为公制）、三维稀疏点云、每帧/目标速度向量及95%置信区间、重投影残差统计、RANSAC内点比率与诊断日志（机器可读文件+可视化图表）",
          "key_inputs_constraints": "1) 输入视频文件（帧率/时间戳/分辨率/可选EXIF或内参）; 2) 可选尺度锚或外部测量（轨距、地面单应、GNSS/IMU），若无则仅得相对尺度; 3) 假设存在可追踪特征点且背景静态或可分割，动态多刚体需能做运动分割; 4) 摄像头近似针孔模型或已做去畸变。",
          "modeling_type": "拟合+预测（几何拟合为主，速度预测/估计为继）",
          "role_in_pipeline": "作为时序几何恢复与运动估算子模块：依赖子任务1的数据预处理/内外参与尺度锚输出（去畸变影像、K、尺度候选、语义掩码），为后续速度分析与场景量测（任务2/3/4）提供位姿、点云与速度；下游依赖姿态/速度输出进行尺度定标、尺寸与速度最终报告。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并明确“恢复相机位姿”和“估算速度”的目标与量化指标",
              "description": "检查是否明确将任务表述为“恢复相机位姿、生成三维稀疏点云并估算速度及不确定度”，并给出评价指标（如重投影误差、速度相对误差、置信区间覆盖率）。",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确列出重投影误差、速度误差和置信区间指标并给出目标数值（例如重投影≤1px、速度误差≤5%）；中分：列出指标但未给可量化阈值；低分：未明确恢复相机位姿或未给任何量化指标。"
            },
            {
              "sub_criteria": "识别尺度锚与外部传感器融合需求（若无尺度则声明仅相对尺度）",
              "description": "评价是否识别尺度来源（地面单应、轨距、IMU/GNSS）并说明无尺度时的限制与替代策略（相对尺度或后续标定）。",
              "score": 30,
              "evaluation_focus": "问题识别",
              "scoring_hint": "高分：明确列出可用尺度锚并说明如何在BA中加入尺度约束；中分：识别尺度重要性但未给融合方法；低分：未提及尺度或未说明结果的尺度类型（绝对/相对）。"
            },
            {
              "sub_criteria": "识别视频异常情形（动态物体、滚动快门、运动模糊）并提出处理策略",
              "description": "检查是否识别动态场景/多刚体、滚动快门与模糊对位姿恢复的影响并提出运动分割、滚动快门参数化或去模糊等对策。",
              "score": 30,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：列出异常情形并给出对应算法（运动分割、逐行时间校正、加权BA）；中分：识别问题但仅笼统建议；低分：未识别或忽视动态/滚动快门风险。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述“恢复相机位姿、三维稀疏点云”要输出的具体格式与度量",
              "description": "检查是否复述要输出的位姿格式（四元数/旋转矩阵+平移）、点云坐标系（相对或公制）、时间戳和重投影残差统计的定义与单位。",
              "score": 40,
              "evaluation_focus": "表达能力",
              "scoring_hint": "高分：准确说明输出文件格式、坐标系、公制/相对尺度及残差计算方法；中分：部分说明但有歧义；低分：输出格式或坐标含糊无法复现。"
            },
            {
              "sub_criteria": "复述速度估算的目标（相机速度与场景刚体速度）及不确定度评估方法",
              "description": "检查是否区分相机中心速度与被测物体速度，并说明置信区间计算方法（Hessian逆、MC采样或卡尔曼滤波融合）。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确速度定义（m/s）并指明不确定度量化方法；中分：提及不确定度但未说明实现细节；低分：未区分速度类型或未提及不确定度。"
            },
            {
              "sub_criteria": "复述对前序依赖（去畸变、K、尺度锚）和输出可视化/诊断的需求",
              "description": "检查是否说明依赖子任务1输出（去畸变影像、K、尺度锚、语义掩码）以及要产出的诊断（内点比率、重投影分布、轨迹可视化）。",
              "score": 30,
              "evaluation_focus": "工程意识",
              "scoring_hint": "高分：完整列出前序依赖与诊断项并能映射到输出文件；中分：列出部分依赖或诊断；低分：未列依赖或诊断项缺失。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确假设相机模型为针孔且已做畸变校正",
              "description": "检查是否声明使用针孔相机模型并说明去畸变步骤或内参不确定性对结果的影响评估方法。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：说明已去畸变或在优化中估计畸变并量化影响（例如通过MC）；中分：声明针孔模型但未处理畸变；低分：未声明相机模型或忽视畸变。"
            },
            {
              "sub_criteria": "声明场景中存在可追踪静态特征或能进行运动分割",
              "description": "检查是否假设足够的静态特征用于位姿恢复，或在动态场景中提出运动分割策略以隔离静态背景。",
              "score": 25,
              "evaluation_focus": "可行性",
              "scoring_hint": "高分：给出最小特征点数/帧、轨迹长度要求或运动分割方法；中分：笼统说明需要静态特征；低分：未说明或不现实的假设。"
            },
            {
              "sub_criteria": "假设帧率时间戳可靠且可用于速度标定",
              "description": "检查是否声明使用视频帧率/时间戳来从位姿序列导出速度，并说明对不准确帧率的容错或校正方法。",
              "score": 25,
              "evaluation_focus": "时序处理",
              "scoring_hint": "高分：验证/校正时间戳并描述插值或去抖策略；中分：使用帧率但未校验；低分：忽略帧率或时间基准问题。"
            },
            {
              "sub_criteria": "声明尺度相关假设（可得绝对尺度或仅相对尺度）",
              "description": "检查是否明确给出尺度可用性假设，并说明在无尺度时结果为相对尺度及如何后续标定为绝对尺度。",
              "score": 25,
              "evaluation_focus": "尺度假设",
              "scoring_hint": "高分：明确绝对尺度来源或量化相对尺度限制；中分：提到尺度但无应对策略；低分：未讨论尺度影响。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "使用特征跟踪与两帧本质矩阵求解以“恢复相机位姿”",
              "description": "评价是否采用SIFT/ORB或光流建立跨帧对应，并使用五点/八点法+RANSAC求解本质或基础矩阵以恢复相对位姿R,t（含内点统计）。",
              "score": 40,
              "evaluation_focus": "方法选择",
              "scoring_hint": "高分：实现稳健特征跟踪并报告RANSAC内点比率>60%、重投影中位数≤1px；中分：FIFO特征或内点比率50%上下；低分：匹配不稳或无RANSAC/内点统计。"
            },
            {
              "sub_criteria": "在滑动窗口 Bundle Adjustment 中加入尺度约束以稳定“三维稀疏点云”",
              "description": "检查是否在滑动窗口BA中联合优化若干帧的位姿与三维点并将尺度锚/平面单应/外部测量作为约束项纳入优化。",
              "score": 35,
              "evaluation_focus": "非线性优化",
              "scoring_hint": "高分：实现滑动窗口BA并成功加入尺度项使尺度误差≤5%；中分：实现BA但未纳入尺度约束；低分：未使用BA或BA失败导致发散。"
            },
            {
              "sub_criteria": "构建速度估计与平滑模型（差分/卡尔曼或轨迹求导）以“估算速度”",
              "description": "评价是否对相机中心或三维点轨迹做差分并用卡尔曼/鲁棒平滑器降低噪声，或直接在优化中加入速度状态变量。",
              "score": 25,
              "evaluation_focus": "时序估计",
              "scoring_hint": "高分：使用卡尔曼/平滑器并给出速度置信区间（误差≤5%）；中分：仅差分无滤波；低分：仅逐帧差分且噪声大、无置信度。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "两帧几何估计与RANSAC求解本质矩阵并输出内点比率与重投影残差",
              "description": "评价两帧几何求解实现质量，包括五点/八点法、RANSAC参数与内点统计，及重投影残差的分布说明。",
              "score": 30,
              "evaluation_focus": "几何鲁棒性",
              "scoring_hint": "高分：RANSAC内点比率>60%且重投影中位数≤1px；中分：内点比率在40%–60%或中位残差1–3px；低分：内点<40%或残差>3px/未报告。"
            },
            {
              "sub_criteria": "滑动窗口 Bundle Adjustment 的收敛性与尺度约束求解精度",
              "description": "检查BA在滑动窗口内是否收敛、重投影误差降低幅度、是否纳入尺度约束及最终尺度误差评估（与尺度锚比对）。",
              "score": 40,
              "evaluation_focus": "数值求解",
              "scoring_hint": "高分：BA收敛且重投影误差从>3px降至≤1px、尺度误差≤5%；中分：误差降幅有限或尺度误差5%–15%；低分：BA发散或无显著误差改善。"
            },
            {
              "sub_criteria": "不确定度量化（Hessian近似或Monte Carlo）并输出速度置信区间",
              "description": "评价是否通过Hessian逆近似或像素/内参扰动的Monte Carlo重复优化给出速度与位姿的置信区间并报告方法细节。",
              "score": 30,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：提供95%置信区间且速度误差置信宽度≤5%或明确给出MC样本数；中分：给出不确定度但计算粗糙；低分：无不确定度估计或估计不可信。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "实现去畸变、帧提取与特征跟踪管线并能复现“恢复相机位姿”过程",
              "description": "代码应实现去畸变（若内参存在）、帧提取、特征检测/描述/匹配或光流跟踪，并提供重现步骤及示例命令。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：代码可运行、含README、复现示例并产出位姿与点云；中分：代码可运行但需手动调整参数；低分：代码不可运行或仅伪代码。"
            },
            {
              "sub_criteria": "使用成熟优化库（如Ceres/g2o）实现滑动窗口BA并产出诊断信息",
              "description": "检查是否调用Ceres/g2o等非线性求解器实现BA，输出优化步数、初始与最终重投影误差、Hessian或协方差信息。",
              "score": 40,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：集成Ceres/g2o并记录优化日志与协方差；中分：自实现优化但无协方差；低分：未实现BA或仅调用黑箱无诊断。"
            },
            {
              "sub_criteria": "输出机器可读格式（位姿csv、点云ply、速度json）与可视化工具",
              "description": "代码应导出位姿、点云、速度与不确定度为标准格式，并提供基本可视化（轨迹图、速度曲线、重投影可视化）。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：提供标准文件输出与可视化脚本；中分：仅部分输出或需额外处理；低分：输出非标准或无可视化。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "分析并展示重投影残差与RANSAC内点比率以验证“恢复相机位姿”质量",
              "description": "提供重投影误差分布图（直方图/箱线图）与RANSAC内点比率随时间变化图，解释异常帧并给出改进建议。",
              "score": 30,
              "evaluation_focus": "诊断分析",
              "scoring_hint": "高分：提供残差统计（均值/中位数/95分位）并解释异常帧；中分：仅给平均残差或内点比率；低分：未提供残差或无解释。"
            },
            {
              "sub_criteria": "评估并验证速度估算与其不确定度（与尺度锚或外部测量比对）",
              "description": "提供速度曲线、置信区间及与尺度锚/IMU/GNSS（若有）或基准估计的误差对比，并讨论误差来源。",
              "score": 25,
              "evaluation_focus": "结果校验",
              "scoring_hint": "高分：速度误差≤5%且置信区间覆盖基准；中分：误差5%–15%或部分覆盖；低分：误差>15%或无对比验证。"
            },
            {
              "sub_criteria": "评估三维稀疏点云质量与尺度一致性",
              "description": "检查点云点密度、点的深度分布、与尺度锚匹配后的尺度误差，并给出点云在场景关键区的可用性评估（例如轨道、道路）。",
              "score": 25,
              "evaluation_focus": "几何质量",
              "scoring_hint": "高分：点云覆盖关键区域且尺度误差≤10%、无明显错配；中分：点云稀疏或局部尺度误差10%–20%；低分：点云噪声大或尺度不一致。"
            },
            {
              "sub_criteria": "提供异常诊断日志并给出改进建议（如增加尺度锚、改进特征检测）",
              "description": "输出包含帧级诊断（低内点、跳跃速度、模糊检测）的日志并针对主要失效提出可行改进措施与优先级排序。",
              "score": 20,
              "evaluation_focus": "可改进性",
              "scoring_hint": "高分：提供详尽帧级诊断与具体优先级改进建议；中分：列出问题与一般性建议；低分：无诊断或建议空泛不可操作。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（稠密重建与无人机航拍测量与验证融合）旨在从无人机影像序列生成可度量的三维表征并用其计算道路长度与宽度、各建筑物与树木高度、占地面积以及无人机飞行高度与速度，并对结果进行度量不确定性评估与交叉验证；其工作范围包括：输入——原始影像或视频（按帧抽取的影像序列）、帧率与时间戳及任何可用的影像元数据/遥测（EXIF焦距、GPS/高度/航向/IMU）；预处理——按合适间隔抽取关键帧、进行相机畸变校正与颜色一致化、剔除模糊帧并记录每帧的时间戳；稠密重建流程——用结构自运动(SfM)工具（例如COLMAP/VisualSFM）进行特征检测、匹配与多视几何求解以恢复相机内外参与稀疏点云，随后用多视深度估计/多视立体(MVS)方法（例如OpenMVS、PMVS或PatchMatch）生成稠密点云并通过法线估计与滤波（统计离群点剔除与体素下采样）清理点云；尺度与地理配准——若存在GPS/遥测则直接用于尺度和地理位姿定标，否则通过图像中已知尺寸的尺度锚（道路宽度、车辆或地面标识）或地面控制点在稀疏点云上执行尺度因子拟合与刚体变换以获得公制坐标系；地面建模与要素提取——用RANSAC拟合地面/路面平面并生成数字地面模型(DTM)与数字表面模型(DSM)（从稠密点云栅格化得到），用语义分割或基于点云的聚类（例如用预训练的DeepLab/Mask R-CNN对影像进行语义分割，或用点云法线与高度特征分割建筑、树木、道路）提取道路边界、建筑轮廓与树冠；几何量化——在地面平面坐标系上通过投影和多边形几何计算道路中心线长度、道路宽度统计（沿中心线测量多点截面距离）、各建筑物占地多边形及其投影面积，建筑与树木高度由DSM与DTM的高度差（或点云在竖直方向的最大值减地面值）计算，所有测量均在定标尺度下以米为单位输出；无人机飞行高度与速度——通过求解每个关键帧的相机中心到拟合地面平面的垂直距离得到瞬时飞行高度，速度通过关键帧相机中心位置关于时间的差分或直接利用遥测速度数据计算并用平滑滤波（卡尔曼或低通滤波）降低噪声；误差估计与验证——利用重投影残差与BA后位姿协方差估计测量不确定性，采用Monte Carlo像素扰动或尺度锚扰动评估对最终几何量的敏感性，并用多源交叉验证（如用道路宽度与车辆尺寸互检或用已知地物检测结果比较遥测）识别系统性偏差；输出工件——经清理的稠密点云（PLY/LAZ）、DSM/DTM栅格、正射影像（GeoTIFF）、建筑/道路/树木的矢量多边形与测量表（含95%置信区间）、相机位姿时间序列与飞行速度剖面、处理日志与质量指标（点云密度、重投影误差、内点比率）；建议工具链包括COLMAP或相应SfM软件、OpenMVS/PMVS或PatchMatch MVS、OpenCV（预处理）、Ceres/g2o（可选的非线性优化）、PCL/PDAL用于点云处理、GDAL/OGR或Shapely用于栅格/矢量操作，以及深度学习语义分割模型用于要素提取；在没有遥测的情形下，明确要求至少一个可靠的尺度锚或地面控制点以输出公制测量并在报告中给出基于该锚的不确定性评估。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于无人机影像序列进行稠密重建与尺度/地理配准，拟合地面/表面模型并评估不确定性，从而量化道路长度与宽度、建筑与树木高度、占地面积以及无人机飞行高度与速度并交叉验证。",
          "expected_output": "稠密点云(PLY/LAZ)、DSM/DTM栅格、正射影像(GeoTIFF)、道路/建筑/树木矢量多边形与测量表（含95%置信区间）、相机位姿与飞行速度时间序列、质量指标与处理日志。",
          "key_inputs_constraints": "输入：无人机视频/影像序列、帧率与时间戳、EXIF/GPS/IMU（若有）；约束：需至少一个公制尺度锚或GPS用于尺度定标；影像需足够重叠（≥60/80%）；相机畸变可被校正；动态物体与模糊帧需剔除或降权。",
          "modeling_type": "拟合+评价",
          "role_in_pipeline": "作为终端几何重建与测量环节：前序依赖子任务1的内外参初值/尺度锚与语义掩码，子任务3的时序位姿/速度先验；后序为整体验证与应用报告汇总。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "稠密重建与尺度配准目标界定",
              "description": "是否明确本任务需完成SfM+MVS生成稠密点云，并通过GPS或尺度锚进行公制尺度与地理配准以支持后续测量。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚区分稀疏/稠密与尺度定标作用；中分：只提重建未提尺度；低分：混淆重建与分割或忽略尺度。"
            },
            {
              "sub_criteria": "测量对象与指标列举",
              "description": "是否完整识别道路长度/宽度、建筑/树木高度、占地面积、无人机飞行高度与速度及其95%置信区间。",
              "score": 25,
              "evaluation_focus": "需求把握",
              "scoring_hint": "高分：逐项列出并关联输出格式；中分：缺少1–2项或未提置信区间；低分：仅泛称“测量”。"
            },
            {
              "sub_criteria": "不确定性与交叉验证需求",
              "description": "是否将重投影残差、BA协方差、Monte Carlo敏感性与多源交叉验证纳入问题定义。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：点名残差统计与MC；中分：只提误差未给方法；低分：无误差与验证。"
            },
            {
              "sub_criteria": "数据与约束条件识别",
              "description": "是否指出帧率/时间戳、重叠度、畸变校正、模糊帧剔除、动态物体影响等关键前置条件。",
              "score": 20,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：列出≥4项并说明影响；中分：提2–3项；低分：未识别关键条件。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "SfM/MVS与输出制品对齐",
              "description": "复述中是否具体到COLMAP/OpenMVS流程、点云清理与生成DSM/DTM/正射影像及矢量成果。",
              "score": 30,
              "evaluation_focus": "表达严谨",
              "scoring_hint": "高分：流程-制品逐一映射；中分：流程或制品缺漏；低分：抽象描述。"
            },
            {
              "sub_criteria": "尺度与地理配准路径",
              "description": "清晰复述GPS/IMU直配准或尺度锚/地面控制点刚体拟合的两条路径与适用条件。",
              "score": 30,
              "evaluation_focus": "逻辑清晰",
              "scoring_hint": "高分：两路径皆述及条件；中分：仅述其一；低分：未说明。"
            },
            {
              "sub_criteria": "无人机高度与速度求取",
              "description": "是否复述“相机中心到地面平面距离”为高度、“位姿差分/遥测”为速度并提及平滑滤波。",
              "score": 20,
              "evaluation_focus": "要点抓取",
              "scoring_hint": "高分：含高度定义与速度平滑；中分：只述其一；低分：偏离定义。"
            },
            {
              "sub_criteria": "误差与诊断输出",
              "description": "是否复述重投影误差、内点比率、点云密度等质量指标需要输出。",
              "score": 20,
              "evaluation_focus": "结果要求",
              "scoring_hint": "高分：列举≥3个指标；中分：1–2个；低分：未提。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "地面平面与DSM/DTM可分假设",
              "description": "明确假设局部地面可由RANSAC平面拟合，DSM-DTM可代表建筑/树木高度差。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：同时限定适用场景（缓坡/遮挡处理）；中分：仅提平面；低分：无说明。"
            },
            {
              "sub_criteria": "相机模型与畸变处理假设",
              "description": "假设针孔模型适用，畸变经Brown–Conrady校正后残差可忽略并在误差传播中考虑。",
              "score": 25,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：点名残差纳入不确定性；中分：只提针孔；低分：未提模型。"
            },
            {
              "sub_criteria": "尺度锚/遥测可信度与冗余",
              "description": "对GPS/IMU或尺度锚的精度与缺失情况的先验设定与冗余校核（交叉验证）。",
              "score": 25,
              "evaluation_focus": "风险控制",
              "scoring_hint": "高分：含缺失回退策略；中分：仅精度设定；低分：忽略来源可信度。"
            },
            {
              "sub_criteria": "时序稳定与重叠覆盖",
              "description": "假设图像重叠满足SfM要求、运动模糊可被筛除或弱化，不满足时提出降级方案。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：给出重叠阈值或筛选准则；中分：笼统陈述；低分：无假设与策略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "SfM/BA与位姿协方差建模",
              "description": "构建包含相机位姿与3D点的BA目标函数，使用鲁棒损失并给出Hessian逆近似协方差获取不确定性。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确误差模型与协方差获取；中分：仅BA无不确定性；低分：只调用黑盒。"
            },
            {
              "sub_criteria": "MVS与点云滤波管线",
              "description": "设计PatchMatch/PMVS生成稠密点云，并含统计离群剔除与体素下采样、法线估计细节。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：阐明关键超参与质量影响；中分：给方法无参数；低分：未到稠密层。"
            },
            {
              "sub_criteria": "尺度/地理配准与刚体变换拟合",
              "description": "通过GPS/控制点最小二乘/Procrustes拟合尺度与SE(3)变换，或用单尺度锚估尺度并量化传播。",
              "score": 25,
              "evaluation_focus": "几何建模",
              "scoring_hint": "高分：给出加权与置信度处理；中分：仅刚体拟合；低分：未建模误差传播。"
            },
            {
              "sub_criteria": "DSM/DTM构建与要素提取",
              "description": "点云栅格化生成DSM/DTM，结合语义分割/聚类提取道路边界、建筑轮廓与树冠。",
              "score": 20,
              "evaluation_focus": "场景理解",
              "scoring_hint": "高分：结合影像语义与点云特征；中分：仅阈值法；低分：未构建地表模型。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "特征匹配与RANSAC稳健性",
              "description": "采用SIFT/ORB与RANSAC/E/F估计剔除外点，报告内点率与重投影残差。",
              "score": 25,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：提供内点率≥50%与残差统计；中分：仅匹配；低分：无外点控制。"
            },
            {
              "sub_criteria": "滑动窗口BA与收敛诊断",
              "description": "执行滑动窗口BA，报告迭代次数、终止条件、均方重投影误差与异常帧处理。",
              "score": 25,
              "evaluation_focus": "数值优化",
              "scoring_hint": "高分：收敛曲线与鲁棒损失；中分：只跑BA；低分：无诊断或发散。"
            },
            {
              "sub_criteria": "高度与速度计算与平滑",
              "description": "从相机中心到地面平面求飞行高度，位姿差分求速度并用卡尔曼/低通平滑。",
              "score": 25,
              "evaluation_focus": "几何计算",
              "scoring_hint": "高分：给出窗口与噪声参数；中分：仅差分；低分：计算不当或未平滑。"
            },
            {
              "sub_criteria": "Monte Carlo敏感性与置信区间",
              "description": "对像素/尺度锚/GPS噪声采样，输出道路长度/宽度与高度/面积等95%CI。",
              "score": 25,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：≥1000次采样并报告CI；中分：少量采样或仅线性传播；低分：无量化。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "工具链集成与可复现",
              "description": "可运行脚本串联COLMAP→OpenMVS→PCL/GDAL，参数外置，固定随机种子与日志记录。",
              "score": 30,
              "evaluation_focus": "工程能力",
              "scoring_hint": "高分：一键管线与配置文件；中分：分散脚本；低分：手工步骤依赖。"
            },
            {
              "sub_criteria": "数据预处理与质量控制代码",
              "description": "实现畸变校正、模糊帧剔除、曝光一致化与重叠检测，生成诊断图表。",
              "score": 25,
              "evaluation_focus": "数据管道",
              "scoring_hint": "高分：含阈值与报告；中分：部分实现；低分：缺失关键环节。"
            },
            {
              "sub_criteria": "要素提取与几何计算实现",
              "description": "道路中心线提取、宽度剖面计算、建筑/树木高度与占地面积计算代码健壮且可批处理。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：边界情况处理与单元测试；中分：基本可跑；低分：易崩溃或手工依赖。"
            },
            {
              "sub_criteria": "不确定性评估与可视化",
              "description": "实现重投影残差统计、CI可视化、速度高度剖面图与质量指标导出。",
              "score": 20,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：图表完备可交互/批量输出；中分：少量图；低分：仅数值无图。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "重建质量与残差解读",
              "description": "分析重投影误差、内点比率、点云密度与覆盖，解释潜在系统误差来源。",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化并定位问题区域；中分：宏观描述；低分：无分析。"
            },
            {
              "sub_criteria": "几何量与不确定性报告",
              "description": "对道路长度/宽度、建筑/树木高度、占地面积、飞行高度与速度给出数值与95%CI。",
              "score": 25,
              "evaluation_focus": "报告质量",
              "scoring_hint": "高分：表格+单位一致；中分：部分缺失或无CI；低分：仅定性。"
            },
            {
              "sub_criteria": "交叉验证与外部基准比对",
              "description": "使用道路标准宽度、车辆尺寸或遥测速度等进行互检并量化偏差。",
              "score": 25,
              "evaluation_focus": "验证能力",
              "scoring_hint": "高分：≥2种外部基准与误差统计；中分：一种基准；低分：无比对。"
            },
            {
              "sub_criteria": "稳健性与改进建议",
              "description": "针对动态物体、纹理贫乏、尺度锚缺失等情形提出可操作的改进与再实验计划。",
              "score": 25,
              "evaluation_focus": "改进思路",
              "scoring_hint": "高分：具体到参数/采集策略；中分：笼统建议；低分：无建议。"
            }
          ]
        }
      }
    }
  }
}