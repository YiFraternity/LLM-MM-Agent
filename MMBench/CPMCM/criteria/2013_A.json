{
  "task_id": "2013_A",
  "problem": "2 变循环发动机部件建模法\n\n燃气涡轮发动机的特性可以用实验方法和计算方法获得。但实验的方法需要研制复杂的设备、投入巨额的资金和消耗巨大的能源，因此实验的方法不可能经常采用。\n\n随着计算能力的不断提高，发动机数学模型研究的不断深入，计算机仿真精度也在不断提高，一定程度上弥补了实验方法的不足，尤其是在发动机型号研制过程中，燃气涡轮发动机计算机仿真技术发挥了不可替代的作用。\n\n燃气涡轮发动机是由进气道、压气机、主燃烧室、涡轮、喷管等部件组成的。如果计算机能够对这些部件的性能进行准确的模拟，那么也就能准确地模拟整个发动机的性能。这种建立在准确模拟发动机各部件性能基础上的发动机性能计算方法，称为部件法。该方法是建立在发动机各部件特性已知的基础上的，因此是计算精度较高的一种方法。附录1分别对变循环发动机每个部件的计算公式进行了逐一介绍。\n\n发动机平衡方程\n\n发动机各部件匹配工作时，受如下7个平衡方程制约。\n\n低压轴功率平衡：\n\n\\[\nN_{CL} - N_{TL} \\eta_{mL} = 0 \\tag{1}\n\\]\n\n其中，\\(N_{CL}\\) 是风扇消耗功率，\\(N_{TL}\\) 是低压涡轮发出功率，\\(\\eta_{mL} = 0.99\\) 为中间轴机械效率。\n\n2）高压轴功率平衡：\n\n\\[\nN_{CH} + N_{CDFS} - N_{TH}\\eta_{mH} = 0 \\tag{2}\n\\]\n\n\\(N_{CH}\\) 和 \\(N_{CDFS}\\) 分别是高压压气机和CDFS的消耗功率，\\(N_{TH}\\) 是高压涡轮发出功率，\\(\\eta_{mH} = 0.99\\) 是高速轴的机械效率。\n\n3）高压涡轮进口截面流量平衡：\n\n\\[\nW_{g41} - W'_{g41} = 0 \\tag{3}\n\\]\n\n\\(W_{g41}\\) 是高压涡轮进口截面气体流量，即主燃烧室出口气体流量和冷却空气流量，\\(W'_{g41}\\) 是通过高压涡轮特性数据线性插值得到的高压涡轮流量，这里忽略冷却的空气流量。\n\n4）低压涡轮进口截面流量平衡：\n\n\\[\nW_{g45} - W'_{g45} = 0 \\tag{4}\n\\]\n\n\\(W_{g45}\\) 是低压涡轮进口截面流量，由主燃烧室出口气体流量和冷却空气流量计算得到，\\(W'_{g45}\\) 是通过低压涡轮特性数据线性插值得到的低压涡轮流量，这里忽略冷却的空气流量。\n\n5）后混合器静压平衡：\n\n\\[\np_{61} - p_{62} = 0 \\tag{5}\n\\]\n\n\\(p_{61}\\) 和 \\(p_{62}\\) 分别是后混合器内、外涵道（主外涵道）的静压，二者应平衡。后混合器见图2的6截面。\n\n6）尾喷管面积平衡：\n\n\\[\nA_{4} - A'_{4} = 0 \\tag{6}\n\\]\n\n\\(A_{4}\\) 为给定的尾喷管8截面的面积，这里 \\(A_{4} = 9.4575 \\times 10^{3}\\)，\\(A'_{4}\\) 为按附录1尾喷管的有关公式计算出的尾喷管8截面的面积，二者应相等。\n\n7）风扇出口流量平衡：\n\n\\[\nW_{a2} - W_{a21} - W_{a13} = 0 \\tag{7}\n\\]\n\n其中风扇出口的流量 \\(W_{a2}\\) 分流为副外涵道流量 \\(W_{a13}\\) 和CDFS进口流量 \\(W_{a21}\\)，二者之间应存在平衡关系。副外涵道流量 \\(W_{a13}\\) 是按照1中前混合器的有关公式式计算出的。\n\n方程（1），（2），（3），（4），（5），（6），（7）中的变量 \\(N_{CL}, N_{TL}, N_{CH}, N_{CDFS}, N_{TH}, W_{g41}, W'_{g41}, W_{g45}, W'_{g45}, p_{61}, p_{62}, A_{4}, A'_{4}, W_{a2}, W_{a21}, W_{a13}\\) 各量可分别由附录1中的公式转化为表3.1所列12个设计中需要给出的发动机各部件参数的函数。\n\n表3.1 发动机参数说明\n\n\\begin{table}[h]\n\\centering\n\\begin{tabular}{|c|c|}\n\\hline\n试给参数 & 说明 \\\\  \n\\hline\n低压转速（风扇、低压涡轮物理转速） & 高压涡轮压比函数值 \\\\  \n高压转速（高压压气机、CDFS、高压涡轮物理转速） & 低压涡轮压比函数值 \\\\  \n风扇压比函数值 & 风扇导叶角 \\\\  \nCDFS压比函数值 & CDFS导叶角 \\\\  \n高压压气机压比函数值 & 高压压气机导叶角 \\\\  \n主燃烧室出口温度 & 低压涡轮导叶角 \\\\  \n\\hline\n\\end{tabular}\n\\end{table}\n\n4 要解决的问题\n\n请你们完成以下几个问题：\n\n二、1）请画出附录4中风扇特性数据表中流量随压比函数值变化的图形。  \n2）设在发动机飞行高度 \\(H = 11\\, km\\)，飞行马赫数 \\(Ma = 0.8\\) 的亚音速巡航点，导叶角度均设置为 \\(0^\\circ\\)，风扇和CDFS的物理转速都为 \\(0.95\\)，风扇和CDFS的压比函数值都为 \\(0.5\\)，求风扇和CDFS的出口总温、总压和流量。\n\n二、设在发动机飞行高度 \\(H = 11\\, km\\)，飞行马赫数 \\(Ma = 0.8\\) 的亚音速巡航点，采用双涵道模式，导叶角度均设置为 \\(0^\\circ\\)，选择活门完全打开，副外涵道面积取为 \\(1.8395e+003\\)，后混合器出口总面积设置为 \\(2.8518e+004\\)，尾喷管喉道面积 \\(A_{8} = 9.5544e+003\\)，\\(n_{t} = 0.85\\)。  \n请运用或设计适当的算法求解由发动机7个平衡方程（1），（2），（3），（4），（5），（6），（7）组成的非线性方程组。要求陈述算法的关键步骤及其解释，尽可能讨论算法的有效性。\n\n如果你们队还有时间，请研究下面的问题：\n\n三、1）设在发动机飞行高度 \\(H = 11\\, km\\)，飞行马赫数 \\(Ma = 1.5\\) 的超音速巡航点，发动机采用单涵道模式，将选择活门面积设置为0，风扇导叶角度、高压压气机导叶角度、高压涡轮导叶角度均设置为 \\(0^\\circ\\)，后混合器面积设置为 \\(2.8518e+004\\)。请问发动机CDFS导叶角度、低压涡轮导叶角度和喷管喉道面积分别为多少时，发动机的性能最优？\n\n2）试研究发动机飞行高度 \\(H = 11\\, km\\)，飞行马赫数从 \\(Ma = 1.1\\) 变化到 \\(Ma = 1.6\\)，发动机特性最优时，CDFS导叶角度、低压涡轮导叶角度、尾喷管喉道面积随飞行马赫数的变化规律。此时发动机采用单涵道模式，将选择活门面积设置为0，风扇导叶角度、高压压气机导叶角度、高压涡轮导叶角度均设置为 \\(0^\\circ\\)。后混合器出口总面积设置为 \\(2.8518e+004\\)，后混合器内、外涵道面积可调（即不受附录1后混合器含内、外涵道面积值的约束）。",
  "subtask": {
    "1": {
      "subtask": "子任务1（物理建模与方程构建）旨在以部件级物理模型把变循环发动机的稳态工作点问题形式化为一组明确的代数非线性方程并把所有待解变量、参数与物理约束系统化、可复现地列出：任务范围包括（a）明确并记录所有截面与部件的状态量符号与单位（对每一关键截面 i 定义总温 Tt_i、总压 Pt_i、静压 p_i、质量流率 W_i、截面有效面积 A_i；对每一轴或部件定义物理转速 n、换算转速 N_corr、导叶角 α、等熵效率 η_is、机械效率 η_m 等控制/参数量）；（b）在清晰的物理假设下建立每个部件的闭合方程——包括进气道的定常动压/总压修正关系、叶轴类压气机/风扇的等熵效率修正温升关系 Tt_out = Tt_in[1 + (π^{(γ-1)/γ}-1)/η_is] 及对应的map关系 π = f_map(W_corr,N_corr,α)、W_corr = g_map(π,N_corr,α)（采用来自部件特性图的数据作为输入并说明插值/外推的允许范围）、涡轮的等熵膨胀与效率关系、燃烧室把燃料热输入转化为主流总温升的能量方程、喷管的等熵展开与声速节流（choked）质量流限值表达式、以及混合器/涵道的压损与静压平衡模型；（c）把题目给出的七条平衡条件（低压轴功率平衡、高压轴功率平衡、高/低压涡轮入口流量匹配、后混合器静压平衡、尾喷管面积匹配、风扇出口流量分配）转写为以上述状态量为自变量的等式约束，明确每条方程所依赖的部件方程和数据输入；（d）列出所有必需的输入数据与来源，包括附录中各部件map（风扇、CDFS、HPC、HPT、LPT 的压比/流量/效率随换算转速的表格）、工质热物性（随温度的 cp、γ 或其近似取值）、几何参数（各截面初始面积、后混合器与活门给定面积）、以及机械效率与初始控制量；（e）明确物理可行性约束与边界条件（流量非负、马赫数与总温/总压在map有效区间、不得外推超出map边界或须标注惩罚/禁用、当喷管或某段发生choke 时替换为声速受限关系），并把这些不等式以形式化约束附入方程组定义；（f）输出成果为一套自洽的、可供数值求解器直接使用的方程列表、变量清单、依赖的map查询接口规范和数据表索引，以及用于校验物理解的初值/边界建议；在该子任务中应采用理想气体关系与等熵效率模型作基本闭合，并明确在模型文档中注明哪些物理项（例如冷却气流、二次损失）已被忽略或参数化以便后续扩展。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将变循环发动机稳态工作点仿真形式化：构建并闭合基于部件法的代数非线性方程组以求解各截面(Tt_i, Pt_i, p_i, W_i, A_i)与轴功率匹配",
          "expected_output": "变量清单、等式/不等式方程列表、部件map查询接口规范、输入数据来源表、初值与边界建议、被忽略物理项说明",
          "key_inputs_constraints": "输入：附录map(风扇/CDFS/HPC/HPT/LPT: 压比/流量/效率 vs N_corr, α)、几何(各截面面积、活门/混合器/喷管A)、工况(H, Ma, Pt0, Tt0)、效率参数(η_is, η_m)、控制量(n, α, π函数值)。约束：流量非负、马赫数与(Tt,Pt)落在map有效域、喷管/通道choke则采用声速受限关系；不外推或外推需标注惩罚。",
          "modeling_type": "仿真",
          "role_in_pipeline": "作为数值求解前的方程与变量定义阶段，直接依赖部件特性数据与工况设定；其输出供后续非线性求解器与参数标定/优化使用；前序任务为数据清洗与map整理，后序任务为求解与敏感性分析",
          "assumptions": "工质为理想气体，cp与γ可取分段常数或T函数；冷却气流、二次损失在该子任务可忽略或以参数化压损表示；采用等熵效率模型闭合并允许有限范围线性插值，不建议外推"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确仿真目标与七条平衡方程角色",
              "description": "能指出核心是将低/高压轴功率平衡、涡轮进口流量匹配、后混合器静压平衡、尾喷管面积匹配、风扇出口流量分配转写为代数非线性方程以支撑稳态仿真",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：7条方程逐条点名并界定依赖部件；中分：覆盖≥5条且说明部分依赖；低分：只笼统提及匹配或遗漏关键平衡"
            },
            {
              "sub_criteria": "识别部件法与map依赖",
              "description": "指出风扇/CDFS/HPC/HPT/LPT需通过map π=f(W_corr,N_corr,α)与效率η_is闭合，并区分插值与外推策略",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确W_corr/N_corr定义与插值域；中分：仅提到map但未定义换算量；低分：忽略map或错误使用定常经验系数"
            },
            {
              "sub_criteria": "边界与可行性约束识别",
              "description": "提出流量非负、choked喷管关系、马赫/状态量落入map域及惩罚机制",
              "score": 35,
              "evaluation_focus": "约束意识",
              "scoring_hint": "高分：给出choke判据与替代方程；中分：仅文字描述约束；低分：未设置任何边界条件"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "变量与单位体系复述",
              "description": "系统列出Tt_i, Pt_i, p_i, W_i, A_i, n, N_corr, α, η_is, η_m等并指明单位/截面索引",
              "score": 40,
              "evaluation_focus": "规范表达",
              "scoring_hint": "高分：变量-单位-截面一一对应；中分：缺少部分单位或截面号；低分：变量清单混乱或缺失关键量"
            },
            {
              "sub_criteria": "工况与几何输入复述",
              "description": "明确H, Ma→(Pt0,Tt0)计算、活门/混合器/喷管面积与模式(双/单涵)的作用",
              "score": 30,
              "evaluation_focus": "场景把握",
              "scoring_hint": "高分：阐明模式切换对方程结构影响；中分：仅列输入未关联影响；低分：未复述或理解错误"
            },
            {
              "sub_criteria": "输出形式复述与可解性",
              "description": "清晰给出方程列表、变量清单、map接口、初值/边界建议的产出格式",
              "score": 30,
              "evaluation_focus": "可执行性",
              "scoring_hint": "高分：指明接口输入/输出与索引；中分：泛化描述无接口细节；低分：未形成结构化输出"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "理想气体与等熵效率假设",
              "description": "明确cp, γ处理（常数或随T）与等熵效率在压气机/涡轮能量方程中的用法",
              "score": 35,
              "evaluation_focus": "物理合理性",
              "scoring_hint": "高分：给出Tt_out公式与π-ΔT关系；中分：仅口述等熵效率；低分：未声明或公式错误"
            },
            {
              "sub_criteria": "损失与忽略项说明",
              "description": "说明冷却气流、二次损失、管道压损的处理（忽略或参数化），并标注可扩展性",
              "score": 30,
              "evaluation_focus": "建模边界",
              "scoring_hint": "高分：逐项标注与影响范围；中分：笼统“忽略”；低分：未说明或与题设冲突"
            },
            {
              "sub_criteria": "map插值/外推假设与限制",
              "description": "限定插值方法与外推禁用/惩罚策略，含N_corr、W_corr归一化范围",
              "score": 35,
              "evaluation_focus": "数据使用",
              "scoring_hint": "高分：定义插值域与边界处理；中分：仅称“线性插值”；低分：允许不受限外推"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "部件闭合方程完整性",
              "description": "进气道、风扇/CDFS/HPC、主燃烧室、HPT/LPT、混合器/涵道、喷管分别给出能量/动量/等熵关系及压损",
              "score": 40,
              "evaluation_focus": "方程完备",
              "scoring_hint": "高分：每部件至少1-2条关键方程并指向变量；中分：缺1-2个部件；低分：仅局部方程"
            },
            {
              "sub_criteria": "平衡方程转写与依赖映射",
              "description": "将7条平衡方程以Tt_i, Pt_i, W_i, n, α, π_map表达，并标注依赖的部件输出",
              "score": 30,
              "evaluation_focus": "结构化建模",
              "scoring_hint": "高分：方程-依赖图清晰；中分：仅公式无依赖说明；低分：方程不闭合或变量未定义"
            },
            {
              "sub_criteria": "换算量与节流(choked)处理",
              "description": "正确定义W_corr, N_corr，喷管/狭窄段声速受限质量流表达式与切换条件",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出临界压力比/质量流函数；中分：只说可能choke；低分：无节流处理"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "变量清单与自由度分析",
              "description": "列出自变量与方程数量，验证自由度=0或指出需要的附加约束/控制量",
              "score": 35,
              "evaluation_focus": "求解准备",
              "scoring_hint": "高分：一致性检查通过并说明固定量；中分：列表不全；低分：自由度不自洽"
            },
            {
              "sub_criteria": "不等式约束集成",
              "description": "将流量非负、map域、choke等转化为约束或方程切换规则",
              "score": 35,
              "evaluation_focus": "约束实现",
              "scoring_hint": "高分：给出可实现的切换/惩罚机制；中分：仅文字描述；低分：未集成约束"
            },
            {
              "sub_criteria": "初值与收敛策略建议",
              "description": "提供初值构造（如基于设计点/相邻工况）与数值鲁棒性策略（缩放、分块求解）",
              "score": 30,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：给出缩放与分区迭代建议；中分：泛化建议；低分：无初值与策略"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "map查询接口规范",
              "description": "定义π=f_map(W_corr,N_corr,α), η=f_map(...)与插值API输入输出与边界处理",
              "score": 40,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：含输入校验与边界回退/惩罚；中分：仅函数签名；低分：无规范"
            },
            {
              "sub_criteria": "方程组组织与可复用性",
              "description": "模块化部件方程与平衡方程，清晰的数据流与依赖",
              "score": 30,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：部件解算器+系统装配；中分：单文件堆砌；低分：耦合混乱难以维护"
            },
            {
              "sub_criteria": "单位与数值稳定性处理",
              "description": "统一单位系统、缩放残差、处理极值（choke、近声速）",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：残差归一化与守恒检查；中分：部分处理；低分：无单位规范导致易错"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "物理一致性校验",
              "description": "检查能量守恒、轴功率平衡残差、流量连续性与喷管临界条件",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：列出残差阈值（如相对误差≤1e-3）；中分：仅质性说明；低分：无验证"
            },
            {
              "sub_criteria": "敏感性与可行域检查",
              "description": "对N_corr、α、面积等扰动评估方程可行域与约束活跃性（如choke切换）",
              "score": 30,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：指出活跃约束与切换点；中分：仅提趋势；低分：无分析"
            },
            {
              "sub_criteria": "忽略项影响讨论与扩展性",
              "description": "评估忽略冷却/损失对结果偏差方向与后续扩展优先级",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：说明偏差方向与量级预期；中分：泛化表述；低分：未讨论"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（附录4 map 数据处理与连续映射构建）要求把附录4中为每个部件（风扇、CDFS、中高压压气机、高压涡轮、低压涡轮）给出的离散性能表（在若干换算转速点下的增压比/落压比、换算流量与效率）系统化地转换为面向求解器的、连续且可求导的映射接口，并为逆映射与雅可比计算提供可靠支持；为此应按下列精确步骤实施：首先做数据预处理——读取并统一单位与坐标（把物理转速/流量转换为标准的 corrected speed N_corr 与 corrected flow W_corr），检查并插补缺失值、去除明显离群点并记录原始离散点及其不确定度；其次对每一部件在每一给定换算转速层建立稳健的一维或二维光滑插值/拟合器：优先使用分层策略（按固定 N_corr 对 W_corr↔π 与 W_corr↔eff 做一维单调保守插值，如 PCHIP/Monotone Cubic Spline 或局部加权回归 LOESS），再在 N_corr 方向上用三次样条或双线性/双三次样条（RectBivariateSpline）做连续延伸，必要时用径向基函数（RBF）或薄板样条处理稀疏/不规则网格；第三，显式构造三类查询接口并保证数值稳定性与单调性：正向查询 pi = f_pi(W_corr, N_corr, control_angle)，效率 eff = f_eff(W_corr, N_corr, control_angle)，以及逆查询 W_corr = f_inv(pi, N_corr, control_angle)（逆映射可通过在固定 N_corr 上解一维方程 f_pi(W_corr)−pi = 0 的鲁棒零点法或直接对预先构建的 W_corr(pi,N_corr) 网格做插值来实现）；第四，对插值表面进行物理约束与边界策略：在 map 有效域内使用插值结果并保证物理界（流量 ≥ 0、效率 ∈ [0,1]、压比 ≥ 1）；对域外拒绝无约束外推，采用最近邻钳制或基于物理衰减的受限外推规则（例如压比随流量大幅衰减的幂律外推），并对任何外推调用返回标志位与惩罚残差以供上层求解器处理；第五，标识并处理特殊区域：用给定数据或导数突变检测出喘振/不可行区并在插值器中标记为禁用，单独识别并记录可能发生 choke 的条件（可用声速极限计算或 map 上流量极值），为 choked 情形提供替代流量表达式并在查询接口中自动切换；第六，求导与数值雅可比支持：为所有接口提供偏导数（对 W_corr 与 N_corr 的一阶偏导），优先从样条/拟合器解析导数获得，解析导数不可得时用高阶中心差分或自动微分/符号微分方法补充，并明确导数在 map 边界与禁用区的行为（返回 NaN 或有限大并伴随标志）；第七，性能与工程实现细节：为加速求解器调用，预计算并缓存规则网格化的查表（支持向量化批量查询）、建立 KD-tree 索引与局部低阶多项式近似以降低在线成本；在需要高光滑度与可微性时，建议同时训练可导的代理模型（例如基于高斯过程或小型神经网络的回归模型）作为替代并提供不确定度估计；第八，验证与质量控制：对每个部件在原始数据点做重建误差检验与 K-fold 交叉验证，记录最大/均方误差并输出 map 有效域边界、禁用区、choke 阈值及插值器版本信息。最终交付物为每个部件的一组 API 函数（pi(W_corr,N_corr,angle), eff(...), W_corr(pi,N_corr,angle) 及其偏导、有效域元数据、禁用/外推策略说明和预计算查表/缓存），并附带验证报告与快速矢量化实现建议；实现工具建议使用 Python（NumPy/SciPy 的 RectBivariateSpline、PCHIP、RBF、scikit-learn/GPyTorch 可选）或等效高性能库，并为后续工程调用提供明确错误/外推标志。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将附录4的部件离散性能表拟合为连续且可求导的映射接口，并提供正向/逆向查询与雅可比计算支持",
          "expected_output": "面向求解器的API函数集：pi(W_corr,N_corr,angle)、eff(W_corr,N_corr,angle)、W_corr(pi,N_corr,angle) 及其偏导；有效域与禁用区元数据；外推/喘振/choke 标志；预计算查表与缓存；验证报告（重建误差与交叉验证指标）",
          "key_inputs_constraints": "输入：附录4离散map数据（各部件在多N_corr层的压比/流量/效率表）；控制量angle（导叶角）；工况变量W_corr、N_corr；约束：效率∈[0,1]，流量≥0，压比≥1（压气机）或≤1（涡轮的落压比表述需统一）；禁止无约束外推；在喘振/禁用区返回标志并拒绝解；在choke点使用声速受限或极值流量；单位需统一至corrected量",
          "modeling_type": "拟合+仿真",
          "role_in_pipeline": "作为部件法求解器前的核心数据接口层：依赖子任务1的变量定义与物理闭合方程；为后续非线性方程组求解（平衡方程）提供连续正/逆映射与雅可比。前序：数据读取与清洗、单位统一；后序：求解器装配与全机匹配求解、灵敏度与优化",
          "assumptions": "若附录4有不规则网格，采用RBF或薄板样条补点；压比定义统一为π=Pt_out/Pt_in（涡轮可转换为落压比或其倒数）；缺失导叶角层按小角度线性移位近似；物性采用常cp、γ在插值验证中近似不变"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "连续可导拟合需求识别（pi/eff/W_corr 与雅可比）",
              "description": "是否明确本任务将离散map拟合为可求导的连续函数，并服务于正向pi、eff与逆向W_corr查询及雅可比供求解器使用",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰列出正向/逆向接口与偏导需求；中分：仅提到插值但未强调可导与逆映射；低分：把任务误解为简单查表或绘图"
            },
            {
              "sub_criteria": "corrected量与单位统一识别（W_corr,N_corr）",
              "description": "是否强调将原始转速/流量转换为N_corr与W_corr并在接口中以此为自变量",
              "score": 25,
              "evaluation_focus": "数据理解",
              "scoring_hint": "高分：给出转换公式与所需基准温压；中分：只口头提单位统一；低分：忽略corrected量"
            },
            {
              "sub_criteria": "物理边界与禁用区（喘振/choke/外推）",
              "description": "是否识别需要在map有效域内插值，域外钳制或受限外推，并标记喘振与choke",
              "score": 40,
              "evaluation_focus": "物理约束",
              "scoring_hint": "高分：分别说明喘振禁用、choke切换与外推标志；中分：只提外推限制；低分：无边界处理"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "正向/逆向查询复述（pi/eff 与 W_corr(pi,·))",
              "description": "是否将正向pi=f_pi(W_corr,N_corr,angle)、eff=f_eff(...)与逆向W_corr=f_inv(pi,N_corr,angle)准确复述",
              "score": 35,
              "evaluation_focus": "需求对齐",
              "scoring_hint": "高分：包含三个接口并提到解一维零点或反表插值；中分：缺一项；低分：描述模糊"
            },
            {
              "sub_criteria": "分层插值策略复述（按N_corr层+跨层延拓）",
              "description": "是否复述固定N_corr上的单调插值与N_corr方向样条/双三次延拓策略",
              "score": 35,
              "evaluation_focus": "方法选择",
              "scoring_hint": "高分：点名PCHIP/单调样条+RectBivariateSpline；中分：仅称样条插值；低分：无分层思想"
            },
            {
              "sub_criteria": "验证与质量控制复述（重建误差与交叉验证）",
              "description": "是否复述重建误差、K-fold、有效域边界与版本化输出",
              "score": 30,
              "evaluation_focus": "验证意识",
              "scoring_hint": "高分：包含误差指标与边界导出；中分：只做可视检查；低分：未提验证"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "导叶角angle处理假设",
              "description": "对缺少多angle层数据时，是否提出移位/缩放近似并限定适用范围",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出线性移位或相似律并标注不确定度；中分：含糊其辞；低分：忽略angle"
            },
            {
              "sub_criteria": "外推策略假设（钳制/物理衰减）",
              "description": "明确域外使用最近邻钳制或受限幂律衰减并返回外推标志",
              "score": 35,
              "evaluation_focus": "边界处理",
              "scoring_hint": "高分：区分轻度外推与禁止区；中分：仅最近邻；低分：无说明或任意外推"
            },
            {
              "sub_criteria": "喘振与choke识别准则",
              "description": "提出基于map极值/导数突变的喘振边界与choke流量极限的判据",
              "score": 40,
              "evaluation_focus": "物理判据",
              "scoring_hint": "高分：给出可实现的阈值/算法；中分：仅口头描述；低分：未设判据"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "PCHIP/单调样条在固定N_corr层的构建",
              "description": "在每个N_corr层对W_corr↔π与W_corr↔eff进行单调保守插值，避免过冲",
              "score": 30,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：同时处理π与eff并检验单调性；中分：仅样条未控单调；低分：线性或欠拟合"
            },
            {
              "sub_criteria": "跨N_corr方向延拓（双三次样条/RBF）",
              "description": "在N_corr维度使用RectBivariateSpline或RBF/薄板样条处理稀疏网格",
              "score": 25,
              "evaluation_focus": "数值方法",
              "scoring_hint": "高分：根据网格规则性择法；中分：笼统样条；低分：无跨层"
            },
            {
              "sub_criteria": "逆映射构建（零点法或反表）",
              "description": "提供W_corr(pi,N_corr,angle)通过一维root或预构建反表并保证单调段选择",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：区分多值段并限域；中分：简单牛顿法无守护；低分：无逆映射"
            },
            {
              "sub_criteria": "物理约束嵌入（效率/压比/流量限制）",
              "description": "在插值输出层实施裁剪/重参数化确保eff∈[0,1]、π与W_corr物理可行",
              "score": 20,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：统一压气机/涡轮定义并裁剪；中分：部分约束；低分：不处理"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "鲁棒零点法用于逆查询（守护+单调区间）",
              "description": "固定N_corr与angle时对f_pi(W_corr)−pi采用Brent/二分+导数加速并限域在有效域",
              "score": 35,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：提供区间构造与收敛准则；中分：牛顿无守护；低分：不稳定或无实现"
            },
            {
              "sub_criteria": "导数/雅可比提供策略",
              "description": "优先用样条解析导数，边界与禁用区返回NaN/大数并附标志；必要时中心差分",
              "score": 35,
              "evaluation_focus": "灵敏度",
              "scoring_hint": "高分：明确dx选择与数值稳定；中分：仅数值差分；低分：无导数"
            },
            {
              "sub_criteria": "外推与标志传播到求解器",
              "description": "对外推、喘振、choke返回状态码/惩罚残差，便于上层约束处理",
              "score": 30,
              "evaluation_focus": "接口契约",
              "scoring_hint": "高分：定义清晰枚举与示例；中分：布尔标志模糊；低分：无标志"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据预处理与清洗（缺失/离群/单位）",
              "description": "实现读取附录4，统一到W_corr,N_corr，插补缺失，剔除离群并保留原始点与不确定度",
              "score": 30,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：含可重复pipeline与日志；中分：部分处理；低分：直接用原表"
            },
            {
              "sub_criteria": "插值器与缓存（向量化/预表/KD-tree）",
              "description": "构建PCHIP/样条对象，预栅格缓存与向量化查询，局部索引加速",
              "score": 30,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：批量查询显著加速；中分：基本实现；低分：逐点慢查询"
            },
            {
              "sub_criteria": "API与错误/外推标志设计",
              "description": "pi/eff/W_corr接口签名清晰，返回值含状态码与元数据，边界行为一致",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：类型提示与文档齐全；中分：基本可用；低分：无文档或不一致"
            },
            {
              "sub_criteria": "单元测试与交叉验证脚本",
              "description": "覆盖原始点重建误差、K-fold、边界与异常分支",
              "score": 15,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：测试覆盖>80%关键路径；中分：少量样例；低分：无测试"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "重建误差与交叉验证指标报告",
              "description": "报告每部件在原始点的RMSE/MAE与K-fold误差，并对超标点解释",
              "score": 40,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化指标齐全并阐因；中分：仅整体误差；低分：无指标"
            },
            {
              "sub_criteria": "物理一致性检查（单调性/效率界/压比界）",
              "description": "展示样条输出在W_corr方向的单调性、eff∈[0,1]与π物理界满足情况",
              "score": 30,
              "evaluation_focus": "物理校核",
              "scoring_hint": "高分：附曲线与异常点定位；中分：口头说明；低分：明显违背物理"
            },
            {
              "sub_criteria": "边界与禁用区行为（喘振/choke/外推）",
              "description": "验证在禁用区拒绝查询、choke切换正确、外推标志与钳制合理",
              "score": 30,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：包含自动化边界测试；中分：手工抽测；低分：未验证或错误切换"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（稳健数值求解框架与算法实现）旨在构建一个可复现、模块化并能可靠求解发动机全局平衡方程的数值求解器框架；其范围仅包含数值求解器的架构、子问题分解策略、迭代与线性求解算法、收敛控制、鲁棒性处理和实现细节（输入为已实现的部件级查询接口/插值器、工况参数与几何边界），目标是在给定初值与工况下高效、稳定地找到满足七条平衡方程及物理约束的稳态解或明确报告不可行性。实现步骤与方法如下：首先建立求解器的模块化接口规范，输入包括部件map的正/逆查询与其导数（接口应返回压比/流量/效率以及一阶偏导）、工况（H、Ma、进气总温压）、控制量与几何参数；然后采用分层耦合策略将大规模耦合问题分解为若干小型子问题以提高鲁棒性——典型划分为：高压轴匹配子问题（HPC+HPT+CDFS 的功率与流量匹配）、低压轴匹配子问题（风扇+LPT 的功率平衡）、流量分配/后混合器-涵道子问题（风扇出口分流与后混合器静压平衡）及喷管喉部面积/喷流子问题，每个子问题由局部非线性求解器精确求解并在外层迭代中耦合。对每个子问题优先采用阻尼牛顿或 Levenberg–Marquardt (LM) 方法（需解析或数值雅可比），当解析雅可比不可得或map在调用处不可微时切换到 Jacobian-free Newton-Krylov (JFNK) 结合 GMRES 的线性求解器，线性子问题配合适当的预条件器（利用问题的块稀疏结构构造块对角/块三角预条件器）以保证规模可扩展；为提高全局收敛性在外层迭代中使用同伦/continuation 技术（从简单易解工况逐步延拓到目标工况，步长自适应缩减），并实现松弛/步长控制、线搜索或信赖域策略以避免牛顿步过冲。针对模型的离散分支与不连续（如喷管choke、活门开关或map禁用区），求解器必须具备自动分支检测逻辑：当检测到choked条件时自动替换流量方程为声速受限表达式并重新线性化；当活门状态改变导致方程拓扑变更时采用事件驱动重构并用小步长同伦稳定过渡；对不等式约束（流量非负、面积上下限）用活动集/投影或光滑惩罚方法处理以保持迭代方法连续可导。为防止陷入局部不可行根或收敛失败，应实现多初值尝试与并行化搜索、并在必要时退化为全局优化（差分进化等）寻找可行域再局部精化。数值实现细节包括：优先使用自动微分或由插值器提供的解析偏导以构造准确雅可比，若采用数值差分则使用局部步长控制与集中差分降低噪声；缓存与批量化map查询以减少开销；利用问题的块结构构建稀疏/块雅可比以加速线性代数操作；严格的收敛判据（残差范数、变量增量与物理可行性检查）与完善的日志/错误报告机制（返回残差分量、触发的分支事件、外推/禁用标志）；并设置合理的容忍度、最大迭代次数与退化策略。建议实现工具链包括支持稀疏线性代数与并行求解的库（例如 PETSc/Trilinos 或 SciPy + petsc4py），以及支持自动微分的框架（JAX、autograd 或 C++ 的adept）以提高雅可比质量；在开发阶段提供单元测试与回溯例程以验证子问题收敛性与分支处理的正确性。最终产出为一个可调用的求解器函数/模块，接受部件map接口与工况输入，返回稳态解或不可行/失败诊断信息，并能在迭代过程中记录关键中间量以便后续分析与优化调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并求解变循环发动机七条平衡方程的稳健数值求解器以仿真稳态工作点并评估可行性",
          "expected_output": "可调用的求解器模块/函数（含接口说明）、迭代日志与收敛报告、稳态解变量表（Tt_i, Pt_i, W_i, A_i, n, N_corr 等）、不可行时的诊断信息（残差分量与分支事件）、单元测试与示例工况脚本",
          "key_inputs_constraints": "输入：部件map连续接口与偏导（pi(Wcorr,Ncorr,angle), eff(...), Wcorr(pi,...)）、工况参数（H, Ma, 进气Tt, Pt）、控制量与几何（活门/混合器/喷管面积、导叶角、转速）；约束：满足七个平衡方程；物理约束：流量≥0、效率∈[0,1]、压比≥1、choke切换；前置：子任务1方程与变量清单、子任务2可导插值器",
          "modeling_type": "仿真+优化",
          "role_in_pipeline": "作为全局方程的数值求解环节，位于部件物理建模（子任务1）与map连续化（子任务2）之后，为后续性能优化与参数扫频提供可行稳态解与诊断；直接依赖子任务1、子任务2的接口与数据",
          "assumptions": "采用理想气体与等熵效率模型；map接口可返回一阶偏导；喷管与阀门状态可事件驱动切换；允许使用阻尼牛顿/LM与JFNK+GMRES；使用线搜索或信赖域控制；允许活动集处理不等式约束"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别七条平衡方程的仿真目标与可行性评估",
              "description": "是否明确本任务是对低/高压轴功率、涡轮入口流量、后混合器静压、喷管面积、风扇分流等七方程的数值仿真与可行性评估",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：逐条点名(1)-(7)并界定为非线性耦合仿真问题；中分：笼统提到方程求解但未覆盖全部；低分：把任务误解为单一优化或绘图"
            },
            {
              "sub_criteria": "输入与约束识别（map接口、H/Ma、几何、导叶角）",
              "description": "是否列出map正/逆查询与导数、工况(H,Ma,Tt,Pt)、几何面积、控制量作为求解输入及边界",
              "score": 30,
              "evaluation_focus": "需求梳理",
              "scoring_hint": "高分：覆盖接口函数、导数需求与边界；中分：缺少导数或部分几何；低分：输入不清或与任务不符"
            },
            {
              "sub_criteria": "不连续与分支识别（choke/活门/禁用区）",
              "description": "是否指出喷管choke、活门状态切换、map禁用区导致的分支与事件处理需求",
              "score": 40,
              "evaluation_focus": "问题洞察",
              "scoring_hint": "高分：三类不连续均明确并提出事件/切换；中分：仅提到choke或活门之一；低分：未识别任何分支"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "仿真+优化定位的精确复述",
              "description": "是否把任务复述为‘仿真稳态解并用线搜索/信赖域提升收敛’而非参数优化本身",
              "score": 30,
              "evaluation_focus": "表达与定位",
              "scoring_hint": "高分：明确仿真为主、优化为数值收敛辅助手段；中分：模糊为一般‘优化求解’; 低分：定位错误"
            },
            {
              "sub_criteria": "分层耦合子问题的清晰表述",
              "description": "是否复述高压轴匹配、低压轴匹配、流量分配/后混合器、喷管子问题的拆分",
              "score": 40,
              "evaluation_focus": "结构化能力",
              "scoring_hint": "高分：四块均清楚且说明耦合顺序/数据流；中分：只列部分；低分：未分解"
            },
            {
              "sub_criteria": "收敛与诊断输出的复述",
              "description": "是否提出需要残差向量、分量级阈值、变量增量、事件记录与外推标志",
              "score": 30,
              "evaluation_focus": "规范意识",
              "scoring_hint": "高分：列残差范数/变量步长/事件；中分：只给总体迭代次数；低分：无收敛标准"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "理想气体与等熵效率模型假设",
              "description": "是否明确采用理想气体、等熵效率闭合，并说明对结果影响与适用范围",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：列出cp/γ处理与误差影响；中分：仅提到理想气体；低分：未说明"
            },
            {
              "sub_criteria": "map导数与可微性假设",
              "description": "是否假设子任务2提供连续可导插值与一阶偏导，边界返回标志",
              "score": 25,
              "evaluation_focus": "接口假设",
              "scoring_hint": "高分：含边界NaN/钳制策略；中分：只说‘有导数’；低分：忽略导数需求"
            },
            {
              "sub_criteria": "分支切换与事件处理假设",
              "description": "是否建立choke触发条件、活门拓扑切换、小步同伦稳定过渡的假设",
              "score": 25,
              "evaluation_focus": "算法设定",
              "scoring_hint": "高分：给出声速条件与事件回调；中分：笼统‘检测choke’; 低分：无相关假设"
            },
            {
              "sub_criteria": "不等式约束处理假设",
              "description": "是否说明活动集/投影或光滑惩罚的处理与可导性考虑",
              "score": 25,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：选型+切换准则；中分：只说‘加惩罚’；低分：未处理不等式"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "模块化接口规范（map正/逆查询与偏导）",
              "description": "是否定义求解器需要的pi/eff/Wcorr及偏导接口、外推/禁用标志与批量化缓存",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：函数签名+返回结构+标志位；中分：仅口头描述；低分：未定义接口"
            },
            {
              "sub_criteria": "分层耦合与块雅可比结构",
              "description": "是否构建块稀疏雅可比与块对角/三角预条件器的结构说明",
              "score": 25,
              "evaluation_focus": "数值结构",
              "scoring_hint": "高分：指明各块依赖与稀疏度；中分：只提‘稀疏’；低分：稠密化或未提"
            },
            {
              "sub_criteria": "分支/事件框架",
              "description": "是否设计事件检测与方程替换（choked喷管流量方程、活门开闭）与重线性化流程",
              "score": 25,
              "evaluation_focus": "鲁棒性设计",
              "scoring_hint": "高分：含触发、替换、回滚策略；中分：仅检测不替换；低分：无事件机制"
            },
            {
              "sub_criteria": "收敛与容错策略",
              "description": "是否包含阻尼、线搜索/信赖域、同伦延拓、步长自适应与多初值并行",
              "score": 25,
              "evaluation_focus": "收敛控制",
              "scoring_hint": "高分：多策略并给启停准则；中分：单一阻尼；低分：无控制"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "局部解法选择（阻尼牛顿/LM）与雅可比构造",
              "description": "是否优先使用阻尼牛顿或LM，并利用自动微分或解析导数，数值差分含步长控制",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出切换准则与导数来源优先级；中分：仅选一种；低分：无依据选择"
            },
            {
              "sub_criteria": "JFNK+GMRES与预条件",
              "description": "map不可微或大规模时切换JFNK，采用块预条件器并说明容忍度设置",
              "score": 25,
              "evaluation_focus": "数值线代",
              "scoring_hint": "高分：含GMRES重启/容差、预条件结构；中分：只提JFNK；低分：不具备替代方案"
            },
            {
              "sub_criteria": "同伦/continuation策略",
              "description": "是否从易解工况逐步延拓到目标工况，具备步长自适应与失败回退",
              "score": 25,
              "evaluation_focus": "全局收敛",
              "scoring_hint": "高分：定义路径与步长调整规则；中分：只说‘逐步’; 低分：无同伦"
            },
            {
              "sub_criteria": "约束处理与活动集",
              "description": "是否实现投影/活动集或光滑惩罚并说明切换与收敛一致性",
              "score": 20,
              "evaluation_focus": "约束数值法",
              "scoring_hint": "高分：实现细节+可导性；中分：泛化描述；低分：未处理约束"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "接口与模块化实现（可调用求解器函数/类）",
              "description": "是否提供清晰API（solve(state, controls, maps)）与错误/外推标志、事件回调",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：类型/文档/异常处理齐全；中分：能跑但接口混乱；低分：无模块化"
            },
            {
              "sub_criteria": "雅可比与线性代数实现（稀疏/块结构）",
              "description": "是否使用稀疏矩阵、块装配与预条件GMRES，支持自动微分或稳定差分",
              "score": 25,
              "evaluation_focus": "性能与数值性",
              "scoring_hint": "高分：稀疏+预条件；中分：稀疏无预条件；低分：稠密低效"
            },
            {
              "sub_criteria": "缓存与批量map查询",
              "description": "是否实现批量化与缓存减少map调用成本并记录外推次数",
              "score": 20,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：命中率统计与降耗；中分：简单缓存；低分：无缓存"
            },
            {
              "sub_criteria": "日志与单元测试",
              "description": "是否输出残差分量、步长、事件与提供子问题收敛单测、回归测试",
              "score": 30,
              "evaluation_focus": "可测性",
              "scoring_hint": "高分：覆盖率与失败重现场景；中分：少量示例测试；低分：无测试/日志"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "收敛判据与残差分解",
              "description": "是否报告残差范数、各方程(1)-(7)分量、变量增量与满足阈值情况",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：逐分量达标且给阈值；中分：仅总体范数；低分：无判据"
            },
            {
              "sub_criteria": "分支事件与可行性诊断",
              "description": "是否记录choke触发、活门切换、map禁用/外推次数并给不可行原因",
              "score": 30,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：事件时间线+原因定位；中分：只列事件计数；低分：无诊断"
            },
            {
              "sub_criteria": "数值稳健性与敏感性",
              "description": "是否分析对初值、容忍度、步长的敏感性并报告多初值成功率",
              "score": 20,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：量化成功率/迭代数分布；中分：定性描述；低分：未评估"
            },
            {
              "sub_criteria": "性能与可扩展性",
              "description": "是否给出迭代次数、每步线性解时长、总体耗时与规模扩展考虑",
              "score": 15,
              "evaluation_focus": "性能分析",
              "scoring_hint": "高分：提供基准数据与瓶颈；中分：粗略时间；低分：无数据"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（优化、灵敏度、不确定性量化与验证部署）的范围是：在已给定的发动机稳态求解器（作为黑箱函数，输入：飞行工况、几何与控制变量，输出：满足平衡方程的稳态解及性能指标）基础上，系统化地寻找并验证控制变量（例如 CDFS 导叶角、低压涡轮导叶角、尾喷管喉道面积等）使发动机在指定工况下达到“性能最优”（可由单一目标如净推力或 TSFC，或加权/多目标形式确定）、评估所得解的敏感性与鲁棒性，并将优化流程工程化部署以供批量评估与不确定性分析使用。该任务应按下列步骤实施：首先明确优化目标函数与约束（如几何上下限、物理可行域、map 有效域、choke 与活门状态的离散约束），以及可接受的计算预算（每次目标评估的最大耗时与总评估次数上限）；第二步采用双阶段优化策略——全局搜索阶段用无梯度全局优化器（差分进化、粒子群、网格粗搜或基于贝叶斯优化的主动采样）在控制变量空间快速识别若干候选点，搜寻过程中结合并行批量评估以提高吞吐；局部精炼阶段对候选点调用梯度驱动或信赖域方法（若可得雅可比则用有限差分或自动微分计算敏感度并用 Levenberg–Marquardt/信赖域-Newton 做高精度局部优化）以得到满足收敛标准的精确最优解；第三步在优化过程中逐步构建并更新光滑、可导的代理模型（高斯过程回归、径向基或小型神经网络）用于加速全局搜索与不确定性传播，代理训练采用交叉验证与不确定性驱动采样（主动学习/贝叶斯优化采样策略）以保证代理在高性能区域的准确性；第四步对候选与最终最优解实施灵敏度分析与不确定性量化：包括局部灵敏度（目标对控制变量与关键参数的一阶偏导/雅可比）、全局灵敏度（Sobol 或 Morris 指标）以识别主要驱动因子，以及基于蒙特卡洛或代理驱动的 UQ（传播 map 与效率、机械效率及燃烧温度等输入的不确定性）以估计性能置信区间并计算鲁棒最优性度量（例如在一定不确定性下的期望目标或下分位目标）；第五步实施约束与离散事件的稳健处理，采用活动集/罚函数或混合整数代理策略处理 choked/活门开关等离散变化，若需优化在多个模式间切换，采用分支-并-细化策略并在代理与真值求解器间建立一致性判据；第六步开展模型校准与验证：用可用实验或高保真 CFD /试验数据对代理与黑箱求解器输出进行最小二乘或贝叶斯校准（估计损失系数、效率修正项或 map 偏差），并保留独立验证集以检验泛化能力；第七步工程化部署：将整个流程模块化并实现可复现的工作流（配置驱动），包括并行化评估接口（MPI /多进程）、缓存与批量查询 map 的机制、失败/不可行情形的自动检测与日志记录、以及结果后处理（Pareto 前沿、鲁棒性报告、灵敏度排名、不确定性区间）；最后输出交付物包括：优化结果（最优控制变量与满足平衡解的性能指标）、Pareto 前沿（若多目标）、灵敏度与 Sobol 指标、不确定性传播报告（置信区间、概率失效率）、代理模型与训练数据、校准参数及完整运行日志与使用说明。建议使用的工具与库示例：Python 生态（NumPy/SciPy、NLopt、DEAP、scikit-optimize/GPyOpt、GPyTorch、scikit-learn）、灵敏度/UQ 库（SALib、emcee 或 PyMC3 用于贝叶斯校准）、并行与分布式计算（mpi4py、Dask）、以及用于自动微分的 JAX 或 autograd；在计算资源受限时优先依赖代理引导的全局搜索与并行批量评估以控制求解器调用次数。任务的成功标准为：在给定计算预算内找到物理可行且经校准的最优或 Pareto 解集；提供完整的鲁棒性与不确定性度量并交付可重复运行的优化工作流与验证文档。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化发动机控制变量（如CDFS导叶角、低压涡轮导叶角、尾喷管喉道面积）以在给定工况下最大化净推力或最小化TSFC，并评估最优解的不确定性与灵敏度",
          "expected_output": "最优控制变量数值（CDFS导叶角、低压涡轮导叶角、尾喷管喉道面积）、若多目标则Pareto前沿、目标函数值（净推力/TSFC）、灵敏度指标（局部雅可比、Sobol或Morris）、不确定性置信区间、代理模型文件、优化/验证运行日志与可复现脚本",
          "key_inputs_constraints": "1) 黑箱稳态求解器接口（输入：工况、控制变量、几何；输出：是否可行、净推力、TSFC、收敛标志、物理残差）；2) 控制变量边界与离散事件：CDFS导叶角范围、低压涡轮导叶角范围、尾喷管喉道面积上下界及活门/喉部choke离散开关；3) 部件map有效域与禁止外推规则（若在map外须返回外推标志或惩罚）；4) 计算预算（每次求解最大耗时与最大求解次数）；5) 误差/不确定性源（map不确定度、机械效率波动、燃烧温度不确定性）",
          "modeling_type": "优化+灵敏度+不确定性量化",
          "role_in_pipeline": "作为全流程的优化与评估模块，依赖已实现的子系统：子任务2（部件map接口）与子任务3（稳态求解器）作为前序输入；产出被用于子任务3的控制策略验证与三类校准/部署环节（代理模型、UQ报告）"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别要优化的控制变量（CDFS导叶角/低压涡轮导叶角/尾喷管喉道面积）",
              "description": "准确列出并解释为何选择CDFS导叶角、低压涡轮导叶角与尾喷管喉道面积为优化自由度，并说明各变量对净推力/TSFC的物理影响",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确给出三变量并附物理因果说明（例如CDFS影响核心流量）；中分：列出三变量但缺物理因果；低分：变量不全或与题意不符"
            },
            {
              "sub_criteria": "识别约束与离散事件（map有效域、choke、活门状态）",
              "description": "完整识别map有效域边界、喷管choke条件与活门/模式切换的离散约束，并说明如何在优化中检测与处理",
              "score": 30,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：列出map域、choke判据与活门状态处理策略；中分：仅列出部分约束；低分：忽略map边界或离散事件"
            },
            {
              "sub_criteria": "识别性能目标与计算预算（净推力/TSFC与调用限制）",
              "description": "明确单目标或多目标（净推力或TSFC或加权），并给出每次黑箱调用上限与总评估次数预算以指导算法选择",
              "score": 30,
              "evaluation_focus": "规划能力",
              "scoring_hint": "高分：目标明确并给出具体预算（如≤2000次、每次≤300s）；中分：目标明确无预算；低分：无明确目标或预算"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述优化目标（最大化净推力/最小化TSFC）",
              "description": "用数学形式重写优化目标（例如 max F_net 或 min TSFC），并指明是否为单目标或多目标及权重",
              "score": 50,
              "evaluation_focus": "数学表述",
              "scoring_hint": "高分：给出明确目标函数表达与权重，若多目标给出Pareto策略；中分：目标口语化无数学式；低分：目标模糊或冲突"
            },
            {
              "sub_criteria": "复述控制变量与约束（包含CDFS导叶角/低压涡轮导叶角/尾喷管喉道面积）",
              "description": "写出优化变量向量及各自上下界、离散选项（活门开/关）与map有效域约束的数学形式",
              "score": 30,
              "evaluation_focus": "约束表述",
              "scoring_hint": "高分：变量与不等式约束逐项列出；中分：列出变量无完整不等式；低分：未形式化约束"
            },
            {
              "sub_criteria": "复述可行性与失效判据（map外推/未收敛/choke）",
              "description": "明确何为不可行（如map外推、黑箱未收敛或违反物理边界）并给出惩罚或重试策略",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：定义可行性指标并给出惩罚/重新搜寻规则；中分：有描述无细则；低分：无可行性定义"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "假设黑箱稳态求解器行为（可并行调用/返回可行标志）",
              "description": "明确假设求解器在给定控制变量返回收敛标志、性能量及物理残差，且支持并行批量调用或说明不可并行时的应对措施",
              "score": 30,
              "evaluation_focus": "实用假设",
              "scoring_hint": "高分：明确并行能力与返回字段；中分：仅假设可返回性能值；低分：无关于求解器行为的假设"
            },
            {
              "sub_criteria": "假设不确定性源与分布（map误差/燃烧温度/效率）",
              "description": "给出参与UQ的主要不确定性源及其假定统计分布或置信区间（如map压比误差±x%，燃烧温度正态），并说明采样策略",
              "score": 25,
              "evaluation_focus": "UQ假设",
              "scoring_hint": "高分：列出主要不确定性并给出数值分布与采样数量；中分：列出来源无数值；低分：忽略不确定性"
            },
            {
              "sub_criteria": "假设代理模型可替代性（代理模型误差容忍与更新）",
              "description": "说明训练代理（GP/NN/RBF）来加速搜索时可接受误差与主动学习更新策略以保证代理在高性能区准确",
              "score": 25,
              "evaluation_focus": "代理策略",
              "scoring_hint": "高分：给出代理误差阈值（如RMSE≤5%）与主动采样规则；中分：提出代理思想无阈值；低分：未考虑代理误差与更新"
            },
            {
              "sub_criteria": "假设模式切换与光滑处理（choke/活门）",
              "description": "对喷管choke与活门开关等离散事件的处理假设（活动集/惩罚或混合整数代理）并说明同伦步进策略以保证可解性",
              "score": 20,
              "evaluation_focus": "离散处理",
              "scoring_hint": "高分：明确活动集或混合整数代理策略并给出同伦步进细则；中分：描述切换但无细则；低分：忽略离散事件"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建目标函数与约束的数学模型（包含TSFC或净推力表达）",
              "description": "把黑箱输出量转为明确目标/约束表达，并表明若目标为加权形式如何选权重或归一化（示例公式必须包含TSFC或净推力）",
              "score": 25,
              "evaluation_focus": "数学建模",
              "scoring_hint": "高分：给出明确公式与归一化方法；中分：有目标公式但无归一化；低分：目标建模模糊"
            },
            {
              "sub_criteria": "设计全局+局部优化策略（如差分进化+信赖域/LM）",
              "description": "详细说明使用差分进化或贝叶斯优化做全局搜寻，随后用Levenberg–Marquardt或信赖域牛顿作局部精化，并给出迭代/预算分配策略",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确算法组合、参数与预算分配（例如DE 500 evals + LM 200 evals）；中分：提出算法无预算细节；低分：只提单一方法无衔接"
            },
            {
              "sub_criteria": "构建代理模型与主动采样（如GP/NN）以加速优化",
              "description": "说明代理模型类型、训练特征/标签、交叉验证策略及利用不确定性驱动采样（贝叶斯优化采样）的方法",
              "score": 20,
              "evaluation_focus": "代理建模",
              "scoring_hint": "高分：选择具体代理并给出训练/验证指标与采样准则；中分：提代理无验证细节；低分：未使用代理"
            },
            {
              "sub_criteria": "构建灵敏度与UQ流程（局部雅可比与Sobol/蒙特卡洛）",
              "description": "制定局部敏感性（雅可比/偏导）计算与全局Sobol或Morris方案，并给出所需样本规模估计或代理驱动UQ流程",
              "score": 15,
              "evaluation_focus": "灵敏度/UQ",
              "scoring_hint": "高分：给出Sobol样本估计或代理UQ步骤；中分：仅列方法名；低分：无UQ流程"
            },
            {
              "sub_criteria": "处理离散事件与可行性（choke/活门）作为约束",
              "description": "在模型中把choke与活门作为活动约束或使用混合整数代理，并说明如何在优化中保持可导或采用分支策略",
              "score": 15,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：明确混合整数或活动集实现方案；中分：有描述无实现细节；低分：忽略离散约束"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "全局搜索实施（差分进化/贝叶斯优化）并保证对CDFS导叶角等变量空间覆盖",
              "description": "实现并行化全局优化（DE/BO），明确种群/采样规模、并行批次与对CDFS导叶角等变量的探索策略",
              "score": 30,
              "evaluation_focus": "全局搜寻",
              "scoring_hint": "高分：给出并行DE/BO实现细节与采样规模；中分：算法选择明确但无并行或规模；低分：无全局阶段"
            },
            {
              "sub_criteria": "局部精炼（LM/信赖域）使用雅可比或自动微分对低压涡轮导叶角局部优化",
              "description": "在局部阶段使用解析/自动微分雅可比进行Levenberg–Marquardt或信赖域优化以精化低压涡轮导叶角等变量",
              "score": 25,
              "evaluation_focus": "局部优化",
              "scoring_hint": "高分：使用自动微分或精确雅可比并给出收敛准则；中分：数值差分实现；低分：只用全局且无局部精化"
            },
            {
              "sub_criteria": "处理choke/活门等离散事件的求解稳定性（事件驱动或同伦）",
              "description": "在求解过程中自动检测choke/活门事件并用同伦或小步长事件驱动重构方程保证稳定收敛",
              "score": 25,
              "evaluation_focus": "鲁棒求解",
              "scoring_hint": "高分：实现事件检测与同伦步进；中分：描述检测无实现细节；低分：无事件处理"
            },
            {
              "sub_criteria": "收敛诊断与可行性回退（失败重试/多初值策略）",
              "description": "提供残差阈值、变量增量准则、失败时的回退策略（多初值或全局优化退化）与详细日志以判定求解器成功/失败",
              "score": 20,
              "evaluation_focus": "收敛控制",
              "scoring_hint": "高分：给出具体阈值与多初值策略；中分：有阈值无回退机制；低分：无诊断或回退"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "实现模块化接口（与黑箱稳态求解器及map接口对接）",
              "description": "代码提供标准API以并行批量调用黑箱稳态求解器并兼容map正/逆查询，含输入/输出数据结构说明与错误标志处理",
              "score": 30,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：可复现API、并行批量调用与错误码；中分：API存在但无并行或错误处理；低分：无标准接口"
            },
            {
              "sub_criteria": "并行化、缓存与批量化查询以控制黑箱调用成本",
              "description": "实现并行并批量评估、map查询缓存与最近邻查表加速，降低单次优化的时间开销并记录调用计数",
              "score": 25,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：实现并行与缓存并记录性能指标；中分：部分并行或无缓存；低分：串行无加速"
            },
            {
              "sub_criteria": "可复现运行与日志/配置管理（含随机种子、运行记录）",
              "description": "提供配置驱动的运行脚本、随机种子控制、完整运行日志与结果保存（包括代理模型与训练数据）",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：一键复现脚本与日志；中分：脚本存在但需手动配置；低分：无复现支持"
            },
            {
              "sub_criteria": "测试与验证脚本（单元测试、回溯例程）",
              "description": "包含单元测试覆盖关键模块（代理训练、并行评估、事件检测）与回溯例程验证在已知工况下能重现参考解",
              "score": 20,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：完整单元测试与回溯例程；中分：部分测试；低分：无测试"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "报告最优控制变量与性能（CDFS导叶角/低压涡轮导叶角/尾喷管喉道面积及净推力/TSFC）",
              "description": "提供最终最优变量与对应净推力和TSFC值，若多目标给出Pareto前沿与示例解的权衡分析",
              "score": 25,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：提供数值表、Pareto图与权衡分析；中分：仅数值无图表；低分：结果不完整或无解释"
            },
            {
              "sub_criteria": "局部灵敏度（雅可比/偏导）对CDFS导叶角等的影响量化",
              "description": "给出对每个控制变量的局部灵敏度（数值雅可比或自动微分结果）并解释对净推力/TSFC的敏感方向",
              "score": 20,
              "evaluation_focus": "灵敏度",
              "scoring_hint": "高分：提供雅可比矩阵与定量解读；中分：有定性说明；低分：无灵敏度分析"
            },
            {
              "sub_criteria": "全局灵敏度或Sobol分析（不确定性下的贡献排序）",
              "description": "提供Sobol或Morris指标以量化map与效率等不确定性对目标的全局贡献并给出样本规模或代理辅助说明",
              "score": 20,
              "evaluation_focus": "全局UQ",
              "scoring_hint": "高分：给出Sobol一阶/总效应与样本数说明；中分：仅Morris或部分指标；低分：无全局灵敏度"
            },
            {
              "sub_criteria": "不确定性传播与鲁棒性评估（置信区间/失效概率）",
              "description": "通过蒙特卡洛或代理驱动UQ计算目标的置信区间及在给定不确定性下的性能失效率（例如TSFC上界概率）",
              "score": 20,
              "evaluation_focus": "UQ传播",
              "scoring_hint": "高分：给出95%置信区间与失效率估计；中分：给出均值与方差；低分：无UQ结果"
            },
            {
              "sub_criteria": "校准与验证（与高保真/实验数据的残差）",
              "description": "若有可用高保真或试验数据，给出校准参数与独立验证集上的残差统计（RMSE或相对误差）",
              "score": 15,
              "evaluation_focus": "验证",
              "scoring_hint": "高分：提供校准后RMSE并在独立集验证；中分：仅校准无独立验证；低分：无校准/验证"
            }
          ]
        }
      }
    }
  }
}