{
  "task_id": "2015_B",
  "problem": "请按照文献中的方法或以文献中的方法为基础创新新的方法完成以下问题，创新部分一定要讲清思路，要具有一般性（例如不仅适应低维数据也适应高维数据）。回答方式：第 1 题，第 3 题的 b 与 c 请制作一个表格输出样本的类别标签，每行 20 个，其余题目请将分类结果画出：\n\n1. 当子空间独立时，子空间聚类问题相对容易。附件一中 1.mat 中有一组高维数据（.mat 所存矩阵的每列为一个数据点，以下各题均如此），它采样于两个独立的子空间。请将该组数据分成两类。\n\n2. 请处理附件二中四个低维空间中的子空间聚类问题和多流形聚类问题，如图 1 所示。图 1(a) 为两条交点不在原点且互相垂直的两条直线，请将其分为两类；图 1(b) 为一个平面和两条直线，这是一个不满足独立子空间的关系的例子，请将其分为三类。图 1(c) 为两条不相交的二次曲线，请将其分为两类。图 1(d) 为两条相交的螺旋线，请将其分为两类。\n\n3. 请解决以下三个实际应用中的子空间聚类问题，数据见附件三\n\n(a) 受实际条件的制约，在工业测量中往往需要非接触测量的方式，视觉重建是一类重要的非接触测量方法。特征提取是视觉重建的一个关键环节，如图 2(a) 所示，其中十字便是特征提取环节中处理得到的，十字上的点的位置信息已经提取出来，为了确定十字的中心位置，一个可行的方法是先将十字中的点按照 “横” 和 “竖” 分两类。请使用适当的方法将图 2(a) 中十字上的点分成两类。\n\n(b) 运动分割是将视频中有着不同运动的物体分开，是动态场景的理解和重构中是不可缺少的一步。基于特征点轨迹的方法是重要的一类运动分割方法，该方法首先利用标准的追踪方法提取视频中不同运动物体的特征点轨迹，之后把场景中不同运动对应的不同特征点轨迹分割出来。已经有文献指出同一运动的特征点轨迹在同一个线性流形上。图 2(b) 显示了视频中的一帧，有三个不同运动的特征点轨迹被提取出来保存在了 3b.mat 文件中，请使用适当方法将这些特征点轨迹分成三类。\n\n(c) 3c.mat 中的数据为两个人在不同光照下的人脸图像共 20 幅（X 变量的每一列为拉成向量的一幅人脸图像），请将这 20 幅图像分成两类。\n\n4. 请作答如下两个实际应用中的多流形聚类问题\n\n(a) 图 3(a) 分别显示了圆台的点云，请将点按照其所在的面分开（即圆台按照圆台的顶、底、侧面分成三类）。\n\n(b) 图 3(b) 是机器工件外部边缘轮廓的图像，请将轮廓线中不同的直线和圆弧分类，类数自定。",
  "subtask": {
    "1": {
      "subtask": "子任务一（数据预处理与局部几何刻画）必须把原始观测矩阵 X（D×N，列为样本）转换为算法可直接使用的规范化数据与每个样本的局部几何先验，任务范围和目标是：对输入做必要的去偏与尺度归一，识别并标记明显离群点，构建可靠的 k-近邻结构 N(j)，并在每个邻域上估计局部线性子空间（局部PCA）与局部线性重建权重 w_{N(j)}，最后将这些权重扩展为与全局变量维度一致的稀疏先验向量 s_j（N×1，用于后续自表达项）；整个过程应能在高维或低维数据上稳定运行并输出可诊断量（如局部重建误差、局部维数估计、样本密度指标与离群标记）。具体步骤与方法：1) 预处理——对每列样本做去均值（按列减去其均值或按全局特征中心化）并按列范数或能量归一化（例如单位L2），必要时先用全局PCA将极高维 D 降到保留 95% 能量的维度以减低噪声与计算量；对图像类数据可先做亮度/对比度归一化或提取稳健特征（SIFT、LBP、或均值-方差归一化的像素向量）；2) 邻域构建——选择距离度量（欧氏或角度/余弦距离），用 KD-tree / Ball-tree / ANN 算法高效计算每样本的 k-近邻（k 的建议范围依赖于估计的局部维数 d_est，通常取 k ∈ [max(d_est+1,10), 30]，并在构建后检查图连通性）；在轨迹或时间序列数据中同时保留时间索引以允许时间连贯邻域选择；3) 离群点与密度检测——计算每个样本与其 k 近邻的平均距离或局部点密度，设阈值标记明显异常（平均距离远大于中位数或密度远低），将这些样本标记以便后续特殊处理；4) 局部PCA 与局部维数估计——对每个样本 j 在其邻域 X_{N(j)} 做去均值后 SVD/PCA，得到局部主方向和奇异值谱，计算解释方差比例并据此估计局部维数 d_j（例如选取使累计能量 ≥ 0.95 的最小维数），同时记录局部重建误差作为曲率/非线性度量；5) 局部线性重建权重计算——在邻域上用有约束的最小二乘求解权重 w_{N(j)}：min_w ||x_j - X_{N(j)} w||_2^2 + η||w||_2^2，常加约束 ∑ w = 1（仿射不变性）和/或非负性（若有必要），正则化项 η 用以提高数值稳定性（当邻域矩阵病态时可使用截断SVD或 Tikhonov 正则）；当目标为稀疏表示时可改用 L1 约束（LASSO）求得稀疏权重；6) 生成局部先验 s_j——将邻域权重扩展到长度 N 的向量 s_j（在 N(j) 位置放置 w，其他位置置零），并保存对应的重建残差和局部维数 d_j；7) 输出规范——返回归一化后的 X_hat，邻域集合 {N(j)}，稀疏先验集合 {s_j}，每个样本的局部PCA结果（局部主成分、奇异值、重建误差）、密度/离群标记，以及用于参数选择的诊断量（如平均局部维数、邻域条件数分布）。建议工具与实现细节：在MATLAB 可用 knnsearch、pca、svd 与 lsqlin/ridge（或 cvx）实现上述步骤；在 Python 建议用 scikit-learn 的 NearestNeighbors、PCA、Ridge/Lasso 及 fast SVD（scipy.sparse.linalg）并采用 KD-tree/ApproxNN 加速；对于极高维或大 N，先做全局 PCA 降维或对邻域计算使用局部随机投影以降低计算与存储成本。该子任务的完成应产生结构化且可检查的预处理产物，能直接供后续自表达与谱聚类模块使用而无需额外解释。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将原始观测矩阵 X 经去偏与尺度归一转换为规范化数据 X_hat，识别并标记明显离群点，构建每样本的 k-近邻 N(j)，在每个邻域上用局部PCA估计局部维数 d_j 并求解局部线性重建权重 w_{N(j)}，将权重扩展为稀疏先验向量 s_j 以供后续自表达与谱聚类使用。",
          "expected_output": "归一化矩阵 X_hat（D'×N）、邻域集合 {N(j)}、稀疏先验向量集合 {s_j (N×1)}、每样本局部PCA结果（主成分、奇异值谱、局部维数 d_j、局部重建误差）、样本密度指标、离群标记、诊断量（平均局部维数、邻域条件数分布、连通性检查报告）及可复现的代码/参数记录文件。",
          "key_inputs_constraints": "1) 输入 X：数值矩阵 D×N（列为样本），可能为图像向量或一般高维特征；2) 超参数集合：k（近邻数）、正则化 η、距离度量（欧氏或余弦）；3) 预置条件：若 D 极大须先做全局PCA以保留 ~95% 能量或采用局部随机投影；4) 约束：邻域重建可选仿射约束 ∑w=1 与/或非负性，输出需提供诊断量与可复现参数（若无则记录理由）。",
          "modeling_type": "混合(预处理+拟合)",
          "role_in_pipeline": "作为特征工程/预处理子任务，位于原始数据清洗之后、后续自表达（稀疏/低秩表示）与谱聚类之前；直接依赖原始 X 与超参数(k,η)；为后序自表达模型提供结构化先验 {s_j}、局部维数与诊断量。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并说明需生成规范化数据 X_hat",
              "description": "检查是否明确识别并实现对列向量去均值/按列范数归一或能量归一以输出 X_hat，并说明为何选择列归一还是全局中心化。",
              "score": 25,
              "evaluation_focus": "数据处理",
              "scoring_hint": "高分：提供并实现列去均值与列L2归一或图像亮度归一，给出选择理由；中分：实现一种归一但未解释选择；低分：未生成 X_hat 或未说明归一策略。"
            },
            {
              "sub_criteria": "识别并标记明显离群点",
              "description": "需用局部平均距离或局部密度指标识别离群样本并给出阈值策略与标记结果，输出离群标记向量。",
              "score": 25,
              "evaluation_focus": "异常检测",
              "scoring_hint": "高分：给出可量化阈值（如距中位数3倍IQR或密度低于百分位）并验证；中分：有离群检测但阈值经验性；低分：无离群检测或标记缺乏说明。"
            },
            {
              "sub_criteria": "识别构建 k-近邻 N(j) 的必要性与约束",
              "description": "说明为何需构建 k-近邻 N(j)，并明确选择距离度量（欧氏/余弦）与 k 的选择区间及连通性检查方法。",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：阐明 k 与局部维数关系并执行连通性检验；中分：给出 k 值经验范围但无连通性检验；低分：未说明度量或 k 选择缺乏依据。"
            },
            {
              "sub_criteria": "识别需输出用于后续自表达的稀疏先验 s_j",
              "description": "明确需要将局部重建权重扩展为长度 N 的稀疏向量 s_j，并说明格式与存储方式以供后续自表达模块调用。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：明确 s_j 格式并提供存储（稀疏矩阵/文件）且与后续模块兼容；中分：生成 s_j 但无存储规范；低分：未输出或格式不可用。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述需输出的 X_hat 与其生成方法",
              "description": "复述并具体写出生成 X_hat 的步骤（如全局PCA降维→列去均值→列L2归一或图像亮度归一），并给出保留能量或归一标准。",
              "score": 40,
              "evaluation_focus": "复述明确度",
              "scoring_hint": "高分：逐步复述且包含数值标准（如95%能量、单位L2）；中分：描述步骤但无数值标准；低分：复述含糊或与实现不符。"
            },
            {
              "sub_criteria": "复述邻域 N(j)、局部PCA与 d_j 的关系",
              "description": "明确说明在 N(j) 上实施局部PCA以估计局部维数 d_j，并说明 d_j 的判定规则（如累计能量≥0.95）。",
              "score": 30,
              "evaluation_focus": "方法理解",
              "scoring_hint": "高分：准确写明累计能量阈值和最小样本数要求；中分：提及局部PCA但阈值模糊；低分：未说明 d_j 判定准则。"
            },
            {
              "sub_criteria": "复述 w_{N(j)} 求解与 s_j 的生成流程",
              "description": "明确写出权重求解优化目标（含正则项 η 与仿射约束 ∑w=1 或 L1 稀疏替代）并说明如何扩展为 s_j。",
              "score": 30,
              "evaluation_focus": "算法理解",
              "scoring_hint": "高分：给出具体优化形式、约束与扩展过程；中分：给出优化目标但无约束/正则选择依据；低分：流程不完整或错误。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "建立局部线性近似假设及其适用性",
              "description": "明确假定每个样本的邻域可用低维线性子空间近似，并说明在高曲率或稀疏采样时的限制与处理方法（如增大 k 或报错）。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：定义局部线性假设并给出处理边界（曲率/采样不足）；中分：仅声明假设；低分：无此假设说明。"
            },
            {
              "sub_criteria": "假设噪声模型与正则化策略（η）",
              "description": "给出观测噪声假设（高斯/有界噪声）并据此说明为何选择 Tikhonov 正则 η 或截断SVD 的启发式规则。",
              "score": 25,
              "evaluation_focus": "正则化选择",
              "scoring_hint": "高分：明确噪声模型并给出 η 选择定量规则；中分：提供经验 η 值；低分：无正则化或无说明。"
            },
            {
              "sub_criteria": "假设邻域规模 k 与局部维数 d_j 的关系",
              "description": "说明 k 应满足 k ≥ d_j+1 且建议取 k ∈ [max(d_j+1,10),30]，并说明无法估计 d_j 时的默认策略。",
              "score": 25,
              "evaluation_focus": "参数假设",
              "scoring_hint": "高分：明确阈值区间并实现回退策略；中分：给出区间但无回退；低分：无 k 与 d_j 关联说明。"
            },
            {
              "sub_criteria": "假设输出格式与可复现性要求",
              "description": "说明需保存诊断量、参数与随机种子以保证可复现，并假设对高维数据先做全局PCA或局部随机投影。",
              "score": 25,
              "evaluation_focus": "工程假设",
              "scoring_hint": "高分：提供可复现保存清单并实现；中分：保存部分参数；低分：未考虑复现与数据降维。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建列去偏与列范数归一以输出 X_hat",
              "description": "具体实现列去均值或全局中心化，并按列L2或能量归一得到 X_hat，或对图像做亮度/对比度归一并记录变换参数。",
              "score": 20,
              "evaluation_focus": "数据预处理",
              "scoring_hint": "高分：实现并记录变换矩阵/参数且适配图像特征；中分：实施归一但未记录参数；低分：未实现或实现错误。"
            },
            {
              "sub_criteria": "构建 k-近邻 N(j) 的算法与距离度量",
              "description": "用 KD-tree/Ball-tree/ApproxNN 实现 k 近邻检索，明确距离选择（欧氏或余弦）并输出连通性检查结果。",
              "score": 20,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：使用高效近邻结构并报告连通性；中分：使用朴素搜索无加速；低分：近邻构建有错误或无连通性检查。"
            },
            {
              "sub_criteria": "在邻域上实施局部PCA并估计局部维数 d_j",
              "description": "对每个 N(j) 去均值后做SVD/PCA，计算奇异值谱、累计能量并选取 d_j（如累计≥0.95），同时输出局部重建误差。",
              "score": 20,
              "evaluation_focus": "子空间估计",
              "scoring_hint": "高分：逐样本输出奇异值谱、d_j 与重建误差；中分：仅输出 d_j；低分：PCA实现错误或无重建误差。"
            },
            {
              "sub_criteria": "求解局部线性重建权重 w_{N(j)}（含正则与约束）",
              "description": "明确并实现优化问题 min_w ||x_j - X_{N(j)}w||_2^2 + η||w||_2^2，可选仿射约束 ∑w=1 或 L1 稀疏替代，并在病态邻域使用截断SVD或调整 η。",
              "score": 20,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：实现有约束最小二乘/岭回归并处理病态情况；中分：实现无约束LS或LASSO但无病态处理；低分：权重求解错误或不稳定。"
            },
            {
              "sub_criteria": "生成并存储稀疏先验向量 s_j 与诊断量",
              "description": "将 w_{N(j)} 扩展为长度 N 的稀疏向量 s_j 并保存（稀疏格式），同时记录重建残差、局部维数、邻域条件数等诊断量供后续使用。",
              "score": 20,
              "evaluation_focus": "输出接口",
              "scoring_hint": "高分：s_j 存为稀疏矩阵并含完整诊断；中分：s_j 有但诊断不全；低分：未能生成标准 s_j 或诊断缺失。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值稳定性与正则化 η 的选择与验证",
              "description": "验证并说明 η 的选取原则（交叉验证、谱条件阈值或启发式），并展示在不同 η 下权重稳定性或邻域条件数的影响图表。",
              "score": 25,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：提供 η 选择方法并展示敏感性分析；中分：给出经验 η 并少量验证；低分：无 η 说明或数值不稳定。"
            },
            {
              "sub_criteria": "近邻求解效率与大规模适配（KD-tree/ApproxNN/降维）",
              "description": "评估近邻查询复杂度并在大 N 或高 D 场景中采用 KD-tree/ApproxNN 或先做全局PCA以降低计算，报告运行时间与内存消耗。",
              "score": 25,
              "evaluation_focus": "计算效率",
              "scoring_hint": "高分：在大规模场景使用近邻加速并给出时间内存表；中分：使用加速但无资源报告；低分：未考虑复杂度导致超时/内存错误。"
            },
            {
              "sub_criteria": "局部PCA/截断SVD的正确实现与异常处理",
              "description": "在病态邻域或样本不足时使用截断SVD或退化处理，并记录邻域条件数与是否采用截断，保证 d_j 与重建误差有意义。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：实现截断与回退策略并记录使用情况；中分：检测病态但处理简单；低分：病态未处理导致数值异常。"
            },
            {
              "sub_criteria": "s_j 生成的一致性检验与后续兼容性",
              "description": "验证 s_j 在全数据集的稀疏性、一致性（相互重建率）并保证格式兼容后续自表达模块（维度、稀疏/密集存储）。",
              "score": 25,
              "evaluation_focus": "结果一致性",
              "scoring_hint": "高分：提供稀疏度统计与兼容性说明；中分：生成 s_j 但无一致性检验；低分：s_j 格式或稀疏性不合格。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "实现 X_hat、{N(j)}、{s_j} 的可复现代码并记录参数",
              "description": "代码应生成 X_hat、邻域集合与 s_j，记录超参数与随机种子，输出结构化文件（MAT/npz）以便后续模块加载。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：代码完整可运行并含参数/seed保存；中分：代码可运行但缺少参数记录；低分：代码不可运行或输出不可复现。"
            },
            {
              "sub_criteria": "使用高效库/数据结构（KD-tree、PCA、稀疏矩阵）",
              "description": "优先使用 scikit-learn/knnsearch、scipy SVD、稀疏矩阵存储等以提高效率，并说明在大规模时的替代方案（ApproxNN、局部随机投影）。",
              "score": 25,
              "evaluation_focus": "工程效率",
              "scoring_hint": "高分：使用合适库并说明替代方案；中分：使用库但无扩展方案；低分：使用低效实现导致性能问题。"
            },
            {
              "sub_criteria": "数值稳定性与单元测试覆盖关键功能",
              "description": "提供针对去偏/归一、邻域构建、局部PCA、权重求解的单元测试或断言，验证边界情况（小邻域、零向量、病态矩阵）。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：有单元测试覆盖并通过；中分：部分断言或手工测试；低分：无测试且错误容易发生。"
            },
            {
              "sub_criteria": "输出诊断量的可视化与日志记录",
              "description": "代码应导出局部重建误差分布图、局部维数直方图、邻域条件数分布及离群标记日志以便审查。",
              "score": 20,
              "evaluation_focus": "可视化",
              "scoring_hint": "高分：包含上述图表与日志且可一键生成；中分：生成部分图表；低分：无诊断可视化。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "分析并展示局部重建误差分布与曲率指示",
              "description": "提供每样本局部重建误差的统计汇总与分布图，解释高误差样本是否对应高曲率或采样稀疏，并给出处理建议。",
              "score": 30,
              "evaluation_focus": "误差诊断",
              "scoring_hint": "高分：提供分布、分组分析并提出改进方案；中分：有分布但分析浅显；低分：无误差分布或误解其含义。"
            },
            {
              "sub_criteria": "报告并解释局部维数 d_j 的统计特性",
              "description": "列出 d_j 的均值/中位数/分位数并分析不同样本群的差异，判断是否需要调整 k 或全局降维策略。",
              "score": 25,
              "evaluation_focus": "维数解释",
              "scoring_hint": "高分：给出全面统计并结合数据类型解释；中分：仅给出均值或直方图；低分：无统计或无解释。"
            },
            {
              "sub_criteria": "评估邻域连通性与对后续谱聚类的影响",
              "description": "检查全样本邻接图连通性、孤立点数量，评估这些结构对后序自表达/谱聚类稳定性的潜在影响并提出补救（如增加 k 或合并小连通块）。",
              "score": 25,
              "evaluation_focus": "下游影响",
              "scoring_hint": "高分：量化连通性并给出可操作改进措施；中分：检测连通性但无改进建议；低分：未检查连通性。"
            },
            {
              "sub_criteria": "离群标记与密度指标的验证与处理建议",
              "description": "验证离群标记（精确率/召回或人工检验样本），并给出对离群点的后续处理建议（剔除、弱连接或单独聚类）。",
              "score": 20,
              "evaluation_focus": "异常处理",
              "scoring_hint": "高分：提供验证指标并给出明确处理策略；中分：有标记但无验证；低分：标记随意或无后续建议。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务二（混合全局—局部自表达模型的数学刻画与数值求解）旨在从给定的观测矩阵 X∈R^{D×N}（列为样本）以及可选的局部先验向量集合 {s_j}_{j=1}^N（每个 s_j∈R^N，通常仅在样本 j 的 k 近邻上非零）中联合估计自表达系数矩阵 C∈R^{N×N} 和误差矩阵 E∈R^{D×N}，其范围包括明确的优化目标、约束、可选误差范式与稳定的数值求解步骤（不涉及后续谱分割或预处理细节）；具体化为如下可行的凸近似问题：min_{C,E} α‖C‖_* + β‖C‖_1 + γ ∑_{j=1}^N ‖c_j - s_j‖_2^2 + λ R_E(E) + (μ/2)‖X - X C - E‖_F^2  subject to diag(C)=0，其中 c_j 为 C 的第 j 列，‖C‖_* 为核范数促进低秩结构，‖C‖_1 促逐元素稀疏以控制过度连通，γ 项将解向局部线性先验拉拢，R_E(E) 可选为元素稀疏的 ‖E‖_1 或列稀疏的 ‖E‖_{2,1} 以应对孤立异常；为稳定可解性与高效实现，采用变量分裂引入辅助变量 J 和 S 使得 C=J, C=S，并构造增广拉格朗日或 ADMM 框架交替优化五个子问题：J-update 为核范数近端映射，通过对 (C + dual/ρ) 做奇异值阈值化（SVT）得到 J（实际实现建议用截断/随机 SVD 或 PROPACK 以降低 O(N^3) 成本）；S-update 为逐元素软阈化操作以处理 L1 项；E-update 为逐元素或逐列软阈化（对应 ‖E‖_1 或 ‖E‖_{2,1}）；C-update 则为带二次项的线性最小二乘问题，等价于解形如 (μ X^T X + ρ I) C = μ X^T (X - E) + ρ (J + S - multipliers) 的矩阵方程，实际可用稀疏化策略（仅在每列的 k 近邻索引上求解 C 的对应列）减少变量维度，并用预因子分解、共轭梯度法或稀疏直接解法加速求解；同时在每次更新后强制对角元素为零以维持 diag(C)=0，并更新拉格朗日乘子和 ρ（尺度参数）以保障收敛。算法的初始值可用 C=0、E=0、J=0、S=0，并在迭代中利用 warm-start；收敛判据采用 ADMM 的原始与对偶残差阈值（如相对/绝对残差小于 10^{-4}）或目标函数变化幅度的停机条件，并限制最大迭代次数以保证实际可控时间。为降低计算与存储负担，建议在实现中（1）利用局部约束仅在 k 近邻支撑上维护 C 的稀疏结构，(2) 对 J 的 SVD 使用截断或随机化近似，(3) 对 C-update 利用分块或列并行求解，(4) 在 N 很大时可采用地标近似把问题降至 r×r（r ≪ N）规模；参数选择（α,β,γ,λ,μ,k）可通过小规模交叉验证或基于 J 的奇异值谱与 C 的稀疏度的启发式自适调整来引导。最终该子任务应输出估计的 C 和 E，以及用于诊断的中间量（J 的奇异值、C 的稀疏支撑、每次迭代的原始/对偶残差和目标值），并在实现说明中列明所用数值线性代数工具（如截断/随机 SVD 库、稀疏矩阵求解器、并行/分布式线性代数接口）与复杂度要点，以便在不同规模与维度下进行有效部署。",
      "criteria": {
        "task_understanding": {
          "core_goal": "通过优化带核范数与L1正则的混合全局—局部自表达模型，联合估计自表达矩阵C和误差矩阵E以拟合X≈XC+E并最小化目标函数。",
          "expected_output": "数值最优解：矩阵C(N×N)、矩阵E(D×N)；迭代日志：J的奇异值序列、C稀疏度、原始/对偶残差、目标值；可选：每列支持集与近邻索引。",
          "key_inputs_constraints": "输入：X∈R^{D×N}（列为样本）；可选先验：{s_j}（N×1，仅k近邻非零）；约束：diag(C)=0；目标超参数：α,β,γ,λ,μ,k；误差范式R_E∈{‖E‖_1,‖E‖_{2,1}}；求解需ADMM变量分裂C=J, C=S；数值稳定性要求ρ>0并更新；规模要求支持高维或大N（需SVD与线性解法可扩展）。",
          "modeling_type": "优化+拟合",
          "role_in_pipeline": "作为特征工程后、谱聚类前的系数学习核心模块；前序依赖：子任务一（预处理与局部先验s_j、邻域与诊断）；后续任务：相似度构建与谱聚类、聚类评估与可视化。",
          "assumptions": "若未提供s_j则取全零并将γ降权；X已做基本归一并可直接用于内积与欧氏距离；ADMM收敛阈值默认1e-4，最大迭代500。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别混合全局—局部自表达优化目标",
              "description": "准确写出min_{C,E} α‖C‖_*+β‖C‖_1+γ∑‖c_j−s_j‖_2^2+λR_E(E)+(μ/2)‖X−XC−E‖_F^2，含diag(C)=0与C=J,S变量分裂动机。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：目标与各项功能解释齐全；中分：目标式基本正确但缺1项；低分：未给出完整目标或误解项意义。"
            },
            {
              "sub_criteria": "识别关键对象X, C, E, s_j与约束diag(C)=0",
              "description": "清楚界定X∈R^{D×N}、C∈R^{N×N}、E∈R^{D×N}和先验s_j作用，并强调diag(C)=0避免自环。",
              "score": 25,
              "evaluation_focus": "问题抽象",
              "scoring_hint": "高分：对象维度与作用准确；中分：维度或约束有小误；低分：对象混淆或缺失。"
            },
            {
              "sub_criteria": "误差范式R_E(E)的适用性识别",
              "description": "指出‖E‖_1适合元素级噪声，‖E‖_{2,1}适合列稀疏异常，并影响E-update的近端形式。",
              "score": 20,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：能对比两者并给出使用场景；中分：只提一种且理由笼统；低分：未涉及或错误选择。"
            },
            {
              "sub_criteria": "可扩展性瓶颈识别（SVD与线性解）",
              "description": "识别J的SVT为O(N^3)瓶颈与C-update的(μX^TX+ρI)线性系统，提出截断/随机SVD与分块/并行。",
              "score": 20,
              "evaluation_focus": "复杂度意识",
              "scoring_hint": "高分：点出两类瓶颈与具体缓解法；中分：仅指出1处；低分：未识别复杂度问题。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用任务术语复述X≈XC+E拟合与正则平衡",
              "description": "说明数据重建项(μ/2)‖X−XC−E‖_F^2与低秩α‖C‖_*、稀疏β‖C‖_1、先验γ∑‖c_j−s_j‖_2^2的权衡。",
              "score": 35,
              "evaluation_focus": "表达清晰",
              "scoring_hint": "高分：四项作用与权衡逻辑清楚；中分：缺少1项或表达含糊；低分：不能自洽复述。"
            },
            {
              "sub_criteria": "明确ADMM分裂与子问题列表",
              "description": "复述C=J、C=S分裂后五个更新：J(SVT)、S(软阈)、E(软阈/L2,1)、C(线性方程)、乘子更新。",
              "score": 35,
              "evaluation_focus": "算法框架",
              "scoring_hint": "高分：列全子问题与近端类型；中分：漏1个或类型不准；低分：子问题不清。"
            },
            {
              "sub_criteria": "约束与投影操作复述",
              "description": "强调每次更新后强制diag(C)=0并解释其必要性与实现方式（置零）。",
              "score": 30,
              "evaluation_focus": "细节把握",
              "scoring_hint": "高分：给出具体投影步骤；中分：只口头说明；低分：遗漏或做法错误。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "先验s_j与γ的合理性假设",
              "description": "假设s_j仅在k近邻非零且可能含噪，γ控制对先验的信任并可退化为0。",
              "score": 30,
              "evaluation_focus": "假设设计",
              "scoring_hint": "高分：讨论错误先验的鲁棒性与γ调节；中分：仅述存在；低分：忽略或误用先验。"
            },
            {
              "sub_criteria": "噪声模型与R_E选择假设",
              "description": "给出何时选‖E‖_1 vs ‖E‖_{2,1}的明确假设及对收敛与解稀疏结构的影响。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：将数据情景映射到范式；中分：含糊；低分：不匹配或无。"
            },
            {
              "sub_criteria": "数值稳定性与收敛假设",
              "description": "设定ρ、μ>0，残差阈值1e-4，最大迭代；说明X已归一便于μ尺度选择。",
              "score": 20,
              "evaluation_focus": "数值分析",
              "scoring_hint": "高分：含阈值与理由；中分：仅给范围；低分：未设或不合理。"
            },
            {
              "sub_criteria": "可扩展性与近似假设",
              "description": "对大N采用截断/随机SVD、列并行、邻域支撑求解C的稀疏化近似并说明误差影响可控。",
              "score": 20,
              "evaluation_focus": "工程权衡",
              "scoring_hint": "高分：明确近似方法与影响；中分：仅列方法；低分：无扩展假设。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "完整写出带约束的优化模型与变量分裂",
              "description": "精确公式、变量域、diag(C)=0、C=J,S辅助变量与拉格朗日项构造。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式完备可实现；中分：缺少一处但可补；低分：公式错误。"
            },
            {
              "sub_criteria": "J-update的核范数近端（SVT）",
              "description": "推导J=U·soft(Σ,α/ρ)·V^T并提出截断/随机SVD以降复杂度。",
              "score": 25,
              "evaluation_focus": "优化近端",
              "scoring_hint": "高分：给出阈值与实现策略；中分：仅给SVT；低分：混淆或缺失。"
            },
            {
              "sub_criteria": "S-update与E-update的软阈化形式",
              "description": "S=soft(C+...,β/ρ)；E采用元素soft(λ/ρ)或列soft via block shrinkage for ‖·‖_{2,1}。",
              "score": 20,
              "evaluation_focus": "优化近端",
              "scoring_hint": "高分：两种E范式均给；中分：仅一种；低分：公式不对。"
            },
            {
              "sub_criteria": "C-update线性系统与对角置零投影",
              "description": "构造(μX^TX+ρI)C=μX^T(X−E)+ρ(J+S−dual)，并行按列与邻域支撑求解，随后投影diag=0。",
              "score": 20,
              "evaluation_focus": "线性代数",
              "scoring_hint": "高分：矩阵方程与求解策略明确；中分：仅写方程；低分：推导错误。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "ADMM残差与停机准则",
              "description": "原始/对偶残差计算与阈值(如1e-4)，ρ自适应更新策略，最大迭代与容错。",
              "score": 30,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：给出公式与阈值；中分：只给阈值；低分：无准则。"
            },
            {
              "sub_criteria": "高效SVD实现与复杂度控制",
              "description": "采用截断/随机SVD、PROPACK等；说明目标秩或能量比例与O成本估计。",
              "score": 25,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：工具与参数齐全；中分：仅提名称；低分：全量SVD无交代。"
            },
            {
              "sub_criteria": "C-update加速与稀疏化",
              "description": "使用预因子分解/共轭梯度；仅在k近邻支撑上解列子问题并列并行策略。",
              "score": 25,
              "evaluation_focus": "算法工程",
              "scoring_hint": "高分：方法与并行细节清楚；中分：方法未细化；低分：直接密集解。"
            },
            {
              "sub_criteria": "数值健壮性（正则与病态处理）",
              "description": "Tikhonov正则、截断SVD、条件数监控，异常列的守护（如上限迭代或回退）。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：列出具体守护策略；中分：仅提正则；低分：无防护。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据与变量维度一致性与diag(C)=0实现",
              "description": "严格检查X(D×N)、C(N×N)、E(D×N)与每次更新后对角清零的代码路径。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含断言/单测；中分：手动检查；低分：越界或未置零。"
            },
            {
              "sub_criteria": "近端算子实现正确性（SVT/soft/L2,1）",
              "description": "实现SVT、元素soft、块soft（列范数阈值）并通过数值例子验证。",
              "score": 25,
              "evaluation_focus": "算法正确性",
              "scoring_hint": "高分：含单元测试与误差<1e-6；中分：人工验证；低分：实现错误。"
            },
            {
              "sub_criteria": "可扩展实现（截断SVD与列并行）",
              "description": "调用高效SVD库，列并行或稀疏求解C，支持大N的内存与时间控制。",
              "score": 25,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：基准显示随N亚二次增长；中分：仅局部优化；低分：不可运行于中等规模。"
            },
            {
              "sub_criteria": "日志与诊断量输出",
              "description": "记录J奇异值、C稀疏度、残差、目标值；支持早停与检查点。",
              "score": 25,
              "evaluation_focus": "可观测性",
              "scoring_hint": "高分：结构化日志与可视化钩子；中分：部分记录；低分：无日志。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "目标值与残差收敛性评估",
              "description": "报告原始/对偶残差曲线与目标值单调下降，满足阈值1e-4或给出收敛理由。",
              "score": 30,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：曲线/数表齐全；中分：口头说明；低分：无评估或不收敛。"
            },
            {
              "sub_criteria": "C的结构诊断（低秩与稀疏度）",
              "description": "展示J奇异值谱衰减与C非零率、邻域内集中度，验证低秩+稀疏目标达成。",
              "score": 25,
              "evaluation_focus": "结构解释",
              "scoring_hint": "高分：给出阈值/占比数据；中分：定性描述；低分：无或矛盾。"
            },
            {
              "sub_criteria": "先验一致性与鲁棒性分析",
              "description": "比较c_j与s_j的偏差‖c_j−s_j‖_2分布，讨论γ变化对拟合与稀疏度影响。",
              "score": 25,
              "evaluation_focus": "敏感性分析",
              "scoring_hint": "高分：曲线或箱线图；中分：少量实验；低分：未分析。"
            },
            {
              "sub_criteria": "误差范式选择的效果对比",
              "description": "对比‖E‖_1与‖E‖_{2,1}下的E稀疏模式与残差，说明选择理由。",
              "score": 20,
              "evaluation_focus": "对比实验",
              "scoring_hint": "高分：定量对比与结论；中分：定性对比；低分：无对比。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（可扩展性、核/深映射与在线增量机制）应独立负责把原始自表达/谱聚类框架扩展到大规模或强非线性数据情形，目标是提出并实现三条可并行运作的工程路线――地标/Nystrom 近似以降低变量规模、核化或核PCA 映射以处理中等规模非线性、以及深自编码器端到端映射以处理大规模强非线性数据，并同时给出新样本的在线增量更新规则和实用实现细节；输入为预处理后的数据矩阵 X∈R^{D×N}（或其核矩阵 K 或深编码 Z=f_θ(X)）、用户指定的资源约束 r（地标数）、批量大小 b、与若干超参数（正则权重与邻域大小 k），输出包括降维/近似表示（地标系数矩阵 C_L 或嵌入 Z）、用于谱聚类的稀疏亲和近似以及对新到样本的快速系数估计与可选地标更新策略。具体实施步骤与技术要点如下：1) 地标/Nystrom 路线：用 k-means、远点采样（farthest point sampling）或随机采样选取 r ≪ N 个地标 L，构造地标子问题在 L 上求解混合自表达（例如用 ADMM 求解带核范数与稀疏项的 C_L），将剩余样本通过小规模稀疏回归（LASSO/带正则的最小二乘）在地标字典上求系数 B，从而把全局 N×N 变量近似为 r×r 与 r×(N−r) 两块；用截断/随机 SVD 或 PROPACK 在地标上做低秩分解以降低 SVD 成本，谱嵌入通过 Nystrom 扩展将地标的特征向量外推到非地标样本，实现复杂度由 O(N^3) 降到 O(r^3 + rN)；对新样本 x_new，直接在地标上解稀疏回归或用正规化最小二乘获得其系数，再用 Nystrom 公式快速给出其谱嵌入以供在线聚类或插值。2) 核化路线：当 N 中等且数据非线性但可用核方法处理时，构造核矩阵 K (N×N) 或其 Nystrom 近似 K ≈ K_{:,L} K_{L,L}^{−1} K_{L,:}，在核特征空间上用核PCA 得到低维 Z 或直接在核矩阵上以核技巧重写自表达目标（用核化的 ADMM 或核化低秩表示），并用随机化奇异值分解与 Nystrom 技术控制内存；新样本通过计算 k(x_new, L) 并用 Nystrom 扩展得到其嵌入。3) 深映射路线：设计一个自编码器 f_θ: R^D→R^{d_z}（bottleneck d_z 约几十到数百）并在瓶颈层加入自表达模块（或交替优化自编码器参数 θ 与自表达系数 C,E）；训练以最小化重建误差 + 自表达重构误差 + 稀疏/低秩正则，采用 mini-batch SGD/Adam、GPU 加速与梯度截断并使用早停与 L2/dropout 正则防过拟合；C,E 更新仍可用 ADMM（在批次内或小规模地标上）或以近似稀疏回归实现，训练策略为交替迭代：若干步更新 θ（固定 C），若干步更新 C,E（固定 Z）；新样本在线映射通过前向传播获得 z_new，再在低维字典/地标上求其稀疏系数。4) 在线与增量策略（跨三条路线通用）：对新样本采用“固定字典 + 快速回归”的策略——在地标/编码字典上用 LASSO/岭回归得到系数并用 Nystrom 扩展嵌入；周期性（基于时间窗、样本数或性能退化检测）用最近到达样本执行地标重选或增量更新地标集合（可用 reservoir sampling 或 k-means++ 增量）并用在线 ADMM 或坐标下降在小批量上更新 C_L；为保证数值与内存可控，对所有矩阵分解采用截断/随机SVD 并利用稀疏矩阵格式，邻域搜索用 ANN（如 FAISS、Annoy 或 scikit-learn 的 BallTree/KDTree）加速。5) 实现与工具建议：推荐用 Python 生态（NumPy/SciPy、scikit-learn、faiss、scipy.sparse.linalg、sklearn.linear_model 的 Lasso/Ridge、PyTorch 或 TensorFlow 用于深网络、以及现成的 ADMM/优化库）或 MATLAB（knnsearch、svds、lsqlin、cvx/ADMM 实现）完成原型；在 N 很大时优先选择地标/Nystrom 路线并并行化邻域构建与回归求解。该子任务的成功交付应包含可复现的代码模块（地标选择、地标上自表达求解、非地标样本系数估计、Nystrom 扩展与新样本在线更新），复杂度与内存估计（以 r、N、D、b 表示），以及一组默认超参数建议（如 r、batch_size、截断SVD秩、稀疏正则 λ）以便在不同硬件资源约束下直接部署。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在可扩展自表达/谱聚类框架中优化与实现地标/Nystrom、核PCA/核化自表达与深自编码器三路线，并评估在线增量更新以处理大规模或强非线性数据。",
          "expected_output": "降维或近似表示（C_L、B 或嵌入 Z）、稀疏亲和近似矩阵（用于谱聚类）、新样本在线系数与嵌入更新规则、复杂度与内存估计报告、可复现实验代码与默认超参数。",
          "key_inputs_constraints": "输入：预处理后的 X∈R^{D×N} 或核矩阵 K 或深编码 Z=f_θ(X)；超参：地标数 r、批量大小 b、邻域大小 k、稀疏/低秩正则 λ、岭系数 η；约束：r≪N、内存受限（需使用随机/截断SVD）、支持在线新样本 x_new；前置：已完成子任务一的规范化与邻域信息。",
          "modeling_type": "优化+拟合+分类",
          "role_in_pipeline": "作为可扩展表示学习与亲和构建模块，位于预处理（子任务一）之后、谱聚类与下游任务之前；直接依赖预处理的 X 与邻域/先验，向后序的谱嵌入与聚类提供亲和近似与嵌入；承担在线增量更新以服务实时聚类/插值。",
          "assumptions": "若核矩阵 K 未提供，则需通过选定核函数并可能用Nystrom近似构造；深模型以中等规模 d_z（32–256）与SGD/Adam训练，采用早停；默认使用余弦或RBF核。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "规模瓶颈识别（O(N^3)→O(r^3+rN))",
              "description": "是否明确谱分解/自表达在全量 N×N 上的计算与内存瓶颈，并提出以地标/Nystrom降阶的必要性与目标。",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：量化复杂度与内存，给出r带来的下降公式；中分：指出瓶颈但无量化；低分：未识别或提出无效措施。"
            },
            {
              "sub_criteria": "非线性处理路径选择（核/深）",
              "description": "能区分中等规模非线性（核化）与大规模强非线性（深自编码器）的适用边界与选择准则。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出N、D、内存与训练时长的切换阈值；中分：仅定性描述；低分：路径混淆或单一路径。"
            },
            {
              "sub_criteria": "在线增量需求识别（x_new插值）",
              "description": "是否明确新样本需快速获得系数与谱嵌入，并提出固定字典+快速回归或Nystrom扩展。",
              "score": 30,
              "evaluation_focus": "系统意识",
              "scoring_hint": "高分：给出每样本O(r)或O(r log r)时间估计；中分：仅描述流程；低分：忽略在线需求。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "核心目标重述（地标/Nystrom、核PCA、深自编码器）",
              "description": "准确复述三条路线的输入输出：C_L/B 或 Z、亲和近似与在线更新规则。",
              "score": 35,
              "evaluation_focus": "表达准确",
              "scoring_hint": "高分：逐一路线配对输入输出；中分：遗漏一项；低分：混淆或表述不清。"
            },
            {
              "sub_criteria": "超参数与资源约束复述（r,b,k,λ,η）",
              "description": "清楚指明 r、b、k、λ、η 的作用与对复杂度/稀疏度/稳定性的影响。",
              "score": 35,
              "evaluation_focus": "要素把握",
              "scoring_hint": "高分：指出r对内存线性影响、λ对稀疏率影响；中分：部分到位；低分：不对应或缺失。"
            },
            {
              "sub_criteria": "前后依赖定位（接子任务一，供谱聚类）",
              "description": "明确依赖预处理产物（X、邻域、先验）并输出亲和矩阵/嵌入供谱聚类使用。",
              "score": 30,
              "evaluation_focus": "流程意识",
              "scoring_hint": "高分：列出具体依赖与产出接口；中分：泛化描述；低分：断链。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "地标覆盖性假设与选取策略（k-means/FPS）",
              "description": "说明数据多流形下需代表性地标，提出k-means++或远点采样及其覆盖性理由。",
              "score": 35,
              "evaluation_focus": "假设合理",
              "scoring_hint": "高分：讨论类内覆盖与类间间隔；中分：只给算法名；低分：随机采样且无理由。"
            },
            {
              "sub_criteria": "核方法可分性与K近似假设（Nystrom）",
              "description": "阐明核映射下近似低秩与Nystrom误差受r影响的假设与限制。",
              "score": 30,
              "evaluation_focus": "数理推断",
              "scoring_hint": "高分：提及谱衰减、r对误差上界影响；中分：定性；低分：无假设或错误。"
            },
            {
              "sub_criteria": "深自编码器表达能力与正则假设",
              "description": "提出瓶颈维度d_z、早停、L2/dropout可防过拟合的前提与适用范围。",
              "score": 35,
              "evaluation_focus": "模型洞察",
              "scoring_hint": "高分：给出d_z范围与过拟合征兆；中分：泛化表述；低分：无正则假设。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "地标子问题与Nystrom扩展公式",
              "description": "给出在L上求解C_L（核范数/稀疏项）的目标，并写明特征向量由r×r扩展至N的Nystrom公式。",
              "score": 35,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：写出K_{:,L}K_{LL}^{-1}形式或谱外推步骤；中分：仅口述；低分：缺失。"
            },
            {
              "sub_criteria": "核化路线（核PCA/核化自表达）目标重写",
              "description": "明确在核空间的优化表达与如何用随机/截断SVD控制内存。",
              "score": 30,
              "evaluation_focus": "公式化",
              "scoring_hint": "高分：列出核中心化与特征分解步骤；中分：概述；低分：无公式。"
            },
            {
              "sub_criteria": "深映射损失设计（重建+自表达+正则）",
              "description": "构建联合损失，说明交替更新θ与C,E的训练策略与批量化细节。",
              "score": 35,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：给出权重系数与交替步数策略；中分：只列项；低分：缺失或混乱。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "复杂度控制（r、b、截断SVD秩）",
              "description": "量化地标与随机SVD的时间/空间开销，给出随r、b变化的估计与可行默认值。",
              "score": 35,
              "evaluation_focus": "复杂度",
              "scoring_hint": "高分：给出O(r^3+rN)、内存O(rN)等；中分：定性；低分：缺失估计。"
            },
            {
              "sub_criteria": "优化器与收敛（ADMM/LASSO/SGD）",
              "description": "为C_L与B选取ADMM/LASSO或岭回归，为深路线上述优化器并阐述收敛/早停准则。",
              "score": 35,
              "evaluation_focus": "数值优化",
              "scoring_hint": "高分：列容差、最大迭代、学习率调度；中分：仅工具名；低分：无策略。"
            },
            {
              "sub_criteria": "在线更新规则（x_new）",
              "description": "新样本在地标字典上解LASSO/岭并用Nystrom获得谱嵌入，含时间估计与退化检测触发地标重选。",
              "score": 30,
              "evaluation_focus": "在线机制",
              "scoring_hint": "高分：给出触发阈值（重建误差/密度下跌）；中分：流程无阈值；低分：未提供。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现模块化实现（选择/求解/扩展）",
              "description": "提供地标选择、地标上自表达求解、非地标系数估计、Nystrom扩展与核/深路线代码接口。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：清晰API与单元测试；中分：可运行但耦合；低分：缺模块或不可运行。"
            },
            {
              "sub_criteria": "数值稳定与稀疏/大矩阵处理",
              "description": "使用截断/随机SVD、稀疏格式、正则化（η）、条件数监控与异常处理。",
              "score": 30,
              "evaluation_focus": "工程稳健",
              "scoring_hint": "高分：明确稀疏存储与回退路径；中分：部分实现；低分：内存溢出或数值异常。"
            },
            {
              "sub_criteria": "GPU/并行与批处理（b）",
              "description": "对深路线启用GPU、对回归/邻域并行化，合理设置batch size b与数据管道。",
              "score": 20,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：测得吞吐对b的曲线；中分：开启但无验证；低分：单线程慢。"
            },
            {
              "sub_criteria": "默认超参数与配置管理（r,k,λ,η,d_z）",
              "description": "提供不同资源档位的默认值与可配置化加载保存。",
              "score": 20,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：含小/中/大配置模板；中分：单一默认；低分：硬编码。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "亲和近似质量与聚类效果评估",
              "description": "报告谱嵌入可分性与聚类NMI/ARI或误差对比基线（全量小样本）。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：提供NMI/ARI≥基线且误差曲线；中分：指标不全；低分：无量化评估。"
            },
            {
              "sub_criteria": "复杂度/内存与r,b敏感性分析",
              "description": "展示随r、b变化的时间/内存/精度折中并给出推荐区间。",
              "score": 30,
              "evaluation_focus": "权衡分析",
              "scoring_hint": "高分：有曲线与最佳点；中分：表格或定性；低分：无分析。"
            },
            {
              "sub_criteria": "在线增量性能与漂移处理",
              "description": "报告x_new的平均延迟与当误差上升时的地标重选收益。",
              "score": 20,
              "evaluation_focus": "在线评测",
              "scoring_hint": "高分：给出毫秒级/样本与触发阈值效果；中分：仅延迟；低分：缺失。"
            },
            {
              "sub_criteria": "鲁棒性与非线性场景对比（核vs深）",
              "description": "在非线性数据上比较核化与深路线的精度与资源占用。",
              "score": 15,
              "evaluation_focus": "对比实验",
              "scoring_hint": "高分：两路线对照与结论；中分：单侧展示；低分：无对比。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务 4（后处理、谱聚类、自适应参数与验证）——范围与目标：本子任务接受一个自表达/相似度矩阵（记作 C 或任意 N×N 亲和矩阵 A）以及可选的样本异常度量（例如每列误差的范数），独立完成从相似度到最终簇标签的所有步骤，并输出：每个样本的簇标签、（如未给定则）自动估计的簇数 K、谱嵌入（用于可视化和不确定性评估）、若干诊断量（特征值谱、簇尺寸分布、样本置信度）以及可重复的参数选择建议。方法与具体步骤：首先构造对称稠密/稀疏亲和矩阵 A，优先采用 A = sym(|C|)（sym 可为 max(|C|,|C|^T) 或 (|C|+|C|^T)/2），随后对 A 进行可控稀疏化以去除弱连接（两种互补策略：列/行保留 top-t 最大值，t 可取 max(5, round(0.01·N))；或按固定分位数阈值保留如前 5% 强度），稀疏化时保证图连通性（若结果产生孤立节点或过多连通分量，则用最小生成树补连或降低阈值）；可选地按列/行做自适应尺度归一化（例如用局部尺度 σ_j = 距离到第 k 近邻，转换为 RBF 权重 A_ij = A_ij · exp(−d_ij^2/(σ_i σ_j)))以减小不同密度区域的偏差。其次构造规范化图拉普拉斯并做特征分解：推荐使用對稱規範化拉普拉斯 L_sym = I − D^(−1/2) A D^(−1/2)（D 为度矩阵），用稀疏特征求解器（scipy.sparse.linalg.eigsh / ARPACK）求前 m ≈ K_max+5 个最小特征值及对应特征向量（对大 N 推荐用 Nystrom 或随机化 SVD 近似）；若 K 未知，优先用 eigengap 启发式（查找按大小排序的相邻特征值差最大点）给出候选 K，并用两种验证策略（1）稳定性重采样：在多个子样本或加噪版本上重复谱聚类，计算标签一致性（ARI 的分布），选择使稳定性最大化的 K；（2）基于谱嵌入的轮廓系数或聚合度量（平均 silhouette、聚内/聚间比）作为辅助判据。第三步为聚类：对所选前 K 个特征向量的行进行 L2 归一化后在低维嵌入空间用 K-means 聚类（多次重启，例如 n_init=50，max_iter=300）得到初始标签；对 small-N 或簇数不固定情况下，可替换为层次聚类或 DBSCAN（基于谱嵌入的密度聚类）以适应非球形簇。第四步为后处理与自适应修正：检测并处理小簇（簇大小 < min_size，可设为 max(5,0.5%N)），将微小簇合并到最近簇或标记为异常；用误差矩阵列范数或谱嵌入中距离质心的 z-score 计算每个样本的置信度并输出；如需提高边界点处的精度，实施一轮自训练/标签传播：用初始标签重权亲和矩阵（将跨簇边权按因子 η∈[0,0.2] 缩弱）或仅保留同簇邻域重构先验，重新计算拉普拉斯并重复谱聚类 1–3 次，直至标签稳定或性能不再提升。参数自适与选择策略：默认参数建议为稀疏化保留 top-t（t = max(5, round(0.01·N)））、k 用于局部尺度设为 10–30、K_max 取 20 或 floor(0.1·N) 的较小值、eigengap 窗口考察前 50 个特征值；对阈值、t、k 的敏感性应通过绘制性能曲线（ACC/NMI/ARI 对参数）来评估并选择稳健区间；对于大规模数据，优先使用稀疏矩阵表示与基于 Nystrom 的近似特征分解以控制内存与时间复杂度。实现建议与工具：使用稀疏线性代数库（SciPy sparse）、特征分解函数 eigsh 或 ARPACK、sklearn.cluster.KMeans（设多次重启）与 sklearn.metrics（ARI、NMI、silhouette），用 NetworkX 或自写例程检测图连通性并生成最小生成树补连；对可视化与诊断输出生成特征值谱图、簇大小直方图、每个样本的置信度分布。交付物与诊断输出：返回最终标签向量、估计的 K、谱嵌入矩阵、处理后的稀疏亲和矩阵 A_sparse、特征值序列、簇内/簇间统计、每样本置信度以及参数配置文件；若启用自动 K 估计同时输出候选 K 列表及对应的稳定性/轮廓评分以便人工复核。总体要求是保证数值稳定、对稀疏化与阈值选择具有鲁棒的默认设置，并提供明确的可复现步骤与可视化诊断以支持后续模型调整或人工干预。",
      "criteria": {
        "task_understanding": {
          "core_goal": "从给定自表达/相似度矩阵A（或C）优化构造规范化图拉普拉斯并完成谱聚类，自动估计簇数K、输出簇标签与谱嵌入并评估稳定性与置信度。",
          "expected_output": "簇标签向量（长度N）、估计簇数K、谱嵌入矩阵（N×K或N×m）、稀疏亲和矩阵A_sparse、特征值序列与eigengap图、簇尺寸统计、样本置信度/不确定性、参数配置与稳定性指标（如ARI分布/轮廓系数）。",
          "key_inputs_constraints": "输入A或C为N×N（C需经A=sym(|C|)转换）；若提供E或列范数用于异常度量；N可大需用稀疏存储；图稀疏化需保持连通或用MST补连；特征分解用L_sym最小特征对且需数值稳定（首个特征向量常为常量向量）。",
          "modeling_type": "分类+评价+优化",
          "role_in_pipeline": "作为后处理与聚类决策环节：依赖前序的预处理/自表达（子任务一、二、三）提供A或C与可选异常度量；向后续可视化与任务结果汇报输出最终标签、谱嵌入与诊断。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别A=sym(|C|)与亲和稀疏化需求",
              "description": "明确从自表达矩阵C构造A=sym(|C|)并执行列/行top-t或分位数阈值稀疏化，说明保连通策略。",
              "score": 35,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出A=sym(|C|)与具体t= max(5, round(0.01·N))或分位数阈；提及MST补连。中分：只阐述对称化或稀疏化之一。低分：直接将C用于谱分解或忽略稀疏化/连通性。"
            },
            {
              "sub_criteria": "规范化图拉普拉斯选择L_sym",
              "description": "指出使用L_sym=I−D^{-1/2}AD^{-1/2}而非未归一或随机游走版本，并阐述适用性。",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚给出L_sym公式与优点（数值稳定/谱性质）。中分：只给出某种拉普拉斯但无理由。低分：未做规范化或表达错误。"
            },
            {
              "sub_criteria": "自动估计簇数K与eigengap",
              "description": "指出用特征值谱与eigengap启发式，并辅以稳定性重采样或轮廓系数。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：描述eigengap+稳定性(ARI)或轮廓双重判据。中分：仅eigengap。低分：固定K或无说明。"
            },
            {
              "sub_criteria": "异常与小簇处理",
              "description": "识别用E列范数或嵌入距离z-score评估置信度并处理微小簇。",
              "score": 15,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：给出min_size=max(5,0.5%N)与合并/标注策略。中分：仅提到异常。低分：无任何后处理。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "从C到A的管线复述",
              "description": "清晰复述C→A=sym(|C|)→稀疏化→尺度归一→L_sym→eigengap→K-means→标签。",
              "score": 40,
              "evaluation_focus": "表达与流程",
              "scoring_hint": "高分：逐步完整且次序正确。中分：缺1–2步。低分：流程混乱或关键步缺失。"
            },
            {
              "sub_criteria": "参数自适与默认值",
              "description": "说明t、k、K_max、n_init等默认与自适建议。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：给出t= max(5,1%N), k=10–30, K_max=min(20, floor(0.1N)), n_init=50。中分：部分参数。低分：未给参数。"
            },
            {
              "sub_criteria": "规模与近似说明",
              "description": "复述大N下用稀疏eigsh/Nystrom、随机SVD的必要性。",
              "score": 30,
              "evaluation_focus": "工程意识",
              "scoring_hint": "高分：指出O(N^3)瓶颈与替代工具。中分：泛泛而谈加速。低分：无规模考虑。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "图连通性与稀疏化假设",
              "description": "阐明稀疏化后图需连通，否则以MST或降阈修复。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出检测连通分量并修复步骤。中分：只提连通。低分：未考虑。"
            },
            {
              "sub_criteria": "局部尺度归一假设",
              "description": "提出σ_j取第k近邻距离进行RBF重权以缓解密度差异。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：A_ij←A_ij·exp(−d_ij^2/(σ_iσ_j))或同等说明。中分：提到自适应尺度无公式。低分：无或不当。"
            },
            {
              "sub_criteria": "特征值谱与K的可分性假设",
              "description": "假设前K个特征值接近0且存在明显eigengap。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：表述L_sym理论性质与eigengap判据。中分：只说看谱。低分：未陈述。"
            },
            {
              "sub_criteria": "异常度量有效性",
              "description": "假设E列范数或嵌入距离能指示异常并设阈(z-score)。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：给出z>3或分位数阈值。中分：仅笼统标注异常。低分：无阈或无度量。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "A构造与对称化/稀疏化实现",
              "description": "给出A=max(|C|,|C|^T)或(|C|+|C|^T)/2，并定义top-t/分位数阈值策略与保对角零。",
              "score": 30,
              "evaluation_focus": "算法细节",
              "scoring_hint": "高分：两种对称化方式与具体t/分位数规则。中分：仅一种。低分：不对称或未稀疏。"
            },
            {
              "sub_criteria": "L_sym与度矩阵D的构造",
              "description": "明确D=diag(A1)，L_sym=I−D^{-1/2}AD^{-1/2}的数值细节（处理零度）。",
              "score": 25,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：说明零度添加微量或连通修复。中分：仅给公式。低分：错误公式。"
            },
            {
              "sub_criteria": "K选择与验证模块",
              "description": "构建eigengap搜索与稳定性重采样/轮廓的双轨验证。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：定义候选K列表与选择准则。中分：只有eigengap。低分：无模块。"
            },
            {
              "sub_criteria": "后处理与标签传播",
              "description": "设计小簇合并、置信度计算与一次标签传播/重权亲和再聚类。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：给η∈[0,0.2]缩弱跨簇边再聚类。中分：仅小簇处理。低分：无后处理。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "稀疏特征分解策略",
              "description": "使用eigsh/ARPACK求L_sym最小m个特征，并说明m≈K_max+5与收敛容差。",
              "score": 35,
              "evaluation_focus": "数值求解",
              "scoring_hint": "高分：设置tol≤1e-4与稀疏存储。中分：使用通用eig但无稀疏。低分：全阵分解大N下不可行。"
            },
            {
              "sub_criteria": "Nystrom/随机SVD近似",
              "description": "在大N给出Nystrom或随机化SVD降低O(N^3)成本。",
              "score": 25,
              "evaluation_focus": "复杂度控制",
              "scoring_hint": "高分：复杂度O(r^3+rN)与r选择。中分：仅提近似。低分：无近似。"
            },
            {
              "sub_criteria": "嵌入行归一与K-means设置",
              "description": "对前K特征向量做行L2归一，K-means n_init≥50, max_iter≥300。",
              "score": 25,
              "evaluation_focus": "算法细节",
              "scoring_hint": "高分：同时固定随机种子与并行。中分：部分参数。低分：未归一或默认弱设置。"
            },
            {
              "sub_criteria": "连通性修复与MST补连",
              "description": "在稀疏化后检测连通分量并用MST/降低阈值修复。",
              "score": 15,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：实现两种修复策略之一。中分：检测无修复。低分：忽略。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "稀疏矩阵与线性代数库的正确使用",
              "description": "使用SciPy sparse、eigsh/ARPACK，避免密集存储与不必要复制。",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：A/L_sym均为csr/csc并节省内存。中分：混用稀疏/密集。低分：全密集导致不可扩展。"
            },
            {
              "sub_criteria": "可复现实验参数与随机种子",
              "description": "固定random_state，保存参数配置与日志（特征值、t、k、K）。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：统一随机种子与配置导出。中分：部分固定。低分：结果不可复现。"
            },
            {
              "sub_criteria": "大规模近似实现接口",
              "description": "提供Nystrom/随机SVD与r、近邻比例的可调API。",
              "score": 20,
              "evaluation_focus": "可扩展性",
              "scoring_hint": "高分：参数可配置且有默认。中分：硬编码近似。低分：无接口。"
            },
            {
              "sub_criteria": "异常与小簇处理代码路径",
              "description": "实现z-score置信度、小簇合并/标注与一次标签传播。",
              "score": 20,
              "evaluation_focus": "鲁棒实现",
              "scoring_hint": "高分：阈值可调且单元测试。中分：只实现其一。低分：未实现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "特征值谱与eigengap可视化",
              "description": "提供前m个特征值与最大eigengap位置，并讨论所选K的合理性。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：图+文字解释；中分：仅图或仅文字；低分：无谱分析。"
            },
            {
              "sub_criteria": "稳定性重采样与ARI/轮廓",
              "description": "报告多次重采样的ARI分布或平均轮廓系数并据此选择K。",
              "score": 25,
              "evaluation_focus": "统计验证",
              "scoring_hint": "高分：≥10次重采样且给均值/方差。中分：少量或单指标。低分：无验证。"
            },
            {
              "sub_criteria": "簇尺寸分布与小簇处理说明",
              "description": "展示簇大小直方图并解释小簇合并或异常标注的影响。",
              "score": 20,
              "evaluation_focus": "诊断分析",
              "scoring_hint": "高分：给出前后对比与阈值理由。中分：只列数。低分：不报告。"
            },
            {
              "sub_criteria": "样本置信度与边界点识别",
              "description": "基于嵌入到质心距离z-score或E范数给出置信度分布与边界样本清单。",
              "score": 25,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：提供阈值与样例列表。中分：仅整体分布。低分：未评估。"
            }
          ]
        }
      }
    }
  }
}