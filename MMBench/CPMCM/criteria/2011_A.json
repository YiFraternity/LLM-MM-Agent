{
  "task_id": "2011_A",
  "problem": "上述关于光子波粒二象性的猜想在一定程度上能够自圆其说，但只是定性的，还应该经过定量计算的检验。如果经过数学模型的仿真，肯定无法得到和大量物理实验相吻合的结果，则可以否定该猜想，如果在一定条件下可以得到和大量物理实验相吻合的结果，则上述猜想就前进一步，至少目前不能轻易否定。当然既然是猜想就很可能有错误，尤其对这样难度空前的问题，能够完全解释倒是不正常的。你们的任务是建立仿真这些猜想的数学模型，例如：单缝衍射中衍射缝的尺寸以及光子模型中的尺度、频率等参数对衍射屏上光强的空间分布形式的影响；双缝干涉试验中两条缝之间的距离、缝的宽度与干涉光图样的光强空间分布形式的关系等，并将你们模型得到的结果与诺贝尔物理奖获得者玻恩的光学经典名著《光学原理》p374（见附件4的 2）中的光的衍射、双缝干涉、多缝干涉的强度近似公式进行比较。你们也完全可以提出改进，而且也可以提出自己的猜想，设法做出尽可能多的数学仿真。\n\n衍射缝（孔）的个数记为 $N$，衍射缝的宽度记为 $s$，衍射缝的间距记为 $d$。参数 $p$ 未给出明确定义，可能与相位或光程差相关。入射光束与衍射光栅面的法线的夹角记为 $\\theta_0$，而衍射光线与衍射光栅面的法线的夹角记为 $\\theta$。符号 $k$ 为一个参数，通常表示波数；$\\omega$ 表示光的圆频率；$c$ 表示真空光速。",
  "subtask": {
    "1": {
      "task_understanding": {
        "core_goal": "定义并规范化用于仿真光子微观/配对/宏观三层模型的数学模型与接口，输出可复现的模型规范文档以便数值实现与评估（包括退化到经典衍射/干涉解的检验）",
        "expected_output": "机器可读的模型规范文档（PDF + JSON/YAML 参数模板），完整符号表与单位，无量纲化规则，三层模型的基准方程（LaTeX 表达），T(x) 与 T_eff(x)、S_edge(x)、N_pair(x) 的候选参数化形式与接口说明，退化检验推导，示例伪代码/函数签名（不含数值解算器）",
        "key_inputs_constraints": "1) 必要输入：波长 λ（或 k=2π/λ/ω/c）、缝宽 s、缝距 d、缝数 N、光子内部尺度 a、边缘相互作用尺度 r_int、入射/观察角 θ0, θ（均需标注单位）；2) 必要前置条件：提供经典参考式（如 I_classic_single(θ) 与 I_classic_N(θ)）与附件中所述假设，若使用近场/远场公式须指定 L 与远/近场判据；3) 数据格式约束：参数模板需为 JSON/YAML（含默认值与允许范围）；4) 物理约束：需保证在实现中记录能量守恒与局域湮灭/增强的能量账目；5) 其它限制：本子任务不涉及量子光学理论推导（若引用须明确来源）",
        "modeling_type": "仿真+评价",
        "role_in_pipeline": "作为建模规范与接口定义的前置子任务，位于数值实现与标定之前；依赖：文献与附件（经典衍射公式、猜想描述）与实验基线数据；为后续数值求解、参数校准、灵敏度分析与结果对比提供规范性输入和接口（后序任务：数值实现 → 校准/拟合 → 仿真结果分析）"
      },
      "evaluation_criteria": {
        "问题识别": [
          {
            "sub_criteria": "识别并表述“定义并规范化用于仿真光子微观/配对/宏观三层模型”的核心目标",
            "description": "必须明确写出子任务的核心动作（如“定义/规范化/输出/评估”）与对象（例如“三层模型”、“T_eff(x) 与经典退化”），并给出简短目标语句与实施范围界定。",
            "score": 40,
            "evaluation_focus": "任务聚焦",
            "scoring_hint": "高分：明确写出“定义并规范化三层模型”、“输出机器可读规范（PDF+JSON）”并列出退化到经典解为验证目标；中分：目标表述含糊但提到三层模型或T_eff；低分：未提及三层分层结构或未包含退化/验证要求。"
          },
          {
            "sub_criteria": "识别并列出必须的输入与约束（符号、单位、无量纲组）",
            "description": "是否列出了波长λ或波数k、s、d、N、a、r_int、θ0、θ、E_in(x)、L 等关键输入变量与单位，并指出应给出无量纲化规则（如 a/λ、s/λ 等）。",
            "score": 30,
            "evaluation_focus": "符号/单位",
            "scoring_hint": "高分：提供完整符号表草案（≥8项）并说明无量纲组与量级范围；中分：列出主要符号但无明确无量纲化规则或范围；低分：仅列出少数符号或遗漏关键量（如 a 或 r_int）。"
          },
          {
            "sub_criteria": "识别并提出关键物理/数学约束（退化条件与守恒）",
            "description": "是否识别了退化条件（a→0、r_int→0、散射概率→0、关闭配对项时 T_eff→T）与必须保证的守恒条件（能量守恒与动量投影统计一致性或能量账目记录）。",
            "score": 30,
            "evaluation_focus": "物理约束",
            "scoring_hint": "高分：明确列出退化极限的数学表述并要求守恒账目；中分：指出守恒需求或退化但未给出数学极限表达；低分：未提退化条件或忽视守恒记录。"
          }
        ],
        "问题复述": [
          {
            "sub_criteria": "重述预期输出形式（机器可读规范、LaTeX 方程、JSON 参数模板）",
            "description": "复述应准确包含 PDF + JSON/YAML 参数模板、LaTeX 表达的方程、示例伪代码或函数签名等具体交付物类型。",
            "score": 40,
            "evaluation_focus": "输出要求",
            "scoring_hint": "高分：逐项列出交付物（PDF/JSON/YAML/LaTeX/伪代码）并说明每项内容；中分：提到部分交付物但缺少格式或细节；低分：未说明机器可读模板或忽视 LaTeX 方程要求。"
          },
          {
            "sub_criteria": "复述三层结构（微观相互作用层 / 配对层 / 宏观传播层）及各自职责",
            "description": "需准确复述三层层名并说明每层应输出的局域量（如碰撞判据、Δθ、Δφ_scatt、配对触发条件、T_eff 修正项形式）。",
            "score": 30,
            "evaluation_focus": "层次理解",
            "scoring_hint": "高分：三层名与至少一项具体输出量精确对应（例如微观层输出散射截面、配对层输出湮灭/增强规则、宏观层输出 T_eff(x)）；中分：层次正确但输出项模糊；低分：层次混淆或缺失。"
          },
          {
            "sub_criteria": "复述验证与退化检验要求（回退到经典衍射/干涉公式）",
            "description": "必须重复并具体化退化检验的要求：在给定参数极限下数学推导或数值证明 T_eff→T，且在远/近场应对应经典公式。",
            "score": 30,
            "evaluation_focus": "验证要求",
            "scoring_hint": "高分：明确列出退化极限（例如 a/λ→0, r_int/λ→0）并指定需给出解析推导或符号级退化证明；中分：指出需退化但无具体极限表达；低分：未提退化检验或仅泛泛提及“与经典比较”。"
          }
        ],
        "假设建立": [
          {
            "sub_criteria": "微观相互作用层假设的明确性（碰撞判据、散射/相位延迟模型）",
            "description": "应给出微观层的几何判据（例如最小距离 b 与边沿接触条件）、碰撞类型区分（弹性/非弹性/吸引）以及输出量 Δθ、Δφ_scatt 的函数形式候选或概率密度表示。",
            "score": 25,
            "evaluation_focus": "微观假设",
            "scoring_hint": "高分：提供可计算的判据和明确公式或概率模型（例如基于距离 b 与局域入射角的散射截面表达）；中分：描述物理机制但未给函数形式；低分：仅定性叙述或不区分碰撞类型。"
          },
          {
            "sub_criteria": "配对/非线性交互层假设（配对判据、湮灭/增强规则）",
            "description": "需明确配对判据（例如空间—时间重合尺度、相位差阈值）、湮灭触发条件与增强幅度的数学处理（如幅度按相位平方规则放大至等价光子数）。",
            "score": 25,
            "evaluation_focus": "配对假设",
            "scoring_hint": "高分：给出明确配对判据量化表达与湮灭/增强的数学处理规则；中分：提出判据方向但无阈值或具体公式；低分：未给出可计算的配对条件或混淆相位与手性概念。"
          },
          {
            "sub_criteria": "宏观传播层假设（T_eff 的构成形式与远/近场适用性）",
            "description": "需假定 T_eff(x)=T(x)+S_edge(x)+N_pair(x) 的通用模板，并给出 S_edge 与 N_pair 的物理依赖（如与局域密度 n(x)、相位平均 φ_mean(x)、最小距离 b 与波数 k 相关）。",
            "score": 25,
            "evaluation_focus": "宏观假设",
            "scoring_hint": "高分：提供参数化模板并说明变量依赖与复值相位/幅度扰动的物理意义；中分：提出修正项名称与作用但未给参数化形式；低分：仅提到 T_eff 名称无具体解释。"
          },
          {
            "sub_criteria": "参数范围与先验（无量纲组与合理物理界限）",
            "description": "需为关键无量纲参数（a/λ、s/λ、r_int/λ、d/λ、L/s）给出建议的数值范围或先验界限并说明选取依据（实验尺度或文献）。",
            "score": 25,
            "evaluation_focus": "参数先验",
            "scoring_hint": "高分：为每个无量纲组给出合理范围与来源说明（文献或物理估算）；中分：列出无量纲组但范围宽泛或无来源；低分：未给无量纲参数或范围。"
          }
        ],
        "模型构建": [
          {
            "sub_criteria": "完整符号表与无量纲化规则（与 core_goal 直接对应）",
            "description": "文档须以表格形式给出所有符号、物理含义、单位与无量纲化定义（例如 k=2π/λ, a/λ, s/λ）。",
            "score": 20,
            "evaluation_focus": "符号规范",
            "scoring_hint": "高分：符号表 ≥ 12 项，含单位与无量纲化例子；中分：符号表基本完整但若干单位/无量纲化缺失；低分：符号表不完整或单位混淆。"
          },
          {
            "sub_criteria": "微观层方程化（碰撞概率/散射截面/Δθ 与 Δφ_scatt 表达）",
            "description": "应给出微观层的数学表达形式或候选函数族（概率密度函数、解析近似或参数化模板），并说明参数物理意义。",
            "score": 20,
            "evaluation_focus": "微观建模",
            "scoring_hint": "高分：给出可直接实现的公式或明确参数化模板；中分：提供定性模型与候选项但未定参；低分：无数学表达或仅口头描述。"
          },
          {
            "sub_criteria": "配对/非线性层方程化（配对概率与湮灭/增强幅度处理）",
            "description": "需以公式形式给出配对判据、配对概率函数与湮灭/增强的幅度更新规则（例如 N_pair(x) 与局域光子密度 n(x) 的乘积形式）。",
            "score": 20,
            "evaluation_focus": "配对建模",
            "scoring_hint": "高分：明确给出 N_pair(x) 的参数化表达及计算流程；中分：有合理函数形式但缺少常数/归一化细节；低分：未给出可算的配对表达。"
          },
          {
            "sub_criteria": "宏观传播算子与远/近场基准方程（LaTeX）",
            "description": "以 LaTeX 形式明确给出远场 A(θ) 积分、近场 Fresnel 传播算子，并将 T_eff 作为被积项说明接口输入输出。",
            "score": 20,
            "evaluation_focus": "传播算子",
            "scoring_hint": "高分：LaTeX 无误且说明 T_eff 如何进入积分算子并给出边界条件；中分：给出公式但漏写某些因子（如常数因 e^{ikL}/(iλL)）；低分：公式错误或不完整。"
          },
          {
            "sub_criteria": "退化检验公式化（证明在极限下回退至 I_classic）",
            "description": "需在模型构建中加入对退化极限的推导步骤或给出明确的检验条件（例如当 a/λ→0 且配对项关闭时 A(θ) 等于经典 A_classic(θ)）。",
            "score": 20,
            "evaluation_focus": "退化证明",
            "scoring_hint": "高分：给出可追踪的推导或代数说明并指出假设；中分：说明退化方向但缺少数学细节；低分：未提出退化证明方法。"
          }
        ],
        "模型求解": [
          {
            "sub_criteria": "解析一致性与维度检验（方程自洽、维度一致）",
            "description": "检查所有给出的方程在物理维度与數學上自洽，能用维度分析验证无量纲组正确性，并指出近/远场适用性条件。",
            "score": 30,
            "evaluation_focus": "解析检验",
            "scoring_hint": "高分：提供维度分析表明每项方程量纲一致并列出适用条件（例如 Fraunhofer 条件 k s^2 /L ≪ 1）；中分：多数方程一致但缺少部分维度说明；低分：方程维度不一致或未检验。"
          },
          {
            "sub_criteria": "数值接口与调用范式（T_eff 接口、输入/输出格式、示例伪代码）",
            "description": "需给出 T_eff(x) 与传播算子调用的函数签名（例如 python 函数名、输入参数与返回值）与 JSON/YAML 参数模板示例以便数值实现直接调用。",
            "score": 25,
            "evaluation_focus": "接口设计",
            "scoring_hint": "高分：提供可复制的函数签名与示例 JSON，含默认值与异常处理说明；中分：给出伪代码但参数细节缺失；低分：无可执行接口说明。"
          },
          {
            "sub_criteria": "基准比较策略与误差量化（与 I_classic 比较的度量）",
            "description": "需规定用于比较仿真结果与经典公式的误差指标（如 L2 归一化误差、RMSE、峰位偏移与能量守恒偏差的定量阈值）。",
            "score": 25,
            "evaluation_focus": "误差度量",
            "scoring_hint": "高分：列出至少两种误差度量并给出判定阈值示例（例如在合理参数范围内 L2 ≤ 5%）；中分：给出误差度量但无阈值；低分：未给比较/误差指标。"
          },
          {
            "sub_criteria": "守恒性账目与局域湮灭/增强处理（能量/动量记账方案）",
            "description": "需设计在数值求解中如何记录并平衡局域湮灭/增强事件的能量账目或能量转移机制的量化方案。",
            "score": 20,
            "evaluation_focus": "守恒记录",
            "scoring_hint": "高分：提供明确的能量账目方程或算法（如何将湮灭能量分配到材料或未探测模态）；中分：提出需要记录但未给实现细节；低分：忽视守恒账目。"
          }
        ],
        "代码实现": [
          {
            "sub_criteria": "机器可读参数模板与 API 设计（JSON/YAML 示例）",
            "description": "代码维度考察是否提供 JSON/YAML 参数模板示例（含字段说明、默认值与允许范围），以及函数/模块的 API 约定（输入输出、异常处理）。",
            "score": 40,
            "evaluation_focus": "模板/API",
            "scoring_hint": "高分：提供完整 JSON/YAML 示例、字段注释与默认值并给出参数边界；中分：提供模板但缺默认值或部分字段模糊；低分：无模板或模板不可直接解析。"
          },
          {
            "sub_criteria": "文档中 LaTeX 方程与代码接口的一致性（可追溯到实现）",
            "description": "检查文档的 LaTeX 方程是否与代码接口字段一一对应（例如文档里的 T_eff(x) 参数在 JSON 中能找到映射），并提供示例函数签名（伪代码或 Python）。",
            "score": 30,
            "evaluation_focus": "文档一致性",
            "scoring_hint": "高分：所有主要符号在 JSON/接口中有对应字段并提供示例代码；中分：大部分符号对应但个别缺失；低分：文档与接口不一致。"
          },
          {
            "sub_criteria": "示例伪代码/函数签名的完整性（说明调用流程但不含数值解算）",
            "description": "需给出至少一个示例伪代码或 Python 函数签名，展示如何以 T_eff 与传播算子接口进行一次远场/近场计算调用的流程。",
            "score": 30,
            "evaluation_focus": "示例代码",
            "scoring_hint": "高分：示例伪代码清晰包含输入、输出、错误处理和示例参数；中分：伪代码存在但部分细节缺失；低分：无示例或伪代码不可执行。"
          }
        ],
        "结果分析": [
          {
            "sub_criteria": "与经典解的定量对比（远/近场，单缝与多缝）",
            "description": "需给出与 I_classic_single(θ) 与 I_classic_N(θ) 的定量比较方案（包括图示方案、误差度量及典型参数点），并说明何种偏离能否否定猜想。",
            "score": 30,
            "evaluation_focus": "基准对比",
            "scoring_hint": "高分：提供具体比较框架（例如在若干 a/λ、s/λ 值下绘制 I_sim/I_classic 曲线并给出 L2 或峰值误差阈值）；中分：只做定性比较或少量数值例子；低分：未能与经典解建立量化比较。"
          },
          {
            "sub_criteria": "灵敏度分析与无量纲参数扫描（a/λ、s/λ、r_int/λ 等）",
            "description": "应说明对关键无量纲参数的扫描策略、步长选择、以及如何展示灵敏度结果（例如参数-响应曲面或灵敏度矩阵）。",
            "score": 30,
            "evaluation_focus": "灵敏度",
            "scoring_hint": "高分：给出具体扫描计划与可视化建议并指出关键阈值；中分：提出需要扫描的参数但无具体步长或展示方法；低分：忽视灵敏度分析。"
          },
          {
            "sub_criteria": "对猜想的可证伪性判据（何种结果能否否定/支持猜想）",
            "description": "需明确列出能否否定猜想的判据（例如在合理参数范围内与大量实验不符的定量阈值），以及如何将局域湮灭/增强的观测归因于模型假设而非数值误差。",
            "score": 20,
            "evaluation_focus": "证伪标准",
            "scoring_hint": "高分：给出明确的可证伪性规则（如在实验范围内 L2误差 > X% 或峰位系统偏移 > Y）并说明统计判断方法；中分：提出判据但无阈值；低分：未给可证伪性判断。"
          },
          {
            "sub_criteria": "不确定性量化与局限性说明（误差来源与模型适用域）",
            "description": "需列举模型主要不确定来源（参数先验、近场/远场近似、配对概率模型）并说明如何在后续数值实现中报告这些不确定性。",
            "score": 20,
            "evaluation_focus": "不确定性",
            "scoring_hint": "高分：识别主要误差来源并建议量化方法（置信区间、蒙特卡罗）、报告格式与局限性声明；中分：指出来源但无量化建议；低分：忽视不确定性与适用域限制。"
          }
        ]
      }
    },
    "2": {
      "subtask": "子任务2（微观相互作用与配对/非线性交互规则的数学化与参数化）旨在用明确的数学函数和可测参数化形式完整定义单光子与衍射缝/缝边的局域相互作用核与光子间配对（湮灭/增强）概率函数，并规定这些微观输出如何严格映射为宏观波动层可用的复值修正项 S_edge(x) 与非线性项 N_pair(x)；该子任务的输入为几何与光学参数（波长 λ, 波数 k=2π/λ, 单缝宽 s, 缝间距 d, 入射场剖面 E_in(x) 或入射光子密度 n_in(x)）、光子内部尺度参数（轨道半径或横向尺度 a）、边缘作用尺度 r_int、以及材料局域参数（介电常数 ε(ω)、电导率 σ_material 等），输出为一组可直接调用的函数/核与其数值先验及物理单位说明。具体要求包括：一）定义并给出单光子-缝边缘碰撞概率的标准参数化形式 P_coll(b;P0,σ_p,r_int,a)（b 为光子轨迹到最近缝边的最小横向距离），例如 P_coll(b)=P0 · exp(−(b−a)^2/(2σ_p^2)) 且在 b>r_int 截断为零；二）定义条件散射角概率密度 K_scat(Δθ | b; σ_θ(b)) 的可实现模板，例如高斯核 K_scat(Δθ) = (2π σ_θ(b)^2)^{−1/2} exp(−Δθ^2/(2σ_θ(b)^2)) 并用 σ_θ(b)=σ0 exp(−(b−a)/ℓ_b) 或在强碰撞区 b≤a 取常数高散射宽度，明确 σ_θ 的物理量纲（弧度）；三）给出相位映射 Δφ_scatt(b;α0,σ_b,k) 的典型形式，如 Δφ_scatt(b)=α0·exp(−(b−a)^2/(2σ_b^2))+ξ（ξ 为零均值小随机噪声，α0 可与 k·ΔL_eff 线性关联），并规定在 a→0、r_int→0 或 P0→0 的极限下 Δφ_scatt→0 且 K_scat→δ(Δθ) 以保证回退到自由传播；四）明确配对/非线性交互的两个经验函数：湮灭概率 P_ann(Δφ,Δx,Δt,h1,h2)=A0 · exp(−(Δx/σ_x)^2−(Δt/σ_t)^2) · exp(−(Δφ−π)^2/(2σ_φ_ann^2)) · δ_{h1,¬h2}，增强因子 F_amp(Δφ,Δx,Δt,h1,h2)=1 + B0 · exp(−Δφ^2/(2σ_φ_amp^2)) · exp(−(Δx/σ_x)^2−(Δt/σ_t)^2) · δ_{h1,h2}，其中 Δx、Δt 表示空间和时间重合尺度，h 为手性（L/R），并明确各参数的物理含义及建议刻度（如 σ_x 以 λ 为单位，σ_t 以光周期 T=2π/ω 为单位，σ_φ_* 以弧度）；五）规定能量与计账规则：任何发生的湮灭事件必须从探测通道中扣除对应光子能量并记入材料吸收库 E_mat 增量（ΔE = 2ħω），任何按 F_amp 调整的局域幅度变化在全域上通过相应调整未探测模态或材料库以维持总体能量守恒（实现方式在数值实现中以能量账簿数组记录并校验）；六）提供把微观核映射为波动层修正项的明确数学映射模板：例如将边缘散射与相位扰动聚合为复传输扰动 S_edge(x)=∫_{edge region} P_coll(b(x,ξ)) · g_spat(ξ;w_edge) · exp(i Δφ_scatt(b(x,ξ))) dξ，其中 ξ 表示缝边局域坐标、g_spat 为几何权重核；将配对效应映射为局域非线性幅度项 N_pair(x)=γ · n_loc(x) · exp(i φ_mean(x)) · H(F_local;参数)，其中 n_loc(x) 与 φ_mean(x) 分别由到达某单元的光子数密度与相位平均估计，γ 与 H(·) 与上述 P_ann/F_amp 参数一一对应并保证当配对参数→0 时 N_pair→0；七）列出估计与校准建议：建议用小尺度 Maxwell-FDTD / 频域电磁解算器或粒子—场（PIC）模拟在代表性几何/材料条件下对 K_scat 与 Δφ_scatt 进行先验估计，并用实验或高保真模拟数据拟合 P0,σ_p,σ0,ℓ_b,α0,σ_b,A0,B0,σ_φ_*,σ_x,σ_t 的先验区间；八）给出数值采样与接口规范：明确输入数据格式（E_in(x) 或 n_in(x) 的离散化格点与单位）、核输出格式（函数句柄或离散核表格，含参数名与物理单位）、以及在蒙特卡洛模拟中采样 P_coll、K_scat、Δφ_scatt 的具体步骤（先计算 b，再按 P_coll 抛掷布尔碰撞事件，若碰撞则按 K_scat 采样 Δθ 并加 Δφ_scatt）；九）规定验证条件与退化检验：在参数极限（P0→0,B0→0,α0→0）应数值上验证 K_scat 与 Δφ_scatt 的效果可忽略并恢复 T(x) 不变，以及在实现中提供能量守恒残差的自动检查（全系统探测能量 + E_mat = 入射能量 ± 允许数值误差阈值）；十）最终交付物为一组机器可读的核定义（JSON/YAML 中列出函数模板与参数先验、示例数值表格、以及用于映射到 S_edge(x) 与 N_pair(x) 的伪代码接口说明），以便该子模块能独立被替换、校准并直接用于更高层的数值仿真调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "题目要考什么——按题型拆解关键能力：定义并参数化单光子-缝边缘碰撞核 P_coll、散射核 K_scat、相位映射 Δφ_scatt 与配对/非线性交互函数 P_ann/F_amp，并严格映射为宏观复值修正项 S_edge(x) 与 N_pair(x) 以供数值仿真调用",
          "expected_output": "机器可读的核定义（JSON/YAML）含函数模板与参数先验、LaTeX 方程文本的规范文档、伪代码/函数签名示例、参数先验表与建议物理量纲与范围",
          "key_inputs_constraints": "1) 光学与几何输入：λ (m, float), k=2π/λ, 单缝宽 s (m), 缝距 d (m), 入射剖面 E_in(x) 或光子密度 n_in(x) 的离散化格点与单位；2) 微观尺度：光子内部尺度 a (m), 边缘作用尺度 r_int (m)；3) 材料参数：ε(ω), σ_material(Ω^{-1}m^{-1})；约束：所有函数需给出物理量纲、无量纲化规则（以 λ 为基准）并满足退化条件与能量记账；如信息不足假定 L 为远场/近场调用参数并在文档中标注。",
          "modeling_type": "仿真+拟合",
          "role_in_pipeline": "作为'微观核/参数化模块'，位于模型定义后、数值求解/传播算子实现前：依赖子任务1（符号表、基准算子与T(x)定义），为后序的蒙特卡洛或波动传播仿真提供可调用的 S_edge(x)/N_pair(x) 核与参数先验；后序依赖：数值求解、FDTD/PIC 校准与宏观结果分析。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别需定义的核函数 P_coll、K_scat、Δφ_scatt",
              "description": "检查是否识别并列出必须定义的微观核：碰撞概率 P_coll(b)、散射角密度 K_scat(Δθ|b)、相位扰动 Δφ_scatt(b) 并说明它们在后续映射到 S_edge/N_pair 的角色。",
              "score": 40,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确列出 P_coll、K_scat、Δφ_scatt 且说明映射关系；中分：列出但缺乏映射细节；低分：遗漏任一核或混淆核与宏观项。"
            },
            {
              "sub_criteria": "识别输入变量与单位无量纲规则",
              "description": "评价是否识别关键输入（λ,k,s,d,a,r_int,E_in/n_in,ε,σ_material）、单位并给出无量纲化基准（例如以 λ 归一）。",
              "score": 30,
              "evaluation_focus": "数理严谨",
              "scoring_hint": "高分：完整列出变量、物理单位并给出无量纲组（如 a/λ,s/λ）；中分：列出变量但单位/无量纲化不全；低分：缺失关键变量或单位不一致。"
            },
            {
              "sub_criteria": "识别能量守恒与退化条件要求",
              "description": "检查是否识别并说明能量计账规则、湮灭/增强事件的能量归属，以及回退到经典解的退化极限（a→0,r_int→0,P0→0等）。",
              "score": 30,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：明确能量账簿规则与退化条件并量化容差；中分：给出规则但无数值容差；低分：未考虑能量或退化检验。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述 P_coll(b;P0,σ_p,r_int,a) 形式要求",
              "description": "评估是否准确复述碰撞概率 P_coll 的参数化模板（例如高斯形式、b>r_int 截断、参数物理含义与单位）。",
              "score": 35,
              "evaluation_focus": "公式把握",
              "scoring_hint": "高分：按要求给出 P_coll(b)=P0·exp(−(b−a)^2/(2σ_p^2)) 截断并说明 P0,σ_p 物理量级；中分：给出类似形式但缺单位或截断条件；低分：表述错误或遗漏截断/参数意义。"
            },
            {
              "sub_criteria": "复述 K_scat(Δθ|b) 与 σ_θ(b) 模板",
              "description": "检查对散射角概率密度 K_scat 的复述是否包含高斯核模板、σ_θ(b) 的衰减或常值区间及 σ_θ 的量纲（弧度）。",
              "score": 35,
              "evaluation_focus": "参数化理解",
              "scoring_hint": "高分：明确 K_scat 高斯形式并给出 σ_θ(b)=σ0 exp(−(b−a)/ℓ_b) 或强碰撞常值区间；中分：形式正确但缺物理量纲或边界条件；低分：模板与题设不符。"
            },
            {
              "sub_criteria": "复述 Δφ_scatt(b;α0,σ_b,k) 与回退条件",
              "description": "考察是否准确复述相位扰动 Δφ_scatt 的给定典型形式、噪声项 ξ 与在 a→0 等极限下Δφ_scatt→0 的要求。",
              "score": 30,
              "evaluation_focus": "物理一致性",
              "scoring_hint": "高分：完整复述 Δφ_scatt=α0·exp(−(b−a)^2/(2σ_b^2))+ξ 并说明 α0 与 k·ΔL_eff 关联；中分：表述不完整或未提噪声 ξ；低分：未能保证退化到零相位扰动。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确尺度/退化假设（a, r_int 与 λ 的关系）",
              "description": "评价是否在文档中明确 a/λ、r_int/λ 的适用范围并给出退化极限（例如 a→0,r_int→0 时回退经典传播）。",
              "score": 30,
              "evaluation_focus": "尺度判断",
              "scoring_hint": "高分：给出具体无量纲范围与物理理由；中分：只陈述趋势无数值；低分：无尺度假设或与物理不符。"
            },
            {
              "sub_criteria": "明确碰撞统计与独立性假设",
              "description": "检查是否说明碰撞事件的独立性、时间/空间重合判据（Δx,Δt）与蒙特卡洛抽样前提（如泊松到达或定密度）。",
              "score": 25,
              "evaluation_focus": "概率建模",
              "scoring_hint": "高分：明确到达过程模型、重合窗口 σ_x/σ_t 的物理单位并说明独立性假设；中分：给出判据但未指明到达统计；低分：缺乏重合判定或相互作用假设。"
            },
            {
              "sub_criteria": "明确湮灭/增强能量记账假设",
              "description": "评价是否阐明湮灭事件能量 ΔE=2ħω 的去向（记录入材料库 E_mat）及增强 F_amp 的全局能量调节机制。",
              "score": 25,
              "evaluation_focus": "守恒性",
              "scoring_hint": "高分：明确记账规则并给出实现表格/变量名；中分：描述模糊未指明记录方式；低分：未考虑能量守恒。"
            },
            {
              "sub_criteria": "列出用于退化到经典的极限假设",
              "description": "检查是否列出 P0→0,B0→0,α0→0 等参数极限并说明数学上如何回退到 T_eff→T 及经典 I(θ) 公式。",
              "score": 20,
              "evaluation_focus": "退化检验",
              "scoring_hint": "高分：给出明确参数极限与回退证明要点；中分：列出极限但无推导说明；低分：未列或不一致。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "给出 P_coll(b;P0,σ_p,r_int,a) 的明确函数模板与单位",
              "description": "要求提供可直接编码的 P_coll 解析形式（或离散表格），包含参数含义、单位、截断 b>r_int 条件与默认先验范围。",
              "score": 25,
              "evaluation_focus": "函数定义",
              "scoring_hint": "高分：提供解析式、单位、截断和先验区间（数值）并附示例；中分：提供解析式但缺先验或单位；低分：函数不完整或不可编码。"
            },
            {
              "sub_criteria": "给出 K_scat(Δθ|b) 与 σ_θ(b) 的可实现模板",
              "description": "要求明确 K_scat 的数值采样方法（高斯核参数化）、σ_θ(b) 表达式及单位，并说明在强碰撞区的处理。",
              "score": 20,
              "evaluation_focus": "采样设计",
              "scoring_hint": "高分：给出采样算法、σ_θ(b) 参数化与边界条件；中分：给出核但采样步骤不清；低分：缺乏采样可实现细节。"
            },
            {
              "sub_criteria": "给出 Δφ_scatt 的相位映射与噪声模型",
              "description": "要求给出 Δφ_scatt(b;α0,σ_b,k,ξ) 的表达、ξ 的统计性质、α0 与 k·ΔL_eff 的关系及极限回退说明。",
              "score": 20,
              "evaluation_focus": "相位建模",
              "scoring_hint": "高分：提供解析式、噪声分布与参数范围并说明物理关联；中分：缺少噪声细节或参数联系；低分：无相位模型或与退化条件冲突。"
            },
            {
              "sub_criteria": "给出 S_edge(x) 与 N_pair(x) 的映射公式与接口定义",
              "description": "须明确 S_edge(x)=∫ P_coll·g_spat·e^{iΔφ} dξ 的离散实现、N_pair(x)=γ·n_loc·e^{iφ_mean}·H(F_local) 的参数对应，并给出输入/输出格式与变量名。",
              "score": 35,
              "evaluation_focus": "层间映射",
              "scoring_hint": "高分：完整数学映射、离散化建议与 I/O 规范；中分：给出公式但接口不全；低分：缺少映射或接口模糊。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "蒙特卡洛采样步骤与伪代码（P_coll→K_scat→Δφ_scatt）",
              "description": "检查是否给出从 b 计算、按 P_coll 抛掷碰撞事件、按 K_scat 采样 Δθ 并累积 Δφ_scatt 到局域单元的可执行伪代码与复杂度估计。",
              "score": 40,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：伪代码完整可执行并估算样本量/复杂度；中分：伪代码粗略缺步奏细节；低分：无可执行采样流程或错误。"
            },
            {
              "sub_criteria": "能量守恒数值检查与退化检验方案",
              "description": "要求明确数值校验方法：记录入射能量、探测能量与 E_mat，计算残差并给出接受阈值（建议相对残差≤1%或绝对≤1e-6·总能量）。",
              "score": 30,
              "evaluation_focus": "验证流程",
              "scoring_hint": "高分：提供自动化校验方案与具体阈值；中分：描述校验但无阈值；低分：无能量校验方案。"
            },
            {
              "sub_criteria": "参数估计与校准建议（FDTD/PIC 拟合流程）",
              "description": "检查是否给出用 Maxwell-FDTD/PIC 或频域解算器拟合 K_scat 和 Δφ_scatt 的实验/仿真方案与拟合步骤及参数先验范围。",
              "score": 30,
              "evaluation_focus": "拟合设计",
              "scoring_hint": "高分：给出具体仿真配置、输出量与拟合损失函数建议；中分：建议工具但无配置细节；低分：未提出校准方法。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "提供 JSON/YAML 核定义与参数先验表",
              "description": "检查是否交付机器可读的核定义（函数模板占位符）、参数名、默认值与允许范围（物理单位）并可直接被仿真模块加载。",
              "score": 40,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：交付完整 JSON/YAML，参数含单位与先验范围并示例调用；中分：文件存在但字段不完整；低分：无机器可读定义或格式错误。"
            },
            {
              "sub_criteria": "提供伪代码/函数签名与 I/O 规范",
              "description": "要求给出 Python 风格函数签名/伪代码示例（如 sample_collision(b)->bool, sample_scatter(b)->Δθ, compute_S_edge(cell)->complex），并说明输入输出单位与数组维度。",
              "score": 35,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：函数签名清晰且含示例调用；中分：伪代码但缺 I/O 单位或维度；低分：无伪代码或无法实现。"
            },
            {
              "sub_criteria": "提供单元测试用例与能量账簿检查例程",
              "description": "评价是否包含最小可运行的验证用例（例如单一缝边局域测试、P0=0 时退化测试）与能量账簿自动检查脚本说明。",
              "score": 25,
              "evaluation_focus": "代码质量",
              "scoring_hint": "高分：含可运行测试用例描述与预期输出；中分：列出测试用例但无预期输出；低分：无测试用例。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "退化到经典解的数值验证（T_eff→T 与 I(θ) 回退）",
              "description": "要求给出具体数值验证：在参数极限（P0,B0,α0→0）计算 A(θ) 与 I(θ) 并与经典单缝/多缝公式比较，给出误差指标（如 L2 相对误差）。",
              "score": 35,
              "evaluation_focus": "验证对比",
              "scoring_hint": "高分：提供数值实验、误差曲线与 L2 或 RMS ≤1% 的示例；中分：有对比但误差未量化；低分：未做数值退化验证。"
            },
            {
              "sub_criteria": "能量守恒残差报告与统计分析",
              "description": "检查是否提供在若干运行下的能量守恒残差统计（均值、标准差、最大值）并判断是否满足预设阈值。",
              "score": 25,
              "evaluation_focus": "守恒检验",
              "scoring_hint": "高分：提供统计表且残差均值≤1%或绝对≤1e-6，总能量守恒通过；中分：提供单一残差值无统计；低分：无残差报告或超出容差。"
            },
            {
              "sub_criteria": "参数敏感性分析与不确定性界定",
              "description": "要求对关键参数（P0,σ_p,σ0,α0,A0,B0,σ_φ_*,σ_x,σ_t）进行局部敏感性或蒙特卡洛不确定性分析并报告对 S_edge/N_pair 与最终 I(θ) 的影响范围。",
              "score": 20,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：包含灵敏度图/敏感性指标并量化影响；中分：仅定性讨论；低分：不讨论参数敏感性。"
            },
            {
              "sub_criteria": "对上层宏观仿真的一致性与适用说明",
              "description": "评价是否说明该微观/配对模块在何种 L (近场/远场)、网格分辨率与入射条件下可被复用并列出局限性。",
              "score": 20,
              "evaluation_focus": "适用性",
              "scoring_hint": "高分：明确适用域、限制与推荐网格/样本数；中分：给出部分适用说明；低分：无适用性说明。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（数值实现策略、两条并行路线、算法细节与基线校验）——目标是以工程可实施、可验证的方式实现两条互校准的数值路线：A）蒙特卡洛粒子轨迹路线与配对检验子模块，和 B）波动 PDE/FFT 路线（修正传输函数法），并为二者给出明确的输入/输出接口、算法步骤、数据结构、数值参数、复杂度估计、并行化与重现性要求以及逐步的基线校验程序；该子任务的输入为：几何与光学参数（波长 λ、波数 k、缝数 N、单缝宽 s、缝间距 d、屏距 L）、入射场剖面或光子密度 E_in(x) 或 n_in(x)、以及来自微观子模块的核/函数（碰撞概率 P_coll(b)、散射角核 K_scat(Δθ|b)、相位映射 Δφ_scatt(b)、配对函数 P_ann(·)、F_amp(·)），输出为角向强度分布 I(θ)（离散角度格）及用于验证的诊断量（探测能量、吸收能量、幅度场 A(θ)、统计误差估计、运行性能日志）；具体实现要求如下：路线A（蒙特卡洛）——按给定入射光子数 N_p（建议范围 1e5–1e7，视所需统计精度和计算资源而定）建立光子样本，逐一赋予横向初始位置 x0、相位 φ、手性 h 与时间戳；对每个光子计算其与最近缝边的最小距离 b，按 P_coll(b) 抛掷是否发生局域相互作用，若发生以 K_scat 采样角偏 Δθ 并加 Δφ_scatt；将光子沿最终方向投影到屏面并按像素与时间窗离散化到达事件；在每个像素/时间窗内用空间哈希或 KD-tree 等邻域数据结构检索处于重合阈值 σ_x、σ_t 的光子对，仅对这些候选对应用 P_ann 与 F_amp（避免 O(N_p^2) 复杂度），并按规则更新像素的复振幅与全局能量账簿（记录探测能量與材料吸收/未探测模态能量）；最终按角度 bin 累加复振幅 A(θ)=Σ a_i，计算 I(θ)=|A(θ)|^2，并给出统计不确定度（例如 bootstrap 或多次独立随机种子下的方差）；性能细节：配对检索平均复杂度目标 O(N_p log N_p) 或近似 O(N_p)（依赖网格分辨），并行化宜采用线程/进程级并行或 GPU 批量处理（建议使用 NumPy+Numba/CuPy 或 PyTorch/JAX + CUDA 实现关键采样与投影），随机数流须可复现（固定种子与并行子流管理），并记录运行时间与内存峰值。路线B（波动 PDE/FFT）——在横向坐标 x 以分辨率至少 λ/10（推荐更细以控制相位截断误差）离散化并选择 FFT 友好点数（2^n），构造标称透射函数 T(x) 并按微观核输出构造复值修正项 S_edge(x) 与非线性项 N_pair(x)（作为给定函数或初步迭代估计），形成有效传输 T_eff(x)=T(x)+S_edge(x)+N_pair(x)；远场按 Fraunhofer=FFT[T_eff(x)·E_in(x)] 计算复振幅并取模方得 I(θ)，近场情况使用 Fresnel 积分或角谱法（数值卷积或 FFT 加相位因子）求解；数值细节：网格点 N_x、角度 bin 数 M 与像素对应关系需明确，FFT 精度与边界条带效应通过零填充与窗函数控制，非线性 N_pair 若依赖局域光子密度则在迭代循环中用上一轮得到的局域能量密度更新（若需求稳态可用牛顿/固定点迭代），该路线复杂度以 O(N_x log N_x) 为主，适合快速参数扫描并用作蒙特卡洛结果的连续参考。基线校验与一致性验证程序（必须步骤）：1) 在关闭所有微观散射与配对项（即 P_coll≡0、S_edge≡0、N_pair≡0）时，分别运行路线A 和 B，并要求二者的统计平均 I(θ) 在预定角度范围对比分析满足 L2 相对误差小于目标阈值（推荐 1%–5% 相对于 I_max），条纹间距、主瓣 FWHM 与旁瓣比应与经典 Fraunhofer 解析公式一致（可用解析 I_classic_single 与多缝公式作点对比）；2) 在逐步打开单一微观效应（仅边缘散射或仅相位扰动）时，检查两条路线在相同参数下定性与定量一致，记录偏差并确认其随网格解析度和样本数的收敛性；3) 能量守恒检查：每次仿真结束需自动报告入射总能量、探测到的能量、吸收/库能量並计算相对残差（允许的数值误差阈值应由网格与样本统计精度决定）；4) 数值稳健性测试：对关键数值参数（N_p, N_x, 时间步/窗宽、空间重合阈值 σ_x）做网格/样本收敛性分析并输出收敛曲线；5) 回归测试与重现性：提供固定配置样例与随机种子以保证在不同机器/并行设置下可重现结果；软件工程与交付建议：实现应模块化（数据输入/参数文件、微观核接口、Monte Carlo 核、FFT 核、能量账簿与验证模块）、以 Python 为主干调用高性能库（NumPy/SciPy、FFTW、PyTorch/CuPy、Numba、scipy.spatial.KDTree 或 nanoflann），并支持 HDF5 或 Zarr 的中间结果存储与断点重启；为便于大规模运行，提供 MPI 或分布式批处理脚本与 GPU 加速选项。最终交付物包括可运行的代码库（含示例配置）、自动化基线验证测试（包括与解析解比较的例子）、性能剖面与推荐运行参数表，以及对数值误差与统计不确定度的定量报告；该子任务不涉及对模型物理结论的讨论，仅保证数值实现的准确性、可扩展性与可验证性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "以仿真为核心，实施并评估两条并行数值路线（蒙特卡洛粒子轨迹与波动 PDE/FFT）以计算并校验角向强度分布 I(θ) 的一致性与对经典解的回退。",
          "expected_output": "离散角度格 I(θ) 与复振幅 A(θ)、能量账簿（入射/探测/吸收）、统计误差估计与收敛曲线、基线验证与回归报告、可复现实验配置与日志、模块化代码与接口文档。",
          "key_inputs_constraints": "输入：λ、k、N、s、d、L、E_in(x) 或 n_in(x)、P_coll(b)、K_scat(Δθ|b)、Δφ_scatt(b)、P_ann、F_amp；约束：蒙特卡洛样本数 N_p∈[1e5,1e7]；FFT 网格 Δx≤λ/10 且点数 2^n；能量守恒残差需≤阈值（如≤1%）；关闭微观项时须回退至 I_classic_single 与 I_classic_N；随机数需固定种子并可并行复现。",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为数值实现与校验环节，承接子任务1的模型规范与子任务2的微观核定义，向后续大规模参数扫描与物理对比提供可靠的 I(θ) 与诊断结果；直接依赖：子任务1、子任务2；后序：性能扩展与物理结论分析。",
          "assumptions": "默认一维横向 x 光栅模型；探测器在远场或准远场；非线性 N_pair 采用固定点迭代直至相对变化<1e-3；能量残差阈值按样本与网格收敛共同设为≤1%。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别两条并行数值路线（蒙特卡洛与PDE/FFT）的仿真目标",
              "description": "明确A）蒙特卡洛粒子轨迹与配对检验；B）波动 PDE/FFT（修正传输函数）共同用于计算 I(θ) 并互校准。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚区分A/B路线职责与优劣；中分：提及两路线但混淆细节；低分：只描述单一路线或目标不含 I(θ)。"
            },
            {
              "sub_criteria": "基线校验与回退至经典解的需求识别",
              "description": "指出在 P_coll≡0、S_edge≡0、N_pair≡0 时需与 I_classic_single/N 对齐并量化误差阈值。",
              "score": 30,
              "evaluation_focus": "评价标准",
              "scoring_hint": "高分：给出L2误差≤1–5%与条纹/主瓣/FWHM对比；中分：仅口头要求一致；低分：忽略基线或未提误差界。"
            },
            {
              "sub_criteria": "输入与约束识别（λ、k、N、s、d、L、N_p、Δx≤λ/10、2^n）",
              "description": "完整点名关键输入与数值约束及其对结果的影响（统计误差、相位截断）。",
              "score": 40,
              "evaluation_focus": "需求梳理",
              "scoring_hint": "高分：列出参数并说明对精度/复杂度影响；中分：遗漏少数关键约束；低分：输入不全或无约束。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "核心目标复述为‘I(θ) 仿真+一致性评价’",
              "description": "以 I(θ) 为中心复述：计算、比较、评估与经典解回退。",
              "score": 30,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：凝练且覆盖计算与评价；中分：只述计算不述评价；低分：偏离 I(θ)。"
            },
            {
              "sub_criteria": "路线A步骤复述（采样x0/φ/h/t → b → P_coll → K_scat/Δφ_scatt → 投影 → 配对P_ann/F_amp）",
              "description": "逐步列出蒙特卡洛关键环节与能量账簿更新。",
              "score": 35,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：步骤完整且顺序正确；中分：缺1–2步；低分：流程混乱或缺配对。"
            },
            {
              "sub_criteria": "路线B步骤复述（T(x)→S_edge/N_pair→T_eff→Fraunhofer/Fresnel via FFT）",
              "description": "说明网格、零填充、窗函数、非线性迭代与输出 A(θ)、I(θ)。",
              "score": 35,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：包含Δx≤λ/10与2^n选择；中分：提FFT但无数值细节；低分：未阐述T_eff或传播算子。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "一维横向模型与远场/近场选择假设",
              "description": "明确采用1D x 光栅近似，并说明Fraunhofer或Fresnel条件与适用范围。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出L≫s^2/λ等判据；中分：仅声明远/近场；低分：无适用性说明。"
            },
            {
              "sub_criteria": "随机性与可复现性假设（固定种子与并行子流）",
              "description": "设定随机数流管理，保证蒙特卡洛与并行下的复现。",
              "score": 25,
              "evaluation_focus": "数值规范",
              "scoring_hint": "高分：描述种子与子流策略；中分：仅提固定种子；低分：未提复现。"
            },
            {
              "sub_criteria": "能量守恒与账簿假设",
              "description": "规定探测、吸收（E_mat）、未探测模态的计账与残差阈值。",
              "score": 25,
              "evaluation_focus": "物理约束",
              "scoring_hint": "高分：量化残差≤1%并区分三库；中分：有账簿无阈值；低分：未计能量。"
            },
            {
              "sub_criteria": "非线性 N_pair 的迭代与收敛准则",
              "description": "假设采用固定点/牛顿策略并设置收敛阈值与上限迭代步数。",
              "score": 25,
              "evaluation_focus": "算法设定",
              "scoring_hint": "高分：阈值与最大迭代数明确；中分：仅称迭代；低分：未说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "蒙特卡洛事件链构建与空间哈希/KD-tree配对",
              "description": "设计O(N_p log N_p)或近似O(N_p)配对检索，定义σ_x、σ_t阈值。",
              "score": 30,
              "evaluation_focus": "数据结构",
              "scoring_hint": "高分：给出网格桶/哈希参数与复杂度；中分：仅提KD-tree；低分：O(N_p^2)实现。"
            },
            {
              "sub_criteria": "T_eff(x)=T+S_edge+N_pair 的构造与接口一致性",
              "description": "基于子任务2核函数生成复值修正项并定义输入/输出格式。",
              "score": 30,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：参数与单位匹配并可直接调用；中分：接口不全；低分：忽略S_edge或N_pair。"
            },
            {
              "sub_criteria": "FFT/角谱法离散方案与防混叠策略",
              "description": "设置Δx、零填充、窗函数与M个角度bin映射关系。",
              "score": 25,
              "evaluation_focus": "数值离散",
              "scoring_hint": "高分：明确Δx≤λ/10、2^n、padding倍数；中分：仅述FFT；低分：无离散细节。"
            },
            {
              "sub_criteria": "基线验证指标设计（L2误差、条纹间距、FWHM、旁瓣比）",
              "description": "定义与解析 I_classic_single/N 的点对比和容差。",
              "score": 15,
              "evaluation_focus": "评价指标",
              "scoring_hint": "高分：列出全部指标与阈值；中分：部分指标；低分：无定量指标。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "蒙特卡洛采样与方差控制",
              "description": "N_p选择、bootstrap或多种子评估统计不确定度，记录性能。",
              "score": 30,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：给出N_p与误差∝1/√N_p验证；中分：仅报告均值；低分：无误差估计。"
            },
            {
              "sub_criteria": "FFT/Fresnel求解与相位精度控制",
              "description": "实现Fraunhofer=FFT[T_eff·E_in]与Fresnel卷积，控制相位截断误差。",
              "score": 30,
              "evaluation_focus": "数值求解",
              "scoring_hint": "高分：含相位因子与padding验证；中分：仅FFT；低分：错误公式或未实现近场。"
            },
            {
              "sub_criteria": "非线性迭代求解与收敛性报告",
              "description": "N_pair依赖密度时的固定点/牛顿迭代，报告迭代数与残差曲线。",
              "score": 20,
              "evaluation_focus": "迭代收敛",
              "scoring_hint": "高分：收敛曲线与阈值满足；中分：有迭代无报告；低分：发散或未迭代。"
            },
            {
              "sub_criteria": "能量守恒校验与账簿闭合",
              "description": "入射能量=探测+吸收(+未探测)±数值残差，报告≤阈值。",
              "score": 20,
              "evaluation_focus": "物理一致",
              "scoring_hint": "高分：残差≤1%并自动检查；中分：有报告>阈值；低分：未校验。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化与接口（微观核、Monte Carlo核、FFT核、能量账簿、验证）",
              "description": "清晰的Python模块与函数签名，参数读取与日志记录完整。",
              "score": 30,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：模块边界清晰且文档化；中分：模块化不足；低分：脚本式混杂实现。"
            },
            {
              "sub_criteria": "性能与并行化（Numba/CUDA/MPI、O(N_p log N_p)、O(N_x log N_x)）",
              "description": "关键路径加速，给出时间/内存剖面与可扩展性。",
              "score": 30,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：并行实现与复杂度达标；中分：部分加速；低分：性能不可用。"
            },
            {
              "sub_criteria": "可复现性（固定随机种子、配置文件、回归测试）",
              "description": "提供固定配置样例、种子与CI式回归用例。",
              "score": 20,
              "evaluation_focus": "工程实践",
              "scoring_hint": "高分：跨机器复现一致；中分：仅本地复现；低分：结果漂移。"
            },
            {
              "sub_criteria": "数据I/O与中间结果（HDF5/Zarr断点重启）",
              "description": "保存中间产物（A(θ)、I(θ)、账簿、日志）并支持重启。",
              "score": 20,
              "evaluation_focus": "可靠性",
              "scoring_hint": "高分：I/O稳定含元数据；中分：部分持久化；低分：无持久化。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "与经典 I_classic_single/N 的定量对比",
              "description": "报告L2相对误差、条纹间距、主瓣FWHM、旁瓣比，并判定是否达阈值。",
              "score": 35,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：误差≤目标并图表化；中分：部分指标或误差略超；低分：无对比。"
            },
            {
              "sub_criteria": "A/B路线一致性评估与收敛性",
              "description": "同参下 I(θ) 与 A(θ) 比较，随N_p与N_x的收敛曲线与偏差解释。",
              "score": 30,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：一致性好且给出误差收敛率；中分：仅定性一致；低分：显著不一致且无解释。"
            },
            {
              "sub_criteria": "能量守恒与误差账簿报告",
              "description": "展示入射/探测/吸收/未探测及残差，分析残差来源（统计/离散）。",
              "score": 20,
              "evaluation_focus": "误差诊断",
              "scoring_hint": "高分：量化分解并提出改进；中分：仅罗列数值；低分：未报告。"
            },
            {
              "sub_criteria": "参数敏感性（N_p、Δx、σ_x/σ_t）",
              "description": "展示关键数值参数对 I(θ) 与误差的影响并给出推荐范围。",
              "score": 15,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：含建议区间与曲线；中分：定性描述；低分：未分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（参数定标、不确定性量化、灵敏度分析、可检验预测与风险控制）的目标是构建并执行一个完整、可重复的统计校准与验证流程，以从多条件观测数据中估计模型参数的后验分布、量化预测不确定性、识别对输出影响最大的参数、提出区分性实验并给出明确的证伪判据，同时通过硬性物理约束与诊断措施控制模型过拟合与非物理解的风险。其范围包括：接受若干独立观测数据集作为输入（示例必须包括但不限于单缝、双缝及多缝在不同几何参数 s、d、N、不同波长 λ 与屏距 L 下的角向强度 I_obs(θ) 曲线、在不同入射强度/相干度（从单光子逐次发射到连续强光）与不同偏振输入条件下的透过/散射数据、以及若可用的缝边材料/厚度相关实验数据）；以数值前向模型 f(θ_param;x_cond)（将参数向量 θ_param 映射到观测量，如 I_model(θ)）为基础，制定统计观测模型并执行贝叶斯或集合校准。方法与步骤要明确、顺序化并可实施：1) 定义参数向量、物理先验与硬约束（基于物理尺度给定先验界限，例如 a/λ、r_int/λ 的允许区间，并在校准过程中强制全系统能量守恒残差在数值容差内）；2) 建立似然模型，建议采用加性观测噪声与模型差异项的形式（例如 I_obs = I_model(θ_param)+δ_model+ε_noise，其中 δ_model 可由低秩或高斯过程表示以容纳结构性误差）；3) 如前向模型计算代价高，引入代理模型（高斯过程、稀疏多项式展开或神经网络近似器）并对代理器误差做交叉验证，代理训练使用空间填充实验设计（Latin Hypercube）；4) 采用稳健的采样/优化算法估计后验或点估计：对高维且费时的情形优选代理辅助 MCMC（HMC/NUTS、并行链、温度化采样），对中等维度可使用并行化 MCMC（emcee/Stan/PyMC），对在线或时变参数情况采用集合卡尔曼滤波（EnKF）或粒子滤波以实现递推更新；5) 进行诊断与收敛性检验（轨迹图、R_hat、有效样本量 ESS、后验预测检验），并通过后验预测分布计算关键观测量的不确定区间（例如主瓣 FWHM、条纹可见度 V、主/旁瓣强度比、L2 误差相对于参考解析解）；6) 执行全局灵敏度分析（Sobol 或 Saltelli 方案）与参数可识别性分析（谱域或 profile-likelihood / Fisher 信息矩阵），输出参数敏感度排序与主要互补参数组合；7) 基于后验与灵敏度结果设计判别性实验：用信息量增益（expected information gain）或对比后验预测分布差异来优先选择实验条件（例如改变入射强度从单光子到高流量以测试强度依赖的配对机制、改变缝边材料或缝厚以检验边缘散射参数的可观测效应、或用已知 L/R 手性态源与偏振片组合检验偏振相关透过率），并给出量化的样本数、测量分辨率与置信阈值要求。8) 明确可证伪判据：若在物理先验允许区间内无法同时使模型的后验预测在若干独立实验上的关键可观测量（如条纹间距Δθ、可见度V、主瓣形状的 L2 误差）落入实验不确定度范围，则判定模型形式被否定；相反，若后验能在物理合理参数域内一致复现独立实验，则列出需进一步第一性验证的具体参数范围与实验。9) 为风险控制与稳健性提供操作性要求：在校准过程中强制能量/动量守恒约束检查并记录守恒残差阈值、对后验进行物理可接受性筛查（剔除超出物理尺度的参数样本）、用交叉验证与独立保留数据集检验泛化能力以避免过拟合；同时报告参数不可识别性或高相关性的明确证据并建议收敛改进或附加实验。10) 输出交付物应包括：经验证的后验样本与边际统计、后验预测区间与诊断图（trace、R_hat、预测覆盖）、Sobol 灵敏度指数与参数重要性排名、代理模型与其误差估计、若干可执行的判别性实验设计（包括条件设置与期望测量精度）、以及一份判定性结论框架（量化的证伪/接受规则）。工具建议（可选但应兼容）：用于采样与贝叶斯推断可使用 Stan/PyMC3/NumPyro/Emcee；代理建模与加速可用 GPyTorch / scikit-learn / UQpy；灵敏度与全局不确定性分析可用 SALib 或 UQLab；并建议用 HDF5 存储实验与后验样本，利用并行计算与 GPU 加速以缩短校准时间。该子任务应以可重现的脚本和配置文件交付，确保任何用户在给定相同观测数据与先验约束下能复现后验、敏感性结果与建议的判别性实验清单。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对光子波粒二象性扩展模型进行参数定标与不确定性量化，拟合多条件 I_obs(θ) 并评估后验预测，识别敏感参数并提出可证伪实验。",
          "expected_output": "经校准的参数后验样本（HDF5/CSV）、后验预测区间与覆盖图、诊断图（trace、R_hat、ESS）、Sobol 指数与参数重要性排名、代理模型与误差评估报告、判别性实验设计清单与量化证伪规则。",
          "key_inputs_constraints": "输入观测集：单缝/双缝/多缝 I_obs(θ) 曲线（含 λ,s,d,N,L,入射强度/相干度、偏振条件、材料信息）；前向模型 f(θ_param;x_cond) 接口（来自子任务1–3）；物理先验与硬约束（a/λ,r_int/λ 范围，能量守恒残差阈值）；噪声模型设定与测量不确定度；计算资源限制与可并行化要求。",
          "modeling_type": "拟合+评价+仿真",
          "role_in_pipeline": "作为最终统计校准与验证环节，依赖前序子任务1–3提供的模型规范与数值实现；其输出为后续物理讨论与实验设计的依据，并为代码回归测试提供基线阈值。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "多条件 I_obs(θ) 校准目标与预测区间评估",
              "description": "是否清晰界定以前向模型 f(θ_param;x_cond) 拟合多几何与波长条件的 I_obs(θ)，并要求给出后验预测区间用于评估条纹间距Δθ、可见度V、主/旁瓣强度比。",
              "score": 30,
              "evaluation_focus": "目标界定/评价指标",
              "scoring_hint": "高分：明确列出Δθ、V、主/旁瓣比和区间覆盖率≥90%；中分：只包含I(θ)整体误差，无单独条纹指标；低分：未定义任何可检验指标。"
            },
            {
              "sub_criteria": "参数定标与物理先验/硬约束",
              "description": "是否识别需定标的 θ_param（如 a/λ, r_int/λ, P0, σ_θ 等）并给出物理先验范围与能量守恒残差阈值。",
              "score": 35,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：先验有量纲/范围且含守恒残差≤1%说明；中分：有范围但未含守恒检查；低分：未给先验或不合理范围。"
            },
            {
              "sub_criteria": "模型差异项 δ_model 与噪声 ε_noise",
              "description": "是否区分观测噪声与结构性模型误差并提出 δ_model 表达（如GP/低秩）。",
              "score": 35,
              "evaluation_focus": "误差建模",
              "scoring_hint": "高分：给出δ_model形式与超参数先验；中分：只设加性高斯噪声；低分：未建模误差来源。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "将“拟合 I_obs(θ)”表述为后验推断",
              "description": "是否将任务复述为在条件 x_cond 下，对 θ_param 的后验 p(θ|I_obs) 推断并进行后验预测。",
              "score": 40,
              "evaluation_focus": "统计表述",
              "scoring_hint": "高分：写出p(θ|I_obs)∝p(I_obs|θ)p(θ)；中分：口头说明后验无公式；低分：仅做点估计。"
            },
            {
              "sub_criteria": "多数据集合并与层级结构",
              "description": "是否说明跨单缝/双缝/多缝、不同 λ,s,d,N,L 的联合似然或层级先验结构。",
              "score": 30,
              "evaluation_focus": "层级建模",
              "scoring_hint": "高分：清楚给出联合似然与共享参数/条件参数；中分：逐数据拟合未整合；低分：忽略多条件。"
            },
            {
              "sub_criteria": "证伪与验证目标复述",
              "description": "是否明确将证伪判据与覆盖检验（如L2误差阈值、覆盖率）纳入目标。",
              "score": 30,
              "evaluation_focus": "验证目标",
              "scoring_hint": "高分：给定数值阈值与多数据一致性规则；中分：有定性描述；低分：无验证目标。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "物理先验与尺度假设（a/λ, r_int/λ 等）",
              "description": "对 a/λ、r_int/λ、P0、σ_φ_* 给出合理先验与上/下界并说明物理依据。",
              "score": 30,
              "evaluation_focus": "物理先验",
              "scoring_hint": "高分：范围与文献/量纲一致；中分：范围宽泛无依据；低分：缺失或违反物理量纲。"
            },
            {
              "sub_criteria": "误差与独立性假设",
              "description": "对 ε_noise 分布、相关性、以及 δ_model 的平稳性/核函数作出明确假设。",
              "score": 25,
              "evaluation_focus": "误差假设",
              "scoring_hint": "高分：给出噪声方差随θ或强度的依赖；中分：常方差假设；低分：未说明。"
            },
            {
              "sub_criteria": "守恒与可接受性筛查",
              "description": "在采样中强制能量守恒与动量投影一致性，剔除不物理样本。",
              "score": 25,
              "evaluation_focus": "物理约束",
              "scoring_hint": "高分：提供残差阈值与筛查规则；中分：仅事后检查；低分：未约束。"
            },
            {
              "sub_criteria": "代理模型适用性假设",
              "description": "若使用代理（GP/NN/多项式），说明平滑性/可分性等先验假设与适用域。",
              "score": 20,
              "evaluation_focus": "近似假设",
              "scoring_hint": "高分：定义训练域与外推限制；中分：仅声明使用代理；低分：未提代理前提。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "似然模型与 δ_model 构造",
              "description": "给出 I_obs = I_model(θ)+δ_model+ε_noise 的具体似然（含噪声方差/协方差）与 δ_model 参数化。",
              "score": 35,
              "evaluation_focus": "统计建模",
              "scoring_hint": "高分：写出对数似然与核选择；中分：仅误差加和；低分：无形式化似然。"
            },
            {
              "sub_criteria": "层级/联合校准设计",
              "description": "构建跨条件的层级先验或共享参数图，避免重复拟合与不一致。",
              "score": 25,
              "evaluation_focus": "层级结构",
              "scoring_hint": "高分：明确共享与局部参数；中分：部分共享；低分：完全独立。"
            },
            {
              "sub_criteria": "代理模型与实验设计",
              "description": "采用 Latin Hypercube 训练代理，报告交叉验证误差并定义在线适配策略。",
              "score": 25,
              "evaluation_focus": "代理/设计",
              "scoring_hint": "高分：CV误差<10%且覆盖训练域；中分：给出CV但无设计细节；低分：无验证。"
            },
            {
              "sub_criteria": "可证伪规则的形式化",
              "description": "以数值阈值给出拒绝域：如多数据集 L2 相对误差>5%且覆盖率<80%则否定模型。",
              "score": 15,
              "evaluation_focus": "判据制定",
              "scoring_hint": "高分：具体阈值与多指标合取；中分：单一阈值；低分：无量化。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "采样/优化算法选择与并行化",
              "description": "依据维度与代价选择 HMC/NUTS、并行链、温度化或EnKF，并说明并行与种子管理。",
              "score": 35,
              "evaluation_focus": "算法选择/可复现",
              "scoring_hint": "高分：并行链+RNG子流；中分：单链MCMC；低分：启发式无收敛保障。"
            },
            {
              "sub_criteria": "收敛与诊断（R_hat、ESS、trace）",
              "description": "提供 R_hat≤1.1、足够 ESS、稳定 trace 与自相关分析。",
              "score": 35,
              "evaluation_focus": "收敛诊断",
              "scoring_hint": "高分：多指标齐全并过线；中分：部分指标；低分：无诊断。"
            },
            {
              "sub_criteria": "不确定性传播与后验预测",
              "description": "计算 I(θ) 预测区间、Δθ与V的后验分布与覆盖率。",
              "score": 30,
              "evaluation_focus": "UQ/预测",
              "scoring_hint": "高分：报告95%区间与覆盖率；中分：给均值方差；低分：仅点估计。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现脚本与配置",
              "description": "提供可运行脚本、固定随机种子、配置文件（先验、似然、算法参数）。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：一键运行+版本锁定；中分：脚本可跑缺锁定；低分：缺脚本/随机性不可控。"
            },
            {
              "sub_criteria": "数据与后验存储（HDF5）",
              "description": "按要求存储观测与后验样本，包含元数据（λ,s,d,N,L,噪声）。",
              "score": 25,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：结构化HDF5+校验；中分：CSV散乱；低分：缺持久化。"
            },
            {
              "sub_criteria": "代理与前向模型接口",
              "description": "标准化 f(θ_param;x_cond) 与代理调用，含批量评估与错误处理。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：清晰API与单元测试；中分：函数可用但无测试；低分：耦合混乱。"
            },
            {
              "sub_criteria": "并行与性能日志",
              "description": "并行链/向量化与性能记录（时间、内存、评估次数）。",
              "score": 20,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：详尽日志+加速比；中分：部分记录；低分：无记录。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "后验诊断与覆盖检验",
              "description": "展示 trace、R_hat、ESS，并验证预测区间对 I_obs(θ) 的覆盖比例。",
              "score": 30,
              "evaluation_focus": "诊断/覆盖",
              "scoring_hint": "高分：覆盖率接近名义值±5%；中分：仅视觉比较；低分：无检验。"
            },
            {
              "sub_criteria": "灵敏度（Sobol）与可识别性",
              "description": "报告 Sobol 指数排序与高相关/不可识别参数的证据（FIM或profile-likelihood）。",
              "score": 30,
              "evaluation_focus": "灵敏度/识别性",
              "scoring_hint": "高分：定量指数+置信区间；中分：定性排序；低分：缺失。"
            },
            {
              "sub_criteria": "判别性实验与证伪判据",
              "description": "提出可执行实验（条件、样本数、分辨率）与量化拒绝规则。",
              "score": 25,
              "evaluation_focus": "实验设计/判据",
              "scoring_hint": "高分：含期望信息增益或效应量；中分：列出条件无量化；低分：泛泛而谈。"
            },
            {
              "sub_criteria": "风险控制与泛化检查",
              "description": "交叉验证、保留集验证、能量账本残差报告，避免过拟合。",
              "score": 15,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：保留集误差与残差≤阈值；中分：单数据拟合良好；低分：无泛化评估。"
            }
          ]
        }
      }
    }
  }
}