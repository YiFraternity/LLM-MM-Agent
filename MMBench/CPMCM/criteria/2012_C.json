{
  "task_id": "2012_C",
  "problem": "请解决以下问题：\n\n问题一：光杆悬点运动规律\n电机旋转运动通过四连杆机构转变为抽油杆的垂直运动。假设驴头外轮廓线为部分圆弧、电机匀速运动，悬点 E下只挂光杆（光杆下不接其它杆，不抽油，通常用来调试设备）。请按附录 4给出四连杆各段尺寸，利用附件 1的参数，求出悬点 E的一个冲程的运动规律：位移函数、速度函数、加速度函数。并与有荷载的附件 1的悬点位移数据进行比较。\n\n问题二：泵功图计算\n1966年，Gibbs 给出了悬点示功图转化为地下示功图的模型[3],[4]，由于受计算机速度的限制，直到近些年才得以被重新重视。请使用 Gibbs 模型，给出由悬点示功图转化为泵功图的详细计算过程，包括：原始数据的处理、边界条件、初始条件、求解算法；附件 1是只有一级杆的某油井参数和悬点示功数据，附件 2是有三级杆的另一油井参数和悬点示功数据，利用它们分别计算出这两口油井的泵功图数据；并分别绘制出两油井的悬点示功图和泵功图（每口井绘一张图，同一井的悬点示功图与泵功图绘在同一张图上，请标明坐标数据）。\n\n问题三：泵功图的应用（下面 2小问选作一问。鼓励全做）\n1）建立 2个不同的由泵功图估计油井产量的模型，其中至少一个要利用“有效冲程”；并利用附件 1和附件 2的数据分别估算两口油井一天（24 小时）的产液量。（单位：吨，这里所指的液体是指从井里抽出来的混合液体）\n2）如图 5（C）形式的泵功图表示泵内有气体，导致泵没充满。请建立模型或算法，以由计算机自动判别某泵功图数据是否属于泵内有气体的情况。并对附件 1、附件 2对应的泵功图进行计算机诊断是否属于泵内充气这种情况。\n\n问题四：深入研究的问题（下面 2小问选作一问。鼓励全做）\n1）请对 Gibbs 模型进行原理分析，发现它的不足。在合理的假设下，重新建立抽油系统模型或对现有模型进行改进；并给出由悬点示功图转化为泵功图的详细计算过程，包括：原始数据的处理、边界条件、初始条件、求解算法；利用附件 1、附件 2的数据重新进行计算；对计算结果与问题二的计算结果进行比较，分析你的模型的优缺点。\n2）Gibbs 模型在数学上可简化为“波动方程”:\n$$ \\frac{\\partial^2 u}{\\partial t^2} - a \\frac{\\partial^2 u}{\\partial x^2} = c \\frac{\\partial u}{\\partial t} $$\n其中 $a$为已知常数，$c$称为阻尼系数，鉴于大多数的阻尼系数公式[1][2]是作了诸多假设后推出的，并不能完整地反应实际情况。如果能从方程本身和某些数据出发用数学方法估计参数 $c$，贡献是很大的。对此，请你进行研究，详细给出计算 $c$ 的理论推导过程并尽可能求出 $c$。如果需要题目之外的数据，请用字母表示之并给出计算 $c$ 的推导过程。",
  "subtask": {
    "1": {
      "subtask": "子任务一（精确任务说明——原始悬点数据预处理与无载四连杆悬点运动学基准计算）：本子任务的目标是将给定的附件位移/荷载原始时序数据处理为可用于后续分析的干净、等时基线数据，并在相同时间基准上计算出“光杆仅受机构驱动（无井下负载）”条件下一冲程内悬点 E 的理论位移、速度与加速度时序作为基准；任务范围仅限于数据清洗、冲程分割、时序重采样与四连杆平面几何运动学求解及其导数数值化，并输出对齐的时间序列文件和比较所需的图形数据。具体步骤与方法如下：1) 输入与单位规范化——读取附件 Excel 中的原始通道（位移 m、荷载 kN、时间或样点索引及采样率或时间戳），统一单位（将 mm→m 等）、校验列头与缺失值；2) 通道同步与基线校正——若位移与荷载通道可能存在时延，用互相关函数在频带内（以冲次为中心频率的窄带滤波后）估计并校正相对时延，移除全局直流偏置并记录校正量；3) 去噪与重采样——对原始位移信号用保留冲次频率的带通滤波或小波阈值/低通滤波去除高频测量噪声（方法可选：Savitzky–Golay平滑或基于样条的平滑—其平滑强度可由广义交叉验证确定），然后用样条或线性插值将数据重采样为等间隔时间步 Δt（记录 Δt），保证 Δt 足够小以解析冲程内关键特征；4) 冲程识别与上下行分割——基于平滑位移的极值点与速度零交叉、或基于速度符号持续时间判定单个冲程起止（因附件提示首点可能非冲程起点），自动识别每个周期并标注上冲/下冲段，输出被选定用于对比的单个标准冲程时间窗；5) 理论无载运动学建模——以附录给定四连杆几何参数（AO=4315 mm、BO=2495 mm、BD=3675 mm、曲柄半径 R=950 mm，全部转换为米）和曲柄匀速角位移 φ(t)=ω t（由运行冲次转换：ω = 2π·strokes_per_second）建立平面四连杆的闭合矢量方程或角度约束方程，并在选定的等时刻格点上求解各关节坐标；数值求解采用逐时刻牛顿—Raphson 或 scipy.optimize.fsolve，初始猜测在相邻时间步采取连续值以确保快速收敛，迭代收敛容限（如 1e‑9 m 或 1e‑8 rad）与最大迭代次数记录；6) 悬点位移与导数计算——从每一时间步计算悬点 E 的竖向坐标 y_E(t)，并以 t=0（定义为曲柄 φ=0，对应 E 的下死点）将位移置零，得到 u_theory(t)=y_E(t)−y_E(0)；为获得速度 v_theory(t) 与加速度 a_theory(t) 建议采用对平滑样条拟合的 u_theory(t) 进行解析求导或在重采样后的位移上使用 Savitzky–Golay 滤波直接计算一阶与二阶导数，以避免差分放大噪声（记录所用平滑/窗宽参数）；7) 对齐与输出——将理论时序插值到原始观测的重采样时间基准（或将观测插值到理论时间格点）以便逐点对比；生成并保存标准化数据文件（时间 s、u_theory m、v_theory m/s、a_theory m/s^2；同时保留处理后的观测位移与荷载序列），并输出用于可视化的单图数据集（同一冲程上并列绘制观测位移与理论位移，注明单位与坐标方向约定：题目中向下为正）；8) 实施细节与工具建议——建议使用 Python 科学计算栈（pandas 读写 Excel，numpy、scipy.optimize 进行方程求解，scipy.interpolate 的 UnivariateSpline 或 CubicSpline 做平滑与解析导数，scipy.signal.savgol_filter 做导数估算/去噪），并在每一步记录参数选择、收敛信息与诊断日志以保证可复现性。任务成果应包含：清洗后的观测时间序列、标注的单冲程时间窗、理论无载悬点位移/速度/加速度文件、两者对齐的比较数据文件及处理与求解所用的参数/算法记录（包括滤波与拟合超参数、求解容限），以便独立检验和后续分析。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对附件悬点原始位移/荷载时序进行预处理与等时重采样，并拟合/求解无载四连杆运动学以仿真悬点E一冲程的位移、速度、加速度并与观测对齐比较。",
          "expected_output": "标准化时间序列文件（time s, u_theory m, v_theory m/s, a_theory m/s^2），清洗后的观测位移/荷载等时序，标注的单冲程时间窗，理论与观测对齐的比较数据文件，单图对比可视化数据（同图绘制观测位移与理论位移），参数与日志（滤波/重采样Δt、互相关时延、求解容限、平滑/窗宽）。",
          "key_inputs_constraints": "输入：附件Excel原始通道（位移m或mm、荷载kN、时间戳或采样率）；四连杆几何参数（AO=4.315 m, BO=2.495 m, BD=3.675 m, R=0.95 m）；冲次或转速以得ω。约束：单位统一（向下为正），位移/荷载可能存在时延需互相关校正；需带通/平滑去噪；等时重采样Δt足够小；冲程分割基于极值/零交叉；无载模型假定曲柄匀速φ(t)=ωt；数值解需收敛阈值与最大迭代限制；输出需在同一时间基准对齐。",
          "modeling_type": "拟合+仿真",
          "role_in_pipeline": "作为数据清洗与理论基准构建环节，服务于后续地下示功图反演与Gibbs模型求解。前序依赖：原始Excel数据与机构参数；后序任务：泵功图计算、参数估计与诊断、模型改进与对比分析。",
          "assumptions": "若Excel缺少显式时间列，则使用给定采样率换算时间；若缺失冲次，依据主频从位移谱估计；若首样非冲程起点，自动定位标准冲程并对齐t=0为φ=0的下死点。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "等时重采样Δt与冲次频带识别",
              "description": "是否明确需要将原始不规则/含噪时序重采样为等时Δt，并围绕冲次主频选取带通或平滑参数以保留一冲程关键特征。",
              "score": 35,
              "evaluation_focus": "问题界定/信号处理",
              "scoring_hint": "高分：给出Δt选择准则（如≥10–20点/冲程峰）、说明主频估计方法；中分：仅给出固定Δt；低分：未等时重采样或忽略频带选择。"
            },
            {
              "sub_criteria": "位移/荷载通道时延与基线偏置校正",
              "description": "是否识别到通道存在相对时延，采用互相关在冲次窄带内估计并校正；是否去除直流偏置并记录校正量。",
              "score": 35,
              "evaluation_focus": "信号校准",
              "scoring_hint": "高分：实现带通后互相关、报告时延秒数与不确定度；中分：简单互相关无频带限制；低分：未处理或手动对齐。"
            },
            {
              "sub_criteria": "四连杆无载基准与观测对齐比较需求",
              "description": "是否区分“无载理论运动学仿真”与“有荷载观测”，并要求在同一时间基准逐点对齐用于比较。",
              "score": 30,
              "evaluation_focus": "目标边界",
              "scoring_hint": "高分：清楚声明两者物理差异与对齐策略；中分：描述对齐但未阐明差异；低分：混淆或未对齐。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "单位规范化（mm→m、kN）与方向约定（向下为正）",
              "description": "是否在复述中强调单位统一与坐标方向一致并在输出中执行。",
              "score": 30,
              "evaluation_focus": "规范与一致性",
              "scoring_hint": "高分：列出所有通道单位转换与方向；中分：部分说明；低分：未统一或方向不明。"
            },
            {
              "sub_criteria": "冲程识别与上下行分割规则",
              "description": "是否明确基于极值/速度零交叉与符号持续性来界定单个冲程及上/下冲段。",
              "score": 35,
              "evaluation_focus": "任务细化",
              "scoring_hint": "高分：给出阈值/持续时间策略和异常处理；中分：仅用极值；低分：人工挑选或未说明。"
            },
            {
              "sub_criteria": "无载四连杆参数与φ(t)=ωt假设",
              "description": "是否清楚说明采用AO、BO、BD、R与匀速角速度构建运动学并设t=0对应φ=0下死点。",
              "score": 35,
              "evaluation_focus": "物理设定",
              "scoring_hint": "高分：给出ω由冲次转换并说明对齐到下死点；中分：给出ω但未对齐；低分：未说明参数或角速度关系。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "测量噪声与平滑假设（Savitzky–Golay/样条/GCV）",
              "description": "明确噪声统计或实用假设并据此选择平滑方法与强度确定策略。",
              "score": 35,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：说明窗长/多项式阶或样条λ/GCV；中分：给固定参数；低分：无平滑或不当强度导致形变。"
            },
            {
              "sub_criteria": "互相关时延估计带通假设",
              "description": "假设冲次为主导频带，先带通再做互相关以避免高频噪声干扰。",
              "score": 30,
              "evaluation_focus": "信号假设",
              "scoring_hint": "高分：明确带宽设置（如主频±n倍带宽）；中分：宽带互相关；低分：未设或不合理。"
            },
            {
              "sub_criteria": "四连杆平面、刚体、无载无摩擦假设",
              "description": "声明平面几何、连杆刚体、关节无间隙且无井下负载，仅机构驱动。",
              "score": 35,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：完整列出并讨论对结果的影响；中分：部分说明；低分：未陈述或与实现矛盾。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "四连杆闭合矢量/约束方程构建与变量定义",
              "description": "建立包含AO、BO、BD、R与未知角的非线性方程，清楚定义坐标系与关节角。",
              "score": 35,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：给出显式方程与未知数选择；中分：概述无细节；低分：方程不完整或错误。"
            },
            {
              "sub_criteria": "悬点E竖向坐标y_E(t)与u_theory(t)零位定义",
              "description": "从解出的几何关系计算y_E(t)，并以t=0、φ=0下死点为零位构造u_theory(t)。",
              "score": 25,
              "evaluation_focus": "几何到量纲",
              "scoring_hint": "高分：明确零位与方向；中分：给出y_E但未置零；低分：坐标不一致。"
            },
            {
              "sub_criteria": "观测信号处理管线（带通/平滑/重采样）设计",
              "description": "构建可重现的信号处理流程，参数可记录与复用。",
              "score": 40,
              "evaluation_focus": "流程设计",
              "scoring_hint": "高分：模块化设计与参数记录；中分：流程有但参数散落；低分：随意处理无记录。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值求解器选择与收敛控制（Newton-Raphson/fsolve）",
              "description": "逐时刻求解四连杆方程，使用连续解作为初值，设置容限与最大迭代并记录收敛率。",
              "score": 35,
              "evaluation_focus": "数值算法",
              "scoring_hint": "高分：收敛阈值≤1e-8 rad或等效、零失败；中分：偶发重启；低分：未控收敛或频繁失败。"
            },
            {
              "sub_criteria": "速度与加速度计算的稳健导数策略",
              "description": "采用样条解析导数或Savitzky–Golay导数，避免简单差分放大噪声，并记录窗宽/阶数。",
              "score": 35,
              "evaluation_focus": "数值稳定性",
              "scoring_hint": "高分：给出窗长覆盖≥5–11点、验证无明显相移；中分：仅一次差分；低分：噪声放大或不稳定。"
            },
            {
              "sub_criteria": "理论与观测时间基准对齐与插值",
              "description": "将理论序列插值到观测等时基准或相反，并保持采样对齐误差最小化。",
              "score": 30,
              "evaluation_focus": "对齐策略",
              "scoring_hint": "高分：量化对齐误差（如最大相位偏差<5%冲程）；中分：对齐但无度量；低分：未对齐。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据读写与单位校验（pandas/Excel）",
              "description": "稳健读取Excel，校验列头、缺失值处理与单位转换（mm→m、kN）。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：类型检查与缺失率报告；中分：能读但缺乏校验；低分：假定完美数据。"
            },
            {
              "sub_criteria": "信号处理实现（带通/平滑/GCV或savgol_filter）",
              "description": "实现可配置滤波与重采样，记录Δt与滤波参数到日志。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：参数化与日志化；中分：硬编码参数；低分：无参数记录。"
            },
            {
              "sub_criteria": "四连杆求解器与连续初值策略",
              "description": "实现逐时刻求解，使用上一步解作初值并处理收敛失败的回退策略。",
              "score": 30,
              "evaluation_focus": "算法工程",
              "scoring_hint": "高分：零失败或自动回退成功；中分：少量失败但可跳过；低分：频繁失败中断。"
            },
            {
              "sub_criteria": "结果输出与可视化数据生成",
              "description": "导出标准化CSV（time,u_theory,v_theory,a_theory、观测位移/荷载）与单图对比数据。",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：文件含元数据与参数；中分：仅数据列；低分：未导出或格式混乱。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "观测与理论位移一冲程对齐对比",
              "description": "在同图比较u_obs与u_theory，并说明差异来源（负载、柔性、时延残差）。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量指标（峰值差、相位偏差%冲程）；中分：定性描述；低分：无比较。"
            },
            {
              "sub_criteria": "参数与超参数记录完整性",
              "description": "报告Δt、滤波窗宽/阶数、样条λ、互相关时延、求解容限与迭代统计。",
              "score": 35,
              "evaluation_focus": "可追溯性",
              "scoring_hint": "高分：完整且可复现实验；中分：缺少部分关键参数；低分：无记录。"
            },
            {
              "sub_criteria": "异常与稳健性检查",
              "description": "检查极值/零交叉误判、端点效应、导数噪声放大；给出修正或说明。",
              "score": 30,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：明确检测并修正策略；中分：发现但未处理；低分：未识别异常。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务 2（杆—泵正演动力学模型与数值求解器实现）描述如下：本子任务的目标是建立并实现一个可直接正演、可重复运行的数值求解器，把一维轴向弹性杆（单段或分段多级杆）与地下泵（柱塞/泵腔/两阀）在时间域上耦合，输入顶端边界条件与机械与流体参数，输出杆柱在空间-时间上的位移/速度/加速度场、轴向内力分布及底端泵端的柱塞位移、泵腔压力和泵端荷载（即可绘制泵功图的时间序列）；该求解器应为后续逆问题、诊断与产量估算提供可信的正演数据和能量守恒校验手段。具体范围与要求包括：模型方程——杆体采用线性弹性带粘性阻尼的一维波动方程并在离散后形式化为 M Ü + C U̇ + K U = F_int(t)（M、C、K 分别为质量、阻尼、刚度矩阵，阻尼可采用分布粘性阻尼或比例（Rayleigh）阻尼），杆的物性按段定义以支持多级杆（每段给定长度、截面 A、密度 ρ、弹性模量 E）；顶部边界允许以给定位移（Dirichlet）或给定荷载（Neumann）施加，底端与泵耦合由柱塞的动力学方程 m_p ü_p + r_p u̇_p + k_p(u_p − u_ref) = A_p p(t) + F_mech(交互) 与泵腔流体的体积—压强方程（利用等效体积刚度 β_eq 给出 p 与腔体容积/柱塞位移的关系）构成，泵腔與阀门用基于压差的开闭规则（或带滞后的软开关連續化近似）来确定流量 Q_in/Q_out（可选择用 Cv√Δp 或 0/1 开关），阀门开闭改变边界条件并引入非线性时变项。数值离散与时间积分策略——空间可用二阶中心差分或一维线性有限元离散，生成稀疏 M、K、C；时间积分采用隐式稳定方案（推荐 Newmark‑β(β=1/4,γ=1/2) 或 generalized‑α 以控制数值耗散），每一时间步内将杆离散方程与泵边界 ODE 联立形成非线性代数方程组，通过牛顿—Raphson 迭代求解；阀门的开关逻辑在每次牛顿迭代中以当前压差判断并对开关造成的不可微性采用平滑近似或在迭代外用子迭代/事件处理来确保收敛。多段杆与接头处理——在空间离散中通过节点处不同截面/密度赋值实现节段化，接头处强制位移连续与内力平衡；可选在接头处加入局部弹簧/耗散模型以模拟接头柔度或磨损。实现细节与数值稳健性措施——采用稀疏矩阵存储與解算（如 scipy.sparse 或 PETSc），在牛顿迭代中使用降阶或预条件的稀疏迭代求解器，设定收敛容限（残差范数 1e‑8～1e‑6；牛顿步长与线搜索以增强鲁棒性），对阀门事件或高瞬态采用自适应时间步或事件捕捉以保证精度；为防止时域解被高频噪声污染，可在后处理或内部对输出施以物理一致的平滑（保守能量变换的平滑），并实施能量守恒检验（检查杆内应变能、动能与泵腔功率积分之间的收支误差）与波速一致性检查（c0 = sqrt(E/ρ) 与传播延迟匹配）。输入数据与参数要求——求解器应接收：空间几何（各杆段长度与杆径）、材料参数（E、ρ）、阻尼初值或阻尼模型、泵参数（A_p、m_p、r_p、初始腔体体积 V0、β_eq）、阀门特性（阈值压差、Cv 或开关模型、滞后参数）、以及顶端驱动（时间序列的位移或力，已预处理且为等时步）；此外需允许用户配置离散化参数（空间节点数 N、时间步 Δt）、数值选项（时间积分方法、阻尼类型）和收敛容限。输出与验收标准——按时间步输出节点位移/速度/加速度、各节点轴向内力、泵腔压强、柱塞位移与受力，生成泵功图点序列（位移—荷载），并提供数值诊断信息（残差历史、能量收支、收敛次数与阀事件时间戳）；验收时要求在网格/时间步细化后解的相对变化收敛，能量守恒误差在可容忍范围内（例如总能量误差小于若干百分比，除非泵存在明示耗散），并能稳定处理阀门开闭引起的非线性事件。软件与工具建议——优先使用支持稀疏代数和事件求解的科学计算库（Python + numpy/scipy.sparse/petsc4py，或 FEniCS/Deal.II 实现有限元），并提供模块化代码接口以便接入不同阀模型或阻尼模型；要求代码记录运行配置并能导出标准化时间序列（CSV/Excel）以供后续分析。性能建议——对于常见杆长与冲次，建议空间节点 N 取 50–200、每周期时间步数使关键瞬态（阀门开闭、波到达）被至少几十至数百步分辨，隐式方案与稀疏求解在普通工作站上应能在数秒到数分钟完成单周期正演；并应提供模态降阶或并行化选项以加速批量仿真。验算与示例用例——实现时应包含若干自检例程：弹性波传播（解析解对比）、静态拉伸一致性、以及在给定人工泵端运动下的正演与能量平衡测试以验证耦合接口和阀门事件处理的正确性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "实现一个可正演的杆—泵时域仿真求解器，能够根据给定顶部位移/荷载边界条件预测杆柱位移/速度/加速度场、轴向内力和底端泵端柱塞位移与泵腔压强（用于输出泵功图）",
          "expected_output": "等时步时间序列文件（CSV/Excel）：节点位移/速度/加速度、各节点轴向内力、泵腔压强、柱塞位移与受力、泵功图（位移—荷载）；并附带求解器代码模块、运行配置记录、数值诊断日志与能量收支报告（可复现）",
          "key_inputs_constraints": "1) 顶端驱动时间序列（等时步位移或力，已预处理）；2) 杆段几何与物性（各段长度、截面A、ρ、E）与分段数量 N；3) 泵参数（A_p、m_p、r_p、V0、β_eq、阀门阈值/Cv/滞后）；4) 数值配置（空间节点数、Δt、时间积分方法、收敛容限）；5) 约束：能处理阀门开闭事件、支持隐式时间积分与稀疏矩阵求解",
          "modeling_type": "仿真",
          "role_in_pipeline": "作为正演仿真模块：依赖子任务1（悬点数据预处理与无载理论位移）提供顶部等时步边界条件；为问题二—泵功图求解、问题三—产量估计与逆问题提供合成 / 校验数据；之后被用于逆求解与诊断算法的训练与验证。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别正演目标（杆—泵耦合仿真）",
              "description": "明确识别任务为‘杆—泵正演’，要生成泵功图并输出杆和泵的时空场与能量收支用于后续逆问题与诊断。",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：文字/图表明确列出需输出的时序量（节点位移/速度/加速度、轴向内力、泵腔压强、柱塞位移、泵功图）并说明用途；中分：列出大部分输出但遗漏能量收支或事件时间戳；低分：只是笼统写仿真，无具体输出量表。"
            },
            {
              "sub_criteria": "识别关键物理与数值约束（M C K, 时域隐式求解）",
              "description": "识别并列出杆的线性弹性带阻尼的 M·Ü+C·U̇+K·U 形式和隐式时间积分（如 Newmark‑β 或 generalized‑α）等数值要求。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：明确写出 M,C,K 形式、阻尼选项和推荐 Newmark‑β/ generalized‑α；中分：指出 M,K 但对阻尼或时间积分模糊；低分：未提及矩阵方程或时间积分策略。"
            },
            {
              "sub_criteria": "识别泵端耦合要素（泵腔、柱塞、阀门、β_eq）",
              "description": "识别泵腔流体-柱塞耦合、等效体积刚度 β_eq、柱塞动力学方程及阀门基于压差的开闭逻辑对边界条件的影响。",
              "score": 25,
              "evaluation_focus": "物理建模",
              "scoring_hint": "高分：列出柱塞 ODE、β_eq 的物理含义、阀门Cv/阈值与滞后并说明对边界条件的时变性；中分：仅部分列出泵要素；低分：忽略泵腔或阀门模型。"
            },
            {
              "sub_criteria": "识别验证与验收标准（能量守恒、网格/步长收敛）",
              "description": "识别数值验收条件：能量收支检查、网格/时间步精细化一致性、阀门事件处理稳定性及日志要求。",
              "score": 25,
              "evaluation_focus": "工程验收",
              "scoring_hint": "高分：给出能量误差容限（如 <2% 高分, 2–5% 中分, >5% 低分）并要求网格/时间收敛测试；中分：提到但无阈值；低分：未提及验证准则。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述‘杆—泵正演’的输入/输出和用途",
              "description": "清晰复述正演求解器接受顶端边界与物性输入并输出泵功图与杆时空场，说明用于逆问题与诊断校验的角色。",
              "score": 40,
              "evaluation_focus": "陈述清晰",
              "scoring_hint": "高分：准确列出输入（顶端位移/力、E,ρ,A,...、泵参数）与输出文件格式（CSV字段名），并说明用于逆问题/能量校验；中分：基本正确但遗漏字段或用途；低分：复述模糊或错误。"
            },
            {
              "sub_criteria": "复述模型的数学形式（M Ü + C U̇ + K U = F_int）",
              "description": "明确写出杆的矩阵形式与泵腔/柱塞 ODE、阀门开闭作为时变边界条件的耦合关系。",
              "score": 30,
              "evaluation_focus": "数学表达",
              "scoring_hint": "高分：给出矩阵方程并写明泵方程 m_p ü_p + r_p u̇_p + k_p(u_p−u_ref)=A_p p + F_mech 且解释项意义；中分：表达式正确但解释不全；低分：表达式缺失或错误。"
            },
            {
              "sub_criteria": "复述数值求解流程与主要算法选择",
              "description": "复述空间离散（中心差/线性有限元）、隐式时间积分（Newmark‑β/generalized‑α）、牛顿‑Raphson 迭代与稀疏解法的总体步骤。",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：步骤连贯、包含迭代收敛与事件处理策略；中分：提到算法但次序或细节不足；低分：未给出可执行流程。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "假设杆体为线性弹性与粘性阻尼",
              "description": "明确假设杆为一维线性弹性材料、阻尼可用分布粘性或 Rayleigh 比例阻尼，并说明适用条件和局限。",
              "score": 25,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：明确列出线性弹性、阻尼形式、适用频带与误差预估；中分：仅声明线性与有阻尼但未说明形式；低分：未声明或与任务冲突。"
            },
            {
              "sub_criteria": "假设泵腔用等效体积刚度 β_eq 描述流体压缩",
              "description": "阐明用 β_eq 将腔体体积变化与压强关联，并说明忽略热效应/粘性损失的条件。",
              "score": 25,
              "evaluation_focus": "流体简化",
              "scoring_hint": "高分：给出 β_eq 的定义、限界与对结果影响的定性判断；中分：写出 β_eq 但无影响分析；低分：未说明或混淆物理量。"
            },
            {
              "sub_criteria": "阀门开闭作压差阈值或连续化软开关近似",
              "description": "说明阀门模型假设（硬开关或平滑 Cv√Δp 近似、滞后处理或事件捕捉），并给出其对数值求解收敛性的影响。",
              "score": 25,
              "evaluation_focus": "非线性处理",
              "scoring_hint": "高分：明确选择并说明数值策略（平滑/事件子迭代）、阈值大小与滞后参数；中分：提出模型但无数值影响讨论；低分：忽视阀门非光滑性。"
            },
            {
              "sub_criteria": "多段杆接头假设位移连续并可选局部柔度",
              "description": "声明各杆段在节点处位移连续、内力平衡，并可在接头处引入局部弹簧/耗散以模拟柔度或磨损。",
              "score": 25,
              "evaluation_focus": "结构简化",
              "scoring_hint": "高分：明确节点约束并给出局部模型参数或标识可调项；中分：说明连续但无局部柔度选项；低分：忽略接头处理细节。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建杆体矩阵形式 M、C、K（含多段分配）",
              "description": "详细给出基于中心差或一维线性有限元的 M、K、C 离散组装方法，支持分段不同 E、ρ、A 的赋值。",
              "score": 25,
              "evaluation_focus": "离散建模",
              "scoring_hint": "高分：提供公式或伪代码，说明稀疏存储结构与边界节点处理；中分：描述总体方法但缺少组装细节；低分：只给概念性表述。"
            },
            {
              "sub_criteria": "建立泵腔—柱塞耦合方程并作为底端边界",
              "description": "把柱塞 ODE 与泵腔压强关系（β_eq 与容积变化）写成与杆端节点耦合的边界方程，明确机械力与流体力如何传递（A_p p + F_mech）。",
              "score": 20,
              "evaluation_focus": "耦合建模",
              "scoring_hint": "高分：给出耦合方程并明确如何在矩阵方程中加入F_int；中分：有方程但耦合实现描述不足；低分：耦合关系模糊或错误。"
            },
            {
              "sub_criteria": "阀门开闭逻辑与流量模型构造",
              "description": "构造基于压差的阀门模型（阈值/Cv 或平滑化 Cv√Δp），并说明阀门开闭如何改变边界流量并影响泵腔容积/压强。",
              "score": 15,
              "evaluation_focus": "非线性建模",
              "scoring_hint": "高分：给出明确开闭规则、连续化近似与滞后参数；中分：提出规则但无数学形式；低分：未提供阀门模型。"
            },
            {
              "sub_criteria": "构建能量项并输出用于能量守恒检验",
              "description": "在模型中明确动能、应变能、耗散与泵腔功率的定义并实现时间积分以供能量收支检查。",
              "score": 20,
              "evaluation_focus": "能量守恒",
              "scoring_hint": "高分：给出计算公式与实现细节，能报告总能量误差；中分：给出公式但未实现时间积分；低分：无能量项或不完整。"
            },
            {
              "sub_criteria": "支持多段杆与接头柔度的模块化实现",
              "description": "模型应模块化支持任意段数、节点处不同截面与可选接头弹簧/耗散模型，且保持位移连续与内力平衡。",
              "score": 20,
              "evaluation_focus": "模块化设计",
              "scoring_hint": "High: 模块化实现并有示例配置；中: 支持多段但接口混乱；低: 仅单段或硬编码。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "空间离散与网格收敛策略（中心差/有限元）",
              "description": "实现二阶中心差或一维线性有限元，提供网格细化说明并能在多种 N 下做收敛性检验。",
              "score": 15,
              "evaluation_focus": "数值精度",
              "scoring_hint": "高分：给出网格收敛测试并在 N 增加时结果相对变化 <1%；中分：给出测试但变化 1–5%；低分：未做或变化 >5%。"
            },
            {
              "sub_criteria": "时间积分采用隐式稳定方案（Newmark‑β/generalized‑α）",
              "description": "实现 Newmark‑β(β=1/4,γ=1/2) 或 generalized‑α，说明参数并验证数值耗散特性对高频的控制。",
              "score": 20,
              "evaluation_focus": "时间积分",
              "scoring_hint": "高分：实现并展示算法参数对稳定性的影响；中分：实现但无参数敏感性测试；低分：使用显式或不稳定方案。"
            },
            {
              "sub_criteria": "非线性求解器（牛顿—Raphson）与收敛控制",
              "description": "将杆离散方程与泵 ODE 联立，使用牛顿‑Raphson 解非线性代数方程，设置残差容限（如 1e‑8～1e‑6）并采用线搜索/步长控制。",
              "score": 20,
              "evaluation_focus": "非线性求解",
              "scoring_hint": "高分：实现牛顿迭代、有残差曲线、平均迭代次数合理且收敛；中分：实现但不稳或迭代次数大；低分：不收敛或未提供残差记录。"
            },
            {
              "sub_criteria": "稀疏矩阵与预条件迭代求解器的使用",
              "description": "利用稀疏存储与稀疏迭代解算器（或 PETSc/petsc4py），并说明预条件器选择以提高大 N 的性能。",
              "score": 20,
              "evaluation_focus": "数值效率",
              "scoring_hint": "高分：稀疏实现并提供 solve 时间与预条件器，单周期运行时间合理（例如 N=200, steps≈200 在几秒-几分钟内）；中分：稀疏但无性能数据；低分：未用稀疏或内存/时间不可接受。"
            },
            {
              "sub_criteria": "阀门事件处理与自适应步长策略",
              "description": "实现阀门开闭的事件捕捉或平滑化处理，并在事件处采用子步/自适应 Δt 以保证解的稳定与准确。",
              "score": 25,
              "evaluation_focus": "事件处理",
              "scoring_hint": "高分：能精确记录阀事件时间并用自适应步长/子迭代稳定处理；中分：有事件记录但用简单外部处理；低分：事件导致发散或未记录。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化求解器代码与接口（支持输入配置）",
              "description": "代码应模块化（离散/时间积分/泵耦合/阀模型/IO 分离），并提供可读的配置文件或函数接口接收所有输入参数。",
              "score": 25,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：模块清晰、有配置样例并能直接重现结果；中分：模块化但接口文档欠缺；低分：单脚本且难以复用。"
            },
            {
              "sub_criteria": "数值鲁棒性、日志与诊断输出（残差、迭代次数、能量）",
              "description": "实现运行日志、每步残差历史、牛顿迭代计数、能量收支与阀事件时间戳，便于调试与验收。",
              "score": 25,
              "evaluation_focus": "可靠性",
              "scoring_hint": "高分：日志完整且可导出诊断报告；中分：有部分日志但不全；低分：无或难以获取诊断信息。"
            },
            {
              "sub_criteria": "标准化输出与可复现的 CSV/Excel 导出",
              "description": "输出应能生成题目要求的标准化时间序列文件（字段名、单位、时间列），并记录运行配置与随机种子以保证可复现。",
              "score": 20,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：CSV/Excel 格式完整且包含元数据config；中分：数据输出但无配置记录；低分：输出不规范或无法重现。"
            },
            {
              "sub_criteria": "性能与可扩展性（稀疏/并行/降阶）",
              "description": "代码应使用稀疏代数并提供并行或模态降阶选项以提高批量仿真性能；提供典型运行时间参考。",
              "score": 30,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：提供并行/降阶选项并在样例上给出时间基线（单周期在合理时间内）；中分：稀疏实现但无并行或基线；低分：单线程/密集矩阵导致性能不可接受。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "能量守恒与能量收支分析（动能/应变能/泵功）",
              "description": "提供能量收支表并量化总能量误差，分析误差来源（数值耗散、阻尼、阀门事件），并判断是否在可容忍范围内。",
              "score": 30,
              "evaluation_focus": "定量验证",
              "scoring_hint": "高分：总能量误差 <2% 并给出误差成因分析；中分：误差 2–5% 并有部分解释；低分：误差 >5% 或无解释。"
            },
            {
              "sub_criteria": "网格与时间步收敛性分析",
              "description": "给出至少两组网格/时间步细化试验，报告关键输出（泵功图峰值、柱塞位移）随细化的相对变化并判断收敛性。",
              "score": 25,
              "evaluation_focus": "敏感性分析",
              "scoring_hint": "高分：相对变化 <1% 并附表格/曲线；中分：变化 1–5%；低分：未做或变化大且无解释。"
            },
            {
              "sub_criteria": "与解析或基准测试的验证（波动解析解/静态一致性）",
              "description": "用解析解或简单配置（弹性波传播、静态拉伸）进行自检并展示误差（L2 或最大误差）。",
              "score": 25,
              "evaluation_focus": "基准验证",
              "scoring_hint": "高分：至少一项解析对比误差 <5% 并给出误差度量；中分：对比但误差较大或测试有限；低分：无基准验证。"
            },
            {
              "sub_criteria": "泵功图与阀事件结果解释与时间戳输出",
              "description": "对生成的泵功图提供定量解释（有效冲程段、阀门开闭时刻）并标注事件时间戳供后续诊断使用。",
              "score": 20,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：明确标注有效冲程、阀事件并给数值度量；中分：标注但无量化阈值；低分：仅给图表无事件标注或解释错误。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3（由悬点示功反演泵端示功与动力学参数辨识）的目标是：在已知或可初步估计的杆与泵几何、材料与运行条件下，利用测得的悬点时间序列（至少包括等时采样的位移 u_top(t) 和/或顶端轴向荷载 F_top(t)）作为观测，通过受约束的数值模型求解稳定、可重复的逆问题，以恢复泵端柱塞的位移与受力时序（即泵功图）、同时估计关键动力学参数（尤其是杆体或等效阻尼系数 γ 和可辨识的少量边界/泵参数），并为所得解提供误差度量与不确定度评估；本子任务仅负责逆问题与参数辨识的数学建立、数值方案与实现细节，不包含额外的物理建模改进或产量/故障判别应用。为实现该目标，必须按以下明确步骤与方法执行：一）输入准备：读取并使用已预处理为等时步的观测序列 u_top(t), F_top(t)，并接收固定的模型先验（杆长度分段、截面 A、E、ρ、泵几何 A_p、初始腔体体积或可压缩性近似 β_eq、阀门阈值范围）；若某参数已不确定，则在待估参数向量 θ 中列明初始猜测与先验分布或正则化权重。二）约束模型表述：把杆—泵动力学作为 PDE/ODE 耦合约束（典型形式为一维轴向波动方程含阻尼 ∂^2u/∂t^2 − a ∂^2u/∂x^2 = γ ∂u/∂t 离散化后形成 M Ü + C U̇ + K U = B(θ,f_b)），并把泵端未知时间序列（如底端位移 u_b(t) 或底端力 f_b(t)）作为控制变量；定义观测算子将模型输出的顶端位移/力映射到观测空间以构造数据误差项。三）目标函数与正则化：构造带 PDE 约束的最小化问题 J(f_b,θ)=½∥W_u(u_model(0,t;θ,f_b)−u_top)∥^2 +½∥W_F(F_model(0,t;θ,f_b)−F_top)∥^2 + α R_t(f_b) + β R_p(θ)，其中 R_t 为时间域正则化（例如二阶导平方或 TV）以抑制噪声放大，R_p 为参数先验（Tikhonov/H1），权重 W_* 按通道噪声方差设置。四）梯度计算与优化算法：为高效求解采用伴随法求取关于控制变量 f_b(t) 与参数 θ 的梯度（伴随方程由离散化后的线性/非线性算子导出），并配合 L‑BFGS、Gauss‑Newton 或受限 Quasi‑Newton 优化器进行迭代；对强非线性（阀门开关）采用平滑化（软开关）或事件内子迭代以维持可微性，必要时先采用分步策略（先固定 θ 估计 f_b，再联合微调 θ）。五）数值实施细节：在空间与时间上选择与正演一致的离散（节点数与时间步使关键波传播与阀门事件被充分解析），时间积分与线性求解器采用隐式稳定方案和稀疏/预条件迭代求解器（例如 PETSc/petsc4py、scipy.sparse 或 FEniCS），迭代收敛准则基于目标降幅与梯度范数（例如相对目标变化 <1e‑6 或梯度范数小于阈值），并记录残差、步长与收敛历史。六）参数辨识策略与阻尼 γ 的估计：对阻尼参数可提供两条互补路径——频域拟合（对稳态周期段做傅里叶变换，拟合顶端传递函数幅相以初估 γ）作为初值，随后在时域伴随优化中联合估计并通过正则化约束避免过拟合；若仅有单点观测或参数可辨识性差，应采用强先验或固定不可辨识参数以降低病态性。七）不确定度与验证：通过线性化近似计算 Fisher 信息或利用 Laplace 近似/启发式蒙特卡洛在参数空间评估估计方差；用合成数据（以已知泵端序列正演产生观测并加入噪声）做闭环检验以评估重构精度，并用多周期交叉验证检测稳健性。八）输出与诊断信息：提供时间序列形式的泵端位移 u_b(t) 与泵端受力 f_b(t)（用于绘制泵功图）、参数估计 θ 及其置信区间、数据拟合残差曲线、收敛日志与能量守恒/物理一致性检查报告。指定可用工具与实现建议：数值线性代数与 PDE 离散建议使用 Python 科学栈（numpy, scipy, scipy.sparse）与 PETSc/petsc4py 或 FEniCS 以便伴随法实现，优化建议使用 scipy.optimize/L‑BFGS 或基于 dolfin‑adjoint 的自动伴随实现；并要求代码模块化以便替换正则化形式或阀门连续化策略。最后，明确定义可交付成果为：逆问题求解代码与配置、泵端时序数据文件（位移、力、时间）、参数估计报告（含不确定度）、残差与收敛诊断日志，以及合成验证实验结果；所有步骤应记录初始猜测、正则化强度与数值离散参数以确保可复现性。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于等时步悬点观测 u_top(t), F_top(t) 及先验参数，通过受约束优化与伴随法反演泵端时序 f_b(t)/u_b(t) 并拟合辨识阻尼系数 γ 等参数，获得泵功图与不确定度评估。",
          "expected_output": "泵端位移 u_b(t) 与受力 f_b(t) 的数值序列（泵功图坐标）、估计参数向量 θ（含阻尼 γ）及置信区间、优化收敛日志与残差曲线、物理一致性/能量守恒报告、配置与代码文件。",
          "key_inputs_constraints": "输入：预处理等时步的 u_top(t), F_top(t)；模型先验：杆分段几何(A,E,ρ,长度)、泵几何(A_p,β_eq,V0)、阀门阈值范围；待估参数 θ 含 γ 与少量边界/泵参数；约束：PDE/ODE 耦合 M Ü + C U̇ + K U = B(θ,f_b)，阀门软开关保证可微；观测噪声加权 W_u,W_F；正则化 αR_t(f_b)+βR_p(θ)；时间/空间离散需与正演一致并数值稳定。",
          "modeling_type": "拟合+优化+仿真",
          "role_in_pipeline": "作为正演求解器之后的逆问题与参数辨识环节；前序依赖子任务一的数据预处理与子任务二的正演模型/离散；后续为产量估算与故障判别提供泵功图与参数及不确定度。",
          "assumptions": "若仅有 u_top(t) 或 F_top(t)，采用对应单通道误差项；阀门采用平滑连续化以支持梯度；γ 先以频域拟合估计初值后在时域联合优化。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确反演目标：泵功图与阻尼系数 γ 拟合",
              "description": "是否将核心目标表述为从 u_top(t), F_top(t) 反演 u_b(t), f_b(t) 并估计 θ 尤其 γ，且强调不确定度评估。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：同时覆盖 u_b(t), f_b(t), γ 与置信区间；中分：仅反演时序或仅估 γ；低分：停留在悬点拟合未触及泵端与参数。"
            },
            {
              "sub_criteria": "数据与约束：等时步观测与PDE/ODE耦合",
              "description": "是否识别到约束为 M Ü + C U̇ + K U = B(θ,f_b) 且观测需映射为顶端算子，要求等时步一致。",
              "score": 25,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：给出观测算子与等时步要求；中分：仅口述动力学约束；低分：缺失约束或忽视时间基准。"
            },
            {
              "sub_criteria": "病态性与正则化需求",
              "description": "是否指出单点观测导致病态，需要时间正则化 R_t 与参数先验 R_p。",
              "score": 25,
              "evaluation_focus": "风险识别",
              "scoring_hint": "高分：给出 R_t 形式（H2/TV）与权重思路；中分：笼统提正则化；低分：未提病态性或正则化。"
            },
            {
              "sub_criteria": "阀门非线性与可微性处理",
              "description": "是否识别阀门开关引起不可微并提出软开关或事件子迭代。",
              "score": 20,
              "evaluation_focus": "模型理解",
              "scoring_hint": "高分：提出具体平滑策略/滞后；中分：仅提醒非线性；低分：忽略阀门影响。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述观测与输出的映射（u_top/F_top→u_b/f_b）",
              "description": "清楚描述观测算子将模型顶端输出与 u_top, F_top 对齐并最小化残差获取 u_b(t), f_b(t)。",
              "score": 35,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：写出误差项范数与加权；中分：口述拟合；低分：表述含糊。"
            },
            {
              "sub_criteria": "时间与空间离散一致性要求",
              "description": "复述需与正演相同网格/Δt，保证波传播与阀事件解析。",
              "score": 25,
              "evaluation_focus": "实现意识",
              "scoring_hint": "高分：说明节点数、稳定性考虑；中分：仅提一致性；低分：未提离散。"
            },
            {
              "sub_criteria": "目标函数结构与权重 W_u/W_F",
              "description": "准确复述 J 包含双通道误差项、正则化 α,β 的作用与设定依据（噪声方差）。",
              "score": 25,
              "evaluation_focus": "公式把握",
              "scoring_hint": "高分：给出权重与噪声关系；中分：只列出项；低分：遗漏关键项。"
            },
            {
              "sub_criteria": "参数辨识策略（γ 初值与联合优化）",
              "description": "复述频域初估 γ（传递函数幅相）→时域联合估计的两阶段策略。",
              "score": 15,
              "evaluation_focus": "方法规划",
              "scoring_hint": "高分：两阶段具体；中分：仅提初值；低分：无策略。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "可微阀门软开关/滞后假设",
              "description": "给出阀门连续化或平滑近似，使伴随法可用并说明合理性与影响。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：具体函数/参数；中分：笼统说明；低分：无或与梯度不相容。"
            },
            {
              "sub_criteria": "阻尼模型与 γ 可辨识性假设",
              "description": "说明采用分布粘性或Rayleigh阻尼，限定可辨识参数数量并给先验/约束。",
              "score": 25,
              "evaluation_focus": "辨识性",
              "scoring_hint": "高分：辨识度分析与先验范围；中分：给出模型未论证；低分：无限制估计多参数。"
            },
            {
              "sub_criteria": "观测噪声模型与权重设定",
              "description": "假设高斯噪声并据此设置 W_u,W_F 或鲁棒损失；说明来源与大小。",
              "score": 25,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：量化方差或估计法；中分：仅称高斯；低分：未说明。"
            },
            {
              "sub_criteria": "边界条件与输入可用性假设",
              "description": "明确仅有单通道观测时的处理（固定不可辨识参数或加强正则化）。",
              "score": 25,
              "evaluation_focus": "可行性",
              "scoring_hint": "高分：给出具体固定项/权重调整；中分：泛述；低分：未处理。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "目标函数 J(f_b,θ) 明确且包含 αR_t, βR_p",
              "description": "完整写出双通道残差与时间正则化、参数正则化，说明各项物理意义。",
              "score": 30,
              "evaluation_focus": "公式设计",
              "scoring_hint": "高分：公式清晰且解释权衡；中分：缺一项或不清楚；低分：目标不成形。"
            },
            {
              "sub_criteria": "观测算子与边界控制变量定义",
              "description": "定义顶端观测算子、底端控制 f_b(t) 或 u_b(t)，并论证选择的可辨识性。",
              "score": 25,
              "evaluation_focus": "结构建模",
              "scoring_hint": "高分：给出矩阵/映射；中分：仅口述；低分：未定义清楚。"
            },
            {
              "sub_criteria": "阀门平滑非线性模型的纳入",
              "description": "将软开关/滞后参数化进入约束并考虑可微性。",
              "score": 20,
              "evaluation_focus": "非线性建模",
              "scoring_hint": "高分：具体函数与导数；中分：仅加入逻辑；低分：忽略或非可微。"
            },
            {
              "sub_criteria": "正则化形式选择与参数选择策略",
              "description": "给出 R_t（二阶导/H1/TV）与 R_p（Tikhonov）的具体表达与 α,β 选取（如L曲线/CV）。",
              "score": 25,
              "evaluation_focus": "正则化",
              "scoring_hint": "高分：含调参方法；中分：固定经验值；低分：未说明或不当。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "伴随法梯度推导与实现",
              "description": "给出离散伴随方程，说明对 f_b(t) 与 θ（含 γ）的梯度获取流程。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：方程/边界清楚；中分：只述概念；低分：未给伴随或用数值差分替代。"
            },
            {
              "sub_criteria": "优化算法与收敛准则",
              "description": "选择 L-BFGS/Gauss-Newton，设定相对目标变化与梯度范数阈值，并采用线搜索/正则化以稳健收敛。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含容差与回溯策略；中分：仅给算法名；低分：无准则。"
            },
            {
              "sub_criteria": "非线性处理：阀门事件与子迭代",
              "description": "在每步牛顿中处理阀门平滑/事件，必要时子步进；确保可收敛。",
              "score": 20,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：给出事件捕捉/自适应步长；中分：提到子迭代；低分：忽略。"
            },
            {
              "sub_criteria": "离散与稳定性（与正演一致）",
              "description": "采用与正演一致的网格与隐式时间积分（Newmark/α），并说明稀疏求解与预条件。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：具体方法与参数；中分：泛述一致性；低分：显式易不稳。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化实现与接口（numpy/scipy.sparse/PETSc）",
              "description": "代码分层：正演、伴随、优化、正则化、阀门模型，支持替换与配置导出。",
              "score": 30,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：清晰模块API与配置；中分：部分模块化；低分：脚本式耦合。"
            },
            {
              "sub_criteria": "梯度校验（有限差分/双重旁站）",
              "description": "对伴随梯度进行数值校验并给出误差（如相对误差<1e-6）。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：量化误差小；中分：做过但误差偏大；低分：未校验。"
            },
            {
              "sub_criteria": "稀疏求解与性能（预条件/并行）",
              "description": "使用稀疏线性代数与预条件迭代，单周期在可接受时间内完成并给出性能记录。",
              "score": 20,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：报告耗时与迭代数；中分：稀疏但无评测；低分：稠密缓慢。"
            },
            {
              "sub_criteria": "日志与可复现（配置、随机种子、版本）",
              "description": "输出收敛日志、残差历史、配置与版本信息，确保复现。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：完整日志与配置快照；中分：部分记录；低分：缺失。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "数据拟合质量（u_top/F_top 残差）",
              "description": "报告加权残差指标（RMSE/NRMSE）与频域幅相偏差，说明是否满足阈值。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量指标与对比基线；中分：仅曲线展示；低分：无量化。"
            },
            {
              "sub_criteria": "物理一致性与能量守恒检查",
              "description": "给出能量收支误差（如<5%）与波速/传播延迟一致性验证。",
              "score": 25,
              "evaluation_focus": "物理校验",
              "scoring_hint": "高分：两项均合格；中分：仅一项；低分：均缺或超阈。"
            },
            {
              "sub_criteria": "不确定度评估（Fisher/Laplace或MC）",
              "description": "报告 θ（含 γ）置信区间或方差，并说明来源方法与敏感性。",
              "score": 25,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：区间明确且方法合理；中分：仅点估计偏差分析；低分：未评估。"
            },
            {
              "sub_criteria": "合成数据闭环验证与交叉验证",
              "description": "用已知泵端生成观测并重构，给出误差（如泵功图点到点误差<阈值）并做多周期验证。",
              "score": 20,
              "evaluation_focus": "验证能力",
              "scoring_hint": "高分：误差与稳健性报告；中分：做了但无量化；低分：未验证。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（泵功图工程应用、故障诊断、灵敏度分析与模型改进路线）的目标是以已获得的泵功图（时间序列：柱塞相对位移与对应荷载）和必要的工况/物性参数（柱塞面积 A_p、泵深/提升高度、冲次、冲程、混合液体密度与含水率、杆与泵的几何及材料参数、采样率及阀门特性范围）为输入，系统化地完成四项可独立执行的工程任务並输出可交付结果：一是实现两种互补的日产量估算方法并给出不确定度：方法A（有效冲程几何法）—自动从泵功图识别有效上冲区间（通过阀门开闭判据或泵压/力特征点）计算单次排量 V_stroke = A_p · Δu_eff 并乘以冲次换算为日产量；方法B（能量法）—计算泵功图每冲封闭曲线面积 W_stroke，并在给定提升高度与估计系统能量损失系数条件下通过 V = W_stroke/(ρ_mix g H_eff) 估算排量；两法并行并给出置信区间（通过误差传播或蒙特卡洛模拟），必要时提供一致性检查与差异原因分析规则；二是构建并实现泵内充气的自动判别算法，采用两层策略：物理规则层（基于阈值：封闭面积比、有效冲程比、上冲最小荷载、曲线多环/分支检测等明确判据）作为快速筛查器；统计/机器‑learning 层（特征提取：面积、力矩统计量、偏度、谐波失真指标等；分类器可选随机森林/SVM/孤立森林）用于概率化判定并输出置信度，算法需在带有标注或合成带噪声数据上通过交叉验证或 ROC 曲线给出灵敏度/特异度并保存判别阈值与特征重要性；三是进行系统性灵敏度与不确定度分析以量化关键参数对产量与充气判别结果的影响，采用局部灵敏度（数值差分）、全局灵敏度（Sobol 指数或方差分解，使用 SALib 等工具）与蒙特卡洛/拉普拉斯近似来给出输出分布与置信区间，报告对 E、ρ、阻尼 c、阀门阈值、A_p 等的排序与敏感度量值，并提出针对高敏感项的田间测量或检定建议；四是对现用 Gibbs 型一维杆‑泵模型进行结构性评估并提出具体的改进路线：明确列出其主要不足（线性粘性阻尼与常数压缩性假设、阀门无滞后/无流阻细化、多相气液可压缩性被忽略、接头柔度与摩擦无模型化等），并提出可实现的改进措施（把阻尼推广为频率依赖或复模量表示，引入时间变的等效容积弹性模量以描述气相含量、用连续化/滞后模型替代理想开关描述阀门、在接头处加入局部弹簧/耗散模型以模拟柔度），同时为每一改进拟定实现优先级、所需额外参数与数据（例如气相占比观测或压力瞬态）、以及预期对逆问题可辨识性的影响。对于阻尼系数 c 的辨识任务，明确给出两条可操作化方法并说明可辨识性条件：频域拟合法——对稳态周期段做 FFT，构建顶端位移/力的复传递函数 H(ω)，以含 c 的解析或数值传递函数为模型用加权复数最小二乘拟合求 c，并用频域残差估计不确定度（可用引理或 Fisher 信息矩阵得到置信区间）；时域伴随/最小二乘法——将离散化的杆方程写为受控动态系统，把 c 作为待估参数在伴随框架下计算目标函数梯度，结合 Tikhonov 正则化或先验约束进行迭代优化（L‑BFGS/Gauss‑Newton），并通过灵敏度矩阵或拉普拉斯近似评估参数方差；强调若仅有顶端单点观测则 c 与其他参数存在可辨识性退化，需通过强先验、外加已知扰动试验或多频/多测点数据来改善识别性。实施细节与交付物规定：要求使用可重现的工具链（建议 Python + numpy/pandas/scipy/scikit‑learn/SALib，FFT 与优化用 scipy.signal 与 scipy.optimize，复杂逆问题与伴随可选 dolfin‑adjoint 或自实现伴随并配合稀疏线性代数库如 PETSc/petsc4py），输出包括：日产量估算表（两法结果与置信区间）、充气判定报告（时间窗标注、概率、阈值与特征重要性）、灵敏度分析报告（参数排序與 Sobol 指数）、模型改进建议书（列出新增参数、数据需求與实现优先级）、阻尼 c 的估计值与置信区间及其辨识假设说明、以及用于验证的合成测试脚本与性能度量（RMSE、相位误差、ROC/AUC）。任务范围不包含重新求解杆—泵正演或完整逆算实现细节，但需明确所需输入数据格式与质量（等时采样泵功图位移/力、物性与几何参数、阀门阈值範围、采样率），并要求对所有算法输出给出可量化的性能指标与不确定度，以便后续工程决策或模型迭代使用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于已获得的泵功图时间序列进行日产量估算（方法A有效冲程几何法与方法B能量法）、泵内充气自动判别、灵敏度与不确定度评估，并提出Gibbs型模型的改进与阻尼系数c的估计方案的评价与实现。",
          "expected_output": "日产量估算表（两法结果与置信区间）、充气判定报告（概率与阈值）、灵敏度分析与不确定度报告（含Sobol或方差分解）、模型改进建议书（改进项与优先级）、阻尼c估计与置信区间、所用算法与参数配置说明及可运行代码/脚本。",
          "key_inputs_constraints": "输入：泵功图时间序列{u_b(t), f_b(t)}（等时采样）；物性与工况参数{A_p, ρ_mix, H_eff, 冲次, 冲程, 含水率, 采样率}；阀门特性范围与损失系数。约束：时间轴一致与单位规范（m, N, s）；数据需覆盖多个稳定周期；噪声水平与缺测需可处理；有效冲程需可由阀门开闭或力学特征点识别。",
          "modeling_type": "评价+拟合+分类+不确定度分析",
          "role_in_pipeline": "作为正演/逆算后的工程应用与评估环节：前序依赖子任务2（正演求解器）与子任务3（逆问题重构泵功图及参数）；后续为现场决策、产量管理与模型迭代提供依据。",
          "assumptions": "若缺少部分物性（如损失系数、含气率），允许设定先验分布并通过蒙特卡洛传播不确定度；泵功图已对齐并为单冲程或多冲程等时序列。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "区分方法A（有效冲程Δu_eff）与方法B（功图面积W_stroke）产量估算",
              "description": "明确日产量两法的物理差异：A用V_stroke=A_p·Δu_eff，B用V=W_stroke/(ρ_mix g H_eff)，并指出各自所需参数与适用条件。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：两法公式正确并列出A_p, ρ_mix, H_eff、冲次与周期均值化；中分：给出两法但缺少关键参数或单位未统一；低分：只提一种或公式错误。"
            },
            {
              "sub_criteria": "充气判别任务边界与判据层次（规则层+ML层）",
              "description": "识别两层策略：物理阈值筛查（面积比、有效冲程比、上冲最小荷载、多环）与统计/ML概率判别，并说明输出置信度。",
              "score": 25,
              "evaluation_focus": "任务界定",
              "scoring_hint": "高分：清楚两层目标与输出；中分：仅有单层或未说明置信度；低分：将充气与其他故障混淆。"
            },
            {
              "sub_criteria": "灵敏度与不确定度分析目标与对象",
              "description": "点明需对E, ρ, 阻尼c, 阀门阈值, A_p等做局部与全局灵敏度（Sobol/方差分解）并量化不确定度对日产量与充气判定的影响。",
              "score": 25,
              "evaluation_focus": "评价设计",
              "scoring_hint": "高分：列出方法与指标（Sobol、方差、置信区间）；中分：只述局部或全局之一；低分：无量化计划。"
            },
            {
              "sub_criteria": "阻尼系数c估计任务定位（频域拟合与时域最小二乘）",
              "description": "识别两条估计路径与可辨识性条件（单点观测退化、需先验或多频/多测点）。",
              "score": 20,
              "evaluation_focus": "可辨识性",
              "scoring_hint": "高分：同时说明频域H(ω)拟合与时域伴随/最小二乘，并提可辨识性限制；中分：仅提一种；低分：未识别估计路径或忽视退化。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "数据要求与单位规范（等时采样u_b(t), f_b(t)）",
              "description": "复述需等时采样、单位统一（m, N, s），多周期稳态段用于估算与统计。",
              "score": 25,
              "evaluation_focus": "需求澄清",
              "scoring_hint": "高分：明确采样率、周期选择与单位；中分：缺其一；低分：未说明。"
            },
            {
              "sub_criteria": "日产量输出与不确定度形式",
              "description": "说明日累积V_day与质量流量换算（吨），并给出置信区间或误差条及计算路径（误差传播/蒙特卡洛）。",
              "score": 25,
              "evaluation_focus": "输出规范",
              "scoring_hint": "高分：含数值区间与方法；中分：仅点估计；低分：未定义单位或周期。"
            },
            {
              "sub_criteria": "充气判定结果表达（概率与阈值）",
              "description": "复述需输出充气概率、阈值、ROC/AUC或交叉验证指标。",
              "score": 25,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：含概率与性能指标；中分：仅给标签；低分：无量化。"
            },
            {
              "sub_criteria": "灵敏度报告与改进建议联动",
              "description": "指出需排序敏感参数并提出测量/检定建议与模型改进优先级。",
              "score": 25,
              "evaluation_focus": "沟通表达",
              "scoring_hint": "高分：清晰排序并给建议；中分：只有排序；低分：无复述。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "方法A有效冲程识别假设（阀门开闭或力学特征）",
              "description": "明确有效上冲区间的判别假设（阈值、滞后、平滑）并说明适用性与潜在偏差。",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：阈值与滞后设定合理且可校准；中分：仅给阈值；低分：无明确假设。"
            },
            {
              "sub_criteria": "方法B能量损失与H_eff假设",
              "description": "声明提升高度H_eff与损失系数设定/分布，并说明温度/气含影响的处理。",
              "score": 25,
              "evaluation_focus": "物理假设",
              "scoring_hint": "高分：给出分布或区间；中分：常数假设；低分：忽略损失。"
            },
            {
              "sub_criteria": "充气判别阈值与ML先验假设",
              "description": "定义面积比、上冲最小荷载等阈值来源（经验/标定），ML训练数据假设与交叉验证方案。",
              "score": 20,
              "evaluation_focus": "诊断假设",
              "scoring_hint": "高分：阈值可追溯并经验证；中分：经验阈值未验证；低分：无依据。"
            },
            {
              "sub_criteria": "不确定度传播与参数先验",
              "description": "为A_p, ρ_mix, c等设定先验或范围，用于误差传播/蒙特卡洛。",
              "score": 20,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：明确分布与样本量；中分：仅范围；低分：无不确定度处理。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "日产量模型A与B的数学表述与单位检验",
              "description": "给出V_stroke=A_p·Δu_eff与V=W_stroke/(ρ_mix g H_eff)，含冲次累计与单位一致性检查。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：完整推导与单位自洽；中分：缺单位或累计；低分：公式错误。"
            },
            {
              "sub_criteria": "充气判别特征与分类器构建",
              "description": "规则层阈值+特征集（面积、偏度、谐波失真、多环检测）+ML模型（RF/SVM/孤立森林）与概率输出。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：特征充分且模型恰当；中分：特征或模型单一；低分：仅口述无模型。"
            },
            {
              "sub_criteria": "灵敏度/不确定度模型（Sobol与局部差分）",
              "description": "设计输入分布、采样方案（Saltelli）、指标（一阶/总效应），并含局部灵敏度。",
              "score": 25,
              "evaluation_focus": "实验设计",
              "scoring_hint": "高分：明确采样量与指标；中分：仅一种方法；低分：无可复现实验。"
            },
            {
              "sub_criteria": "阻尼c估计模型（频域H(ω)与时域最小二乘）",
              "description": "构建复传递函数拟合或离散最小二乘目标并说明正则化与辨识性条件。",
              "score": 15,
              "evaluation_focus": "参数拟合",
              "scoring_hint": "高分：目标函数与正则清楚；中分：仅口述；低分：未建模。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "有效冲程Δu_eff与W_stroke的稳健计算",
              "description": "实现阀门事件/特征点检测、积分面积数值稳定（抗噪、基线矫正），多周期平均与置信区间。",
              "score": 35,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：多周期均值±CI并有去噪；中分：单周期或无CI；低分：结果不稳定。"
            },
            {
              "sub_criteria": "充气判别训练与验证（ROC/AUC或交叉验证）",
              "description": "完成规则层阈值标定与ML交叉验证，报告AUC、灵敏度/特异度与阈值。",
              "score": 25,
              "evaluation_focus": "模型验证",
              "scoring_hint": "高分：给AUC与混淆矩阵；中分：仅准确率；低分：无验证。"
            },
            {
              "sub_criteria": "灵敏度与不确定度求解流程（SALib/蒙特卡洛）",
              "description": "运行Sobol或方差分解，输出指数与方差贡献；蒙特卡洛传播日产量置信区间。",
              "score": 25,
              "evaluation_focus": "不确定度",
              "scoring_hint": "高分：可重复结果与收敛检查；中分：结果无收敛证据；低分：未执行。"
            },
            {
              "sub_criteria": "阻尼c估计与置信区间",
              "description": "给出频域或时域拟合的c估计与方差（Fisher或拉普拉斯近似），并讨论可辨识性。",
              "score": 15,
              "evaluation_focus": "参数估计",
              "scoring_hint": "高分：数值与区间齐全；中分：点估计；低分：未求解或不合理。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据管线与单位校验实现（numpy/pandas）",
              "description": "等时采样检查、单位转换、周期分割与基线校正的可重复脚本。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：参数化脚本与日志；中分：零散Notebook；低分：手工处理无代码。"
            },
            {
              "sub_criteria": "日产量计算与不确定度传播代码",
              "description": "实现Δu_eff识别、W_stroke面积积分、冲次累计与蒙特卡洛/误差传播。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：函数化与测试样例；中分：仅主流程；低分：缺关键模块。"
            },
            {
              "sub_criteria": "充气判别器与验证（scikit-learn/SALib）",
              "description": "特征提取、阈值器与ML分类、交叉验证/ROC生成及阈值持久化。",
              "score": 25,
              "evaluation_focus": "算法工程",
              "scoring_hint": "高分：pipeline与模型存档；中分：散乱实现；低分：无验证代码。"
            },
            {
              "sub_criteria": "可配置性与复现（配置文件/随机种子/日志）",
              "description": "参数化配置、随机种子固定、版本与运行环境记录，导出标准CSV结果。",
              "score": 25,
              "evaluation_focus": "复现性",
              "scoring_hint": "高分：一键重现；中分：需手工改参数；低分：不可复现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "两法日产量一致性与偏差原因分析",
              "description": "比较方法A与B结果，分析差异来源（损失、H_eff估计、充气影响），给出最终综合估计。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：定量对比与误差条；中分：定性解释；低分：无比较。"
            },
            {
              "sub_criteria": "充气判定报告与性能指标",
              "description": "输出每周期充气概率、阈值命中情况与ROC/AUC或混淆矩阵，并解释误判场景。",
              "score": 25,
              "evaluation_focus": "诊断解读",
              "scoring_hint": "高分：含指标与案例；中分：仅标签；低分：无指标。"
            },
            {
              "sub_criteria": "灵敏度排序与现场建议",
              "description": "提供对E, ρ, c, 阀门阈值, A_p的敏感度排序及测量/校准优先建议。",
              "score": 25,
              "evaluation_focus": "决策支持",
              "scoring_hint": "高分：排序+量化指数；中分：模糊排序；低分：无建议。"
            },
            {
              "sub_criteria": "模型改进路线与c估计假设说明",
              "description": "列出Gibbs模型不足、改进措施与优先级；说明c估计的可辨识性前提与局限。",
              "score": 20,
              "evaluation_focus": "模型评价",
              "scoring_hint": "高分：具体改进与数据需求；中分：泛泛而谈；低分：无可执行建议。"
            }
          ]
        }
      }
    }
  }
}