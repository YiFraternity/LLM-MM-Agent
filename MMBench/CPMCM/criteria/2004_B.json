{
  "task_id": "2004_B",
  "problem": "1. 建立一维单一原材料实用下料问题的数学模型, 并用此模型求解下列问题，制定出在生产能力容许的条件下满足需求的下料方案, 同时求出等额完成任务所需的原材料数，所采用的下料方式数和废料总长度.  单一原材料的长度为 3000mm, 需要完成一项有53种不同长度零件的下料任务. 具体数据见表一，其中 $l_1$ 为需求零件的长度，$n_1$ 为需求零件的数量. 此外，在每个切割点处由于锯缝所产生的损耗为5mm. 据估计，该企业每天最大下料能力是100块 ，要求在4天内完成的零件标号($i$)为: 5,7,9,12,15,18,20,25,28,36,48; 要求不迟于6天完成的零件标号($i$)为:4,11,24,29,32,38,40,46,50. (提示：可分层建模。(1).先考虑用材料既少,下料方式又少的模型, 或先仅考虑所用材料最少的模型及增加一种下料方式大致相当于使原材料总损耗增加0.08%情况下的最佳方案。 (2).在解决具体问题时,先制定4天的下料方案,再制定6天的下料方案,最后制定53种零件的下料方案. 这一提示对第2题也部分适用.)\n\n\\begin{table}[htbp]\n    \\centering\n    \\caption{表一 材料的需求数据 (单位: mm)}\n    % 表格列定义：|c|c|c|...|c| (共 11 列，第一列是行标题，其余 10 列是数据)\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 1-10 组数据}} \\\\\n        \\midrule\n        $i$ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\\\\n        \\midrule\n        $l_i$ & 1743 & 1680 & 1532 & 1477 & 1313 & 1285 & 1232 & 1217 & 1180 & 1177 \\\\\n        \\midrule\n        $n_i$ & 4 & 216 & 104 & 38 & 4 & 60 & 4 & 8 & 6 & 10 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 11-20 组数据}} \\\\\n        \\midrule\n        $i$ & 11 & 12 & 13 & 14 & 15 & 16 & 17 & 18 & 19 & 20 \\\\\n        \\midrule\n        $l_i$ & 1105 & 1055 & 1046 & 1032 & 1030 & 975 & 893 & 882 & 847 & 845 \\\\\n        \\midrule\n        $n_i$ & 8 & 2 & 4 & 8 & 8 & 2 & 8 & 301 & 6 & 38 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 21-30 组数据}} \\\\\n        \\midrule\n        $i$ & 21 & 22 & 23 & 24 & 25 & 26 & 27 & 28 & 29 & 30 \\\\\n        \\midrule\n        $l_i$ & 830 & 795 & 766 & 745 & 732 & 719 & 714 & 690 & 665 & 633 \\\\\n        \\midrule\n        $n_i$ & 30 & 8 & 4 & 4 & 34 & 18 & 4 & 4 & 90 & 30 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 31-40 组数据}} \\\\\n        \\midrule\n        $i$ & 31 & 32 & 33 & 34 & 35 & 36 & 37 & 38 & 39 & 40 \\\\\n        \\midrule\n        $l_i$ & 630 & 600 & 590 & 588 & 582 & 578 & 540 & 488 & 455 & 434 \\\\\n        \\midrule\n        $n_i$ & 30 & 212 & 108 & 482 & 196 & 8 & 32 & 4 & 52 & 42 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 41-50 组数据}} \\\\\n        \\midrule\n        $i$ & 41 & 42 & 43 & 44 & 45 & 46 & 47 & 48 & 49 & 50 \\\\\n        \\midrule\n        $l_i$ & 420 & 415 & 414 & 411 & 405 & 328 & 313 & 290 & 275 & 265 \\\\\n        \\midrule\n        $n_i$ & 8 & 8 & 8 & 60 & 136 & 4 & 68 & 286 & 502 & 286 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|c|c|c|c|c|c|}\n        \\toprule\n        \\multicolumn{7}{|c|}{\\textbf{第 51-53 组数据}} \\\\\n        \\midrule\n        $i$ & 51 & 52 & 53 & \\multicolumn{3}{c|}{} \\\\\n        \\midrule\n        $l_i$ & 255 & 184 & 155 & \\multicolumn{3}{c|}{} \\\\\n        \\midrule\n        $n_i$ & 292 & 57 & 24 & \\multicolumn{3}{c|}{} \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n2. 建立二维单一原材料实用下料问题的数学模型, 并用此模型求解下列问题.制定出在企业生产能力容许的条件下满足需求的下料方案, 同时求出等额完成任务所需的原材料块数和所需下料方式数.这个问题的单一原材料的长度为 3000mm,宽度为100mm, 需要完成一项有43种不同长度和宽度零件的下料任务. 具体数据见表二，其中$l_1, w_i, n_i$分别为需求零件的长度、宽度和数量.  切割时的锯缝可以是直的也可以是弯的，切割所引起的锯缝损耗忽略不计.据估计，该企业每天最大下料能力是20块 要求在4天内完成的零件标号($i$)为: 3,7,9,12,15, 18, 20, 25, 28, 36.\n\n\\begin{table}[htbp]\n    \\centering\n    \\caption{表二 材料的需求数据 (单位: mm)}\n    % 表格列定义：|c|c|c|...|c| (共 11 列，第一列是行标题，其余 10 列是数据)\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 1-10 组数据}} \\\\\n        \\midrule\n        $i$ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\\\\n        \\midrule\n        $l_i$ & 1105 & 1055 & 1046 & 1032 & 1030 & 975 & 893 & 882 & 847 & 845 \\\\\n        \\midrule\n        $w_i$ & 30 & 20 & 50 & 30 & 20 & 50 & 30 & 20 & 30 & 30 \\\\\n        \\midrule\n        $n_i$ & 24 & 6 & 12 & 24 & 6 & 24 & 1001 & 20 & 108 & 20 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 11-20 组数据}} \\\\\n        \\midrule\n        $i$ & 11 & 12 & 13 & 14 & 15 & 16 & 17 & 18 & 19 & 20 \\\\\n        \\midrule\n        $l_i$ & 830 & 795 & 766 & 745 & 732 & 719 & 714 & 690 & 665 & 633 \\\\\n        \\midrule\n        $w_i$ & 30 & 20 & 35 & 30 & 30 & 30 & 50 & 30 & 20 & 30 \\\\\n        \\midrule\n        $n_i$ & 90 & 40 & 12 & 12 & 68 & 54 & 10 & 12 & 270 & 90 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 21-30 组数据}} \\\\\n        \\midrule\n        $i$ & 21 & 22 & 23 & 24 & 25 & 26 & 27 & 28 & 29 & 30 \\\\\n        \\midrule\n        $l_i$ & 630 & 600 & 590 & 588 & 582 & 578 & 540 & 488 & 455 & 434 \\\\\n        \\midrule\n        $w_i$ & 30 & 35 & 20 & 20 & 30 & 20 & 50 & 20 & 20 & 30 \\\\\n        \\midrule\n        $n_i$ & 90 & 612 & 508 & 2082 & 496 & 24 & 62 & 20 & 162 & 92 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|*{10}{c|}}\n        \\toprule\n        \\multicolumn{11}{|c|}{\\textbf{第 31-40 组数据}} \\\\\n        \\midrule\n        $i$ & 31 & 32 & 33 & 34 & 35 & 36 & 37 & 38 & 39 & 40 \\\\\n        \\midrule\n        $l_i$ & 420 & 415 & 414 & 411 & 405 & 328 & 313 & 290 & 275 & 265 \\\\\n        \\midrule\n        $w_i$ & 20 & 30 & 20 & 30 & 20 & 30 & 50 & 30 & 20 & 30 \\\\\n        \\midrule\n        $n_i$ & 40 & 24 & 40 & 180 & 536 & 12 & 128 & 686 & 2002 & 686 \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n\n\\begin{table}[htbp]\n    \\centering\n    \\begin{tabular}{|c|c|c|c|c|c|c|}\n        \\toprule\n        \\multicolumn{7}{|c|}{\\textbf{第 41-43 组数据}} \\\\\n        \\midrule\n        $i$ & 41 & 42 & 43 & \\multicolumn{3}{c|}{} \\\\\n        \\midrule\n        $l_i$ & 255 & 184 & 155 & \\multicolumn{3}{c|}{} \\\\\n        \\midrule\n        $w_i$ & 30 & 20 & 50 & \\multicolumn{3}{c|}{} \\\\\n        \\midrule\n        $n_i$ & 692 & 357 & 52 & \\multicolumn{3}{c|}{} \\\\\n        \\bottomrule\n    \\end{tabular}\n\\end{table}\n",
  "subtask": {
    "1": {
      "subtask": "子任务一的目标是把原始需求与工厂约束精确、结构化地转化为可直接用于建模与求解的规范化实例文件，并在此过程中明确所有假设、参数与可行性前提；具体工作包括：读取并校验输入表格（将题中两套数据表按零件编号导入，检查 l_i、w_i、n_i 的单位一致性与非负性，确认每个长度/宽度均满足题中约束如 l_i < L 与 w_i < W），合并完全相同规格的条目以得到去重后的种类集合并生成每种规格的总需求量与唯一ID，标记并生成交期优先级属性（将“须在4天/6天完成”给出的零件编号映射为相应的截止期 T_i 并生成每期的累计需求阈值），明确并记录问题级参数的数值与含义（一维：原材料长度 L=3000 mm，切缝损耗 k=5 mm；二维：原材料长 L=3000 mm、宽 W=100 mm，题中说明可忽略锯缝），明确工程假设并将其写入实例说明文件（是否允许零件旋转、是否允许边料拼接入组、刀缝是否恒定、是否允许零件跨板拼接等；默认假设需在文件中列明以便日后调整），为每个零件计算并存储几个衍生量（单件占用长度 l_i、单件占用宽度 w_i、按单板理论最大能切出的上界 floor((L + k)/(l_i + k))、以及该规格对总资源的理论占比），执行一致性与可行性检测（总需求长度之和与理论下界板数 lower_bound_no_kerf = ceil(sum_i n_i * l_i / L) 及包含最小必要切缝估算后的下界，检查任何单件长度或宽度超限），按需产生便于后续建模的数据结构与文件输出（规范化的 CSV/JSON 参数文件，包括向量 l_i、w_i、n_i、T_i、优先级标志；索引映射表；宽度类别汇总表以便二维分解时使用；以及用于求解器的元信息如产能 C_t=100（或20）和期数 T），并给出明确的接口规范（字段名、数据类型、缺失值处理规则）与基础报告（数据校验日志、合并记录、下界估算结果与任何异常或需人工确认的项）。该子任务应使用可复现的工具链实现（建议用 Python + pandas 做数据清洗、验证与文件导出，并保留版本化的实例文件和校验脚本），其最终交付为一套完整、经校验的实例文件和一页的实例说明文档，确保后续建模模块可以无需额外解释直接读取并使用这些输入。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建与校验一维/二维下料实例数据并导出规范化参数文件，以支持后续优化求解原材料最小化与下料方式控制的建模",
          "expected_output": "经校验的CSV/JSON参数文件（l_i,w_i,n_i,T_i、产能C_t、期数T、索引映射、宽度类别汇总、派生上界/下界）、数据校验与合并日志、实例说明文档（假设与接口规范）、可复现的Python+pandas清洗脚本",
          "key_inputs_constraints": "输入变量：L=3000mm、W=100mm（二维）、k=5mm（一维）、表一/表二的l_i,w_i,n_i与优先级集合；数据类型：整数或非负数；约束：l_i<L、w_i<W、n_i≥0、单位统一为mm、不可旋转（默认）与不可跨板拼接（默认）；产能：一维C_t=100/天、二维C_t=20/天；期限集合：4天与6天映射T_i。",
          "modeling_type": "评价+优化前准备",
          "role_in_pipeline": "作为数据清洗与实例化子任务，位于优化建模与求解之前；前序依赖：原始表格与期限集合；后序任务：列生成/整数规划求解、方案生成与排产校验",
          "assumptions": "单位均为mm且无缺失；二维可忽略锯缝；一维锯缝恒定k=5mm且仅在相邻切割之间计一次；不允许零件跨板拼接与旋转；相同规格完全可合并；期限T_i仅在需求汇总与产能约束中使用。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "核心目标对齐：实例数据构建与校验而非求解优化",
              "description": "明确本子任务仅“构建与校验一维/二维下料实例数据并导出参数文件”，不混淆为求解原材料最小化。",
              "score": 25,
              "evaluation_focus": "任务界定",
              "scoring_hint": "高分：清晰排除求解步骤，聚焦数据规范与校验；中分：少量涉及求解但主体仍为数据构建；低分：将重心放在优化建模或方案搜索。"
            },
            {
              "sub_criteria": "输入范围识别：表一/表二与产能/期限集合",
              "description": "完整点名L、W、k、l_i、w_i、n_i、C_t、T、4天/6天优先集，识别二维忽略锯缝与一维k=5mm差异。",
              "score": 25,
              "evaluation_focus": "需求抽取",
              "scoring_hint": "高分：全部关键量与差异被点名；中分：缺1–2项；低分：遗漏多项或混淆一维/二维设定。"
            },
            {
              "sub_criteria": "关键校验任务识别：单位一致性与边界可行性",
              "description": "明确需校验单位统一、非负性、l_i<L、w_i<W、长度/宽度超限检测。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：列出全部校验项并说明失败处理；中分：列出但未覆盖全部或处理不明确；低分：未识别或未规划校验。"
            },
            {
              "sub_criteria": "派生量与下界估计识别",
              "description": "识别需计算floor((L+k)/(l_i+k))、资源占比、lower_bound_no_kerf与含锯缝下界。",
              "score": 25,
              "evaluation_focus": "指标抽取",
              "scoring_hint": "高分：两类下界与上界均覆盖；中分：只覆盖其一；低分：无派生量或不正确公式。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "一维/二维差异复述：k=5mm vs 忽略锯缝、W=100mm",
              "description": "准确复述一维仅长度切割含锯缝、二维长宽同时考虑且锯缝忽略。",
              "score": 30,
              "evaluation_focus": "需求澄清",
              "scoring_hint": "高分：差异与影响到上界/下界均阐明；中分：只陈述差异无影响；低分：表述错误或混淆。"
            },
            {
              "sub_criteria": "期限映射复述：4天/6天T_i与产能C_t",
              "description": "将编号集合映射为T_i，给出期数T与C_t（100或20），并说明累计需求阈值。",
              "score": 30,
              "evaluation_focus": "约束表达",
              "scoring_hint": "高分：形成可计算T_i与分期累计量；中分：仅文字说明无可用结构；低分：遗漏或错误映射。"
            },
            {
              "sub_criteria": "合并与去重复述：相同规格聚合与唯一ID",
              "description": "清晰描述按(l_i,w_i)合并、生成唯一ID与总需求量。",
              "score": 20,
              "evaluation_focus": "数据规范",
              "scoring_hint": "高分：含重复判定与合并日志要求；中分：仅说明合并；低分：未提或误合并。"
            },
            {
              "sub_criteria": "接口规范复述：字段名/类型/缺失处理",
              "description": "给出字段名、数据类型、缺失/异常处理策略，便于后续直接读取。",
              "score": 20,
              "evaluation_focus": "接口定义",
              "scoring_hint": "高分：完整字段与类型，缺失策略明确；中分：字段不全或无缺失策略；低分：未提供接口规范。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "旋转/拼接假设记录",
              "description": "明确是否允许零件旋转、跨板拼接、边料拼接，默认均不允许并记录理由。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：逐项列明并与实例说明绑定；中分：有列明但不全；低分：未提出或矛盾。"
            },
            {
              "sub_criteria": "锯缝假设：一维恒定k与二维忽略",
              "description": "写入刀缝恒定、一维仅在相邻切割计一次，二维忽略损耗。",
              "score": 25,
              "evaluation_focus": "约束细化",
              "scoring_hint": "高分：说明对上界/下界计算的影响；中分：仅口述；低分：遗漏或错误。"
            },
            {
              "sub_criteria": "单位与非负性假设",
              "description": "假设全部输入为mm与非负并给出校验与报错策略。",
              "score": 25,
              "evaluation_focus": "数据质量",
              "scoring_hint": "高分：含自动单位检测/转换或硬校验；中分：仅描述无实现；低分：未提。"
            },
            {
              "sub_criteria": "产能与期限使用假设",
              "description": "说明C_t按天上限，T_i用于累计需求阈值，不做细粒度排程。",
              "score": 20,
              "evaluation_focus": "范围界定",
              "scoring_hint": "高分：界定清晰并与导出字段一致；中分：表述含糊；低分：与导出不一致。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "派生量计算定义：floor((L+k)/(l_i+k))与资源占比",
              "description": "给出一维上界、二维按宽度分类上界思路与各规格占比计算方法。",
              "score": 35,
              "evaluation_focus": "指标定义",
              "scoring_hint": "高分：公式正确且覆盖一维/二维；中分：仅一维或无占比；低分：公式错误。"
            },
            {
              "sub_criteria": "下界估算：lower_bound_no_kerf与含锯缝版本",
              "description": "实现无锯缝下界ceil(sum n_i*l_i/L)与含锯缝的保守修正并输出结果。",
              "score": 35,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：同时输出与解释差异；中分：仅其一；低分：未给或计算不当。"
            },
            {
              "sub_criteria": "期限与产能结构化：T_i、C_t、期数T",
              "description": "为每个i生成T_i，构建每期累计需求阈值与C_t元信息。",
              "score": 30,
              "evaluation_focus": "数据建模",
              "scoring_hint": "高分：形成可直接用于约束的表；中分：字段有但不可用；低分：缺失或错误。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "不适用标注",
              "description": "本子任务不进行优化求解，仅输出实例数据与校验报告。",
              "score": 100,
              "evaluation_focus": "范围界定",
              "scoring_hint": "高分：明确标注并无求解实现；中分：少量求解痕迹但未执行；低分：实现或报告求解结果。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现工具链：Python+pandas脚本与版本化实例文件",
              "description": "提供可运行脚本，固定随机性（若有），输出CSV/JSON与日志。",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：脚本一键生成全部产物；中分：需手工步骤；低分：无脚本或无法运行。"
            },
            {
              "sub_criteria": "输入读取与校验：单位/非负性/l_i<L/w_i<W",
              "description": "实现强校验与错误信息，生成校验日志与异常列表。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：自动化校验与详细日志；中分：部分校验；低分：缺校验或静默错误。"
            },
            {
              "sub_criteria": "合并去重与索引映射表生成",
              "description": "按(l_i,w_i)聚合n_i，生成唯一ID与映射CSV。",
              "score": 20,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：稳定去重且有合并记录；中分：可用但无日志；低分：错误合并或缺失。"
            },
            {
              "sub_criteria": "派生量与下界输出到参数文件",
              "description": "计算并写出上界/下界、资源占比、T_i、C_t、T等字段。",
              "score": 20,
              "evaluation_focus": "产出完整性",
              "scoring_hint": "高分：字段齐全格式正确；中分：缺少1–2项；低分：关键字段缺失或格式错误。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "校验日志与合并记录可读性",
              "description": "报告单位转换、异常条目、合并前后差异与数量变化。",
              "score": 35,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：结构化日志含计数与示例；中分：零散描述；低分：无日志。"
            },
            {
              "sub_criteria": "下界估算与可行性结论",
              "description": "比较lower_bound_no_kerf与含锯缝下界，给出原材料下界块数与是否存在超限零件结论。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：数值明确并解释差异原因；中分：给出其一或无解释；低分：缺失或错误。"
            },
            {
              "sub_criteria": "接口规范与缺失值处理说明",
              "description": "字段名、类型、缺失/异常处理、NA填充策略均在实例说明文档中明确。",
              "score": 30,
              "evaluation_focus": "文档质量",
              "scoring_hint": "高分：完整且与产出一致；中分：部分缺漏；低分：无规范或与产出不一致。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（精确描述）：建立并实现一维单一原材料下料的模式化整数规划求解模块，目标是在给定输入（原料长度 L=3000 mm、单件长度向量 l_i、每种件需求 n_i、每个切缝损耗 k=5 mm、多期产能向量 C_t 及各件的最晚交期集合/截止期 T_i）和期数 T 下，求得（1）最小总用板数 N*（或等价的最小总废料方案），并输出对应的模式集合及各期使用计划；以及（2）在允许总板数上浮 ε（参数可设，用于实现“材料-模式数折衷”）范围内最小化启用模式数 P 的近优方案。为此按以下步骤实现：A. 输入与预处理：校验并合并同规格条目，计算每种件在单板上的理论最大放置上界 floor((L + k)/(l_i + k))，生成交期优先标识并构造需求的期累积约束。B. 模式化主模型（master）：定义每种模式 j 的构成整数向量 a_{i,j}（满足 sum_i a_{i,j} l_i + (p_j - 1) k ≤ L, p_j = sum_i a_{i,j} > 0），决策变量为 y_{j,t} ∈ Z_{\\ge0}（期 t 使用模式 j 的块数）和可选二元 u_j 表示模式启用；主问题约束包括对所有 i 的累积交付约束 sum_{t,j} a_{i,j} y_{j,t} ≥ n_i、每期产能约束 sum_j y_{j,t} ≤ C_t、以及链接约束 y_{j,t} ≤ M u_j（大M取需求上界或总板数上界）；目标初版为最小化总板数 sum_{t,j} y_{j,t}（备选目标为最小化总废料 sum_{t,j} w_j y_{j,t}，w_j = L - used_length）。C. 列生成与定价子问题：采用 Gilmore–Gomory 列生成框架对 master 的 LP 松弛进行求解，主问题用 LP 解得对偶价格 π_i,t（并行对各期），定价子问题为带切缝的一维整数背包：对于每期 t 求解 max sum_i π_i,t a_i s.t. sum_i a_i l_i + (sum_i a_i -1) k ≤ L, a_i ∈ Z_{\\ge0}，若最大化值 ≤ 1（或 ≤ 0 取决于 dual form）则无改善列收敛；价格子问题可用精确动态规划（状态按剩余长度，L=3000 可行）或小规模 ILP 求解，多期可并行处理以加速。D. 初始列与启发式：用贪心 (Largest-Fit-Decreasing) 生成若干初始模式以保障列生成快速启动，并在需要时用启发式（贪心、局部替换）生成候选模式补充定价。E. 整数化：当 LP 列生成稳定后，对当前候选列集合求解整数主问题（用商业 MIP 求解器如 Gurobi/CPLEX 或开源 OR-Tools CP-SAT）得到一个可行整数上界；若需保证最优，可实现 Branch-and-Price（若工具可行）或采用分支定价简化策略；设置求解器时间限、最小化整型间隙或允许近似容忍度作为停止准则。F. 模式数压缩（二阶段/ε-约束）：在确定 N*（或其 LP 下界与整数上界后），通过 ε-约束法限定 sum_{t,j} y_{j,t} ≤ floor((1+ε) N*) 并将目标改为最小化 sum_j u_j，或在目标中加入每启用模式的固定成本（将定价子问题扩展为带固定成本的背包），用同样的列生成与整数化流程得到在允许材料上浮下的最少模式方案；参数 ε 可由工程经验（例如每增加一种模式对应的材料上浮近似值）指定。G. 输出与验证：输出 N*（及允许上浮下的 N）、最终模式列表（每模式 a_{i,j} 与废料 w_j）、模式启用标志 u_j、各期计划 y_{j,t}、总废料、模式数 P 以及 LP 下界与整数上界与整型间隙，并生成可被排产模块消费的标准格式文件（CSV/JSON）。H. 实现细节与性能考量：建议用 Python 实现主流程与 DP 定价模块（NumPy 优化内存），将整数主问题与定价中的 ILP 调用交由 Gurobi/CPLEX（或 OR-Tools）以保证效率，允许对定价并行化（按期并发）和对 DP 做状态压缩以控制内存，设置可配置的时间限制与收敛阈值（例如最大迭代次数、对偶改善阈值和时间上限），并记录日志以便诊断收敛与质量。该子任务的交付物为：可复现的代码库（包含数据读取/预处理、列生成循环、DP/ILP 定价器、整数化流程）、运行脚本与配置文件、标准化输入/输出规范说明，以及对于给定输入能够产生并导出的最小板数基线解与在 ε-上浮约束下的最少模式解及其详细计划表。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化一维下料的模式化整数规划并列生成（列生成+整数化），在交期与产能约束下最小化总用板数并在允许上浮 ε 时最小化启用模式数",
          "expected_output": "数值最优解与计划：N*（最小总用板数）、各期 y_{j,t}、模式列表 a_{i,j} 与废料 w_j、模式启用 u_j、在 ε-约束下的最少模式方案（P 与对应 y_{j,t}）、LP 下界/整数上界/Gap、标准化 CSV/JSON 输出与日志",
          "key_inputs_constraints": "输入：L=3000mm、k=5mm、向量 l_i、需求 n_i、截止期 T_i、期产能 C_t、期数 T。约束：sum_j y_{j,t} ≤ C_t；交付约束 ∑_{τ≤t,j} a_{i,j} y_{j,τ} ≥ 累计需求；模式可行性 ∑_i a_{i,j} l_i + (p_j-1)k ≤ L；y_{j,t} ∈ Z≥0；u_j ∈ {0,1}；y_{j,t} ≤ M u_j。前置：已合并同规格、单位校验通过、计算上界 floor((L+k)/(l_i+k))。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为求解核心模块，位于数据清洗与规范化实例生成之后，向排产/报告模块提供计划与模式集；前序依赖：子任务一实例化；后序：二维问题或排程、可视化与业务报告。",
          "assumptions": "使用Gilmore–Gomory列生成；定价为带切缝的一维整数背包（DP/ILP）；多期并行定价；允许设置时间限与Gap；若无B&P则以列生成+最终MIP整数化获得可行近优。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "最小化总用板数 N* 与 ε-约束下最少模式数 P 的双目标识别",
              "description": "是否明确区分主目标 min ∑ y_{j,t} 与二阶段 ε-约束下的 min ∑ u_j，并说明等价废料最小化的备选目标。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰给出两个目标及先后关系并提到等价废料目标；中分：只描述一个目标或未说明先后；低分：目标表述混乱或与任务不符。"
            },
            {
              "sub_criteria": "多期交期与产能约束的识别（T_i 与 C_t）",
              "description": "是否将交期转化为累计需求约束并识别每期产能上限 sum_j y_{j,t} ≤ C_t 的必要性与作用。",
              "score": 25,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：给出累计形式并说明滚动到期逻辑；中分：有产能或交期其一不完整；低分：忽略交期或产能。"
            },
            {
              "sub_criteria": "模式可行性与切缝 k 的作用",
              "description": "是否识别模式约束 ∑ a_{i,j} l_i + (p_j-1)k ≤ L 及 p_j 的定义与含义。",
              "score": 25,
              "evaluation_focus": "数理约束",
              "scoring_hint": "高分：准确写出含切缝形式并解释 p_j；中分：给出不含切缝或表达不严谨；低分：未体现切缝。"
            },
            {
              "sub_criteria": "列生成框架必要性",
              "description": "是否识别到模式空间巨大需采用Gilmore–Gomory列生成与定价背包以扩展列。",
              "score": 20,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：指出列生成与定价背包；中分：仅提到启发式生成列；低分：直接全枚举或忽略列生成。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "LP主问题与对偶价格 π_i,t 的复述",
              "description": "是否能用本任务术语复述主问题LP与对偶解释，以及定价触发条件（reduced cost）。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：写出reduced cost ≤ 0/≥1判断并联系 π_i,t；中分：模糊描述价格；低分：未提及对偶或错误。"
            },
            {
              "sub_criteria": "交付为累计需求的期约束表述",
              "description": "是否准确重述 ∑_{τ≤t,j} a_{i,j} y_{j,τ} ≥ demand_{i,t} 的累计形式而非单期独立误表述。",
              "score": 25,
              "evaluation_focus": "约束表达",
              "scoring_hint": "高分：明确累计与截止期映射；中分：写成当期等式；低分：缺失或错误。"
            },
            {
              "sub_criteria": "ε-约束或固定成本目标的二阶段化",
              "description": "是否复述通过 sum y ≤ ⌊(1+ε)N*⌋ 或加固定成本实现模式数压缩的机制。",
              "score": 25,
              "evaluation_focus": "优化设计",
              "scoring_hint": "高分：两种做法皆提及并权衡；中分：仅一种方案；低分：未描述。"
            },
            {
              "sub_criteria": "启发式初始列与整数化策略",
              "description": "是否复述LFD/贪心初始列与最终MIP整数化或B&P的角色与停止准则。",
              "score": 20,
              "evaluation_focus": "算法策略",
              "scoring_hint": "高分：同时提到初始列、整数化与时间/Gap阈值；中分：仅初始列或仅整数化；低分：未说明。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "切缝 k 恒定与模式长度计算假设",
              "description": "是否明确假设每次切割损耗固定为 k=5mm，模式用长为 ∑ a_{i,j} l_i + (p_j-1)k。",
              "score": 30,
              "evaluation_focus": "假设严谨",
              "scoring_hint": "高分：量化且用于上界与定价；中分：口头提及未用；低分：忽略或变量化错误。"
            },
            {
              "sub_criteria": "不可跨板拼接与零件不可旋转（一维）",
              "description": "是否声明零件不得跨板、不可旋转，确保背包与模式约束成立。",
              "score": 25,
              "evaluation_focus": "可行性前提",
              "scoring_hint": "高分：清楚陈述并在代码中体现；中分：仅文档；低分：未声明导致约束缺失。"
            },
            {
              "sub_criteria": "交期建模为累计需求阈值",
              "description": "是否假设交期转化为分期累计需求且晚于截止期的生产仍可用于更晚期（不可回溯）。",
              "score": 25,
              "evaluation_focus": "业务转译",
              "scoring_hint": "高分：给出累计阈值构造；中分：以惩罚项替代；低分：无交期假设。"
            },
            {
              "sub_criteria": "大M选择与上界来源",
              "description": "是否给出 M 取值依据（如总板数上界或需求上界）并讨论数值稳定性。",
              "score": 20,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：提供具体上界公式与敏感性；中分：给出常数；低分：未说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "主问题（master）变量 y_{j,t}, u_j 与目标 min ∑ y_{j,t}",
              "description": "是否正确定义变量域、链接约束 y_{j,t} ≤ M u_j 与主目标，给出完整约束集合。",
              "score": 35,
              "evaluation_focus": "建模严谨",
              "scoring_hint": "高分：变量、域、目标、所有约束齐全；中分：缺少链接或部分约束；低分：结构错误。"
            },
            {
              "sub_criteria": "模式定义 a_{i,j} 与可行性",
              "description": "是否给出模式可行性不等式及 p_j=∑ a_{i,j} 并确保 p_j>0。",
              "score": 25,
              "evaluation_focus": "可行性建模",
              "scoring_hint": "高分：包含p_j与空模式排除；中分：无p_j；低分：无可行性约束。"
            },
            {
              "sub_criteria": "二阶段 ε-约束或固定成本模型",
              "description": "是否构建 sum_{t,j} y_{j,t} ≤ ⌊(1+ε)N*⌋ 与 min ∑ u_j 或等价固定成本目标。",
              "score": 20,
              "evaluation_focus": "多目标转化",
              "scoring_hint": "高分：完整给出并说明参数化；中分：只口述；低分：未实现。"
            },
            {
              "sub_criteria": "初始列与启发式生成策略",
              "description": "是否给出LFD/FFD等策略与多样化生成，保障LP启动可行。",
              "score": 20,
              "evaluation_focus": "启发式设计",
              "scoring_hint": "高分：实现至少两类启发式；中分：单一启发式；低分：无初始列。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "定价子问题（带切缝的一维整数背包）实现",
              "description": "是否将剩余长度状态纳入DP或ILP，目标使用对偶价格 π_i,t 最大化并正确含 (a-1)k。",
              "score": 35,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：DP/ILP正确含切缝且返回reduced cost最优列；中分：忽略切缝或近似；低分：错误或缺失。"
            },
            {
              "sub_criteria": "列生成循环与收敛判据",
              "description": "是否实现LP求解—取对偶—定价—加列—重复，直至无正 reduced cost 列或达阈值。",
              "score": 25,
              "evaluation_focus": "数值优化",
              "scoring_hint": "高分：含改善阈值、最大迭代、时间限；中分：循环简化；低分：未闭环。"
            },
            {
              "sub_criteria": "整数化与上界质量（MIP或B&P）",
              "description": "是否在列稳定后对当前列集合求整数解，报告整数上界、LP下界与Gap。",
              "score": 25,
              "evaluation_focus": "MIP技巧",
              "scoring_hint": "高分：给出可复现整数求解与Gap≤规定；中分：仅可行解无Gap；低分：未整数化。"
            },
            {
              "sub_criteria": "多期并行定价与性能优化",
              "description": "是否说明按期并行定价、状态压缩、缓存与时间限设置。",
              "score": 15,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：实现并行或等价批量化；中分：仅提出但未做；低分：无考虑。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "输入与预处理（l_i, n_i, T_i, C_t；上界 floor((L+k)/(l_i+k))）",
              "description": "是否用Python/pandas正确读入、合并规格、计算单板上界并生成累计需求。",
              "score": 25,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：有校验/日志与上界；中分：基本读入无校验；低分：读入错误或缺失。"
            },
            {
              "sub_criteria": "LP/MIP与定价器模块化接口",
              "description": "是否封装master、pricing、列池、求解器适配（Gurobi/CPLEX/OR-Tools）与可配置参数。",
              "score": 25,
              "evaluation_focus": "架构设计",
              "scoring_hint": "高分：清晰API与可插拔求解器；中分：耦合但可运行；低分：散乱难以复用。"
            },
            {
              "sub_criteria": "日志与可复现性（随机种/时间限/阈值）",
              "description": "是否记录列生成迭代、对偶值、reduced cost、Gap与配置，保证复现。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：结构化日志与固定随机种；中分：零散打印；低分：无日志。"
            },
            {
              "sub_criteria": "标准化输出（CSV/JSON：a_{i,j}, y_{j,t}, u_j, w_j, N*, P）",
              "description": "是否导出规范字段名与类型，并通过校验脚本检查一致性。",
              "score": 25,
              "evaluation_focus": "I/O规范",
              "scoring_hint": "高分：有schema与校验通过；中分：导出不完整；低分：未导出或格式混乱。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "N*、总废料与LP下界/整数上界/Gap报告",
              "description": "是否提供关键指标并解读差距来源（列不足或整数化）。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：指标齐全且解释到位；中分：部分指标；低分：缺失或误读。"
            },
            {
              "sub_criteria": "交期与产能可行性验证（累计需求）",
              "description": "是否逐期验证 ∑ a y 覆盖到期需求且不超 C_t，并提供违约告警。",
              "score": 25,
              "evaluation_focus": "可行性检查",
              "scoring_hint": "高分：自动校验与报告；中分：人工说明；低分：未验证。"
            },
            {
              "sub_criteria": "ε-约束下模式数 P 与材料上浮权衡",
              "description": "是否展示不同 ε 的 P 与 N 变化曲线或表，并解读折衷。",
              "score": 25,
              "evaluation_focus": "敏感性分析",
              "scoring_hint": "高分：至少3个ε点对比；中分：单一ε；低分：无分析。"
            },
            {
              "sub_criteria": "模式质量与废料分布（w_j）分析",
              "description": "是否统计模式废料分布、头部模式覆盖率与尾部低效模式识别。",
              "score": 15,
              "evaluation_focus": "运营洞察",
              "scoring_hint": "高分：给出覆盖率/分位数；中分：定性描述；低分：无。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（二维下料的分解建模与求解）—— 目标：针对给定原材料尺寸（3000 mm × 100 mm）、零件规格表（每种零件的长度 l_i、宽度 w_i、需求 n_i 及交期优先级）、日产能限制与期数约束，构建并实现一个可复现的求解模块，通过“宽度层化（带/通道）分解 + 板模式组合”的列生成/启发式框架，生成满足交期与产能约束的板级下料模式集并给出每日生产计划，同时输出每种板模式的构成（每个并列带上各零件的数量）、板废料量与每模式的使用次数；输入、假设与参数：必须输入零件表（l_i,w_i,n_i,T_i），板尺寸 L=3000、W=100，切缝损耗设置（本题为忽略或可作参数），是否允许零件旋转（作为开关参数），每日产能 C_t 及总期数 T；方法与步骤（精确可执行）：1) 数据预处理：归并相同规格、汇总宽度类别并统计频次，验证所有 w_i < W 且 l_i < L；2) 宽度组合枚举：枚举或生成所有“可行带组合”S（每个组合为若干并列条带，其条带宽度来自零件宽度离散集合且总宽度 ≤ W），枚举策略优先包含能填满或接近 W 的组合并限制组合数量以控制复杂度；3) 带级模式生成：对每个带类别（固定带宽 b），把该带视作一维问题（长度方向为 L）并用一维整型背包/列生成或动态规划（DP）生成该带的若干高效放置模式（每模式给出在此带可放置的各零件数量向量及带内废料），允许对高优先件在带级优先生成模式；4) 板模式构造：对每个枚举的带组合 S，通过组合其各带上的候选一维模式构造完整板模式 p（计算每种零件在该板上的总放置量与板废料），对组合爆炸情形使用贪心合成或启发式（例如先为高优件分配带，再填充低优件）；5) 主问题与列生成：以板模式为列建立主线性/整数主问题（决策变量为每板模式在每期的使用次数 y_{p,t}），约束包含对各零件的累积交付需求、每期板数产能约束和交期（截止期）约束；对主 LP 使用列生成：从主 LP 对偶价格出发，根据各带的对偶价格求解带级定价子问题（即带上背包最大化带级收益）并通过带组合快速合成或启发式生成能改善目标的整张板列加入主问题；6) 定价与启发式并用：当精确带组合定价不可行或过慢时，采用并行启发式2D排样器（level packing、guillotine、maximal-rectangles 或遗传/模拟退火）生成高质量候选板模式并提交主问题；7) 整数化与输出：在候选列稳定后对当前列集求解整数主问题（用商用 MIP 求解器如 Gurobi/CPLEX 或开源 OR-Tools CP-SAT），得到最终每期板模式使用计划 y_{p,t}，并导出结果文件（板模式列表、每模式的零件明细与废料、每日生产计划、总板数与模式数）；实现细节与工具建议：用 Python（pandas）实现数据预处理与枚举逻辑，带级一维DP与列生成循环可用高效 C/Python 实现，主问题与整数化调用 Gurobi/CPLEX/OR-Tools，定价并行化（按带或按带组合并行）以加速，必要时限制带组合深度或采用启发式合成以控制计算规模；可配置参数包括允不允许旋转、带组合填充阈值、每带候选模式数量上限、列生成收敛阈值与求解时间上限；交付物：可直接运行的模块（代码与配置）、标准化输入输出格式、板模式清单与每日排产表、以及用于复核的板级可视化排样示例。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化二维下料（3000×100）生产计划，基于宽度层化分解与板模式列生成，最小化总用板数/废料并满足交期与日产能约束",
          "expected_output": "板模式最优/近优解与每日计划：模式列表（带组合、带内一维模式、每种零件数量、板废料）、各期模式使用次数 y_{p,t}、总板数与模式数、校验与日志、可视化排样示例、标准化CSV/JSON结果文件",
          "key_inputs_constraints": "输入：零件表(l_i:int, w_i:int, n_i:int, T_i:int)、板尺寸L=3000,W=100、切缝参数k（本题忽略，可配置）、旋转开关allow_rotate:bool、日产能C_t与期数T。约束：∀i l_i<L, w_i≤W；交期累积交付；每期产能∑_p y_{p,t}≤C_t；带组合总宽度≤W；带内一维装载满足长度与切缝（若启用）；整数非负决策变量。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为数据清洗与一维模块之后的核心优化子系统，输入来自子任务1（规范化实例与校验）与子任务2（一维DP/定价器可复用），输出供后续排产与可视化；前序：数据预处理、截止期映射；后序：生产排程与报告发布",
          "assumptions": "默认不允许跨板拼接；零件可否旋转由开关控制（默认允许当且仅当旋转后仍满足宽度≤W与长度≤L）；本题锯缝损耗忽略但保留参数位；宽度带为并列长条，带内视为一维切割；每日产能以板数计数。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别优化目标（最小总用板数/废料）与交期、日产能约束",
              "description": "明确本任务为二维下料优化，目标最小化总用板数或板废料，并同时满足各零件的T_i截止期累积需求与每期产能C_t约束。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：同时陈述两个目标与两类约束并解释累积交付形式；中分：只提一个目标或缺少累积交付；低分：未提交期或产能约束。"
            },
            {
              "sub_criteria": "识别方法框架（宽度层化+板模式列生成）",
              "description": "指出需进行宽度带分解、带内一维模式生成、板模式组合，并通过列生成/定价迭代添加列。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：准确说出带级与板级及定价关系；中分：仅说列生成未区分带/板；低分：完全未涉及该框架。"
            },
            {
              "sub_criteria": "识别输入关键参数与可配置项（L,W,k,allow_rotate,C_t,T）",
              "description": "列出并解释L=3000,W=100,k、旋转开关、C_t与T在模型中的作用与约束位置。",
              "score": 20,
              "evaluation_focus": "需求解析",
              "scoring_hint": "高分：参数全且位置清晰；中分：缺1–2项或作用不清；低分：参数模糊或遗漏多数。"
            },
            {
              "sub_criteria": "识别可行性前提与数据校验（l_i<L,w_i≤W）",
              "description": "强调需在建模前验证所有尺寸与非负性、交期集合与数据一致性。",
              "score": 15,
              "evaluation_focus": "约束意识",
              "scoring_hint": "高分：给出具体校验条件；中分：泛谈校验；低分：未提校验。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "精确复述二维到带级一维的分解逻辑",
              "description": "将二维板（W=100）复述为并列带组合S，每带按一维切割（L=3000）进行模式生成。",
              "score": 30,
              "evaluation_focus": "表达严谨",
              "scoring_hint": "高分：包含带组合宽度≤W与带内长度装载；中分：缺其一；低分：未体现分解。"
            },
            {
              "sub_criteria": "交期T_i转化为累积交付约束的表述",
              "description": "说明对每零件i与每期t≤T_i需满足∑_{τ≤t,p} a_{i,p} y_{p,τ}≥需求累积。",
              "score": 30,
              "evaluation_focus": "约束转写",
              "scoring_hint": "高分：明确累积不等式与索引；中分：仅口头描述；低分：误写为逐期独立或忽略。"
            },
            {
              "sub_criteria": "日产能C_t的板数约束表述",
              "description": "清晰陈述每期板模式使用次数和约束∑_p y_{p,t}≤C_t。",
              "score": 20,
              "evaluation_focus": "形式化",
              "scoring_hint": "高分：公式准确；中分：只有文字；低分：遗漏或误解为件数产能。"
            },
            {
              "sub_criteria": "目标函数（最小板数/废料）与模式废料计算",
              "description": "给出板废料=未使用宽度/长度累积，或直接以板数为目标并说明两者关系。",
              "score": 20,
              "evaluation_focus": "目标清晰",
              "scoring_hint": "高分：定义模式废料并联系目标；中分：只提最小板数；低分：目标含糊。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "旋转假设（allow_rotate）与可行性影响",
              "description": "说明是否允许旋转以及旋转后判定条件（l↔w仍需≤L,≤W）及对带分类的影响。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：给出判定与数据映射；中分：只提是否允许；低分：未涉及。"
            },
            {
              "sub_criteria": "锯缝k处理（忽略或参数化）",
              "description": "本题忽略k但需保留参数接口，带内长度约束写法需一致（含或不含k）。",
              "score": 25,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：两种写法与切换说明；中分：仅说明忽略；低分：与代码不一致。"
            },
            {
              "sub_criteria": "拼接与跨板禁止",
              "description": "明确不允许零件跨板或边料拼接，板模式必须由完整件组成。",
              "score": 25,
              "evaluation_focus": "可行域定义",
              "scoring_hint": "高分：明确禁止并在模式生成中体现；中分：仅文字；低分：允许隐含拼接。"
            },
            {
              "sub_criteria": "带组合生成的限制与启发式阈值",
              "description": "设定填充阈值（如≥95%W）、最大带数与组合数量上限，控制搜索规模。",
              "score": 25,
              "evaluation_focus": "规模控制",
              "scoring_hint": "高分：给出具体阈值和上限；中分：泛述控制；低分：未设限制导致爆炸。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "带内一维模式的数学描述与上界",
              "description": "定义带宽b下的a_{i}（w_i=b）与长度约束∑ a_i l_i ≤ L（或含k），并给出单件上界与候选数上限。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：完整变量、约束、上界；中分：缺上界或k处理；低分：未形式化。"
            },
            {
              "sub_criteria": "板模式p的组合定义与明细映射",
              "description": "由带组合S与各带一维模式合成p，计算每种零件在p上的数量与板废料。",
              "score": 25,
              "evaluation_focus": "结构设计",
              "scoring_hint": "高分：清晰映射并含废料计算；中分：只有概念；低分：未定义。"
            },
            {
              "sub_criteria": "主问题（y_{p,t}）与约束完整性",
              "description": "决策变量整数非负；包含累积交付、产能、（可选）模式启用u_p的链接；目标为最小化∑ y或∑废料。",
              "score": 25,
              "evaluation_focus": "模型完备",
              "scoring_hint": "高分：变量域与所有约束齐全；中分：缺链接或u_p；低分：遗漏关键约束。"
            },
            {
              "sub_criteria": "列生成接口与对偶价格使用",
              "description": "阐明从主LP获取对偶，带级定价为一维背包最大化带级收益并合成板列。",
              "score": 20,
              "evaluation_focus": "算法接口",
              "scoring_hint": "高分：对偶到带收益映射明确；中分：仅提定价；低分：无机制说明。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "带级定价子问题实现（DP/ILP）",
              "description": "对每带宽b求解一维整数背包（L=3000）获得正 reduced cost 模式，含时间/内存控制。",
              "score": 30,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：给DP/ILP二选一并含复杂度控制；中分：只提方法；低分：无可执行方案。"
            },
            {
              "sub_criteria": "带组合到板列的快速合成/启发式",
              "description": "描述如何将高价带模式合成板模式（贪心、限定组合数、优先高优先级件）。",
              "score": 25,
              "evaluation_focus": "启发式",
              "scoring_hint": "高分：含优先级与上限；中分：仅贪心；低分：未说明。"
            },
            {
              "sub_criteria": "收敛与停止准则设置",
              "description": "列生成停止：无正价列、迭代/时间上限、对偶改善阈值；随后整数化求解。",
              "score": 20,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：多条件并存；中分：单一条件；低分：未设。"
            },
            {
              "sub_criteria": "整数化与交期可行性保障",
              "description": "在列集稳定后用MIP求解y_{p,t}整数计划，保证各T_i前需求满足。",
              "score": 25,
              "evaluation_focus": "可行性",
              "scoring_hint": "高分：说明求解器与可行性回退策略；中分：仅说MIP；低分：未保证交期。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据预处理与输入输出规范（CSV/JSON字段）",
              "description": "实现读取(l_i,w_i,n_i,T_i)、参数(L,W,k,allow_rotate,C_t,T)，导出模式与计划文件，字段名与类型一致。",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含校验与类型检查；中分：读写但无校验；低分：格式不一致。"
            },
            {
              "sub_criteria": "并行与规模控制参数",
              "description": "实现带/期并行、组合数量与候选模式上限、时间上限可配置。",
              "score": 25,
              "evaluation_focus": "工程能力",
              "scoring_hint": "高分：参数化且可切换；中分：部分可配；低分：硬编码。"
            },
            {
              "sub_criteria": "定价DP/ILP与主问题求解器集成",
              "description": "无缝调用Gurobi/CPLEX/OR-Tools与自研DP，包含异常处理与回退。",
              "score": 25,
              "evaluation_focus": "系统集成",
              "scoring_hint": "高分：提供回退路径与错误日志；中分：仅单求解器；低分：耦合混乱。"
            },
            {
              "sub_criteria": "日志与可复现性（随机种子、版本记录）",
              "description": "记录列生成迭代、对偶值、新增列、时间；设置随机种子与配置快照。",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：可复跑得到一致结果；中分：部分日志；低分：无日志。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性与交期满足度报告",
              "description": "逐期验证∑交付≥需求累积，列出任何未满足项与修复策略。",
              "score": 30,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：逐期表与零件级核对；中分：总体口径；低分：未验证。"
            },
            {
              "sub_criteria": "效率指标：总板数、总废料、模式数",
              "description": "报告N、废料长度/率、启用模式P，并与基线或一维下界比较。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：含下界或基准对比；中分：仅绝对值；低分：缺关键指标。"
            },
            {
              "sub_criteria": "敏感性与参数影响（allow_rotate、带填充阈值）",
              "description": "分析旋转开关与带组合阈值对N与P的影响，给出变化趋势。",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：至少两组参数对比；中分：定性描述；低分：无分析。"
            },
            {
              "sub_criteria": "板级示例与可视化一致性",
              "description": "提供至少1个板模式的可视化，核对带宽总和与带内长度装载正确。",
              "score": 20,
              "evaluation_focus": "可视呈现",
              "scoring_hint": "高分：图示与数值一致；中分：仅表格；低分：无示例或有矛盾。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务四（实施流程、整数化、模式数压缩、鲁棒性与工程交付）应作为一个端到端、可复现的工程模块开发任务，其范围包括从经过清洗的实例输入（已规范化的零件规格与需求向量、每期产能向量 C_t、原材料尺寸与切缝参数、每种件的最晚交付期标识）到可直接用于生产的下料计划与诊断报告的完整交付。其主要目标是（1）在给定时间与算力限制下利用列生成与混合启发式方法得到满足交期和产能约束的可行整数下料计划；（2）在保证材料利用率接近最优的前提下，通过受控策略压缩启用的下料模式数；（3）提供一套可操作的输出文件、完整求解日志和验证/敏感性分析结果以便车间实施和后续滚动重规划。为达成上述目标，应按以下精确步骤实施：首先读取并验证输入文件（CSV/JSON），并生成初始候选模式集合（多种贪心启发式，例如 Largest-Fit-Decreasing、次序填充、按优先级单独生成高优先件专用模式）；其次实现 column-generation 主循环：用 LP 形式的 master problem（以当前候选列为变量）求解对偶价并并行启动定价子问题（定价器优先采用精确一维动态规划/整数背包求解器，必要时回退到高质量启发式或小规模 ILP）；定价并行化按期（各天）和按带/板组合维度分配，以加速收敛；当无有效新列或达到给定改进阈值时停止列生成。第三步为整数化：在候选列稳定后对当前列集求解整数主问题（使用商用 MIP，如 Gurobi/CPLEX，或 OR-Tools CP-SAT），并记录上下界与整型间隙；若需严格全局最优，则在可用时启用 Branch-and-Price，否则采用时间与间隙限制造成可验证的近优解。第四步为模式数压缩：采用 ε-约束（在总板数 ≤ floor((1+ε)N*) 下最小化启用模式数）、或将模式启用引入固定成本并重新运行带固定成本的列生成/定价；实现具体策略包括核心模式保留（保留 LP 解中正权重模式）、模式聚类与合并、以及对高频模式赋予优先选择权，参数化 ε 与固定成本以便生成多解供决策。第五步为鲁棒性与滚动重规划：实现每日/周期滚动重优化接口（读取已完成生产量、更新剩余需求并重运行列生成或仅整数化阶段），并提供基本稳健性检查（对需求 ±x% 与产能波动的快速再解），同时实现一个仿真验证器：按计算得到的模式逐板重构切割并校验每期产量、废料合计与交期约束。第六步为工程交付与可用性：输出标准化交付物（1. 每种启用模式的构成向量 a_{i,j}、每模式废料 w_j；2. 每期每模式使用次数 y_{j,t}；3. 总板数、总废料、启用模式数、LP 下界与整数上界与求解间隙；4. 可视化的板级或带级排样示例；5. 完整求解日志与随机种子以保证可重现；所有输出以 CSV/JSON 格式并附带人类可读的摘要报告和校验断言），并记录关键运行参数（时间上限、并行线程数、DP 状态压缩设置、MIP gap 与内存上限）。在实现细节上明确推荐工具链：Python（pandas、NumPy）用于数据处理和控制流，DP 与启发式定价器可用 Cython 或高效纯 Python 实现以保证 L=3000 状态下的可接受性能，整数主问题与可选定价 ILP 调用 Gurobi/CPLEX 或 OR-Tools，利用多核并行加速定价与带组合生成；同时实现配置化的停止准则（如最大总运行时间默认 2–4 小时、可接受整型 gap 默认 1%、无改善列阈值与最大列数阈值）和详尽日志（列生成迭代数、新列收益、LP 对偶值、定价时间分布、整数化时间与 gap）。最后，内置若干验证与敏感性例程：自动执行按需的可行性断言（交期满足、各期产能未超载、所有需求满足或给出不可行性证据）、并在配置允许下对 kerf、产能与关键需求做一组参数敏感性试验并输出结果表，为现场决策提供明确的权衡依据；所有功能封装成一组脚本与配置文件，确保该子任务能独立运行并生成可直接提交给生产调度与切割操作员的下料计划与实施说明。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在时间与算力限制下优化并整数化列生成主问题，生成满足交期与产能约束的一维/二维下料可行整数计划，并在允许ε上浮下最小化启用下料模式数。",
          "expected_output": "标准化CSV/JSON：模式列表(a_{i,j}, w_j)、各期模式使用计划y_{j,t}、总板数N、总废料、启用模式数P、LP下界/整数上界与gap、求解日志与随机种子、可视化样例与校验断言；滚动重规划接口与敏感性试验结果表。",
          "key_inputs_constraints": "输入：已清洗实例文件（l_i,w_i,n_i,T_i）、板尺寸(L=3000, W=100或无W的一维)、切缝k（1D为5mm、2D可忽略/参数化）、产能向量C_t与期数T；约束：交期累计约束、每期产能sum_j y_{j,t}≤C_t、模式容量sum_i a_{i,j} l_i+(p_j-1)k≤L（2D含宽度/带组合≤W）、y_{j,t}∈Z≥0、u_j∈{0,1}、模式数压缩ε-约束。",
          "modeling_type": "优化+仿真+评价",
          "role_in_pipeline": "作为端到端求解与交付环节，依赖前序子任务一的数据规范化与子任务2/3的模式化建模与定价器实现；向后输出生产排产文件与现场可执行说明，支持滚动重规划与敏感性分析。",
          "assumptions": "默认允许仅平行切割；二维可配置是否允许旋转；若分支定价不可用则以固定列集合整数化并设置1% MIP gap；最大运行时限2–4小时，可并行按期与带。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "交期与产能约束的优化目标识别",
              "description": "明确该任务优化并整数化列生成的核心：满足交期T_i与每期产能C_t，最小化总板数/总废料并进行模式数压缩（ε-约束或固定成本）。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：同时陈述N最小化与模式数压缩并含ε或固定成本；中分：只提到N或废料；低分：未提交期或产能。"
            },
            {
              "sub_criteria": "一维/二维下料差异与切缝参数k识别",
              "description": "区分1D(k=5mm)与2D(锯缝忽略或参数化)在容量约束中的作用，并说明宽度W与带组合角色。",
              "score": 25,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：写出1D容量sum a_i l_i+(p-1)k≤L与2D宽度≤W；中分：只提长度容量；低分：忽略k或W。"
            },
            {
              "sub_criteria": "列生成与整数化（branch-and-price/CP-SAT）边界",
              "description": "识别LP主问题、定价子问题、整数化策略与时间/间隙限制的权衡与停机准则。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出LP对偶驱动定价与MIP gap/时间阈值；中分：泛述‘求最优’；低分：无停机与求解策略。"
            },
            {
              "sub_criteria": "滚动重规划与鲁棒性需求",
              "description": "识别需要每日读取已产量、更新n_i并快速再解；对产能与需求±x%做稳健性检查。",
              "score": 20,
              "evaluation_focus": "应用意识",
              "scoring_hint": "高分：说明接口与再解范围；中分：仅口头提‘重规划’；低分：未提鲁棒性。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "核心目标复述：最小N与最少模式P(ε-约束)",
              "description": "清晰复述双目标顺序：先最小化总板数N/废料，再在≤floor((1+ε)N*)下最小化模式数P。",
              "score": 30,
              "evaluation_focus": "表达准确",
              "scoring_hint": "高分：包含N*、ε与P；中分：缺ε或P；低分：目标混乱。"
            },
            {
              "sub_criteria": "约束复述：交期累计与每期产能C_t",
              "description": "以累计形式表达交付：至t期sum_{τ≤t,j} a_{i,j} y_{j,τ}≥需求(t)且sum_j y_{j,t}≤C_t。",
              "score": 30,
              "evaluation_focus": "约束表达",
              "scoring_hint": "高分：写出累计形式；中分：仅期末总需求；低分：未提C_t或累计交付。"
            },
            {
              "sub_criteria": "模式定义与容量约束（含k与W）",
              "description": "准确复述模式a_{i,j}、p_j与容量：1D含(k)，2D含W与带组合的构造。",
              "score": 25,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：给出sum a l+(p-1)k≤L与宽度≤W；中分：缺p_j-1项；低分：错误或缺失。"
            },
            {
              "sub_criteria": "停止准则与日志/可复现性",
              "description": "复述无改进列阈值、最大列数、时间限与随机种子记录。",
              "score": 15,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：列出≥2个阈值与种子；中分：只时间限；低分：无说明。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "切缝与旋转假设（k=5mm；2D可忽略/参数化；旋转开关）",
              "description": "明确一维固定锯缝5mm，二维默认忽略但可参数化；是否允许零件旋转为配置项。",
              "score": 30,
              "evaluation_focus": "假设管理",
              "scoring_hint": "高分：同时给出可配置项；中分：仅固定说明；低分：未提或自相矛盾。"
            },
            {
              "sub_criteria": "模式可重复使用与u_j固定成本假设",
              "description": "假设模式可重复使用；启用成本用于压缩模式数，与大M链接y_{j,t}≤Mu_j。",
              "score": 25,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：说明M的合理上界来源；中分：仅提u_j；低分：未说明链接。"
            },
            {
              "sub_criteria": "滚动重规划与数据更新假设",
              "description": "假设每日读取实际产量并扣减需求；若不允许延迟则强制累计约束严格满足。",
              "score": 20,
              "evaluation_focus": "应用假设",
              "scoring_hint": "高分：描述延迟处理策略；中分：仅说‘更新’；低分：未提。"
            },
            {
              "sub_criteria": "停止准则与近优容忍",
              "description": "假设最大运行2–4小时、MIP gap≤1%或无改善列停止；输出记录gap与时间。",
              "score": 25,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：含时间与gap双阈值；中分：仅其一；低分：无阈值。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "LP主问题与变量(y_{j,t}, u_j)构造",
              "description": "正确定义主问题变量、目标（最小N或废料）、交付与产能、链接约束以及模式容量。",
              "score": 35,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：完整四类约束；中分：缺链接或容量细节；低分：目标或变量错误。"
            },
            {
              "sub_criteria": "定价子问题（一维背包含(k)）与对偶价格使用",
              "description": "给出max∑π_i a_i s.t.∑a_i l_i+(∑a_i-1)k≤L；阐明≤1阈值收敛判据。",
              "score": 25,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：写出判停条件；中分：仅背包式；低分：未与对偶关联。"
            },
            {
              "sub_criteria": "二维带/板模式组合在主模型中的嵌入",
              "description": "说明带级一维模式到板模式映射，确保总宽度≤W且合并成板级a_{i,p}。",
              "score": 20,
              "evaluation_focus": "结构设计",
              "scoring_hint": "高分：清楚带到板映射与宽度检验；中分：泛述‘组合’；低分：无2D细节。"
            },
            {
              "sub_criteria": "模式数压缩建模（ε-约束或固定成本）",
              "description": "构造二阶段：sum y≤floor((1+ε)N*)下最小化∑u_j，或在目标加入模式固定成本。",
              "score": 20,
              "evaluation_focus": "多目标",
              "scoring_hint": "高分：两种方法都给出且可切换；中分：仅其一；低分：未给出。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "列生成循环与停止准则实现",
              "description": "迭代求解LP、读取对偶、并行定价、加列、记录新列收益，基于无改善或上限停止。",
              "score": 30,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：列出改善阈值/最大列数；中分：无量化阈值；低分：未描述循环。"
            },
            {
              "sub_criteria": "定价求解器选择（DP/ILP/启发式回退）与并行",
              "description": "优先DP；超时回退ILP或启发式；按期与带并行，统计定价时间分布。",
              "score": 25,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：含超时与并行策略；中分：只说DP；低分：无回退与并行。"
            },
            {
              "sub_criteria": "整数化与gap控制（CP-SAT/Gurobi/CPLEX）",
              "description": "在当前列集上求MIP，设定gap≤1%或时间限并报告上下界与最终gap。",
              "score": 25,
              "evaluation_focus": "求解控制",
              "scoring_hint": "高分：报告上下界与gap；中分：仅可行解；低分：无任何界信息。"
            },
            {
              "sub_criteria": "模式数压缩执行与核心模式保留",
              "description": "保留LP正权重列、聚类/合并低频模式，在ε-约束下重求整数解并比较P。",
              "score": 20,
              "evaluation_focus": "优化技巧",
              "scoring_hint": "高分：提供压缩前后P与N比较；中分：仅描述方法；低分：未执行。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "输入/输出规范与可复现性（CSV/JSON、随机种子、日志）",
              "description": "严格实现字段名/类型校验、缺失值规则、写出求解日志与种子，产出标准文件。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：I/O校验与版本化输出；中分：仅写文件；低分：无规范。"
            },
            {
              "sub_criteria": "并行与配置化（线程数、时间限、最大列数、阈值）",
              "description": "提供可配置参数与命令行/配置文件接口，支持多核并行定价与带组合。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：参数可持久化与生效；中分：硬编码；低分：无配置。"
            },
            {
              "sub_criteria": "定价DP/启发式效率（状态压缩、剪枝）",
              "description": "实现长度L=3000可承受的DP，含状态压缩与剪枝；启发式如LFD作初始列。",
              "score": 25,
              "evaluation_focus": "性能优化",
              "scoring_hint": "高分：展示耗时/迭代数；中分：可运行但慢；低分：超时或错误。"
            },
            {
              "sub_criteria": "错误处理与断言（交期、产能、容量校验）",
              "description": "实现自动断言与清晰报错：违反交期/产能/容量时给出证据或诊断。",
              "score": 20,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：细粒度错误与可定位；中分：泛化报错；低分：静默失败。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性校验与仿真重构",
              "description": "逐板重构切割，核对每期产量、废料合计、交期累计与产能不超载。",
              "score": 30,
              "evaluation_focus": "验证能力",
              "scoring_hint": "高分：提供自动校验报告；中分：抽样核对；低分：未验证。"
            },
            {
              "sub_criteria": "性能与收敛报告（LP下界、整数上界、gap、列生成统计）",
              "description": "报告LP对偶值、列数、新列收益、定价时间分布、整数化时间与最终gap。",
              "score": 25,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：含关键指标与图表/表格；中分：部分指标；低分：欠缺数据。"
            },
            {
              "sub_criteria": "模式数压缩效果与权衡（N、P、废料变化）",
              "description": "比较压缩前后N、P、总废料，给出ε敏感性或固定成本权衡曲线。",
              "score": 25,
              "evaluation_focus": "权衡分析",
              "scoring_hint": "高分：量化差异与曲线；中分：定性描述；低分：无比较。"
            },
            {
              "sub_criteria": "鲁棒性与敏感性（k、C_t、需求±x%）",
              "description": "列出参数扰动下的N、P、废料与可行性变化，给出建议阈值。",
              "score": 20,
              "evaluation_focus": "敏感性分析",
              "scoring_hint": "高分：≥2种参数试验；中分：单一试验；低分：无试验。"
            }
          ]
        }
      }
    }
  }
}