{
  "task_id": "2010_D",
  "problem": "为使研究生集中精力解决主要的几个问题，（在解决复杂工程问题的初始阶段也应该如此）\n\n不考虑各组步进电机、变速器，功放伺服机构和精密丝杠--螺母副的各种误差；\n认为控制脉冲宽度的时间尺度不大于ms级($10^-3$秒）；\n三工作台的可移动范围足够大，能保证被加工工件的加工；\n工件在预加工后留给磨削的加工余量可确保一次磨削成形，砂轮尺寸可任意选择；\n砂轮与工件开始接触磨削前，工作台应有一小段预运动，以便与后续的磨加工运动平稳衔接，称这一小段运动为预动。题目要求的加工方案从预动后开始；\n\n本题的研究内容是：运用数学建模的方法，根据旋转体工件的光滑母线方程 $y=f(x)$ ，给出一个合理的加工方案，在尽可能短的时间内完成磨削，并作加工误差分析。\n\n加工方案指为了完成加工任务的各个步骤（含具体内容）以及相应的数据，包括如何确定加工基准，如何选择加工次序，如何选择砂轮几何尺寸，如何确定三组控制步进电机在各时间段（自主进行时间分段）中各自应发的脉冲数和这些脉冲在该时段的分布等，以及你们认为应给出的其他内容。\n\n误差方析主要包括实际加工曲线与理论曲线在整体与局部的误差，误差的来源分析，你们采用什么数学量来表示上述误差，你们采取的措施在减少加工误差方面的实际效果等，以及你们认为应给出的其他内容。\n\n加工方案的合理性主要指加工几何误差和加工表面光滑性要求。实践表明相邻两时间段的脉冲频率 $f_q$ 和 $f_h$ ($f_q, f_h$ 分别指前后时段中的脉冲频率) 相差大，是造成工作台运动的不平稳，加工表面质量下降的重要原因。因此采取措施，要求 \n\\[ \\frac{|f_q - f_h|}{f_q} \\leq \\delta \\quad （一般取 \\, \\delta \\leq 0.10), \\\\]\n你们也可以进行机理分析提出其他言之成理的方法。\n\n本题的具体数据如下：  \n各组步进电机的步进角度（每输入一个控制脉冲的主轴转动角度）均为 $1^\\circ$；  \n对步进电机的控制脉冲的最高工作频率不大于每秒 $100$ 脉冲；  \n各组变速器的传动比为 $10:1$（即步进电机转 $1^\\circ$，则变速器输出 $0.1^\\circ$）；  \n丝杆的螺距为 $12 \\, \\text{mm}$；  \n中台转轴到上工作台的控制丝杠—螺母副中心线的距离 $R=300 \\, \\text{mm}$，工件工作箱的夹具基准面到中台转轴的距离 $b=250 \\, \\text{mm}$；  \n为保证表面的加工质量，要求工件每转 $100$ 转，工件与砂轮的切点在工件工作箱的旋转轴方向上的移动量不超过 $4 \\, \\text{mm}$；  \n工件工作箱主轴转动速度设定为每分钟 $250 \\sim 300$ 转。  \n\n请依次研究下列 4 个问题（单位：mm）：  \n\n**问题1：** 加工外表面母线为  \n\\[ y = \\frac{7}{18 \\times 10^3}(600 - x)^2 + 0.45(600 - x), \\quad x \\in [0,600] \\\\]  \n的某旋转体工件，采用圆柱型砂轮加工，给出一个加工方案；对你的方案作误差分析。  \n\n**问题2：** 加工外表面母线为  \n\\[ y = 30 e^{-\\tfrac{x}{400}} \\sin\\left(\\frac{1}{100}(x+25\\pi)\\right) + 130, \\quad x \\in [0,600] \\\\]  \n的某旋转体工件，采用轮式砂轮加工，给出一个加工方案；对你的方案作误差分析。\n\n问题3：在整个加工过程中，若各个瞬时砂轮与加工工件的相切点是固定在底座和砂轮旋转轴的坐标系中同一个点（实际是点的一个邻域），随砂轮旋转形成一个圆周，那么砂轮在该圆周上的磨损会加大，从而影响加工质量。为此，希望在加工过程中使砂轮表面的磨损尽量均匀，请结合上述第1问题，提出一个修整策略，给出一个合理的加工方案，作相应的误差分析。\n\n问题4：请结合上述第2问题，提出一个修整策略，给出一个使轮式砂轮表面的磨损尽量均匀的合理加工方案，作相应的误差分析。",
  "subtask": {
    "1": {
      "subtask": "子任务1（几何与运动学初始模型构建）：为给定的工件母线 y = f(x)（x∈[0,600]，至少 C^2 连续）和待选砂轮几何（圆柱半径或轮式弧半径 r_w、弧张角 α、厚度 a），建立刀具（砂轮）中心轨迹的解析/数值表达、基于机床几何参数（例如 R=300 mm, b=250 mm 等）的一般逆运动学映射 q = K(C) 及其导数 dq/dx，并检验砂轮参数的可行性；具体任务步骤如下：1) 输入与假设：读入 f(x)，或其解析表达式，读入砂轮类型与候选参数 r_w, α, a；假设机床为刚性几何体、砂轮初形为理想圆或圆弧、三工位运动可由坐标变换精确描述。2) 切线/法线与偏置公式：计算一阶导数 y'(x)（解析或高精度数值差分）并得切线倾角 α_t(x)=arctan(y'(x))，法线单位向量 n(x)=(-sinα_t, cosα_t)，由法向偏置得到砂轮圆心轨迹 C(x)=P(x)+r_w·n(x)（P(x)=(x,y(x))，外表面偏置方向按约定取法线向外）；同时给出曲率 κ(x)=|y''(x)|/(1+y'(x)^2)^{3/2}（二阶导数亦解析或用中心差分计算）。3) 轮式砂轮可行性判据：在每一点检查局部几何可行性：必须满足 κ(x) ≤ 1/r_w（目标曲率不得超过砂轮最小曲率），且由法线方向确定的砂轮接触点在轮式砂轮的弧段范围内（即接触弧参数 θ_contact 对应的偏心角应满足 |θ_contact−θ_center| ≤ α/2）；对圆柱砂轮则只需检查厚度 a 在轴向上能覆盖接触投影（见下）。4) 轴向覆盖与厚度检查：对每个 x 通过在相邻若干 x±Δx 上求法线交点或用数值投影计算接触区域在轴向方向上的投影长度 L_proj，判定 a ≥ L_proj（或 a/2 ≥ L_proj/2），以保证砂轮在轴向能覆盖相邻接触点而不产生不可加工区或干涉。5) 机床逆运动学映射 K：定义机床基坐标系（轴向 X 沿工件轴，径向 Y 指向砂轮中心所在方向，旋转角 θ 为上台绕中台转轴角），建立从二维中心轨迹 C(x) 到三台实际坐标 q(x) = [q_lower(x), q_middle(x), q_upper(x)] 的刚性变换方程（以 R,b 等机床几何量为参数），并给出解析或数值求解框架——即用刚体平移/旋转变换把 C(x) 表达为相对于各导轨与上台转轴的期望位置，从而算出所需的线位移与转角（若机床几何较复杂，则以矩阵形式给出 K 的定义并采用数值反解器计算 q(x)）；同时导出或数值计算 dq/dx = K'(C(x))·C'(x)（用于后续速度/频率映射）。6) 离散化与自适应网格：为保证轨迹精度，对 x 采用自适应离散（按曲率 κ(x) 或 |C'(x)| 的变化划分段），并在每离散点保存 P(x), C(x), q(x), dq/dx 与 κ(x)；建议使用解析导数时优先采用解析表达式，数值导数时使用高阶中心差分并对网格局部加密以控制截断误差。7) 输出与接口：输出（1）中心轨迹点集 C(x_i)；（2）逆解结果 q(x_i) 及其导数 dq/dx(x_i)；（3）砂轮参数可行性标志与不满足处的诊断信息（超曲率点、弧外接触、厚度不足或轴向投影超限）；（4）建议的局部网格细化点集供后续脉冲/速度规划使用。8) 实现工具与数值注意事项：建议在实现时用 MATLAB 或 Python（NumPy/SciPy）进行符号/数值微分与矩阵变换，严格控制数值微分步长以避免噪声放大，并在关键处做几何健壮性检查（如法线反向、奇异点、κ→0 或极大值处的处理）。该子任务的交付物应是可重复调用的几何模块（函数/脚本），能对任意给定 f(x) 与砂轮参数判定可行性并返回 C(x)、q(x)、dq/dx 与诊断报告，作为后续时域与控制规划的唯一几何基础。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于给定母线 y=f(x) 与砂轮参数，构建并评估刀具中心轨迹与机床逆运动学映射 q=K(C) 及其导数以验证加工几何可行性",
          "expected_output": "数值点集与代码产物：1) C(x_i) 中心轨迹；2) q(x_i) 与 dq/dx(x_i)；3) 可行性诊断报表（曲率/弧外/厚度/轴向投影）；4) 自适应离散网格 x_i 建议；5) 可调用几何模块函数/脚本",
          "key_inputs_constraints": "输入：f(x)（解析或数值样条）、砂轮类型（圆柱/轮式）、r_w、α、a、机床几何参数 R=300, b=250。约束：f∈C^2 或提供足够密度数据支持高阶差分；外表面偏置法线方向一致；轮式需满足 κ(x)≤1/r_w 与接触角 |θ_contact−θ_center|≤α/2；厚度 a 覆盖轴向投影 L_proj；数值计算需控制导数噪声与奇异点。",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为几何与运动学基础模块，位于时域脉冲/速度规划与误差分析之前；前序依赖母线曲线与砂轮参数的选型与清洗；后序任务包括频率映射、加减速规划与加工误差评估。",
          "assumptions": "若未给解析 f(x)，使用C2样条重构；机床刚体无间隙；圆柱砂轮半径 r_w 为其外圆半径；坐标系X为工件轴向、Y为径向；外表面取外法线偏置。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确核心目标：构建 q=K(C) 与 dq/dx 并评估可行性",
              "description": "是否将任务界定为从 y=f(x)与砂轮参数推导中心轨迹 C(x)、逆运动学 q=K(C) 及导数，并进行曲率/厚度/弧角的几何可行性评价",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：准确点出C(x)、K、dq/dx与可行性四检；中分：提到C(x)与部分检验；低分：偏离到控制或误差仿真而忽略K与检验"
            },
            {
              "sub_criteria": "输入与约束识别：f(x), r_w, α, a, R, b",
              "description": "是否完整列出关键输入及C2连续性、κ(x)≤1/r_w、|θ_contact−θ_center|≤α/2、厚度覆盖等约束",
              "score": 25,
              "evaluation_focus": "需求理解",
              "scoring_hint": "高分：列齐并解释物理含义；中分：缺1–2项或无物理解释；低分：输入不全或约束缺失"
            },
            {
              "sub_criteria": "坐标系与外法线方向规定",
              "description": "是否明确X轴向、Y径向、外表面偏置方向及上台旋转角定义对齐机床几何",
              "score": 20,
              "evaluation_focus": "几何规范",
              "scoring_hint": "高分：清晰定义并与K对应；中分：定义含糊但能用；低分：方向混乱导致偏置错误"
            },
            {
              "sub_criteria": "离散化需求识别：自适应网格",
              "description": "是否识别需要按曲率/|C'|变化进行自适应离散以控制导数误差",
              "score": 20,
              "evaluation_focus": "数值意识",
              "scoring_hint": "高分：提出κ驱动细化与误差控制；中分：仅固定步长；低分：未考虑离散策略"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "偏置公式复述：C(x)=P(x)+r_w n(x)",
              "description": "准确重述利用切线倾角与法线 n(x) 的法向偏置得到砂轮中心轨迹",
              "score": 30,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：给出α_t, n(x)并写出C(x)；中分：口述无公式；低分：将偏置误写为切向"
            },
            {
              "sub_criteria": "曲率与可行性条件 κ(x)≤1/r_w",
              "description": "重述曲率定义 κ(x)=|y''|/(1+y'^2)^{3/2} 与最小曲率半径约束",
              "score": 25,
              "evaluation_focus": "公式理解",
              "scoring_hint": "高分：公式正确且联系砂轮曲率；中分：只提概念；低分：公式或不等式方向错误"
            },
            {
              "sub_criteria": "轮式弧角与接触角 |θ_contact−θ_center|≤α/2",
              "description": "阐明接触点在轮式砂轮弧段范围内的角度约束含义与计算",
              "score": 20,
              "evaluation_focus": "几何推断",
              "scoring_hint": "高分：说明如何从法线求θ_contact；中分：只写范围未说明计算；低分：忽略该条件"
            },
            {
              "sub_criteria": "轴向厚度覆盖 L_proj 与 a 的关系",
              "description": "复述如何计算相邻接触在轴向投影 L_proj 并与厚度 a 比较",
              "score": 25,
              "evaluation_focus": "工程化表达",
              "scoring_hint": "高分：描述数值投影或邻域交点法；中分：仅口头说明；低分：未提或误以为径向条件"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "C2 连续或样条重构假设",
              "description": "明确 f(x) 至少 C2；若离散数据则用 C2 样条并说明误差控制",
              "score": 30,
              "evaluation_focus": "假设严谨",
              "scoring_hint": "高分：给重构与步长建议；中分：只提C2；低分：未处理非光滑情形"
            },
            {
              "sub_criteria": "刚体与坐标对齐假设",
              "description": "机床刚体、X/Y定义、外法线方向与外表面一致的假设陈述",
              "score": 25,
              "evaluation_focus": "模型边界",
              "scoring_hint": "高分：列出并讨论影响；中分：简述；低分：缺失导致方向歧义"
            },
            {
              "sub_criteria": "数值微分稳定性与步长选择",
              "description": "对 y', y'' 数值求导步长、中心差分或高阶方法与滤波的假设与理由",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：提出自适应 h 与噪声控制；中分：固定 h；低分：无说明导致高频噪声"
            },
            {
              "sub_criteria": "轮式砂轮接触模型简化",
              "description": "假设接触为单点法向偏置，无二阶接触或干涉，并说明适用条件",
              "score": 20,
              "evaluation_focus": "机理抽象",
              "scoring_hint": "高分：界定适用曲率与厚度范围；中分：仅说明单点；低分：未说明"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "切线/法线与偏置推导",
              "description": "给出 α_t=atan(y'), n(x)=(-sinα_t,cosα_t)，C(x)=P+r_w n 的完整推导或实现细节",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：公式自洽且方向一致；中分：缺一环节；低分：推导错误"
            },
            {
              "sub_criteria": "曲率与可行性检验集合",
              "description": "建立 κ(x)≤1/r_w、弧角、厚度与轴向投影 L_proj 的联合判据与标记机制",
              "score": 25,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：统一接口输出标志与定位问题段；中分：分散检查；低分：缺少关键判据"
            },
            {
              "sub_criteria": "机床逆运动学映射 K 定义",
              "description": "以 R,b 与坐标系建立 q=[q_lower,q_middle,q_upper]=K(C) 的刚体变换或矩阵表达，并可数值反解",
              "score": 25,
              "evaluation_focus": "运动学建模",
              "scoring_hint": "高分：清晰给出变换链与变量含义；中分：只给框架无细节；低分：未定义K"
            },
            {
              "sub_criteria": "导数传播 dq/dx = K'(C)·C'(x)",
              "description": "构造 C'(x) 与通过链式法则得到 dq/dx 的表达或可靠数值近似",
              "score": 20,
              "evaluation_focus": "微分计算",
              "scoring_hint": "高分：解析或高阶差分并考虑稳定性；中分：一阶差分；低分：未提供 dq/dx"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "自适应网格与误差控制",
              "description": "按 κ(x) 或 |C'(x)| 变化细化网格，给出细化准则与终止阈值",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：明确阈值与局部加密策略；中分：粗略描述；低分：固定步长无控制"
            },
            {
              "sub_criteria": "数值导数与稳定化实现",
              "description": "采用高阶中心差分/样条导数并说明防止噪声放大的措施",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：三/五点或样条导数+滤波；中分：二点差分；低分：直接差分导致震荡"
            },
            {
              "sub_criteria": "逆解器/矩阵法稳定性",
              "description": "数值反解 K 时的初始化、收敛与奇异位姿处理（如κ→0或极值）",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：提供退避/正则；中分：仅迭代无保护；低分：未考虑奇异性"
            },
            {
              "sub_criteria": "可行性批处理与诊断定位",
              "description": "对全域 x 批量判定并输出超曲率点、弧外点、厚度不足段的索引与范围",
              "score": 20,
              "evaluation_focus": "工程落地",
              "scoring_hint": "高分：提供区间/索引与原因；中分：仅计数；低分：无定位信息"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化几何接口设计",
              "description": "提供可调用函数/脚本：输入(f,类型,r_w,α,a,R,b)，输出 C,q,dq/dx,诊断,网格",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：清晰API与类型检查；中分：基本可用；低分：耦合混乱"
            },
            {
              "sub_criteria": "解析/数值导数实现与选择",
              "description": "优先使用解析导数，缺失时回退高阶数值法并可配置步长",
              "score": 25,
              "evaluation_focus": "可维护性",
              "scoring_hint": "高分：自动检测并切换；中分：手工切换；低分：仅单一实现"
            },
            {
              "sub_criteria": "几何健壮性检查",
              "description": "实现法线方向校验、κ→0/极大值处保护、弧角计算数值稳定",
              "score": 25,
              "evaluation_focus": "健壮性",
              "scoring_hint": "高分：含阈值与断言；中分：部分检查；低分：无检查易崩溃"
            },
            {
              "sub_criteria": "诊断与可视化钩子",
              "description": "生成可行性报表与可视化接口（C vs P、κ(x)、违约点）",
              "score": 20,
              "evaluation_focus": "可解释性",
              "scoring_hint": "高分：结构化JSON/图；中分：文本日志；低分：无诊断"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "可行性覆盖率与违约统计",
              "description": "报告 κ(x)≤1/r_w、弧角、厚度三个约束的满足比例与最大违约幅度",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出比例与峰值位置；中分：仅口头结论；低分：无量化"
            },
            {
              "sub_criteria": "dq/dx 平滑性与后续频率映射影响",
              "description": "评估 dq/dx 的连续性/尖峰并解释对脉冲频率规划的约束影响",
              "score": 25,
              "evaluation_focus": "联动分析",
              "scoring_hint": "高分：展示曲线与异常段；中分：定性描述；低分：未关联后续任务"
            },
            {
              "sub_criteria": "网格充分性与误差估计",
              "description": "给出自适应网格下轨迹与导数的截断误差或收敛性迹象",
              "score": 25,
              "evaluation_focus": "数值评估",
              "scoring_hint": "高分：网格细化对比或误差上界；中分：经验阈值；低分：无评估"
            },
            {
              "sub_criteria": "敏感性与参数诊断",
              "description": "分析 r_w, α, a 变化对可行性与 C(x), q(x) 的敏感性，提出参数修改建议",
              "score": 20,
              "evaluation_focus": "决策支持",
              "scoring_hint": "高分：定量或示例比较；中分：定性建议；低分：未分析"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2 的目标是把已由几何子模块给出的轨迹 q(x)（以及其导数 dq_k/dx，k 表示三台工作台）在轴向坐标 x∈[0,L] 上时域化为可执行的速度剖面 v_axial(x) 与对应的三轴脉冲序列，满足工艺与机电约束并尽可能缩短总加工时间；为此需按如下明确步骤实现：输入数据包括离散化的轨迹点 x_i、对应的工作台坐标 q_k(x_i) 与导数 dq_k/dx(x_i)，每轴的脉冲步距 Δs_k（线位移或角位移对应每脉冲的物理量），步进器最高频率 f_max、工件主轴转速 N 与每转最大进给 s_r（从而得工艺轴向速度上限 V_rev_max = N·s_r/60），以及相邻时间段频率相对变化上限 δ 与预动/加减速段参数；处理流程为：一、自适应离散——依据 |dq_k/dx| 或曲率变化自适应划分轴向为若干段 j，保证段内 dq_k/dx 近似常数；二、局部允许速度计算——对每段计算按频率约束的局部允许轴向速度 v_allow,j = min( V_rev_max, min_k [ f_max·Δs_k / |dq_k/dx| ] )（当某段 dq_k/dx ≈ 0 时用 V_rev_max 作上限）；三、初始剖面与平滑约束表达——令初始速度 v_j^0 = v_allow,j，再把频率映射写为 f_{k,j}(v_j)=v_j·(dq_k/dx_j)/Δs_k，构造分段时间最短化目标 T=Σ_j L_j/v_j，约束为 0< v_j ≤ v_j^0 且对所有 k 有 |f_{k,j+1}-f_{k,j}|/f_{k,j} ≤ δ；四、求解策略——可采用两类实现：A）工程实用快速法：前向—后向迭代修正算法（基于频率比约束按段调整 v_j，使相邻段频率满足相对变化限，并在必要时用局部缩速回退，迭代直至收敛），随后在段边加入短的 S 型加/减速区间以实现平滑过渡；B）数值优化法：将上述非线性约束最小化问题用 SQP/IPOPT 等求解器求最优 {v_j}，适用于段数较小或需严格最优时；五、脉冲整数化与时序生成——对每段按求得的 v_j 计算各轴应移动量 Δq_{j,k}=q_k(x_{j+1})-q_k(x_j)，映射为整数脉冲 Δp_{j,k}=round(Δq_{j,k}/Δs_k)，并将 Δp_{j,k} 在该段持续时间 τ_j=L_j/v_j 内按均匀分布或採用 Bresenham-like 算法（按时间步长或以脉冲间隔法）生成精确脉冲时间戳；对因四舍五入引入的累计相位误差用累积误差校正法在后续段中补偿；六、加减速/预动实现——在程序中为首段与段间变速插入短 S 型速度轨迹，参数（加速度与 jerk 限值或加速段长度）由允许的频率斜率与控制器响应时间确定，以保证发脉冲频率平滑上升/下降并满足 δ 的工程含义；七、验证与输出——在脉冲级仿真中检验对所有时刻各轴频率 f_k(t) ≤ f_max 且相邻时间窗内相对变化 ≤ δ，输出结果包括分段速度 v_j、段时长 τ_j、各段每轴脉冲数 Δp_{j,k}、完整脉冲时间序列、预计总时间 T 及约束合规报告（最大频率、最大相对跳变、是否触及 V_rev_max 或 f_max）；八、数值与实现注意事项——对 dq_k/dx 数值噪声需用平滑/高阶差分处理，段长应在保证频率计算稳定与脉冲分辨率（脉冲周期 >= 控制器最小时刻分辨率）间权衡，时间戳分辨率按 ms 级或更高实现，建议用 MATLAB 或 Python（NumPy/SciPy）进行离线优化与仿真，利用现成求解器（IPOPT/SCIPY.optimize/CVX）和离散化脉冲调度算法生成可直接下发给控制器的脉冲表格；该子任务的交付物为：一套可重复运行的程序/模块（输入 q(x), dq/dx, Δs_k, f_max, N, s_r, δ），输出分段速度剖面、脉冲序列与合规性报告，且包含前向—后向平滑算法与可选的非线性优化求解器接口。",
      "criteria": {
        "task_understanding": {
          "core_goal": "优化轴向速度剖面并生成三轴脉冲序列，在满足 f_max、V_rev_max 与相邻频率相对变化 δ 等约束下最小化总加工时间",
          "expected_output": "分段速度序列 v_j、段时长 τ_j、各段三轴脉冲数 Δp_{j,k}、完整脉冲时间戳/间隔表、总时间 T、合规性报告（最大频率占用、触碰 V_rev_max/f_max、最大 |Δf|/f 与 δ 对比）",
          "key_inputs_constraints": "输入：离散轨迹点 x_i（[0,L]）、工作台坐标 q_k(x_i) 与导数 dq_k/dx(x_i)、每轴脉冲步距 Δs_k、步进器最高频率 f_max、工件主轴转速 N、每转最大进给 s_r（得 V_rev_max=N·s_r/60）、相邻频率相对变化上限 δ、预动与S型加减速参数；约束：f_k(t)≤f_max，v_j≤v_allow,j，|f_{k,j+1}-f_{k,j}|/f_{k,j}≤δ，脉冲整数化 Δp_{j,k}∈Z，脉冲周期≥控制最小分辨率（ms级）",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "作为几何模块之后、控制下发之前的时域化与调度子任务；前序依赖子任务1输出 q(x), dq/dx 与可行性标志；后序任务为误差评估与机床控制执行仿真/实测校验",
          "assumptions": "若 dq_k/dx≈0 则该轴频率由 V_rev_max 限制；时间分辨率为毫秒级足以刻画频率变化；允许采用A)前向—后向迭代或B)非线性优化两种策略，默认以A为主、B为可选验证"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "约束识别：f_max 与 V_rev_max",
              "description": "是否明确总时间最小化需同时满足 f_max 与工艺轴向速度上限 V_rev_max=N·s_r/60 的双重约束并体现在后续计算",
              "score": 35,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：推导并用于 v_allow,j；中分：口头提及但未用于计算；低分：遗漏任一关键上限"
            },
            {
              "sub_criteria": "相邻频率跳变 δ 的工程含义",
              "description": "是否把 |f_{k,j+1}-f_{k,j}|/f_{k,j}≤δ 作为平滑性约束而非简单软约束，并覆盖所有轴 k",
              "score": 30,
              "evaluation_focus": "工艺理解",
              "scoring_hint": "高分：给出各轴约束并用于修正 v_j；中分：仅单轴或未规范化；低分：未体现或误解"
            },
            {
              "sub_criteria": "离散到时域化的目标",
              "description": "是否将 x 轴段长 L_j 与 v_j 对应的段时长 τ_j=L_j/v_j 明确为优化变量与目标 T=Στ_j 的基础",
              "score": 35,
              "evaluation_focus": "目标界定",
              "scoring_hint": "高分：明确 T 与 τ_j、L_j 关系并用于求解；中分：仅口述最小时间；低分：无目标函数"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "速度剖面 v_j^0 与 v_allow,j",
              "description": "是否正确复述初始速度 v_j^0=v_allow,j=min(V_rev_max, min_k f_max·Δs_k/|dq_k/dx|)",
              "score": 40,
              "evaluation_focus": "公式复述",
              "scoring_hint": "高分：完整表达且处理 dq≈0；中分：缺一项；低分：错误或缺失"
            },
            {
              "sub_criteria": "频率映射 f_{k,j}(v_j)",
              "description": "是否给出 f_{k,j}=v_j·|dq_k/dx_j|/Δs_k 的映射并说明单位一致性",
              "score": 30,
              "evaluation_focus": "量纲一致",
              "scoring_hint": "高分：含绝对值与Δs_k；中分：少绝对值或单位未检；低分：未建立映射"
            },
            {
              "sub_criteria": "脉冲整数化与累计误差补偿",
              "description": "是否复述 Δp_{j,k}=round(Δq_{j,k}/Δs_k) 与跨段误差补偿思路",
              "score": 30,
              "evaluation_focus": "实现细节",
              "scoring_hint": "高分：含累计误差再分配策略；中分：仅取整；低分：未涉及"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "dq_k/dx≈0 的处理假设",
              "description": "是否假设在 dq_k/dx≈0 时以 V_rev_max 限速并说明其物理意义",
              "score": 30,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：阈值与数值稳定性说明；中分：仅口述；低分：忽略导致除零风险"
            },
            {
              "sub_criteria": "频率平滑实现假设（S型/jerk限制）",
              "description": "是否给出S型加减速或jerk限的参数化假设以满足 δ 的工程含义",
              "score": 35,
              "evaluation_focus": "工程可行",
              "scoring_hint": "高分：参数与与δ的对应关系；中分：笼统描述；低分：无实现假设"
            },
            {
              "sub_criteria": "时间分辨率与控制器限制",
              "description": "是否假设毫秒级时间戳足以实现频率变化并检查脉冲周期≥控制最小分辨率",
              "score": 35,
              "evaluation_focus": "实现约束",
              "scoring_hint": "高分：含最小周期检验；中分：仅声明；低分：未提"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "自适应离散与段内常导数假设",
              "description": "是否基于 |dq_k/dx| 或曲率变化构造自适应分段，说明段内 dq_k/dx 近似常数并提供细化准则",
              "score": 30,
              "evaluation_focus": "离散设计",
              "scoring_hint": "高分：具体阈值或策略；中分：原则性描述；低分：固定步长无依据"
            },
            {
              "sub_criteria": "允许速度计算 v_allow,j",
              "description": "是否按 min(V_rev_max, min_k f_max·Δs_k/|dq_k/dx|) 正确建模局部上限",
              "score": 25,
              "evaluation_focus": "约束建模",
              "scoring_hint": "高分：全轴取min含绝对值；中分：漏一轴或单位不明；低分：错误"
            },
            {
              "sub_criteria": "目标与约束的数学化",
              "description": "是否将 T=Σ L_j/v_j 与 |f_{k,j+1}-f_{k,j}|/f_{k,j}≤δ 形式化，覆盖 0<v_j≤v_allow,j",
              "score": 25,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：目标+全约束完整；中分：缺一项；低分：不成体系"
            },
            {
              "sub_criteria": "脉冲调度模型（均匀或Bresenham-like）",
              "description": "是否构造将 Δp_{j,k} 在 τ_j 内转为时间戳/间隔的算法模型，说明避免累计漂移",
              "score": 20,
              "evaluation_focus": "算法建模",
              "scoring_hint": "高分：含纠偏机制；中分：仅均匀分配；低分：未建模"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "前向—后向迭代平滑算法",
              "description": "是否实现按 δ 约束对 v_j 的前向限幅与后向回退直至收敛，并报告收敛准则",
              "score": 35,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：双向迭代+停机条件；中分：单向或无准则；低分：未实现"
            },
            {
              "sub_criteria": "可选非线性优化（SQP/IPOPT）",
              "description": "是否提供优化器接口并正确编码目标与约束，或给出为何不适用的充分理由",
              "score": 20,
              "evaluation_focus": "优化实现",
              "scoring_hint": "高分：可运行接口或严谨理由；中分：笼统提及；低分：无"
            },
            {
              "sub_criteria": "加减速与 δ 对应的参数化",
              "description": "是否将S型加减速插入段边，计算频率斜率以满足相邻段 |Δf|/f≤δ",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：给出斜率或时间缓冲计算；中分：经验插入；低分：未实现"
            },
            {
              "sub_criteria": "整数化与误差补偿的稳健性",
              "description": "是否量化 round 误差并跨段补偿，确保终点 q_k 一致且不违反 f_max/δ",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：误差上界与验证；中分：仅补偿；低分：误差未控"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "接口与数据校验（q(x), dq/dx, Δs_k, f_max, N, s_r, δ）",
              "description": "是否提供清晰API、输入检查（维度/单位/异常如 dq≈0）、并返回结构化结果与报告",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：完整校验与错误信息；中分：部分校验；低分：无校验"
            },
            {
              "sub_criteria": "自适应分段与前后向算法实现",
              "description": "是否以可重复运行的函数实现分段与平滑迭代，含可调阈值与日志",
              "score": 30,
              "evaluation_focus": "可复用性",
              "scoring_hint": "高分：模块化+单测/示例；中分：脚本式；低分：无实现"
            },
            {
              "sub_criteria": "脉冲时间戳生成与分辨率控制",
              "description": "是否生成精确时间戳/间隔，确保脉冲周期≥ms级分辨率并遵守 f_max",
              "score": 25,
              "evaluation_focus": "时序正确",
              "scoring_hint": "高分：边界检查与限幅；中分：基本生成；低分：越限或缺检查"
            },
            {
              "sub_criteria": "合规性仿真与报告输出",
              "description": "是否有仿真验证 f_k(t)≤f_max、|Δf|/f≤δ、T 统计，并输出可读报告/图表",
              "score": 15,
              "evaluation_focus": "验证完整",
              "scoring_hint": "高分：全覆盖并标注触顶段；中分：部分指标；低分：无仿真"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "约束触顶分析（V_rev_max 与 f_max）",
              "description": "是否统计并解释在哪些段由 V_rev_max 或 f_max 限制成为主导，对总时间的贡献",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：段级占比与时间贡献；中分：定性描述；低分：无分析"
            },
            {
              "sub_criteria": "δ 约束对速度的影响",
              "description": "是否量化 δ 导致的降速比例或增加的时间 ΔT，并展示最大 |Δf|/f",
              "score": 25,
              "evaluation_focus": "敏感性",
              "scoring_hint": "高分：有数值与可视化；中分：口头说明；低分：无"
            },
            {
              "sub_criteria": "整数化误差与轨迹偏差",
              "description": "是否报告累计取整误差、最终 q_k 终点偏差并说明补偿效果",
              "score": 25,
              "evaluation_focus": "误差评估",
              "scoring_hint": "高分：给出上界与实测偏差；中分：仅终点一致性；低分：缺失"
            },
            {
              "sub_criteria": "算法对比（前后向 vs 优化）",
              "description": "若实现两法，比较总时间 T、违约率与运行时间；否则说明原因与潜在改进",
              "score": 20,
              "evaluation_focus": "比较分析",
              "scoring_hint": "高分：量化对比；中分：定性对比；低分：未提"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（误差建模、仿真与验证）应作为独立模块，目标是对由离散脉冲控制与刀具几何近似引起的所有可量化误差进行数学建模、数值仿真、度量与灵敏度分析，并输出可直接用于工艺决策的误差预算和校准建议。该子任务的输入为：工件母线函数 f(x) 或等间/自适应离散点集 P(x_i)、对应的理论刀具中心轨迹 C(x_i) 与其导数 dq_k/dx(x_i)（各轴），机床脉冲步距 Δs_k（例如典型值 0.003333 mm/脉冲）、每转最大进给 s_r、主轴转速 N、步进器上限频率 f_max 以及脉冲整数化规则；假定可接收的小量随机扰动模型（用于不确定性分析）。实施步骤包括：1）预处理与数值导数稳健化——用高阶中心差分并必要时用 Savitzky–Golay 或低通滤波去噪以获得平稳的 dq_k/dx 与曲率 κ(x)；2）自适应网格划分——依据曲率 κ(x) 和 dq_k/dx 的局部梯度将区间自适应划分，使每段内几何变化可由常数导数近似（建议离散点总数 N ≈ 1×10^3–1×10^4，局部相对导数变化阈值例如 5%）；3）脉冲整数化仿真——对每段计算持续时间 τ_j = L_j / v_j（v_j 可由外部给定或在此模块内暂定），将连续移动量 Δq_{j,k} 转换为整数脉冲 Δp_{j,k}=round(Δq_{j,k}/Δs_k)，并按时间均匀或 Bresenham-like 算法生成脉冲时序，显式模拟因四舍五入产生的瞬时与累积位置误差；4）几何重建与误差计算——将整数化后位移反投影到二维截面，重构实际加工轮廓 r_act(x) 并与理论 r_theo(x) 比较，计算并输出误差指标：最大径向偏差 max|Δr(x)|、均方根误差 RMS、局部最大误差（高曲率区）、以及按每转进给 s_r 估算的 scallop 高度 h(x)≈s_r^2/(8R_local) 和由离散步距引起的法向理论上界 Δs/2；5）统计与不确定性分析——对关键参数（Δs_k、s_r、N、r_w、f_max、段速度 v_j 与相邻段频率变化限 δ）做单参数敏感性分析（±5–10%），并用蒙特卡洛仿真（建议 ≥1000 次样本）加入小幅随机扰动（例如导数噪声、时序抖动）以估计误差分布和置信区间；6）误差合成与容差判定——用根和平方(RSS)或最大原则对独立误差源合成总体误差，并与工艺公差阈值（用户输入）比较，标示不满足处与其主导误差源；7）脉冲调度修正建议——基于误差分布提出补偿策略（如在整数化过程中分散余量以减少累积偏差、或在后段分配补偿脉冲），并输出经整数化后的可下发脉冲表的修正说明；8）验证与校准流程说明——给出实验验证步骤：用轮廓仪测量试磨样件剖面、计算实测误差并据此回归校准 Δs_k 或 K（映射误差），然后迭代仿真校正。工具和实现细节建议使用 MATLAB 或 Python (NumPy/SciPy) 实现数值导数、滤波、脉冲级仿真和蒙特卡洛分析，利用可视化（误差曲线、直方图、敏感度热图）输出结果文件（CSV/图像）与诊断报告；输出应包含：离散化策略与参数、整数化脉冲序列、误差曲线与统计量、灵敏度表、以及可执行的校准与补偿建议，使该子任务的产出能独立用于后续控制表生成和现场验证。",
      "criteria": {
        "task_understanding": {
          "core_goal": "对离散脉冲控制与刀具几何近似导致的加工误差进行仿真与评价，并输出误差预算与补偿/校准建议",
          "expected_output": "误差曲线与统计量（max|Δr(x)|、RMS、局部峰值、scallop h(x)）、蒙特卡洛误差分布与置信区间图表、灵敏度分析表、合规性与容差判定报告、经整数化后的脉冲序列及补偿说明、可复现实验校准流程说明与代码模块",
          "key_inputs_constraints": "输入：f(x) 或 P(x_i)、C(x_i)、dq_k/dx(x_i)、Δs_k、s_r、N、f_max、整数化规则、段速 v_j、δ；约束：脉冲频率≤f_max、相邻段频率跳变≤δ、主轴进给上限 V_rev_max=N·s_r/60；前置：几何模块已给出 q(x)、dq/dx 与可行性；数值：导数与曲率需稳健滤波，网格 N≈1e3–1e4",
          "modeling_type": "仿真+评价",
          "role_in_pipeline": "作为几何轨迹生成与时域脉冲规划之后、现场发脉冲控制之前的验证环节；前序依赖子任务1的几何/逆运动学与子任务2的分段速度与脉冲初稿；后续输出为控制表修正与车间试磨校准的依据",
          "assumptions": "若未给定 v_j，则使用子任务2提供的剖面或按 v_allow 简化估计；随机扰动采用零均值小方差高斯模型；容差阈值由用户提供，否则以示例阈值占位"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "误差来源识别：离散脉冲整数化与刀具几何近似",
              "description": "完整列出由 Δs_k 四舍五入、脉冲时序抖动、dq_k/dx 噪声、轮/圆柱砂轮半径近似、轴向进给 scallop 等对 r_act(x)−r_theo(x) 的贡献并区分系统/随机误差",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：≥5类来源并区分系统/随机；中分：3–4类未分清独立性；低分：仅笼统提1–2类或遗漏整数化误差"
            },
            {
              "sub_criteria": "约束识别：f_max、δ、V_rev_max=N·s_r/60",
              "description": "明确将频率上限与相邻段频率相对变化 δ 及进给上限对误差与仿真步骤（段速、脉冲调度）的影响关系写清",
              "score": 25,
              "evaluation_focus": "约束理解",
              "scoring_hint": "高分：三者均量化并写入仿真流程；中分：提及但未量化 δ 或 V_rev_max；低分：未体现任何约束"
            },
            {
              "sub_criteria": "输出指标识别：max|Δr|、RMS、局部峰值、h(x)",
              "description": "明确所需误差度量并说明各自适用场景（整体质量、局部高曲率、表面粗糙/波纹）",
              "score": 20,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：四项皆覆盖并给出计算式；中分：缺1项或未给计算式；低分：仅口头描述无指标"
            },
            {
              "sub_criteria": "验证需求：蒙特卡洛与灵敏度",
              "description": "指出需要≥1000次蒙特卡洛及±5–10%单参数敏感性来评估稳健性与主导因素",
              "score": 20,
              "evaluation_focus": "验证设计",
              "scoring_hint": "高分：次数与扰动范围明确；中分：只提蒙特卡洛或只提敏感性；低分：无不确定性分析"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "仿真目标复述：r_act(x) 重建与评价",
              "description": "清晰表述由整数化脉冲重建实际轮廓 r_act(x) 并与 r_theo(x) 比较的主线任务",
              "score": 35,
              "evaluation_focus": "表达准确",
              "scoring_hint": "高分：给出反投影到二维截面的流程；中分：只说对比未述重建；低分：将目标误表为优化"
            },
            {
              "sub_criteria": "输入输出闭环复述：C(x_i), q(x_i), dq/dx → 脉冲 → 误差报告",
              "description": "将几何输入、脉冲生成、误差统计、补偿建议串成闭环流程图式描述",
              "score": 30,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：涵盖四环节及数据流；中分：缺1环节；低分：流程破碎无因果"
            },
            {
              "sub_criteria": "约束与指标映射",
              "description": "说明 f_max、δ 如何转化为段速/频率序列并影响 max|Δr| 与 RMS",
              "score": 35,
              "evaluation_focus": "因果阐释",
              "scoring_hint": "高分：给出 f=v·dq/Δs 的映射与相邻段比值；中分：只定性描述；低分：未建立联系"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "随机扰动模型设定",
              "description": "给出时序抖动、导数噪声、步距偏差的统计假设（零均值高斯、方差范围）并论证合理性",
              "score": 35,
              "evaluation_focus": "假设制定",
              "scoring_hint": "高分：含数值范围与来源依据；中分：仅高斯但无参数；低分：无模型或不合理分布"
            },
            {
              "sub_criteria": "数值导数稳健化假设",
              "description": "阐明使用高阶中心差分+Savitzky–Golay/低通滤波的前提与窗口选择原则",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：明确窗口与阶次选择与边界处理；中分：仅列方法；低分：无稳健化说明"
            },
            {
              "sub_criteria": "段速与离散网格假设",
              "description": "说明自适应网格准则（κ或|dq/dx|变化≤5%）与 N≈1e3–1e4 的合理性",
              "score": 20,
              "evaluation_focus": "离散策略",
              "scoring_hint": "高分：有阈值与上限；中分：定性；低分：无网格策略"
            },
            {
              "sub_criteria": "独立误差合成假设",
              "description": "阐述使用RSS合成独立误差与何时采用最大原则",
              "score": 20,
              "evaluation_focus": "误差学",
              "scoring_hint": "高分：给出适用条件；中分：只提RSS；低分：未说明合成方法"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "脉冲整数化与时序仿真模型",
              "description": "建立 Δp=round(Δq/Δs_k)、Bresenham-like 时间分配与累计相位误差跟踪的离散模型",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：含累计误差补偿变量与时间戳生成；中分：仅四舍五入；低分：跳过整数化细节"
            },
            {
              "sub_criteria": "几何反投影与误差度量",
              "description": "从整数化后的 q_k(t) 反求二维截面位置，计算 Δr(x)、RMS、局部峰值与 h(x)≈s_r^2/(8R_local)",
              "score": 30,
              "evaluation_focus": "几何建模",
              "scoring_hint": "高分：推导包含局部曲率 R_local；中分：缺 h(x) 或局部峰值；低分：只给全局均值"
            },
            {
              "sub_criteria": "不确定性与蒙特卡洛框架",
              "description": "构建≥1000样本的参数扰动与时序抖动仿真，输出置信区间",
              "score": 20,
              "evaluation_focus": "仿真设计",
              "scoring_hint": "高分：样本量、分布、种子控制齐备；中分：样本量不足或无区间；低分：未实现"
            },
            {
              "sub_criteria": "灵敏度分析与主导因素识别",
              "description": "对 Δs_k、s_r、N、r_w、f_max、v_j、δ 做±5–10%单参敏感度并排序主导因子",
              "score": 20,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：定量弹性系数或相对变化率；中分：只排名；低分：无敏感度"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值稳健性与收敛",
              "description": "选择合适步长/窗口，控制导数与曲率噪声，避免奇异（κ→0/极大）导致爆炸",
              "score": 30,
              "evaluation_focus": "数值稳定",
              "scoring_hint": "高分：含自适应步长与边界处理；中分：固定步长但稳定；低分：出现数值发散"
            },
            {
              "sub_criteria": "仿真效率与规模",
              "description": "在 N≈1e3–1e4、样本≥1000场景下完成可接受时间内的蒙特卡洛与脉冲级仿真",
              "score": 25,
              "evaluation_focus": "计算效率",
              "scoring_hint": "高分：向量化/并行明显；中分：可运行但缓慢；低分：无法在规模下运行"
            },
            {
              "sub_criteria": "频率与约束合规检查",
              "description": "在仿真中逐时刻验证 f_k(t)≤f_max 与相邻窗口 |Δf|/f≤δ 并报告最大违约值",
              "score": 25,
              "evaluation_focus": "约束验证",
              "scoring_hint": "高分：形成合规性报告与定位段；中分：仅全局统计；低分：未检查或多处违规"
            },
            {
              "sub_criteria": "补偿脉冲分配求解",
              "description": "实现余量分散或后段补偿策略并评估对 max|Δr|、RMS 的改进幅度",
              "score": 20,
              "evaluation_focus": "算法实现",
              "scoring_hint": "高分：定量改进≥20%或给出曲线对比；中分：有策略但改进不明；低分：无补偿"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化接口与可复用性",
              "description": "Python/Matlab 实现独立模块：导数稳健化、自适应网格、整数化仿真、反投影、蒙特卡洛、灵敏度、报告导出",
              "score": 30,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：清晰函数接口与文档；中分：部分模块耦合；低分：脚本式难复用"
            },
            {
              "sub_criteria": "数值正确性与单元测试",
              "description": "对核心函数（round/投影/误差计算）提供边界与随机测试，误差容忍度明确",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：覆盖率高且通过；中分：少量测试；低分：无测试或错误频出"
            },
            {
              "sub_criteria": "性能优化与并行",
              "description": "使用向量化、numba/并行池加速蒙特卡洛与脉冲生成，I/O 批量写出CSV/图像",
              "score": 20,
              "evaluation_focus": "性能实践",
              "scoring_hint": "高分：显著加速与资源监控；中分：部分向量化；低分：循环低效"
            },
            {
              "sub_criteria": "可视化与报告自动化",
              "description": "生成误差曲线、直方图、敏感度热图与合规性报告（包含最大频率、最大跳变、触顶统计）",
              "score": 25,
              "evaluation_focus": "结果呈现",
              "scoring_hint": "高分：图表规范含图例与单位；中分：图表不全或标注缺失；低分：无可视化/报告"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "误差指标达成与容差判定",
              "description": "比较 max|Δr|、RMS、局部峰值与用户容差，明确通过/超差段与幅值",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：分段定位与数值表；中分：仅总体是否通过；低分：无对比判定"
            },
            {
              "sub_criteria": "主导误差源归因",
              "description": "基于灵敏度与蒙特卡洛贡献率，量化 Δs_k 或 s_r 等对总误差的占比，排序前3因子",
              "score": 25,
              "evaluation_focus": "因果分析",
              "scoring_hint": "高分：给出占比或弹性系数；中分：定性排序；低分：泛泛而谈"
            },
            {
              "sub_criteria": "补偿与调度修正效果评估",
              "description": "展示补偿前后误差曲线与统计改进，并说明是否触及 f_max/V_rev_max/δ 边界",
              "score": 20,
              "evaluation_focus": "对比评估",
              "scoring_hint": "高分：量化改进与边界利用率；中分：仅图无量化；低分：无对比"
            },
            {
              "sub_criteria": "校准闭环与迭代建议",
              "description": "提出试磨测量—回归校准 Δs_k 或 K—复仿真—再验证的闭环流程与停止准则",
              "score": 20,
              "evaluation_focus": "工程落地",
              "scoring_hint": "高分：含具体样本量与准则；中分：给出流程无细节；低分：无校准方案"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（砂轮磨损均匀化与修整策略、长期鲁棒性与维护规划）的目标是建立一个可执行的、以砂轮周向磨损分布为核心的闭环修整与均匀化策略模块，输入为砂轮的初始几何参数（圆柱或轮式的周向参数化ψ→半径/轮廓 r_w(ψ)、厚度 a、张角α等）、被加工材料的单位体积去除率或经验磨损系数、加工轨迹与接触点周向映射函数（在给定工艺参数下每个工件加工动作对应砂轮周向ψ的接触时序或接触密度分布）、以及可用的在线/离线传感数据（砂轮半径或轮廓测量仪、激光/光学轮廓器、主轴功率/力矩、声发射或振动传感器等）；范围包括：1) 建立并数值实现砂轮周向磨损累积模型 W(ψ,t)（可用离散ψ格点），其基本形式为 dW/dt(ψ,t) = K(ψ,t) · q_removal(ψ,t) 或近似为接触时间密度乘以单位去除量，模型应允许根据试验标定磨损系数并支持按时间步长累计；2) 设计并参数化“被动均匀化”控制策略（如轴向微扫或周向小幅索位），明确控制变量及其约束：轴向扫幅 A、周期 T_sweep、波形（正弦/三角/随机）、最大允许额外表面偏差 e_max_from_sweep，以及哪些装置执行（上台微摆、砂轮微旋转或工件微偏移）；3) 设计并参数化“主动修整（dressing）”策略，包括触发准则（阈值形式：当 max_ψ W(ψ,t)−min_ψ W(ψ,t) ≥ ΔW_limit 或估算的有效半径偏移 Δr_est ≥ Δr_thresh 或累计去除体积 V_removed ≥ V_thresh 时触发）、修整动作定义（修整刀具几何与参数：切深 d_dress、进给速度 v_dress、周向/轴向路径、是否做多角度交替修整以实现周向均匀化）、以及修整后检测与补偿步骤（修整后测量轮廓并更新加工补偿量）；4) 制定修整调度与优化准则：在考虑修整停机损失与磨损不均匀造成的加工误差增长之间，通过简单规则（如固定周期+阈值触发）或更先进的短期最优控制/模型预测控制（MPC）确定最优修整时刻与类型；5) 定义在线监测与闭环更新流程：明确采样频率与滤波/降噪方法，建立从传感信号到磨损指标 W_est(ψ,t) 的估计算法（傅里叶/投影或基于驱动映射的反演），并规定当测得偏差超过阈值时的自动动作（立即微扫、减速、或进入修整流程）；6) 鲁棒性与安全余量：给出基于试验或蒙特卡洛分析得到的安全阈值和最小修整频率、在传感器失效或估计不确定性增加时的退避策略（例如降速并增加修整频率）；7) 校准与实施步骤：规定初始标定试验以估计磨损系数与修整效率（短段加工→测量→拟合），以及定期验证（修整后测轮廓并调整阈值）；8) 输出与接口规范：明确修整模块输出为（a）被动均匀化参数集 {A,T_sweep,waveform,allowed_range}，（b）修整触发阈值与预定修整表（时间或累计量基准）及可变修整优先级，（c）修整动作参数集 {d_dress,v_dress,path_pattern}，（d）在线监测算法与对应传感器数据处理流程，（e）日志、报警与人机交互指令；9) 推荐实现工具与方法：用 MATLAB/Python 实现磨损离散仿真与阈值策略，用简单优化器或MPC库求解修整时序，用信号处理（滤波、谱分析）与估计算法从传感器得到 W_est，并将控制指令以结构化表格或API形式供机床控制系统调用；10) 验证准则：定义验收指标（修整策略下最大周向磨损不均ΔW_max、加工形状漂移Δr_after/V_removed、修整停机率）及其目标范围，并要求通过小批试验验证并迭代调整参数。该子任务的交付物应包括：磨损模型代码与参数文件、被动微扫与主动修整策略及触发规则文档、传感与估计算法说明、修整调度逻辑/优化例程、接口规范及验证计划与初始标定流程。",
      "criteria": {
        "task_understanding": {
          "core_goal": "基于砂轮接触周向映射与传感估计，仿真与优化砂轮周向磨损分布W(ψ,t)，并设计被动均匀化与主动修整策略以最小化磨损不均与加工形状漂移。",
          "expected_output": "数值离散的W(ψ,t)时间序列与ΔW_max指标；被动均匀化参数集{A,T_sweep,waveform,allowed_range}；主动修整触发阈值与预定修整表；修整动作参数{d_dress,v_dress,path_pattern}；在线监测与估计算法说明与代码；调度/优化例程与接口文档；验证计划与验收指标报告。",
          "key_inputs_constraints": "输入：r_w(ψ), a, α；材料去除率/磨损系数K(ψ)；接触点周向映射与接触时间密度；传感数据（半径测量、功率、声发射、振动）。约束：e_max_from_sweep对加工误差上限；修整停机损失与频率≤工艺节拍；传感采样≥主轴基频的数倍并需滤波；触发准则ΔW_limit、Δr_thresh、V_thresh；控制器频率变化约束δ。",
          "modeling_type": "仿真+优化+评价",
          "role_in_pipeline": "作为工艺规划的维护与鲁棒性模块，依赖前序几何/运动学与时域脉冲规划（子任务1–2）与误差建模（子任务3）输出接触密度和形状误差；向后续现场控制与HMI提供修整参数、监测与报警逻辑。",
          "assumptions": "接触周向映射可由子任务1–2提供或通过仿真得到；磨损系数可经短段标定近似常量或分段常量；被动微扫引入的额外表面偏差可线性叠加评估并受e_max_from_sweep约束。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "明确W(ψ,t)仿真与ΔW_max评价目标",
              "description": "是否将砂轮周向磨损分布W(ψ,t)建模为核心对象，并以ΔW_max与形状漂移Δr_est作为主要评价指标。",
              "score": 35,
              "evaluation_focus": "问题界定/评价",
              "scoring_hint": "高分：清晰给出W(ψ,t)与ΔW_max、Δr_est定义与计算；中分：仅口头描述不均匀性；低分：未识别周向分布而只谈总磨损量。"
            },
            {
              "sub_criteria": "识别被动均匀化与主动修整的区分与互补",
              "description": "是否区分轴向微扫等被动均匀化与修整（dressing）策略，并说明各自作用与代价。",
              "score": 25,
              "evaluation_focus": "方案框定",
              "scoring_hint": "高分：给出两策略适用条件与切换逻辑；中分：仅列举策略无条件；低分：混淆或只给单一策略。"
            },
            {
              "sub_criteria": "定位输入与约束来源（接触映射、δ、e_max_from_sweep）",
              "description": "是否指出接触密度来自子任务1–2，频率约束δ与表面误差上限e_max_from_sweep对策略设计的影响。",
              "score": 20,
              "evaluation_focus": "依赖识别",
              "scoring_hint": "高分：清楚罗列依赖数据与约束；中分：部分提及；低分：未说明来源。"
            },
            {
              "sub_criteria": "指出监测闭环与阈值触发需求",
              "description": "是否提出利用传感数据估计W_est(ψ,t)并以ΔW_limit、Δr_thresh触发修整的闭环需求。",
              "score": 20,
              "evaluation_focus": "控制目标",
              "scoring_hint": "高分：明确阈值与动作；中分：仅泛谈监测；低分：无闭环概念。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用ψ参数化并复述W(ψ,t)的离散仿真需求",
              "description": "是否复述需在离散ψ格点上按时间步累积W(ψ,t)并产生可视化与报告。",
              "score": 30,
              "evaluation_focus": "精确表述",
              "scoring_hint": "高分：明确格点数、时间步、输出格式；中分：仅说离散仿真；低分：未涉及。"
            },
            {
              "sub_criteria": "阐明被动均匀化参数集{A,T_sweep,waveform}",
              "description": "是否复述需要求解或设定A、T_sweep、waveform与allowed_range并考虑e_max_from_sweep。",
              "score": 30,
              "evaluation_focus": "参数清单",
              "scoring_hint": "高分：给出各参数作用与约束；中分：只列名；低分：缺失关键参数。"
            },
            {
              "sub_criteria": "阐明主动修整触发与动作参数",
              "description": "是否复述ΔW_limit、Δr_thresh、V_thresh与{d_dress,v_dress,path_pattern}的需求。",
              "score": 25,
              "evaluation_focus": "规则复述",
              "scoring_hint": "高分：量化阈值与示例范围；中分：仅概述；低分：未提阈值或动作。"
            },
            {
              "sub_criteria": "在线监测估计算法与采样/滤波要求",
              "description": "是否复述传感器类型、采样频率要求（≥主轴基频数倍）、滤波与W_est映射。",
              "score": 15,
              "evaluation_focus": "信号要求",
              "scoring_hint": "高分：给出采样与滤波策略；中分：笼统提及；低分：未提采样。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "磨损模型假设与K(ψ)标定",
              "description": "明确dW/dt=K(ψ)·q_removal或接触时间密度模型，说明K(ψ)常量/分段常量与标定流程。",
              "score": 35,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：含标定实验与不确定性范围；中分：给模型无标定；低分：无模型。"
            },
            {
              "sub_criteria": "接触映射与时间分辨率假设",
              "description": "说明接触周向映射来自轨迹与主轴相位，设定时间步与ψ分辨率对稳定性的影响。",
              "score": 25,
              "evaluation_focus": "数值设定",
              "scoring_hint": "高分：给Δt、Δψ建议与稳定性理由；中分：仅口述；低分：未设定。"
            },
            {
              "sub_criteria": "被动扫掠误差叠加与e_max_from_sweep",
              "description": "假设微扫引入的形状偏差近似线性可控并小于e_max_from_sweep，给验证思路。",
              "score": 20,
              "evaluation_focus": "误差假设",
              "scoring_hint": "高分：提供上界估计或仿真验证；中分：仅提出；低分：无控制。"
            },
            {
              "sub_criteria": "传感噪声与鲁棒性假设",
              "description": "设定噪声模型与失效退避策略（降速+增频修整），并说明阈值安全余量。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：量化噪声水平与余量；中分：原则性描述；低分：未考虑。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "W(ψ,t)离散累积与稳定性",
              "description": "构建离散ψ-时间网格，数值积分W(ψ,t)，并检查质量守恒/非负性与数值稳定。",
              "score": 30,
              "evaluation_focus": "数值模型",
              "scoring_hint": "高分：含稳定性与边界处理；中分：基本累积；低分：不一致或发散。"
            },
            {
              "sub_criteria": "被动均匀化控制律设计",
              "description": "建立A、T_sweep、waveform对接触密度的映射并加入e_max_from_sweep约束。",
              "score": 25,
              "evaluation_focus": "控制建模",
              "scoring_hint": "高分：给解析/仿真映射与约束投影；中分：经验设定；低分：无映射。"
            },
            {
              "sub_criteria": "修整触发与动作模型",
              "description": "定义ΔW_limit/Δr_thresh/V_thresh触发逻辑，修整切深/进给到轮廓复原的效应模型。",
              "score": 25,
              "evaluation_focus": "事件模型",
              "scoring_hint": "高分：动作对W与r_w(ψ)的更新公式；中分：概念性；低分：未建模。"
            },
            {
              "sub_criteria": "监测估计W_est(ψ,t)算法",
              "description": "从功率/声发射/半径测量反演W_est，含滤波、投影/傅里叶法与延迟补偿。",
              "score": 20,
              "evaluation_focus": "估计方法",
              "scoring_hint": "高分：给可实现的估计流程与误差评估；中分：仅想法；低分：缺失。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "修整调度优化或规则实现",
              "description": "在停机代价与ΔW_max增长间求解最优/次优调度（固定周期+阈值或MPC）。",
              "score": 35,
              "evaluation_focus": "优化实现",
              "scoring_hint": "高分：给目标、约束与可运行求解器/算法；中分：启发式无验证；低分：未给调度。"
            },
            {
              "sub_criteria": "参数整定与灵敏度分析",
              "description": "对A、T_sweep、ΔW_limit、d_dress、v_dress进行参数扫描与敏感度评估。",
              "score": 30,
              "evaluation_focus": "参数探索",
              "scoring_hint": "高分：系统扫描并报告最优带宽；中分：少量试探；低分：无分析。"
            },
            {
              "sub_criteria": "鲁棒性与退避策略求解",
              "description": "在传感失效或不确定性增加时自动切换降速+增频修整并证明满足安全阈值。",
              "score": 20,
              "evaluation_focus": "鲁棒控制",
              "scoring_hint": "高分：有条件逻辑与验证；中分：仅描述；低分：缺失。"
            },
            {
              "sub_criteria": "计算效率与在线可执行性",
              "description": "评估仿真步长与优化时间使策略可在线/准在线运行。",
              "score": 15,
              "evaluation_focus": "算效权衡",
              "scoring_hint": "高分：给耗时与复杂度估计；中分：粗略说明；低分：不可在线。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "磨损仿真模块与接口",
              "description": "MATLAB/Python实现W(ψ,t)离散累积，输入接触映射与K(ψ)，输出ΔW_max与日志。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：模块化、单元测试、边界检查；中分：可跑但耦合；低分：不可运行。"
            },
            {
              "sub_criteria": "被动微扫与修整动作API",
              "description": "实现{A,T_sweep,waveform}与{d_dress,v_dress,path_pattern}到控制指令的生成与约束检查。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：参数校验与约束断言；中分：基本生成；低分：无接口或错漏。"
            },
            {
              "sub_criteria": "在线监测与W_est估计算法代码",
              "description": "传感采样、滤波、特征投影/反演W_est(ψ,t)与状态机触发实现。",
              "score": 25,
              "evaluation_focus": "信号实现",
              "scoring_hint": "高分：含滤波与延迟补偿单测；中分：基本处理；低分：无实现。"
            },
            {
              "sub_criteria": "调度/优化例程与配置",
              "description": "提供阈值规则或MPC求解器封装，含配置文件与可重复脚本。",
              "score": 20,
              "evaluation_focus": "工程化",
              "scoring_hint": "高分：参数化+日志/可视化；中分：脚本化不足；低分：手工流程。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "ΔW_max与Δr_after/V_removed验收指标达成",
              "description": "报告策略下最大周向不均ΔW_max与形状漂移归一指标并与目标对比。",
              "score": 35,
              "evaluation_focus": "指标评价",
              "scoring_hint": "高分：两指标均达标并给置信区间；中分：一项达标；低分：未报告或超限。"
            },
            {
              "sub_criteria": "被动与主动策略对比与权衡",
              "description": "量化被动扫掠带来的e_from_sweep与修停机时间，给总体收益分析。",
              "score": 25,
              "evaluation_focus": "对比分析",
              "scoring_hint": "高分：图表+数值；中分：定性描述；低分：无对比。"
            },
            {
              "sub_criteria": "敏感度与鲁棒性实验/仿真结果",
              "description": "展示对K(ψ)、接触密度、噪声的敏感度与退避策略效果。",
              "score": 20,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：含±5–10%扰动/蒙特卡洛；中分：少量案例；低分：缺失。"
            },
            {
              "sub_criteria": "可执行建议与校准计划",
              "description": "提出标定流程、阈值初值、在线监测调参与现场实施要点。",
              "score": 20,
              "evaluation_focus": "落地性",
              "scoring_hint": "高分：步骤化与责任/频次；中分：建议粗略；低分：无计划。"
            }
          ]
        }
      }
    }
  }
}