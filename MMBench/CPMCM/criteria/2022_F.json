{
  "task_id": "2022_F",
  "problem": "疫情期间生活物资的管理是一项复杂的系统工程。交警、高速公路管理部门、商务局、邮政部门、防疫部门、民委及市场监管局等均参与其中。通常疫情发现的越早越有利于疫情的防控，然而在实际管理过程中仍会出现疫情发现较晚的特殊情况。如果疫情发现较晚，大量的人群间有了错综复杂的交互，全民居家隔离与全民核酸检测成为了较优的选择。由此产生的大规模居家人群的科学管理成为了新的难点。\n\n在大规模疫情爆发期间可能会涉及到成百上千的小区及几百万规模的居家隔离人员。不同小区人口规模不同且组织化水平参差不齐。在疫情爆发初期，不少居民得到可能封城的消息后都去购买生活物资而导致大规模人员聚集。没有采购到足够物资的人群也通过其它平台订购生活物资，增加了疫情传播的风险。当时网络平台上的讨论也说明在疫情的初期存在一定程度的管理混乱，百姓们唯恐得不到足够数量的生活物资而恐慌\\cite{ref7,ref8}，疫情期间生活物资的科学管理被推上了风口浪尖。\n\n相关数据分析表明，在疫情期间政府完全有能力调动足够数量的生活物资。只是生活物资发放给社区居民的渠道不畅\\cite{ref9}。因此我们需要制定科学的管理方案来高效应对疫情。值得庆幸的是在最近几个月在不同城市大规模疫情的控制过程中我们积累下了众多宝贵的经验。其中采用蔬菜包的做法为疫情期间居民生活物资的有效发放起到了一定的作用。\n\n蔬菜包主要以新鲜蔬菜为主，因其人人每天必须，且保质期相对较短，从而配送频率较高，造成人员间密切接触。米、面、油及肉等虽然也是居民迫切需要的生活物资，但因保质期长且主要由政府储备，因此其配送任务可以穿插到蔬菜包的配送过程。另外，水果也是居民们普遍需要的，如果生产出来却无法销售也对经济发展不利，因此在不增加疫情传播风险的情况下，也要考虑诸如水果等非必须食品的科学供应。由于蔬菜无论在数量、频次、影响等方面都更突出，故本赛题聚焦蔬菜的科学供应。\n\n目前我们搜集到了长春市9个区的各项基础数据，不同区的隔离人口数量与生活物资投放点数量如附件2所示。这9个区的交通网络基础数据和主要小区的相关数据如附件3所示，各区交通网络图及其小区的分布图如图1所示。请你们结合数学建模的方法解决如下几个问题：\\begin{figure}[h]\n    \\centering\n    \\includegraphics[width=\\textwidth]{image.png}\n    \\caption{长春市9个区交通网络与主要小区分布图}\n    \\label{fig:1}\n\\end{figure}\n\n\\section{问题一：各种生活物资的大规模流动方式对疫情的影响}\n\n不少城市的疫情在短时间内无法得到快速控制，反思其原因，有一种观点认为疫情的发展或被控制扑灭与生活物资发放方式有关。请结合附件1中所提供的长春市COVID-19疫情期间病毒感染人数数据及其它附件数据或你们能搜集到的数据对长春市实行发放蔬菜包前后效果进行判别与分析，以利今后的防控工作。\n\n\\section{问题二：生活物资投放点数量与位置问题}\n\n在疫情爆发初期长春市的生活物资主要通过若干个投放点进行发放。考虑到在疫情初期既需要大量的人力资源又同时要求尽量减少人员流动、接触，投放点的数量显得尤为重要。在附件2中提供了当时长春市不同区域投放点数量分布结果。请结合附件3中和附件4中有关数据，讨论投放点数量的合理性，并通过数学建模进行适当的优化。另外，请充分考虑未来疫情、自然灾害等特殊事件，对于政府储备物资和大规模物资分拣场所的位置与数量规模进行合理规划，并提出最优的选址数量、规模及其潜在的备用场所位置。\n\n\\textbf{注：请务必将相关结果以表格的形式放置在正文中，其中主要参数包括选址位置及所属区域、选址半径、管辖范围小区个数及管辖范围内人口数等关键信息应该体现在表格中。}\\section*{问题三：生活物资的科学发放问题}\n\n在疫情期间生活物资的发放过程中，蔬菜作为一类人们急需且保质期较短的特殊产品，其分配的效果比较重要。长春市经过一段探索发现蔬菜包形式既减轻本市志愿者的数量与工作量，又减少人员对蔬菜的接触。请依据附件5分析蔬菜包需求、发放规律，并根据附件3中的各小区位置与人口信息，评价并调整4月10日至4月15日蔬菜包供应方案。\n\n\\section*{问题四：为长春市做好大规模封控情况下居民生活物资有序发放预案}\n\n长春市三月的疫情虽然安全扑灭，但未雨绸缪，请你们在第二、三问的基础上，结合附件3给出的长春市街道和小区情况的表格，做出特殊时期保障居民生活物资供应的详细预案（有序网络图）。网络上游是各项物资来源（每个区选一个地点，参赛队可自行根据坐标选择），中游是各项物资的集散地（集散地数量自行选择，可以先按附件2设置，再调整优化），网络下游是长春市所有小区。物流是一个周期内每天通过网络各条边所运输的各项生活物资的数量（开始可以只考虑蔬菜，不同日期可以发送不同品种蔬菜以增加居民的蔬菜品种）。开始时，网络的各条边可以不使用真实的街道，认为两点之间由最短路连接。后来可以选择少数行政区按真实街道选择路线，直至全市。由于是特殊时期，所以节省人力（工作量按运输里程与小区居民人数乘积计算）是最重要的指标，同时希望减少人员的直接、间接接触。在完成有序网络图后请进一步考虑用卡车运送物资，大卡车每辆可装10吨，小卡车每辆可装4吨，观察预案有无显著不同。\n\n注：请以图形或表格的方式精简地将相关结果在正文中表述出来，并请对照指标分析与评价你们给出的发放预案的优势。",
  "subtask": {
    "1": {
      "subtask": "子任务一的目标是把附件1–5及必要的补充数据系统化为可直接用于建模与决策的高质量输入，并估计所有影响模型行为的关键参数与不确定性分布，以便为后续决策模块提供标准化数据、校准参数与快速近似器；为此需按以下步骤系统实施：1) 数据清点与元数据记录——列出所有文件与字段，标注来源、时间范围、单位与缺失率，建立数据字典与版本控制；2) 数据清洗与标准化——统一日期格式与字段名，统一人口与隔离人数单位（如万人→人），规范小区与投放点标识，标准化蔬菜包计量单位与口径；3) 空间与网络预处理——将附件3的虚拟坐标与路口/小区对应并构建小区—候选点索引，使用交通路由数据（若无则使用最短欧氏/曼哈顿距离）计算小区到候选点的距离/耗时矩阵d_ij，保存为可重复调用的距离表；4) 缺失值与异常处理——对时间序列缺失采用合适插值或多重插补策略，对异常值采用基于季节性与周末效应的检测并人工核验规则处理，记录所有修正日志；5) 需求与到访量估计——以附件5与附件4为主按日、按区/小区汇总蔬菜包需求D_i(t)、实际接收量与自采比率，估计合规率p_c与到访人数r_j(t)的计算方法并生成每日样本序列；6) 参数识别与估计——对流行病学参数（如beta0、sigma、gamma）采用最大似然或贝叶斯方法（如PyMC3/Stan）在无/低投放基线区段拟合SEIR模型基础参数；对“发放→额外传播”关联参数（如alpha_c、拥挤指数p、分时/防护效能A_j）采用准实验识别策略（面板回归、差分中的差分 DID、合成控制或工具变量法）并控制检测频次、封控强度与人口结构等混淆因子以估计边际效应；7) 需求与行为模型构建——用统计或机器学习方法（逻辑回归、随机森林、梯度提升机）建立小区级需求预测模型与居民赴点概率模型，并以留出法或交叉验证评估预测性能；8) 不确定性表征与样本生成——对主要参数与需求建贝叶斯后验或采用自助法/蒙特卡洛生成若干代表性场景样本（高/基准/低需求、不同合规率与防护效能），并计算参数置信区间；9) 代理模型训练——在若干策略—仿真运行样本上训练轻量级代理（如GBDT或多项式回归）以近似“设施与分配→由发放引起的新增感染I_add”的映射，供优化循环内快速评估；10) 质量控制与外部校验——用外部移动性数据或已知现场统计（若可得）交叉验证到访与出行估计，生成残差分析与鲁棒性报告；11) 输出与文档化——产出标准化表格（小区人口表、日需求表D_i(t)、距离矩阵d_ij、候选点清单）、参数估计表与置信区间、场景样本集、代理模型文件与检验报告，并提供可复现的代码脚本（建议使用Python pandas/geopandas、networkx、scikit-learn、PyMC3/Stan，或R tidyverse、lme4、CausalImpact），同时保存数据处理日志与假设说明。该子任务的完成标准为：一套经质量控制的、可机器读取的数据集；一组有置信区间的关键参数估计；若干代表性需求/传播场景样本；以及用于内层优化的经过验证的代理模型与完整的可复现处理脚本。",
      "criteria": {
        "task_understanding": {
          "core_goal": "系统化整合附件1–5并拟合与校准SEIR与供需行为参数、构建需求与到访预测模型、生成不确定性场景与代理模型以支持后续优化评估。",
          "expected_output": "标准化数据集（小区人口表、日需求表D_i(t)、距离矩阵d_ij、候选点清单）、参数估计表（beta0、sigma、gamma、alpha_c、p、A_j等）含置信区间、代表性场景样本、高/基准/低需求集、代理模型文件（I_add近似器）、QC与鲁棒性报告、可复现代码脚本与数据处理日志。",
          "key_inputs_constraints": "输入：附件1（感染人数时序）、附件2（各区投放点与隔离规模）、附件3（小区与路网/坐标）、附件4（物资相关配置与政策/频次）、附件5（蔬菜包发放记录）；前置条件：统一单位（人、天、包）、唯一ID（小区/投放点）、日期时区一致；约束：缺失值可插补但需留痕，空间距离若无路网以欧氏/曼哈顿替代，参数估计需给出置信区间，所有派生表可机器读取（CSV/Parquet）。",
          "modeling_type": "混合（数据工程+拟合+预测+评价+仿真近似）",
          "role_in_pipeline": "作为数据与参数校准的核心中间环节：在后续选址与配送优化前，提供标准化数据、已校准的SEIR与发放-传播关联参数、需求/到访预测与不确定性场景，以及I_add代理模型；前序依赖原始附件数据收集；后序依赖本任务产出的数据与模型进行优化与策略仿真。",
          "assumptions": "若缺少完整路网，则以曼哈顿/欧氏最短路生成d_ij；若缺少部分发放记录，使用多重插补并以政策节点作为协变量；外部移动性数据可能不可得，则以合成对照或Google趋势替代进行外部校验。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "覆盖“数据清点与元数据记录”与标准化目标",
              "description": "是否明确本子任务需列出附件1–5所有字段、来源、单位、缺失率，并建立数据字典与版本控制以支撑后续拟合与预测。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：给出字段清单+缺失率+单位对照与版本策略；中分：部分字段与单位有列出但缺失率或版本缺失；低分：仅笼统提及数据整理，无可执行清单。"
            },
            {
              "sub_criteria": "识别“空间与网络预处理”与d_ij矩阵需求",
              "description": "是否指出需将附件3坐标/路口匹配小区/候选点并计算小区到投放点的距离/耗时矩阵d_ij。",
              "score": 25,
              "evaluation_focus": "问题界定",
              "scoring_hint": "高分：明确d_ij定义、度量（欧氏/曼哈顿/路网）、输出格式；中分：提到距离但未明确矩阵与度量选择；低分：忽略空间预处理。"
            },
            {
              "sub_criteria": "识别“参数拟合与不确定性”核心（SEIR与alpha_c等）",
              "description": "是否将SEIR基础参数与发放→传播关联参数（alpha_c、p、A_j）作为拟合与不确定性评估重点。",
              "score": 25,
              "evaluation_focus": "建模要点",
              "scoring_hint": "高分：清晰区分基线SEIR与干预效应参数并规划估计方法；中分：仅提SEIR或仅提干预参数；低分：未识别参数校准。"
            },
            {
              "sub_criteria": "明确“代理模型训练”在优化环节的角色",
              "description": "是否指出需训练I_add近似器以便策略优化内环快速评估。",
              "score": 20,
              "evaluation_focus": "流程意识",
              "scoring_hint": "高分：说明输入特征、目标I_add与用途；中分：仅提代理模型无目标定义；低分：未提代理模型。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用任务关键词复述核心目标：标准化+拟合+预测+场景",
              "description": "复述中需包含“标准化数据集”“SEIR拟合”“需求与到访预测”“不确定性场景与代理模型”。",
              "score": 25,
              "evaluation_focus": "表达严谨",
              "scoring_hint": "高分：四要素齐全且逻辑顺序正确；中分：缺1项；低分：缺2项以上或表述含糊。"
            },
            {
              "sub_criteria": "明确输出粒度：D_i(t)、d_ij、参数置信区间",
              "description": "是否复述到按日按小区需求D_i(t)、距离矩阵d_ij与参数的置信区间输出形态。",
              "score": 25,
              "evaluation_focus": "规格理解",
              "scoring_hint": "高分：三项齐备并指明格式（CSV/Parquet）；中分：提及但未到小区或按日粒度；低分：未给定粒度与区间。"
            },
            {
              "sub_criteria": "约束与前置条件的可执行复述",
              "description": "是否具体复述单位统一、ID规范、时间对齐、修正留痕等前置约束。",
              "score": 25,
              "evaluation_focus": "规范意识",
              "scoring_hint": "高分：列出至少3项约束并可操作；中分：仅概括性复述；低分：未提或不具可操作性。"
            },
            {
              "sub_criteria": "流程定位：前序/后序依赖",
              "description": "是否清楚说明本任务位于优化与仿真之前，依赖原始附件并产出供后续使用的模型与数据。",
              "score": 25,
              "evaluation_focus": "流程梳理",
              "scoring_hint": "高分：前后依赖明确；中分：只说明前序或后序之一；低分：定位不清。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "距离度量假设（路网缺失→欧氏/曼哈顿）",
              "description": "对交通路由数据不可得时采用欧氏/曼哈顿距离估算d_ij并评估误差影响。",
              "score": 25,
              "evaluation_focus": "假设合理性",
              "scoring_hint": "高分：说明选择理由与潜在偏差；中分：给出替代但不评估误差；低分：无说明。"
            },
            {
              "sub_criteria": "缺失与异常处理假设（插值/多重插补与季节性校正）",
              "description": "明确时间序列缺失插补方法与异常检测（周末效应/政策节点）并记录修正日志。",
              "score": 25,
              "evaluation_focus": "数据治理",
              "scoring_hint": "高分：指明方法（如LOCF、Kalman、MICE）与日志要素；中分：只给出一种简单插值；低分：忽略或硬删除。"
            },
            {
              "sub_criteria": "因果识别设定（DID/合成控制/工具变量）",
              "description": "对alpha_c、p、A_j的识别假设（平行趋势、工具有效性、混淆控制集合）。",
              "score": 25,
              "evaluation_focus": "因果思维",
              "scoring_hint": "高分：陈述平行趋势检验或IV排他性；中分：仅描述方法不述识别假设；低分：未提识别前提。"
            },
            {
              "sub_criteria": "需求稳定性与口径假设（蔬菜包口径统一）",
              "description": "明确蔬菜包规格统一或做口径换算，并假设短期内人均需求上限/弹性范围。",
              "score": 25,
              "evaluation_focus": "业务抽象",
              "scoring_hint": "高分：给出口径换算与弹性区间；中分：仅声明统一不量化；低分：未声明导致混口径。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "SEIR拟合框架与观测模型",
              "description": "给出beta0、sigma、gamma的拟合方法（MLE/贝叶斯），与报告/检测延迟的观测模型设置。",
              "score": 30,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：含先验/似然或延迟分布；中分：仅基本SEIR无观测层；低分：无可复现设定。"
            },
            {
              "sub_criteria": "发放→额外传播I_add关联模型",
              "description": "构建含alpha_c、拥挤指数p、A_j（防护效能、分时）等的结构化模型并指明协变量与交互项。",
              "score": 25,
              "evaluation_focus": "模型设定",
              "scoring_hint": "高分：公式与变量定义清晰；中分：仅口头描述；低分：未建立关联模型。"
            },
            {
              "sub_criteria": "需求与到访预测模型（D_i(t), r_j(t)）",
              "description": "建立逻辑回归/GBDT等预测并定义特征（历史发放、人口、封控强度、周末/政策虚拟变量）。",
              "score": 25,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：含评估方案与特征列表；中分：模型有但特征或评估缺失；低分：未建或不适配。"
            },
            {
              "sub_criteria": "代理模型设计（I_add近似器）",
              "description": "说明训练数据生成（策略-仿真样本）、目标定义、模型类型（GBDT/多项式）与输入特征集合。",
              "score": 20,
              "evaluation_focus": "近似建模",
              "scoring_hint": "高分：含训练-验证分割与目标校准；中分：模型类型给出但数据来源不清；低分：未设计代理。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "SEIR参数估计求解与置信区间",
              "description": "实现最大似然或贝叶斯采样（MCMC/VI），报告收敛诊断（R-hat/ESS）与区间。",
              "score": 35,
              "evaluation_focus": "数值计算",
              "scoring_hint": "高分：R-hat≈1.01内、ESS充分并给CI；中分：给点估计无诊断；低分：求解不稳定或无区间。"
            },
            {
              "sub_criteria": "因果估计实现（DID/合成控制/IV）",
              "description": "完成准实验估计并进行稳健性与安慰剂检验，控制检测频次与封控强度等混淆。",
              "score": 30,
              "evaluation_focus": "因果估计",
              "scoring_hint": "高分：含平行趋势/安慰剂/异方差稳健SE；中分：仅基准回归；低分：相关回归替代因果。"
            },
            {
              "sub_criteria": "需求与到访模型的交叉验证",
              "description": "K折/留出评估AUC/RMSE，报告基准对比与误差分布。",
              "score": 20,
              "evaluation_focus": "模型评估",
              "scoring_hint": "高分：给指标与置信带/箱线；中分：仅单一指标；低分：无验证。"
            },
            {
              "sub_criteria": "不确定性样本生成与场景覆盖",
              "description": "基于后验或自助法生成高/基准/低需求与不同合规率、防护效能场景并计数覆盖率。",
              "score": 15,
              "evaluation_focus": "仿真取样",
              "scoring_hint": "高分：说明取样方法与样本量；中分：仅三点情景；低分：无不确定性。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据清洗与标准化管道（pandas/geopandas）",
              "description": "实现单位统一、ID规范、日期时区、口径换算与日志记录，可重复运行。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：模块化脚本+日志+单元测试；中分：脚本可跑但无日志；低分：手工一步步。"
            },
            {
              "sub_criteria": "空间与网络预处理与d_ij缓存",
              "description": "构建并缓存d_ij（CSV/Parquet），支持欧氏/曼哈顿或networkx最短路。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：可配置度量与缓存；中分：只计算不缓存；低分：无矩阵输出。"
            },
            {
              "sub_criteria": "SEIR与因果估计代码（PyMC3/Stan/lme4）",
              "description": "可复现实验脚本，含采样配置与诊断输出。",
              "score": 25,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：参数化良好并保存后验；中分：仅点估计；低分：伪代码或不可运行。"
            },
            {
              "sub_criteria": "代理模型训练与模型文件导出",
              "description": "训练I_add近似器（GBDT/线性）并导出模型文件与推理接口。",
              "score": 20,
              "evaluation_focus": "ML工程",
              "scoring_hint": "高分：含持久化与版本；中分：训练有但无导出；低分：未实现。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "参数估计解读与不确定性（beta0等CI）",
              "description": "报告beta0、sigma、gamma、alpha_c、p、A_j的点估计与置信/后验区间及业务含义。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：数值+区间+解读；中分：数值无区间；低分：仅定性描述。"
            },
            {
              "sub_criteria": "外部校验与鲁棒性（移动性/现场统计）",
              "description": "用外部数据交叉验证到访与出行估计，并给出残差与灵敏度分析。",
              "score": 25,
              "evaluation_focus": "有效性检验",
              "scoring_hint": "高分：清晰对照与残差图；中分：口头说明；低分：无外部校验。"
            },
            {
              "sub_criteria": "预测性能与基准对比（D_i(t), r_j(t)）",
              "description": "提供AUC/MAE/RMSE等并与朴素基准（昨日值/周均）对比。",
              "score": 25,
              "evaluation_focus": "量化评估",
              "scoring_hint": "高分：显著优于基准且置信带；中分：小幅优于或相当；低分：劣于或无基准。"
            },
            {
              "sub_criteria": "代理模型有效性（I_add近似误差）",
              "description": "报告代理与仿真/高保真评估的误差（MAPE/R2）与在优化内环的推理耗时。",
              "score": 20,
              "evaluation_focus": "近似质量",
              "scoring_hint": "高分：MAPE≤15%或R2≥0.8且毫秒级推理；中分：误差中等或无耗时数据；低分：误差大或未报告。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（传染病动力学与发放耦合仿真）旨在建立一个以日尺度和小区/行政区为空间单元的可耦合SEIR类传染病模型，明确量化“物资发放活动→额外接触→新增感染”（记作I_add）的因果链路并输出可供决策优化使用的风险度量函数与不确定性分布。该子任务的输入数据包括：附件1的按日各区/小区新增确诊与病例进展数据（用于流行病基线校准）、附件5与附件4中的每日各区/小区蔬菜包到达量、到访/自采比率和分时安排（用于计算发放产生的到访人数r_j(t)与暴露强度）、以及附件3中小区与投放点的空间/网络信息（用于确定居民赴点的来源权重w_ij与传播空间耦合）。核心模型结构为：在每个空间单元i以日为步长求解改进SEIR方程，beta_i(t)=beta0(t)·(1–m_i(t)) + Σ_j w_ij·Δbeta_j(t)，其中Δbeta_j(t)为由投放点j当日到访行为引起的传播增量，其参数化形式建议为Δbeta_j(t)=α·[r_j(t)]^p/(1+θ·A_j)或其它能刻画拥挤非线性与防护效能A_j的替代函数；w_ij由小区到点分配比例或可达性矩阵给定。实施步骤包括：1) 基线参数估计：在无或低发放影响时段用最大似然或贝叶斯方法（如PyMC3/Stan）对beta0、σ（潜伏率）、γ（移出率）等进行拟合并输出后验分布；2) 发放影响识别：利用面板数据回归、差分中的差分（DID）、合成控制或工具变量方法，结合各区/日间的发放强度与病例时间序列，估计α、p、θ及A_j的影响系数并控制检测频次、封控强度等混淆项，以尽量得到发放到传播的因果估计；3) 模型集成与仿真：将估计参数代入SEIR耦合模型，进行多场景蒙特卡洛仿真（至少数百—数千样本）以得到在给定发放策略下的时间序列I_total(t)及基线反事实I_base(t)，并计算I_add=I_total–I_base的分布；4) 精细验证：对若干高风险投放点或拥挤场景构建基于个体的Agent‑Based Model（如Mesa等工具）以捕获排队、延期取物和异质性接触的非线性效应，并将ABM输出用于校准或验证Δbeta模型形式；5) 近似器与可调用接口：为便于在决策优化循环中快速评估传染后果，基于仿真样本训练轻量级代理模型（GBDT/XGBoost或神经网络），建立映射 f(y,x,scenario)→I_add 的可调用函数并提供交叉验证性能与不确定性估计；6) 敏感性与不确定性分析：对关键参数（合规率p_c、α、p、A_j、检测率等）进行全局敏感性分析（Sobol或局部PRCC）、情景应力测试，并输出I_add的分位数、置信区间及按投放点的贡献分解I_add_j；7) 输出成果：提供经校准的模型代码与文档（推荐Python生态：pandas、numpy、scipy.integrate、PyMC3/Stan、scikit‑learn、XGBoost；可选R实现）、参数后验表与置信区间、Δbeta函数形式与参数估计、代理模型文件、若干标准情景下的I_add时间序列与按点贡献表，以及用于后续优化的API（接受日度r_j(t)、A_j与w_ij输出I_add及其不确定性）。计算建议：日尺度仿真与MCMC需并行化运行以支持数百场景的蒙特卡洛抽样；ABM用于少量关键情形的深度验证（每情形若干十次重复以估计波动）。该子任务的交付物应能独立回答“在给定物资发放计划下，短期内由发放活动可归因的新增感染量是多少、其空间分布和不确定性如何，以及哪些投放点或作业方式贡献最大”，并为后续优化提供可直接调用的风险评估函数与参数证据。",
      "criteria": {
        "task_understanding": {
          "core_goal": "拟合并仿真可耦合SEIR传染病模型，评估物资发放活动引起的额外接触与新增感染量 I_add（含参数估计、因果识别与不确定性量化）",
          "expected_output": "参数后验分布表（beta0, σ, γ, α, p, θ, A_j 等）、Δbeta 函数与参数估计、日尺度 I_total/I_base/I_add 时间序列及置信区间、按投放点的 I_add_j 贡献表、若干场景样本集、经过交叉验证的代理模型文件（GBDT/XGBoost 等）、可调用 API/脚本与仿真代码、ABM 校准报告",
          "key_inputs_constraints": "1) 附件1 区/小区按日新增确诊与病例进展（时间序列，日步长，可能缺失）；2) 附件5/4 的日度 r_j(t)（到访/自采比率、分时安排，数值序列）与 A_j（防护/分时效率，标量或时间序列）；3) 附件3 的小区—投放点空间信息与 w_ij（可达性矩阵或需由距离/耗时计算得到）；4) 模型约束：日尺度离散步长、并行化 MCMC 要求、数据质量与因果识别需控制检测率/封控强度等混淆因子",
          "modeling_type": "拟合+仿真+评估",
          "role_in_pipeline": "作为从数据清洗后到决策优化前的核心仿真/风险评估模块；直接依赖子任务1（数据标准化与参数估计）输出的距离矩阵、日需求 r_j(t)、人口与候选点列表；为后续优化/选址/调度模块提供 I_add 风险函数与代理模型调用接口"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并量化物资发放→新增感染 I_add 因果链",
              "description": "明确把任务的核心问题表述为“物资发放活动→额外接触→新增感染 I_add”的因果链并列出中介变量（r_j(t), Δbeta_j, w_ij, A_j）",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：完整列出 I_add 因果链与中介变量并给出数理关系；中分：列出部分变量或未量化连结；低分：未识别 I_add 或未给出中介变量"
            },
            {
              "sub_criteria": "识别关键参数与估计目标（α,p,θ,beta0,σ,γ）",
              "description": "明确列出需估计的传染参数与发放影响参数并说明其统计量化目标（后验、置信区间）",
              "score": 35,
              "evaluation_focus": "参数识别",
              "scoring_hint": "高分：列出全部参数并指定估计方法（MCMC/MLE）与不确定性度量；中分：列出主要参数但缺乏不确定性表述；低分：参数列举不全或无估计目标"
            },
            {
              "sub_criteria": "识别验证与不确定性来源（ABM 校验、检测频率、数据缺失）",
              "description": "指出需要 ABM 校验、检测频率与数据缺失等会引入偏差的不确定性来源并拟定验证手段",
              "score": 35,
              "evaluation_focus": "不确定性",
              "scoring_hint": "高分：识别主要不确定性并给出可实施的校验/替代数据；中分：列出不确定性但缺具体校验方案；低分：忽略或淡化关键不确定性"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "准确认述 beta_i(t) 分解与 Δbeta_j 形式",
              "description": "复述 beta_i(t)=beta0(t)·(1–m_i(t))+Σ_j w_ij·Δbeta_j(t) 并写明 Δbeta_j 的参数化建议（如 α·[r_j]^p/(1+θ·A_j））",
              "score": 40,
              "evaluation_focus": "数理表述",
              "scoring_hint": "高分：精确写出公式并解释各项含义；中分：写出公式但变量解释不全；低分：公式不准确或遗漏 Δbeta"
            },
            {
              "sub_criteria": "重述需估计的统计目标与因果识别方法",
              "description": "复述对 α,p,θ 采用面板回归/DID/合成控制/IV 等因果识别方法并说明控制变量（检测频次、封控强度）",
              "score": 30,
              "evaluation_focus": "因果识别",
              "scoring_hint": "高分：列明具体识别策略与控制集；中分：提及方法但缺控制集或弱化因果语义；低分：未提因果识别或方法不匹配"
            },
            {
              "sub_criteria": "复述所需输出格式：I_total/I_base/I_add 及按点贡献",
              "description": "明确要求输出对照反事实 I_base、仿真 I_total、并计算 I_add 与按投放点 I_add_j 分解",
              "score": 30,
              "evaluation_focus": "输出定义",
              "scoring_hint": "高分：明确给出三类时间序列与按点贡献的表格格式；中分：仅给出 I_add 定义；低分：未给出反事实或按点分解要求"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "明确 SEIR 类模型与日尺度假设",
              "description": "说明采用的 SEIR 结构（含 σ,γ）、日步长假设及同质/异质混合假设对空间耦合的影响",
              "score": 35,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：清楚说明隔离期、潜伏期假设并讨论同质混合局限；中分：给出基本假设但未讨论局限；低分：未明确 SEIR 假设"
            },
            {
              "sub_criteria": "发放→传播函数形式假设（α,p,θ,A_j）",
              "description": "说明为何采用非线性拥挤函数（例如 α·r^p/(1+θ·A_j)）或提出合理替代并讨论可识别性",
              "score": 35,
              "evaluation_focus": "函数假设",
              "scoring_hint": "高分：给出理论或数据驱动的理由并提出备选函数；中分：仅给出函数式无充分理由；低分：函数任意且无讨论"
            },
            {
              "sub_criteria": "因果识别与数据生成机制假设（平行趋势、工具变量）",
              "description": "列出用于 DID/合成控制/IV 的关键假设并说明如何检验（平行趋势检验、工具变量外生性检验）",
              "score": 30,
              "evaluation_focus": "因果假设",
              "scoring_hint": "高分：明确可检验假设与检验方法；中分：列假设但无检验方案；低分：未提因果识别假设"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建耦合 SEIR（含 w_ij 矩阵）并实现 beta 分解",
              "description": "实现空间单元 i 的 SEIR 动力学并用距离/可达性构造 w_ij 矩阵以耦合投放点影响",
              "score": 30,
              "evaluation_focus": "结构搭建",
              "scoring_hint": "高分：实现离散日步 SEIR 并提供 w_ij 矩阵来源与示例；中分：实现 SEIR 但 w_ij 描述模糊；低分：未实现耦合或无 w_ij"
            },
            {
              "sub_criteria": "参数估计方案（MCMC/PyMC3 或 MLE）与后验表述",
              "description": "给出 beta0,σ,γ 的估计方法（MCMC 或 MLE），并输出后验分布及置信区间",
              "score": 25,
              "evaluation_focus": "统计拟合",
              "scoring_hint": "高分：使用 MCMC 并报告后验与收敛诊断；中分：用 MLE 或 MAP 且提供置信区间；低分：无不确定性度量或无诊断"
            },
            {
              "sub_criteria": "发放影响识别模块（DID/合成控制/IV）",
              "description": "实现面板回归或 DID/合成控制以估计 α,p,θ，并控制检测频次与封控强度等混淆因子",
              "score": 25,
              "evaluation_focus": "因果估计",
              "scoring_hint": "高分：展示模型规范、稳健性检验与解释；中分：有估计但少稳健性检验；低分：估计方法不合适或无控制变量"
            },
            {
              "sub_criteria": "ABM 用于校准 Δbeta 或验证拥挤非线性",
              "description": "设计若干 ABM 场景（排队、分时取物）以检验 Δbeta 的非线性假设并用于参数校准",
              "score": 20,
              "evaluation_focus": "个体验证",
              "scoring_hint": "高分：提供 ABM 设定、重复次数与校准结果；中分：有 ABM 但样本不足或未用于校准；低分：无 ABM 或仅描述无实现"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "MCMC 并行化与收敛诊断（用于 beta0 等后验）",
              "description": "使用并行化 MCMC（如 PyMC3/Stan）并报告 R_hat、ESS 等收敛诊断",
              "score": 30,
              "evaluation_focus": "推断质量",
              "scoring_hint": "高分：R_hat≤1.05 且 ESS 足够；中分：R_hat≤1.1 或 ESS 较低；低分：无收敛诊断或 R_hat≫1.1"
            },
            {
              "sub_criteria": "蒙特卡洛场景与 I_add 分布计算",
              "description": "进行至少数百场景的蒙特卡洛仿真并给出 I_add 的分位数、均值与空间分布",
              "score": 30,
              "evaluation_focus": "仿真质量",
              "scoring_hint": "高分：≥500 样本并报告 5/50/95 分位与映射；中分：100–500 样本；低分：样本过少或无分位报告"
            },
            {
              "sub_criteria": "代理模型训练（GBDT/XGBoost）并给出交叉验证性能",
              "description": "基于仿真样本训练轻量代理 f(y,x,scenario)→I_add 并报告 CV RMSE 或 R^2 与不确定性估计",
              "score": 20,
              "evaluation_focus": "近似器",
              "scoring_hint": "高分：CV R^2≥0.8 或 RMSE 与仿真误差小；中分：R^2 0.5–0.8；低分：R^2<0.5 或无 CV 评估"
            },
            {
              "sub_criteria": "全局敏感性分析（Sobol/PRCC）与按点贡献分解",
              "description": "对关键参数（α,p,A_j,合规率等）做 Sobol 或 PRCC 分析并输出按投放点 I_add_j 贡献表",
              "score": 20,
              "evaluation_focus": "敏感性",
              "scoring_hint": "高分：提供 Sobol 指数/PRCC 及显著参数排序；中分：提供局部敏感性或部分指标；低分：无敏感性分析"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现代码与 API（接受 r_j(t), A_j, w_ij 输出 I_add）",
              "description": "提供可运行脚本或库，包含 API 接口能接受日度 r_j(t)、A_j、w_ij 并返回 I_add 及不确定性",
              "score": 30,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：一键运行示例且 API 文档齐全；中分：代码可运行但需手动配置；低分：无运行示例或不可复现"
            },
            {
              "sub_criteria": "工具栈与并行化/性能实现（PyMC3/Stan、XGBoost）",
              "description": "合理使用 PyMC3/Stan 做 MCMC，并对仿真与代理模型实现并行化与性能优化",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：并行化实现且大规模仿真在可接受时间内完成；中分：部分并行化或性能不足；低分：单线程长耗时且无优化"
            },
            {
              "sub_criteria": "单元测试、数据处理日志与错误处理",
              "description": "包含输入校验、异常处理、数据处理日志与关键单元测试用于保证可重复性",
              "score": 25,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：关键函数有单元测试且有处理日志；中分：有部分测试或日志；低分：无测试/日志"
            },
            {
              "sub_criteria": "文档、运行说明与依赖管理（requirements/环境）",
              "description": "提供 README、依赖清单与运行示例，说明如何重现实验与并行化配置",
              "score": 20,
              "evaluation_focus": "文档性",
              "scoring_hint": "高分：完整 README 与环境文件，示例可直接运行；中分：文档不全但可凭经验运行；低分：无文档或依赖信息"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "提供 I_total/I_base/I_add 时间序列与置信区间",
              "description": "展示在若干标准情景下的 I_total、I_base 与 I_add 的日序列图表与 90% 置信区间或分位数表",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：图表与数表并有置信区间且可追溯到参数；中分：有序列但缺置信区间或可视化不足；低分：无关键序列或无不确定性表述"
            },
            {
              "sub_criteria": "按投放点 I_add_j 贡献分解与热点识别",
              "description": "给出按投放点/小区分解的 I_add_j 排名、热点地图与建议优先级",
              "score": 25,
              "evaluation_focus": "空间分析",
              "scoring_hint": "高分：给出清晰按点贡献表与地图并提出操作建议；中分：有表格但无地图或建议；低分：无按点分解"
            },
            {
              "sub_criteria": "ABM 验证报告与 Δbeta 形式一致性分析",
              "description": "比较 ABM 输出与 Δbeta 参数化的拟合度并报告一致性/差异与调整建议",
              "score": 20,
              "evaluation_focus": "验证对比",
              "scoring_hint": "高分：提供数值对比与调整策略；中分：仅描述一致性方向；低分：无 ABM 对比"
            },
            {
              "sub_criteria": "为后续优化提供可调用风险函数与局限性说明",
              "description": "输出可被优化模块直接调用的风险评估函数 f(输入)→I_add 以及对模型局限性和数据敏感性的清晰说明",
              "score": 20,
              "evaluation_focus": "决策支撑",
              "scoring_hint": "高分：提供函数接口、示例调用和局限性讨论；中分：提供函数但无局限性讨论；低分：无调用接口或无法用于优化"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（战略级选址与容量规划）旨在在周／月尺度为长春市或各行政区确定应急集散地与生活物资（以蔬菜包为主）投放点的最优数量、具体位置与规模等级，并规划备用场所与容量冗余，目标是在满足覆盖率与弱势群体保障、控制最大服务短缺与降低总体运营成本（固定场地成本、运输成本与人力工时）的前提下，使系统对需求波动具有鲁棒性；该子任务的工作范围包括（1）输入数据准备：小区级人口与需求预测（N_i、D_i）、候选点坐标与现有投放点信息、小区—候选点距离/耗时矩阵d_{ij}（基于附件3路网或最短路径估算）、可用车辆类型与容量参数、每个候选点的日处理能力等级cap_{jr}及对应固定设置成本F_{jr}、可接受服务半径R_max、弱势人群名单与点对点配送配额等；（2）模型构建：建立带容量与覆盖约束的混合整数规划模型（MIP），决策变量为y_{jr}（候选点j是否启用及其规模等级r）、x_{ij}（小区i指派到点j的二进制或比例），目标函数为加权和：w1·总固定与变动物流成本 + w2·最大/期望服务短缺惩罚 + w3·总人时成本 + w4·备用场地与冗余成本（权重可由决策者设定），并明确约束包括供需平衡、点容量上限、服务半径或可达性约束、每行政区最少启用点数、弱势人群优先与直配配额、以及集散地日吞吐上限；（3）不确定性与稳健性处理：对D_i与关键参数构建情景集（高/基准/低需求、车辆短缺等）并采用两阶段随机规划或场景平均近似（SAA）求解；备选方式为鲁棒优化（保护带）以确保在最坏情形下满足最低覆盖率；（4）候选集预筛与规模化求解策略：为降低计算复杂度先用启发式方法（p‑median、最大覆盖MCLP或贪心覆盖）生成较小的候选位置子集，再在该候选集上用MIP精求解；必要时采用分区式独立求解（按行政区分解）和并行计算，并在求解器上设置时间上限与最优性间隙阈值以保证可交付解；（5）算法与工具建议：模型用数学建模语言实现（如Pyomo/Gurobi或JuMP/CPLEX），场景生成与数据处理用Python（pandas、geopandas、networkx），候选筛选与启发式用OR‑Tools或自实现贪心算法，求解器并行化与SAA并行运行以加速；（6）输出规范与绩效指标：为便于决策展示，输出表格化结果包含每个选址点及所属行政区、坐标、启用规模等级、选址半径R_j、管辖小区个数、管辖范围内人口数、日处理/发放量cap_j、预计到达人数峰值与日均到访、需配车辆数（按大卡/小卡分类）、预计志愿者/工作人员人时、固定与变动成本估算、备用场地候选及其优先启用条件；同时产出多方案对比（最低成本方案、最低最大短缺方案、最低人时方案）以及对关键参数（需求波动、车辆可用率、服务半径）进行敏感性分析报告；（7）可实施性与计算注意事项：明确候选点的可行性检查要素（场地许可、通行条件与卫生防疫要求）、建议对求解过程设定时间/资源预算并保存求解日志与可复现代码，最后提供操作性建议以便将最优或近优选址方案快速转换为实地部署计划。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并优化应急集散地与蔬菜包投放点的选址与容量规划模型，预测并优化候选点启用规模以最小化总成本与最大服务短缺（优化选址与容量规划）。",
          "expected_output": "最优/近优选址解（y_{jr}）、小区到点指派矩阵(x_{ij})；候选点表格（坐标、启用规模、R_j、管辖小区数、管辖人口、日处理量cap_j）；车辆与人时需求表；多方案对比报表（最低成本/最低最大短缺/最低人时）；情景敏感性与鲁棒性分析图表；可复现代码与求解日志（Pyomo/Gurobi 或 JuMP/CPLEX）。",
          "key_inputs_constraints": "1) 小区级需求与人口 N_i、日需求预测 D_i(t)（数值序列，必须有区域标识）；2) 距离/耗时矩阵 d_{ij}（数值矩阵，基于路网或最短路径）；3) 候选点集合与规模等级 cap_{jr}、固定成本 F_{jr}（离散规模等级）；4) 车辆类型与容量参数（如大卡10t/小卡4t）；5) 服务半径 R_max、弱势群体直配配额、每行政区最少启用点数（关键约束）。",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "作为战略级选址与容量规划的核心优化模块，依赖前序的数据标准化与需求预测（子任务1输出的D_i、d_{ij}、参数不确定性样本）；为后序调度/仿真（子任务2的传染耦合仿真）提供候选方案与参数化接口，直接被部署决策与可视化模块调用。",
          "assumptions": "题目要考什么——按题型拆解关键能力：强调先建模再选算法再验证；假设可获得小区级D_i与d_{ij}，候选点场地许可与日处理能力cap_{jr}为离散可选等级；若部分输入缺失，评分按是否有合理预筛与敏感性处理打分。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别“选址与容量规划”目标与多目标权衡",
              "description": "是否明确将选址(y_{jr})与容量规划(cap_{jr})作为决策变量，并识别成本、最大/期望服务短缺、人时成本与冗余成本之间的权衡。",
              "score": 25,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确列出目标构成与权重并提供权衡说明；中分：列出目标但权重/权衡不充分；低分：未把容量cap_{jr}纳入决策或只单目标化。"
            },
            {
              "sub_criteria": "识别关键输入 d_{ij}, D_i, cap_{jr}, F_{jr} 与车辆约束",
              "description": "是否准确列举并注明距离矩阵d_{ij}、小区日需求D_i、候选点规模cap_{jr}、固定成本F_{jr}及车辆容量等关键输入与数据完整性要求。",
              "score": 25,
              "evaluation_focus": "数据理解",
              "scoring_hint": "高分：列出所有关键变量并指出单位与缺失处理策略；中分：列出多数关键变量但缺少数据质量说明；低分：遗漏关键输入或数据格式不明确。"
            },
            {
              "sub_criteria": "识别服务约束与弱势群体保障要求",
              "description": "是否识别服务半径R_max、弱势人群直配配额、每区最少启用点数等必须满足的硬约束与优先级约束。",
              "score": 25,
              "evaluation_focus": "需求识别",
              "scoring_hint": "高分：硬约束清晰并量化（如R_max数值、弱势配额%）；中分：识别但未量化；低分：未识别或忽略弱势群体。"
            },
            {
              "sub_criteria": "识别不确定性与鲁棒性需求（SAA/场景）",
              "description": "是否识别需求波动、车辆可用性与处理能力不确定性并提出使用SAA或鲁棒优化进行场景化处理的需求。",
              "score": 25,
              "evaluation_focus": "风险意识",
              "scoring_hint": "高分：给出场景集或保护带并说明SAA/鲁棒方法；中分：仅口头提及不确定性；低分：未考虑不确定性。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述“优化选址与容量规划”的数学目标",
              "description": "是否将任务复述为带容量与覆盖约束的混合整数规划，明确目标是最小化加权总成本+w2短缺惩罚+w3人时+w4冗余成本。",
              "score": 30,
              "evaluation_focus": "数学表述",
              "scoring_hint": "高分：精确写出目标函数组成并对应权重w1..w4；中分：描述结构正确但缺少权重说明；低分：目标表述模糊或与任务不符。"
            },
            {
              "sub_criteria": "复述变量与约束的集合（y_{jr}, x_{ij} 与供需/半径/容量）",
              "description": "是否明确列出决策变量y_{jr}, x_{ij}，并逐条说明供需平衡、点容量上限、服务半径及弱势优先约束的数学形式。",
              "score": 30,
              "evaluation_focus": "约束明晰",
              "scoring_hint": "高分：每条约束写出数学表达式并说明含义；中分：文字描述完整但无数学式；低分：遗漏重要约束或表达含糊。"
            },
            {
              "sub_criteria": "复述不确定性处理方案（SAA/鲁棒/两阶段）",
              "description": "是否阐明将D_i情景化并采用两阶段随机规划/SAA或鲁棒优化的总体框架及评估指标（覆盖率、最大短缺）。",
              "score": 20,
              "evaluation_focus": "不确定性建模",
              "scoring_hint": "高分：明确场景生成、样本量与评价指标；中分：提出方法但无细节；低分：无可行方案。"
            },
            {
              "sub_criteria": "复述预筛候选点与分区求解策略",
              "description": "是否说明用p‑median/MCLP或贪心启发式预筛候选集，并指出按行政区分解或并行求解以降低复杂性。",
              "score": 20,
              "evaluation_focus": "算法工程",
              "scoring_hint": "高分：给出预筛步骤与参数并论证其合理性；中分：提出预筛但无参数；低分：无预筛或不可行方案。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于需求D_i与服务半径R_max的假设",
              "description": "是否明确假设日需求D_i的时间稳定或按给定场景波动，并说明服务半径R_max与可到达性假设（基于d_{ij}最短路或欧氏距离）。",
              "score": 25,
              "evaluation_focus": "可检验假设",
              "scoring_hint": "高分：量化D_i不确定范围并说明R_max来源；中分：给出合理数值但未给不确定性范围；低分：无明确假设或不合理值。"
            },
            {
              "sub_criteria": "关于候选点处理能力 cap_{jr} 与固定成本 F_{jr} 的假设",
              "description": "是否说明cap_{jr}为离散规模等级且处理能力为日吞吐上限，固定成本F_{jr}随规模变化并列明估算方法或数据来源。",
              "score": 25,
              "evaluation_focus": "参数化",
              "scoring_hint": "高分：提供具体等级表或估算原则并给出示例数值；中分：有等级但无估算来源；低分：未说明或矛盾。"
            },
            {
              "sub_criteria": "关于车辆与人时成本的假设",
              "description": "是否假定车辆装载（大卡10t/小卡4t）与行驶成本、人时按里程×人口估算，并说明调度/回程假设。",
              "score": 25,
              "evaluation_focus": "运力假设",
              "scoring_hint": "高分：数值化车辆参数并说明配车规则；中分：给出容量但无调度细则；低分：忽略车辆或参数矛盾。"
            },
            {
              "sub_criteria": "关于备用场地与冗余的假设",
              "description": "是否假设备用场地可被启用且有启用成本/时间门槛，并明确冗余度目标（如N%的备用处理能力）。",
              "score": 25,
              "evaluation_focus": "应急准备",
              "scoring_hint": "高分：给出冗余目标并量化启用条件；中分：提出备用场地但未量化；低分：无备用场地考虑。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "MIP建模（y_{jr}, x_{ij}, 目标函数与约束）",
              "description": "是否用混合整数规划精确建模选址y_{jr}与指派x_{ij}，目标包含固定/变动物流成本、短缺惩罚、人时与冗余成本并写出数学式。",
              "score": 30,
              "evaluation_focus": "公式化能力",
              "scoring_hint": "High: 完整MIP数学式且自洽；Mid: 主要变量与约束明确但缺少部分项；Low: 仅文字描述或模型不完整。"
            },
            {
              "sub_criteria": "场景化不确定性处理（SAA或两阶段随机/鲁棒优化）",
              "description": "是否构建情景集并把情景嵌入目标（期望成本或最差情形下保证覆盖），说明样本数与样本平均近似流程。",
              "score": 25,
              "evaluation_focus": "不确定性方法",
              "scoring_hint": "高分：给出场景生成、样本量和两阶段数学式；中分：提出SAA但无参数；低分：无场景化策略。"
            },
            {
              "sub_criteria": "候选预筛与启发式组合（p‑median/MCLP/贪心）",
              "description": "是否设计预筛策略（如用p‑median或最大覆盖生成K个候选），并说明如何在预筛结果上做MIP精求解。",
              "score": 20,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：提供预筛算法步骤、评价指标与K选法；中分：提出方法但无实现细节；低分：未预筛或不可行。"
            },
            {
              "sub_criteria": "弱势群体与直配约束建模",
              "description": "是否在模型中加入弱势人群优先直配约束或最小配额约束，并在目标或约束中体现优先级。",
              "score": 25,
              "evaluation_focus": "公平性建模",
              "scoring_hint": "高分：数学化弱势约束并在方案输出中展示满足率；中分：文字承诺但无模型化；低分：未考虑或仅事后标注。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与可扩展性（Gurobi/CPLEX/并行SAA）",
              "description": "是否选择合适求解器并说明并行化SAA/分区求解、时间上限与最优性间隙设置以获得可交付解。",
              "score": 30,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：指定求解器并给出时间/Gap设置与并行策略；中分：选择求解器但无并行或参数；低分：未说明求解方法或无法扩展。"
            },
            {
              "sub_criteria": "候选集降维与分区求解效率",
              "description": "是否实施候选点预筛、按行政区分解或启发式初解以缩小MIP规模并报告计算时间与可行性证据。",
              "score": 25,
              "evaluation_focus": "复杂度控制",
              "scoring_hint": "高分：提供降维后规模、求解时间与Gap报告；中分：有启发式但无时间数据；低分：未做降维导致无法求解。"
            },
            {
              "sub_criteria": "方案多样性与多目标求解策略",
              "description": "是否产出多方案（最低成本/最低最大短缺/最低人时）或采用参数化权重做帕累托前沿搜索，并说明选择机制。",
              "score": 20,
              "evaluation_focus": "方案生成",
              "scoring_hint": "高分：提供≥3方案并比较指标；中分：提供2种方案；低分：仅单一方案无对比。"
            },
            {
              "sub_criteria": "敏感性分析与鲁棒性验证",
              "description": "是否对关键参数（需求波动、车辆可用率、R_max）进行敏感性分析并报告关键阈值与对成本/短缺的影响。",
              "score": 25,
              "evaluation_focus": "稳健性评估",
              "scoring_hint": "高分：量化敏感性（如覆盖率随需求增长的断点）；中分：列举影响因素但无量化；低分：无敏感性分析。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现代码与数据接口（Pyomo/JuMP + 数据加载）",
              "description": "是否提供可运行的代码仓库、清晰的数据接口（读入D_i、d_{ij}、cap_{jr}等），并能复现主要结果表格与图表。",
              "score": 40,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：仓库含示例数据、README与可复现脚本；中分：代码可运行但需人工改路径；低分：代码不完整或不可运行。"
            },
            {
              "sub_criteria": "求解日志、结果保存与随机种子控制",
              "description": "是否保存求解日志、输出文件、随机种子及求解器日志以确保结果可复现并便于审计。",
              "score": 30,
              "evaluation_focus": "可审计性",
              "scoring_hint": "高分：包含日志、种子与solver输出；中分：部分日志但缺少种子；低分：无日志或不可复现。"
            },
            {
              "sub_criteria": "单元测试与输入校验",
              "description": "是否实现基本单元测试（如约束可行性测试、边界输入校验）并对非法输入给出错误提示。",
              "score": 30,
              "evaluation_focus": "代码健壮性",
              "scoring_hint": "高分：有自动化测试与输入校验；中分：手动检查但无测试；低分：无测试且对坏数据崩溃。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "输出表格完整性（选址表、管辖统计与车辆/人时需求）",
              "description": "是否按要求输出选址位置表（含坐标/所属区）、选址半径R_j、管辖小区数与管辖人口、日处理cap_j与车辆需求表。",
              "score": 30,
              "evaluation_focus": "报告完整性",
              "scoring_hint": "高分：所有字段齐全且格式可机器读；中分：大部分字段有但缺少若干列；低分：缺少核心输出表。"
            },
            {
              "sub_criteria": "按方案对比（成本/最大短缺/人时）与决策建议",
              "description": "是否提供最低成本、最低最大短缺与最低人时三种对比方案，并给出针对性实施建议与启用条件（备用场地触发规则）。",
              "score": 25,
              "evaluation_focus": "决策价值",
              "scoring_hint": "高分：三方案对比明确并附实施触发条件；中分：提供方案但建议模糊；低分：仅单一方案或无建议。"
            },
            {
              "sub_criteria": "不确定性结果与鲁棒性指标（场景覆盖率/IQR/分位数）",
              "description": "是否提供在多场景下的覆盖率、I_add相关风险指标或最大/中位短缺的分位数，并列出关键点贡献分解I_add_j（若可得）。",
              "score": 25,
              "evaluation_focus": "风险量化",
              "scoring_hint": "高分：给出分位数表与按点贡献分解；中分：提供场景均值与方差；低分：未量化不确定性。"
            },
            {
              "sub_criteria": "实施可行性检查与场地许可建议",
              "description": "是否对选址的可行性（场地许可、通行条件、消防与防疫要求）进行检查并给出优先启用/备用顺序建议。",
              "score": 20,
              "evaluation_focus": "操作可行性",
              "scoring_hint": "高分：逐点可行性表与优先级；中分：给出通用检查要素；低分：无可行性考量。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务 4 的范围是面向日常战术层面，生成并持续滚动调整在大规模封控条件下可执行的配送计划：输入为每日/小时粒度的投放点与小区需求量、点位与道路网络的距离/行驶时间矩阵、每辆车的类型与载重（例如大卡10t、小卡4t）、车辆数量与班次约束、每个投放点的接收/分拣吞吐能力与服务时窗、单次装卸与分发服务时间、保鲜/在途损耗参数（最大允许运输时长）、工作人员与志愿者可用工时、以及防疫作业规则（分时预约、最大现场并发人数、跨区域服务限制等）；目标是在满足服务水平与弱势群体直配配额的前提下，最小化综合成本（运输里程成本、人员工时）、蔬菜损耗与配送引发的接触风险（可表征为到访人数与峰值排队的惩罚项），并保证车辆与点位容量约束、时窗与最大路时限制。方法上，建立带时窗的异构车队带容量与保鲜约束的混合整数规划模型（Heterogeneous CVRP/VRPTW with perishability），将接触风险与队列密度建模为额外的路径/停靠惩罚或硬约束，并允许对部分脆弱人群实施点对点直配（降低到访引发风险）；求解策略采用分层与启发式并行：对规模较小或子区问题可用商业求解器（Gurobi/CPLEX）求解精确或近优整数解，对城市级大规模问题采用启发式与元启发式算法（Clarke‑Wright savings、Adaptive Large Neighborhood Search、遗传算法、局部搜索、OR‑Tools 路径求解器），结合贪心初解、路径合并与局部改进以保证可操作性与解的稳定性。因需求与条件在日内外变化，本子任务要求实现滚动时域重优化框架（rolling‑horizon）：以小时/日为单位重算并平滑调整已发布路线，支持即时换车、合并或取消停靠，并用场景抽样/蒙特卡洛对不确定需求进行鲁棒化处理（通过备用车辆、弹性时间窗或预留直配配额）。为评估与调优，需用基于队列论或离散事件仿真的子模块估算每个投放点的排队长度与等待时间，并将仿真输出作为路线惩罚反馈到优化器；对关键候选方案做深度仿真或代理模型（如GBDT近似）以加速内循环评估。交付物为机器可读的每日路线清单（每辆车的出发时刻、访问序列、预估到达/离开时间、装载计划）、工作人员排班表、车辆使用与里程摘要、预估在途损耗与点位峰值排队/到访统计、KPI 报表（总里程、人时、未满足需求量、最大队列长度、风险惩罚值），以及用于现场调整的接口与可视化地图；实现建议采用 Python 生态（pandas/geopandas/networkx、OR‑Tools、Pyomo 结合 Gurobi/CPLEX）并保留快速在线重算与日志化记录以支持指挥调度与实地反馈。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在大规模封控条件下，优化并滚动重优化带时窗与保鲜约束的异构车队VRP配送计划，以最小化运输里程与人员工时成本、蔬菜损耗与接触风险。",
          "expected_output": "机器可读的每日/小时路线清单（车辆出发时刻、访问序列、到达/离开时间、装载计划）、工作人员排班表、车辆与里程摘要、在途损耗与峰值排队/到访统计、KPI报表、滚动时域重优化日志与接口、可视化地图与代码脚本。",
          "key_inputs_constraints": "输入：d_ij与行驶时间矩阵、投放点与小区需求D_i(t)、服务时窗、车辆类型与载重（10t/4t）、车辆数量与班次、点位吞吐能力与装卸时间、保鲜最大运输时长、人员与志愿者工时、防疫规则（分时预约、最大并发、跨区限制、弱势群体直配）。约束：容量、时窗、最大路时与保鲜时限、点位吞吐与并发上限、车辆班次与换车、跨区限制与直配配额、滚动重优化锁定已执行段。",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "位于战术执行层：依赖子任务1的标准化数据/距离表与参数、子任务2的接触风险惩罚函数与I_add近似器，接受子任务3的选址与容量作为上界，向后续指挥调度与现场执行提供可落地路线与排班，并在滚动时域内与仿真反馈闭环。",
          "assumptions": "若真实路网不可得则用最短路/曼哈顿距离；接触风险以到访人数与峰值排队惩罚近似；弱势群体直配视为硬性配额优先约束；滚动窗口每1–3小时重算并冻结已出车段。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别VRPTW+保鲜+异构车队优化目标",
              "description": "是否明确本任务是带时窗与保鲜约束的异构车队VRP，目标同时最小化运输里程、人员工时、蔬菜损耗与接触风险惩罚。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确列出四类目标且给出可加权目标或分层目标；中分：提到VRPTW与2–3个目标；低分：将问题当作单纯最短路或忽略保鲜/时窗。"
            },
            {
              "sub_criteria": "关键约束识别（容量/时窗/吞吐/并发/最大路时）",
              "description": "是否完整识别车辆容量、站点服务时窗、投放点吞吐与最大并发、最大在途时长（保鲜）与车辆班次约束。",
              "score": 30,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：逐条列出并量化约束；中分：缺1–2项或未量化；低分：只提容量或时窗其一。"
            },
            {
              "sub_criteria": "滚动时域重优化与锁定策略",
              "description": "是否识别需小时/日粒度滚动重算、冻结已执行路段、平滑调整路线的运营需求。",
              "score": 20,
              "evaluation_focus": "运营理解",
              "scoring_hint": "高分：提出冻结规则与再优化窗口；中分：只提重算无锁定；低分：无滚动概念。"
            },
            {
              "sub_criteria": "接触风险/队列惩罚与弱势直配",
              "description": "是否识别到访人数、峰值排队为风险惩罚，并识别弱势群体直配配额为硬/软约束。",
              "score": 15,
              "evaluation_focus": "风险意识",
              "scoring_hint": "高分：给出惩罚函数或硬上限与直配优先；中分：仅提减少排队；低分：未考虑。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "精确复述输入与输出（路线清单/排班/KPI）",
              "description": "是否将d_ij、D_i(t)、车辆与时窗等输入与所需输出（路线、排班、KPI、日志）一一对应复述。",
              "score": 35,
              "evaluation_focus": "需求对齐",
              "scoring_hint": "高分：清单式映射输入→输出；中分：输出缺少KPI或日志；低分：泛泛而谈。"
            },
            {
              "sub_criteria": "目标函数分解与权重说明",
              "description": "是否分解成本、损耗、风险惩罚并说明加权或分层求解策略与权重取值来源。",
              "score": 35,
              "evaluation_focus": "目标设计",
              "scoring_hint": "高分：给出权重或标尺归一化方案；中分：仅列项不说明组合；低分：单目标。"
            },
            {
              "sub_criteria": "运营规则复述（分时预约/跨区限制/班次）",
              "description": "是否明确分时预约、跨区域服务限制、车辆班次与换车规则如何体现在约束。",
              "score": 30,
              "evaluation_focus": "业务抽象",
              "scoring_hint": "高分：将规则映射为具体不等式/时窗；中分：仅口头描述；低分：遗漏关键规则。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "保鲜与最大在途时长假设",
              "description": "是否设定最大运输时长/温控导致的损耗函数，并说明来源与合理区间。",
              "score": 30,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：给出阈值或分段损耗函数；中分：仅阈值无依据；低分：未建模。"
            },
            {
              "sub_criteria": "接触风险与队列惩罚函数假设",
              "description": "是否给出以到访人数与峰值排队为输入的惩罚函数（如凸函数/分段上限）。",
              "score": 30,
              "evaluation_focus": "风险建模",
              "scoring_hint": "高分：函数形式+参数来源（子任务2或仿真校准）；中分：口头线性惩罚；低分：缺失。"
            },
            {
              "sub_criteria": "滚动时域与不确定性处理假设",
              "description": "是否设定重优化频率、冻结长度、需求扰动分布与备用车辆/弹性时窗策略。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：量化窗口与扰动幅度；中分：仅提重算；低分：静态一次性求解。"
            },
            {
              "sub_criteria": "弱势群体直配与服务半径假设",
              "description": "是否明确直配配额、优先级与服务半径/跨区规则的参数化设定。",
              "score": 15,
              "evaluation_focus": "政策转译",
              "scoring_hint": "高分：给出比例或人数上限；中分：仅文字说明；低分：未覆盖。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "异构车队VRPTW数学模型与变量定义",
              "description": "是否完整给出决策变量（x_{v,i}, t_{v,i}, load等）、车辆类型约束与时窗、容量、班次建模。",
              "score": 35,
              "evaluation_focus": "数理建模",
              "scoring_hint": "高分：变量/约束齐全且无时间逻辑冲突；中分：缺班次或部分时间约束；低分：仅口头模型。"
            },
            {
              "sub_criteria": "保鲜与最大路时/在途损耗集成",
              "description": "是否在路径层面对每次送达时长加入保鲜硬约束或损耗惩罚并入目标。",
              "score": 20,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：硬约束+惩罚二选一或并用；中分：仅全局上限；低分：未集成。"
            },
            {
              "sub_criteria": "接触风险/队列惩罚的路径或停靠级集成",
              "description": "是否基于预计到访时段分配，将峰值队列或到访人数惩罚并入目标或作为并发上限约束。",
              "score": 20,
              "evaluation_focus": "风险融入",
              "scoring_hint": "高分：时段化到达率驱动惩罚；中分：日度总量惩罚；低分：忽略风险。"
            },
            {
              "sub_criteria": "滚动时域重优化与锁定约束建模",
              "description": "是否定义已执行弧的固定、近邻替换、变更惩罚项以平滑调整。",
              "score": 15,
              "evaluation_focus": "动态优化",
              "scoring_hint": "高分：给出锁定二进制或变更惩罚λ；中分：仅文字描述；低分：无。"
            },
            {
              "sub_criteria": "弱势群体直配与跨区限制的约束化",
              "description": "是否以配额、必达、服务半径/行政区匹配约束体现政策要求。",
              "score": 10,
              "evaluation_focus": "政策到约束",
              "scoring_hint": "高分：清晰二元/计数约束；中分：软惩罚；低分：未落地。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解策略选择（Gurobi/CPLEX vs OR-Tools/ALNS）",
              "description": "是否根据规模采用分层：小规模MIP精确或近优，大规模使用ALNS/遗传/Clarke–Wright与局部搜索。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：给出规模阈值与切换准则；中分：单一方法；低分：不合适工具。"
            },
            {
              "sub_criteria": "启发式细节（初解、邻域、路径合并）",
              "description": "是否说明贪心/节约法初解、破坏-修复邻域、时间窗可行性检查与负荷可行性修复。",
              "score": 30,
              "evaluation_focus": "启发设计",
              "scoring_hint": "高分：列出3+邻域与可行性修复流程；中分：仅初解；低分：未说明。"
            },
            {
              "sub_criteria": "滚动重优化与场景抽样鲁棒化",
              "description": "是否实现需求不确定场景抽样、备用车辆与弹性时窗并在滚动窗口重算。",
              "score": 25,
              "evaluation_focus": "鲁棒求解",
              "scoring_hint": "高分：给出样本量与预留比例；中分：只预留车；低分：无鲁棒处理。"
            },
            {
              "sub_criteria": "与排队/离散事件仿真联动",
              "description": "是否将仿真输出的等待时间/峰值队列反馈为惩罚或硬约束用于迭代求解。",
              "score": 15,
              "evaluation_focus": "仿真耦合",
              "scoring_hint": "高分：迭代耦合或代理近似；中分：单次评估；低分：未使用仿真。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据接口与机器可读输出（路线清单/排班/KPI）",
              "description": "是否用Python（pandas/OR-Tools/Pyomo）实现读取d_ij、D_i(t)并导出标准CSV/JSON路线、排班与KPI。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：稳定I/O与模式校验；中分：能导出但无校验；低分：手工输出。"
            },
            {
              "sub_criteria": "VRPTW可行性检查与时间推进",
              "description": "是否在代码中实现时窗、服务时间、装卸、容量与最大路时的串行检查与修复。",
              "score": 30,
              "evaluation_focus": "约束实现",
              "scoring_hint": "高分：统一校验器+自动修复；中分：部分检查；低分：缺检查导致不可行。"
            },
            {
              "sub_criteria": "滚动时域重算与变更最小化",
              "description": "是否实现窗口化重算、冻结已执行弧、变更惩罚并输出变更日志。",
              "score": 20,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：提供API与日志；中分：能重算无日志/惩罚；低分：静态一次性。"
            },
            {
              "sub_criteria": "仿真模块或代理模型集成",
              "description": "是否实现排队/离散事件仿真或GBDT近似，返回峰值排队/等待时间并影响优化评分。",
              "score": 20,
              "evaluation_focus": "系统集成",
              "scoring_hint": "高分：可插拔接口与缓存；中分：离线评估；低分：无集成。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "KPI报表与对比（里程、人时、损耗、风险惩罚）",
              "description": "是否提供多方案KPI对比与基线（无保鲜/无风险）的改进幅度。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化提升与显著性；中分：仅单方案；低分：缺KPI。"
            },
            {
              "sub_criteria": "可行性与约束合规性验证",
              "description": "是否验证所有车辆容量、时窗、最大在途时长、吞吐与并发上限均满足并列出违例为零。",
              "score": 25,
              "evaluation_focus": "合规校验",
              "scoring_hint": "高分：自动校验报告；中分：抽样检查；低分：未验证或有违规未说明。"
            },
            {
              "sub_criteria": "敏感性与鲁棒性分析（需求波动/车辆短缺）",
              "description": "是否对需求±X%、车辆减少、时窗收紧进行情景分析并报告KPI弹性与服务短缺。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：3+情景并量化变化；中分：1–2情景；低分：无分析。"
            },
            {
              "sub_criteria": "队列与到访峰值评估及改进建议",
              "description": "是否给出各投放点峰值队列/等待时间、到访峰值分布，并提出分时/直配/增援的调整建议。",
              "score": 20,
              "evaluation_focus": "运营洞察",
              "scoring_hint": "高分：点位级表格与具体调整；中分：总体描述；低分：未评估或无建议。"
            }
          ]
        }
      }
    }
  }
}