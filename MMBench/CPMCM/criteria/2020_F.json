{
  "task_id": "2020_F",
  "problem": "问题1. 附件2给出了某次任务中飞行器的6个油箱的供油速度及飞行器在飞行过程中的俯仰角变化数据，每秒记录一组数据（下同）。请给出该飞行器在此次任务执行过程中的质心变化曲线，并将其质心在飞行器坐标系下的位置数据按时间（每秒一组）先后顺序存入附件6结果表“第一问结果”中。\n\n问题2. 附件3给出了某次任务的飞行器计划耗油速度数据，与飞行器在飞行器坐标系下的理想质心位置数据。根据任务需求，在飞行器始终保持平飞（俯仰角为0）的任务规划过程中，请为飞行器制定该次任务满足条件（1）-（6）的6个油箱供油策略，使得飞行器每一时刻的质心位置 $\\vec{c}_1(t)$ 与理想质心位置 $\\vec{c}_2(t)$ 的欧氏距离的最大值达到最小，i.e.,\n\n\\[\n\\min_{t} \\max ||\\vec{c}_1(t) - \\vec{c}_2(t)||_2\n\\]\n\n请给出飞行器飞行过程中6个油箱各自的供油速度曲线和4个主油箱的总供油速度曲线（时间间隔为1s）、以及飞行器瞬时质心与理想质心距离的最大值和4个主油箱的总供油量，并将6个油箱的供油速度数据按时间（每秒一组）先后顺序存入附件6结果表“第二问结果”中。\n\n问题3. 假定初始油量未定，飞行器其他相关参数如附件1所示，附件4给出了某次任务的飞行器计划耗油速度数据，与飞行器在飞行器坐标系下的理想质心位置数据。在飞行器始终保持平飞（俯仰角为0）的任务规划过程中，请为飞行器制定该次任务满足条件（1）~（6）的6个油箱初始载油量及供油策略，使得本次任务结束时6个油箱剩余燃油总量至少 $1 \\, \\text{m}^3$，并且飞行器每一时刻的质心位置 $\\vec{c}_1(t)$ 与理想质心位置 $\\vec{c}_2(t)$ 的欧氏距离的最大值达到最小，i.e.,\n\n\\[\n\\min_{t} \\max ||\\vec{c}_1(t) - \\vec{c}_2(t)||_2.\n\\]\n\n请给出6个油箱的初始载油量、飞行器飞行过程中6个油箱的供油速度曲线和4个主油箱的总供油速度曲线（时间间隔为1s）、以及飞行器质心与理想质心距离的最大值和4个主油箱的总供油量。请将6个油箱的初始油量存入附件6结果表“第三问结果”中的提示位置，并将6个油箱的供油速度数据按时间（每秒一组）先后顺序存入附件6结果表“第三问结果”中。\n\n问题4. 在实际任务规划过程中，飞行器俯仰角随时间变化。附件5给出了飞行器俯仰角的变化数据和耗油速度数据。请为本次任务制定油箱供油策略，使得飞行器瞬时质心 $\\vec{c}_1(t)$ 与飞行器（不载油）质心 $\\vec{c}_0$ 的最大距离达到最小，即\n\n\\[\n\\min_{t} \\max ||\\vec{c}_1(t) - \\vec{c}_0||_2.\n\\]\n\n请绘出飞行器飞行过程中6个油箱各自的供油速度曲线，再将4个主油箱的总供油速度曲线（时间间隔为1s）与计划耗油速度曲线绘于一个图中，给出飞行器瞬时质心与飞行器（不载油）质心 $\\vec{c}_0$ 的最大距离偏差以及4个主油箱的总供油量，并将6个油箱的供油速度数据按时间（每秒一组）先后顺序存入附件6结果表“第四问结果”中。",
  "subtask": {
    "1": {
      "subtask": "子任务1目标是建立一个以1 s为步长的离散时间物理数学模型，用明确的变量和方程把飞行器-油箱系统的质量守恒与质心随时间的演化完全表述为供后续仿真与优化直接调用的数值模型。具体要求与方法如下：输入数据来自“附件1-飞行器参数.xlsx”（每个油箱的几何参数 a_i,b_i,c_i、几何中心 R_i、油密度 ρ、飞行器不载油质量 M 与不载油质心 c0、各通道速率上限 U 及供油拓扑说明、每箱初始油量若给出）以及相应任务文件（附件2–5）中每秒的发动机耗油 D(t) 与俯仰角 θ(t)；在读取数据时须做单位一致性检查与缺失值处理。建立的变量与符号：t=0,...,T 为离散时刻；m_i(t)（kg）为油箱 i 的剩余燃油质量，s_i(t)（kg/s）为油箱 i 当时向发动机的直接供油速率，τ_{i→j}(t)（kg/s）为箱间输油速率（若拓扑禁止则恒为0），可选引入二值指示 y_i(t) 表示箱 i 在 t 是否处于“开启供油”状态以便表达最短开启时长与并发限制。时间步长 Δt=1 s，油箱最大容积对应质量 m_i^cap = ρ·a_i·b_i·c_i。质量守恒差分方程：m_i(t+1) = m_i(t) − Δt·[ s_i(t) + Σ_j τ_{i→j}(t) ] + Δt·Σ_k τ_{k→i}(t)，并加约束 0 ≤ m_i(t) ≤ m_i^cap，且为防止在一秒内抽空可强制 s_i(t) ≤ m_i(t)/Δt、Σ_j τ_{i→j}(t) ≤ m_i(t)/Δt。流率边界与拓扑约束：0 ≤ s_i(t) ≤ U_i （若油箱 i 不允许直接向发动机供油则 U_i=0，例如题中箱1、6对发动机的供油上界设为0）；0 ≤ τ_{i→j}(t) ≤ U_{i→j} 且仅当拓扑允许时非零；发动机需求约束为 Σ_i s_i(t) ≥ D(t)（允许超额并排放）；并发约束以指示变量表达为 Σ_i 1_{s_i(t)>0} ≤ 2（同时向发动机的箱数 ≤2）与 Σ_i 1_{(s_i(t)+Σ_j τ_{i→j}(t))>0} ≤3（同时供油的箱数 ≤3），在数值模型中可用 y_i(t) 与大M技术线性化为 s_i(t) ≤ U_i·y_i^eng(t)、Σ y_i^eng(t) ≤ 2 等线性形式。飞行器整体质心在机体坐标系下由下式给出：c(t) = [ M c0 + Σ_{i=1}^6 m_i(t)·r_i( m_i(t), θ(t) ) ] / [ M + Σ_{i} m_i(t) ]，其中 r_i(·) 为油箱内燃油重心位置向量，既依赖于箱内油量也依赖于当前俯仰角；为便于后续使用，模型应同时提供两种 r_i 处理：在平飞近似（θ=0 或可忽略自由面影响）时的简化解析表达 r_i ≈ (R_i_x, R_i_y, R_i_z − c_i/2 + h/2)（h = V/(a_i·b_i)，V = m_i/ρ，且应检查 h≤c_i 并截断超量），以及通用表征 r_i(m,θ) 的占位符接口以供更高保真计算或查表插值调用（此处仅在模型中声明其输入/输出与数值精度要求，不在本子任务内求解该非线性映射）。输出应包括：按秒可递推的差分动力学方程组、所有决策/状态变量的域与线性不等式约束、发动机需求与拓扑并发约束的代数表达、初始条件 m_i(0) 的接入格式（来自附件或作为未知变量的占位），以及用于计算每秒飞行器质心 c(t) 的函数接口与简化解析式；同时提供数据预处理与校验步骤（读取Excel、单位换算、缺失值/越界检测）和模型数值实现建议（例如用Python+NumPy/Pandas组织时间序列与矩阵运算），以确保该离散模型能被后续仿真或优化模块直接调用。",
      "criteria": {
        "task_understanding": {
          "core_goal": "建立并形式化一个1 s步长的离散时间仿真模型，数值化表述飞行器-油箱系统的质量守恒与质心演化以供后续优化与仿真调用",
          "expected_output": "按秒递推的差分方程组与变量域/线性约束清单；r_i(m,θ)的简化解析式与通用接口；数据预处理与单位校验流程；可直接调用的数值计算流程（含c(t)序列、m_i(t)序列的生成规范）",
          "key_inputs_constraints": "输入：附件1（a_i,b_i,c_i; R_i; ρ; M; c0; U与拓扑; 初始m_i(0)若给出）、附件2–5中的D(t), θ(t)。约束：Δt=1 s；0≤m_i(t)≤m_i^cap=ρa_ib_ic_i；s_i(t)≤U_i, τ_{i→j}(t)≤U_{i→j}；Σ_i s_i(t)≥D(t)；并发Σ y_i^eng(t)≤2，Σ y_i^oil(t)≤3；最短开启≥60 s；若箱不可直供则U_i=0；防抽空s_i(t)≤m_i(t)/Δt与Σ_j τ_{i→j}(t)≤m_i(t)/Δt；单位一致kg/s, kg, m。",
          "modeling_type": "仿真",
          "role_in_pipeline": "作为数据清洗后、优化/求解器前的系统动力学建模与数值接口定义任务；前序依赖：Excel读取与单位校验；后序衔接：供油策略优化与情景仿真、质心指标计算与可视化",
          "assumptions": "若附件未给出U_{i→j}则取拓扑允许边的上限等于对应出箱上限U_i；θ仅影响r_i(m,θ)而不改变容积上限；密度ρ常数；时间轴t=0..T由任务文件长度确定；若D(t)缺失可线性插值。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "锁定核心：1 s离散仿真与质心演化",
              "description": "是否明确本子任务为1 s步长的离散时间仿真，而非优化求解，并聚焦c(t)与m_i(t)的可递推表达。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚区分仿真与优化并界定t=0..T递推；中分：提到离散模型但混入优化目标；低分：将任务表述为求最优供油或遗漏1 s步长。"
            },
            {
              "sub_criteria": "输入识别：D(t), θ(t), a_i,b_i,c_i, R_i, ρ, M, c0, U",
              "description": "是否完整点名任务依赖的附件字段及其物理意义与单位要求。",
              "score": 30,
              "evaluation_focus": "需求解析",
              "scoring_hint": "高分：逐项列出并标明单位/来源；中分：列出大部分字段但无单位；低分：遗漏关键如D(t)或ρ。"
            },
            {
              "sub_criteria": "系统约束识别：并发限制与最短开启60 s",
              "description": "是否捕捉Σ y_i^eng≤2、Σ y_i^oil≤3及最短开启≥60 s的角色与目的。",
              "score": 35,
              "evaluation_focus": "约束提炼",
              "scoring_hint": "高分：给出并解释对数值模型影响；中分：提到但无表达方式；低分：未提或误解。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "差分质量守恒复述",
              "description": "准确复述m_i(t+1)=m_i(t)−Δt[s_i+Στ_{i→j}]+ΔtΣτ_{k→i}及边界0≤m_i(t)≤m_i^cap。",
              "score": 40,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：无符号错误并含防抽空约束；中分：主式正确但缺防抽空或容量；低分：式子错误或缺失。"
            },
            {
              "sub_criteria": "质心公式复述含r_i(m,θ)",
              "description": "准确给出c(t)=[Mc0+Σ m_i r_i(m_i,θ)]/[M+Σ m_i]并说明θ作用点。",
              "score": 35,
              "evaluation_focus": "数理表达",
              "scoring_hint": "高分：公式正确并指出r_i依赖m,θ；中分：公式对但未指明θ；低分：使用错误分母或忽略燃油项。"
            },
            {
              "sub_criteria": "供油需求与拓扑复述",
              "description": "明确Σ_i s_i(t)≥D(t)，拓扑禁用边τ=0，箱1/6直供U_i=0。",
              "score": 25,
              "evaluation_focus": "约束明确",
              "scoring_hint": "高分：三点俱全；中分：缺其一；低分：缺两项以上或方向性错误。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "单位一致性与ρ常数假设",
              "description": "声明并合理化密度ρ为常数、单位统一（kg, kg/s, m），并给出必要换算。",
              "score": 30,
              "evaluation_focus": "合理假设",
              "scoring_hint": "高分：列出所有单位与换算规则；中分：口头说明但不具体；低分：未说明或单位混乱。"
            },
            {
              "sub_criteria": "r_i(m,θ)双轨处理假设",
              "description": "给出θ=0时解析近似与通用接口（查表/数值）的假设与边界检查h≤c_i。",
              "score": 35,
              "evaluation_focus": "建模取舍",
              "scoring_hint": "高分：两种方法与截断逻辑齐全；中分：仅一种处理；低分：未定义r_i或不依赖m。"
            },
            {
              "sub_criteria": "缺失值/异常处理假设",
              "description": "说明D(t), θ(t)缺失的插值或前向填充策略与越界修正（负值截断、容量溢出）。",
              "score": 35,
              "evaluation_focus": "数据治理",
              "scoring_hint": "高分：具体到方法与阈值；中分：仅原则性描述；低分：无处理策略。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "变量与域：m_i,s_i,τ_{i→j},y(t)",
              "description": "明确变量类型与域（kg, kg/s, 二值），Δt=1 s，容量m_i^cap定义与初始化m_i(0)接入。",
              "score": 25,
              "evaluation_focus": "形式化定义",
              "scoring_hint": "高分：逐项变量域与初始化来源清晰；中分：缺部分域或初始化；低分：变量未定义清楚。"
            },
            {
              "sub_criteria": "线性不等式与大M线性化",
              "description": "给出s_i≤U_i y_i^eng, Σ y_i^eng≤2, Σ y_i^oil≤3及最短开启≥60 s的线性化表达。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：含开启持续时间的正确线性化；中分：有并发但无持续时长；低分：未提供可执行的形式。"
            },
            {
              "sub_criteria": "质量守恒差分与防抽空约束集成",
              "description": "在同一组模型中同时给出差分式、防抽空、拓扑禁用、需求Σ s≥D。",
              "score": 30,
              "evaluation_focus": "系统整合",
              "scoring_hint": "高分：所有约束一致且无矛盾；中分：缺1项；低分：多项缺失或不一致。"
            },
            {
              "sub_criteria": "质心计算函数接口与简化式",
              "description": "定义c(t)计算API（输入m(t),θ(t),参数；输出向量）并提供θ=0解析式。",
              "score": 15,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：输入输出与精度/校验说明齐全；中分：接口描述粗略；低分：未给接口或式子。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "递推可执行性与数值稳定",
              "description": "说明t=0..T的前向递推流程与溢出/负值截断策略，保证稳定。",
              "score": 40,
              "evaluation_focus": "数值方法",
              "scoring_hint": "高分：给出逐步更新顺序与边界处理；中分：仅概述递推；低分：无法执行或产生负质量。"
            },
            {
              "sub_criteria": "并发与最短开启实现细节",
              "description": "给出y变量状态机/滚动计数以满足≥60 s开启约束的实现思路。",
              "score": 30,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：可检验的计时或累计约束；中分：口头描述；低分：忽略该约束。"
            },
            {
              "sub_criteria": "r_i(m,θ)调用策略",
              "description": "明确在θ=0用解析式，在θ≠0调用通用接口或占位符并声明精度要求。",
              "score": 30,
              "evaluation_focus": "实现策略",
              "scoring_hint": "高分：区分两种情形并说明误差控制；中分：仅一种情形；低分：未考虑θ影响。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "数据预处理与单位校验（Excel→Pandas/NumPy）",
              "description": "给出读取、字段映射、单位换算、缺失值处理与越界警告的可执行流程。",
              "score": 35,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含校验与日志；中分：能读取但缺校验；低分：无预处理或单位混乱。"
            },
            {
              "sub_criteria": "时间序列递推与向量化",
              "description": "实现m_i(t), c(t)的按秒更新，优先矩阵/向量化并保持O(T·(n+edges))复杂度。",
              "score": 35,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：向量化与复杂度说明；中分：循环实现但正确；低分：不可运行或错误更新顺序。"
            },
            {
              "sub_criteria": "接口与配置（r_i占位、拓扑、参数）",
              "description": "提供r_i(m,θ)可替换接口、拓扑掩码/上限矩阵、Δt与单位配置化。",
              "score": 30,
              "evaluation_focus": "可维护性",
              "scoring_hint": "高分：模块化与参数化良好；中分：部分硬编码；低分：耦合严重无法替换。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "校验质量守恒与边界",
              "description": "展示Σ m_i(t)单调随Σ(s+τ)一致、无负质量、无超过m_i^cap的检查结果或断言。",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：提供自动检查与样例通过；中分：人工说明；低分：未验证或存在违规。"
            },
            {
              "sub_criteria": "质心c(t)合理性与θ敏感性",
              "description": "在θ=0与非0样例下对比c(t)是否随油量分布变化合理，边界h→0/满箱行为正确。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出对比与边界讨论；中分：只给单场景；低分：无分析或不合理结论。"
            },
            {
              "sub_criteria": "并发/最短开启约束触发统计",
              "description": "统计Σ y_i^eng≤2与≥60 s开启约束触发率或违例计数（应为0）。",
              "score": 25,
              "evaluation_focus": "合规性",
              "scoring_hint": "高分：量化统计且违例为0；中分：有统计但存在少量违例并说明原因；低分：无统计或大量违例。"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务 2（倾斜油箱几何非线性建模与离线预计算）旨在将“给定油箱内燃油体积 V 与飞行器俯仰角 θ 时，油液在长方体油箱内的静态浸没体积的几何形状及其质心位置 r(V,θ)”这一非线性映射离线化为在线可高速查表/插值调用的数值函数，并为后续优化提供可导近似；其范围包括：对每个油箱 i（已知在机体坐标系中的长 a_i×宽 b_i×高 c_i 与几何中心 R_i）在体积维和俯仰角维上构建二维离散网格 {(V_k,θ_l)}，对网格每点精确计算由俯仰引起的倾斜平面与长方体相交所得浸没多面体的体积与三维质心，保存质心在油箱局部坐标系及机体坐标系下的坐标并同时输出相应的局部导数近似；为实现该目标须按如下步骤与技术实现：一）输入与网格设计：输入为每个油箱的几何参数与最大容积 V_cap、俯仰角采样范围（由题目数据决定）与所需精度，推荐体积方向 K≈500–2000 点、角度方向 L 与题目时间采样相匹配（例如 L≈181），并在网格端点包含 V=0 与 V=V_cap 及 θ=0、±θ_max；二）单点几何求解：对每一对 (V_k,θ_l) 用数值方法确定切割平面的位置参数（例如平面高度 γ 相对于箱体参考面），利用体积关于 γ 单调性采用稳健的一维根查找（双分法或牛顿法伴随界限约束）求出使浸没体积等于给定 V 的 γ；三）多面体构造与积分：以长方体的 8 个顶点与 12 条棱为基础，用平面裁剪构建浸没部分的凸多面体（裁剪方法可直接计算平面与棱的交点并构成顶点集合），随后用多面体体积与质心的标准三角剖分公式或基于四面体化的精确积分（例如将多面体分解为若干以某固定点为顶点的三角锥并累加体积与第一矩）计算体积与质心坐标；四）数值鲁棒性处理：处理退化情况（完全空/满、平面穿过顶点或棱端）并对几何共线/共面情况采取容差处理（双精度浮点、容差 τ≈1e-12），对根求解和体积误差设定容限（体积误差 ≤1e-6 m^3，质心位置误差目标 ≤1e-4 m）；五）导数与线性化信息：为支持顺序线性化或 SQP，采用中心差分在体积方向和角度方向上计算局部偏导数 ∂r/∂V 与 ∂r/∂θ（或只计算 ∂r/∂V 并在需时用差商近似），并在表中一并存储或提供按需计算接口；六）插值与接口设计：将结果以结构化表格存储（建议用 HDF5 或 NumPy npz，包含元数据：坐标系、单位、网格节点、箱体原点变换矩阵），并提供高效运行时接口 f_i(m,θ) 接受质量 m（或体积 V=m/ρ）与角度 θ 返回插值后的质心 r_i 及近似导数，插值方法推荐双线性或双三次样条（必要时用保角插值以保证导数连续）；七）并行化与性能估算：离线预计算可按油箱和网格点独立并行化（多核或分布式），估算存储量约为 6 × K × L × (3 坐标 + 2 导数分量) × 8 字节，通常为几十 MB 到几百 MB，可接受；八）验证与单点测试：对若干代表点做精确几何解并与解析退化情形（θ=0 时可由 h=V/(a·b) 得到竖向质心 z=base+h/2）比较误差，生成误差报告并记录极端角度与体积下的数值稳定性；九）交付物：每个油箱的二元查找表文件（含节点与数据）、插值与求导 API（Python/C++ 接口说明）、数值精度与容错说明、并行计算脚本与单元测试用例。实现工具建议使用能够做稳健三维几何裁剪与精确多面体积分的库（例如 C++ + CGAL 或在 Python 中结合 trimesh/pyvista 并在关键路径用 Cython/C++ 加速），根求解与插值可用 NumPy/SciPy，数据存储用 HDF5；总体目标是把复杂的几何非线性映射转化为高精度、低延迟的查表/插值函数并提供导数信息以支持后续优化器的线性化步骤。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将倾斜长方体油箱内燃油质心 r(V,θ) 的几何非线性映射离线化为可高速查表/插值并可导近似的数值模型，用于后续仿真与优化",
          "expected_output": "每个油箱的二元查找表文件（HDF5/NPZ，含网格{V_k,θ_l}、r(V,θ)与∂r/∂V、∂r/∂θ）、插值与求导API（Python/C++）、误差与鲁棒性报告、并行预计算脚本与单元测试",
          "key_inputs_constraints": "输入：a_i,b_i,c_i,R_i,ρ,V_cap；网格：K≈500–2000体积分辨率，L≈时间采样（如L≈181）；角度范围含θ=0与±θ_max；数值约束：体积误差≤1e-6 m^3、质心误差≤1e-4 m；容差τ≈1e-12；边界含V=0,V=V_cap；拓扑：仅俯仰（单轴）",
          "modeling_type": "仿真+拟合",
          "role_in_pipeline": "作为离线几何预计算与数值拟合环节，位于离散动力学建模之后、在线仿真与优化之前；前序依赖：油箱几何与单位校验；后序服务：子任务1的c(t)计算、问题2–4的供油优化与灵敏度分析",
          "assumptions": "俯仰为单轴绕y或机体横轴倾斜，油面为平面；忽略毛细与动态液位波动；箱体为完美长方体；局部坐标原点与R_i转换矩阵可用元数据提供"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "锁定r(V,θ)非线性映射与离线化需求",
              "description": "准确界定目标是将倾斜油箱内燃油质心r(V,θ)离线预计算为查表/插值模型，而非在线几何实时求解。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清楚写出r(V,θ)与查表/插值关键词；中分：提到质心计算但未强调离线化；低分：将任务误解为直接优化或仅可视化。"
            },
            {
              "sub_criteria": "关键变量与对象V、θ、r及导数",
              "description": "明确体积V、俯仰角θ为输入，输出为质心r及∂r/∂V、∂r/∂θ，并指向后续优化需要可导近似。",
              "score": 25,
              "evaluation_focus": "需求抽取",
              "scoring_hint": "高分：同时列出r与两方向导数；中分：仅r或单一导数；低分：遗漏导数或将输出混淆为质量m。"
            },
            {
              "sub_criteria": "数值精度与鲁棒性指标",
              "description": "识别体积误差≤1e-6 m^3、质心误差≤1e-4 m、容差τ≈1e-12等硬约束及退化边界(V=0/V_cap, θ=0, 极端θ)。",
              "score": 25,
              "evaluation_focus": "约束意识",
              "scoring_hint": "高分：量化列出三个阈值；中分：部分列出或无数值；低分：未提任何精度与容差。"
            },
            {
              "sub_criteria": "性能与并行化定位",
              "description": "确认离线阶段需多核/分布式并行按油箱与网格点独立计算，并给出存储量数量级估计。",
              "score": 20,
              "evaluation_focus": "工程认知",
              "scoring_hint": "高分：指出6×K×L规模与几十–几百MB；中分：笼统提并行；低分：无性能/存储考虑。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "二维网格{V_k,θ_l}覆盖与端点包含",
              "description": "复述K≈500–2000、L≈时间采样并包含V=0,V_cap与θ=0,±θ_max的网格设计要求。",
              "score": 35,
              "evaluation_focus": "需求复刻",
              "scoring_hint": "高分：给出K、L范围与端点；中分：仅给出范围或端点之一；低分：网格设计缺失或错误。"
            },
            {
              "sub_criteria": "单点几何求解与根查找γ",
              "description": "说明通过平面高度γ单调根查找（双分/牛顿带界）使浸没体积匹配V。",
              "score": 25,
              "evaluation_focus": "算法表达",
              "scoring_hint": "高分：明确单调性+方法名；中分：仅提迭代求γ；低分：未提求解γ或误将γ为闭式解。"
            },
            {
              "sub_criteria": "多面体构造与积分策略",
              "description": "复述用平面裁剪长方体、三角剖分/四面体化积分体积与第一矩的流程。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：说明裁剪+四面体化+第一矩；中分：只提体积积分无质心；低分：用近似采样代替精准积分。"
            },
            {
              "sub_criteria": "插值与可导近似",
              "description": "阐明双线性/双三次样条插值返回r与导数用于优化线性化。",
              "score": 15,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：指明方法与导数输出；中分：仅说插值；低分：无插值或仅最近邻。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "流体静力学与油面平面假设",
              "description": "明确油面为平面、静态平衡，忽略动荡与粘性效应，限定单轴俯仰θ。",
              "score": 30,
              "evaluation_focus": "建模假设",
              "scoring_hint": "高分：列出平面+静态+单轴；中分：仅其一；低分：假设缺失或与任务冲突。"
            },
            {
              "sub_criteria": "几何与单位假设",
              "description": "箱体为完美长方体；坐标转换由R_i与局部原点给出；单位一致（m, m^3, rad）。",
              "score": 25,
              "evaluation_focus": "一致性",
              "scoring_hint": "高分：列出三项并注明rad；中分：部分说明；低分：未约定单位或坐标。"
            },
            {
              "sub_criteria": "数值容差与边界处理假设",
              "description": "采用τ≈1e-12处理共线/共面退化；V=0/V_cap与θ=0提供解析校验基准。",
              "score": 25,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：给出τ与三类退化；中分：仅提容差；低分：无容差策略。"
            },
            {
              "sub_criteria": "导数近似策略",
              "description": "采用中心差分计算∂r/∂V、∂r/∂θ，步长自适应或固定并保证误差控制。",
              "score": 20,
              "evaluation_focus": "数值分析",
              "scoring_hint": "高分：指明中心差分与步长/误差控制；中分：仅说差分；低分：不提供导数或用前向差分无说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "γ参数化与体积单调根模型",
              "description": "建立V(γ,θ)单调关系与一维根查找框架，含界限与收敛准则（体积误差≤1e-6 m^3）。",
              "score": 30,
              "evaluation_focus": "数学建模",
              "scoring_hint": "高分：形式化误差阈值与收敛；中分：有根查找无阈值；低分：未建立单调模型。"
            },
            {
              "sub_criteria": "平面裁剪与凸多面体构造",
              "description": "从8顶点12棱计算交点，构造浸没凸多面体，处理顶点/棱退化。",
              "score": 25,
              "evaluation_focus": "几何建模",
              "scoring_hint": "高分：具体到棱相交计算与去重；中分：泛述裁剪；低分：未构造多面体。"
            },
            {
              "sub_criteria": "体积与第一矩积分公式",
              "description": "采用四面体化对多面体做体积与第一矩精确累加，输出r(V,θ)。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出四面体体积与质心累加思路；中分：仅体积；低分：数值网格体素近似。"
            },
            {
              "sub_criteria": "数据结构与文件格式设计",
              "description": "定义网格节点、r与导数张量存储（HDF5/NPZ）及元数据（坐标系、单位、变换矩阵）。",
              "score": 20,
              "evaluation_focus": "数据建模",
              "scoring_hint": "高分：含元数据与版本；中分：仅存数值；低分：无结构化存储。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "根查找算法选择与稳定性",
              "description": "为V(γ,θ)采用双分或牛顿带界限的混合方案，保证全域收敛与速度。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：描述初值、终止条件、失败回退；中分：单一算法；低分：无明确策略或不收敛。"
            },
            {
              "sub_criteria": "并行化与批处理效率",
              "description": "按油箱与网格点独立并行；批量矢量化计算交点与体积以提升吞吐。",
              "score": 25,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：多核/分布式与矢量化并举；中分：仅多进程；低分：串行实现无说明。"
            },
            {
              "sub_criteria": "插值与导数计算精度",
              "description": "选择双线性/双三次样条，校验插值误差与中心差分导数一致性。",
              "score": 25,
              "evaluation_focus": "数值精度",
              "scoring_hint": "高分：报告插值误差与导数收敛；中分：仅实现插值；低分：误差大或无验证。"
            },
            {
              "sub_criteria": "边界与退化处理",
              "description": "对V=0/V_cap、θ=0、平面穿顶点等情形采取特判并与解析结果比对。",
              "score": 20,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：含单元测试对比；中分：仅特判；低分：导致NaN/崩溃。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "几何裁剪与四面体化正确性",
              "description": "实现稳健的平面-棱相交、顶点去重、凸多面体三角化/四面体化并通过一致性检查。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：有单元测试和体积守恒；中分：基本可跑偶现错误；低分：拓扑错误或崩溃。"
            },
            {
              "sub_criteria": "根查找与误差控制实现",
              "description": "编码体积残差≤1e-6 m^3的终止条件，失败回退到稳健法。",
              "score": 20,
              "evaluation_focus": "数值实现",
              "scoring_hint": "高分：容错与日志完备；中分：有终止无回退；低分：无误差控制。"
            },
            {
              "sub_criteria": "插值API与导数接口",
              "description": "提供f_i(m,θ)返回r与近似导数，双线性/双三次可选，含输入校验与外推策略。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：类型注解、边界处理、速度优化；中分：功能可用但粗糙；低分：缺导数或不稳。"
            },
            {
              "sub_criteria": "数据存储与元数据一致性",
              "description": "HDF5/NPZ中保存网格、r、∂r、坐标与单位、变换矩阵，版本与校验哈希。",
              "score": 25,
              "evaluation_focus": "工程规范",
              "scoring_hint": "高分：含校验与读取校验；中分：仅保存核心数据；低分：读写不兼容或丢元数据。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "解析对比验证（θ=0基准）",
              "description": "以θ=0时h=V/(ab)与z=base+h/2的解析质心对比误差并报告统计（max/mean）。",
              "score": 30,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：误差≤1e-4 m并给出分布；中分：报告但略超阈；低分：未对比或误差大。"
            },
            {
              "sub_criteria": "极端V与θ稳定性测试",
              "description": "在V≈0,V≈V_cap, θ≈±θ_max处检查数值稳定性与无非物理跳变。",
              "score": 25,
              "evaluation_focus": "稳健性",
              "scoring_hint": "高分：曲线连续光滑；中分：轻微噪声；低分：出现NaN/不连续。"
            },
            {
              "sub_criteria": "插值误差与导数一致性评估",
              "description": "随机网格点留出交叉验证插值误差；比较差分导数与数值扰动梯度的一致性。",
              "score": 25,
              "evaluation_focus": "数值评估",
              "scoring_hint": "高分：提供误差区间与一致性系数；中分：定性说明；低分：无评估。"
            },
            {
              "sub_criteria": "存储与性能报告",
              "description": "给出6×K×L数据规模、文件大小、离线耗时与在线查询延迟统计。",
              "score": 20,
              "evaluation_focus": "工程度量",
              "scoring_hint": "高分：量化到ms/点与MB；中分：粗略范围；低分：无报告。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务 3（优化问题构造与求解策略）旨在把题目中第二、第三与第四问的控制目标与操作约束精确定式化为可求解的离散时域优化问题并给出可执行的求解流程与算法选择：输入为离散时刻序列上的结构与参数数据（飞行器不载质量 M 与质心 c0、6 个油箱的几何中心 R_i 与尺寸 a_i,b_i,c_i、容量与密度ρ、每通道最大流率 U_i 与箱间拓扑允许矩阵 A、发动机耗油 D(t)、俯仰角 θ(t) 及预计算或可调用的油箱内液心映射 f_i(V,θ) 和其导数）；决策变量在每一秒 t 包括每箱向发动机的直接供油速率 s_i(t)、箱间转移速率 τ_{i→j}(t)、箱内剩余质量 m_i(t)、以及用于表达離散约束的二进制指示 y_i(t) 和启动指示 start_i(t)（或采用时间块化的等价整数变量）；质量守恒以差分方程 m_i(t+1)=m_i(t) − Δt[ s_i(t)+Σ_j τ_{i→j}(t) ] + ΔtΣ_k τ_{k→i}(t) 强制，流量变量受非负性、单通道上界、箱剩余油量限制（例如 s_i(t) ≤ m_i(t)/Δt）与拓扑矩阵 A 约束；并发与最短开启时长通过 y_i 与 start_i 的线性逻辑约束实现（例如 s_i(t) ≤ U_i·y_i^eng(t)，Σ y_i^eng(t) ≤ 2，start_i(t) ≥ y_i(t)−y_i(t−1) 且对任一 start_i(t)=1 要求 Σ_{τ=t}^{t+59} y_i(τ) ≥ 60），发动机需求以 Σ_i s_i(t) ≥ D(t) 表示（允许超额排放）；整体质心由 c(t) = [M c0 + Σ_i m_i(t)·r_i(m_i(t),θ(t))]/[M+Σ_i m_i(t)] 给出，目标函数统一采用引入上界变量 δ 并最小化 δ（对所有 t 强制 ||c(t)−c_ref(t)||_2 ≤ δ），从而将 min_t max_t ||·||_2 转化为单目标约束问题；当 r_i 可视为关于 m 的仿射或常数时，上述二范数约束可写成二次锥（SOC）形式，问题为（混合整数）二次锥规划（MI-SOCP/ SOCP），推荐利用 MOSEK 或 CPLEX/Gurobi（若用二范数改为分量无穷范数则可完全转为 MILP）；当 r_i 为非线性的查表函数或需要导数时，建议采用顺序线性化/顺序二次规划（SQP）策略：在每次迭代用当前轨迹从 f_i 获得 r_i 与近似导数并线性化非线性项，解得改进的（混合）凸子问题后更新直至收敛；若问题含整数变量则采用分层或启发式混合策略以降低组合复杂度：先求连续松弛（SOCP/NLP）以得到速率基线，再通过阈值化/贪心或整数本地搜索确定 y_i 的布尔模式（可采用时间块化以把 60 s 最小开停要求并入变量定义，显著减少整数维数），最后在固定整数方案下精调连续速率；对于纯连续非线性情形可直接用 IPOPT/CasADi 等 NLP 求解器（使用 f_i 的插值与数值导数或预存导数），并用多起点与线性化预热启动避免局部最优；为提高可求解性与数值稳定性，应引入小的二次正则化项或总变差惩罚以抑制频繁切换，并在模型中显式加入可行性松弛（例如允许短时额外排放）用于获得初始可行解；在实现层面推荐自动化建模（CVXPy/CasADi）联用专业求解器（Gurobi/CPLEX/MOSEK/IPOPT）并采用 warm-start、并行预计算 f_i 表和时间块化策略以控制规模（变量数量约为 O((6 + 边数)·T)），同时为求解性能提供两类可选路径：若需全局或高质量解用 MI-SOCP/MILP（时间可较长）；若要求较快且可接受局部解用顺序线性化+局部整数修复或纯 NLP；最终求解产出为逐秒的 s_i(t)、τ_{i→j}(t)、m_i(t)、标志变量 y_i(t)、目标值 δ 及用于评估的派生量（主油箱总供油时间序列和总供油量）；整个子任务应交付明确的数学程序化模型、可执行的求解脚本/配置（包含求解器与参数建议）、用于整数处理的启发式流程说明与复杂度/可扩展性评估。",
      "criteria": {
        "task_understanding": {
          "core_goal": "将第二/三/四问的质心偏差最小化目标转化为可求解的离散时域优化（MI-SOCP/MILP/NLP），并在并发与最短开启等约束下优化6个油箱的供油与转移速率。",
          "expected_output": "逐秒的最优解序列：s_i(t), τ_{i→j}(t), m_i(t), y_i(t), start_i(t) 与目标上界 δ；主油箱总供油曲线与总量；求解脚本/配置（如CVXPy/CasADi + Gurobi/MOSEK/IPOPT）；求解日志与可行性报告。",
          "key_inputs_constraints": "输入：M,c0,R_i,a_i,b_i,c_i,ρ,U_i,A,D(t),θ(t),f_i(V,θ)；约束：质量守恒 m_i(t+1)=m_i(t)−[s_i+Στ]Δt+ΣτΔt；并发 Σ y_i^eng≤2、Σ y_i^sup≤3；最短开启60 s：Σ_{τ=t}^{t+59} y_i(τ)≥60 当 start_i(t)=1；速度上界与库存约束 s_i(t)≤min(U_i,m_i/Δt)；发动机需求 Σ s_i(t)≥D(t)；拓扑 A 限制 τ_{i→j}。",
          "modeling_type": "优化+仿真",
          "role_in_pipeline": "作为建模流程的求解核心：在子任务1的离散物理模型与数据预处理之后，向后为问题2/3/4产出控制序列与评估指标；依赖前序的参数读取/单位校验与液心映射 f_i，后续用于结果可视化与验证。",
          "assumptions": "Δt=1 s；若 f_i 非线性则采用顺序线性化或SQP近似；若无整数可行初值，先解连续松弛获得基线并整数修复；排放无限制但不负成本；箱1与6对发动机直供 U_i=0。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "目标函数识别：质心偏差 δ 的 min max（二范数/SOCP）",
              "description": "准确从第二/三/四问抽象出统一的 min_t max_t ||c(t)-c_ref(t)||_2，并指出用上界变量 δ 与 SOC 约束 ||·||_2≤δ 的等价转化。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：给出 δ 与SOC形式并区分 c_ref 为理想质心或 c0；中分：写出δ但未给SOC细式；低分：将目标误写为时间和或未显式max。"
            },
            {
              "sub_criteria": "约束识别：并发≤2/3与最短开启60 s",
              "description": "明确两类并发（向发动机与总供油）与60 s最短开启，用 y_i、start_i 表达。",
              "score": 25,
              "evaluation_focus": "约束提炼",
              "scoring_hint": "高分：两并发均区分且给出起停逻辑；中分：只给一个并发或无起停逻辑；低分：忽略并发或最短时长。"
            },
            {
              "sub_criteria": "供油拓扑与流率上界",
              "description": "识别 U_i、A 矩阵、s_i≤U_i、τ_{i→j}≤U_{i→j}、1/6不可直供发动机（U_1=U_6=0）。",
              "score": 20,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：区分直供与转移并对1/6限制作出；中分：只写统一上界；低分：未体现拓扑。"
            },
            {
              "sub_criteria": "发动机需求与可排放",
              "description": "Σ_i s_i(t)≥D(t) 且允许超额排放（无欠供）。",
              "score": 20,
              "evaluation_focus": "业务理解",
              "scoring_hint": "高分：清楚“≥”与排放含义；中分：写成“=”但说明可放宽；低分：用“≤”或混淆含义。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "统一三问到单一优化范式",
              "description": "将第二/三/四问复述为统一决策集与约束，仅替换 c_ref(t)（理想质心/ c0）与第三问的初始油量为变量。",
              "score": 35,
              "evaluation_focus": "抽象表达",
              "scoring_hint": "高分：清楚列出差异化元素；中分：提到差异但不系统；低分：分别描述无统一。"
            },
            {
              "sub_criteria": "变量与时间粒度（Δt=1 s）",
              "description": "逐秒的 s_i(t), τ_{i→j}(t), m_i(t), y_i(t), start_i(t) 与 δ。",
              "score": 30,
              "evaluation_focus": "精确定义",
              "scoring_hint": "高分：变量全集与域完备；中分：缺1-2类变量；低分：时间或变量粒度不一致。"
            },
            {
              "sub_criteria": "质心映射 r_i 与 θ(t) 的处理",
              "description": "复述 r_i(m,θ) 接口；平飞用简化式，俯仰时调用 f_i(V,θ)/线性化。",
              "score": 35,
              "evaluation_focus": "物理连接",
              "scoring_hint": "高分：分别说明平飞与俯仰两种实现；中分：只提接口；低分：忽略 θ 依赖。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "r_i 线性化/插值假设的合理性",
              "description": "阐明使用仿射近似或表插的误差预期与对 δ 的影响控制。",
              "score": 35,
              "evaluation_focus": "数理假设",
              "scoring_hint": "高分：说明误差界或重线性化策略；中分：笼统可近似；低分：无交代。"
            },
            {
              "sub_criteria": "可行性松弛与排放设定",
              "description": "提出小松弛变量/惩罚，确保 Σ s≥D(t) 不可行时仍能出解；排放不计成本或轻惩罚。",
              "score": 25,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：量化惩罚或上界；中分：仅口头；低分：无可行性对策。"
            },
            {
              "sub_criteria": "最短开启60 s的时间块化",
              "description": "假设以时间块变量代替逐秒 y_i 以降维，并说明对精度的影响。",
              "score": 20,
              "evaluation_focus": "复杂度控制",
              "scoring_hint": "高分：给出块大小与映射关系；中分：仅提块化；低分：无任何策略。"
            },
            {
              "sub_criteria": "第三问初始油量边界与总余量≥1 m^3",
              "description": "明确 m_i(0)∈[0,m_i^cap] 且末时 Σ m_i(T)≥ρ·1 m^3。",
              "score": 20,
              "evaluation_focus": "约束设定",
              "scoring_hint": "高分：质量-体积换算准确；中分：缺换算；低分：遗漏该约束。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "差分动力学与库存上限",
              "description": "给出 m_i(t+1)=m_i(t)−Δt[s_i+Στ]+ΔtΣτ，配 0≤m_i≤m_i^cap 与 s_i,τ 排空上界。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：含 s_i≤m_i/Δt 与转出总量≤m_i/Δt；中分：缺其一；低分：式子错误。"
            },
            {
              "sub_criteria": "并发与逻辑线性化（大M）",
              "description": "s_i≤U_i y_i^eng, Σ y_i^eng≤2；供油并发 Σ y_i^sup≤3；start_i 与60 s覆盖约束。",
              "score": 30,
              "evaluation_focus": "混合整数建模",
              "scoring_hint": "高分：逻辑完整且避免弱M；中分：部分逻辑；低分：未线性化或错误。"
            },
            {
              "sub_criteria": "SOCP/MILP 可解形式与范数选择",
              "description": "当 r_i 仿射时以 SOC 约束；若改无穷范数转 MILP 的替代方案与利弊。",
              "score": 20,
              "evaluation_focus": "形式化选择",
              "scoring_hint": "高分：清楚两种等价化；中分：只提其一；低分：不可解表述。"
            },
            {
              "sub_criteria": "多任务差异化约束集",
              "description": "第二问固定 m_i(0)；第三问 m_i(0) 变量与末余量；第四问 c_ref=c0 且 θ(t) 随时变。",
              "score": 20,
              "evaluation_focus": "任务映射",
              "scoring_hint": "高分：逐项列清差异；中分：漏1项；低分：未区分任务。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "求解器与问题类别匹配（MI-SOCP/MILP/NLP）",
              "description": "根据 r_i 性质选择 Gurobi/CPLEX/MOSEK 或 IPOPT，并说明范数与锥的设置。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：匹配准确并给关键参数（gap/时间限）；中分：仅列名称；低分：不匹配。"
            },
            {
              "sub_criteria": "顺序线性化/SQP与收敛流程",
              "description": "描述线性化 r_i(m,θ) 的迭代流程、停止准则与信赖域/正则。",
              "score": 30,
              "evaluation_focus": "数值优化",
              "scoring_hint": "高分：含容差与最大迭代；中分：无准则；低分：无流程。"
            },
            {
              "sub_criteria": "整数维数控制与启发式修复",
              "description": "时间块化、连续松弛基线、阈值化/局部搜索确定 y_i，再定速率精调。",
              "score": 20,
              "evaluation_focus": "复杂度控制",
              "scoring_hint": "高分：提供具体阈值或邻域定义；中分：仅概述；低分：忽略。"
            },
            {
              "sub_criteria": "可行性与数值稳定（松弛、正则、warm-start）",
              "description": "加入小二次正则/TV惩罚抑制切换，warm-start 与失败回退策略。",
              "score": 20,
              "evaluation_focus": "工程稳健性",
              "scoring_hint": "高分：给出惩罚系数范围或启停；中分：泛述；低分：无措施。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "自动化建模实现（CVXPy/CasADi）",
              "description": "将 SOC、逻辑约束、差分方程以向量化方式编码，模块化第二/三/四问切换。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：提供可复用函数接口与单元测试要点；中分：脚本化但耦合；低分：伪代码。"
            },
            {
              "sub_criteria": "液心映射 f_i 接口与线性化钩子",
              "description": "实现 f_i(V,θ) 与其导数/差分近似接口，支持查表与插值。",
              "score": 25,
              "evaluation_focus": "接口设计",
              "scoring_hint": "高分：含插值阶与边界处理；中分：仅返回值；低分：硬编码常量。"
            },
            {
              "sub_criteria": "数据与单位校验、拓扑与并发检查",
              "description": "读取参数并做单位一致性、缺失值、A矩阵与并发约束的程序化校验。",
              "score": 25,
              "evaluation_focus": "数据工程",
              "scoring_hint": "高分：运行前自动断言与报错；中分：仅打印警告；低分：无校验。"
            },
            {
              "sub_criteria": "性能配置与可复现实验",
              "description": "求解器参数、时间限制、gap、随机种子、并行预计算 f_i 表的实现。",
              "score": 20,
              "evaluation_focus": "工程实践",
              "scoring_hint": "高分：参数可配置且记录；中分：固定参数；低分：无记录。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "目标值 δ 与可行性报告",
              "description": "输出 δ、可行性松弛使用情况、约束活跃度（并发/最短开启触碰率）。",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：量化活跃约束百分比；中分：只报 δ；低分：无指标。"
            },
            {
              "sub_criteria": "主油箱总供油曲线与 D(t) 对比",
              "description": "在第四问绘制 Σ主箱 s_i 与 D(t)；统计超供/欠供区间与总量。",
              "score": 25,
              "evaluation_focus": "可视化与检验",
              "scoring_hint": "高分：给出面积或总差值；中分：仅给图；低分：未对比。"
            },
            {
              "sub_criteria": "三问差异化指标与合规性",
              "description": "第二问平飞误差；第三问末余量≥1 m^3 验证；第四问相对 c0 的最大偏差解释。",
              "score": 25,
              "evaluation_focus": "合规检查",
              "scoring_hint": "高分：逐项过检并量化；中分：口头说明；低分：遗漏某一问。"
            },
            {
              "sub_criteria": "敏感性与稳健性（θ(t)、U_i、D(t) 扰动）",
              "description": "报告对小幅扰动的 δ 变化或可行性变化，说明策略稳定性。",
              "score": 20,
              "evaluation_focus": "稳健评估",
              "scoring_hint": "高分：至少1种扰动实验；中分：定性讨论；低分：无分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4目标是将先前得到的物理/优化模型成果工程化为在不确定性和实时约束下可实施、可验证且具有鲁棒性的供油控制方案：其范围包括（1）定义并量化关键不确定源（发动机耗油曲线 D(t) 的偏差与波动、俯仰角 θ(t) 的测量噪声与延迟、泵/阀的响应延时与流率误差、油密度与初始油量的不确定性等）；（2）设计并实施系统性的鲁棒性评估流程——采用蒙特卡洛模拟与场景采样生成若干扰动样本集，按每个样本回放系统动态（用差分质量守恒与已部署的油箱液心映射或其代理模型）计算关键性能指标（例如每秒质心与目标/基准质心的最大欧氏偏差、违反并发/速率/最短开启时间约束的频率、总供油量与任务结束剩余油量等），并输出分布性统计量与尾部风险（例如95/99百分位）。基于评估结果制定并比较若干鲁棒优化策略的实现路径（最坏情况/极大化最小裕度的 min-max 方案、基于场景的二阶段鲁棒优化、或概率约束/机会约束以保证在给定置信水平下满足质心偏差与供油需求），明确定量的保守化手段（例如对流率上界与发动机需求做紧缩/预留裕度、在质心约束中加入可选的紧急排放或对称开启策略）。在此基础上设计在线滚动时域控制（MPC）方案以实现实时闭环：规定MPC的时间窗口与步长建议（例如窗口 60–300 s、步长 1 s）、决策变量（每秒每箱直接供油速率 s_i、箱间转移 τ_{i→j}、必要时的分段二进制或时间块化决策以满足“最短开启60 s”的约束）、约束集（流率上下界、拓扑并发限制、质量守恒、任务结束最小剩余油量或其它安全包）及目标（如最小化未来窗口内质心最大偏差或加权和，加上切换惩罚以减少频繁开启/关闭）；处理整数约束的工程方案包括时间块化（以60 s为基本单元）或连续松弛加阈值化的两阶段方法，确保MPC可在实时性约束下求解并通过 warm-start、增量求解与并行化预计算加速。为满足实时计算要求，明确在线模型选型：使用离线预计算的油箱体积→质心查表（HDF5存储，双线性/三次插值并提供局部导数）或用轻量代理模型（小型神经网、多项式回归或逐箱局部线性模型）以替代复杂几何计算，并在MPC中使用这些近似模型；为提高鲁棒性推荐在MPC中加入约束收紧（constraint tightening）与快速故障处理逻辑（如当传感器故障或执行器无法响应时触发对称供油或紧急排放预案）。实现与验证流程须包括：离线回放验证（在附件数据集上对比无扰动与扰动情形）、广泛蒙特卡洛仿真报告、若可行则在高保真仿真器或硬件在环 (HIL) 环境中做闭环试验；并在每一步生成自动化测试用例与可复现的结果日志。在线自适应校准策略应被指定为可选模块——采用递归最小二乘或贝叶斯更新在飞行中微调代理模型或查表数据以补偿建模误差。工程交付物应包括：详尽的鲁棒性评估报告（不确定性假设、场景描述、指标统计与建议的裕度）、MPC控制器配置文件（窗口、约束、目标权重、数值求解器与求解参数）、用于在线的轻量化模型或查表文件与调用API、验证脚本与测试用例、HIL 接口规范与故障应对流程、以及实现建议的软件栈（推荐 Python + NumPy/SciPy、CasADi/IPOPT 或 CVXPy + Gurobi/MOSEK，根据是否含整数选择求解器；HDF5 用于表格数据），并给出实时计算预算与验收标准（例如在目标硬件上 MPC 每步求解时间上限、最大允许质心偏差置信界、以及约束违规率上限），以保证该子任务产出可独立用于部署、验证和运维。",
      "criteria": {
        "task_understanding": {
          "core_goal": "在不确定性与实时约束下对飞行器油箱供油MPC控制方案进行鲁棒评估与在线优化，实现质心偏差最小化与约束满足的滚动优化与仿真评估",
          "expected_output": "蒙特卡洛鲁棒性评估报表（均值/95%-99%分位/尾部风险）、MPC配置文件（窗口/步长/权重/收紧参数）、在线查表或代理模型文件（HDF5/npz）、控制器代码与API、场景脚本与日志、对比图表（主油箱总供油与D(t)、质心偏差轨迹）、实时预算与验收标准",
          "key_inputs_constraints": "输入：D(t)耗油曲线、θ(t)俯仰角、ρ与M、R_i与a_i,b_i,c_i、U_i与拓扑、预计算f_i(V,θ)查表/代理；不确定性：D(t)偏差/噪声、θ(t)测量噪声/延迟、执行器滞后与流率误差、油密度/初始油量不确定；约束：并发≤2（发动机）、总供油箱数≤3、最短开启60 s、速率与容量上界、Σ s_i(t)≥D(t)；实时：MPC步长1 s、窗口60–300 s、每步求解时间上限",
          "modeling_type": "评价+优化+仿真",
          "role_in_pipeline": "作为工程化与验证环节：在子任务1的离散物理模型与子任务2的r(V,θ)查表、子任务3的优化定式化之后，构建鲁棒性评估、场景采样与在线MPC控制实现，并产出部署所需配置与接口；后续对接HIL与运维监控。",
          "assumptions": "目标硬件可在每步≤200 ms内完成求解；查表f_i精度满足质心误差≤1e-3 m；若整数优化超时，采用时间块化或连续松弛+阈值两阶段法。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "不确定源识别（D(t)偏差、θ(t)噪声/延迟、执行器滞后、ρ与初始油量）",
              "description": "是否完整列出并量化关键不确定性对质心偏差与约束可行性的影响通道，含统计特性或区间。",
              "score": 35,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：给出分布/区间与幅值范围并映射到模型变量；中分：列举但缺少量化；低分：遗漏>2个关键源或无量化。"
            },
            {
              "sub_criteria": "实时约束与MPC窗口/步长需求",
              "description": "明确1 s步长与60–300 s窗口对求解规模与时限的影响，并提出时间预算。",
              "score": 25,
              "evaluation_focus": "系统理解",
              "scoring_hint": "高分：给出每步时间上限与变量规模估算；中分：仅口头说明实时性；低分：无实时性讨论。"
            },
            {
              "sub_criteria": "约束关键性（并发≤2、供油箱≤3、60 s最短开启）",
              "description": "识别离散并发与最短开启对控制可行性与计算难度的核心影响。",
              "score": 20,
              "evaluation_focus": "约束洞察",
              "scoring_hint": "高分：提出时间块化/逻辑约束处理思路；中分：仅复述约束；低分：遗漏任一关键约束。"
            },
            {
              "sub_criteria": "评价指标与验收标准（最大质心偏差、违规率、尾部风险）",
              "description": "锁定需报告的分布统计（均值/95%/99%）与违规率上限。",
              "score": 20,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：量化阈值与置信水平；中分：列指标无阈值；低分：无指标或不匹配目标。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "核心目标重述：质心最大偏差在不确定性下最小化",
              "description": "将min-max或机会约束目标用MPC滚动优化语句准确表述。",
              "score": 35,
              "evaluation_focus": "目标对齐",
              "scoring_hint": "高分：给出min δ或机会约束形式；中分：只描述最小化未形式化；低分：目标偏离。"
            },
            {
              "sub_criteria": "输出物明确列举（报表、MPC配置、查表/代理模型、日志）",
              "description": "按子任务要求罗列工程交付物与格式（HDF5/npz、图表）。",
              "score": 25,
              "evaluation_focus": "规范意识",
              "scoring_hint": "高分：含文件格式与API；中分：仅名称；低分：缺失关键交付物。"
            },
            {
              "sub_criteria": "输入依赖关系（f_i查表、物理模型、拓扑与U_i）",
              "description": "清楚说明依赖子任务1–3产物与如何被MPC/仿真调用。",
              "score": 20,
              "evaluation_focus": "流程衔接",
              "scoring_hint": "高分：列接口与数据流；中分：泛述依赖；低分：未提依赖。"
            },
            {
              "sub_criteria": "实时求解策略与超时降级",
              "description": "阐述warm-start、增量求解和超时应对（对称供油/阈值方案）。",
              "score": 20,
              "evaluation_focus": "工程表达",
              "scoring_hint": "高分：给出具体降级逻辑；中分：仅提到降级；低分：无降级策略。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "不确定性分布/区间设定与合理性",
              "description": "为D(t)、θ(t)、执行器滞后等给出高斯/区间或AR噪声假设及依据。",
              "score": 30,
              "evaluation_focus": "假设合理",
              "scoring_hint": "高分：数值范围与来源清晰；中分：给范围无依据；低分：无假设或不合理。"
            },
            {
              "sub_criteria": "查表/代理模型误差界与质心误差传播",
              "description": "假设f_i插值误差上界并推导对c(t)的影响或设置容差。",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：给出误差上限与传播不等式；中分：只给口径；低分：忽略此误差。"
            },
            {
              "sub_criteria": "实时计算预算假设（每步≤X ms）",
              "description": "设定可用算力与求解时间上限，支撑算法选择。",
              "score": 20,
              "evaluation_focus": "工程约束",
              "scoring_hint": "高分：给定具体预算并据此选解法；中分：模糊预算；低分：无预算。"
            },
            {
              "sub_criteria": "整数处理近似（时间块化或连续松弛）可接受性",
              "description": "说明近似导致的可行性/性能影响与保守化补偿。",
              "score": 25,
              "evaluation_focus": "近似分析",
              "scoring_hint": "高分：量化影响或给边界；中分：定性描述；低分：未说明。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "鲁棒评价框架与场景采样设计",
              "description": "定义蒙特卡洛/场景集规模、相关性建模与采样覆盖（95/99%）。",
              "score": 25,
              "evaluation_focus": "实验设计",
              "scoring_hint": "高分：给N与收敛/置信分析；中分：给N无依据；低分：无采样设计。"
            },
            {
              "sub_criteria": "MPC代价与约束（质心最大偏差、切换惩罚、收紧）",
              "description": "构造目标与约束收紧（constraint tightening）并发/最短开启表达。",
              "score": 30,
              "evaluation_focus": "优化建模",
              "scoring_hint": "高分：给出数学表达与收紧幅度；中分：仅口述；低分：遗漏关键项。"
            },
            {
              "sub_criteria": "在线模型选型（查表/代理）与接口",
              "description": "明确f_i(V,θ)插值或轻量代理（多项式/小型NN）及导数获取。",
              "score": 20,
              "evaluation_focus": "模型选择",
              "scoring_hint": "高分：给接口签名与误差目标；中分：仅说明使用；低分：未定义接口。"
            },
            {
              "sub_criteria": "故障/超时策略（对称供油、紧急排放）",
              "description": "定义触发条件、优先级与恢复逻辑。",
              "score": 25,
              "evaluation_focus": "控制逻辑",
              "scoring_hint": "高分：条件与动作量化；中分：描述但无阈值；低分：未给策略。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "实时求解器与加速（warm-start、增量求解、并行）",
              "description": "选择Gurobi/MOSEK/IPOPT等并给出加速配置与迭代预算。",
              "score": 30,
              "evaluation_focus": "算法选择",
              "scoring_hint": "高分：具体参数与时间测量；中分：泛化选择；低分：无求解器策略。"
            },
            {
              "sub_criteria": "整数约束工程化（时间块化/两阶段阈值）",
              "description": "给可实现流程，保证60 s最短开启并控制组合规模。",
              "score": 25,
              "evaluation_focus": "可实现性",
              "scoring_hint": "高分：提供伪代码或流程图；中分：文字描述；低分：未解决整数性。"
            },
            {
              "sub_criteria": "鲁棒/机会约束实现",
              "description": "实现min-max、场景法或机会约束（ε-水平）并说明计算权衡。",
              "score": 25,
              "evaluation_focus": "鲁棒优化",
              "scoring_hint": "高分：给ε与保守化量；中分：仅概念；低分：无实现细节。"
            },
            {
              "sub_criteria": "可行性与松弛变量设计",
              "description": "加入软约束与罚权重，确保初始可行与稳定性。",
              "score": 20,
              "evaluation_focus": "数值稳健",
              "scoring_hint": "高分：列松弛项与上限；中分：仅提到；低分：无松弛导致失败风险。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "查表/代理模型API与HDF5/npz读写",
              "description": "实现f_i(V,θ)双线性/样条插值与批量评估、导数可选输出。",
              "score": 30,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：含单元测试与误差阈值；中分：功能可用无测试；低分：接口不统一或错误。"
            },
            {
              "sub_criteria": "MPC控制器代码与配置（窗口、步长、权重、收紧）",
              "description": "可参数化配置，支持warm-start与日志记录。",
              "score": 25,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：配置驱动+CLI；中分：硬编码参数；低分：不可复现。"
            },
            {
              "sub_criteria": "蒙特卡洛与场景回放管线",
              "description": "支持并行仿真、固定随机种子与结果汇总（95/99分位）。",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：多核/分布式与统计报告；中分：串行可跑；低分：无统计聚合。"
            },
            {
              "sub_criteria": "实时性能测试与超时降级实现",
              "description": "基准测试每步耗时与触发对称供油/紧急排放逻辑。",
              "score": 20,
              "evaluation_focus": "性能验证",
              "scoring_hint": "高分：给出时间分布与阈值触发日志；中分：仅平均值；低分：未测试。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "鲁棒性统计（质心偏差分布、95/99分位、违规率）",
              "description": "给出关键指标分布及尾部风险，并解释原因。",
              "score": 35,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：图表+数值阈值对比；中分：均值+少量分位；低分：仅个例。"
            },
            {
              "sub_criteria": "策略对比（min-max/场景/机会约束与收紧幅度）",
              "description": "横向比较不同鲁棒策略的性能-保守性权衡。",
              "score": 25,
              "evaluation_focus": "对比分析",
              "scoring_hint": "高分：统一指标与显著性结论；中分：定性比较；低分：无对比。"
            },
            {
              "sub_criteria": "实时性与可部署性结论",
              "description": "报告MPC每步耗时、超时率与是否满足预算与验收标准。",
              "score": 20,
              "evaluation_focus": "部署评估",
              "scoring_hint": "高分：满足上限并给置信界；中分：接近上限或偶发超时；低分：频繁超时。"
            },
            {
              "sub_criteria": "关键失败模式与改进建议",
              "description": "识别触发对称供油/紧急排放场景并提出参数微调建议。",
              "score": 20,
              "evaluation_focus": "诊断洞察",
              "scoring_hint": "高分：定位根因并量化改进幅度；中分：泛化描述；低分：无诊断。"
            }
          ]
        }
      }
    }
  }
}