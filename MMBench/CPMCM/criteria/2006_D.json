{
  "task_id": "2006_D",
  "problem": "请回答如下问题：\n问题一：设考生数N已知，在满足Y2条件下，说老师数M至少分别应为多大，才能做到任两位学生的“面试组”都没有两位以及三位面试老师相同的情形。\n问题二：请根据Y1～Y4的要求建立学生与面试老师之间合理的分配模型，并就N＝379，M＝24的情形给出具体的分配方案（每位老师面试哪些学生）及该方案满足Y1～Y4这些要求的情况。\n问题三：假设面试老师中理科与老师各占一半，并且要求每位学生接受两位文科与两位理科老师的面试，请在此假设下分别回答问题一与问题二。\n问题四：请讨论考生与面试老师之间分配的均匀性和面试公平性的关系。为了保证面试的公平性，除了组织者提出的要求外，你们认为还有哪些重要因素需要考虑，试给出新的分配方案或建议。",
  "subtask": {
    "1": {
      "subtask": "子任务1 的目标是把问题形式化为一个可检验的、以理论可行性为核心的数学判断与度量框架：将老师集合视为顶点、每位考生的4位面试老师视为一个大小为4的超边，从而得到一个4-均匀超图模型；输入为考生数 N、教师数 M（可选：教师的学科分组或对某些配对/配对禁忌的额外约束），输出为（1）判断在不允许任两位学生的面试组共享两位或三位老师（即任意老师对在所有学生中最多出现一次）的情况下 M 是否足够的解析结论与检验方法；（2）用于衡量和约束 Y1–Y4 的一组明确代数恒等与可计算指标以作为后续构造或优化的基准。具体工作步骤与方法为：先给出决策变量和派生量的精确定义——对 s=1..N, i=1..M 定义二元变量 x_{s,i}∈{0,1}（表示学生 s 是否由老师 i 面试），老师度 r_i := Σ_s x_{s,i}（每位老师面试的人数），老师对共现次数 λ_{ij} := Σ_s x_{s,i} x_{s,j}（i<j）；证明并列出必然成立的线性恒等式 Σ_i r_i = 4N、Σ_{i<j} λ_{ij} = 6N 以及对每个 i 有 Σ_{j≠i} λ_{ij} = 3 r_i；基于“每个学生产生6个老师对”的计数直接导出避免任意两个学生共享≥2名老师所必须满足的计数不等式 6N ≤ C(M,2)=M(M−1)/2，从而给出解析下界 M ≥ (1 + √(1 + 48N))/2，并说明在整数意义下的判定公式 M ≥ ceil((1 + √(1 + 48N))/2)（同时注意 M≥4 的显然下界）；说明在存在文/理分组且每个学生必须恰好由2文+2理老师面试的情形中，基于同样的“每生6对”计数该必要下界形式不变，但需要额外接受 λ 矩阵在同科/跨科三类边上分别满足各自的和（文文对总和=N、理理=N、文理=4N），并据此可计算各类对的平均值用于可行性快速评估。为衡量 Y1–Y4 给出可计算指标：Y1 用 r_i 的最大偏差或方差 Var(r) = (1/M)Σ_i (r_i − 4N/M)^2；Y2 用重复区块数 count_duplicates = |{s<s' : Σ_i x_{s,i} x_{s',i}=4}|（或强制约束 Σ_i x_{s,i} x_{s',i} ≤ 3）；Y3 可用学生对间共享≥2老师的计数 S_≥2（可通过辅助上界计算 Σ_{i<j} C(λ_{ij},2) 来快速估计，因每对老师 i,j 在 λ_{ij} 次共现中会产生 C(λ_{ij},2) 个被该对共同面试的学生对，而任一学生对共享 t 位老师会在该和中被计入 C(t,2)），Y4 用 λ_{ij} 的分布特征（均值 λ̄ = 6N / C(M,2)、方差 Var(λ), 最大值 max_{i<j} λ_{ij}）或希望的两档约束 λ_{ij} ∈ {L, L+1} 的可行性检查。最后明确给出一套可执行的检查流程：输入 N、M（及可选学科分组/禁忌），先计算理论下界并判断 M 是否满足 6N ≤ C(M,2)；若不满足，报出不可实现“零两人或三人重合”的结论并提供上述指标作为度量基准；同时计算平均 r=4N/M 与平均 λ̄ 以作为后续分配目标的目标值并验证整除及行和一致性（即是否存在整数 r_i、λ_{ij} 满足 Σ_i r_i=4N、Σ_{i<j} λ_{ij}=6N 与 Σ_j λ_{ij}=3 r_i），这些代数与计数检验、平均值与方差指标以及 C(λ) 上界计算构成本子任务的全部输出和方法学基础；所需方法工具仅为组合计数、基础代数与简单图论概念（无需求解具体分配），可用基础计算器、电子表格或任意数学软件进行速算与可行性判定。",
      "criteria": {
        "task_understanding": {
          "core_goal": "判断 M 是否足够（解析下界证明）并评估以 4-均匀超图（x_{s,i}, r_i, λ_{ij}）为基础的 Y1–Y4 代数指标",
          "expected_output": "解析结论（M 下界公式与可行性布尔），变量定义与恒等式证明（Σ_i r_i=4N、Σ_{i<j} λ_{ij}=6N、Σ_{j≠i} λ_{ij}=3 r_i），Y1–Y4 的可计算度量集（Var(r), count_duplicates, S_≥2, λ 分布统计），可执行检查流程和快速可行性检验步骤（电子表格/伪码可运行）",
          "key_inputs_constraints": "N: 整数（考生数）；M: 整数（教师数，M≥4）；可选学科分组: 文/理组标签或禁止配对列表；约束：对每 s 有 Σ_{i} x_{s,i}=4 且 x_{s,i}∈{0,1}；目标：不允许任两生共享 ≥2 名老师（强制或作为可行性目标）",
          "modeling_type": "评价",
          "role_in_pipeline": "作为可行性判断与度量标准构建环节（先于具体分配算法），依赖输入 N、M 与学科分组，后续供分配构造/优化模块使用；直接依赖：组合计数与代数推导；后续依赖：分配构造/整数规划或启发式分配"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并定义决策变量 x_{s,i} 与派生量 r_i、λ_{ij}",
              "description": "明确把老师集合视为顶点、每生视为大小为4的超边，并给出二元变量 x_{s,i}、老师度 r_i 与老师对共现 λ_{ij} 的定义",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：清晰给出 x_{s,i}、r_i、λ_{ij} 的数学定义并说明含义；中分：变量定义存在但符号或下标轻微混淆；低分：未给出 x_{s,i} 或 r_i/λ_{ij} 定义或定义不一致"
            },
            {
              "sub_criteria": "识别必要恒等式 Σ_i r_i=4N 与 Σ_{i<j} λ_{ij}=6N",
              "description": "指出并解释来自计数的两个关键恒等式及其推导思路（每生产生4次老师度与6个老师对）",
              "score": 25,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：正确写出并用条理清晰的计数理由证明两式；中分：写对等式但证明略显不严谨；低分：等式错误或未解释计数来源（4N/6N）"
            },
            {
              "sub_criteria": "识别可行性必要条件 6N ≤ C(M,2) 与下界公式",
              "description": "识别避免任两生共享≥2名老师所需的计数不等式并给出解析下界 M ≥ ceil((1+√(1+48N))/2)",
              "score": 25,
              "evaluation_focus": "解析判断",
              "scoring_hint": "高分：准确给出不等式并推导到整数下界；中分：给出不等式但未写出整数化 ceil 形式；低分：不等式或下界推导错误"
            },
            {
              "sub_criteria": "识别学科分组对 λ 矩阵的约束（文文/理理/文理和分配）",
              "description": "在有文/理分组时识别额外约束：文文对总和= N、理理= N、文理=4N（或等效分配）并说明用于可行性评估的影响",
              "score": 20,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：正确列出三类对的和并说明与总体 6N 的分解关系；中分：提及分组但数值和关系表达不全；低分：忽略或错误分解"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "用“4-均匀超图”复述任务并明确输出项（解析结论与检验方法）",
              "description": "把原问题复述为构造或检验一个4-均匀超图的可行性问题，并列出要输出的解析结论与检验方法",
              "score": 35,
              "evaluation_focus": "表达准确性",
              "scoring_hint": "高分：准确复述为4-均匀超图可行性判断并列出输出（下界、恒等式、度量、检查流程）；中分：表达大体正确但遗漏某些输出项；低分：未用4-均匀超图表述或遗漏关键输出"
            },
            {
              "sub_criteria": "复述需证明的恒等式 Σ_{j≠i} λ_{ij}=3 r_i 与其解释",
              "description": "明确指出并解释每位老师涉及的恒等行和关系（每位老师在其 r_i 次面试中与其他老师共现共计3 r_i）",
              "score": 35,
              "evaluation_focus": "数理理解",
              "scoring_hint": "高分：正确复述等式并给出每生产生的3个对与 r_i 的联系；中分：复述正确但解释模糊；低分：等式错误或解释与变量不符"
            },
            {
              "sub_criteria": "复述对 Y1–Y4 的度量目标（Var(r)、count_duplicates、S_≥2、λ 分布）",
              "description": "清楚复述如何用 Var(r)、重复区块数、Σ C(λ_{ij},2) 上界和 λ 分布统计来衡量 Y1–Y4",
              "score": 30,
              "evaluation_focus": "指标复述",
              "scoring_hint": "高分：准确列出每个 Y 与对应指标；中分：列出指标但部分对应关系模糊；低分：遗漏重要指标或对应错误"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "假设 x_{s,i}∈{0,1} 且 Σ_i x_{s,i}=4（每生恰4位老师）",
              "description": "明确把二元与行和约束作为基础假设并说明其必要性（模型的离散性）",
              "score": 25,
              "evaluation_focus": "模型假设",
              "scoring_hint": "高分：明确写出且讨论边界情形（如 M<4）；中分：写出假设但未讨论边界；低分：未声明二元或行和约束"
            },
            {
              "sub_criteria": "假设教师可区分且无额外个体禁忌（或明确列出禁忌）",
              "description": "说明教师作为不同顶点、可区分；若存在配对禁忌或学科标签，应在假设中列出",
              "score": 25,
              "evaluation_focus": "约束声明",
              "scoring_hint": "高分：明确讨论有/无禁忌两种情形并说明影响；中分：提及但未详述；低分：忽略教师可区分或禁忌事项"
            },
            {
              "sub_criteria": "假设 M ≥ 4 与 N、M 为整数，并说明 N 的规模效应",
              "description": "声明显然下界 M≥4 与整性假设，并讨论 N 的增大对下界 sqrt 项的影响",
              "score": 25,
              "evaluation_focus": "可行性前提",
              "scoring_hint": "高分：写出 M≥4 并讨论 N 增大如何影响 ceil 下界；中分：写出 M≥4 但未讨论规模效应；低分：忽略整性或下界条件"
            },
            {
              "sub_criteria": "对文/理分组场景假设分组大小与配对统计可计算",
              "description": "在有分组情形下假设给出各组人数或比例，或说明在缺失具体分组信息时如何用平均值近似",
              "score": 25,
              "evaluation_focus": "分组假设",
              "scoring_hint": "高分：明确列出文/理组输入要求并说明平均化策略；中分：提出分组但未说明输入格式；低分：忽略分组情形"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "严格推导并给出恒等式 Σ_i r_i=4N、Σ_{i<j} λ_{ij}=6N、Σ_{j≠i} λ_{ij}=3 r_i",
              "description": "用计数法逐步证明三条恒等式，阐明每一步的组合计数理由（每生4次度、每生6对、每老师每次面试带来3个共现计数）",
              "score": 30,
              "evaluation_focus": "严格证明",
              "scoring_hint": "高分：逐步骤证明并无逻辑漏洞；中分：证明逻辑基本正确但阐述欠清晰；低分：证明错误或缺失关键计数步骤"
            },
            {
              "sub_criteria": "由 Σ_{i<j} λ_{ij} 推出计数不等式 6N ≤ C(M,2) 并解析得 M 下界",
              "description": "通过 λ_{ij} 每项至少为0且单次共现上限为1（避免 ≥2 重合）得不等式并解出整数下界公式",
              "score": 25,
              "evaluation_focus": "解析下界",
              "scoring_hint": "高分：严格导出 M ≥ ceil((1+√(1+48N))/2) 并说明 M≥4；中分：导出不等式但整数化环节欠详；低分：下界推导错误"
            },
            {
              "sub_criteria": "在文/理分组下构建 λ 矩阵分块约束（文文、理理、文理的和）",
              "description": "明确写出分块和的代数关系（文文总和=N，理理=N，文理=4N）并指出用于可行性快速评估的均值计算",
              "score": 20,
              "evaluation_focus": "分组建模",
              "scoring_hint": "高分：正确建立分块和并给出均值公式；中分：关系部分正确但数值注释不足；低分：分组分解错误"
            },
            {
              "sub_criteria": "为 Y1–Y4 明确给出可计算指标及其代数形式（Var(r)、count_duplicates、S_≥2、λ̄、Var(λ)）",
              "description": "列出每个 Y 的数学量化指标与快速上界估计方法（例如 Σ C(λ_{ij},2) 与 S_≥2 的关系）",
              "score": 25,
              "evaluation_focus": "指标设计",
              "scoring_hint": "高分：准确给出所有指标及计算公式并解释互相关系；中分：给出指标但缺少上界或关系说明；低分：指标不完整或公式错误"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "给出可执行的可行性检查流程（先验 6N ≤ C(M,2) 检验）",
              "description": "设计输入 N、M（及分组）后的一步步检验流程：计算 6N 与 C(M,2)、平均 r、平均 λ̄、整性与行和一致性检验",
              "score": 25,
              "evaluation_focus": "可执行性",
              "scoring_hint": "高分：给出清晰步骤（顺序与判定阈值）；中分：步骤完整但判定条件不够明确；低分：流程缺失或不具可执行性"
            },
            {
              "sub_criteria": "提出整数一致性检验（是否存在整数 r_i、λ_{ij} 满足行和与列和）",
              "description": "说明如何检验是否存在整数解向量 r 和 λ（Σ_i r_i=4N, Σ_{i<j} λ_{ij}=6N, Σ_j λ_{ij}=3 r_i）作为必要但非充分条件",
              "score": 25,
              "evaluation_focus": "整数可行性",
              "scoring_hint": "高分：给出具体线性代数/整性检验步骤或构造性检查；中分：提出检验但未给细节；低分：未提或误导性检验"
            },
            {
              "sub_criteria": "给出快速估算 S_≥2 的上界方法（Σ_{i<j} C(λ_{ij},2)）并解释其保守性",
              "description": "展示如何用 λ_{ij} 的分布计算 Σ C(λ_{ij},2) 作为学生对共享≥2老师的上界并说明重计和保守性来源",
              "score": 25,
              "evaluation_focus": "上界估算",
              "scoring_hint": "高分：计算公式正确并解释重计问题与何时达到紧界；中分：公式正确但解释不足；低分：公式或解释错误"
            },
            {
              "sub_criteria": "给出在不满足零两人重合时的判定建议（报告不可行并返回指标）",
              "description": "说明若 6N > C(M,2) 的情形应如何报告不可实现并输出 Var(r)、λ̄、最大 λ 等作为替代参考",
              "score": 25,
              "evaluation_focus": "可操作建议",
              "scoring_hint": "高分：给出清晰替代输出并说明如何用这些指标指导增补 M 或放宽约束；中分：给出输出但缺少应用建议；低分：无替代方案"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "提供可在电子表格/计算器实现的伪码或公式（计算 6N、C(M,2)、r 平均、λ̄）",
              "description": "给出可复制的单元格公式或伪码，用于速算下界、平均度与平均共现数 λ̄",
              "score": 40,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：提供完全可复制单元格公式或简短伪码；中分：提供伪码但需补充细节；低分：无可执行公式或伪码含糊"
            },
            {
              "sub_criteria": "提供检验 Σ_i r_i=4N 与 Σ_{i<j} λ_{ij}=6N 的示例计算（数值示例）",
              "description": "给出一个数值实例（可用 N=379,M=24 作演示）计算相关和并说明结论",
              "score": 30,
              "evaluation_focus": "复现性",
              "scoring_hint": "高分：示例数值计算正确并能运行；中分：示例正确但部分步骤需人工补充；低分：示例错误或缺失"
            },
            {
              "sub_criteria": "提供 λ 分布统计与 Var(r) 的计算实现建议（可用电子表格或简单脚本）",
              "description": "给出计算 Var(r)、Var(λ)、max λ 等的具体实现要点与公式以便快速评估 Y1 与 Y4",
              "score": 30,
              "evaluation_focus": "自动化",
              "scoring_hint": "高分：提供明确公式/脚本段示例；中分：提供思路但无具体实现；低分：未提供实现建议"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "解释下界判定结果及其在实际分配中的含义（例如 M 不足时的策略）",
              "description": "分析若 M 不满足下界时应如何调整：增派教师、放宽“零两人重合”要求或允许部分重复，并量化影响",
              "score": 30,
              "evaluation_focus": "结果解释",
              "scoring_hint": "高分：给出量化建议并说明代价与权衡；中分：给出定性建议；低分：无实际调整建议"
            },
            {
              "sub_criteria": "用 Var(r)、max λ、S_≥2 解释对 Y1–Y4 的满足程度与优先级",
              "description": "说明如何用 Var(r) 评估 Y1、用 count_duplicates 与 S_≥2 评估 Y2/Y3、用 λ̄/Var(λ) 与 max λ 评估 Y4，并给出阈值或参考尺度",
              "score": 30,
              "evaluation_focus": "指标解读",
              "scoring_hint": "高分：给出明确阈值或判断规则并论述优先级；中分：指标对应清楚但阈值缺失；低分：不能将指标映射到具体要求"
            },
            {
              "sub_criteria": "在文/理分组情形下分析 λ 分块不一致的后果与修正措施",
              "description": "讨论若文文/理理/文理分配偏离均值时对可行性与公平性的影响，并提出调整策略（例如重平衡组内配对）",
              "score": 20,
              "evaluation_focus": "分组影响",
              "scoring_hint": "高分：分析给出具体修正措施并量化效果；中分：提出可能措施但无量化；低分：忽略分组影响"
            },
            {
              "sub_criteria": "给出后续分配或优化模块的输入规范（r_i 和 λ_{ij} 目标值与可接受差距）",
              "description": "建议将平均 r 与 λ̄ 作为目标值并给出允许波动范围（例如 r_i ∈ {⌊4N/M⌋,⌈4N/M⌉}，λ_{ij} ∈ {L,L+1}）供后续构造使用",
              "score": 20,
              "evaluation_focus": "工程可用性",
              "scoring_hint": "高分：提供具体范围与理由并与检查流程衔接；中分：给出范围但无充分理由；低分：无具体输入规范"
            }
          ]
        }
      }
    },
    "2": {
      "subtask": "子任务2（整数线性模型与目标函数设计）旨在把面试分配问题精确表述为一个可求解的混合整数线性规划（MILP）框架：输入为学生集合 S (|S|=N)、教师集合 T (|T|=M)、可选的教师学科标签与任何禁止配对或容量限制，输出为二元分配变量与一组可直接用于求解器的线性约束与目标项。具体如下：决策变量为 x_{s,i}∈{0,1}（学生 s 由教师 i 面试），衍生整数变量 r_i := Σ_{s∈S} x_{s,i}（教师 i 的工作量）、和对重变量 λ_{i,j} := Σ_{s∈S} y_{s,i,j}（教师对 i<j 在所有学生中共同出现的次数），以及为线性化而引入的中间二元变量 y_{s,i,j}∈{0,1}（表示学生 s 同时被分配给 i 与 j），其线性化约束为 y_{s,i,j} ≤ x_{s,i}, y_{s,i,j} ≤ x_{s,j}, y_{s,i,j} ≥ x_{s,i}+x_{s,j}-1。必须满足的硬约束包括：∀s Σ_{i∈T} x_{s,i} = 4（每位学生恰有4位面试老师）；若存在学科配比要求则为每位学生添加 ∀s Σ_{i∈文} x_{s,i} = 2, Σ_{j∈理} x_{s,j} = 2；教师容量约束 r_i ≤ cap_i（如有）；以及一致性恒等式 Σ_{i} r_i = 4N、Σ_{i<j} λ_{i,j} = 6N 与 ∀i Σ_{j≠i} λ_{i,j} = 3 r_i（后两者可作为约束或用于建模检验）。为实现 Y1–Y4 的软目标，提供可线性化的目标项选择并给出实现方式：A) 均衡教师负担（Y1）：最小化最大偏差 u subject to ∀i u ≥ r_i − ⌈4N/M⌉ and u ≥ ⌊4N/M⌋ − r_i，或最小化 Σ_i t_i 且 t_i ≥ r_i − μ, t_i ≥ μ − r_i（μ=4N/M）以用 L∞ 或 L1 近似代替二次方差；B) 均匀、尽量小的对重（Y4）：直接用变量 λ_{i,j} 并最小化其范围 v subject to ∀i<j v ≥ λ_{i,j} − L and v ≥ L − λ_{i,j}，或最小化 Σ_{i<j} w_{i,j} with w_{i,j} ≥ λ_{i,j} − λ̄ and w_{i,j} ≥ λ̄ − λ_{i,j}（λ̄ = 6N/C(M,2)）；也可强制 λ_{i,j} ∈ {L,L+1} 为硬约束以控制离散化；C) 尽量少的学生组完全相同（Y2）：为每对学生(s,s')定义 overlap_{s,s'} = Σ_i y_{s,s',i} 并用二元指示 z_{s,s'} ∈ {0,1} 线性化 z_{s,s'} ≥ (overlap_{s,s'} − 3)/1 （或直接禁止 overlap_{s,s'}=4 若需硬约束），在目标中以高权重惩罚 Σ_{s<s'} z_{s,s'}；D) 尽量少的两位或三位老师重复（Y3）：观察到学生对共享≥2 的总量可由 Σ_{i<j} C(λ_{i,j},2) 上界估计，在线性模型中可用二阶近似替代或直接惩罚 Σ_{i<j} p_{i,j} where p_{i,j} ≥ λ_{i,j} − 1 and p_{i,j} ≥ 0 来近似抑制高 λ 值；更直接的线性做法是限制每对上界 λ_{i,j} ≤ Λ_max。综合目标建议采用加权线性形式 min α·U_r + β·W_λ + γ·Σ z_{s,s'} + δ·Σ p_{i,j}，其中各辅助变量均已线性化，权重由组织者偏好指定；避免在主模型中使用二次项以保持 MILP 可解性。为降低规模与改善可解性，模型应支持两种实用化策略：一是先求解简化的“目标对重矩阵”小型 ILP（只决策 λ_{i,j} 与 r_i，约束 Σ_{i<j} λ_{i,j} = 6N 与 Σ_j λ_{i,j} = 3 r_i 并最小化对重方差或范围），随后在第二阶段把 λ_{i,j} 固定为目标值并求解学生-教师分配（x,y），二是用 L1/L∞ 替代方差并优先使用上界限制减少变量（例如若强制 λ_{i,j}∈{L,L+1}，则不必为每一对保留连续目标），并在模型中选择性地对学生对 (s,s') 只对小批量高风险组引入 z 变量以避免 O(N^2 M) 变量膨胀。实现细节与工具建议：采用商用/开源 MILP 求解器（Gurobi/CPLEX 或 CBC）与面向表达的建模语言（Python+Pyomo 或 Gurobi Python API），在建模时尽量使用稀疏索引并启用求解器的启发式与并行线程；为处理规模问题，可设置时间限、分层求解（先可行解然后逐步改善目标）、以及局部修复（对卡住区域构造小规模 MILP 子问题）。交付物应包括：完整的 MILP 模型文件（变量、线性约束、目标与权重参数）、线性化说明（y 与 z 的引入规则和 big‑M 取值说明）、参数化权重建议与可替换的目标项（方差→L1/L∞ 替换）、以及对输入数据格式的规范（学生清单、教师清单、学科标签、cap_i、禁止对表）。该模型应能在给定输入下直接由求解器运行以产生二元分配矩阵 x_{s,i} 或报告不可行并返回违例约束以便进一步放松。",
      "criteria": {
        "task_understanding": {
          "core_goal": "构建并优化一个面试分配的混合整数线性规划（MILP）以最小化对重与负担不均衡并满足4-均匀超图约束",
          "expected_output": "MILP模型文件/公式说明（变量x,y,r,λ及线性约束）、可直接求解的目标函数与权重、可行性/不可行性报告、示例求解器输入格式与参数说明",
          "key_inputs_constraints": "输入：学生集合S(|S|=N)、教师集合T(|T|=M)、学科标签（可选）、容量cap_i与禁配表。硬约束：∀s Σ_i x_{s,i}=4；若分科则Σ_{i∈文}x_{s,i}=2且Σ_{i∈理}x_{s,i}=2；y线性化：y_{s,i,j}≤x_{s,i}, y_{s,i,j}≤x_{s,j}, y_{s,i,j}≥x_{s,i}+x_{s,j}-1；定义r_i=Σ_s x_{s,i}，λ_{i,j}=Σ_s y_{s,i,j}；一致性Σ_i r_i=4N，Σ_{i<j} λ_{i,j}=6N，∀i Σ_{j≠i} λ_{i,j}=3r_i；可选上界λ_{i,j}≤Λ_max与禁止完全相同组。",
          "modeling_type": "优化",
          "role_in_pipeline": "作为求解阶段的核心优化建模与执行环节：前序依赖子任务1的可行性判定与指标设定；后序任务为生成具体分配x_{s,i}、进行公平性与稳健性分析并用于实务排程或再优化"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别4-均匀超图与MILP优化目标",
              "description": "是否将“每生4位老师”抽象为4-均匀超图并识别需用MILP优化Y1–Y4（负担均衡、对重均匀、避免完全相同组、抑制≥2共享）。",
              "score": 30,
              "evaluation_focus": "建模思维",
              "scoring_hint": "高分：明确4-均匀超图+四类目标；中分：识别部分目标或图模型但不完整；低分：未区分问题为组合优化或忽略关键目标。"
            },
            {
              "sub_criteria": "关键约束识别与计数恒等式",
              "description": "是否点明Σ_i r_i=4N，Σ_{i<j} λ_{i,j}=6N，Σ_{j≠i} λ_{i,j}=3r_i及学科配比、容量与禁配硬约束。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：三条恒等式与配比/容量/禁配齐全；中分：恒等式缺1条或配比含糊；低分：未给出核心恒等式。"
            },
            {
              "sub_criteria": "对重λ与学生对风险识别",
              "description": "是否将Y3/Y4映射为λ_{i,j}分布控制与S_≥2风险，并提出λ上界或均衡化思路。",
              "score": 40,
              "evaluation_focus": "问题抽象",
              "scoring_hint": "高分：提出λ范围/上界与均衡指标；中分：仅提最小化总λ偏差；低分：未把Y3/Y4转化为λ控制。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "以MILP术语复述硬约束",
              "description": "用x,y,r,λ清晰重述：每生4个、分科2+2（若有）、y的线性化、容量cap_i与禁配。",
              "score": 30,
              "evaluation_focus": "规范表达",
              "scoring_hint": "高分：等式与不等式完整且无歧义；中分：缺1–2条或符号不统一；低分：口头化、不可编译。"
            },
            {
              "sub_criteria": "复述一致性与计数恒等式角色",
              "description": "说明Σ_i r_i、Σ_{i<j} λ与行和=3r_i在模型中的必要性（约束或校验）。",
              "score": 30,
              "evaluation_focus": "逻辑严谨",
              "scoring_hint": "高分：解释可作硬约束或模型校验；中分：仅列公式；低分：未提或错解。"
            },
            {
              "sub_criteria": "复述目标函数与权重",
              "description": "以线性形式重述α·U_r+β·W_λ+γ·Σz+δ·Σp，说明各项对应Y1–Y4与可调权重。",
              "score": 40,
              "evaluation_focus": "目标设计",
              "scoring_hint": "高分：给出U_r/W_λ/z/p定义与可替代L1/L∞；中分：仅列符号无线性化；低分：未形成可求解目标。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "可解性与下界假设",
              "description": "明确采用6N≤C(M,2)等必要下界仅作参考，MILP负责在给定N,M下求解或证不可行。",
              "score": 30,
              "evaluation_focus": "可行性判断",
              "scoring_hint": "高分：区分必要与充分并声明不可行返回；中分：混淆必要/充分；低分：无可行性说明。"
            },
            {
              "sub_criteria": "分科与容量假设",
              "description": "若存在文/理与cap_i，假设输入给定且完备；无则默认无限容量并不启用分科约束。",
              "score": 30,
              "evaluation_focus": "假设清晰",
              "scoring_hint": "高分：列出两种情形与约束切换；中分：只提其一；低分：忽略导致模型不一致。"
            },
            {
              "sub_criteria": "规模与近似策略假设",
              "description": "说明为控制规模使用L1/L∞替代方差、λ∈{L,L+1}或λ≤Λ_max、分两阶段求解。",
              "score": 40,
              "evaluation_focus": "求解策略",
              "scoring_hint": "高分：列明何时启用两阶段与近似；中分：含糊提及；低分：未考虑规模可解性。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "变量定义x_{s,i}, y_{s,i,j}, r_i, λ_{i,j}",
              "description": "精确定义域与索引集合（含i<j），并避免冗余变量。",
              "score": 25,
              "evaluation_focus": "模型严谨",
              "scoring_hint": "高分：域与索引清楚；中分：偶有索引歧义；低分：变量未定义或重复。"
            },
            {
              "sub_criteria": "线性化与一致性约束实现",
              "description": "正确写出y三不等式、r与λ的聚合、三条计数恒等式与学生/分科等式。",
              "score": 35,
              "evaluation_focus": "线性化能力",
              "scoring_hint": "高分：所有关键约束可直接输入求解器；中分：漏1–2条；低分：含非线性或错误关系。"
            },
            {
              "sub_criteria": "Y1–Y4目标的线性化设计",
              "description": "U_r（L∞或L1）与W_λ（范围或L1偏差）、z禁止完全相同组、p抑制λ高值或λ≤Λ_max。",
              "score": 40,
              "evaluation_focus": "目标成型",
              "scoring_hint": "高分：每项均线性化且互不冲突；中分：部分线性化或未给权重；低分：目标含二次项不可解。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "两阶段与暖启动策略",
              "description": "先解r,λ小模型均衡化，再固定λ进入x,y分配；给出固定/松弛细节与可行流转。",
              "score": 35,
              "evaluation_focus": "算法设计",
              "scoring_hint": "高分：阐明接口与一致性检查；中分：仅口头描述；低分：无策略导致大规模难解。"
            },
            {
              "sub_criteria": "参数与权重调优",
              "description": "说明α,β,γ,δ与Λ_max的调参流程与优先级（先硬约束后软目标）。",
              "score": 30,
              "evaluation_focus": "求解调参",
              "scoring_hint": "高分：给出分层或灵敏度方案；中分：仅建议范围；低分：未提供调参思路。"
            },
            {
              "sub_criteria": "可行性检测与冲突分析",
              "description": "不可行时报告违例约束/冲突集，指示放松项（如λ上界或禁配）。",
              "score": 35,
              "evaluation_focus": "诊断能力",
              "scoring_hint": "高分：提供具体不可行集输出流程；中分：仅提示不可行；低分：无诊断。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "建模API正确性（Pyomo/Gurobi）",
              "description": "变量、约束、目标在代码中可实例化；索引与域与数学描述一致。",
              "score": 40,
              "evaluation_focus": "代码可靠性",
              "scoring_hint": "高分：可直接运行小样例；中分：小错但易修；低分：结构性错误或不可运行。"
            },
            {
              "sub_criteria": "规模控制与稀疏实现",
              "description": "采用稀疏索引、生成y与z的子集、时间限与并行设置。",
              "score": 30,
              "evaluation_focus": "工程实现",
              "scoring_hint": "高分：显式稀疏+限时配置；中分：部分采用；低分：全量O(N^2 M)导致爆炸。"
            },
            {
              "sub_criteria": "输入输出与配置参数化",
              "description": "支持学生/教师列表、学科、cap_i、禁配、权重与Λ_max的外部配置与日志输出。",
              "score": 30,
              "evaluation_focus": "可用性",
              "scoring_hint": "高分：参数化完整且可复现实验；中分：部分硬编码；低分：无配置接口。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "Y1–Y4指标回代计算",
              "description": "从解x,y,r,λ计算Var(r)、λ分布、重复组计数、S_≥2估计并与目标对比。",
              "score": 40,
              "evaluation_focus": "结果验证",
              "scoring_hint": "高分：指标齐全且与目标一致；中分：缺少1–2项；低分：未验证。"
            },
            {
              "sub_criteria": "可行性与边界达成度",
              "description": "报告是否满足学生=4、分科2+2、λ上界、禁配等硬约束及边界紧性。",
              "score": 30,
              "evaluation_focus": "合规检查",
              "scoring_hint": "高分：列出所有硬约束余量；中分：只做总体说明；低分：忽略硬约束核查。"
            },
            {
              "sub_criteria": "敏感性与权重影响",
              "description": "分析α,β,γ,δ或Λ_max变动对r与λ分布、重复率的影响并给建议。",
              "score": 30,
              "evaluation_focus": "稳健性分析",
              "scoring_hint": "高分：给出至少两组对比；中分：定性描述；低分：无分析。"
            }
          ]
        }
      }
    },
    "3": {
      "subtask": "子任务3（K4 打包与构造实现）：构造性地将给定的目标边权矩阵 λ*（顶点为 M 位老师、每条无向边 e=(i,j) 的整数重 λ*_{ij} 表示该老师对需共同出现的次数）分解为恰好 N 个 K4（每个 K4 对应一名学生的 4-老师面试组）的具体算法实现与工程化流程，其输入为：老师集合 T（带可选学科标签）、目标边重矩阵 λ*（非负整数、满足 ∑_{i<j} λ*_{ij} = 6N 且每顶点行和为 3·r_i）、以及可选的 K4 组成约束（例如每个 K4 必须为 2 文+2 理）；输出为：N 个不重复的四元组列表（或带重复计数的四元组集合）使其对应边重之和精确等于 λ*（或在可接受公差内将残余降为零），并生成详尽的运行日志与诊断信息；为保证可实现性与可修复性，流程按如下步骤执行并在每一步提供明确的技术要求：1) 初始检查与预处理：验证 λ* 的必要整除条件（每顶点行和为 3 r_i，总和为 6N，且所有 λ*_{ij} ≥ 0），将 λ* 转换为“残量多重图”数据结构（稀疏邻接表或位集矩阵，记录每条边的剩余重）；若存在学科分组，构建分组索引以便后续约束快速判断。2) 贪婪打包主循环：重复 N 次或直到残量多重图所有边重为零——每次选择构造一个 K4（四元组 S ⊂ T）；选择策略为启发式且可参数化：优先选取当前残量度（sum_j λ_res(v,j)）最大的顶点 v，然后在其邻居中寻找能与 v 组成三角形的顶点组合（即要求三个邻居两两之间也有剩余重），选取时优先满足边重较高的边、优先使得被选定顶点的剩余度均匀下降，并对等权选择或高权优先使用随机化打破平局；实现上用快速 clique-finding 子例程（基于邻接位集的位运算或 NetworkX/C++ 的小规模枚举）来找到可行四元组；若要求学科组合约束（如 2+2），在候选构造时仅考虑满足组别计数的候选集合；每确认一个 K4 即在 λ_res 上将其 6 条边权减 1 并记录该四元组为一个学生。3) 局部修复与 ILP 回溯：当贪婪步骤遇到死点（无法再找到合法 K4 但仍有剩余边）或在迭代末尾残量未清零时，从剩余边构成的小顶点子集 U（例如包含剩余边的顶点或其 k‑跳邻域，通常 k=1 或2，且 |U| 控制在 12–20 以内以保证可解性）抽取局部子问题；为该子问题构造精确整数线性规划：二元或非负整数变量 z_S 表示选择四元组 S⊂U 的次数，约束 ∀边 e within U: ∑_{S: e⊂S} z_S = λ_res(e)，目标可为最小化 ∑_S z_S（或零目标仅求可行解），外加若干二次或对称性破坏约束（如限制 z_S ≤ 1 若要求四元组不重复），并加入学科构成约束（保证每 S 符合 2+2）或优先使用高重边的 S；求解器建议采用 Gurobi/CPLEX（或开放源 CBC）并设置时间上限和可行性优先策略；若局部 ILP 无解，可扩大 U 或进行若干次随机重新抽样再试。4) 局部搜索与交换优化：为了改善解的全局质量或减少四元组重复、控制每位老师的四元组分布，可在已构造的四元组集合上执行交换操作（two‑opt / k‑opt）：随机选取若干四元组子集，尝试通过重配其老师构成新的四元组集合以消除边残量冲突或降低某些边的超额使用；采用模拟退火或禁忌搜索策略引入接受差解的概率以避免局部极小，重复若干次直到收敛或达到时间限。5) 并行化与分块策略：为提高效率，允许把老师集合按块划分并并行执行局部 K4 搜索（每个线程处理块内边优先），随后针对跨块剩余边执行合并修复（用 ILP 或跨块贪婪融合）；实现时需对跨块冲突维护一个共享残量表并用原子操作或批次同步更新以保证一致性。6) 工程细节与参数：使用稀疏邻接表或位集矩阵表示图、使用高效的位运算或 C/C++ 子模块来实现 clique 检索以提升性能；设置关键参数包括随机重启次数 R（例如 50–200）、贪婪候选数量阈值 cands（如保留前 10 候选四元组按启发值排序）、局部 ILP 最大顶点数 Umax（如 16–20）、ILP 时间限（例如 30–300 秒），以及总运行时间上限（根据资源，单实例建议数分钟至数小时）。7) 终止、验证与输出：算法结束时输出 N 个四元组（若允许重复则包含重复计数），并验证每条原始目标边的累计使用次数是否等于 λ*（或报告残差和不可行结构）；同时生成诊断报告：每位老师的四元组计数 r_i、每对老师的实际出现次数 λ̂_{ij}、未能打包的残余边列表（若有）、每次 ILP 调用的可行性日志以及用于审计和后续修复的可执行补救方案。8) 推荐工具链与实现建议：主程序可用 Python（NetworkX 用于图操作、numpy 用于矩阵运算）结合性能关键模块用 C++/Cython 实现 clique 查找，ILP 子问题用 Gurobi/CPLEX（或 Pyomo+CBC）求解，同时记录随机种子以便结果可复现；在实现中务必模块化贪婪打包、局部 ILP 修复、交换优化和并行协调四个子模块以便逐步调试与性能调优。该子任务的成功判据为：在指定时间限内产生 N 个合法四元组且最终 λ̂ 与 λ* 完全匹配（或残差在预定容差内），并输出完整的可审计日志与可复现的随机化记录以供后续分析。",
      "criteria": {
        "task_understanding": {
          "core_goal": "题目要考什么——按题型拆解关键能力：构造性地将给定目标边权矩阵 λ* 分解为恰好 N 个 K4（四元组）并实现可工程化的打包/修复流程（包含贪婪打包、局部 ILP 回溯与交换优化），输出可验证的四元组集合与完整日志。",
          "expected_output": "N 个四元组列表（或带重复计数的四元组集合）、最终实际边重矩阵 λ̂_{ij}、每位老师计数 r_i、残差报告（λ̂−λ*）、运行日志与 ILP 调用记录、可复现代码模块（贪婪、局部 ILP、交换优化、并行协调）",
          "key_inputs_constraints": "1) 目标边重矩阵 λ*（M×M 对称非负整数，满足 Σ_{i<j} λ*_{ij}=6N 及每顶点行和为 3 r_i）；2) 教师集合 T（M，含可选学科标签如文/理）与 N（整数）；3) 可选 K4 约束（如每 K4 必须为 2 文+2 理）、最大局部 ILP 顶点数 Umax、随机种子与时间上限；4) 求解器可用性（Gurobi/CPLEX/CBC）与资源限制。",
          "modeling_type": "混合（构造/优化/算法实现）",
          "role_in_pipeline": "作为子任务3，位于 λ* 设计（来自子任务2 的目标边权矩阵）之后、最终分配与验证之前；直接依赖于子任务2 输出的 λ* 与学科标签，向后提供四元组分配、λ̂ 验证与日志供部署、结果分析与可能的二轮优化使用。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "验证 λ* 的必要计数条件（Σ_{i<j} λ*=6N 与每顶点行和为 3 r_i）",
              "description": "检验并列出 λ* 满足 Σ_{i<j} λ*_{ij}=6N、每顶点行和为 3 r_i，及 λ*_{ij}≥0 的必要条件，作为可行性初筛。",
              "score": 30,
              "evaluation_focus": "数理推导",
              "scoring_hint": "高分：准确验证且给出数值检验与结论；中分：列出公式但未数值核验；低分：未提及或检验错误。"
            },
            {
              "sub_criteria": "识别 K4 可行性上界（局部度与三角形需求造成的死点风险）",
              "description": "说明构造 K4 需要三角结构并识别高残量顶点、孤立边等会导致贪婪失败的图结构风险。",
              "score": 25,
              "evaluation_focus": "结构识别",
              "scoring_hint": "高分：列举具体死点类型并给出检测方法；中分：泛泛描述风险；低分：未识别或错误判断。"
            },
            {
              "sub_criteria": "注明学科分组与 2 文+2 理 约束的影响",
              "description": "明确指出若有学科标签，K4 构造必须满足组内边分布限制并可能减少可行四元组数。",
              "score": 20,
              "evaluation_focus": "约束识别",
              "scoring_hint": "高分：定量描述影响并示例；中分：定性说明；低分：忽略学科约束。"
            },
            {
              "sub_criteria": "识别计算资源与求解器限制（时间上限、ILP 尺度）",
              "description": "评估局部 ILP 尺度（Umax）、重启次数与并行化需求对可行性与运行时间的约束。",
              "score": 25,
              "evaluation_focus": "工程考量",
              "scoring_hint": "高分：给出具体资源估计与备选策略；中分：提及但不具体；低分：未考虑或不现实。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "准确复述目标：将 λ* 分解为 N 个 K4",
              "description": "用一句话明确重述目标：‘将给定 λ* 分解为 N 个 K4，每个 K4 对应一名学生，其 6 条边累计等于 λ*’。",
              "score": 25,
              "evaluation_focus": "目标表达",
              "scoring_hint": "高分：准确且含验证条件；中分：目标正确但未含累计边重条件；低分：目标表述模糊或错误。"
            },
            {
              "sub_criteria": "明确输入输出格式（λ*、四元组列表、日志、验证矩阵）",
              "description": "列出具体输入（λ*、教师标签、N）与输出（N 个四元组、λ̂、残差、r_i、日志）格式与类型。",
              "score": 25,
              "evaluation_focus": "接口定义",
              "scoring_hint": "高分：详列数据结构与示例格式；中分：列出项但不够结构化；低分：遗漏关键输出项。"
            },
            {
              "sub_criteria": "复述工程流程步骤（贪婪→局部 ILP→交换→并行）",
              "description": "按顺序描述主流程：预检→贪婪打包→局部 ILP 修复→交换优化→终止与验证。",
              "score": 25,
              "evaluation_focus": "流程把握",
              "scoring_hint": "高分：步骤全面且有判定条件；中分：步骤列出但缺条件；低分：流程不完整或顺序错乱。"
            },
            {
              "sub_criteria": "明确成功判据与可接受公差",
              "description": "复述成功标准（λ̂=λ* 或在容差内），以及可接受残差与日志需求。",
              "score": 25,
              "evaluation_focus": "验收标准",
              "scoring_hint": "高分：给出 λ̂ 完全匹配或明确容差与度量；中分：有原则性描述但无数值；低分：无验收标准。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "关于 λ* 的可分解性假设（存在 K4 分解或允许重复四元组）",
              "description": "明确假设 λ* 可被分解成 N 个 K4 或允许四元组重复计数并说明对算法的影响。",
              "score": 30,
              "evaluation_focus": "可行性假设",
              "scoring_hint": "高分：清晰说明并讨论两种情形影响；中分：说明但未分析影响；低分：未说明或矛盾假设。"
            },
            {
              "sub_criteria": "关于学科分组与 2 文+2 理 的可行性假设",
              "description": "若有学科约束，假设每类边权与顶点行和能满足 2+2 限制并说明检测方法。",
              "score": 20,
              "evaluation_focus": "约束假设",
              "scoring_hint": "高分：给出可检验条件并举例；中分：提出假设无检验；低分：忽略或不合理。"
            },
            {
              "sub_criteria": "关于局部 ILP 可解性与 Umax 的规模假设",
              "description": "假设局部子问题规模受控（如 Umax≤20），并说明选取理由与失败时的扩展策略。",
              "score": 25,
              "evaluation_focus": "规模假设",
              "scoring_hint": "高分：给出经验参数与回退方案；中分：给数值但无回退；低分：无规模控制。"
            },
            {
              "sub_criteria": "关于随机化与可复现性的假设（随机种子、重启次数）",
              "description": "假设可重复的随机化策略（固定种子、重启次数 R）及其对结果稳定性的作用。",
              "score": 25,
              "evaluation_focus": "随机性控制",
              "scoring_hint": "高分：指定随机种子与 R 并说明影响；中分：提到重启但无参数；低分：忽略随机性或无复现手段。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "残量多重图与数据结构设计（λ_res 表示、稀疏邻接表/位集）",
              "description": "阐述用稀疏邻接表或位集矩阵表示残量多重图 λ_res 及相应更新操作以支持高效查询与减重。",
              "score": 20,
              "evaluation_focus": "数据结构",
              "scoring_hint": "高分：给出具体结构与复杂度分析；中分：提出选择但无复杂度估计；低分：结构不适或未说明。"
            },
            {
              "sub_criteria": "贪婪打包启发式规则（选顶点 v、找三角形、优先高权边/均匀下降）",
              "description": "详细设计贪婪策略：选顶点优先级、候选四元组评分函数、随机化与平衡机制及学科过滤。",
              "score": 20,
              "evaluation_focus": "启发式设计",
              "scoring_hint": "高分：明确评分函数与候选筛选逻辑；中分：描述策略但缺细节；低分：策略笼统不可执行。"
            },
            {
              "sub_criteria": "局部 ILP 子问题的精确线性模型（变量 z_S、边约束、学科约束）",
              "description": "给出局部 ILP 的变量定义、边重平衡约束 ∑_{S:e⊂S} z_S=λ_res(e)、目标与对称性/重复约束说明。",
              "score": 25,
              "evaluation_focus": "ILP 建模",
              "scoring_hint": "高分：完整线性约束与变量说明并含求解参数；中分：核心约束齐全但缺对称性处理；低分：模型不完整或非线性成分未线性化。"
            },
            {
              "sub_criteria": "对称性破坏、学科构成与重复四元组约束的建模",
              "description": "说明如何用约束限制 z_S≤1、引入排序/代表性选择或学科计数约束以保证 2 文+2 理 等要求。",
              "score": 35,
              "evaluation_focus": "约束设计",
              "scoring_hint": "高分：提供可行的破坏对称性方法并量化效果；中分：方案可行但未量化；低分：未考虑或方案不可行。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "贪婪打包求解表现与启发式参数选择",
              "description": "说明贪婪循环终止条件、候选数量 cands、随机重启 R 的选择原则并给出预期成功率或经验值。",
              "score": 25,
              "evaluation_focus": "启发式求解",
              "scoring_hint": "高分：给出参数选择理由与经验成功率或实验数据；中分：给参数无理由；低分：无参数或不现实。"
            },
            {
              "sub_criteria": "局部 ILP 求解策略与参数（Umax、时间上限、优先可行性）",
              "description": "指定 ILP 求解器、时间限、可行性优先策略与当局部无解时的扩大或重抽样策略。",
              "score": 30,
              "evaluation_focus": "ILP 求解",
              "scoring_hint": "高分：具体参数与回退策略并有实例；中分：指定求解器但无容错策略；低分：无策略或不切实际。"
            },
            {
              "sub_criteria": "交换优化与局部搜索（two‑opt/k‑opt、模拟退火）",
              "description": "说明如何基于已构造四元组执行交换操作以降低残差、减少重复并说明接受准则与迭代停止条件。",
              "score": 25,
              "evaluation_focus": "局部优化",
              "scoring_hint": "高分：给出操作规则与退火/禁忌参数；中分：描述方法但无参数；低分：方法缺乏可实施细节。"
            },
            {
              "sub_criteria": "终止验证与正确性检查（验证 λ̂=λ* 或残差报告）",
              "description": "列出最终验证步骤：计算 λ̂、r_i、残差矩阵并定义可接受阈值与日志输出项。",
              "score": 20,
              "evaluation_focus": "验证检验",
              "scoring_hint": "高分：实现自动验证并产生详尽报告；中分：有验证但报告不全；低分：无验证或不报告残差。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "模块化实现与工具链（Python/NetworkX + C++/Cython + Gurobi）",
              "description": "代码应模块化（贪婪、ILP、交换、并行协调、验证），并说明所用库与版本、接口与输入输出格式。",
              "score": 30,
              "evaluation_focus": "代码结构",
              "scoring_hint": "高分：模块化且附依赖清单、示例输入输出；中分：代码可运行但耦合高；低分：不可运行或无说明。"
            },
            {
              "sub_criteria": "性能优化与并行化实现（位运算、块并行、原子/批次同步）",
              "description": "实现关键性能模块（位集 clique 查找）并说明并行策略、同步机制与预期加速比。",
              "score": 25,
              "evaluation_focus": "性能工程",
              "scoring_hint": "高分：有并行实现与性能测试数据；中分：提出并行策略无测试；低分：未考虑性能优化。"
            },
            {
              "sub_criteria": "可复现性与日志/随机种子控制",
              "description": "代码必须支持设置随机种子、记录运行日志、ILP 调用记录与最终诊断报告以便复现结果。",
              "score": 25,
              "evaluation_focus": "复现性",
              "scoring_hint": "高分：日志详尽且能通过种子复现；中分：部分日志或种子支持；低分：无日志或不可复现。"
            },
            {
              "sub_criteria": "鲁棒性测试与单元测试（单实例、边界情况、失败回退）",
              "description": "提供对关键函数的单元测试与端到端小规模测试，包括无解情形的错误处理与回退方案。",
              "score": 20,
              "evaluation_focus": "代码质量",
              "scoring_hint": "高分：包含覆盖边界情形的测试套件；中分：仅有少量测试；低分：无测试或错误处理缺失。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "正确性：λ̂ 与 λ* 的匹配度（残差检验）",
              "description": "报告并判断最终 λ̂_{ij} 是否与 λ*_{ij} 完全相等或在事先定义的容差内，计算总残差和最大单边残差。",
              "score": 40,
              "evaluation_focus": "正确性",
              "scoring_hint": "高分：λ̂=λ* 完全匹配；中分：总残差 ≤ 1%·6N 且解释原因；低分：残差显著或无残差报告。"
            },
            {
              "sub_criteria": "诊断指标：r_i 分布、λ̂ 分布、重复四元组数",
              "description": "提供每位老师的 r_i、λ̂ 的均值/方差/最大值与重复四元组计数并解释是否满足均衡与 Y1–Y4 指标倾向。",
              "score": 30,
              "evaluation_focus": "统计诊断",
              "scoring_hint": "高分：给出图表/表格并解释是否满足 Y1–Y4；中分：给数值无解释；低分：未提供或解释不足。"
            },
            {
              "sub_criteria": "运行日志与 ILP 调用报告（次数、可行/不可行记录、时间）",
              "description": "总结贪婪失败点、局部 ILP 的调用次数与可行率、每次 ILP 时间消耗以评估流程效率。",
              "score": 20,
              "evaluation_focus": "运行分析",
              "scoring_hint": "高分：完整调用日志并讨论瓶颈；中分：有部分日志无深入分析；低分：无日志或日志不完整。"
            },
            {
              "sub_criteria": "敏感性/鲁棒性分析（参数 R、Umax 对结果的影响）",
              "description": "对关键参数（重启次数 R、Umax、cands）运行敏感性试验并报告结果变化与推荐值。",
              "score": 10,
              "evaluation_focus": "鲁棒性",
              "scoring_hint": "高分：提供量化敏感性实验结果与建议参数；中分：定性讨论；低分：未做敏感性分析。"
            }
          ]
        }
      }
    },
    "4": {
      "subtask": "子任务4（评估、敏感性分析及评分公平性补救与制度化建议）旨在对任意给定的面试分配方案进行全面、可复现的质量与公平性验收：输入为（1）分配清单（每名学生对应的老师四元组及时间段）、（2）老师元数据（学科、可用时段、历年评分统计若有）、（3）学生协变量（高考成绩段、地域、性别等可选用于分层分析）、以及（4）若已进行面试则为评分数据；目标是以结构性指标衡量分配方案的静态公平性并以统计仿真与估计方法量化其对最终录取/排序结果造成的系统性偏差与不确定性，继而生成可操作的补救建议（包括分配微调策略、后验分数校正方案与审计阈值）并输出机器可读的诊断报告与决策规则；为实现该目标必须执行以下步骤：一、计算并记录结构性指标（教师负担分布的极差与方差、任意两位教师共同面试次数的均值/方差/最大值、学生组重复数、共享≥2位老师的学生对数及其上界估计），并对这些指标与可接受阈值进行比对；二、建立可用于仿真的评分生成模型（建议使用线性混合效应模型或多评委 Rasch 模型，形式化为 score_{s,i} = μ_s + α_i + β_{t(s)} + ε_{s,i}，其中 μ_s 为考生真实能力的潜变量、α_i 为老师固定或随机效应、β 可包含时段/题型等协变量），用历史评分或专家判例对先验与方差分量进行估计或设定；三、基于该生成模型用蒙特卡洛仿真（或贝叶斯后验预测）在当前分配下重复生成大量评分样本，计算每次仿真中最终排名/录取名单的分布、录取名单中老师效应集中度、以及个体考生的录取概率不确定性，从而量化分配对决策稳定性的影响；四、用仿真输出估计并检测异常老师（α_i 显著偏离群体均值）、评分一致性差异与时间段效应，制定明确触发规则（例如若某老师评分方差或偏差超出群体均值的 k 倍或某对老师共同出现次数超出 λ̄ 的预设上界则触发复核或重分配），阈值应作为可配置参数并在报告中给出推荐值与灵敏度区间；五、基于仿真结果设计并评估两类补救措施：A) 结构性微调（局部重分配算法，限定修改学生数与受影响老师数的上限以保证可操作性，优先调整导致最大偏差的若干边/老师；如需求解小规模最优化子问题，可调用整数规划求解器进行局部修复）；B) 评分后校正（用混合效应模型估计老师效应并对原始分数做事后标准化或贝叶斯校正，必要时采用锚定样本校验校正效果）；六、做系统性的敏感性分析：在若干情景（变动的老师可用性、允许的λ最大值、不同权重下的目标函数、不同 r_i 容忍度）下重复第（二）至（五）步，绘制关键指标随参数变化的响应曲线并标出稳健/脆弱区域；七、输出交付物：带结论性摘要的可视化诊断报告（结构指标表、仿真下的录取概率热图、异常老师/边的列表、建议的局部重分配方案与/或分数校正方案）、可执行的操作规则（触发阈值与复核流程）、可复现的代码与随机种子、以及用于后续迭代的度量仪表板规范；工具与方法建议为：以 R (lme4/brms/rstan) 或 Python (statsmodels/PyMC/Stan) 实现混合效应与贝叶斯建模、用并行化蒙特卡洛或 Bootstrap 进行仿真、用 Gurobi/CPLEX 或开源 CBC 作局部整数优化（如需重分配求解），并用标准可视化库生成报告；全部计算过程必须记录输入版本与随机种子以保证可复现性。完成该子任务的验收标准为：产生一份包含结构性指标评估、仿真量化的不确定性分析、明确的触发规则与至少一套经过仿真验证的补救方案（局部重分配与/或事后校正），并附带机器可读的诊断表与可执行代码，使决策者能够基于明确证据和可重复程序实施或拒绝建议。",
      "criteria": {
        "task_understanding": {
          "core_goal": "评估给定面试分配方案的结构性公平性，使用混合效应/ Rasch 评分生成模型进行蒙特卡洛仿真以量化不确定性，并基于仿真结果生成可操作的补救建议与触发规则",
          "expected_output": "结构性指标表（均衡度、λ分布、共享≥2计数等）、混合效应或Rasch模型估计结果、蒙特卡洛仿真产生的录取概率分布与不确定性报告、触发规则与局部重分配/事后校正建议、可复现代码与诊断日志",
          "key_inputs_constraints": "1) 分配清单：N个学生对应的4元老师集合（表格，必需）；2) 老师元数据：学科标签/可用时段/历史评分统计（结构化表）；3) 学生协变量：分层变量（高考成绩段/地域/性别，可选但建议提供）；4) 评分数据：若已面试，需提供逐老师逐学生原始评分；5) 约束：每学生4位老师、可能学科配比/容量/禁配对",
          "modeling_type": "评价+仿真+优化",
          "role_in_pipeline": "作为最终验证与质量控制环节，依赖前序的分配方案（子任务2/3的x或K4输出）、老师元数据与（若有）评分数据；输出供决策者实施局部重分配或事后分数校正，且可作为后续制度化触发规则的输入。"
        },
        "evaluation_criteria": {
          "问题识别": [
            {
              "sub_criteria": "识别并计算结构性指标（教师负担/λ分布/共享≥2计数）",
              "description": "检查是否识别并计算任务中要求的结构性指标：r_i分布、λ_{ij}均值/方差/最大值、学生组重复数、共享≥2位老师的学生对数及其上界估计。",
              "score": 25,
              "evaluation_focus": "指标选择",
              "scoring_hint": "高分：所有结构性指标均计算并与可接受阈值对比；中分：计算主要指标但缺少上界估计或部分统计量；低分：缺少关键指标或指标计算错误。"
            },
            {
              "sub_criteria": "识别偏差源与可触发风险点（异常老师/高λ对）",
              "description": "能否识别潜在引起系统性偏差的源头：异常偏倚老师、时间段效应、某些老师对λ_{ij}异常高等，并列出可触发复核的候选项。",
              "score": 25,
              "evaluation_focus": "风险识别",
              "scoring_hint": "高分：列出具体老师/对并给出统计证据（如α_i显著性或λ_{ij}超出λ̄+kσ）；中分：识别问题类别但证据薄弱；低分：未识别或识别无依据。"
            },
            {
              "sub_criteria": "识别数据与模型假设需求（评分生成模型/历史数据）",
              "description": "明确所需的评分生成模型类型（线性混合效应或Rasch）、所需历史数据与先验设置，并指出缺失数据对结果的潜在影响。",
              "score": 25,
              "evaluation_focus": "需求识别",
              "scoring_hint": "高分：明确列出所需数据与假设并评估可用性；中分：部分列出但未评估影响；低分：未描述具体数据或忽略缺失影响。"
            },
            {
              "sub_criteria": "识别可行的补救路径（局部重分配/事后校正/复核触发）",
              "description": "识别并优先列举可实施的补救措施：基于ILP的局部重分配、混合效应事后校正、触发复核的阈值策略等。",
              "score": 25,
              "evaluation_focus": "方案识别",
              "scoring_hint": "高分：给出多种补救路径并注明实施代价与预期效果；中分：提供至少一种可实施方案；低分：无具体补救建议或不切实际。"
            }
          ],
          "问题复述": [
            {
              "sub_criteria": "复述‘评估分配方案的结构性公平性’的目标与范围",
              "description": "能否准确复述本子任务的目标：对分配方案做静态结构性评估并量化其对录取决策的影响范围。",
              "score": 25,
              "evaluation_focus": "目标理解",
              "scoring_hint": "高分：用原任务关键词（结构性、公平性、分配方案、量化）明确目标和边界；中分：大体正确但遗漏关键量化或触发部分；低分：目标模糊或与任务不符。"
            },
            {
              "sub_criteria": "复述‘蒙特卡洛仿真与评分生成模型’在量化中的角色",
              "description": "是否说明用混合效应/ Rasch 模型作为评分生成机制，并通过蒙特卡洛仿真估计录取概率与不确定性。",
              "score": 25,
              "evaluation_focus": "方法识别",
              "scoring_hint": "高分：明确说明模型形式与仿真目的并给出关键参数需估计项；中分：说明仿真但对模型细节模糊；低分：未提及仿真或错误描述模型角色。"
            },
            {
              "sub_criteria": "复述‘触发规则与补救建议’的目标产出与执行条件",
              "description": "是否复述需要输出触发规则（例如α_i或λ_{ij}阈值）并说明何时应实施局部重分配或事后校正。",
              "score": 25,
              "evaluation_focus": "输出要求",
              "scoring_hint": "高分：明确触发逻辑与可配置阈值并说明执行限制；中分：有触发规则但缺配置细节；低分：未说明触发条件或建议不可执行。"
            },
            {
              "sub_criteria": "复述‘可复现性’与交付物（代码/日志/随机种子）要求",
              "description": "是否指出交付物包括可复现代码、随机种子、诊断日志和机器可读报告以便审计。",
              "score": 25,
              "evaluation_focus": "可复现性要求",
              "scoring_hint": "高分：明确列出代码、随机种子、日志与报告格式；中分：提到可复现但未列全要素；低分：忽略可复现性或交付物要求。"
            }
          ],
          "假设建立": [
            {
              "sub_criteria": "建立并陈述评分生成模型假设（混合效应或Rasch）",
              "description": "明确列出所选评分生成模型的假设：个体能力μ_s分布、老师效应α_i为随机或固定、误差结构与独立性假设等。",
              "score": 25,
              "evaluation_focus": "统计假设",
              "scoring_hint": "高分：详细陈述分布假设与方差组成并讨论合理性；中分：列出主要假设但未讨论合理性；低分：假设缺失或不合适。"
            },
            {
              "sub_criteria": "建立蒙特卡洛仿真假设与情景设计（样本数/变参）",
              "description": "说明仿真样本量、要变动的参数集（老师效应、评分方差、时间段效应等）与场景选择理由。",
              "score": 25,
              "evaluation_focus": "仿真设计",
              "scoring_hint": "高分：给出合理的仿真次数（如≥1000）与不同情景并说明选择；中分：仿真存在但场景不足；低分：无仿真或次数过少无法稳定估计。"
            },
            {
              "sub_criteria": "建立触发规则与阈值的统计依据假设",
              "description": "定义触发规则（例如α_i偏离群体均值超 kσ 或 λ_{ij} > λ̄ + kσ）并说明k的选取依据与灵敏度评估计划。",
              "score": 25,
              "evaluation_focus": "触发假设",
              "scoring_hint": "高分：给出量化阈值并计划灵敏度分析；中分：提出阈值但无量化依据；低分：阈值无说明或不具统计意义。"
            },
            {
              "sub_criteria": "建立局部重分配与事后校正的可行性假设",
              "description": "说明局部重分配受限于改动规模（修改学生数、影响老师数）与事后校正假定（老师效应可估计且可平移调整评分）。",
              "score": 25,
              "evaluation_focus": "可行性假设",
              "scoring_hint": "高分：量化改动上限并评估可行性与副作用；中分：描述改动但无量化；低分：忽视操作可行性或提出不可执行方案。"
            }
          ],
          "模型构建": [
            {
              "sub_criteria": "构建并估计混合效应或Rasch 评分生成模型",
              "description": "实现并说明混合效应（或Rasch）模型的建模细节：固定/随机效应选择、协变量纳入、参数估计方法及不确定度度量。",
              "score": 25,
              "evaluation_focus": "模型搭建",
              "scoring_hint": "高分：模型形式完整、参数估计方法明确并报告置信区间/后验；中分：模型搭建但报告有限；低分：模型不匹配任务或估计方法缺失。"
            },
            {
              "sub_criteria": "构建蒙特卡洛仿真管线并对录取概率进行估计",
              "description": "搭建仿真流程：从参数采样到生成score_{s,i}再到计算最终排名/录取名单与录取概率的完整管线。",
              "score": 25,
              "evaluation_focus": "仿真实现",
              "scoring_hint": "高分：仿真管线端到端可重复，输出录取概率分布与置信区间；中分：仿真可运行但缺少某些统计输出；低分：仿真实现不完整或无法复现。"
            },
            {
              "sub_criteria": "构建结构性微调（局部ILP）与事后校正模型",
              "description": "将局部重分配建模为小规模ILP或启发式，并明确事后校正的参数估计与实施步骤（例如基于α_i的分数调整）。",
              "score": 25,
              "evaluation_focus": "补救建模",
              "scoring_hint": "高分：给出可运行的ILP子问题与校正公式并测试可行性；中分：提出方法但未实现或验证；低分：无具体补救建模。"
            },
            {
              "sub_criteria": "设计触发规则的统计检验与灵敏度分析流程",
              "description": "为每条触发规则提供统计检验方法（如基于模拟的显著性）并设计灵敏度分析来评估阈值稳健性。",
              "score": 25,
              "evaluation_focus": "阈值设计",
              "scoring_hint": "高分：提供可执行检验并展示阈值灵敏度曲线；中分：有检验但缺灵敏度分析；低分：阈值无检验证据。"
            }
          ],
          "模型求解": [
            {
              "sub_criteria": "数值求解与仿真可信度（蒙特卡洛样本量与收敛检验）",
              "description": "实现并报告仿真样本数、重复试验收敛性检验（SE/CI收敛），并保证录取概率估计的数值稳定性。",
              "score": 25,
              "evaluation_focus": "数值可靠性",
              "scoring_hint": "高分：仿真样本≥1000且提供收敛图/SE估计；中分：样本数不足但有部分稳定性检验；低分：无收敛检验或样本过少导致不稳定。"
            },
            {
              "sub_criteria": "模型估计的统计显著性与不确定性量化（α_i/σ估计）",
              "description": "提供老师效应α_i与方差分量的估计值、标准误或后验分布，并指出显著性与影响方向。",
              "score": 25,
              "evaluation_focus": "不确定性量化",
              "scoring_hint": "高分：完整报告估计量与CI/后验并解释其对录取的影响；中分：有估计但缺CI或解释薄弱；低分：估计缺失或无不确定性度量。"
            },
            {
              "sub_criteria": "局部ILP/启发式求解的可行性与运行日志",
              "description": "运行局部重分配ILP或启发式，报告求解状态、时间、可行性或残余，并提供日志供审计。",
              "score": 25,
              "evaluation_focus": "优化可行性",
              "scoring_hint": "高分：ILP求解有可行解并报告日志与时间限制；中分：求解尝试但无最终可行解记录；低分：未尝试或无求解证据。"
            },
            {
              "sub_criteria": "灵敏度分析与情景比较（参数变化对结构指标响应）",
              "description": "在若干情景下重复仿真并绘制关键指标随参数（如λ_max、老师可用性、阈值k）变化的响应曲线，识别稳健/脆弱区。",
              "score": 25,
              "evaluation_focus": "敏感性",
              "scoring_hint": "高分：至少3个情景并给出响应曲线与阈值建议；中分：情景有限或无图示；低分：无情景分析。"
            }
          ],
          "代码实现": [
            {
              "sub_criteria": "可复现代码与随机种子管理（仿真/模型/日志）",
              "description": "交付可运行代码、依赖列表与随机种子，能从输入数据复现结构性指标、模型估计与仿真结果。",
              "score": 25,
              "evaluation_focus": "可复现性",
              "scoring_hint": "高分：代码可直接运行并重现关键表/图，含requirements和seed；中分：代码可运行但需手工调整或无seed；低分：代码缺失或不可运行。"
            },
            {
              "sub_criteria": "计算效率与求解器集成（并行仿真/ILP调用）",
              "description": "代码应支持并行仿真与与Gurobi/CPLEX或CBC的ILP接口，并报告运行时间与资源消耗。",
              "score": 25,
              "evaluation_focus": "效率/集成",
              "scoring_hint": "高分：并行化实施，ILP调用稳定并给出时间记录；中分：单线程可运行或有限的求解器集成；低分：无并行或无法调用求解器。"
            },
            {
              "sub_criteria": "输出与日志的机器可读性（诊断表/JSON/CSV）",
              "description": "输出结构化机器可读文件：结构性指标CSV、仿真结果JSON、触发规则表与诊断日志，便于后续审计与可视化。",
              "score": 25,
              "evaluation_focus": "输出规范",
              "scoring_hint": "高分：所有关键产出结构化并给出样例文件；中分：部分产出机器可读；低分：仅手工报表或无标准格式。"
            },
            {
              "sub_criteria": "代码文档与使用说明（复现/部署步骤）",
              "description": "提供README/使用手册说明数据格式、运行步骤、参数配置与常见问题，便于非开发人员使用与审计。",
              "score": 25,
              "evaluation_focus": "文档性",
              "scoring_hint": "高分：文档完整含示例与参数说明；中分：文档基本但缺示例；低分：无文档或说明不清。"
            }
          ],
          "结果分析": [
            {
              "sub_criteria": "诊断报告：结构性指标解读与异常列表",
              "description": "报告应对结构性指标进行解释，列出异常老师/高λ对/重复学生组并说明潜在影响与证据强度。",
              "score": 25,
              "evaluation_focus": "诊断解读",
              "scoring_hint": "高分：清晰列出异常并解释其对录取的量化影响；中分：列出异常但解释浅；低分：仅给指标数值无解读。"
            },
            {
              "sub_criteria": "补救建议的可操作性与仿真验证（局部重分配或事后校正）",
              "description": "提供至少一套经仿真验证的补救措施，说明实施步骤、影响评估与受影响人员范围，并给出实施前后指标对比。",
              "score": 25,
              "evaluation_focus": "补救验证",
              "scoring_hint": "高分：补救措施经仿真验证且给出量化改进；中分：提出补救且有部分验证；低分：补救建议无验证或不可操作。"
            },
            {
              "sub_criteria": "触发规则与操作性阈值的建议与灵敏度报告",
              "description": "报告应给出触发规则的默认阈值、推荐值区间与灵敏度分析结果，便于决策者配置审计流程。",
              "score": 25,
              "evaluation_focus": "规则建议",
              "scoring_hint": "高分：提供量化阈值及灵敏度区间并建议操作流程；中分：提供阈值但无灵敏度区间；低分：无明确阈值建议。"
            },
            {
              "sub_criteria": "结果可视化与决策支持（录取概率热图/响应曲线）",
              "description": "通过可视化（录取概率热图、关键指标随参数变化曲线）支持决策，并将可视化与机器可读报告连接起来。",
              "score": 25,
              "evaluation_focus": "可视化",
              "scoring_hint": "高分：有直观可读的热图与响应曲线并附机读数据；中分：有部分图表但不完整；低分：无或图表无法解释结论。"
            }
          ]
        }
      }
    }
  }
}